/**
 * skylark-uglifyjs - A version of uglifyjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./utils","./ast","./output","./parse","./scope"],function(e,n,t,i,r){"use strict";const{AST_Accessor:Je,AST_Array:ye,AST_Arrow:h,AST_Assign:xe,AST_AsyncArrow:_,AST_AsyncDefun:ne,AST_AsyncFunction:te,AST_AsyncGeneratorDefun:ie,AST_AsyncGeneratorFunction:re,AST_Atom:o,AST_Await:Ke,AST_BigInt:s,AST_Binary:we,AST_Block:Qe,AST_BlockScope:Xe,AST_BlockStatement:ke,AST_Boolean:l,AST_Break:M,AST_Call:Ee,AST_Case:Ze,AST_Catch:oe,AST_Class:en,AST_ClassExpression:se,AST_ClassField:nn,AST_ClassGetter:a,AST_ClassInit:tn,AST_ClassInitBlock:f,AST_ClassMethod:p,AST_ClassProperty:c,AST_ClassSetter:u,AST_Conditional:Te,AST_Const:ae,AST_Constant:T,AST_Continue:C,AST_Debugger:rn,AST_Default:on,AST_DefaultValue:Se,AST_DefClass:fe,AST_Definitions:sn,AST_Defun:an,AST_Destructured:De,AST_DestructuredArray:fn,AST_DestructuredKeyVal:cn,AST_DestructuredObject:un,AST_Directive:w,AST_Do:ln,AST_Dot:pn,AST_DWLoop:dn,AST_EmptyStatement:Z,AST_Exit:hn,AST_ExportDeclaration:ce,AST_ExportDefault:ue,AST_ExportReferences:v,AST_False:le,AST_Finally:A,AST_For:_n,AST_ForEnumeration:vn,AST_ForIn:E,AST_Function:gn,AST_Hole:pe,AST_If:ze,AST_Import:S,AST_Infinity:g,AST_IterationStatement:mn,AST_Jump:j,AST_LabeledStatement:de,AST_Lambda:Ae,AST_LambdaDefinition:bn,AST_LambdaExpression:yn,AST_Let:xn,AST_LoopControl:wn,AST_NaN:m,AST_New:b,AST_NewTarget:y,AST_Node:Oe,AST_Null:D,AST_Number:qe,AST_Object:kn,AST_ObjectKeyVal:En,AST_ObjectGetter:x,AST_ObjectProperty:Tn,AST_ObjectIdentity:Sn,AST_ObjectMethod:k,AST_ObjectSetter:z,AST_PropAccess:Fe,AST_RegExp:W,AST_Return:Me,AST_Scope:Ce,AST_Sequence:je,AST_SimpleStatement:He,AST_Spread:Pe,AST_Statement:O,AST_String:G,AST_Sub:Dn,AST_Super:$,AST_Switch:zn,AST_SwitchBranch:H,AST_Symbol:An,AST_SymbolCatch:he,AST_SymbolClass:q,AST_SymbolConst:F,AST_SymbolDeclaration:On,AST_SymbolDefun:qn,AST_SymbolExport:P,AST_SymbolFunarg:Ye,AST_SymbolImport:_e,AST_SymbolLambda:ve,AST_SymbolLet:Y,AST_SymbolRef:Ne,AST_SymbolVar:Fn,AST_Template:Mn,AST_This:N,AST_Throw:Cn,AST_Toplevel:jn,AST_True:R,AST_Try:Hn,AST_Unary:Pn,AST_UnaryPostfix:Yn,AST_UnaryPrefix:Re,AST_Undefined:Ie,AST_Var:ee,AST_VarDef:Ue,AST_While:Nn,AST_With:Rn,AST_Yield:In,TreeTransformer:Un,TreeWalker:Be,first_in_statement:I,root_expr:Bn,is_arrow:Ln,is_generator:Gn,is_statement:Vn,is_async:Wn,walk_body:U,walk_lambda:B}=n,{all:Le,defaults:L,Dictionary:$n,find_if:ge,HOP:J,List:Jn,makePredicate:K,member:Kn,noop:me,push_uniq:be,remove:Q,return_false:Ge,return_null:X,return_true:V,return_this:Qn}=e,{JS_Parse_Error:Xn,parse:Zn,PRECEDENCE:et,decode_escape_sequence:nt,is_identifier_string:tt,UNARY_POSTFIX:it}=i,rt=t["OutputStream"],{is_lhs:ot,is_funarg:st,unary_side_effects:at}=r;function ft(e,n){if(!(this instanceof ft))return new ft(e,n);Un.call(this,this.before,this.after),this.options=L(e,{annotations:!n,arguments:!n,arrows:!n,assignments:!n,awaits:!n,booleans:!n,collapse_vars:!n,comparisons:!n,conditionals:!n,dead_code:!n,default_values:!n,directives:!n,drop_console:!1,drop_debugger:!n,evaluate:!n,expression:!1,functions:!n,global_defs:!1,hoist_exports:!n,hoist_funs:!1,hoist_props:!n,hoist_vars:!1,ie:!1,if_return:!n,imports:!n,inline:!n,join_vars:!n,keep_fargs:n,keep_fnames:!1,keep_infinity:!1,loops:!n,merge_vars:!n,module:!1,negate_iife:!n,objects:!n,optional_chains:!n,passes:1,properties:!n,pure_funcs:null,pure_getters:!n&&"strict",reduce_funcs:!n,reduce_vars:!n,rests:!n,sequences:!n,side_effects:!n,spreads:!n,strings:!n,switches:!n,templates:!n,top_retain:null,toplevel:!(!e||!e.module&&!e.top_retain),typeofs:!n,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!n,varify:!n,webkit:!1,yields:!n},!0);var e=this.options.evaluate,t=(this.eval_threshold=/eager/.test(e)?1/0:+e,this.options.global_defs);if("object"==typeof t)for(var i in t)/^@/.test(i)&&J(t,i)&&(t[i.slice(1)]=Zn(t[i],{expression:!0}));!0===this.options.inline&&(this.options.inline=4),this.drop_fargs=this.options.keep_fargs?Ge:function(e,n){var t;return!e.length_read&&((t=e.name)?t.fixed_value()===e&&!(t=t.definition()).direct_access&&(t=t.escaped)&&1!=t.depth:n&&"Call"==n.TYPE&&n.expression===e)},this.options.module&&(this.directives["use strict"]=!0);var r=this.options.pure_funcs,n=("function"==typeof r?this.pure_funcs=r:"string"==typeof r?this.pure_funcs=function(e){var n;return e instanceof Ee?n=e.expression:e instanceof Mn&&(n=e.tag),!(n&&r===n.print_to_string())}:Array.isArray(r)?this.pure_funcs=function(e){var n;return e instanceof Ee?n=e.expression:e instanceof Mn&&(n=e.tag),!(n&&Kn(n.print_to_string(),r))}:this.pure_funcs=V,this.options.sequences),o=(this.sequences_limit=1==n?800:0|n,this.options.top_retain),e=(o instanceof RegExp?this.top_retain=function(e){return o.test(e.name)}:"function"==typeof o?this.top_retain=o:o&&("string"==typeof o&&(o=o.split(/,/)),this.top_retain=function(e){return Kn(e.name,o)}),this.options.toplevel);this.toplevel="string"==typeof e?{funcs:/funcs/.test(e),vars:/vars/.test(e)}:{funcs:e,vars:e}}function ct(e,n){var t,i=n.get_property();if(!(i instanceof Oe)){if(e instanceof ye){n=e.elements;if("length"==i)return Jt(n.length,e);"number"==typeof i&&i in n&&(t=n[i])}else if(e instanceof Ae){if("length"==i)return e.length_read=!0,Jt(e.argnames.length,e)}else if(e instanceof kn)for(var i=""+i,r=e.properties,o=r.length;0<=--o;){if(!qr(r[o]))return;t||r[o].key!==i||(t=r[o].value)}return t instanceof Ne&&t.fixed_value()||t}}function ut(e,n,t,i,r,o,s){var a=n.parent(r);if(!(e.option("unsafe")&&a instanceof pn&&(f=i,u=a.property,f instanceof l?eo.Boolean[u]:f instanceof qe?eo.Number[u]:f instanceof G?eo.String[u]:"valueOf"!=u&&(f instanceof ye?eo.Array[u]:f instanceof Ae?eo.Function[u]:f instanceof kn?eo.Object[u]:f instanceof W&&eo.RegExp[u]&&!f.value.global)))){var f,c,u=ot(t,a);if(u)return u;if(0!=r||!i||!i.is_constant()){if(a instanceof ye)return ut(e,n,a,a,r+1);if(a instanceof xe)switch(a.operator){case"=":return ut(e,n,a,i,r+1,o,s);case"&&=":case"||=":case"??=":return ut(e,n,a,a,r+1);default:return}return a instanceof we?$e[a.operator]?ut(e,n,a,a,r+1):void 0:a instanceof Ee?!o&&a.expression===t&&!a.is_expr_pure(e)&&(!(i instanceof yn)||!(a instanceof b)&&i.contains_this()):a instanceof Te?a.condition===t?void 0:ut(e,n,a,a,r+1):a instanceof vn?a.init===t:a instanceof En?a.value!==t?void 0:(f=n.parent(r+1),ut(e,n,f,f,r+2)):a instanceof Fe?a.expression!==t?void 0:(c=ct(i,a),(!o||s)&&ut(e,n,a,c,r+1)):a instanceof je&&a.tail_node()===t?ut(e,n,a,i,r+1,o,s):void 0}}}function lt(e){return e instanceof en||e instanceof Ae}function pt(e){return e instanceof en||e instanceof an||e instanceof gn}function dt(e){return"arguments"==e.name&&e.scope.uses_arguments}function ht(e,n){do{if(e===n)return;if(n instanceof Ce)return 1}while(n=n.parent_scope)}function _t(e,n,t){var i=e.redef||e.definition();return(!e.in_arg||!st(i))&&Le(i.orig,function(e){return e instanceof F||e instanceof Y?e instanceof _e||n&&cr(n,e):!(t&&e instanceof ve)})}function vt(e,n,t,i){return i instanceof xe?"="==i.operator&&i.right===t:i instanceof Ee?i.expression!==t||i instanceof b:i instanceof nn?i.value===t&&!i.static:i instanceof hn?i.value===t&&n.resolve()!==e.scope.resolve():i instanceof Ue&&i.value===t}function gt(e,n){var t=Ve(Ne,e);return t.fixed=n||Ve(Ie,e),t}function mt(t,i){return function(e){var n=t(e),e=gt(n,i),n=n.definition();return n.references.push(e),n.replaced++,e}}function bt(e,n,t){t.assignments=0,t.bool_return=0,t.drop_return=0,t.cross_loop=!1,t.direct_access=!1,t.escaped=[],t.fixed=!t.const_redefs&&!t.scope.pinned()&&!n.exposed(t)&&!(t.init instanceof yn&&t.init!==t.scope)&&t.init,t.reassigned=0,t.recursive_refs=0,t.references=[],t.single_use=void 0}function yt(e,n,t){t.variables.each(function(e){bt(0,n,e)})}function xt(t,i,r){r.fn_defs=[],r.variables.each(function(e){bt(0,i,e);var n=e.init;n instanceof bn&&(r.fn_defs.push(n),n.safe_ids=null),null===e.fixed?(e.safe_ids=t.safe_ids,zt(t,e)):e.fixed&&(t.loop_ids[e.id]=t.in_loop,zt(t,e))}),r.may_call_this=function(){r.may_call_this=r.contains_this()?V:Ge},r.uses_arguments&&r.each_argname(function(e){e.definition().last_ref=!1}),i.option("ie")&&r.variables.each(function(e){var n=e.orig[0].definition();n!==e&&(n.fixed=!1)})}function wt(e,n){n=n.safe_ids;return void 0===n||n===e.safe_ids}function kt(e,n){var t=e.fn_scanning;(e.fn_scanning=n).walk(e),e.fn_scanning=t}function Et(t,i){i.enclosed.forEach(function(e){var n;i.variables.get(e.name)===e||Ot(t,e)||(e.single_use=!1,(n="function"==typeof(n=e.fixed)?n():n)instanceof Ae&&void 0!==n.safe_ids)||(e.fixed=!1)})}function Tt(e,n,t){var i,r=t.safe_ids;void 0!==r&&!1!==r&&(t.parent_scope.resolve().may_call_this===V?Kn(t,e.fn_visited)&&Et(e,t):r?(i=Kn(t,e.fn_visited),r===e.safe_ids?i||kt(e,t):i?Et(e,t):t.safe_ids=!1):e.fn_scanning&&e.fn_scanning!==n.scope.resolve()?t.safe_ids=!1:(t.safe_ids=e.safe_ids,kt(e,t)))}function St(n,e){var t=e.fn_defs,i=e.may_call_this===V?t:t.filter(function(e){return!1===e.safe_ids||(e.safe_ids=n.safe_ids,kt(n,e),!1)});Dt(n),i.forEach(function(e){e.safe_ids=n.safe_ids,kt(n,e)}),t.forEach(function(e){e.safe_ids=void 0}),e.fn_defs=void 0,e.may_call_this=void 0}function d(e,n){var t=Object.create(e.safe_ids);n||(t.seq={}),e.safe_ids=t}function Dt(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function zt(e,n){e.safe_ids[n.id]={}}function At(e,n){e.references.push(n),!1!==e.last_ref&&(e.last_ref=n)}function Ot(e,n){var t,i,r;return"m"!=n.single_use&&((t=e.safe_ids[n.id])?((i=J(e.safe_ids,n.id))||(r=e.safe_ids.seq,t.read?t.read!==r&&(t.read=!0):t.read=r),null==n.fixed?!dt(n)&&!(n.global&&"arguments"==n.name||(e.loop_ids[n.id]=null,n.fixed=Ve(Ie,n.orig[0]),i&&(n.safe_ids=void 0),0)):!t.assign||t.assign===e.safe_ids):n.fixed instanceof bn)}function qt(e,n,t){if(!t){if(st(n)&&n.scope.uses_arguments&&!e.has_directive("use strict"))return;if(!Le(n.orig,function(e){return!(e instanceof F)}))return}if(void 0===n.fixed)return t||Le(n.orig,function(e){return!(e instanceof Y)});if(!1!==n.fixed&&0!==n.fixed){t=e.safe_ids[n.id];if(n.safe_ids)return n.safe_ids[n.id]=!1,n.safe_ids=void 0,null===n.fixed||J(e.safe_ids,n.id)&&!t.read;if(!J(e.safe_ids,n.id)){if(!t)return;if(t.read||e.in_loop){var i=e.find_parent(Xe);if(i instanceof en)return;if(n.scope.resolve()!==i.resolve())return}t.assign=!(!t.assign||t.assign===e.safe_ids)||e.safe_ids}if(null!=n.fixed&&t.read){if(t.read!==e.safe_ids.seq)return;if(e.loop_ids[n.id]!==e.in_loop)return}return Ot(e,n)&&Le(n.orig,function(e){return!(e instanceof ve)})}}function Ft(e){var n;return!!e&&(e instanceof xe?"="==(n=e.operator)?Ft(e.right):!$e[n.slice(0,-1)]:e instanceof je?Ft(e.tail_node()):e.is_constant()||lt(e)||e instanceof Sn)}function Mt(e,n,t,i,r,o,s){var a,f=e.parent(o);if(!r||!r.is_constant())if(vt(n,t,i,f))n.escaped.push(f),!(1<s)||r&&r.is_constant_expression(t)||(s=1),(!n.escaped.depth||n.escaped.depth>s)&&(n.escaped.depth=s),n.scope.resolve()!==t.resolve()&&(n.escaped.cross_scope=!0),n.fixed&&(n.fixed.escaped=n.escaped);else{if(c=i,(a=f)instanceof ye||(a instanceof we?$e[a.operator]:a instanceof Te?a.condition!==c:a instanceof je?a.tail_node()===c:a instanceof Pe))Mt(e,n,t,f,f,o+1,s);else if(f instanceof En&&f.value===i){var c=e.parent(o+1);Mt(e,n,t,c,c,o+2,s)}else if(f instanceof Fe&&f.expression===i&&(Mt(e,n,t,f,r=ct(r,f),o+1,s+1),r))return;0<o||f instanceof Ee&&f.expression===i||f instanceof je&&f.tail_node()!==i||f instanceof He||f instanceof Pn&&!at[f.operator]||(n.direct_access=!0,n.fixed&&(n.fixed.direct_access=!0))}}function Ct(e){var n;e instanceof Dn&&(n=e.expression)instanceof Ne&&dt(n=n.definition())&&((e=(e=e.property).is_constant()?e.value:e)instanceof Oe||Pr.test(e))&&(n.reassigned++,(e instanceof Oe?n.scope.argnames:[n.scope.argnames[e]]).forEach(function(e){e instanceof Ye&&(e.definition().fixed=!1)}))}function jt(n,t){var i,r;return function(){var e=n();return r=i!==e?t(i=e):r}}function Ht(c,n,e,u,l){var p=new Be(function(i){var t,r,o,s,a,f,e;return i instanceof Se?(Yt(i),d(c,!0),i.value.walk(c),Dt(c),(e=u)&&(t=n,r=i,o=e,u=function(){var e,n;return a===r?r:(e=o(),(n=ir(t,e,!0))instanceof Oe?a=r:s!==e&&(s=e,a=void 0===n?We(r,[e,r.value]):e),a)}),i.name.walk(p),u=e):i instanceof fn?(Yt(i),e=u,i.elements.forEach(function(n,t){if(n instanceof pe)return Yt(n);e&&(u=jt(e,function(e){return Ve(Dn,n,{expression:e,property:Ve(qe,n,{value:t})})})),n.walk(p)}),i.rest&&(e&&(u=n.option("rests")&&jt(e,function(e){if(!(e instanceof ye))return i;for(var n=0,t=i.elements.length;n<t;n++)if(e.elements[n]instanceof Pe)return i;return(f=f||Ve(ye,i,{})).elements=e.elements.slice(t),f})),i.rest.walk(p)),u=e):i instanceof un?(Yt(i),e=u,i.properties.forEach(function(i){Yt(i),i.key instanceof Oe&&(d(c),i.key.walk(c),Dt(c)),e&&(u=jt(e,function(e){var n=i.key,t=Dn;return"string"==typeof n&&(tt(n)?t=pn:n=Jt(n,i)),Ve(t,i,{expression:e,property:n})})),i.value.walk(p)}),i.rest&&(u=!1,i.rest.walk(p)),u=e):l(i,u,function(){for(var e=c.stack.length,n=0,t=p.stack.length-1;n<t;n++)c.stack.push(p.stack[n]);i.walk(c),c.stack.length=e}),!0});e.walk(p)}function Pt(i,e,r){var n,o=this,s=(o.inlined=!1,i.parent()),t=!Wn(o)&&!Gn(o),a=!t,f=!1,c=(o.walk(new Be(function(e){return a?f=!0:e instanceof Me?a=!0:e instanceof Ce&&e!==o||void 0})),f&&d(i,t),xt(i,r,o),!o.uses_arguments||i.has_directive("use strict")),u=(o.argnames.forEach(function(n,e){var t=s.args[e];Ht(i,r,n,function(){var e=o.argnames.indexOf(n),e=e<0?t:s.args[e];return(e=e instanceof je&&e.expressions.length<2?e.expressions[0]:e)||Ve(Ie,s)},l)}),o.rest),t=(u&&Ht(i,r,u,r.option("rests")&&function(){return o.rest!==u?u:((n=n||Ve(ye,o,{})).elements=s.args.slice(o.argnames.length),n)},l),B(o,i),i.safe_ids);return St(i,o),f||(i.safe_ids=t),!0;function l(e,n){var t=e.definition();n&&c&&void 0===t.fixed?(zt(i,t),i.loop_ids[t.id]=i.in_loop,t.fixed=n,t.fixed.assigns=[e]):t.fixed=!1}}function Yt(e){e._squeezed=!1,e._optimized=!1,e instanceof Xe&&(e._var_names=void 0),e instanceof Ne&&(e.fixed=void 0)}function Nt(t,i){return this.transform(new Un(function(e,n){return e instanceof Se?((e=e.clone()).name=e.name.transform(this),e):e instanceof De?(n(e=e.clone(),this),e):e instanceof cn?((e=e.clone()).value=e.value.transform(this),e):e.convert_symbol(t,i)}))}function Rt(e,n){e=Ve(e,this);return n(e,this)||e}function It(e){var n=e.definition();n.assignments++,n.references.push(e)}function Ut(n,t){var i=new Be(function(e){return e instanceof Se?(e.value.walk(t),e.name.walk(i),!0):e instanceof cn?(e.key instanceof Oe&&e.key.walk(t),e.value.walk(i),!0):n(e)});this.walk(i)}function Bt(e){return e(this)}function Lt(n,t){var i=!1,r=new Be(function(e){return!!i||(e instanceof Se?t?(e.name.walk(r),!0):i=!0:e instanceof cn?!t&&e.key instanceof Oe?i=!0:(e.value.walk(r),!0):n(e)?i=!0:void 0)});return this.walk(r),i}function Gt(e){return e instanceof ie||e instanceof re}function Vt(e){var n=0,t=e.self();do{if(t.variables)return t}while(t=e.parent(n++))}function Wt(e,n,t,i,r,o){for(var s;s=e.parent(n++);t=s){if(s===i)return!1;if(o&&s instanceof Ae){if(s.name||Wn(s)||Gn(s))return!0}else if(s instanceof Hn){if(s.bfinally&&s.bfinally!==t)return!0;if(r&&s.bcatch&&s.bcatch!==t)return!0}}return!1}function $t(e,n){if(e instanceof o)return!0;if(e instanceof Sn)return!0;if(e instanceof Fe){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof Ne){if(e.is_immutable())return!1;e=e.fixed_value()}return e?!!e.tail_node().is_constant()||$t(e,n):!0}return e instanceof Ne&&(!!e.is_immutable()||(e=e.definition(),n.exposed(e)&&Yr[e.name]))}function Ve(e,n,t){return t?(t.start=n.start,t.end=n.end):t=n,new e(t)}function We(e,n){return 1==n.length?n[0]:Ve(je,e,{expressions:n.reduce(Zt,[])})}function Jt(e,n){switch(typeof e){case"string":return Ve(G,n,{value:e});case"number":return isNaN(e)?Ve(m,n):isFinite(e)?1/e<0?Ve(Re,n,{operator:"-",expression:Ve(qe,n,{value:-e})}):Ve(qe,n,{value:e}):e<0?Ve(Re,n,{operator:"-",expression:Ve(g,n)}):Ve(g,n);case"boolean":return Ve(e?R:le,n);case"undefined":return Ve(Ie,n);default:if(null===e)return Ve(D,n);if(e instanceof RegExp)return Ve(W,n,{value:e});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof e}))}}function Kt(e){return e instanceof Fe||fi(e)&&"eval"==e.name}function Qt(e,n,t){var i=!1;return"Call"==e.TYPE?i=e.expression===n&&Kt(t):e instanceof Mn?i=e.tag===n&&Kt(t):e instanceof Re&&(i="delete"==e.operator||"typeof"==e.operator&&fi(t)),i?We(n,[Ve(qe,n,{value:0}),t]):t}function Xt(e,n){var i=new $n;return e.walk(new Be(function(e){var n;e instanceof Ne&&(n=e.definition(),(e=e.fixed)&&i.has(n.id)?i.get(n.id)!==e&&i.set(n.id,!1):i.set(n.id,e))})),0<i.size()&&n.walk(new Be(function(e){var n,t;e instanceof Ne&&(n=e.definition(),t=e.fixed)&&i.has(n.id)&&i.get(n.id)!==t&&(e.fixed=!1)})),n}function Zt(e,n){return n instanceof je?[].push.apply(e,n.expressions):e.push(n),e}function ei(e){return e instanceof ae||e instanceof fe||e instanceof xn}function ni(e){var n,t;return e instanceof bn?(n=e.name.definition(),t=e.name.scope,n.scope===t||Le(n.references,function(e){var n=e.scope;do{if(n===t)return!0}while(n=n.parent_scope)})):!ei(e)}function ti(e){if(null===e)return[];if(e instanceof ke)return Le(e.body,ni)?e.body:[e];if(e instanceof Z)return[];if(Vn(e))return[e];throw new Error("Can't convert thing to statement array")}function ii(e){return null===e||e instanceof Z||e instanceof ke&&0==e.body.length}function ri(e){return Le(e.body,function(e){return ii(e)||e instanceof an||e instanceof ee&&ui(e)})}function oi(e){return e instanceof mn&&e.body instanceof ke?e.body:e}function si(e){if("Call"!=e.TYPE)return!1;for(;(e=e.expression)instanceof Fe;);return e instanceof yn?!Ln(e):si(e)}function ai(e){var n,t=e.expression;return!(t.name||e instanceof b&&(n=!1,t.walk(new Be(function(e){return!!n||(e instanceof y?n=!0:e instanceof Ce&&e!==t||void 0)})),n))}function fi(e){return e instanceof Ne&&e.definition().undeclared}function ci(e){return e.static&&e.value&&(e instanceof nn||e instanceof tn)}function ui(e){return Le(e.definitions,function(e){return!e.value})}function li(e,n){return e instanceof fe?n&&!e.extends&&Le(e.properties,function(e){return!(e.key instanceof Oe||ci(e))}):e instanceof sn?(n||e instanceof ee)&&ui(e):e instanceof ce||e instanceof ue?li(e.body,n):e instanceof bn}function pi(e,n){var t=e.lastIndexOf(n);if(t<0)return!1;for(;++t<e.length;)if(!li(e[t],!0))return!1;return!0}function di(e,n){var t;if(e.init instanceof ke&&(t=e.init,e.init=t.body.pop(),t.body.push(e)),e.init instanceof an?((t=t||Ve(ke,e,{body:[e]})).body.splice(-1,0,e.init),e.init=null):e.init instanceof He?e.init=e.init.body:ii(e.init)&&(e.init=null),t)return n?Jn.splice(t.body):t}function hi(e,l){var he,_e,ve,ge,me,be,q=F(l,function(e){return e instanceof Ae}),n=l.self(),t=0;do{if(!he&&n.variables&&(he=n),n instanceof oe)l.parent(t).bfinally&&((me=me||{}).bfinally=!0),t++;else if(n instanceof A)t++;else if(n instanceof mn)ge=!0;else{if(n instanceof Ce){be=n;break}n instanceof Hn&&(me=me||{},n.bcatch&&(me.bcatch=!0),n.bfinally)&&(me.bfinally=!0)}}while(n=l.parent(t++));var i,r,o=10;do{if(r=i,i=0,!(i=!function e(n){var t=!1,i=[];for(var r=0;r<n.length;){var o=n[r];if(o instanceof ke&&Le(o.body,ni))t=!0,e(o.body),[].splice.apply(n,[r,1].concat(o.body)),r+=o.body.length;else{if(o instanceof w){if(Kn(o.value,i)){t=!0,n.splice(r,1);continue}i.push(o.value)}o instanceof Z?(t=!0,n.splice(r,1)):r++}}return t}(e)?i:1)&&1==r)break;if(l.option("dead_code")&&!(i=!function(n,t){var e,i=t.self();i instanceof oe?i=t.parent():i instanceof de&&(i=i.body);for(var r=0,o=0,s=n.length;r<s;r++){var a,f=n[r];if(!(f instanceof wn)||oi(a=t.loopcontrol_target(f))!==i||f instanceof M&&a instanceof mn?n[o++]=f:f.label&&Q(f.label.thedef.references,f),Yi(f)){e=n.slice(r+1);break}}n.length=o,e&&e.forEach(function(e){_i(t,e,n)});return n.length!=s}(e,l)?i:2)&&2==r)break;if(l.option("if_return")&&!(i=!function(s,i){for(var r,a,o,f=!1,c=i.parent(),u=i.self(),e=q&&c&&"Call"==c.TYPE&&c.expression===u,n=q&&i.option("conditionals")&&i.option("sequences"),t=!(me&&me.bfinally&&Gt(be)),l=function(e){for(var n=0,t=e.length;0<=--t;){var i=e[t];if(i instanceof ze&&i.body instanceof Me&&1<++n)return!0}return!1}(s),p=s.length;0<=--p;){var d=s[p],h=O(p),_=s[h];if(q&&r&&!_&&d instanceof Me&&t&&!(u instanceof H)){if(!(b=d.value)){f=!0,s.splice(p,1);continue}var v=b.tail_node();if(vi(v)){f=!0,b instanceof Re?b=b.expression:v instanceof Re&&((b=b.clone()).expressions[b.expressions.length-1]=v.expression),s[p]=Ve(He,d,{body:b});continue}}if(d instanceof ze){v=Yi(d.body);if(T(v)){v.label&&Q(v.label.thedef.references,v),f=!0,(d=d.clone()).body=Ve(ke,d,{body:z(d.body,v)}),d.alternative=Ve(ke,d,{body:ti(d.alternative).concat(S(o,a))}),A(v.value,o),s[p]=d,s[p]=d.transform(i);continue}if(v&&!d.alternative&&_ instanceof j){var g=d.condition,m=p+1==h&&d.body instanceof ke;if((g=xi(g,g.negate(i),m))!==d.condition){f=!0,(d=d.clone()).condition=g;var b=d.body;d.body=Ve(ke,_,{body:S(!0,null,h+1)}),s.splice(p,1,d,b),(!q||u instanceof Qe&&u.body===s)&&(s[p]=d.transform(i));continue}}var y,m=Yi(d.alternative);if(T(m)){m.label&&Q(m.label.thedef.references,m),f=!0,(d=d.clone()).body=Ve(ke,d.body,{body:ti(d.body).concat(S(o,a))}),d.alternative=Ve(ke,d.alternative,{body:z(d.alternative,m)}),A(m.value,o),s[p]=d,s[p]=d.transform(i);continue}i.option("typeofs")&&(v&&!m&&(y=Ve(ke,u,{body:s.slice(p+1)}),tr(d.condition,null,y)),!v)&&m&&(y=Ve(ke,u,{body:s.slice(p+1)}),tr(d.condition,y))}if(d instanceof ze&&d.body instanceof Me){var g=d.body.value,x=d.body.in_bool||_ instanceof Me&&_.in_bool;if(!d.alternative&&_ instanceof Me&&(t||!g==!_.value)){f=!0,(d=d.clone()).alternative=Ve(ke,_,{body:S(!0,null,h+1)}),s[p]=d,s[p]=d.transform(i);continue}if(q&&r&&!_&&!d.alternative&&(x||g&&l||g instanceof Te&&(vi(g.consequent,i)||vi(g.alternative,i)))){f=!0,(d=d.clone()).alternative=Ve(Me,d,{value:null}),s[p]=d,s[p]=d.transform(i);continue}if(n&&!d.alternative&&(!(w=s[x=function(e){for(var n=e;0<=--n;){var t=s[n];if(!(t instanceof ee)&&!li(t))break}return n}(p)])&&e||w instanceof ze&&w.body instanceof Me)&&(_?_ instanceof He&&O(h)==s.length:!r)){f=!0;var w=[];d=d.clone(),w.push(d.condition),d.condition=We(d,w),d.alternative=Ve(ke,u,{body:S().concat(Ve(Me,u,{value:null}))}),s[p]=d.transform(i),p=x+1;continue}}d instanceof M||d instanceof hn?a=d:r&&a&&a===_&&function e(n,t,i){if(n instanceof hn){var r=!(t&&n instanceof Cn)&&E(n,!0);if(r)return f=!0,(r=D(n.value,r))?Ve(He,r,{body:r}):i?null:Ve(Z,n)}else{var o;n instanceof ze?(n.body=e(n.body,t),n.alternative&&(n.alternative=e(n.alternative,t))):n instanceof de?n.body=e(n.body,t):n instanceof Hn?n.bfinally&&a.value&&!a.value.is_constant()||(n.bcatch&&e(n.bcatch,t),(o=e(n.body.pop(),!0,!0))&&n.body.push(o)):n instanceof Qe&&!(n instanceof Ce||n instanceof zn)&&(o=e(n.body.pop(),t,!0))&&n.body.push(o)}return n}(d)}return f;function k(n){return F(i,function(e){return e===n})}function E(e,n){var t;return!!a&&a.TYPE==e.TYPE&&!!(t=e.value)&&(!(e=!(e=a.equals(e))&&t instanceof je&&(t=t.tail_node(),a.value)&&a.value.equals(t)?2:e)&&!n&&a.value instanceof je&&a.value.tail_node().equals(t)?3:e)}function T(e){if(o=!1,function(e){if(e instanceof hn){if(!(o=E(e))){if(!q)return;if(!(e instanceof Me))return;var n=e.value;if(n&&!vi(n.tail_node()))return;if(u instanceof H){if(!a)return;if(a instanceof hn&&a.value)return;o=4}}return 1}if(e instanceof wn){if(u instanceof H)if(a instanceof hn){if(!q)return;if(a.value)return;o=!0}else if(a){if(i.loopcontrol_target(a)!==c)return;o=!0}else if(!1===a)return;n=i.loopcontrol_target(e);return e instanceof C?k(oi(n)):!(n instanceof mn)&&k(n)}}(e)){for(var n=s.length;--n>p;){var t=s[n];if(t instanceof fe){if(t.name.definition().preinit)return}else if((t instanceof ae||t instanceof xn)&&!Le(t.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof On&&e.definition().preinit})}))return}return 1}}function S(e,n,t){var i=[],r=!1,o=p+1,t=(e?n?t=s.lastIndexOf(n):(n=s[t])!==a&&(a=!1):(t=s.length,a=null),s.splice(o,t-o).filter(function(e){return e instanceof bn?(i.push(e),!1):(ei(e)&&(r=!0),!0)}));return 3===e&&(t.push(Ve(He,n.value,{body:We(n.value,n.value.expressions.slice(0,-1))})),n.value=n.value.tail_node()),[].push.apply(r?t:s,i),t}function D(e,n){if(e)switch(n){case 4:return e;case 3:if(!(e instanceof je))break;case 2:return We(e,e.expressions.slice(0,-1))}}function z(e,n){for(var t,e=ti(e),i=e;(t=i[i.length-1])!==n;)i=t.body;i.pop();var r=n.value;return(r=o?D(r,o):r)&&i.push(Ve(He,r,{body:r})),e}function A(e,n){if(n&&e){switch(n){case 4:return;case 3:case 2:e=e.tail_node()}Xt(e,a.value)}}function O(e){r=!0;for(var n=e;++n<s.length;){var t=s[n];if(!li(t)){if(!(t instanceof ee))break;r=!1}}return n}}(e,l)?i:3)&&3==r)break;if(l.option("awaits")&&l.option("side_effects")&&!(i=!function(e,n){if(!(!q||me&&me.bfinally)){for(var t=!1,i=e.length;0<=--i;){var r=e[i];if(!(r instanceof He))break;var o=r.body;if(!(o instanceof Ke))break;o=o.expression;if(!yr(n,o))break;if(t=!0,o=o.drop_side_effect_free(n,!0)){r.body=o;break}}return e.length=i+1,t}}(e,l)?i:4)&&4==r)break;if(4<=l.option("inline")&&!(i=!function(e,n){var t=!1,i=e.length-1;{var r;q&&0<=i&&(r=me&&me.bfinally&&Gt(be),s=e[i].try_inline(n,he,r))&&(e[i--]=s,t=!0)}for(var o=ge&&me&&me.bfinally?"try":ge;0<=i;i--){var s;(s=e[i].try_inline(n,he,!0,o))&&(e[i]=s,t=!0)}return t}(e,l)?i:5)&&5==r)break;if(0<l.sequences_limit){if(!(i=!function(n,e){if(!(n.length<2)){for(var t=[],i=0,r=0,o=n.length;r<o;r++){var s=n[r];s instanceof He?(t.length>=e.sequences_limit&&a(),Zt(t,s.body)):(li(s)||a(),n[i++]=s)}return a(),(n.length=i)!=o}function a(){var e;t.length&&(e=We(t[0],t),n[i++]=Ve(He,e,{body:e}),t=[])}}(e,l)?i:6)&&6==r)break;if(!(i=!function(e,n){for(var t,i=!1,r=0,o=0;o<e.length;o++){var s,a=e[o];if(t&&(a instanceof hn?!a.value&&Gt(be)||(a.value=p(a.value||Ve(Ie,a)).optimize(n)):a instanceof _n?a.init instanceof sn||(s=!1,t.body.walk(new Be(function(e){return!!(s||e instanceof Ce)||(e instanceof we&&"in"==e.operator?s=!0:void 0)})),s)||(a.init?a.init=p(a.init):(a.init=t.body,r--,i=!0)):a instanceof E?ei(a.init)||(a.object=p(a.object)):a instanceof ze?a.condition=p(a.condition):(a instanceof zn||a instanceof Rn)&&(a.expression=p(a.expression))),n.option("conditionals")&&a instanceof ze){var f=[],c=d(a.body,f),u=d(a.alternative,f);if(!1!==c&&!1!==u&&0<f.length){var l=f.length;f.push(Ve(ze,a,{condition:a.condition,body:c||Ve(Z,a.body),alternative:u})),f.unshift(r,1),[].splice.apply(e,f),o+=l,r+=l+1,i=!(t=null);continue}}e[r++]=a,t=a instanceof He?a:null}return e.length=r,i;function p(e){r--,i=!0;var n=t.body;return We(n,[n,e])}}(e,l)?i:7)&&7==r)break}if(l.option("join_vars")&&!(i=!function(e){for(var r,o=!1,n=0,t=-1;n<e.length;n++){var i,s,a,f=e[n],c=e[t];if(f instanceof sn)c&&c.TYPE==f.TYPE?(c.definitions=c.definitions.concat(f.definitions),o=!0):r&&r.TYPE==f.TYPE&&ui(f)?(r.definitions=r.definitions.concat(f.definitions),o=!0):f instanceof ee?((s=_(c,f))?(s.length&&(c.body=We(c,s),t++),o=!0):t++,e[t]=r=f):e[++t]=f;else{if(f instanceof hn)f.value=u(f.value);else if(f instanceof _n)if(s=h(c,f.init))o=!0,f.init=s.length?We(f.init,s):null;else{if(c instanceof ee&&(!f.init||f.init.TYPE==c.TYPE)){f.init&&(c.definitions=c.definitions.concat(f.init.definitions)),f=f.clone(),r=f.init=c,e[t]=l(f),o=!0;continue}if(r&&f.init&&r.TYPE==f.init.TYPE&&ui(f.init))r.definitions=r.definitions.concat(f.init.definitions),f.init=null,o=!0;else if(f.init instanceof ee&&(r=f.init,s=_(c,f.init))){if(o=!0,0==s.length){e[t]=l(f);continue}c.body=We(c,s)}}else if(f instanceof vn)r&&r.TYPE==f.init.TYPE&&(i=r.definitions.slice(),f.init=f.init.definitions[0].name.convert_symbol(Ne,function(e,n){i.push(Ve(Ue,n,{name:n,value:null})),n.definition().references.push(e)}),r.definitions=i,o=!0),f.object=u(f.object);else if(f instanceof ze)f.condition=u(f.condition);else if(f instanceof He){if(s=h(c,f.body)){if(o=!0,!s.length)continue;f.body=We(f.body,s)}else if(c instanceof sn&&(a=e[n+1])&&c.TYPE==a.TYPE&&(a=a.definitions[0]).value){o=!0,a.value=We(f,[f.body,a.value]);continue}}else(f instanceof zn||f instanceof Rn)&&(f.expression=u(f.expression));e[++t]=r?l(f):f}}return e.length=t+1,o;function u(e){var n=h(c,e,1);if(!n)return e;o=!0;var t=e.tail_node();return n[n.length-1]!==t&&n.push(t.left),We(e,n)}function l(e){return e.transform(new Un(function(e,n,t){var i;return e instanceof sn?r!==e&&r.TYPE==e.TYPE&&!((i=this.parent())instanceof vn&&i.init===e)&&ui(e)?(r.definitions=r.definitions.concat(e.definitions),o=!0,i instanceof _n&&i.init===e?null:t?Jn.skip:Ve(Z,e)):e:!(e instanceof ce)&&!(e instanceof Ce)&&Vn(e)?void 0:e}))}}(e)?i:8)&&8==r)break;!l.option("collapse_vars")||!function(i,p){if(!be.pinned()){for(var d,P,Y=new $n,h=[],N=!1,_=new $n,r=i.length,u=new Un(function(e,n){if(D)return e;if(!S){if(e===v[g]){if(++g<v.length)return F(e,u);S=!0,(l=(m?j:ne)(e,0))===e&&(D=!0)}return e}var t,i,r,o=u.parent();if(!b&&Z(e,o)&&(b=o),U&&I&&A&&!b&&e instanceof xe&&"="!=e.operator&&e.left.equals(y))return z++,N=!0,Oe.info("Cascading {this} [{start}]",e),A=!1,k=ue(y),e.right.transform(u),fe(a),i=D?a:(D=!0,Ve(we,a,{operator:U,left:y.fixed&&y.definition().fixed?y.fixed.to_binary(a):y,right:T})),Ve(xe,e,{operator:"=",left:e.left,right:Ve(we,e,{operator:e.operator.slice(0,-1),left:i,right:e.right})});if(function(e,n){if(e===T)return 1;if(n instanceof _n&&e!==n.init)return 1;if(e instanceof xe)return"="!=e.operator&&y.equals(e.left);if(e instanceof Ee)return y instanceof Fe&&y.equals(e.expression)&&(!(T instanceof yn)||T.contains_this());return e instanceof en?!p.has_directive("use strict"):e instanceof rn||(e instanceof an?B&&y.name===e.name.name:e instanceof cn?e.key instanceof Oe:e instanceof dn||e instanceof wn||e instanceof Hn||e instanceof Rn)}(e,o))return D=!0,e;if(e.single_use)return e;if(e instanceof On||!(I&&y.equals(e)||w&&(t=w(e,this))))return function(e,n){if(e instanceof Ne){if(e.is_declared(p)){if(e.fixed_value())return;if(_t(e))return!(n instanceof Fe&&n.expression===e)&&dt(e.definition())}else if(X(e,n))return;if(!Q)return 1;w=!1}return}(e,o)?(D=!0,e):((ee(e,o)||L(e))&&(l=e)instanceof Ce&&(D=!0),e instanceof Je||e instanceof De?(r=A,A=!1,n(e,u),A=r,q(e)):e instanceof Se?(e.name=e.name.transform(u),r=A,A=!1,e.value=e.value.transform(u),A=r,q(e)):!(e instanceof Xe)||e instanceof Ce||e.variables&&e.variables.all(function(e){return!W.has(e.name)&&!k.has(e.name)})?F(e,u)?q(e):void 0:(r=A,A=!1,F(e,u)||n(e,u),A=r,q(e)));if(!A||b&&(t||!J||!Q))return t||m||(D=!0),e;if(ot(e,o))return m&&!t&&(c=!0),e;if(!t&&R&&e.fixed!==y.fixed)return D=!0,e;if(m)return b&&0==f&&(f=s-z),t||z++,e;if(z++,N=D=!0,Oe.info("Collapsing {this} [{start}]",e),"Binary"==a.TYPE)return ce(a,e),Ve(xe,a,{operator:"=",left:a.right.left,right:"&&"==a.operator?Ve(Te,a,{condition:a.left,consequent:a.right.right,alternative:e}):Ve(Te,a,{condition:a.left,consequent:e,alternative:a.right.right})});if(a instanceof Yn)return Ve(Re,a,{operator:a.operator,expression:y.fixed&&y.definition().fixed?y.fixed.to_prefix(a):y});if(a instanceof Re)return fe(a),a;if(ce(T,e),a instanceof Ue)return(i=a.name.definition()).references.length-i.replaced!=1||p.exposed(i)?Ve(xe,a,{operator:"=",left:e,right:T}):(i.replaced++,Qt(o,e,T));fe(T);n=a.clone();return n.right=T,n},q),o=new Un(function(e){if(D)return e;if(!S){if(e!==v[g])return e;switch(g++,v.length-g){case 0:if(S=!0,c)return e;if(e!==a)return e;if(e instanceof Ue)return e;O.replaced++;var n=o.parent();return n instanceof je&&n.tail_node()!==e?(m.replaced++,T===E?Jn.skip:We(E,E.expressions.slice(0,-1))):T;case 1:if(!c&&e.body===a)return S=!0,O.replaced++,m.replaced++,null;default:return F(e,o)}}if(e instanceof Ne&&e.definition()===O){if(ot(e,o.parent()))return e;--z||(D=!0),Oe.info("Replacing {this} [{start}]",e);var t=T.clone();return(t.scope=e.scope,t.reference(),z==f)?(D=!0,Ve(xe,a,{operator:"=",left:e,right:t})):(O.replaced++,t)}return e instanceof on||e instanceof Ce?e:void 0},function(e){return le(e,o)});0<=--r;){0==r&&p.option("unused")&&!function(){if(!1!==ve){var e=p.parent(),i=p.self();if(void 0===ve){if(!(i instanceof yn)||Gn(i)||i.uses_arguments||i.pinned()||!(e instanceof Ee)||e.expression!==i||!Le(e.args,function(e){return!(e instanceof Pe)}))return ve=!1;if(!ai(e))return;ve=!0}for(var r,o=i.in_strict_mode(p)&&!i.parent_scope.resolve(!0).in_strict_mode(p),s=(Wn(i)?(r=function(e){return e instanceof An&&"await"==e.name},_e=!0):(r=function(e){return e instanceof Ke&&!n.find_parent(Ce)},void 0===_e&&(_e=Wt(p,1,e,null,!0,!0))),null),n=new Be(function(e,n){var t;return!u||(r(e)||e instanceof In?!(u=null):e instanceof Sn?(!o&&s||(u=null),!0):e instanceof Ne?((e.in_arg&&!sr(e.definition())||(t=i.variables.get(e.name))&&t!==e.definition())&&(u=null),!0):e instanceof Ce&&!Ln(e)?(t=s,s=e,n(),s=t,!0):void 0)}),t=(d=e.args.slice()).length,a=new $n,f=i.argnames.length;0<=--f;){var c=i.argnames[f],u=d[f],l=null;if(c instanceof Se&&(l=c.value,c=c.name,d[t+f]=l),c instanceof De){if(_e&&M(function(e){return e.has_side_effects(p)},c,u)){h.length=0;break}d[t+f]=i.argnames[f]}else a.has(c.name)||(a.set(c.name,!0),(u=l?vi(u)?l:null:u)||l?u instanceof Ae&&u.pinned()?u=null:u&&u.walk(n):u=Ve(Ie,c).transform(p),u&&((c=Ve(Ue,c,{name:c,value:u})).name_index=f,c.arg_index=l?t+f:f,h.unshift([c])))}i.rest&&d.push(i.rest)}}();var v=[];for(C(i[r]);0<h.length;){v=h.pop();var s,g=0,a=v[v.length-1],f=-1,c=!1,R=!1,m=null,l=null,b=null,y=function(n){if(n instanceof xe)return(t=n.left)instanceof Ne&&(i=t.definition(),be.uses_arguments&&st(i)||p.exposed(i)||(s=oe(i),i.fixed&&t.fixed&&(e=i.references.filter(function(e){return e.fixed===t.fixed}).length-1)<s&&(s=e,R=!(f=0)),"="==n.operator&&re(n.right))),t;if(n instanceof we)return n.right.left;if(n instanceof Pn)return n.expression;if(n instanceof Ue){var t,e,i=(t=n.name).definition();if(!i.const_redefs)if(Kn(t,i.orig))if(!be.uses_arguments||!st(i))return e=i.orig.length-i.eliminated-(_.get(i.name)||0),s=oe(i),i.fixed&&(s=Math.min(s,i.references.filter(function(e){return!e.fixed||!e.fixed.assigns||(e=e.fixed.assigns[0])===t||se(e)===n.value}).length)),1<e&&!(t instanceof Ye)?(re(n.value),Ve(Ne,t)):re(n.value)||1==s&&!p.exposed(i)?Ve(Ne,t):void 0}}(a),x=y&&y.has_side_effects(p),I=y&&(!x||y instanceof Ne)&&!$t(y,p),w=function(n){if(!(n instanceof xe&&n.right.single_use)){for(var t,i=Object.create(null),e=new Be(function(e){e instanceof Ne&&(i[e.definition().id]=!0)});n instanceof xe&&"="==n.operator;)n.left.walk(e),n=n.right;if(n instanceof Sn)return o;if(n instanceof Ne)return(r=n.evaluate(p))===n?o:ae(r,o);if(n.is_truthy())return ae(!0,Ge);if(n.is_constant()){var r=n.evaluate(p);if(!(r instanceof Oe))return ae(r,o)}return y instanceof Ne?!!function e(n){if(n instanceof ye)return!1;if(n instanceof we&&$e[n.operator])return e(n.left)&&e(n.right);if(n instanceof Ee)return!1;if(n instanceof Te)return e(n.consequent)&&e(n.alternative);if(n instanceof kn)return!1;return!n.has_side_effects(p)}(n)&&(n.walk(new Be(function(e){if(t)return!0;e instanceof Ne&&i[e.definition().id]&&(t=!0)})),!t)&&o:!1}function o(e){return n.equals(e)}}(a);if(I||w){var U=a instanceof xe&&a.operator.slice(0,-1),B=a.name instanceof Ye,L=Ge;if(a.may_throw(p)){if(B&&Wn(be))continue;L=me?function(e){return e.has_side_effects(p)}:t}var G=!1,V=!1,W=new $n,$=!0,k=ue(a),J=function(e){var n=Bn(e);return n instanceof Ne&&n.definition().scope.resolve()===be&&(!ge||!U&&!(a instanceof Pn||(n=k.get(n.name))&&n[0]!==e))}(y),E=se(a),T=E,K=(x||(!U&&T instanceof je&&(T=T.tail_node()),x=!(a instanceof Pn)&&T.has_side_effects(p)),me||!J?function(e){return e instanceof De}:Ge),Q=function(e){if(e instanceof Pn)return!1;if(x)return!1;if(!m){if(!(y instanceof Ne))return!1;var n;if(e instanceof Ue)n=1;else{if("="!=e.operator)return!1;n=2}e=y.definition();if(e.references.length-e.replaced!=n){if(!e.fixed)return!1;if(!y.fixed)return!1;var t=y.fixed.assigns,i=0;if(!Le(e.references,function(e,n){e=e.fixed;return!!e&&!e.to_binary&&!e.to_prefix&&(e===y.fixed?(i++,!0):t&&e.assigns&&t[0]!==e.assigns[0])}))return!1;if(i!=n)return!1;R=!0}}return!0}(a),S=B,D=!1,z=0,A=!d||!S;if(!A){for(var n=a.arg_index+1;!D&&n<d.length;n++)d[n]&&d[n].transform(u);A=!0}for(var e=r;!D&&e<i.length;e++)i[e].transform(u);if(m){if(!z||z+c<s){h.push(v),P=!0;continue}z==f&&(c=!0);var O=y.definition();D=!1,g=0,S=B;for(e=r;!D&&e<i.length;e++)i[e].transform(o)||i.splice(e--,1);z=a instanceof Ue&&a===v[v.length-1]&&O.references.length==O.replaced&&!p.exposed(O),m.last_ref=!1,m.single_use=!1,N=!0}z&&!function(e){var n,t,f,c,u,l=T===E?null:We(E,E.expressions.slice(0,-1)),e=e.name_index;0<=e?(t=be.argnames[e])instanceof Se?(be.argnames[e]=t=t.clone(),t.value=l||Ve(qe,t,{value:0})):(n=p.parent().args)[e]&&(be.argnames[e]=t.clone(),n[e]=l||Ve(qe,n[e],{value:0})):(f=v.length-1,c=v[f],(c instanceof Ue||v[f-1].body===c)&&f--,u=new Un(function(e,n,t){var i,r,o,s,a;return S||e!==v[g]?e:++g<=f?F(e,u):(S=!0,e instanceof sn?(_.set(c.name.name,(_.get(c.name.name)||0)+1),m&&m.replaced++,r=(i=e.definitions).indexOf(c),(o=c.clone()).value=null,l?(s=[Ve(He,l,{body:l})],0<r&&((a=e.clone()).definitions=i.slice(0,r),s.unshift(a),(e=e.clone()).definitions=i.slice(r)),s.push(e),e.definitions[0]=o,t?Jn.splice(s):Ve(ke,e,{body:s})):(e.definitions[r]=o,e)):l?Vn(e)?Ve(He,l,{body:l}):l:t?Jn.skip:null)},function(e,n){return e instanceof _n?di(e,n):le(e,u)}),S=D=!1,g=0,(i[r]=i[r].transform(u))||i.splice(r,1))}(a)}}}return N}function q(e){return D||(l===e&&(D=!0),b===e&&(b=null)),e}function F(e,n){if(e instanceof Xe){if(e instanceof Ce)return e;if(e instanceof en){e.name&&(e.name=e.name.transform(n)),!D&&e.extends&&(e.extends=e.extends.transform(n));for(var t=[],i=[],r=0;!D&&r<e.properties.length;r++)(o=e.properties[r]).key instanceof Oe&&(o.key=o.key.transform(n)),o.static&&(o instanceof nn?o.value&&t.push(o):o instanceof tn&&[].push.apply(i,o.value.body));for(r=0;!D&&r<i.length;r++)i[r].transform(n);for(var o,r=0;!D&&r<t.length;r++)(o=t[r]).value=o.value.transform(n);return e}if(e instanceof vn)return e.object=e.object.transform(n),D=!0,e;if(e instanceof zn){e.expression=e.expression.transform(n);for(r=0;!D&&r<e.body.length;r++){var s=e.body[r];if(s instanceof Ze){if(!S){if(s!==v[g])continue;g++}if(s.expression=s.expression.transform(n),!Q)break;w=!1}}return D=!0,e}}}function X(e,n){return n instanceof xe?"="==n.operator&&n.left===e:n instanceof Se?n.name===e:n instanceof fn||n instanceof cn&&n.value===e}function Z(e,n){return n instanceof xe?n.left!==e&&$e[n.operator.slice(0,-1)]:n instanceof we?n.left!==e&&$e[n.operator]:n instanceof Ee?n.optional&&n.expression!==e:n instanceof Ze?n.expression!==e:n instanceof Te||n instanceof ze?n.condition!==e:n instanceof Dn&&n.optional&&n.expression!==e}function ee(e,n){if(e instanceof Ke)return 1;if("Binary"==e.TYPE)return!br(e.operator,e.right,p);if(e instanceof Ee){var t=e.expression;if(t instanceof Ne&&(f=t.definition(),t=t.fixed_value()),!(t instanceof Ae))return!e.is_expr_pure(p);if(!f||!Er(p,f,t)){if(t.collapse_scanning)return;t.collapse_scanning=!0;for(var i=A,r=(A=!1,l),o=b,s=0;!D&&s<t.argnames.length;s++)M(c,t.argnames[s],e.args[s])&&(D=!0);if(!D)if(t.rest&&M(c,t.rest,Ve(ye,e,{elements:e.args.slice(s)})))D=!0;else if(Ln(t)&&t.value)t.value.transform(u);else for(s=0;!D&&s<t.body.length;s++){var a=t.body[s];if(a instanceof Me){a.value&&a.value.transform(u);break}a.transform(u)}if(b=o,l=r,A=i,t.collapse_scanning=!1,!D)return;D=!1}return 1}var f;if(e instanceof en)return me&&(o=e.extends)&&!pt(o=o instanceof Ne?o.fixed_value():o);if(e instanceof hn){if(me){if(me.bfinally)return 1;if(me.bcatch&&e instanceof Cn)return 1}return x||y instanceof Fe||de(y)}if(e instanceof gn)return p.option("ie")&&e.name&&k.has(e.name.name);if(e instanceof Sn)return pe(e);if(e instanceof Fe){if(x)return 1;r=e.expression;if(r instanceof Ne&&dt(r.definition()))return 1;if(p.option("unsafe")){if(fi(r)&&Vr[r.name])return;if(zi(r))return}return $?!m&&(me||!J)&&!e.optional&&r.may_throw_on_access(p):1}return e instanceof Pe||(e instanceof Ne?pe(e)?!X(e,n):x&&de(e)||(f=e.definition(),(me||f.scope.resolve()!==be)&&!_t(e)):e instanceof Mn?!e.is_expr_pure(p):e instanceof Ue?K(e.name)||(e.value||n instanceof xn)&&e.name.match_symbol(function(e){return e instanceof On&&(k.has(e.name)||x&&de(e))},!0):e instanceof In||(i=ot(e.left,e))&&(i instanceof Fe||K(i)||i.match_symbol(function(e){return e instanceof Ne&&(k.has(e.name)||G&&p.exposed(e.definition()))},!0)));function c(e){return e.transform(u),D}}function M(t,e,i){return e instanceof Se?t(e.value)||M(t,e.name,e.value)||!vi(i)&&M(t,e.name,i):i?e instanceof De?!(!e.rest||!M(t,e.rest))||(e instanceof fn?i instanceof ye?!Le(e.elements,function(e,n){return!M(t,e,i[n])}):!i.is_string(p)||!Le(e.elements,function(e){return!M(t,e)}):e instanceof un?!!i.may_throw_on_access(p)||!Le(e.properties,function(e){return!(e.key instanceof Oe&&t(e.key)||M(t,e.value))}):void 0):void 0:!(e instanceof An)}function C(e,n){var t,i;v.push(e),e instanceof ye?e.elements.forEach(function(e){C(e,n)}):e instanceof xe?((i=e.left)instanceof De||h.push(v.slice()),C(i),C(e.right),i instanceof Ne&&"="==e.operator&&Y.set(i.name,(Y.get(i.name)||0)+1)):e instanceof Ke?C(e.expression,n):e instanceof we?(i=$e[e.operator],n&&i&&"??"!=e.operator&&e.right instanceof xe&&"="==e.right.operator&&!(e.right.left instanceof De)&&h.push(v.slice()),C(e.left,!i&&n),C(e.right,n)):e instanceof Ee?(C(e.expression),e.args.forEach(C)):e instanceof Ze?C(e.expression):e instanceof Te?(C(e.condition),C(e.consequent,n),C(e.alternative,n)):e instanceof sn?e.definitions.forEach(C):e instanceof pn?C(e.expression):e instanceof dn?(C(e.condition),e.body instanceof Qe||C(e.body)):e instanceof hn?e.value&&C(e.value):e instanceof _n?(e.init&&C(e.init,!0),e.condition&&C(e.condition),e.step&&C(e.step,!0),e.body instanceof Qe||C(e.body)):e instanceof vn?(C(e.object),e.body instanceof Qe||C(e.body)):e instanceof ze?(C(e.condition),e.body instanceof Qe||C(e.body),!e.alternative||e.alternative instanceof Qe||C(e.alternative)):e instanceof kn?e.properties.forEach(function(e){v.push(e),e.key instanceof Oe&&C(e.key),e instanceof En&&C(e.value,n),v.pop()}):e instanceof je?(t=e.expressions.length-(n?0:1),e.expressions.forEach(function(e,n){C(e,n<t)})):e instanceof He?C(e.body,!0):e instanceof Pe?C(e.expression):e instanceof Dn?(C(e.expression),C(e.property)):e instanceof zn?(C(e.expression),e.body.forEach(C)):e instanceof Pn?it[e.operator]?h.push(v.slice()):C(e.expression):e instanceof Ue?(e.name instanceof Fn&&(e.value?(i=e.name.definition()).references.length>i.replaced&&h.push(v.slice()):_.set(e.name.name,(_.get(e.name.name)||0)+1)),e.value&&C(e.value)):e instanceof In&&e.expression&&C(e.expression),v.pop()}function ne(e,n){var t=u.parent(n);return t instanceof ye||t instanceof xe||t instanceof Ke||t instanceof we||t instanceof Ee||t instanceof Ze||t instanceof Te?e:t instanceof sn?H(t,n+1):t instanceof hn||t instanceof ze||t instanceof mn||t instanceof Tn||t instanceof Fe?e:t instanceof je?(t.tail_node()===e?ne:H)(t,n+1):t instanceof He?H(t,n+1):t instanceof Pe||t instanceof zn||t instanceof Pn||t instanceof Ue||t instanceof In?e:null}function te(e,n,t){for(var i;i=e,(e=u.parent(++t))instanceof xe&&e.operator.slice(0,-1)==n||e instanceof we&&e.operator==n;);return i}function ie(e,n,t,i,r){var o=A,s=(A=!1,l),a=b,f=u.stack;return u.stack=[i],e.transform(u),u.stack=f,b=a,l=s,A=o,D?(D=!1,t):n(i,r+1)}function j(e,n){var t,i=u.parent(n);return i instanceof ye?j(i,n+1):i instanceof xe?L(i)||i.left.match_symbol(function(e){return e instanceof Ne&&(y.name==e.name||m.name==e.name)})?e:i.left!==e&&$e[t=i.operator.slice(0,-1)]?te(i,t,n):j(i,n+1):i instanceof Ke?j(i,n+1):i instanceof we?i.left!==e&&$e[t=i.operator]?te(i,t,n):j(i,n+1):i instanceof Ee?i:i instanceof Ze?i.expression!==e?e:j(i,n+1):i instanceof Te?i.condition!==e?e:j(i,n+1):i instanceof sn?H(i,n+1):i instanceof ln?e:i instanceof hn?H(i,n+1):i instanceof _n?i.init!==e&&i.condition!==e?e:j(i,n+1):i instanceof vn?i.init!==e?e:j(i,n+1):i instanceof ze?i.condition!==e?e:j(i,n+1):i instanceof Tn?(t=u.parent(n+1),Le(t.properties,function(e){return e instanceof En})?j(t,n+2):t):i instanceof Fe?i.expression===e?j(i,n+1):e:i instanceof je?(i.tail_node()===e?j:H)(i,n+1):i instanceof He?H(i,n+1):i instanceof Pe?j(i,n+1):i instanceof zn?i.expression!==e?e:j(i,n+1):i instanceof Pn?"delete"==i.operator?e:j(i,n+1):i instanceof Ue?i.name.match_symbol(function(e){return e instanceof On&&(y.name==e.name||m.name==e.name)})?e:j(i,n+1):i instanceof Nn?i.condition!==e?e:j(i,n+1):i instanceof In?j(i,n+1):null}function H(n,t){var e,i=u.parent(t);return ee(n,i)||Z(n,i)?n:i instanceof ye?H(i,t+1):i instanceof xe?r(i.left):i instanceof Ke?n:i instanceof we||i instanceof Ee||i instanceof Ze||i instanceof Te||i instanceof sn||i instanceof hn||i instanceof ze?H(i,t+1):i instanceof mn?n:i instanceof Tn?(e=u.parent(t+1),Le(e.properties,function(e){return e instanceof En})?H(e,t+2):e):i instanceof Fe?(e=i.expression)===n?H(i,t+1):ie(e,H,n,i,t):i instanceof je||i instanceof He?H(i,t+1):i instanceof Pe?n:i instanceof zn||i instanceof Pn?H(i,t+1):i instanceof Ue?r(i.name):i instanceof In?n:null;function r(e){return L(i)?n:e!==n&&e instanceof De?ie(e,H,n,i,t):H(i,t+1)}}function re(e){if(P)P=!1;else if(!(s<1)){var n=(e=e.tail_node())instanceof xe&&"="==e.operator?e.left:e;if(n instanceof Ne){var t=n.definition();if(!t.undeclared&&!dt(t)){if(n!==e){if($t(n,p))return;if(t.references.length-t.replaced<2)return;e=a.clone();e[e instanceof xe?"right":"value"]=n,0<=a.name_index&&(e.name_index=a.name_index,e.arg_index=a.arg_index),a=e}return m=t}}}}function oe(e){return e.references.length-e.replaced-(Y.get(e.name)||0)}function se(e){var n;return e instanceof xe?e.right:e instanceof we?((n=e.clone()).right=e.right.right,n):e instanceof Ue?e.value:void 0}function ae(t,i){return function(e,n){if(n.in_boolean_context()){if(t&&e.is_truthy()&&!e.has_side_effects(p))return!0;if(e.is_constant()){n=e.evaluate(p);if(!(n instanceof Oe))return!n==!t}}return i(e)}}function fe(e){for(;e.write_only&&(e.write_only=!1,e instanceof xe);)e=e.right}function ce(e,n){var t=n.scope||Vt(u)||he;e.walk(new Be(function(e){if(e instanceof Xe)return!0;e instanceof An&&(e.scope=t)}))}function ue(a){var f=new $n,c=(a instanceof Ue&&(a.name.definition().fixed||($=!1),f.add(a.name.name,y)),be.uses_arguments&&!p.has_directive("use strict")),u=be instanceof jn,l=new Be(function(n){var e,t,i;if(n instanceof Ne?(e=n.fixed_value())||(t=(e=n).definition(),i=n.fixed&&n.fixed.escaped||t.escaped,t.undeclared)||!t.assignments&&i&&!i.cross_scope||!vt(t,n.scope,n,l.parent())&&Tr(t)||($=!1):n instanceof Sn&&(e=n),e)f.add(n.name,ut(p,l,n,e,0));else{if(n instanceof Ae){for(var r,o=0,s=n;r=l.parent(o++);s=r){if(r instanceof xe){if(r.left===s)break;if("="==r.operator)continue;if($e[r.operator.slice(0,-1)])continue;break}if(r instanceof we){if($e[r.operator])continue;break}if(r instanceof Ee)return;if(r instanceof Ce)return;if(r instanceof je){if(r.tail_node()===s)continue;break}if(r instanceof Mn){if(r.tag)return;break}}return n.enclosed.forEach(function(e){e.scope!==n&&W.set(e.name,!0)}),!0}c&&n instanceof Dn&&(be.each_argname(function(e){p.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||($=!1),f.add(e.name,!0))}),c=!1)}u&&("Call"==n.TYPE?V||(i=n.expression)instanceof Fe||i instanceof yn&&!i.contains_this()||(V=!0):n instanceof Fe&&function e(n){return n instanceof Ne&&!(n=n.fixed_value())||(n instanceof xe?"="==n.operator&&e(n.right):n instanceof Fe||n instanceof Sn)}(n.expression)&&(n!==y||a instanceof Pn?G=!0:V=!0))});return a.walk(l),f}function le(e,n){if(e instanceof je)switch(e.expressions.length){case 0:return null;case 1:return Qt(n.parent(),e,e.expressions[0])}}function pe(e){e=k.get(e.name);if(e&&!Le(e,function(e){return!e}))return e[0]!==y||void(w=!1)}function de(e){e=e.definition();return!(1==e.orig.length&&e.orig[0]instanceof qn||e.scope.resolve()===be&&(!V||!p.exposed(e))&&Le(e.references,function(e){return e.scope.resolve(!0)===be}))}function t(e,n){if(e instanceof xe)return t(e.left,!0);if(e instanceof Pn)return t(e.expression,!0);if(e instanceof Ue)return e.value&&t(e.value);if(n){if(e instanceof pn)return t(e.expression,!0);if(e instanceof Dn)return t(e.expression,!0);if(e instanceof Ne)return e.definition().scope.resolve()!==be}return!1}}(e,l)||(i=9)}while(i&&0<o--);return e;function F(e,n){var t,i,r=e.self(),o=0;do{r instanceof oe?r=e.parent(o++):r instanceof de?r=r.body:r instanceof H&&((i=e.parent(o)).body[i.body.length-1]!==r&&!function(e){for(var n=e.length;0<=--n;)if(e[n]instanceof M)return 1;return}(r.body)||(o++,r=i));do{if(n(t=r))return t}while((r=e.parent(o++))instanceof ze)}while(t&&(r instanceof ke||r instanceof oe||r instanceof Ce||r instanceof H||r instanceof Hn)&&pi(r.body,t))}function d(e,n){if(!(e instanceof ke))return e;for(var t=null,i=0;i<e.body.length;i++){var r=e.body[i];if(r instanceof ee&&ui(r))n.push(r);else{if(t||ei(r))return!1;t=r}}return t}function p(e){return e instanceof xe?[e]:e instanceof je?e.expressions.slice():void 0}function h(e,n,t){var i=p(n);if(i){for(var r=!1,o=i.length-(t=t||0);0<=--o;)if(u(f=i[o])){if(f.left instanceof Ne)s=i.slice(o+1);else{if(!(f.left instanceof Fe&&u(f.left.expression)))continue;var s=i.slice(o+1),a=f.clone(),f=f.left.expression;a.left=a.left.clone(),a.left.expression=f.left.clone(),s.unshift(a)}0!=s.length&&g(f.left,f.right,s)&&(r=!0,i=i.slice(0,o).concat(f,s))}if(e instanceof sn){for(o=e.definitions.length;0<=--o;){var c=e.definitions[o];if(c.value){g(c.name,c.value,i)&&(r=!0),!function(e,n,t){if(l.option("conditionals")&&!(e.name instanceof De)){for(var i=!1,r=e.name.definition();n.length>t;){var o=gr(l,r,e.value,n[0]);if(!o)break;e.value=o,n.shift(),i=!0}return i}}(c,i,t)||(r=!0);break}}e instanceof ee&&v(e.definitions,i,t)&&(r=!0)}return r&&i}function u(e){return e instanceof xe&&"="==e.operator}}function _(e,n){if(e instanceof He&&!ui(n)){e=p(e.body);if(e){var t=[];if(v(t,e.reverse(),0))return n.definitions=t.reverse().concat(n.definitions),e.reverse()}}}function v(e,n,t){for(var i=!1;n.length>t;){var r=n[0];if(!(r instanceof xe))break;if("="!=r.operator)break;var o=r.left;if(!(o instanceof Ne))break;if(fi(o))break;if(o.scope.resolve()!==be)break;var s=o.definition();if(s.scope!==be)break;if(s.orig.length>s.eliminated+1)break;if("SymbolVar"!=s.orig[0].TYPE)break;o=Ve(Fn,o);e.push(Ve(Ue,r,{name:o,value:r.right})),s.orig.push(o),s.replaced++,n.shift(),i=!0}return i}function g(e,r,n){var o=new $n;for(o.set(e.name,!0);r instanceof xe&&"="==r.operator;)r.left instanceof Ne&&o.set(r.left.name,!0),r=r.right;if(r instanceof kn){var t=!1;do{if(!function e(n){if(!(n instanceof xe))return;if("="!=n.operator)return;if(!(n.left instanceof Fe))return;var t=n.left.expression;if(!(t instanceof Ne))return;if(!o.has(t.name))return;if(!n.right.is_constant_expression(be))return;var i=n.left.property;i instanceof Oe&&(i=(i=e(i)?n.left.property=i.right.clone():i).evaluate(l));if(i instanceof Oe)return;i=""+i;t="__proto__"==i||l.has_directive("use strict")?function(e){e=e.key;return"string"==typeof e&&e!=i&&"__proto__"!=e}:function(e){var n=e.key;return e instanceof x||e instanceof z?"string"==typeof n&&n!=i:"__proto__"!==n};if(!Le(r.properties,t))return;r.properties.push(Ve(En,n,{key:i,value:n.right}));return!0}(n[0]))break}while(n.shift(),t=!0,n.length);return t}}}function _i(i,r,o){var s,a=!1;function f(e){s?(s.push(e),ni(e)||(s.required=!0)):o.push(e)}r.walk(new Be(function(e,n){var t;return e instanceof fe?(e.extends=null,e.properties=[],f(e),!0):e instanceof sn?(e.remove_initializers(i,t=[])&&Oe.warn("Dropping initialization in unreachable code [{start}]",e),0<t.length&&(e.definitions=t,f(e)),!0):e instanceof bn?(f(e),!0):e instanceof Ce||(e instanceof Xe?(t=s,s=[],n(),s.required?o.push(Ve(ke,r,{body:s})):s.length&&[].push.apply(o,s),s=t,!0):void(e instanceof wn||(a=!0)))})),a&&Oe.warn("Dropping unreachable code [{start}]",r)}function vi(e,n){return null==e||e.is_undefined||e instanceof Ie||e instanceof Re&&"void"==e.operator&&(!n||!e.expression.has_side_effects(n))}function gi(e,n,t){switch(e){case"-":return n.is_negative_zero()&&(!(t instanceof T)||0==t.value);case"&&":case"||":return n.is_negative_zero()||t.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}function mi(e,n){return n||/strict/.test(e.option("pure_getters"))}function bi(e,n,t){switch(n){case"&&":return t.left.is_defined(e)&&t.right.is_defined(e);case"||":return t.left.is_truthy()||t.right.is_defined(e);case"??":return t.left.is_defined(e)||t.right.is_defined(e);default:return!0}}function yi(e){Oe.warn("global_defs {this} redefined [{start}]",e)}function xi(e,n,t){return n.print_to_string().length-e.print_to_string().length<(t||0)?n:e}function wi(e,n,t){return xi(Ve(He,e,{body:e}),Ve(He,n,{body:n}),t).body}function ki(e,n,t,i){return(I(e)?wi:xi)(n,t,i)}function Ei(n){var t=Object.create(null);return Object.keys(n).forEach(function(e){t[e]=K(n[e])}),t}function Ti(e){for(var n=0;n<e.length;n++){var t=e[n];if(!(t instanceof w))return t}}function Si(){return this.value?Ve(Me,this.value,{value:this.value}):Ti(this.body)}function Di(e,n){var t=n.evaluate(e);return t===n?n:ki(e,n,Jt(t,n).optimize(e),e.eval_threshold)}function zi(e){if(e instanceof pn){var n,t=e.expression;if(fi(t))return(n=no[t.name])&&(n[e.property]||"Math"==t.name&&"random"==e.property)}}function Ai(e){e instanceof fn?e.elements.forEach(Ai):e instanceof un?e.properties.forEach(function(e){Ai(e.value)}):e instanceof Fe?Ai(e.expression):e instanceof Ne&&e.definition().references.forEach(function(e){delete e._eval})}function Oi(e,n,t,i,r){for(var o=[],s=0;s<e.length;s++){var a=e[s],f=a._eval(n,t,i,r);if(a===f)return;o.push(f)}return o}function qi(e){return Ve(Re,e,{operator:"!",expression:e})}function Fi(e,n,t){e=qi(e);return t?xi(e,Ve(He,n,{body:n}))===e?e:n:xi(e,n)}function Mi(e,n,t){return!Le(e,t?function(e){return e instanceof Pe?!t(e,n):!e.has_side_effects(n)}:function(e){return!e.has_side_effects(n)})}function Ci(e,n){e=e.expression;return!e.is_string(n)||e.has_side_effects(n)}function ji(e,n){for(var t=e.length;0<=--t;)if(e[t].may_throw(n))return!0;return!1}function Hi(e,n){return!!e.may_throw(n)||!((e=e instanceof Ne?e.fixed_value():e)instanceof Ae&&!ji(e.argnames,n)&&!ji(e.body,n))||Ln(e)&&e.value&&e.value.may_throw(n)}function Pi(e,n){for(var t=e.length;0<=--t;)if(!e[t].is_constant_expression(n))return!1;return!0}function Yi(e){return e&&e.aborts()}function Ni(){var e=this.body.length;return 0<e&&Yi(this.body[e-1])}function Ri(e,n,t){switch(e.body.length){case 0:return t?Jn.skip:Ve(Z,e);case 1:var i=e.body[0];return ni(i)?n instanceof mn&&i instanceof bn?e:i:e}return e}function Ii(e,n){!n.option("rests")||e.uses_arguments||e.rest instanceof fn&&n.drop_fargs(e,n.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest)}function Ui(e,n){if(n.option("arrows")){Ii(e,n),e.value&&(e.body=[e.first_statement()]);var t=hi(e.body,n);switch(t.length){case 1:var i=t[0];if(i instanceof Me){e.body.length=0,e.value=i.value;break}default:e.body=t,e.value=null}}return e}function Bi(e,n){for(var t=n.length;0<=--t;)n[t]||(n[t]=Ve(pe,e))}function Li(e,n){e=Ve(se,e);return e.name&&(e.name=n?null:Ve(q,e.name)),e}function Gi(e,n){var t;switch(e.CTOR){case ne:t=te;break;case ie:t=re;break;case an:t=gn;break;case AST_GeneratorDefun:t=AST_GeneratorFunction}var i=Ve(t,e);return i.name=n?null:Ve(ve,e.name),i}function Vi(n,t){n.walk(new Be(function(e){return e instanceof Me?(t(e),!0):e instanceof Ce&&e!==n||void 0}))}function Wi(e){var n=Object.create(null);return Vi(e,function(e){var e=e.value;(e=e&&e.tail_node())instanceof Ne&&(e=e.definition().id,n[e]=(n[e]||0)+1)}),n}function $i(e,n,t){if(t.exposed(e))return!1;switch(e.references.length-e.replaced-(n[e.id]||0)){case e.drop_return:return"d";case e.bool_return:return!0}}function Ji(e,i){Vi(e,function(e){e.in_bool=!0;var n,t=e.value;t&&((n=ir(i,t))?n instanceof Oe||(t=t.drop_side_effect_free(i),e.value=t?We(e.value,[t,Ve(qe,e.value,{value:1})]):Ve(qe,e.value,{value:1})):(t=t.drop_side_effect_free(i),e.value=t?We(e.value,[t,Ve(qe,e.value,{value:0})]):null))})}function Ki(e,n){return!e.name||!n.option("ie")||(e=e.name.definition(),!n.exposed(e)&&Le(e.references,function(e){return!(e instanceof Ne)}))}function Qi(o,n,e){if(n instanceof Ae){var t,i=Ln(n),r=Wn(n),s=!1,a=!1;if(i&&o.option("arrows")?n.value?r&&!yr(o,n.value)||(t=n.value.drop_side_effect_free(o))!==n.value&&(s=!0,n.value=t):a=!0:Gn(n)||(a=!(!e&&n.name)||(t=n.name.definition()).references.length==t.replaced),a&&(n.process_expression(!1,function(e){var n=e.value;if(n){if(r&&!yr(o,n))return e;n=n.drop_side_effect_free(o,!0)}return s=!0,n?Ve(He,e,{body:n}):Ve(Z,e)}),Vi(n,function(e){var n,t=e.value;!t||r&&!yr(o,t)||(n=t.drop_side_effect_free(o))!==t&&(s=!0,n&&r&&!yr(o,n)&&(n=n.negate(o)),e.value=n)})),r&&o.option("awaits")){a&&n.process_expression("awaits",function(e){var n=e.body;if(n instanceof Ke){if(yr(o,n.expression)){if(s=!0,!(n=n.expression.drop_side_effect_free(o,!0)))return Ve(Z,e);e.body=n}}else if(n instanceof je){for(var t=n.expressions,i=t.length;0<=--i;){var r=t[i];if(!(r instanceof Ke))break;r=r.expression;if(!yr(o,r))break;if(s=!0,t[i]=r.drop_side_effect_free(o))break}switch(i){case-1:return Ve(Z,e);case 0:e.body=t[0];break;default:t.length=i+1}}return e});var f,c=!a&&n.name||i&&n.value&&!yr(o,n.value),u=new Be(function(e){return!!c||(u.parent()===n&&e.may_throw(o)||e instanceof Ke||e instanceof AST_ForAwaitOf?c=!0:e instanceof Me?e.value&&!yr(o,e.value)?c=!0:void 0:e instanceof Ce&&e!==n||void 0)});if(n.walk(u),!c){switch(n.CTOR){case _:f=h;break;case te:f=gn;break;case re:f=AST_GeneratorFunction}return Ve(f,n)}}return s&&n.clone()}}function Xi(e,n,t,i){for(var r=e.length,o=[],s=!1,a=0;a<r;a++){var f=e[a],c=i&&f instanceof Pe?i(f,n,t):f.drop_side_effect_free(n,t);c!==f&&(s=!0),c&&(o.push(c),t=!1)}return o.length?s?o:e:null}function Zi(e,n,t){var i=e.expression;return i.is_string(n)?i.drop_side_effect_free(n,t):e}function er(e){return e instanceof Pe?Ve(ye,e,{elements:[e]}):e}function nr(n,e,t){t=t||wn;var i=!1,r=new Be(function(e){return!!(i||e instanceof Ce)||(e instanceof t&&r.loopcontrol_target(e)===n?i=!0:void 0)});return e instanceof de&&r.push(e),r.push(n),n.body.walk(r),i}function tr(e,n,t){if((e=e instanceof je?e.tail_node():e)instanceof we)if(e.left instanceof G){if(e.right instanceof Re&&"typeof"==e.right.operator){var i=e.right.expression;if(fi(i)){var r,o,s,a,f,c,u,l="undefined"==e.left.value;switch(e.operator){case"==":r=l?t:n;break;case"!=":r=l?n:t;break;default:return}r&&(o=!1,s=i.definition(),f=[],c=[],u=new Be(function(e,n){if(o)return!0;if(e instanceof xe){var t=e.left;if(!(t instanceof Ne&&t.definition()===s))return;switch(e.right.walk(u),e.operator){case"=":case"&&=":o=!0}return!0}var i;return e instanceof Ee?(n(),(a=e.expression.tail_node())instanceof Ne&&(a=a.fixed_value(),i=f.length),a instanceof Ae?be(c,a)&&a.walk(u):o=!0,0<=i&&(f.length=i),!0):e instanceof dn?(i=f.length,n(),o&&(f.length=i),!0):e instanceof _n?(e.init&&e.init.walk(u),i=f.length,e.condition&&e.condition.walk(u),e.body.walk(u),e.step&&e.step.walk(u),o&&(f.length=i),!0):e instanceof vn?(e.object.walk(u),i=f.length,e.init.walk(u),e.body.walk(u),o&&(f.length=i),!0):e instanceof Ce?e!==a||void 0:e instanceof Ne?(e.definition()===s&&f.push(e),!0):void 0}),r.walk(u),f.forEach(function(e){e.defined=!0}))}}}else switch(e.operator){case"&&":tr(e.left,n),tr(e.right,n);break;case"||":tr(p(e.left),t),tr(p(e.right),t)}function p(e){if(e instanceof we)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function ir(e,n,t){return!!n.truthy||(vi(n)?void 0:!(n.falsy&&!t)&&(!!n.is_truthy()||n.evaluate(e,!0)))}function rr(e,n){var t,i=0,r=!1,o=e.self();if(!Vn(o))for(;;){if(t=o,(o=e.parent(i++))instanceof we)switch(t){case o.left:if($e[o.operator])continue;break;case o.right:if(a(o.left))switch(o.operator){case"&&":n[r?"falsy":"truthy"]=!0;break;case"||":case"??":n[r?"truthy":"falsy"]=!0}}else if(o instanceof Te){var s=o.condition;if(s===t)continue;if(a(s))switch(t){case o.consequent:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}}else{if(o instanceof hn)break;if(o instanceof ze)break;if(o instanceof je){if(o.expressions[0]===t)continue}else if(o instanceof He)break}return}for(;;){if(t=o,(o=e.parent(i++))instanceof ke){if(o.body[0]===t)continue}else if(o instanceof ze&&a(o.condition))switch(t){case o.body:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}return}function a(e){return n.equals(e)||e instanceof Re&&"!"==e.operator&&n.equals(e.expression)&&(r=!0)}}function or(r){return function(n,t){var i=!1;return this.definitions.forEach(function(e){e.value&&(i=!0),e.name.match_symbol(function(e){e instanceof On&&t.push(Ve(Ue,e,{name:e,value:r(n,e)}))},!0)}),i}}function sr(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof ve?3:2)}function ar(e,n){if(e.exposed(n))return!0;for(var t=n.scope.resolve(),i=n.scope;i!==t;)if((i=i.parent_scope).var_names().has(n.name))return!0}function fr(e,i){return Ve(ee,e,{definitions:e.definitions.map(function(e){return Ve(Ue,e,{name:e.name.convert_symbol(Fn,function(e,n){var t=e.definition();t.orig[t.orig.indexOf(n)]=e,t.scope!==i&&((t.scope=i).variables.set(t.name,t),i.enclosed.push(t),i.var_names().set(t.name,!0))}),value:e.value})})})}function cr(e,n){n=n.definition();return(n.fixed||0===n.fixed)&&sr(n)&&Tr(n)&&!ar(e,n)}function ur(e,n){return n.option("varify")&&Le(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof On)return!cr(n,e)},!0)})?fr(e,n.find_parent(Ce)):e}function lr(e,n){if(n.option("optional_chains")&&e.terminal)do{var t=e.expression;if(e.optional){var i=ir(n,t,!0);if(null==i)return Ve(Re,e,{operator:"void",expression:t}).optimize(n);i instanceof Oe||(e.optional=!1)}}while(("Call"==(e=t).TYPE||e instanceof Fe)&&!e.terminal)}function pr(e){var n,t=e.expression;return t instanceof je?(t=t.expressions.slice(),(n=e.clone()).expression=t.pop(),t.push(n),We(e,t)):e}function dr(e,t,n){var i=e.expression,r=i instanceof Ne?i.fixed_value():i;if(r instanceof Ae&&!r.uses_arguments&&!(r.pinned()||n&&n.indexOf(r)<0)){var o=e.args;if(Le(o,function(e){return!(e instanceof Pe)})){var s=r.argnames,n=r===i&&!r.name;if(r.rest){if(!n||!t.option("rests"))return;for(var a=s.length,o=o.slice(0,a);o.length<a;)o.push(Ve(Ie,e).optimize(t));o.push(Ve(ye,e,{elements:e.args.slice(a)})),s=s.concat(r.rest),r.rest=null}else o=o.slice(),s=s.slice();for(var f=0,c=0,u=n&&t.option("default_values"),l=n&&t.drop_fargs(r,e)?function(e,n){return!e||(e instanceof fn?0==e.elements.length&&!e.rest&&n instanceof ye:e instanceof un?0==e.properties.length&&!e.rest&&n&&!n.may_throw_on_access(t):e.unused)}:Ge,p=[],d=0;d<o.length;d++){var h=s[d];if(u&&h instanceof Se&&o[d].is_defined(t)&&(s[d]=h=h.name),h&&void 0===h.unused){if(l(h,o[d])){_=o[d].drop_side_effect_free(t);s.splice(d,1),o.splice(d,1),_&&p.push(_),d--;continue}p.push(o[d]),o[f++]=We(e,p),p=[]}else{var _=o[d].drop_side_effect_free(t);if(l(h)){h&&s.splice(d,1),o.splice(d,1),_&&p.push(_),d--;continue}if(_)p.push(_),o[f++]=We(e,p),p=[];else if(h){if(!p.length){o[f++]=Ve(qe,o[d],{value:0});continue}o[f++]=We(e,p),p=[]}}c=f}for(;d<s.length;d++)l(s[d])&&s.splice(d--,1);r.argnames=s,o.length=c,e.args=o,p.length&&(i=We(e,p),o.push(o.length<s.length?Ve(Re,e,{operator:"void",expression:i}):i))}}}function hr(e,n){n=n||e.find_parent(Ce);var t=[];return(Wn(n)||n instanceof jn&&e.option("module"))&&t.push("await"),Gn(n)&&t.push("yield"),t.length&&K(t)}function _r(t,i){var r,o;return!i||(r=!0,o=new Be(function(e){if(!r)return!0;if(e instanceof Ce){if(e===t)return;if(Ln(e))for(var n=0;r&&n<e.argnames.length;n++)e.argnames[n].walk(o);else e instanceof bn&&i[e.name.name]&&(r=!1);return!0}e instanceof An&&i[e.name]&&e!==t.name&&(r=!1)}),t.walk(o),r)}function vr(e,n){return e.in_strict_mode(n)||!n.has_directive("use strict")}function gr(t,i,e,n){if(n instanceof we&&("&&"==n.operator||"||"==n.operator)&&n.right instanceof xe&&"="==n.right.operator&&n.right.left instanceof Ne&&n.right.left.definition()===i&&!e.has_side_effects(t)&&r(n.left)&&r(n.right.right))return i.replaced++,"&&"==n.operator?Ve(Te,n,{condition:n.left,consequent:n.right.right,alternative:e}):Ve(Te,n,{condition:n.left,consequent:e,alternative:n.right.right});function r(e){var n;if(!e.has_side_effects(t))return n=!1,e.walk(new Be(function(e){return!!n||(e instanceof Ne&&e.definition()===i?n=!0:void 0)})),!n}}function mr(e,n){return e instanceof xe?!n&&"="==e.operator&&mr(e.right):e instanceof b?!n:e instanceof je?mr(e.tail_node(),n):e instanceof Ne?!n&&mr(e.fixed_value()):e instanceof ye||e instanceof en||e instanceof Ae||e instanceof kn}function br(e,n,t){switch(e){case"in":return mr(n)||t&&t.option("unsafe_comps");case"instanceof":return lt(n=n instanceof Ne?n.fixed_value():n)||t&&t.option("unsafe_comps");default:return!0}}function yr(e,n){var t;return!!n.is_constant()||(n instanceof xe?"="!=n.operator||yr(e,n.right):n instanceof we?!$e[n.operator]||yr(e,n.left)&&yr(e,n.right):n instanceof Ee?Wn(n.expression):n instanceof Te?yr(e,n.consequent)&&yr(e,n.alternative):n instanceof je?yr(e,n.tail_node()):n instanceof Ne?(t=n.fixed_value())&&yr(e,t):n instanceof Mn?!n.tag||Sr(e,n.tag):n instanceof Pn||void 0)}function xr(e,n){return e instanceof xe?$t(e.left,n)?e:e.left:e instanceof je?xr(e.tail_node(),n):!(e instanceof Re&&it[e.operator])||$t(e.expression,n)?e:e.expression}function wr(e,n){return n instanceof pn?wr(e,n.expression):n instanceof Dn?wr(e,n.expression)&&wr(e,n.property):n instanceof An||!n.has_side_effects(e)}function kr(e,n){var t,i=e.right.tail_node();i!==e.right&&((t=e.right.expressions.slice(0,-1)).push(i.left),(i=i.clone()).left=We(e.right,t),e.right=i),e.left=Ve(we,e,{operator:e.operator,left:e.left,right:i.left,start:e.left.start,end:i.left.end}),e.right=i.right,n?e.left=e.left.transform(n):e.operator==i.left.operator&&kr(e.left)}function Er(e,n,t){var i=0,r=e.self();do{if(r===t)return r;if(lt(r)&&r.name&&r.name.definition()===n)return r}while(r=e.parent(i++))}function Tr(e){var n=e.scope.resolve();return Le(e.references,function(e){return n===e.scope.resolve()})}function Sr(e,n){return e.option("unsafe")&&n instanceof pn&&"raw"==n.property&&fi(n.expression)&&"String"==n.expression.name}function Dr(e){var t=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,n){n=nt(n);if("string"==typeof n)return n;t=!0}),!t)return e}function zr(e,n){return e instanceof Ne||e.TYPE===n.TYPE}function Ar(t,n){var i=!1,r=new Be(function(e){return!!i||(e instanceof Ne&&Kn(e.definition(),n)?i=!0:void 0)}),o=new Be(function(e){if(i)return!0;if(e instanceof Ae&&e!==t){if(!(e.name||Wn(e)||Gn(e))){var n=o.parent();if(n instanceof Ee&&n.expression===e)return}return e.walk(r),!0}});return t.walk(o),i}function Or(e,n){var t;if(e)return"Call"!=(t=n.parent()).TYPE?1:t.expression!==n.self()||(!(e instanceof Ne)||(e=e.fixed_value()))&&e instanceof Ae&&!e.contains_this()}function qr(e){return e instanceof En&&"string"==typeof e.key&&!(e instanceof k&&e.value.contains_super())}function Fr(e){var n=e.definition().redefined();return n&&((e=e.clone()).thedef=n),e}function Mr(n,e){var t=!1;return e.walk(new Be(function(e){return!!t||(e instanceof Ne&&n.variables.get(e.name)===e.definition()?t=!0:void 0)})),t}function Cr(e,n){var t=[];e.references.forEach(function(e){e=e.fixed;e&&be(t,e)&&(e.assigns?e.assigns.unshift(n):e.assigns=[n])})}function jr(e,n){var t=Ve(Ne,n),i=Ve(xe,n,{operator:"=",left:t,right:Ve(Ie,n).transform(e)}),e=n.definition();return e.fixed&&(t.fixed=function(){return i.right},t.fixed.assigns=[i],Cr(e,i)),e.assignments++,e.references.push(t),i}function Hr(e,n,t,i,r,o,s){for(var a=[],f=o.expressions,c=t,u=f.length-(s||0),l=u;0<=--u;r=!(c=!0)){var p=f[u].try_inline(e,n,c,i,r);p&&(d(),a.push(p))}if(0!=a.length)return d(),!t&&a[0]instanceof He&&(a[0]=Ve(Me,o,{value:a[0].body})),Ve(ke,o,{body:a.reverse()});function d(){u+1<l&&a.push(Ve(He,o,{body:We(o,f.slice(u+1,l))})),l=u}}var Pr,Yr,Nr,Rr,Ir,Ur,Br,Lr,Gr,Vr,$e,Wr,$r,Jr,Kr,Qr,Xr,Zr,eo,no,to,io,ro,oo,so,ao,fo,co,uo,lo;return(ft.prototype=new Un(function(e,n,t){var i,r;return e._squeezed?e:((i=e instanceof Ce)&&(this.option("arrows")&&Ln(e)&&e.value&&(e.body=[e.first_statement()],e.value=null),e.hoist_properties(this),e.hoist_declarations(this),e.process_returns(this)),n(e,this),n(e,this),r=e.optimize(this),!i||r!==e||this.has_directive("use asm")||r.pinned()||(r.drop_unused(this),r.merge_variables(this)&&r.drop_unused(this),n(r,this)),r===e&&(r._squeezed=!0),r)})).option=function(e){return this.options[e]},ft.prototype.exposed=function(e){var n;return!!e.exported||!!e.undeclared||!!(e.global||e.scope.resolve()instanceof jn)&&(n=this.toplevel,!Le(e.orig,function(e){return n[e instanceof qn?"funcs":"vars"]}))},ft.prototype.compress=function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var n=this.options.merge_vars,t=+this.options.passes||1,i=1/0,r=!1,o={ie:this.option("ie")},s=0;s<t;s++)if(e.figure_out_scope(o),(0<s||this.option("reduce_vars"))&&e.reset_opt_flags(this),this.options.merge_vars=n&&(r||s==t-1),e=e.transform(this),1<t){var a=0;if(e.walk(new Be(function(){a++})),Oe.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:s,min_count:i,count:a}),a<i)i=a,r=!1;else{if(r)break;r=!0}}return this.option("expression")&&e.process_expression(!1),e},(n=function(e,n){e.DEFMETHOD("optimize",function(e){return this._optimized||e.has_directive("use asm")?this:((e=n(this,e))._optimized=!0,e)})})(Oe,function(e,n){return e}),jn.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var n=this.body,t=[],i=0;i<n.length;i++){var r=n[i];r instanceof ce?(n[i]=r=r.body,r instanceof sn?r.definitions.forEach(function(e){e.name.match_symbol(o,!0)}):o(r.name)):r instanceof v&&(n.splice(i--,1),[].push.apply(t,r.properties))}t.length&&n.push(Ve(v,this,{properties:t}))}function o(e){e instanceof On&&((e=Ve(P,e)).alias=Ve(G,e,{value:e.name}),t.push(e))}}),Ce.DEFMETHOD("process_expression",function(r,o){var s=this,a=new Un(function(e){var n;if(r){if((e=e instanceof w?Ve(He,e,{body:Ve(G,e)}):e)instanceof He)return o?o(e):Ve(Me,e,{value:e.body})}else if(e instanceof Me)return o?o(e):(n=e.value)instanceof G?Ve(w,n):Ve(He,e,{body:n||Ve(Re,e,{operator:"void",expression:Ve(qe,e,{value:0})})});if(e instanceof Qe){if(e instanceof Ae){if(e!==s)return e}else if("awaits"===r&&e instanceof Hn&&e.bfinally)return e;for(var t=e.body.length;0<=--t;){var i=e.body[t];if(!li(i,!0)){e.body[t]=i.transform(a);break}}}else e instanceof ze?(e.body=e.body.transform(a),e.alternative&&(e.alternative=e.alternative.transform(a))):e instanceof Rn&&(e.body=e.body.transform(a));return e});s.transform(a)}),jn.DEFMETHOD("unwrap_expression",function(){var e=this;switch(e.body.length){case 0:return Ve(Re,e,{operator:"void",expression:Ve(qe,e,{value:0})});case 1:var n=e.body[0];if(n instanceof w)return Ve(G,n);if(n instanceof He)return n.body;default:return Ve(Ee,e,{expression:Ve(gn,e,{argnames:[],body:e.body}).init_vars(e),args:[]})}}),Oe.DEFMETHOD("wrap_expression",function(){var e=this;return e=(e=Vn(e)?e:Ve(He,e,{body:e}))instanceof jn?e:Ve(jn,e,{body:[e]})}),Pr=/^(0|[1-9][0-9]*)$/,(e=function(e,n){e.DEFMETHOD("reduce_vars",n)})(Oe,me),e(xe,function(o,e,n){var s=this,a=s.left,f=s.right,t=a instanceof Ne&&a.definition(),i=t||a instanceof De;switch(s.operator){case"=":return a.equals(f)&&!a.has_side_effects(n)?(f.walk(o),function e(n){Yt(n);{var t;n instanceof pn?e(n.expression):n instanceof Dn?(e(n.expression),n.property.walk(o)):n instanceof Ne?(At(t=n.definition(),n),t.fixed&&(n.fixed=t.fixed,n.fixed.assigns?n.fixed.assigns.push(s):n.fixed.assigns=[s])):n.walk(o)}}(a),s.redundant=!0):t&&f instanceof yn?(l(),f.parent_scope.resolve().fn_defs.push(f),f.safe_ids=null,t.fixed&&s.write_only||Tt(o,t,f),!0):i?(f.walk(o),l(),!0):void Ct(a);case"&&=":case"||=":case"??=":var r=!0;default:if(!i)return Ct(a),p();t.assignments++;var c,u=t.fixed;return ut(n,o,s,s,0)?(t.fixed=!1,p()):(c=Ot(o,t),r&&d(o,!0),f.walk(o),r&&Dt(o),c&&!a.in_arg&&qt(o,t)?(At(t,a),zt(o,t),t.single_use&&(t.single_use=!1),a.fixed=t.fixed=function(){return Ve(we,s,{operator:s.operator.slice(0,-1),left:gt(a,u),right:s.right})},a.fixed.assigns=u&&u.assigns?u.assigns.slice():[t.orig[0]],a.fixed.assigns.push(s),a.fixed.to_binary=mt(function(e){return e.left},u)):(a.walk(o),t.fixed=!1),!0)}function l(){var e=t&&Er(o,t),r=ut(n,o,s,f,0,Ft(f),e);Ht(o,n,a,function(){return s.right},function(e,n,t){var i;e instanceof Ne?((i=e.definition()).assignments++,n&&!e.in_arg&&qt(o,i)?(At(i,e),zt(o,i),(a instanceof De||1==i.orig.length&&i.orig[0]instanceof qn)&&(i.single_use=!1),o.loop_ids[i.id]=o.in_loop,i.fixed=r?0:n,e.fixed=n,e.fixed.assigns=[s],Mt(o,i,e.scope,s,f,0,1)):(t(),i.fixed=!1)):(Ct(e),t())})}function p(){if(r)return a.walk(o),d(o,!0),f.walk(o),Dt(o),!0}}),e(we,function(e){if($e[this.operator])return this.left.walk(e),d(e,!0),this.right.walk(e),Dt(e),!0}),e(Xe,function(e,n,t){yt(0,t,this)}),e(Ee,function(n,e){var t,i=this,r=i.expression;if(r instanceof yn)t=ai(i),i.args.forEach(function(e){e.walk(n),e instanceof Pe&&(t=!1)}),t&&(r.reduce_vars=Pt),r.walk(n),t&&delete r.reduce_vars;else{if("Call"==i.TYPE)switch(n.in_boolean_context()){case"d":var o=!0;case!0:!function e(n,t){n instanceof xe?"="==n.operator&&(e(n.left,t),e(n.right,t)):n instanceof we?$e[n.operator]&&(e(n.left,t),e(n.right,t)):n instanceof Te?(e(n.consequent,t),e(n.alternative,t)):n instanceof Ne&&((n=n.definition()).bool_return++,t)&&n.drop_return++}(r,o)}r.walk(n);var s=i.optional,i=(s&&d(n,!0),i.args.forEach(function(e){e.walk(n)}),s&&Dt(n),r instanceof Ne&&r.fixed_value());i instanceof Ae?Tt(n,r.definition(),i):n.find_parent(Ce).may_call_this()}return!0}),e(en,function(n,e,t){var i,r,o=this,t=(yt(0,t,o),o.extends&&o.extends.walk(n),o.properties.filter(function(e){return Yt(e),e.key instanceof Oe&&(n.push(e),e.key.walk(n),n.pop()),e.value}));return o.name&&(i=o.name.definition(),((r=n.parent())instanceof ce||r instanceof ue)&&(i.single_use=!1),qt(n,i,!0)?(zt(n,i),n.loop_ids[i.id]=n.in_loop,i.fixed=function(){return o},i.fixed.assigns=[o],sr(i)||(i.single_use=!1)):i.fixed=!1),t.forEach(function(e){n.push(e),!e.static||ci(e)&&e.value.contains_this()?(d(n),e.value.walk(n),Dt(n)):e.value.walk(n),n.pop()}),!0}),e(f,function(e,n,t){return d(e,!0),xt(e,t,this),n(),St(e,this),!0}),e(Te,function(e){return this.condition.walk(e),d(e,!0),this.consequent.walk(e),Dt(e),d(e,!0),this.alternative.walk(e),Dt(e),!0}),e(Se,function(e){return d(e,!0),this.value.walk(e),Dt(e),this.name.walk(e),!0}),e(ln,function(e){var n=e.in_loop;return e.in_loop=this,d(e),this.body.walk(e),nr(this,e.parent())&&(Dt(e),d(e)),this.condition.walk(e),Dt(e),e.in_loop=n,!0}),e(_n,function(e,n,t){var i=this,t=(yt(0,t,i),i.init&&i.init.walk(e),e.in_loop);return e.in_loop=i,d(e),i.condition&&i.condition.walk(e),i.body.walk(e),i.step&&(nr(i,e.parent())&&(Dt(e),d(e)),i.step.walk(e)),Dt(e),e.in_loop=t,!0}),e(vn,function(e,n,t){var i=this,t=(yt(0,t,i),i.object.walk(e),e.in_loop),r=(e.in_loop=i,d(e),i.init);return r instanceof sn?r.definitions[0].name.mark_symbol(function(e){e instanceof On&&((e=e.definition()).assignments++,e.fixed=!1)},e):r instanceof De||r instanceof Ne?r.mark_symbol(function(e){var n;e instanceof Ne&&(At(n=e.definition(),e),n.assignments++,e.is_immutable()||(n.fixed=!1))},e):r.walk(e),i.body.walk(e),Dt(e),e.in_loop=t,!0}),e(ze,function(e){return this.condition.walk(e),d(e,!0),this.body.walk(e),Dt(e),this.alternative&&(d(e,!0),this.alternative.walk(e),Dt(e)),!0}),e(de,function(e){return d(e,!0),this.body.walk(e),Dt(e),!0}),e(Ae,function(e,n,t){var i=this;return wt(e,i)&&be(e.fn_visited,i)&&(i.inlined=!1,d(e),xt(e,t,i),n(),St(e,i),i.name)&&Mt(e,i.name.definition(),i,i.name,i,0,1),!0}),e(bn,function(e,n,t){var i=this,r=i.name.definition(),o=e.parent();return(o instanceof ce||o instanceof ue)&&(r.single_use=!1),wt(e,i)&&be(e.fn_visited,i)&&(i.inlined=!1,d(e),xt(e,t,i),n(),St(e,i)),!0}),e(Dn,function(e){if(this.optional)return this.expression.walk(e),d(e,!0),this.property.walk(e),Dt(e),!0}),e(zn,function(n,e,t){yt(0,t,this),this.expression.walk(n);var i=!0;return this.body.forEach(function(e){e instanceof on||(e.expression.walk(n),i&&d(n,!(i=!1)))}),i||Dt(n),U(this,n),!0}),e(H,function(e){return d(e,!0),U(this,e),Dt(e),!0}),e(he,function(){this.definition().fixed=!1}),e(_e,function(){this.definition().fixed=!1}),e(Ne,function(t,e,n){var i,r=this,o=r.definition(),s=o.fixed||o.last_ref&&o.last_ref.fixed,a=(At(o,r),1==o.references.length&&!o.fixed&&o.orig[0]instanceof qn&&(t.loop_ids[o.id]=t.in_loop),Er(t,o));switch(a&&a.enclosed.forEach(function(e){var n;o===e||e.scope.resolve()===a||!(n=e.fixed&&e.fixed.assigns)||n[n.length-1]instanceof Ue||(n=t.safe_ids[e.id])&&(n.assign=!0)}),"m"==o.single_use&&o.fixed&&(o.fixed=0,o.single_use=!1),o.fixed){case 0:Ot(t,o)||(o.fixed=!1);case!1:var f=o.redefined();f&&ht(o.scope,r.scope)&&(f.single_use=!1);break;case void 0:o.fixed=!1;break;default:Ot(t,o)?(r.in_arg&&o.orig[0]instanceof ve&&(r.fixed=o.scope),i=r.fixed_value(),a?o.recursive_refs++:!i||(f=o,!n.option("unused"))||f.scope.pinned()||!1===f.single_use||f.references.length-f.recursive_refs!=1||st(f)&&f.scope.uses_arguments?o.single_use=!1:(o.in_loop=t.loop_ids[o.id]!==t.in_loop,o.single_use=lt(i)&&!i.pinned()&&(!o.in_loop||t.parent()instanceof Ee)||!o.in_loop&&o.scope===r.scope.resolve()&&i.is_constant_expression()),ut(n,t,r,i,0,Ft(i),a)&&(o.single_use?o.single_use="m":o.fixed=0),o.fixed&&t.loop_ids[o.id]!==t.in_loop&&(o.cross_loop=!0),Mt(t,o,r.scope,r,i,0,1)):o.fixed=!1}r.fixed||(r.fixed=0===o.fixed?s:o.fixed),i instanceof Ae&&!((s=t.parent())instanceof Ee&&s.expression===r)&&Tt(t,o,i)}),e(Mn,function(n,e){var t,i=this.tag;if(i)return i instanceof yn?(this.expressions.forEach(function(e){e.walk(n)}),i.walk(n)):(i.walk(n),this.expressions.forEach(function(e){e.walk(n)}),(t=i instanceof Ne&&i.fixed_value())instanceof Ae?Tt(n,i.definition(),t):n.find_parent(Ce).may_call_this()),!0}),e(jn,function(e,n,t){return this.globals.each(function(e){bt(0,t,e)}),d(e,!0),xt(e,t,this),n(),St(e,this),!0}),e(Hn,function(e,n,t){var i=this;return yt(0,t,i),d(e,!0),U(i,e),Dt(e),i.bcatch&&(d(e,!0),i.bcatch.walk(e),Dt(e)),i.bfinally&&i.bfinally.walk(e),!0}),e(Pn,function(e,n){var t=this;if(it[t.operator]){var i,r,o=t.expression;if(o instanceof Ne)return(i=o.definition()).assignments++,r=i.fixed,Ot(e,i)&&!o.in_arg&&qt(e,i)?(At(i,o),zt(e,i),i.single_use&&(i.single_use=!1),i.fixed=function(){return Ve(we,t,{operator:t.operator.slice(0,-1),left:Ve(Re,t,{operator:"+",expression:gt(o,r)}),right:Ve(qe,t,{value:1})})},i.fixed.assigns=r&&r.assigns?r.assigns.slice():[],i.fixed.assigns.push(t),t instanceof Re?o.fixed=i.fixed:(o.fixed=function(){return Ve(Re,t,{operator:"+",expression:gt(o,r)})},o.fixed.assigns=r&&r.assigns,o.fixed.to_prefix=mt(function(e){return e.expression},i.fixed))):(o.walk(e),i.fixed=!1),!0;Ct(o)}}),e(Ue,function(i,e,n){var t,r=this,o=r.value;return o instanceof yn&&r.name instanceof On?(s(),o.parent_scope.resolve().fn_defs.push(o),o.safe_ids=null,(t=r.name.definition()).fixed||Tt(i,t,o)):o?(o.walk(i),s()):i.parent()instanceof xn&&s(),!0;function s(){Ht(i,n,r.name,function(){return r.value||Ve(Ie,r)},function(e,n){var t=e.definition();n&&qt(i,t,!0)?(zt(i,t),i.loop_ids[t.id]=i.in_loop,t.fixed=n,t.fixed.assigns=[r],(e instanceof F&&t.redefined()||!_t(e)&&!sr(t))&&(t.single_use=!1)):t.fixed=!1})}}),e(Nn,function(e,n){var t=e.in_loop;return e.in_loop=this,d(e),n(),Dt(e),e.in_loop=t,!0}),jn.DEFMETHOD("reset_opt_flags",function(t){var i=new Be(t.option("reduce_vars")?function(e,n){return Yt(e),e.reduce_vars(i,n,t)}:Yt);i.fn_scanning=null,i.fn_visited=[],i.in_loop=null,i.loop_ids=Object.create(null),i.safe_ids=Object.create(null),i.safe_ids.seq={},this.walk(i)}),An.DEFMETHOD("fixed_value",function(e){var n=this.definition(),t=n.fixed;return t?((t=this.fixed?this.fixed:t)instanceof Oe?t:t()).tail_node():(t=0===t&&this.fixed)&&(t=(t instanceof Oe?t:t()).tail_node(),e&&1!=n.escaped.depth&&mr(t,!0)||t.is_constant()?t:void 0)}),Ne.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return e.orig[0]instanceof ve&&(1==e.orig.length||!(!this.in_arg||e.orig[1]instanceof Ye))}),Oe.DEFMETHOD("convert_symbol",me),Se.DEFMETHOD("convert_symbol",Nt),De.DEFMETHOD("convert_symbol",Nt),On.DEFMETHOD("convert_symbol",Rt),Ne.DEFMETHOD("convert_symbol",Rt),Se.DEFMETHOD("mark_symbol",Ut),De.DEFMETHOD("mark_symbol",Ut),On.DEFMETHOD("mark_symbol",Bt),Ne.DEFMETHOD("mark_symbol",Bt),Oe.DEFMETHOD("match_symbol",function(e){return e(this)}),Se.DEFMETHOD("match_symbol",Lt),De.DEFMETHOD("match_symbol",Lt),Yr=K("Infinity NaN undefined"),Vr=K("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet"),Ne.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&Vr[this.name]}),(e=function(e,n){e.DEFMETHOD("in_strict_mode",n)})(en,V),e(Ce,function(e){for(var n=this.body,t=0;t<n.length;t++){var i=n[t];if(!(i instanceof w))break;if("use strict"==i.value)return!0}var r=this.parent_scope;return r?r.resolve(!0).in_strict_mode(e):e.option("module")}),(e=function(e,n){e.DEFMETHOD("is_truthy",n)})(Oe,Ge),e(ye,V),e(xe,function(){return"="==this.operator&&this.right.is_truthy()}),e(Ae,V),e(kn,V),e(W,V),e(je,function(){return this.tail_node().is_truthy()}),e(Ne,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=Ge;e=e.is_truthy();return delete this.is_truthy,e}),(e=function(e,n){e.DEFMETHOD("is_negative_zero",n)})(Oe,V),e(ye,Ge),e(xe,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():gi(e.slice(0,-1),this.left,this.right)}),e(we,function(){return gi(this.operator,this.left,this.right)}),e(T,function(){return 0==this.value&&1/this.value<0}),e(Ae,Ge),e(kn,Ge),e(W,Ge),e(je,function(){return this.tail_node().is_negative_zero()}),e(Ne,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=V;e=e.is_negative_zero();return delete this.is_negative_zero,e}),e(Re,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator}),e=function(e,n){e.DEFMETHOD("_dot_throw",n)},Oe.DEFMETHOD("may_throw_on_access",function(e,n){return!e.option("pure_getters")||this._dot_throw(e,n)}),e(Oe,mi),e(ye,Ge),e(xe,function(e){var n=this.operator,t=this.left,i=this.right;return"="!=n?$e[n.slice(0,-1)]&&(t._dot_throw(e)||i._dot_throw(e)):!!i._dot_throw(e)&&(!(t instanceof Ne&&i instanceof we&&"||"==i.operator&&t.name==i.left.name)||i.right._dot_throw(e))}),e(we,function(e){return $e[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),e(en,function(e,n){return mi(e,n)&&!Le(this.properties,function(e){return!!e.private||!e.static||!(e instanceof a||e instanceof u)})}),e(Te,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),e(T,Ge),e(pn,function(e,n){return!(!mi(e,n)||((e=this.expression)instanceof Ne&&(e=e.fixed_value()),"prototype"==this.property&&lt(e)))}),e(Ae,Ge),e(D,V),e(kn,function(n,t){return mi(n,t)&&!Le(this.properties,function(e){return!(e instanceof x||e instanceof z||"__proto__"===e.key&&e.value._dot_throw(n,t))})}),e(Sn,function(e,n){return mi(e,n)&&!this.scope.resolve().new}),e(je,function(e){return this.tail_node()._dot_throw(e)}),e(Ne,function(e,n){if(this.is_undefined)return!0;if(mi(e,n)&&!(fi(this)&&this.is_declared(e)||this.is_immutable())){n=this.definition();if(dt(n)&&!n.scope.rest&&Le(n.scope.argnames,function(e){return e instanceof Ye}))return 2<n.scope.uses_arguments;n=this.fixed_value(!0);if(!n)return!0;if(this._dot_throw=V,n._dot_throw(e))return delete this._dot_throw,!0;this._dot_throw=Ge}return!1}),e(Re,function(){return"void"==this.operator}),e(Yn,Ge),e(Ie,V),(e=function(e,n){e.DEFMETHOD("is_defined",n)})(Oe,Ge),e(ye,V),e(xe,function(e){var n=this.operator;return"="==n?this.right.is_defined(e):bi(e,n.slice(0,-1),this)}),e(we,function(e){return bi(e,this.operator,this)}),e(Te,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),e(T,V),e(pe,Ge),e(Ae,V),e(kn,V),e(je,function(e){return this.tail_node().is_defined(e)}),e(Ne,function(e){if(this.is_undefined)return!1;if(fi(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var n=this.fixed_value();if(!n)return!1;this.is_defined=Ge;n=n.is_defined(e);return delete this.is_defined,n}),e(Re,function(){return"void"!=this.operator}),e(Yn,V),e(Ie,Ge),(e=function(e,n){e.DEFMETHOD("is_boolean",n)})(Oe,Ge),e(xe,function(e){return"="==this.operator&&this.right.is_boolean(e)}),Nr=K("in instanceof == != === !== < <= >= >"),e(we,function(e){return Nr[this.operator]||$e[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(l,V),Rr=K("every hasOwnProperty isPrototypeOf propertyIsEnumerable some"),e(Ee,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof pn&&(Rr[e.property]||"test"==e.property&&e.expression instanceof W)}),e(Te,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(b,Ge),e(je,function(e){return this.tail_node().is_boolean(e)}),e(Ne,function(e){var n=this.fixed_value();if(!n)return!1;this.is_boolean=Ge;n=n.is_boolean(e);return delete this.is_boolean,n}),Ir=K("! delete"),e(Re,function(){return Ir[this.operator]}),(e=function(e,n){e.DEFMETHOD("is_number",n)})(Oe,Ge),Ur=K("- * / % ** & | ^ << >> >>>"),e(xe,function(e){return Ur[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(we,function(e){return!!Ur[this.operator]||"+"==this.operator&&(this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e))}),Br=K(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),e(Ee,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof pn&&(Br[e.property]||fi(e.expression)&&"Math"==e.expression.name)}),e(Te,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(b,Ge),e(qe,V),e(je,function(e){return this.tail_node().is_number(e)}),e(Ne,function(e,n){var t=this.fixed_value();if(!t)return!1;if(n&&t instanceof Re&&"+"==t.operator&&t.expression.equals(this))return!1;this.is_number=Ge;n=t.is_number(e);return delete this.is_number,n}),Lr=K("+ - ~ ++ --"),e(Pn,function(){return Lr[this.operator]}),(e=function(e,n){e.DEFMETHOD("is_string",n)})(Oe,Ge),e(xe,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(we,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))}),Gr=K(["charAt","substr","substring","toExponential","toFixed","toLowerCase","toPrecision","toString","toUpperCase","trim"]),e(Ee,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof pn&&Gr[e.property]}),e(Te,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(je,function(e){return this.tail_node().is_string(e)}),e(G,V),e(Ne,function(e){var n=this.fixed_value();if(!n)return!1;this.is_string=Ge;n=n.is_string(e);return delete this.is_string,n}),e(Mn,function(e){return!this.tag||Sr(e,this.tag)}),e(Re,function(){return"typeof"==this.operator}),$e=K("&& || ??"),e=function(e,n){e.DEFMETHOD("_find_defs",n)},jn.DEFMETHOD("resolve_defines",function(o){return o.option("global_defs")?(this.figure_out_scope({ie:o.option("ie")}),this.transform(new Un(function(e){var n=e._find_defs(o,"");if(n){for(var t,i=0,r=e;(t=this.parent(i++))&&t instanceof Fe&&t.expression===r;)r=t;if(!ot(r,t))return n;yi(e)}}))):this}),e(Oe,me),e(pn,function(e,n){return this.expression._find_defs(e,"."+this.property+n)}),e(On,function(e){this.definition().global&&J(e.option("global_defs"),this.name)&&yi(this)}),e(Ne,function(e,n){if(this.definition().global)return e=e.option("global_defs"),n=this.name+n,J(e,n)?function n(e,t){if(e instanceof Oe)return e.clone(!0);if(Array.isArray(e))return Ve(ye,t,{elements:e.map(function(e){return n(e,t)})});if(e&&"object"==typeof e){var i,r=[];for(i in e)J(e,i)&&r.push(Ve(En,t,{key:i,value:n(e[i],t)}));return Ve(kn,t,{properties:r})}return Jt(e,t)}(e[n],this):void 0}),h.DEFMETHOD("first_statement",Si),_.DEFMETHOD("first_statement",Si),Ae.DEFMETHOD("first_statement",function(){return Ti(this.body)}),Ae.DEFMETHOD("length",function(){for(var e=this.argnames,n=0;n<e.length&&!(e[n]instanceof Se);n++);return n}),eo=Ei({Array:["indexOf","join","lastIndexOf","slice"].concat(e=["constructor","toString","valueOf"]),Boolean:e,Function:e,Number:["toExponential","toFixed","toPrecision"].concat(e),Object:e,RegExp:["exec","test"].concat(e),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(e)}),no=Ei({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]}),(e=function(e,n){e.DEFMETHOD("is_constant",n)})(Oe,Ge),e(T,V),e(W,Ge),Wr=K("! ~ - + void"),e(Re,function(){return Wr[this.operator]&&this.expression instanceof T}),e=function(e,n){e.DEFMETHOD("_eval",n)},Oe.DEFMETHOD("evaluate",function(e,n){var t;return!e.option("evaluate")||(t=this._eval(e,n,e=[],1),e.forEach(function(e){delete e._eval}),!n&&t&&!(t instanceof RegExp)&&("function"==typeof t||"object"==typeof t))?this:t}),$r=new Be(function(e){e instanceof xe&&Ai(e.left),e instanceof vn&&Ai(e.init),e instanceof Pn&&it[e.operator]&&Ai(e.expression)}),e(O,function(){throw new Error(string_template("Cannot evaluate a statement [{start}]",this))}),e(Je,Qn),e(s,Qn),e(en,Qn),e(Oe,Qn),e(T,function(){return this.value}),e(xe,function(e,n,t,i){var r=this.left;if(!n){if(!(r instanceof Ne))return this;if(!J(r,"_eval")){if(!r.fixed)return this;var o=r.definition();if(!o.fixed)return this;if(o.undeclared)return this;if(o.last_ref!==r)return this;if("m"==o.single_use)return this;if(this.right.has_side_effects(e))return this}}o=this.operator,o=!J(r,"_eval")&&r instanceof Ne&&r.fixed&&r.definition().fixed?r:"="==o?this.right:Ve(we,this,{operator:o.slice(0,-1),left:r,right:this.right}),r.walk($r),o=o._eval(e,n,t,i);return"object"==typeof o?this:(Ai(r),o)}),e(je,function(e,n,t,i){if(!n)return this;for(var r=this.expressions,o=0,s=r.length-1;o<s;o++)r[o].walk($r);var a=r[s],e=a._eval(e,n,t,i);return e===a?this:e}),e(Ae,function(e){return e.option("unsafe")?((e=function(){}).node=this,e.toString=function(){return"function(){}"},e):this}),e(ye,function(e,n,t,i){if(e.option("unsafe")){for(var r=[],o=0;o<this.elements.length;o++){var s=this.elements[o];if(s instanceof pe)return this;var a=s._eval(e,n,t,i);if(s===a)return this;r.push(a)}return r}return this}),e(kn,function(e,n,t,i){if(e.option("unsafe")){for(var r={},o=0;o<this.properties.length;o++){var s=this.properties[o];if(!(s instanceof En))return this;var a=s.key;if(a instanceof Oe&&(a=a._eval(e,n,t,i))===s.key)return this;switch(a){case"__proto__":case"toString":case"valueOf":return this}if(r[a]=s.value._eval(e,n,t,i),r[a]===s.value)return this}return r}return this}),Jr=K("! typeof void"),e(Re,function(e,n,t,i){var r=this.expression,o=this.operator;if(e.option("typeofs")&&"typeof"==o&&(r instanceof Ae||r instanceof Ne&&r.fixed_value()instanceof Ae))return"function";var s=r instanceof Ne&&r.definition(),a=(Jr[o]||s&&s.fixed||i++,r.walk($r),r._eval(e,n,t,i));if(a===r)return n&&"void"==o?void 0:this;switch(o){case"!":return!a;case"typeof":return a instanceof RegExp?this:typeof a;case"void":return;case"~":return~a;case"-":return-a;case"+":return+a;case"++":case"--":if(!s)return this;if(!n){if(s.undeclared)return this;if(s.last_ref!==r)return this}return J(r,"_eval")&&(a=+(o[0]+1)+ +a),Ai(r),a}return this}),e(Yn,function(e,n,t,i){var r=this.expression;if(r instanceof Ne){if(!J(r,"_eval")){if(!r.fixed)return this;if(!n){var o=r.definition();if(!o.fixed)return this;if(o.undeclared)return this;if(o.last_ref!==r)return this}}}else if(!n)return this;r instanceof Ne&&r.definition().fixed||i++,r.walk($r);o=r._eval(e,n,t,i);return o===r?this:(Ai(r),+o)}),Kr=K("&& || === !=="),e(we,function(e,n,t,i){Kr[this.operator]||i++;var r=this.left._eval(e,n,t,i);if(r===this.left)return this;if(this.operator==(r?"||":"&&"))return r;var o,s=this.right._eval(e,n&&!(r&&"object"==typeof r),t,i);if(s===this.right)return this;switch(this.operator){case"&&":o=r&&s;break;case"||":o=r||s;break;case"??":o=null==r?s:r;break;case"|":o=r|s;break;case"&":o=r&s;break;case"^":o=r^s;break;case"+":o=r+s;break;case"-":o=r-s;break;case"*":o=r*s;break;case"/":o=r/s;break;case"%":o=r%s;break;case"<<":o=r<<s;break;case">>":o=r>>s;break;case">>>":o=r>>>s;break;case"==":o=r==s;break;case"===":o=r===s;break;case"!=":o=r!=s;break;case"!==":o=r!==s;break;case"<":o=r<s;break;case"<=":o=r<=s;break;case">":o=s<r;break;case">=":o=s<=r;break;case"**":o=Math.pow(r,s);break;case"in":if(s&&"object"==typeof s&&J(s,r)){o=!0;break}default:return this}if(isNaN(o))return e.find_parent(Rn)?this:o;if(e.option("unsafe_math")&&!n&&o&&"number"==typeof o&&("+"==this.operator||"-"==this.operator)){t=Math.max(0,a(r),a(s));if(t<16)return+o.toFixed(t)}return o;function a(e){e=/(\.[0-9]*)?(e[^e]+)?$/.exec(+e);return(e[1]||".").length-1-(e[2]||"").slice(1)}}),e(Te,function(e,n,t,i){var r=this.condition._eval(e,n,t,i);return r===this.condition||(e=(r=r?this.consequent:this.alternative)._eval(e,n,t,i))===r?this:e}),e(Ne,function(e,n,t,i){var r,o=this.fixed_value();if(!o)return this;if(J(o,"_eval"))r=o._eval();else{if(this._eval=Qn,r=o._eval(e,n,t,i),delete this._eval,r===o)return this;o._eval=function(){return r},t.push(o)}return r&&"object"==typeof r&&!function(n,e){var t=n.definition().escaped;switch(t.length){case 0:return 1;case 1:var i=!1;return t[0].walk(new Be(function(e){return!!i||(e===n?i=!0:e instanceof Ce||void 0)})),i;default:return e<=t.depth}}(this,i)?this:r}),Qr={Array:Array,Math:Math,Number:Number,Object:Object,String:String},Xr=Ei({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),Zr=K("global ignoreCase multiline source"),e(Fe,function(e,n,t,i){if(e.option("unsafe")){var r,o=this.expression;if(!fi(o)&&(null==(r=o._eval(e,n,t,i+1))||r===o))return this;var s=this.property;if(s instanceof Oe&&(s=s._eval(e,n,t,i))===this.property)return this;if(void 0===r){e=Xr[o.name];if(!e||!e[s])return this;r=Qr[o.name]}else if(r instanceof RegExp){if(!Zr[s])return this}else if("object"==typeof r){if(!J(r,s))return this}else if("function"==typeof r)switch(s){case"name":return r.node.name?r.node.name.name:"";case"length":return r.node.length();default:return this}return r[s]}return this}),e(Ee,function(i,r,o,s){var e=this.expression,n=e instanceof Ne?e.fixed_value():e;if(n instanceof h||n instanceof an||n instanceof gn){if(!n.evaluating&&!(n.name&&0<n.name.definition().recursive_refs||this.is_expr_pure(i))){var a=Oi(this.args,i,r,o,s);if(Le(n.argnames,function(e,n){if(e instanceof Se){if(!a)return!1;if(void 0===a[n]){var t=e.value._eval(i,r,o,s);if(t===e.value)return!1;a[n]=t}e=e.name}return!(e instanceof De)})&&!(n.rest instanceof De)&&(a||r)){var f,t=n.first_statement();if(t instanceof Me)return(u=t.value)?(f=[],a&&(!Le(n.argnames,function(e,n){return p(e,a[n])})||n.rest&&!p(n.rest,a.slice(n.argnames.length)))&&!r||(r&&n.argnames.forEach(function(e){e instanceof Se&&e.value.walk($r)}),n.evaluating=!0,u=u._eval(i,r,o,s),n.evaluating=!1),f.forEach(function(e){delete e._eval}),u===t.value?this:u):void 0;if(r){n.walk($r);var c=!1;if(n.evaluating=!0,U(n,new Be(function(e){return!!c||(e instanceof Me?(e.value&&void 0!==e.value._eval(i,!0,o,s)&&(c=!0),!0):e instanceof Ce&&e!==n||void 0)})),n.evaluating=!1,!c)return}}}}else if(i.option("unsafe")&&e instanceof Fe){var u,t=e.property;if(t instanceof Oe&&(t=t._eval(i,r,o,s))===e.property)return this;e=e.expression;if(fi(e)){var l=no[e.name];if(!l||!l[t])return this;u=Qr[e.name]}else{if(null==(u=e._eval(i,r,o,s+1))||u===e)return this;l=eo[u.constructor.name];if(!l||!l[t])return this;if(u instanceof RegExp&&u.global&&!(e instanceof W))return this}if(!(a=Oi(this.args,i,r,o,s)))return this;if("replace"==t&&"function"==typeof a[1])return this;try{return u[t].apply(u,a)}catch(e){Oe.warn("Error evaluating {this} [{start}]",this)}finally{u instanceof RegExp&&(u.lastIndex=0)}}return this;function p(e,n){var t,i=(e=e instanceof Se?e.name:e).definition();return i.orig[i.orig.length-1]===e&&(t=n,i.references.forEach(function(e){e._eval=function(){return t},f.push(e)}),!0)}}),e(b,Qn),e(Mn,function(e,n,t,i){if(e.option("templates")){if(this.tag){if(!Sr(e,this.tag))return this;f=function(e){return e}}var r=Oi(this.expressions,e,n,t,i);if(r){for(var o=!1,s=f(this.strings[0]),a=0;a<r.length;a++)s+=r[a]+f(this.strings[a+1]);if(!o)return s;this._eval=Qn}}return this;function f(e){return"string"!=typeof(e=Dr(e))&&(o=!0),e}}),(e=function(e,t){e.DEFMETHOD("negate",function(e,n){return t.call(this,e,n)})})(Oe,function(){return qi(this)}),e(O,function(){throw new Error("Cannot negate a statement")}),e(we,function(e,n){var t=this.clone(),i=this.operator;if(e.option("unsafe_comps"))switch(i){case"<=":return t.operator=">",t;case"<":return t.operator=">=",t;case">=":return t.operator="<",t;case">":return t.operator="<=",t}switch(i){case"==":return t.operator="!=",t;case"!=":return t.operator="==",t;case"===":return t.operator="!==",t;case"!==":return t.operator="===",t;case"&&":return t.operator="||",t.left=t.left.negate(e,n),t.right=t.right.negate(e),Fi(this,t,n);case"||":return t.operator="&&",t.left=t.left.negate(e,n),t.right=t.right.negate(e),Fi(this,t,n)}return qi(this)}),e(se,function(){return qi(this)}),e(Te,function(e,n){var t=this.clone();return t.consequent=t.consequent.negate(e),t.alternative=t.alternative.negate(e),Fi(this,t,n)}),e(yn,function(){return qi(this)}),e(je,function(e){var n=this.expressions.slice();return n.push(n.pop().negate(e)),We(this,n)}),e(Re,function(){return"!"==this.operator?this.expression:qi(this)}),to=K("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),io=K("Map Set WeakMap WeakSet"),Ee.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var n=this.expression;if(fi(n)){if(to[n.name])return!0;if(this instanceof b&&io[n.name])return!0}if(zi(n))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),Mn.DEFMETHOD("is_expr_pure",function(e){var n,t=this.tag;if(!t)return!0;if(e.option("unsafe")){if(fi(t)&&to[t.name])return!0;if(t instanceof pn&&fi(t.expression))return(n=no[t.expression.name])&&(n[t.property]||"Math"==t.expression.name&&"random"==t.property)}return!e.pure_funcs(this)}),Oe.DEFMETHOD("is_call_pure",Ge),Ee.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var n=this.expression;if(!(n instanceof pn))return!1;var t,i=n.expression,r=n.property;if(i instanceof ye)t=eo.Array;else if(i.is_boolean(e))t=eo.Boolean;else if(i.is_number(e))t=eo.Number;else if(i instanceof W)t=eo.RegExp;else if(i.is_string(e)){if(t=eo.String,"replace"==r){i=this.args[1];if(i&&!i.is_string(e))return!1}}else n.may_throw_on_access(e)||(t=eo.Object);return t&&t[r]}),(e=function(e,n){e.DEFMETHOD("safe_to_spread",n)})(Oe,Ge),e(ye,V),e(xe,function(){switch(this.operator){case"=":return this.right.safe_to_spread();case"&&=":case"||=":case"??=":return this.left.safe_to_spread()&&this.right.safe_to_spread()}return!0}),e(we,function(){return!$e[this.operator]||this.left.safe_to_spread()&&this.right.safe_to_spread()}),e(T,V),e(Ae,V),e(kn,function(){return Le(this.properties,function(e){return!(e instanceof x||e instanceof Pe)})}),e(je,function(){return this.tail_node().safe_to_spread()}),e(Ne,function(){var e=this.fixed_value();return e&&e.safe_to_spread()}),e(Pn,V),(e=function(e,n){e.DEFMETHOD("has_side_effects",n)})(Oe,V),e(ye,function(e){return Mi(this.elements,e,Ci)}),e(xe,function(e){var n,t=this.left;return!(t instanceof Fe)||!((n=t.expression)instanceof Sn)||!n.scope.resolve().new||t instanceof Dn&&t.property.has_side_effects(e)||this.right.has_side_effects(e)}),e(we,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||!br(this.operator,this.right,e)}),e(Qe,function(e){return Mi(this.body,e)}),e(Ee,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||Mi(this.args,e,Ci)}),e(Ze,function(e){return this.expression.has_side_effects(e)||Mi(this.body,e)}),e(en,function(e){var n=this.extends;return!(!n||pt(n=n instanceof Ne?n.fixed_value():n))||Mi(this.properties,e)}),e(c,function(e){return this.key instanceof Oe&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),e(Te,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(T,Ge),e(sn,function(e){return Mi(this.definitions,e)}),e(fn,function(e){return Mi(this.elements,e)}),e(cn,function(e){return this.key instanceof Oe&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(un,function(e){return Mi(this.properties,e)}),e(pn,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),e(Z,Ge),e(ze,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),e(de,function(e){return this.body.has_side_effects(e)}),e(Ae,Ge),e(kn,function(e){return Mi(this.properties,e,function(e,n){e=e.expression;return!e.safe_to_spread()||e.has_side_effects(n)})}),e(Sn,Ge),e(Tn,function(e){return this.key instanceof Oe&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(je,function(e){return Mi(this.expressions,e)}),e(He,function(e){return this.body.has_side_effects(e)}),e(Dn,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),e(zn,function(e){return this.expression.has_side_effects(e)||Mi(this.body,e)}),e(On,Ge),e(Ne,function(e){return!this.is_declared(e)||!_t(this,e)}),e(Mn,function(e){return!this.is_expr_pure(e)||Mi(this.expressions,e)}),e(Hn,function(e){return Mi(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),e(Pn,function(e){return at[this.operator]||this.expression.has_side_effects(e)}),e(Ue,function(){return this.value}),(e=function(e,n){e.DEFMETHOD("may_throw",n)})(Oe,V),e(T,Ge),e(Z,Ge),e(Ae,Ge),e(Sn,Ge),e(On,Ge),e(ye,function(e){return ji(this.elements,e)}),e(xe,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof Ne)&&this.left.may_throw(e)}),e(Ke,function(e){return this.expression.may_throw(e)}),e(we,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||!br(this.operator,this.right,e)}),e(Qe,function(e){return ji(this.body,e)}),e(Ee,function(e){if(ji(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=V;e=Hi(this.expression,e);return delete this.may_throw,e}),e(Ze,function(e){return this.expression.may_throw(e)||ji(this.body,e)}),e(Te,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),e(Se,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),e(sn,function(e){return ji(this.definitions,e)}),e(pn,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),e(vn,function(e){var n;return!!this.init.may_throw(e)||!!(n=this.object).may_throw(e)||!((n=n.tail_node())instanceof ye||n.is_string(e))||this.body.may_throw(e)}),e(ze,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),e(de,function(e){return this.body.may_throw(e)}),e(kn,function(e){return ji(this.properties,e)}),e(Tn,function(e){return this.value.may_throw(e)||this.key instanceof Oe&&this.key.may_throw(e)}),e(Me,function(e){return this.value&&this.value.may_throw(e)}),e(je,function(e){return ji(this.expressions,e)}),e(He,function(e){return this.body.may_throw(e)}),e(Dn,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),e(zn,function(e){return this.expression.may_throw(e)||ji(this.body,e)}),e(Ne,function(e){return!this.is_declared(e)||!_t(this,e)}),e(Mn,function(e){if(ji(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=V;e=Hi(this.tag,e);return delete this.may_throw,e}),e(Hn,function(e){return(this.bcatch?this.bcatch.may_throw(e):ji(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),e(Pn,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof Ne)}),e(Ue,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),(e=function(e,n){e.DEFMETHOD("is_constant_expression",n)})(Oe,Ge),e(ye,function(e){return Pi(this.elements,e)}),e(we,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&br(this.operator,this.right)}),e(en,function(e){var n=this.extends;return!(n&&!pt(n))&&Pi(this.properties,e)}),e(c,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),e(T,V),e(Ae,function(i){var r=this,o=!0,s=[];return r.walk(new Be(function(e,n){if(!o)return!0;if(e instanceof Xe)return e===r?void 0:(s.push(e),n(),s.pop(),!0);if(e instanceof Ne){if(r.inlined||e.redef||e.in_arg)return!(o=!1);if(!r.variables.has(e.name)){n=e.definition();if(!Kn(n.scope,s)){if(i&&!n.redefined()){var t=i.find_variable(e.name);if(t?t===n:n.undeclared)return o="f",!0}o=!1}}return!0}return e instanceof Sn?(Ln(r)&&Le(s,function(e){return!(e instanceof Ce)||Ln(e)})&&(o=!1),!0):void 0})),o}),e(kn,function(e){return Pi(this.properties,e)}),e(Tn,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),e(Pn,function(e){return this.expression.is_constant_expression(e)}),(e=function(e,n){e.DEFMETHOD("aborts",n)})(O,X),e(j,Qn),e(ke,Ni),e(H,Ni),e(ze,function(){return this.alternative&&Yi(this.body)&&Yi(this.alternative)&&this}),ro=K(["use asm","use strict"]),n(w,function(e,n){return!n.option("directives")||ro[e.value]&&n.has_directive(e.value)===e?e:Ve(Z,e)}),n(rn,function(e,n){return n.option("drop_debugger")?Ve(Z,e):e}),n(de,function(e,n){if(e.body instanceof ze||e.body instanceof M){var t=hi([e.body],n);switch(t.length){case 0:e.body=Ve(Z,e);break;case 1:e.body=t[0];break;default:e.body=Ve(ke,e,{body:t})}}return n.option("unused")&&0==e.label.references.length?e.body:e}),n(wn,function(e,n){var t,i;return n.option("dead_code")&&(t=e.label)&&(i=n.loopcontrol_target(e),e.label=null,n.loopcontrol_target(e)===i?Q(t.thedef.references,e):e.label=t),e}),n(Qe,function(e,n){return e.body=hi(e.body,n),e}),n(ke,function(e,n){return e.body=hi(e.body,n),Ri(e,n.parent())}),n(Ae,function(e,n){return Ii(e,n),e.body=hi(e.body,n),e}),n(h,Ui),n(_,Ui),n(gn,function(n,e){Ii(n,e),n.body=hi(n.body,e);var t=e.parent();if(e.option("inline"))for(var i=0;i<n.body.length;i++){var r=n.body[i];if(!(r instanceof w)){if(r instanceof Me){if(i!=n.body.length-1)break;var o=r.value;if(!o||"Call"!=o.TYPE)break;if(o.is_expr_pure(e))break;var s,r=o.expression;if(r instanceof Ne){if(n.name&&n.name.definition()===r.definition())break;s=r.fixed_value()}else s=r;if(!(s instanceof an||s instanceof gn))break;if(s.rest)break;if(s.uses_arguments)break;if(s===r){if(s.parent_scope!==n)break;if(!Le(s.enclosed,function(e){return e.scope!==n}))break}if((s!==r||s.name)&&(t instanceof p||t instanceof k)&&t.value===e.self())break;if(s.contains_this())break;var a=s.argnames.length;if(0<a&&e.option("inline")<2)break;if(a>n.argnames.length)break;if(!Le(n.argnames,function(e){return e instanceof Ye}))break;if(!Le(o.args,function(e){return!(e instanceof Pe)}))break;for(var f=0;f<a;f++){var c=o.args[f];if(!(c instanceof Ne))break;if(c.definition()!==n.argnames[f].definition())break}if(f<a)break;for(;f<o.args.length&&!o.args[f].has_side_effects(e);f++);if(f<o.args.length)break;if(a<n.argnames.length&&!e.drop_fargs(n,t)){if(!e.drop_fargs(s,o))break;for(;s.argnames.push(s.make_var(Ye,s,"argument_"+a)),++a<n.argnames.length;);}return r}break}}return n}),oo=K("arguments await yield"),Ce.DEFMETHOD("merge_variables",function(u){if(u.option("merge_vars")){for(var l,p,d=[],h={},_=this,a=[],f=[],c=0,v=new $n,g=Object.create(null),m=Object.create(null),b=new Be(function(t,e){var n,i,r,o,s,a;return t instanceof xe?(s=t.left,o=t.right,s instanceof De?(o.walk(b),E(Ne,T,s),!0):$e[t.operator.slice(0,-1)]?(s.walk(b),w(),o.walk(b),s instanceof Ne&&T(s),k(),!0):s instanceof Ne?("="!=t.operator&&T(s,!0),o.walk(b),T(s),!0):void 0):t instanceof we?$e[t.operator]?(c(t),!0):void 0:t instanceof M?((a=b.loopcontrol_target(t))instanceof mn||S(a),!0):t instanceof Ee?((i=t.expression)instanceof yn?(t.args.forEach(function(e){e.walk(b)}),i.walk(b)):(e(),f(i)),!0):t instanceof en?(t.name&&t.name.walk(b),t.extends&&t.extends.walk(b),t.properties.filter(function(e){return e.key instanceof Oe&&e.key.walk(b),e.value}).forEach(function(e){e.static?e.value.walk(b):(w(),h.block=t,e.value.walk(b),k())}),!0):t instanceof Te?(c(t.condition,t.consequent,t.alternative),!0):t instanceof C?((a=b.loopcontrol_target(t))instanceof ln&&S(a),!0):t instanceof ln?(w(),h.block=t,h.loop=!0,r=h,t.body.walk(b),h.inserted===t&&(h=r),t.condition.walk(b),k(),!0):t instanceof _n?(t.init&&t.init.walk(b),w(),h.block=t,h.loop=!0,t.condition&&t.condition.walk(b),t.body.walk(b),t.step&&t.step.walk(b),k(),!0):t instanceof vn?(t.object.walk(b),w(),h.block=t,h.loop=!0,t.init.walk(b),t.body.walk(b),k(),!0):t instanceof ze?(c(t.condition,t.body,t.alternative),!0):t instanceof de?(w(),h.block=t,r=h,t.body.walk(b),h.inserted===t&&(h=r),k(),!0):t instanceof Ce?(w(),(h.block=t)===_&&(p=h),t instanceof Ae&&(t.name&&(g[t.name.definition().id]=!1),n=t.uses_arguments&&!b.has_directive("use strict")?function(e){g[e.definition().id]=!1}:function(e){T(e)},d.push(t),t.argnames.forEach(function(e){E(Ye,n,e)}),t.rest&&E(Ye,n,t.rest),d.pop()),B(t,b),k(),!0):t instanceof Dn?(i=t.expression,(t.optional?(i.walk(b),w(),t.property.walk(b),k):e)(),f(i),!0):t instanceof zn?(t.expression.walk(b),r=h,t.body.forEach(function(e){e instanceof on||(e.expression.walk(b),r===h&&w())}),h=r,t.body.forEach(function(e){w(),h.block=t;var n=h;U(e,b),h.inserted===t&&(h=n),k()}),!0):t instanceof F||t instanceof Y?!(g[t.definition().id]=!1):t instanceof Ne?(T(t,!0),!0):t instanceof Hn?(o=l,l=t,U(t,b),t.bcatch&&(t.bcatch.argname&&t.bcatch.argname.mark_symbol(function(e){e instanceof he&&(e=e.definition(),g[e.id]=!1,e=e.redefined())&&(g[e.id]=!1)},b),t.bfinally||(l=o)?U(t.bcatch,b):(w(),U(t.bcatch,b),k())),l=o,t.bfinally&&t.bfinally.walk(b),!0):t instanceof Pn?it[t.operator]&&(s=t.expression)instanceof Ne?(T(s,!0),!0):void 0:t instanceof Ue?((a=t.value)?a.walk(b):a=h.block instanceof vn&&h.block.init===b.parent(),E(On,a?function(e){e instanceof Fn?T(e):e.walk(b)}:function(e){var n,t;e instanceof Fn?(n=e.definition().id,(t=g[n])?t.push(e):n in g||v.add(n,e)):e.walk(b)},t.name),!0):t instanceof Nn?(w(),h.block=t,h.loop=!0,e(),k(),!0):void 0;function f(e){u.option("ie")&&(e=Bn(e))instanceof Ne&&e.walk(b)}function c(e,n,t){var i=h,r=[i,i];if(e instanceof we)switch(e.operator){case"&&":r[0]=c(e.left,e.right)[0];break;case"||":case"??":r[1]=c(e.left,null,e.right)[1];break;default:e.walk(b)}else e instanceof Te?c(e.condition,e.consequent,e.alternative):e.walk(b);return h=r[0],n&&(w(),n.walk(b)),r[0]=h,h=r[1],t&&(w(),t.walk(b)),r[1]=h,h=i,r}}),e=(b.directives=Object.create(u.directives),_.walk(b),!1),n=Object.create(null);a.length&&f.length;){var t=f.shift();if(t){var i=t.definition,r=g[i.id];if(r){for(r={end:r.end};i.id in n;)i=n[i.id];r.start=g[i.id].start;var o=[];do{var s=a.shift();if(!(t.index>s.index)){var y=s.definition;if(y.id in m){var x=g[y.id];if(x){if(x.start.block===r.start.block&&z(x,r)&&(!x.start.loop&&Tr(i)||z(r,x))&&(!u.option("webkit")||st(i)===st(y))&&!y.const_redefs&&Le(x.scopes,function(e){return e.find_variable(i.name)===i})){x.forEach(function(e){e.thedef=i,e.name=i.name,e instanceof Ne?(i.references.push(e),y.replaced++):(i.orig.push(e),y.eliminated++)}),y.fixed||(i.fixed=!1),n[y.id]=i,e=!0;break}o.push(s)}}}}while(a.length);o.length&&(a=o.concat(a))}}}return e}function w(){h=Object.create(h)}function k(){h=Object.getPrototypeOf(h)}function E(n,t,e){var i=new Be(function(e){if(!(e instanceof De))return e instanceof Se?(w(),e.value.walk(b),k(),e.name.walk(i)):e instanceof cn?e.key instanceof Oe?e.value instanceof Fe?(w(),(h.block=e).key.walk(b),e.value.walk(i),k()):(e.key.walk(b),e.value.walk(i)):e.value.walk(i):e instanceof n?t(e):e.walk(b),!0});e.walk(i)}function T(n,e){var t,i=n.definition();if(e&&!Le(d,function(e){return!(t=e.variables.get(n.name))||!st(t)||t!==i&&!i.undeclared&&e.parent_scope.find_variable(n.name)!==i}))return g[i.id]=g[t.id]=!1;var r,o=h;if(l&&(w(),o=h,k()),i.id in g){if(!(r=g[i.id]))return;if(r.start.block!==o.block)return g[i.id]=!1;if(s(n),r.end=o,i.id in m)f[m[i.id]]=null;else if(!e)return}else{if((t=_.variables.get(i.name))!==i)return t&&p===o&&(g[t.id]=!1),g[i.id]=!1;if(u.exposed(i)||oo[n.name])return g[i.id]=!1;if((r=v.get(i.id)||[]).scopes=[],s(n),g[i.id]=r,!e)return r.start=o,a.push({index:c++,definition:i});if(o.block!==_)return g[i.id]=!1;r.start=p}function s(e){r.push(e),be(r.scopes,e.scope);var n=Vt(b);n!==e.scope&&be(r.scopes,n)}m[i.id]=f.length,f.push({index:c++,definition:i})}function S(e){for(var n=[];;){if(J(h,"block")){var t=h.block;if((t=t instanceof de?t.body:t)===e)break}n.push(h),k()}for(h.inserted=h.block,w();n.length;){var i=n.pop();w(),J(i,"block")&&(h.block=i.block),J(i,"loop")&&(h.loop=i.loop)}}function D(e,n){return e===n||e.isPrototypeOf(n)}function z(e,n){return D(e.start,e.end)||D(e.start,n.start)}}),Ce.DEFMETHOD("drop_unused",function(q){if(q.option("unused")){var F=this,M=!(F instanceof jn)||q.toplevel.funcs,C=!(F instanceof jn)||q.toplevel.vars,j=/keep_assign/.test(q.option("unused"))?Ge:function(e,n){var t,i=!1;if(e instanceof xe?!e.write_only&&"="!=e.operator||(t=r(e.left,n)):e instanceof Pn&&e.write_only&&(t=r(e.expression,n)),t instanceof Ne){e=t.definition();if(!s[e.id]&&!q.exposed(e)&&_t(t,q,i))return t}function r(e,n){if(e instanceof Fe){var t=e.expression;if(!t.may_throw_on_access(q,!0))return i=!0,n&&e instanceof Dn&&n.unshift(e.property),r(t,n)}else if(e instanceof xe&&"="==e.operator)return e.write_only="p",t=r(e.right),!n||(n.assign=e,t instanceof Ne)?t:e.left;return e}},H=Object.create(null),s=Object.create(null),c=function(e){return(c=function e(n,t,i){var r=q.parent(t);if(!r)return i;n=r instanceof Ae&&Kn(n,r.argnames);return e(r,t+1,n?function(e){var n=i(e);if(n)return n;if(n=r.variables.get(e)){e=n.orig[0];if(e instanceof Ye||e instanceof ve)return n}}:r.variables?function(e){return i(e)||r.variables.get(e)}:i)}(F,0,me))(e)},P=Object.create(null),u=[],Y=Object.create(null),l=Object.create(null),p=Object.create(null),d=Object.create(null),N=Object.create(null),h=(F instanceof jn&&q.top_retain&&F.variables.each(function(e){!q.top_retain(e)||e.id in Y||(Oe.info("Retaining variable {name}",e),Y[e.id]=!0,u.push(e))}),new $n),_=new $n,R=this,I=((v=new Be(function(a,e){if(a instanceof Ae&&a.uses_arguments&&!v.has_directive("use strict")&&a.each_argname(function(e){e=e.definition();e.id in Y||(Y[e.id]=!0,u.push(e))}),a!==F){if(R===F){var t,i,n,r;if(a instanceof fe)return r=a.name.definition(),(n=M&&!r.exported)||r.id in Y||(Y[r.id]=!0,u.push(r)),(t=v.parent()instanceof ue)?s[r.id]=!0:!n||r.id in l||(l[r.id]=1),a.extends&&a.extends.walk(v),i=[],a.properties.forEach(function(e){e.key instanceof Oe&&e.key.walk(v);var n=e.value;n&&(ci(e)?(!t&&n.contains_this()&&(t=!0),o(n)):i.push(n))}),i.forEach(n&&t?o:function(e){_.add(r.id,e)}),!0;if(a instanceof bn)return r=a.name.definition(),(n=M&&!r.exported)||r.id in Y||(Y[r.id]=!0,u.push(r)),_.add(r.id,a),v.parent()instanceof ue?(s[r.id]=!0,f(a,e,!0)):(!n||r.id in l||(l[r.id]=1),!0);if(a instanceof sn)return a.definitions.forEach(function(i){var r=i.value,o=r&&(i.name instanceof De||r.has_side_effects(q)),s=o&&"="==r.tail_node().operator;i.name.mark_symbol(function(e){var n,t;if(e instanceof On)return n=e.definition(),N[n.id]=(N[n.id]||0)+1,a instanceof ee&&n.orig[0]instanceof he&&(t=n.redefined())&&(N[t.id]=(N[t.id]||0)+1),n.id in Y||C&&!n.exported&&(a instanceof ae?!n.redefined():!n.const_redefs)&&(a instanceof ee||sr(n))||(Y[n.id]=!0,u.push(n)),r&&(o?s&&b(n,e,d[n.id]):_.add(n.id,r),h.add(n.id,i)),y(n),!0},v),o&&r.walk(v)}),!0;if(a instanceof Ye)return r=a.definition(),N[r.id]=(N[r.id]||0)+1,h.add(r.id,a),!0;if(a instanceof _e)return(r=a.definition()).id in Y||C&&sr(r)||(Y[r.id]=!0,u.push(r)),!0}return f(a,e,!0)}function o(e){var n=R;R=a,e.walk(v),R=n}})).directives=Object.create(q.directives),F.walk(v),q.option("keep_fnames")?Ge:q.option("ie")?function(e){return!q.exposed(e)&&e.references.length==e.replaced}:function(e){return!(e.id in Y)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof Ye||Le(e.references,function(e){return!e.in_arg}))});q.option("ie")&&_.each(function(e,n){n in Y||e.forEach(function(e){e.walk(new Be(function(e){return e instanceof gn&&e.name&&!I(e.name.definition())?(e.walk(v),!0):e instanceof Ce||void 0}))})});for(var v=new Be(f),e=0;e<u.length;e++){var n=_.get(u[e].id);n&&n.forEach(function(e){e.walk(v)})}Object.keys(H).forEach(function(e){var n,t=H[e];t&&(t=t.reduce(function(n,e){return e.forEach(function(e){be(n,e)}),n},[]),n=(h.get(e)||[]).filter(function(n){return ge(n instanceof Pn?function(e){return e===n}:function(e){return e===n||!(e instanceof Pn)&&i(e)===i(n)},t)}),t.length==n.length)?H[e]=n:delete H[e]});var U=[],B=[],L=new Un(function(t){if(t instanceof Se)return k(L,t);if(t instanceof De&&t.rest&&(t.rest=t.rest.transform(L)),t instanceof fn){for(var e=!t.rest,n=t.elements.length;0<=--n;){var i=t.elements[n].transform(L);i?(t.elements[n]=i,e=!1):e?t.elements.pop():t.elements[n]=Ve(pe,t.elements[n])}return t}var r;return t instanceof un?(r=[],t.properties.forEach(function(e){var n=!1;e.key instanceof Oe&&(e.key=e.key.transform(G),n=e.key.has_side_effects(q)),(n||t.rest)&&((n=e.value)instanceof Se?n.name:n)instanceof On?(e.value=e.value.transform(G),r.push(e)):(n=!(n=e.value.transform(L))&&t.rest?e.value instanceof fn?Ve(fn,e.value,{elements:[]}):Ve(un,e.value,{properties:[]}):n)&&(e.value=n,r.push(e))}),t.properties=r,t):t instanceof On?J(t):void 0}),G=new Un(function(d,n,e){var t,i,h=G.parent();if(C){var r,o,s=[],a=j(d,s);if(a){if(i=d,g=(t=a).definition(),r=!(o=Y[g.id])||i[i instanceof xe?"left":"expression"]===t&&(o===t&&g.references.length-g.replaced==1||$(g,i)<0)?(r=d instanceof xe&&(r=X(d),!0===d.write_only)?r.drop_side_effect_free(q):r)||Ve(qe,d,{value:0}):r)switch(s.assign&&(o=s.assign.drop_side_effect_free(q))&&(o.write_only=!0,s.unshift(o)),h instanceof je&&h.tail_node()!==d&&!r.has_side_effects(q)||s.push(r),s.length){case 0:return Jn.skip;case 1:return Qt(h,d,s[0].transform(G));default:return We(d,s.map(function(e){return e.transform(G)}))}}else if(d instanceof Yn&&d.expression instanceof Ne&&$(d.expression.definition(),d)<0)return Ve(Re,d,{operator:"+",expression:d.expression})}if(d instanceof we&&"instanceof"==d.operator)return!((a=d.right)instanceof Ne)||a.definition().id in Y?void 0:(t=d.left.drop_side_effect_free(q),r=Ve(le,d).optimize(q),t?We(d,[t,r]):r);if(d instanceof Ee)return U.push(d),d.args=d.args.map(function(e){return e.transform(G)}),d.expression=d.expression.transform(G),d;if(R===F){if(M&&d!==F&&d instanceof fe)if(!((l=d.name.definition()).id in Y))return V(d.name,"Dropping unused class {name}"),l.eliminated++,n(d,G),p=Li(d,!0),h instanceof ue?p:(p=p.drop_side_effect_free(q,!0))?Ve(He,d,{body:p}):e?Jn.skip:Ve(Z,d);if(d instanceof se&&d.name&&I(d.name.definition())&&(d.name=null),d instanceof Ae){if(M&&d!==F&&d instanceof bn)if(!((l=d.name.definition()).id in Y))return V(d.name,"Dropping unused function {name}"),l.eliminated++,h instanceof ue?(O(),Gi(d,!0)):e?Jn.skip:Ve(Z,d);if(O(),d instanceof yn&&d.name&&I(d.name.definition())&&(d.name=null),!(d instanceof Je)){var f,c,u=q.drop_fargs(d,h);if(u&&h instanceof Ee&&h.expression===d)for(f=h.args,c=0;c<f.length&&!(f[c]instanceof Pe);c++);for(var l,p,_,v=d.argnames,g=d.rest,m=!1,b=!1,y=(g&&(b=!0,!f||c<v.length||g instanceof Ye?g=g.transform(L):(g=(p=K(g,Ve(ye,h,{elements:f.slice(v.length)}),J,!d.uses_arguments,g)).name,f.length=v.length,p.value.elements.length&&[].push.apply(f,p.value.elements)),g instanceof De&&!g.rest&&(g instanceof fn?0==g.elements.length&&(g=null):0==g.properties.length&&(g=null)),d.rest=g)&&(m=!(u=!1)),u?-1:d.length()),x=f&&!d.uses_arguments&&h!==q.parent(),w=v.length;0<=--w;)(a=v[w])instanceof Ye?(l=a.definition()).id in Y?(u=!1,$(l,a)<0&&(a.unused=null)):(u&&(V(a,"Dropping unused function argument {name}"),v.pop(),l.eliminated++),a.unused=!0):(b=!0,!f||c<w?_=a.transform(L):(_=(p=K(a,f[w],J,x,a)).name,p.value&&(f[w]=p.value)),_?(u=!1,v[w]=_,m=m||!(_ instanceof Ye)):u?(W(a,"Dropping unused default argument {name}"),v.pop()):y<w?(W(a,"Dropping unused default argument assignment {name}"),a.name instanceof Ye?a.name.unused=!0:m=!0,v[w]=a.name):(W(a,"Dropping unused default argument value {name}"),v[w]=a=a.clone(),a.value=Ve(qe,a,{value:0}),m=!0));b&&!m&&d.uses_arguments&&!G.has_directive("use strict")&&(d.rest=Ve(fn,d,{elements:[]})),B.push(d)}return d}if(d instanceof oe&&d.argname instanceof De&&d.argname.transform(L),!(d instanceof sn)||h instanceof vn&&h.init===d)return d instanceof xe?(n(d,G),d.left instanceof De?(p=K(d.left,d.right,function(e){return e},!0===d.write_only)).name?Ve(xe,d,{operator:d.operator,left:p.name,right:p.value}):p.value||(h instanceof je&&h.tail_node()!==d?Jn.skip:Ve(qe,d,{value:0})):d):d instanceof de&&d.body instanceof _n?(n(d,G),d.body instanceof ke?(i=d.body,d.body=i.body.pop(),i.body.push(d),e?Jn.splice(i.body):i):d):d instanceof Ce?(O(),d):d instanceof _e?!q.option("imports")||d.definition().id in Y?d:e?Jn.skip:null:void 0;var k=[],E=[],T=[],S=[],D=0,z=d instanceof ee;switch(d.definitions.forEach(function(e){e.value&&(e.value=e.value.transform(G));var n=e.value;if(e.name instanceof De)(f=K(e.name,n,function(e){return!C||e.definition().id in Y||l(e)||z&&!_t(e)?e:null},!0)).name?(e=Ve(Ue,e,{name:f.name,value:n=f.value}),p()):f.value&&S.push(f.value);else{var t,i,r,o,s,a=e.name.definition(),f=z?_t(e.name):sr(a);if(!f||!C||a.id in Y)if(n&&((o=$(a,e))<0||(s=n.tail_node())instanceof Ne&&s.definition()===a)&&(e=e.clone(),(n=n.drop_side_effect_free(q))&&Oe.warn("Side effects in definition of variable {name} [{start}]",e.name),d instanceof ae?e.value=n||Ve(qe,e,{value:0}):(e.value=null,n&&S.push(n)),n=null,0<=o)&&(H[a.id][o]=e),n||d instanceof xn)if(q.option("functions")&&!q.option("ie")&&f&&n&&1==N[a.id]&&0==a.assignments&&(s=n.tail_node())instanceof yn&&!dt(a)&&!Ln(s)&&(r=s,0==(o=a.references).length?r===e.name.fixed_value():Le(o,function(e){return r===e.fixed_value()}))&&(i=s,z&&!q.has_directive("use strict")&&i instanceof gn?h instanceof Qe||h instanceof _n&&h.init===d||h instanceof ze:h instanceof Ce)&&!1!==(i=function(t,i){if(!t.name)return null;var r,e=t.name.definition();if(1<e.orig.length)return null;if(0<e.assignments)return!1;if(e.name==i)return e;if(q.option("keep_fnames"))return!1;switch(i){case"await":r=Wn;break;case"yield":r=Gn}return Le(e.references,function(e){var n=e.scope;if(n.find_variable(i)!==a)return!1;if(r)do{if(n=n.resolve(),r(n))return!1}while(n!==t&&(n=n.parent_scope));return!0})&&e}(s,e.name.name))){switch(Oe.warn("Declaring {name} as function [{start}]",e.name),s.CTOR){case te:t=ne;break;case re:t=ie;break;case gn:t=an;break;case AST_GeneratorFunction:t=AST_GeneratorDefun}var c=Ve(t,s),u=(c.name=Ve(qn,e.name),e.name.scope.resolve().def_function(c.name));i&&i.forEach(function(e){e.name=u.name,e.thedef=u,e.reference()}),k.push(c),n!==s&&[].push.apply(S,n.expressions.slice(0,-1))}else f&&1<N[a.id]&&!(h instanceof ce)&&a.orig.indexOf(e.name)>a.eliminated&&(N[a.id]--,D++),p();else h instanceof ce?p():f&&1<N[a.id]?(Oe.info("Dropping declaration of variable {name} [{start}]",e.name),N[a.id]--,a.eliminated++):E.push(e);else l(e.name)?((n=n&&n.drop_side_effect_free(q))&&S.push(n),1<N[a.id]?(Oe.warn("Dropping duplicated declaration of variable {name} [{start}]",e.name),N[a.id]--,a.eliminated++):(e.value=null,E.push(e))):((n=n&&n.drop_side_effect_free(q))?(Oe.warn("Side effects in initialization of unused variable {name} [{start}]",e.name),S.push(n)):V(e.name,"Dropping unused variable {name}"),a.eliminated++)}function l(e){var n=e.definition();return n.orig[0]instanceof he&&n.scope.resolve()===e.scope.resolve()}function p(){0<S.length&&(0==T.length?k.push(Ve(He,d,{body:We(d,S)})):n?(S.push(n),e.value=We(n,S)):e.value=Ve(Re,e,{operator:"void",expression:We(e,S)}),S=[]),T.push(e)}}),E.length){case 0:if(0==T.length)break;if(T.length==D){[].unshift.apply(S,T.map(function(e){Oe.info("Dropping duplicated definition of variable {name} [{start}]",e.name);var n=e.name.definition(),t=Ve(Ne,e.name),t=(n.references.push(t),Ve(xe,e,{operator:"=",left:t,right:e.value})),e=$(n,e);return 0<=e&&(H[n.id][e]=t),n.assignments++,n.eliminated++,t}));break}case 1:if(0==T.length){var A=E[0].name.definition().id;if(A in P){d.definitions=E,P[A].init=d;break}}default:0<T.length&&(A=T[0].value)instanceof je&&(T[0].value=A.tail_node(),k.push(Ve(He,d,{body:We(A,A.expressions.slice(0,-1))}))),d.definitions=E.concat(T),k.push(d)}return 0<S.length&&k.push(Ve(He,d,{body:We(d,S)})),Q(k,d,e)}function O(){var e=R;n(R=d,G),R=e}},function(e,n){if(e instanceof ke)return Ri(e,G.parent(),n);if(e instanceof ce)return(t=e.body)instanceof ke?(e.body=t.body.pop(),t.body.push(e),n?Jn.splice(t.body):t):void 0;if(e instanceof _n)return di(e,n);if(e instanceof E){if(!C||!q.option("loops"))return;if(!ii(e.body))return;var t=x(e);if(!t)return;var i=t.definition();if(i.id in Y)return;V(t,"Dropping unused loop variable {name}"),P[i.id]===e&&delete P[i.id];var t=[],r=e.object.drop_side_effect_free(q);return r&&(Oe.warn("Side effects in object of for-in loop [{start}]",r),t.push(Ve(He,e,{body:r}))),e.init instanceof sn&&i.orig[0]instanceof he&&t.push(e.init),Q(t,e,n)}return e instanceof S?(e.properties&&0==e.properties.length&&(e.properties=null),e):e instanceof je&&!(1<e.expressions.length)?Qt(G.parent(),e,e.expressions[0]):void 0});G.push(q.parent()),G.directives=Object.create(q.directives),F.transform(G),F instanceof Ae&&1==F.body.length&&F.body[0]instanceof w&&"use strict"==F.body[0].value&&(F.body.length=0),U.forEach(function(e){dr(e,q,B)})}function V(e,n){Oe[0<e.definition().references.length?"info":"warn"](n+" [{start}]",e)}function W(e,n){e.name instanceof Ye?V(e.name,n):Oe.info(n+" [{start}]",e)}function i(e){return e[e instanceof xe?"right":"value"]}function Q(e,n,t){switch(e.length){case 0:return t?Jn.skip:Ve(Z,n);case 1:return e[0];default:return t?Jn.splice(e):Ve(ke,n,{body:e})}}function g(e,n){return e.scope.resolve()===F&&(e.fixed&&n.fixed||(H[e.id]=!1),!1!==H[e.id])}function m(e,n){H[e.id]||(H[e.id]=[]),n.fixed.assigns&&be(H[e.id],n.fixed.assigns)}function $(e,n){e=H[e.id];return e&&e.indexOf(n)}function y(e){1<l[e.id]&&!(e.id in Y)&&(Y[e.id]=!0,u.push(e)),l[e.id]=0}function b(e,n,t){e.id in Y||(n&&t?(Y[e.id]=n,u.push(e)):(p[e.id]=n,d[e.id]=t))}function X(e){var n=e.right;return!e.write_only||!(n instanceof we&&$e[n.operator])||!(n.left instanceof Ne)||!(e.left instanceof Ne)||(e=e.left.definition(),n.left.definition()!==e)||n.right.has_side_effects(q)?n:(g(e,n.left)&&m(e,n.left),n.right)}function x(e){var n=e.init;if(n instanceof sn)return(n=n.definitions[0].name)instanceof On&&n;for(;n instanceof Fe;)n=n.expression.tail_node();return n instanceof Ne?n:void 0}function f(e,n,t){e instanceof xe&&e.left instanceof Ne&&(r=e.left.definition()).scope.resolve()===F&&h.add(r.id,e),e instanceof Ne&&e.in_arg&&(N[e.definition().id]=0),e instanceof Pn&&e.expression instanceof Ne&&(r=e.expression.definition()).scope.resolve()===F&&h.add(r.id,e);var i,r,o,s=[],a=j(e,s);if(a)return(o=a.definition()).scope.resolve()!==F&&F.variables.get(a.name)!==o||dt(o)&&!Le(F.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof Ye)return(e=e.definition()).references.length>e.replaced},!0)})||"p"===e.write_only&&e.right.may_throw_on_access(q,!0)?void 0:((f=s.assign)&&(f.write_only=!0,f.walk(v)),s.forEach(function(e){e.walk(v)}),e instanceof xe&&(f=X(e),s=!1,t&&!0===e.write_only&&!f.has_side_effects(q)?_.add(o.id,f):(f.walk(v),s="="==f.tail_node().operator),e.left===a?e.write_only&&!s||b(o,a,d[o.id]):(t=a.fixed_value())&&t.is_constant()||b(o,p[o.id],!0)),g(o,a)&&ot(a,e)!==a&&m(o,a),y(o),!0);if(e instanceof we)return"instanceof"==e.operator&&(a=e.right)instanceof Ne&&(i=a.definition().id,l[i])?(e.left.walk(v),l[i]++,!0):void 0;if(e instanceof E){if(e.init instanceof Ne&&R===F&&((i=e.init.definition().id)in P||(P[i]=e)),!C||!q.option("loops"))return;if(!ii(e.body))return;if(e.init.has_side_effects(q))return;if(!(a=x(e)))return;if((r=a.definition()).scope.resolve()!==F){var f=c(a.name);if(f===r||f&&f.redefined()===r)return}return e.object.walk(v),!0}return e instanceof Ne?((o=e.definition()).id in Y||(Y[o.id]=!0,u.push(o)),!ht(o.scope,e.scope)||!(s=o.redefined())||s.id in Y||(Y[s.id]=!0,u.push(s)),g(o,e)&&m(o,e),!0):e instanceof Ce?(t=R,R=e,n(),R=t,!0):void 0}function J(e){return e.definition().id in Y?e:(e instanceof Ye&&(e.unused=!0),null)}function k(e,n){if(n.value=n.value.transform(G),!n.name.transform(e)){if(n.name instanceof De)return null;e=n.value.drop_side_effect_free(q);if(!e)return null;V(n.name,"Side effects in default value of unused variable {name}"),(n=n.clone()).name.unused=null,n.value=e}return n}function K(e,v,g,m,b){var y=new Un(function(r){if(r instanceof Se){if(!(q.option("default_values")&&v&&v.is_defined(q)))return t=m,m=!1,n=k(y,r),m=t,!n&&m&&(v=v&&v.drop_side_effect_free(q)),n;r===b?b=r=r.name:r=r.name}if(r instanceof fn){var e,n,t=m,i=v,o=(v instanceof Ne&&(m=!1,v=v.fixed_value()),l=v instanceof ye?(e=!0,v.elements):(e=v&&v.is_string(q),!1),[]),s=m&&[],a=0;if(r.elements.forEach(function(e,n){(v=l&&l[n])instanceof pe?v=null:v instanceof Pe&&(m&&(s.length=a,Bi(i,s),[].push.apply(s,l.slice(n)),i.elements=s),v=l=!1),(e=e.transform(y))&&(o[a]=e),m&&v&&(s[a]=v),!e&&!v&&m&&l||a++}),v=l&&Ve(ye,i,{elements:l.slice(r.elements.length)}),r.rest&&(n=m,m=!1,r.rest=r.rest.transform(q.option("rests")?y:G),m=n,r.rest)&&(o.length=a),m&&(v=(v=v&&!r.rest?v.drop_side_effect_free(q):v)instanceof ye?v.elements:v instanceof je?v.expressions:v&&[v])&&v.length&&(s.length=a,[].push.apply(s,v)),v=i,m=t,l&&s&&(Bi(v,s),(v=v.clone()).elements=s),e){if(!r.rest)switch(o.length){case 0:if(r===b)break;return m&&(v=v.drop_side_effect_free(q)),null;case 1:if(!m)break;if(r===b)break;var f=o[0];if(f.has_side_effects(q))break;if(v.has_side_effects(q)&&f.match_symbol(function(e){return e instanceof Fe}))break;return v=Ve(Dn,r,{expression:v,property:Ve(qe,r,{value:0})}),f}}else o.length=r.elements.length;Bi(r,o),r.elements=o}else if(r instanceof un){var c,u,l,t=m,i=v,p=(v instanceof Ne&&(m=!1,v=v.fixed_value()),v instanceof kn&&(c=[],u=new $n,l=v.properties.map(function(e,n){var t;return(e=e.clone())instanceof Pe?u=!1:((t=(t=e.key)instanceof Oe?t.evaluate(q,!0):t)instanceof Oe?u=!1:!u||e instanceof z||u.set(t,e),c[n]=t),e})),r.rest&&(v=!1,r.rest=r.rest.transform(q.option("rests")?y:G)),new $n),d=m&&new $n,h=[];if(r.properties.map(function(e){var n=e.key;return n instanceof Oe&&(e.key=n=n.transform(G),n=n.evaluate(q,!0)),n instanceof Oe?d=!1:p.set(n,!p.has(n)),n}).forEach(function(e,n){var t,i,n=r.properties[n];e instanceof Oe?(v=m=!1,t=n.value.transform(y)||w(n.value)):(m=d&&p.get(e),(!(i=u&&u.get(e))||(v=i.value)instanceof Je)&&(v=!1),(t=n.value.transform(y))?d&&d.set(e,!1):((r.rest||x(n))&&(t=w(n.value)),d&&!d.has(e)&&(i?(d.set(e,i),null===v&&u.set(e,x(i)&&Ve(En,i,{key:i.key,value:Ve(qe,i,{value:0})}))):d.set(e,!0))),v&&(i.value=v)),t&&(n.value=t,h.push(n))}),v=i,m=t,d&&c&&((v=v.clone()).properties=Jn(l,function(e,n){if(e instanceof Pe)return e;n=c[n];if(n instanceof Oe)return e;if(d.has(n)){var t=d.get(n);if(!t)return e;if(t===e)return u.get(n)||Jn.skip}else if(r.rest)return e;t=e.value.drop_side_effect_free(q);return t?(e.value=t,e):x(e)?Ve(En,e,{key:e.key,value:Ve(qe,e,{value:0})}):Jn.skip})),v&&!r.rest)switch(h.length){case 0:if(r===b)break;if(v.may_throw_on_access(q,!0))break;return m&&(v=v.drop_side_effect_free(q)),null;case 1:if(!m)break;if(r===b)break;var _=h[0];if(_.key instanceof Oe)break;if(_.value.has_side_effects(q))break;if(v.has_side_effects(q)&&_.value.match_symbol(function(e){return e instanceof Fe}))break;return v=Ve(Dn,r,{expression:v,property:Jt(_.key,_)}),_.value}r.properties=h}else!(r=r instanceof pe?null:g(r))&&m&&(v=v&&v.drop_side_effect_free(q));return r});return{name:e.transform(y),value:v};function x(e){return e.key instanceof Oe&&e.key.has_side_effects(q)}function w(e){return e instanceof Se?w(e.name):e instanceof De?(null===v?v=Ve(qe,e,{value:0}):v&&(v.may_throw_on_access(q,!0)?v=Ve(ye,e,{elements:v instanceof je?v.expressions:[v]}):function e(n){n instanceof xe?(n.write_only=!1,e(n.right)):n instanceof we?$e[n.operator]&&(e(n.left),e(n.right)):n instanceof Te?(e(n.consequent),e(n.alternative)):n instanceof je?e(n.tail_node()):n instanceof Pn&&(n.write_only=!1)}(v)),Ve(un,e,{properties:[]})):(e.unused=null,e)}}}),Ce.DEFMETHOD("hoist_declarations",function(s){var a,f,c,n,u,l,p,d,h,t;!s.has_directive("use asm")&&(a=s.option("hoist_funs"),f=s.option("hoist_vars"),c=this,f&&(n=0,c.walk(new Be(function(e){return 1<n||e instanceof ce||e instanceof Ce&&e!==c||(e instanceof ee?(n++,!0):void 0)})),n<=1)&&(f=!1),a||f)&&(u=new $n,l=[],p=[],d=new $n,h=new Un(function(e,n,t){if(e!==c){if(e instanceof w)return l.push(e),t?Jn.skip:Ve(Z,e);var i;if(e instanceof bn)return!a||(i=h.parent())instanceof ce||i instanceof ue||i!==c&&s.has_directive("use strict")?e:(p.push(e),t?Jn.skip:Ve(Z,e));if(e instanceof ee){if(!f)return e;if((i=h.parent())instanceof ce)return e;if(!Le(e.definitions,function(e){e=e.name;return e instanceof Fn&&!u.has(e.name)&&c.find_variable(e.name)===e.definition()}))return e;e.definitions.forEach(function(e){d.set(e.name.name,e)});var r,o=e.to_assignments();return i instanceof vn&&i.init===e?o||(r=e.definitions[0].name,Ve(Ne,r)):i instanceof _n&&i.init===e?o:o?Ve(He,e,{body:o}):t?Jn.skip:Ve(Z,e)}return e instanceof Ce?e:e instanceof F?(u.set(e.name,!0),e):void 0}}),c.transform(h),0<d.size()&&(t=[],c instanceof Ae&&c.each_argname(function(e){Le(e.definition().references,function(e){return!e.in_arg})&&d.del(e.name)}),d.each(function(e,n){(e=e.clone()).name=e.name.clone(),e.value=null,t.push(e),d.set(n,e),e.name.definition().orig.unshift(e.name)}),0<t.length)&&p.push(Ve(ee,c,{definitions:t})),c.body=l.concat(p,c.body))}),Ce.DEFMETHOD("process_returns",me),an.DEFMETHOD("process_returns",function(e){if(e.option("booleans")&&!(e.parent()instanceof ue))switch($i(this.name.definition(),Wi(this),e)){case"d":Qi(e,this,!0);break;case!0:Ji(this,e)}}),gn.DEFMETHOD("process_returns",function(n){if(n.option("booleans")){var t=!0,i=Wi(this);if(!this.name||c(this.name.definition())){var e=n.parent();if(e instanceof xe){if("="!=e.operator)return;if(!((o=e.left)instanceof Ne))return;if(!c(o.definition()))return}else if(e instanceof Ee&&e.expression!==this){var r=e.expression;if(!((r=r instanceof Ne?r.fixed_value():r)instanceof Ae))return;if(r.uses_arguments||r.pinned())return;for(var o,s=e.args,a=0;a<s.length;a++){var f=s[a];if(f===this){if(!(o=r.argnames[a])&&r.rest)return;break}if(f instanceof Pe)return}if((o=o instanceof Se?o.name:o)instanceof Ye&&!c(o.definition()))return}else{if("Call"!=e.TYPE)return;n.pop();e=n.in_boolean_context();switch(n.push(this),e){case!0:t=!1;case"d":break;default:return}}t?Qi(n,this,!0):Ji(this,n)}}function c(e){switch($i(e,i,n)){case!0:t=!1;case"d":return 1}}}),Xe.DEFMETHOD("var_names",function(){var t=this._var_names;return t||(this._var_names=t=new $n,this.enclosed.forEach(function(e){t.set(e.name,!0)}),this.variables.each(function(e,n){t.set(n,!0)})),t}),Ce.DEFMETHOD("make_var",function(e,n,t){for(var i=[this],r=(n instanceof On&&n.definition().references.forEach(function(e){var n=e.scope;do{if(!be(i,n))return}while((n=n.parent_scope)&&n!==this)}),t=t.replace(/^[^a-z_$]|[^a-z0-9_$]/gi,"_")),o=0;!Le(i,function(e){return!e.var_names().has(r)});o++)r=t+"$"+o;var e=Ve(e,n,{name:r,scope:this}),s=this.def_variable(e);return i.forEach(function(e){e.enclosed.push(s),e.var_names().set(r,!0)}),e}),Ce.DEFMETHOD("hoist_properties",function(r){var f,o,c,u;function l(e,n,t){var i;return!(e instanceof An)||(i=e.definition()).assignments!=t||i.references.length-i.replaced==t||i.single_use||f.find_variable(e.name)!==i||o(i)||e.fixed_value()!==n||(t=e.fixed||i.fixed).direct_access?void 0:(!t.escaped||1!=t.escaped.depth)&&n instanceof kn&&0<n.properties.length&&_t(e,r)&&Le(n.properties,function(e){return qr(e)&&"__proto__"!==e.key})}!r.option("hoist_props")||r.has_directive("use asm")||(f=this,Ln(f)&&f.value)||(o=f instanceof jn&&r.top_retain||Ge,c=Object.create(null),u=new Un(function(t,e){if(t instanceof xe){if("="!=t.operator)return;if(!t.write_only)return;if(!l(t.left,t.right,1))return;e(t,u);var i=new $n,r=[],o=[];return t.right.properties.forEach(function(e){var n=a(Fn,t.left,e.key),n=(o.push(Ve(Ue,t,{name:n,value:null})),Ve(Ne,t,{name:n.name,scope:f,thedef:n.definition()}));n.reference(),r.push(Ve(xe,t,{operator:"=",left:n,right:e.value}))}),i.value=t.right,c[t.left.definition().id]=i,f.body.splice(f.body.indexOf(u.stack[1])+1,0,Ve(ee,t,{definitions:o})),We(t,r)}var n,s;if(t instanceof Ce)return t===f||"Call"==(s=u.parent()).TYPE&&s.expression===t?void 0:t;if(t instanceof Ue&&l(t.name,t.value,0))return e(t,u),i=new $n,n=[],(s=t.clone()).value=t.name instanceof F?Ve(qe,t,{value:0}):null,n.push(s),t.value.properties.forEach(function(e){n.push(Ve(Ue,t,{name:a(t.name.CTOR,t.name,e.key),value:e.value}))}),i.value=t.value,c[t.name.definition().id]=i,Jn.splice(n);function a(e,n,t){e=f.make_var(e,n,n.name+"_"+t);return i.set(t,e.definition()),e}}),f.transform(u),f.transform(new Un(function(e,n){var t;if(e instanceof Fe)return!(e.expression instanceof Ne&&(i=c[e.expression.definition().id])&&e.expression.fixed_value()===i.value)?void 0:(t=i.get(e.get_property()),(t=Ve(Ne,e,{name:t.name,scope:e.expression.scope,thedef:t})).reference(),t);if(e instanceof Ne){var i=c[e.definition().id];if(i&&e.fixed_value()===i.value)return Ve(kn,e,{properties:[]})}})))}),(e=function(e,n){e.DEFMETHOD("drop_side_effect_free",n)})(Oe,Qn),e(Je,X),e(ye,function(e,n){e=Xi(this.elements,e,n,Zi);return e?e===this.elements&&Le(e,function(e){return e instanceof Pe})?this:We(this,e.map(er)):null}),e(xe,function(e){var n=this.left;if(n instanceof Fe){var t=n.expression;if(t.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&t.is_constant())return this}return!n.has_side_effects(e)&&!$e[this.operator.slice(0,-1)]&&(this.write_only=!0,Bn(n).is_constant_expression(e.find_parent(Ce)))?this.right.drop_side_effect_free(e):this}),e(Ke,function(e){if(!e.option("awaits"))return this;var n=this.expression;if(!yr(e,n))return this;var t=(n=n instanceof Re&&"!"==n.operator?n.expression:n).drop_side_effect_free(e);if(t===n)return this;t?yr(e,t)||(t=t.negate(e)):t=Ve(qe,n,{value:0});e=this.clone();return e.expression=t,e}),e(we,function(e,n){var t,i,r,o,s=this.left,a=this.right,f=this.operator;return br(f,a,e)?(t=a.drop_side_effect_free(e,n))?$e[f]&&t.has_side_effects(e)?(i=this,t!==a&&((i=i.clone()).right=t.drop_side_effect_free(e)),"??"==f?i:((a=i.clone()).operator="&&"==f?"||":"&&",a.left=s.negate(e,n),(r=a.right.tail_node())instanceof we&&a.operator==r.operator&&kr(a),r=n?wi:xi,"&&"==f?r(i,a):r(a,i))):(o=s.drop_side_effect_free(e,n))?(t=t.drop_side_effect_free(e))?We(this,[o,t]):o:t:s.drop_side_effect_free(e,n):(o=s.drop_side_effect_free(e,n))===s?this:((i=this.clone()).left=o||Ve(qe,s,{value:0}),i)}),e(Ee,function(e,n){var t=this;if(t.is_expr_pure(e))return t.pure&&Oe.warn("Dropping __PURE__ call [{start}]",t),(i=Xi(t.args,e,n,Zi))&&We(t,i.map(er));var i=t.expression;if(t.is_call_pure(e))return(f=t.args.slice()).unshift(i.expression),(f=Xi(f,e,n,Zi))&&We(t,f.map(er));if(e.option("yields")&&Gn(i)){var r=t.clone(),o=(r.expression=Ve(gn,i),r.expression.body=[],r.transform(e));if(o!==r)return o.drop_side_effect_free(e,n)}var s,a,r=Qi(e,i);if(r&&((t=t.clone()).expression=r,i._squeezed)&&(t.expression._squeezed=!0),t instanceof b){var f,o=i;if((o=o instanceof Ne?o.fixed_value():o)instanceof Ae){if(s=e,(r=o).new=!0,a=Le(r.body,function(e){return!e.has_side_effects(s)})&&Le(r.argnames,function(e){return!e.match_symbol(Ge)})&&!(r.rest&&r.rest.match_symbol(Ge)),r.new=!1,a)return(f=t.args.slice()).unshift(i),(f=Xi(f,e,n,Zi))&&We(t,f.map(er));o.contains_this()||((t=Ve(Ee,t)).expression=t.expression.clone(),t.args=t.args.slice())}}return t.call_only=!0,t}),e(se,function(e,n){for(var t=this,i=[],r=[],o=0,s=t.properties,a=0;a<s.length;a++){var f=s[a];if(f.key instanceof Oe&&i.push(f.key),ci(f)){var c=f.value;if(c.has_side_effects(e)){if(c.contains_this())return t;f instanceof tn?(o++,r.push(f)):r.push(c)}}}var u=t.extends;if(!u||(u=!pt(u=u instanceof Ne?u.fixed_value():u))||i.unshift(t.extends),i=Xi(i,e,n),r=Xi(r,e,n=i?!1:n),!i){if(!u&&!r&&!t.name)return null;i=[]}return u||t.name||!e.has_directive("use strict")?(n=Li(t),u||(n.extends=null),n.properties=[],r?r.length==o?(i.length&&r.unshift(Ve(nn,t,{key:We(t,i),value:null})),n.properties=r):n.properties.push(Ve(nn,t,{static:!0,key:i.length?We(t,i):"c",value:l()})):i.length&&n.properties.push(Ve(p,t,{key:We(t,i),value:Ve(gn,t,{argnames:[],body:[]}).init_vars(n)})),n):(r&&i.push(Ve(Ee,t,{expression:Ve(h,t,{argnames:[],body:[],value:l()}).init_vars(t.parent_scope),args:[]})),We(t,i));function l(){return We(t,r.map(function(e){var n;return e instanceof tn?((n=Ve(h,e.value)).argnames=[],Ve(Ee,e,{expression:n,args:[]})):e}))}}),e(Te,function(e){var n,t,i=this.consequent.drop_side_effect_free(e),r=this.alternative.drop_side_effect_free(e);return i===this.consequent&&r===this.alternative?this:(e.option("ie")&&(n=[],i instanceof gn&&(n.push(i),i=null),r instanceof gn)&&(n.push(r),r=null),i?r?((t=this.clone()).consequent=i,t.alternative=r):t=Ve(we,this,{operator:"&&",left:this.condition,right:i}):t=r?Ve(we,this,{operator:"||",left:this.condition,right:r}):this.condition.drop_side_effect_free(e),n?(t&&n.push(t),0==n.length?null:We(this,n)):t)}),e(T,X),e(pn,function(e,n){var t=this.expression;return t.may_throw_on_access(e)?this:t.drop_side_effect_free(e,n)}),e(gn,function(e){return Ki(this,e)?null:this}),e(yn,X),e(kn,function(e,n){var t=[],e=(this.properties.forEach(function(e){e instanceof Pe?t.push(e):(e.key instanceof Oe&&t.push(e.key),t.push(e.value))}),Xi(t,e,n,function(e,n,t){var i=e.expression;return i.safe_to_spread()?i.drop_side_effect_free(n,t):e}));return e?e!==t||Le(e,function(e){return!(e instanceof Pe)})?We(this,e.map(function(e){return e instanceof Pe?Ve(kn,e,{properties:[e]}):e})):this:null}),e(Sn,X),e(je,function(e,n){var t,i,r,o=Xi(this.expressions,e,n);return o?(t=o[r=o.length-1],e.option("awaits")&&0<r&&t instanceof Ke&&t.expression.is_constant()&&(i=(o=o.slice(0,-1))[--r],t.expression=yr(e,i)?i:i.negate(e),o[r]=t),e.option("conditionals")&&0<r&&(i=o[r-1])instanceof xe&&"="==i.operator&&(r=i.left)instanceof Ne&&(r=gr(e,r.definition(),i.right,t))&&((i=i.clone()).right=r,(o=o.slice(0,-2)).push(i.drop_side_effect_free(e,n))),o===this.expressions?this:We(this,o)):null}),e(Dn,function(e,n){var t,i=this.expression;return i.may_throw_on_access(e)?this:(t=this.property,(i=i.drop_side_effect_free(e,n))?(t=t.drop_side_effect_free(e))?We(this,[i,t]):i:t.drop_side_effect_free(e,n))}),e(Ne,function(e){return this.is_declared(e)&&_t(this,e)?null:this}),e(Mn,function(e,n){var t,i=this;return i.is_expr_pure(e)?0==(t=i.expressions).length?null:We(i,t).drop_side_effect_free(e,n):((n=Qi(e,t=i.tag))&&((i=i.clone()).tag=n,t._squeezed)&&(i.tag._squeezed=!0),i)}),e(Pn,function(e,n){var t,i=this.expression;return at[this.operator]?(this.write_only=!i.has_side_effects(e),this):"typeof"==this.operator&&i instanceof Ne&&_t(i,e)?null:(t=i.drop_side_effect_free(e,n),n&&t&&si(t)?t===i&&"!"==this.operator?this:t.negate(e,n):t)}),n(He,function(e,n){if(n.option("side_effects")){var t=e.body,n=t.drop_side_effect_free(n,!0);if(!n)return Oe.warn("Dropping side-effect-free statement [{start}]",e),Ve(Z,e);if(n!==t)return Ve(He,e,{body:n})}return e}),n(Nn,function(e,n){return n.option("loops")?Ve(_n,e).optimize(n):e}),n(ln,function(t,e){if(!e.option("loops"))return t;var n=ir(e,t.condition);if(!(n instanceof Oe)){if(n&&!nr(t,e.parent(),C))return Ve(_n,t,{body:Ve(ke,t.body,{body:[t.body,Ve(He,t.condition,{body:t.condition})]})}).optimize(e);if(!nr(t,e.parent()))return Ve(ke,t.body,{body:[t.body,Ve(He,t.condition,{body:t.condition})]}).optimize(e)}if(t.body instanceof ke&&!nr(t,e.parent(),C)){for(var i=t.body.body,r=i.length;0<=--r;){var o=i[r];if(o instanceof ze&&!o.alternative&&o.body instanceof M&&e.loopcontrol_target(o.body)===t){if(s(o.condition))break;t.condition=Ve(we,t,{operator:"&&",left:o.condition.negate(e),right:t.condition}),i.splice(r,1)}else if(o instanceof He){if(s(o.body))break;t.condition=We(t,[o.body,t.condition]),i.splice(r,1)}else if(!li(o,!0))break}t.body=Ri(t.body,e.parent())}return t.body instanceof Z?Ve(_n,t).optimize(e):t.body instanceof He?Ve(_n,t,{condition:We(t.condition,[t.body.body,t.condition]),body:Ve(Z,t)}).optimize(e):t;function s(e){var n=!1;return e.walk(new Be(function(e){return!!n||(e instanceof Ne?(Kn(e.definition(),t.enclosed)||(n=!0),!0):void 0)})),n}}),n(_n,function(e,n){if(!n.option("loops"))return e;if(n.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(n)),e.step)&&(e.step=e.step.drop_side_effect_free(n)),e.condition){var t=ir(n,e.condition);if(t)t instanceof Oe||(e.body=Ve(ke,e.body,{body:[Ve(He,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(n.option("dead_code"))return t=[],Vn(e.init)?t.push(e.init):e.init&&t.push(Ve(He,e.init,{body:e.init})),t.push(Ve(He,e.condition,{body:e.condition})),_i(n,e.body,t),Ve(ke,e,{body:t}).optimize(n)}return function n(t,i){var e=s(t.body);if(i.option("dead_code")&&(e instanceof M||e instanceof C&&a(e)||e instanceof hn))return r=[],Vn(t.init)?r.push(t.init):t.init&&r.push(Ve(He,t.init,{body:t.init})),o=a(e)||e instanceof hn,t.condition&&o?r.push(Ve(ze,t,{condition:t.condition,body:e,alternative:null})):t.condition?r.push(Ve(He,t.condition,{body:t.condition})):o&&r.push(e),_i(i,t.body,r),Ve(ke,t,{body:r});if(e instanceof ze){var r,o=s(e.body);if(o instanceof M&&!a(o))return t.condition?t.condition=Ve(we,t.condition,{left:t.condition,operator:"&&",right:e.condition.negate(i)}):t.condition=e.condition.negate(i),r=ti(e.alternative),_i(i,e.body,r),f(r);if((o=s(e.alternative))instanceof M&&!a(o))return t.condition?t.condition=Ve(we,t.condition,{left:t.condition,operator:"&&",right:e.condition}):t.condition=e.condition,r=ti(e.body),_i(i,e.alternative,r),f(r)}return t;function s(e){return e instanceof ke?e.body[0]:e}function a(e){return i.loopcontrol_target(e)!==i.self()}function f(e){return t.body instanceof ke?(t.body=t.body.clone(),t.body.body=e.concat(t.body.body.slice(1)),t.body=t.body.transform(i)):t.body=Ve(ke,t.body,{body:e}).transform(i),n(t,i)}}(e,n)}),n(vn,function(e,n){var t;return n.option("varify")&&ei(e.init)&&((t=e.init.definitions[0].name)instanceof De||t instanceof Y)&&!t.match_symbol(function(e){if(e instanceof On)return!Tr(e=e.definition())||ar(n,e)},!0)&&(e.init=fr(e.init,e.resolve())),e}),n(ze,function(e,c){if(ii(e.alternative)&&(e.alternative=null),c.option("conditionals")){if(c.option("booleans")&&!e.condition.has_side_effects(c)&&rr(c,e.condition),c.option("dead_code")){var n=ir(c,e.condition);if(!n)return Oe.warn("Condition always false [{start}]",e.condition),h=[Ve(He,e.condition,{body:e.condition}).transform(c)],_i(c,e.body,h),e.alternative&&h.push(e.alternative),Ve(ke,e,{body:h}).optimize(c);if(!(n instanceof Oe))return Oe.warn("Condition always true [{start}]",e.condition),h=[Ve(He,e.condition,{body:e.condition}).transform(c),e.body],e.alternative&&_i(c,e.alternative,h),Ve(ke,e,{body:h}).optimize(c)}var n=e.condition.negate(c),t=e.condition.print_to_string().length,i=n.print_to_string().length,r=i<t,o=(e.alternative&&r&&(r=!1,e.condition=n,o=e.body,e.body=e.alternative,e.alternative=ii(o)?null:o),[]),s=[],a=[],f=z(e.body,o,s,a),u=[],l=[],p=[],d=z(e.alternative,u,l,p);if(f instanceof ke||d instanceof ke){var h=[],_=[];if(f&&([].push.apply(h,o),[].push.apply(_,s),f instanceof ke?e.body=f:0==f.length?e.body=Ve(Z,e.body):e.body=Ve(He,e.body,{body:We(e.body,f)}),a.forEach(It)),d&&([].push.apply(h,u),[].push.apply(_,l),d instanceof ke?e.alternative=d:0==d.length?e.alternative=null:e.alternative=Ve(He,e.alternative,{body:We(e.alternative,d)}),p.forEach(It)),0<_.length&&h.push(Ve(ee,e,{definitions:_})),0<h.length)return h.push(e.transform(c)),Ve(ke,e,{body:h}).optimize(c)}else if(f&&d)return h=o.concat(u),(0<s.length||0<l.length)&&h.push(Ve(ee,e,{definitions:s.concat(l)})),0==f.length?h.push(Ve(He,e.condition,{body:0<d.length?Ve(we,e,{operator:"||",left:e.condition,right:We(e.alternative,d)}).transform(c):e.condition.clone()}).optimize(c)):0==d.length?(t===i&&!r&&e.condition instanceof we&&"||"==e.condition.operator&&(r=!0),h.push(Ve(He,e,{body:Ve(we,e,{operator:r?"||":"&&",left:r?n:e.condition,right:We(e.body,f)}).transform(c)}).optimize(c))):h.push(Ve(He,e,{body:Ve(Te,e,{condition:e.condition,consequent:We(e.body,f),alternative:We(e.alternative,d)})}).optimize(c)),a.forEach(It),p.forEach(It),Ve(ke,e,{body:h}).optimize(c);if((e=ii(e.body)?Ve(ze,e,{condition:n,body:e.alternative,alternative:null}):e).alternative instanceof hn&&e.body.TYPE==e.alternative.TYPE){_=e.body.value,o=e.alternative.value;if(!_&&!o)return Ve(ke,e,{body:[Ve(He,e,{body:e.condition}),e.body]}).optimize(c);if(_&&o||!function(){var e=!1,n=0,t=c.self();do{if(t instanceof oe)c.parent(n).bfinally&&(e=!0),n++;else if(t instanceof A)n++;else{if(t instanceof Ce)return e&&Gt(t);t instanceof Hn&&t.bfinally&&(e=!0)}}while(t=c.parent(n++))}())return(u=Ve(e.body.CTOR,e,{value:Ve(Te,e,{condition:e.condition,consequent:_||Ve(Ie,e.body).transform(c),alternative:o||Ve(Ie,e.alternative).transform(c)})}))instanceof Me&&(u.in_bool=e.body.in_bool||e.alternative.in_bool),u}if(Yi((e=e.body instanceof ze&&!e.body.alternative&&!e.alternative?Ve(ze,e,{condition:Ve(we,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null}):e).body)&&e.alternative)return s=e.alternative,e.alternative=null,Ve(ke,e,{body:[e,s]}).optimize(c);if(Yi(e.alternative))return h=e.body,e.body=e.alternative,e.condition=r?n:e.condition.negate(c),e.alternative=null,Ve(ke,e,{body:[e,h]}).optimize(c);if(e.alternative){for(var v=T(e.body),g=S(v),m=T(e.alternative),b=S(m),y=[];0<=g&&0<=b;){var x=v[g],w=m[b];if(x.equals(w))v.splice(g--,1),m.splice(b--,1),y.unshift(Xt(x,w));else{if(!(x instanceof He))break;if(!(w instanceof He))break;var k=x.body.tail_node(),E=w.body.tail_node();if(!k.equals(E))break;g=D(v,x.body,g),b=D(m,w.body,b),y.unshift(Ve(He,k,{body:Xt(k,E)}))}}if(0<y.length)return e.body=0<v.length?Ve(ke,e,{body:v}):Ve(Z,e),e.alternative=0<m.length?Ve(ke,e,{body:m}):null,y.unshift(e),Ve(ke,e,{body:y}).optimize(c)}c.option("typeofs")&&tr(e.condition,e.body,e.alternative)}return e;function T(e){return e instanceof ke?e.body:[e]}function S(e){for(var n=e.length;0<=--n&&li(e[n],!0););return n}function D(e,n,t){return n instanceof je?e[t]=Ve(He,n,{body:We(n,n.expressions.slice(0,-1))}):e.splice(t--,1),t}function z(e,n,t,i){if(null==e)return[];if(e instanceof ke){for(var r=[],o=0;o<e.body.length;o++){var s=e.body[o];if(!(s instanceof Z)){if(s instanceof hn){if(0==o)return;0<r.length&&(s=s.clone(),r.push(s.value||Ve(Ie,s).transform(c)),s.value=We(e,r));var a=e.clone();return a.body=a.body.slice(o+1),a.body.unshift(s),a}if(s instanceof bn)n.push(s);else if(s instanceof He){if(!c.option("sequences")&&0<r.length)return;r.push(s.body)}else{if(!(s instanceof ee))return;if(!c.option("sequences")&&0<r.length)return;s.remove_initializers(c,t),s.definitions.forEach(f)}}}return r}return e instanceof bn?(n.push(e),[]):e instanceof Z?[]:e instanceof He?[e.body]:e instanceof ee?(r=[],e.remove_initializers(c,t),e.definitions.forEach(f),r):void 0;function f(e){e.value&&r.push(Ve(xe,e,{operator:"=",left:e.name.convert_symbol(Ne,function(e){i.push(e)}),right:e.value}))}}}),n(zn,function(i,t){if(t.option("switches")&&t.option("dead_code")){for(var e,n,r,o=[],s=[],a=[],f=0,c=i.body.length;f<c;f++){if((e=i.body[f])instanceof on){var u=o[o.length-1];if(n||y(e.body[0],t)&&(!u||Yi(u))){w(e,u);continue}n=e}else{var l=e.expression,p=Ve(we,i,{operator:"===",left:i.expression,right:l}).evaluate(t,!0);if(!p){l.has_side_effects(t)&&a.push(l),w(e,o[o.length-1]);continue}if(!(p instanceof Oe))for(n&&(p=o.indexOf(n),o.splice(p,1),w(n,o[p-1]),n=null),l.has_side_effects(t)?r=e:n=e=Ve(on,e);++f<c;)w(i.body[f],e)}if(c<=f+1||Yi(e)){var d,u=o[o.length-1],h=e.body;if(Yi(u))switch(u.body.length-h.length){case 1:if(!y(d=u.body[u.body.length-1],t))break;h=h.concat(d);case 0:var _=Ve(ke,u),v=Ve(ke,e,{body:h});_.equals(v)&&(u.body=[])}}a.length&&(e instanceof on?o.push(Ve(Ze,i,{expression:We(i,a),body:[]})):(a.push(e.expression),e.expression=We(i,a)),a=[]),o.push(e)}for(a.length&&!r&&o.push(Ve(Ze,i,{expression:We(i,a),body:[]}));e=o[o.length-1];){if(y(d=e.body[e.body.length-1],t)&&e.body.pop(),e===n){if(!ri(e))break}else{if(e.expression.has_side_effects(t))break;if(n){if(!ri(n))break;if(o[o.length-2]!==n)break;n.body=n.body.concat(e.body),e.body=[]}else if(!ri(e))break}w(e),o.pop()===n&&(n=null)}if(!e)return s.push(Ve(He,i.expression,{body:i.expression})),a.length&&s.push(Ve(He,i,{body:We(i,a)})),Ve(ke,i,{body:s}).optimize(t);if(e===n)for(;(e=o[o.length-2])&&!(e instanceof on)&&ri(e);){if((l=e.expression).has_side_effects(t)){if((u=o[o.length-3])&&!Yi(u))break;n.body.unshift(Ve(He,i,{body:l}))}w(e),o.splice(-2,1)}if(o[0].body=s.concat(o[0].body),i.body=o,t.option("conditionals"))switch(o.length){case 1:if(x(o[0]))return l=o[0].expression,h=o[0].body.slice(),(o[0]!==n&&o[0]!==r?Ve(ze,i,{condition:Ve(we,i,{operator:"===",left:i.expression,right:l}),body:Ve(ke,i,{body:h}),alternative:null}):(l&&h.unshift(Ve(He,l,{body:l})),h.unshift(Ve(He,i.expression,{body:i.expression})),Ve(ke,i,{body:h}))).optimize(t);break;case 2:if(Kn(n,o)&&x(o[1])){var g,m,b=(h=o[0].body.slice()).length&&y(h[h.length-1],t);if(b&&h.pop(),Le(h,x))return g=o[1].body.length&&Ve(ke,o[1]),m=Ve(ze,i,{condition:Ve(we,i,o[0]===n?{operator:"!==",left:i.expression,right:o[1].expression}:{operator:"===",left:i.expression,right:o[0].expression}),body:Ve(ke,o[0],{body:h}),alternative:b&&g||null}),(m=!b&&g?Ve(ke,i,{body:[m,g]}):m).optimize(t)}}}return i;function y(e,n){return e instanceof M&&n.loopcontrol_target(e)===i}function x(e){var n=!1,t=new Be(function(e){if(n||e instanceof Ae||e instanceof He)return!0;y(e,t)&&(n=!0)});return t.push(i),e.walk(t),!n}function w(e,n){n&&!Yi(n)?n.body=n.body.concat(e.body):_i(t,e,s)}}),n(Hn,function(e,n){if(e.body=hi(e.body,n),n.option("dead_code")){if(ri(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof he&&!_t(e)},!0)))return t=[],e.bcatch&&(_i(n,e.bcatch,t),t.forEach(function(e){e instanceof ee&&e.definitions.forEach(function(e){var n=e.name.definition().redefined();n&&(e.name=e.name.clone(),e.name.thedef=n)})})),t.unshift(Ve(ke,e).optimize(n)),e.bfinally&&t.push(Ve(ke,e.bfinally).optimize(n)),Ve(ke,e,{body:t}).optimize(n);if(e.bfinally&&ri(e.bfinally)){var t=Ve(ke,e.bfinally).optimize(n);if(t=e.body.concat(t),!e.bcatch)return Ve(ke,e,{body:t}).optimize(n);e.body=t,e.bfinally=null}}return e}),ae.DEFMETHOD("remove_initializers",or(function(e,n){return Ve(Ie,n).optimize(e)})),xn.DEFMETHOD("remove_initializers",or(X)),ee.DEFMETHOD("remove_initializers",or(X)),sn.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,t){var n,i,r,o=t.name.definition(),s=t.value;return s&&(s instanceof je&&(s=s.clone()),n=Ve(Ne,t.name),i=Ve(xe,t,{operator:"=",left:n,right:s}),e.push(i),(r=function(){return i.right}).assigns=[i],r.direct_access=o.direct_access,r.escaped=o.escaped,n.fixed=r,o.references.forEach(function(e){var n;e.fixed&&(n=e.fixed.assigns)&&n[0]===t&&(1<n.length||e.fixed.to_binary||e.fixed.to_prefix?n[0]=i:(e.fixed=r,o.fixed===e.fixed&&(o.fixed=r)))}),o.references.push(n)),o.assignments++,o.eliminated++,o.single_use=!1,e},[]);return 0==e.length?null:We(this,e)}),n(ae,ur),n(xn,ur),n(Ee,function(p,c){var o=p.expression,e=lr(p,c);if(e)return e;if(c.option("sequences"))if(o instanceof Fe){if((b=pr(o))!==o)return(y=p.clone()).expression=b.expressions.pop(),b.expressions.push(y),b.optimize(c)}else if(!Kt(o.tail_node()))if((b=pr(p))!==p)return b.optimize(c);if(c.option("unused")&&dr(p,c),c.option("unsafe"))if(fi(o))switch(o.name){case"Array":if(1==p.args.length){if((a=p.args[0])instanceof qe)try{var n=a.value;if(6<n)break;for(var t=Array(n),i=0;i<n;i++)t[i]=Ve(pe,p);return Ve(ye,p,{elements:t})}catch(e){Oe.warn("Invalid array length: {length} [{start}]",{length:n,start:p.start});break}if(!a.is_boolean(c)&&!a.is_string(c))break}return Ve(ye,p,{elements:p.args});case"Object":if(0==p.args.length)return Ve(kn,p,{properties:[]});break;case"String":if(0==p.args.length)return Ve(G,p,{value:""});if(1==p.args.length)return Ve(we,p,{operator:"+",left:Ve(G,p,{value:""}),right:p.args[0]}).optimize(c);break;case"Number":if(0==p.args.length)return Ve(qe,p,{value:0});if(1==p.args.length)return Ve(Re,p,{operator:"+",expression:Ve(we,p,{operator:"+",left:Ve(G,p,{value:""}),right:p.args[0]})}).optimize(c);break;case"Boolean":if(0==p.args.length)return Ve(le,p).optimize(c);if(1==p.args.length)return Ve(Re,p,{operator:"!",expression:Ve(Re,p,{operator:"!",expression:p.args[0]})}).optimize(c);break;case"RegExp":var H=[];if(Le(p.args,function(e){var n=e.evaluate(c);return H.unshift(n),e!==n}))try{return ki(c,p,Ve(W,p,{value:RegExp.apply(RegExp,H)}))}catch(e){Oe.warn("Error converting {this} [{start}]",p)}}else if(o instanceof pn)switch(o.property){case"toString":var r=o.expression;if(0!=p.args.length||r.may_throw_on_access(c)||r instanceof $)break;return Ve(we,p,{operator:"+",left:Ve(G,p,{value:""}),right:r}).optimize(c);case"join":if(o.expression instanceof ye&&p.args.length<2)e:{var s=p.args[0];if(0==o.expression.elements.length&&!(s instanceof Pe))return s?We(p,[s,Ve(G,p,{value:""})]).optimize(c):Ve(G,p,{value:""});if(!(s&&(s=s.evaluate(c))instanceof Oe)){for(var a,t=[],f=[],i=0;i<o.expression.elements.length;i++){var u=o.expression.elements[i];if((E=u.evaluate(c))!==u)f.push(E);else{if(u instanceof Pe)break e;0<f.length&&(t.push(Ve(G,p,{value:f.join(s)})),f.length=0),t.push(u)}}return(0<f.length&&t.push(Ve(G,p,{value:f.join(s)})),1==t.length)?t[0].is_string(c)?t[0]:Ve(we,t[0],{operator:"+",left:Ve(G,p,{value:""}),right:t[0]}):""==s?(a=t[0].is_string(c)||t[1].is_string(c)?t.shift():Ve(G,p,{value:""}),t.reduce(function(e,n){return Ve(we,n,{operator:"+",left:e,right:n})},a).optimize(c)):((M=p.clone()).expression=M.expression.clone(),M.expression.expression=M.expression.expression.clone(),M.expression.expression.elements=t,ki(c,p,M))}}break;case"charAt":if(p.args.length<2)return(M=Ve(we,p,{operator:"||",left:Ve(Dn,p,{expression:o.expression,property:p.args.length?Ve(we,p.args[0],{operator:"|",left:Ve(qe,p,{value:0}),right:p.args[0]}):Ve(qe,p,{value:0})}).optimize(c),right:Ve(G,p,{value:""})})).is_string=V,M.optimize(c);break;case"apply":if(2==p.args.length&&p.args[1]instanceof ye)return(q=p.args[1].elements.slice()).unshift(p.args[0]),Ve(Ee,p,{expression:Ve(pn,o,{expression:o.expression,property:"call"}),args:q}).optimize(c);break;case"call":r=o.expression;if((r=r instanceof Ne?r.fixed_value():r)instanceof Ae&&!r.contains_this())return(p.args.length?We(p,[p.args[0],Ve(Ee,p,{expression:o.expression,args:p.args.slice(1)})]):Ve(Ee,p,{expression:o.expression,args:[]})).optimize(c)}else if(c.option("side_effects")&&o instanceof Ee&&1==o.args.length&&fi(o.expression)&&"Object"==o.expression.name)return(y=p.clone()).expression=Qt(p,o,o.args[0]),y.optimize(c);if(c.option("unsafe_Function")&&fi(o)&&"Function"==o.name){if(0==p.args.length)return Ve(gn,p,{argnames:[],body:[]}).init_vars(o.scope);if(Le(p.args,function(e){return e instanceof G}))try{var l,d="n(function("+p.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+p.args[p.args.length-1].value+"})",h=Zn(d),_={ie:c.option("ie")},v=(h.figure_out_scope(_),new ft(c.options)),d=((h=h.transform(v)).figure_out_scope(_),h.compute_char_frequency(_),h.mangle_names(_),h.walk(new Be(function(e){return!!l||(e instanceof Ae?(l=e,!0):void 0)})),rt());return ke.prototype._codegen.call(l,d),p.args=[Ve(G,p,{value:l.argnames.map(function(e){return e.print_to_string()}).join()}),Ve(G,p.args[p.args.length-1],{value:d.get().replace(/^\{|\}$/g,"")})],p}catch(e){if(!(e instanceof Xn))throw e;Oe.warn("Error parsing code passed to new Function [{start}]",p.args[p.args.length-1]),Oe.warn(e.toString())}}var g=o instanceof Ne?o.fixed_value():o,e=c.parent(),m=c.self(),b=g instanceof Ae&&(!Wn(g)||c.option("awaits")&&e instanceof Ke)&&(!Gn(g)||c.option("yields")&&m instanceof In&&m.nested),y=b&&g.first_statement(),x=0,w=!1,k=!Le(p.args,function(e){return!(e instanceof Pe)}),v=b&&Le(g.argnames,function(e,n){if(1==x&&p.args[n]instanceof Pe&&(x=2),e instanceof Se){if(vi(1==(x=x||1)&&p.args[n])||(x=2),Mr(g,e.value))return!1;e=e.name}return!(e instanceof De&&(w=!0,Mr(g,e)))})&&!(g.rest instanceof De&&Mr(g,g.rest)),_=v&&c.option("inline")&&!p.is_expr_pure(c)&&(o===g||vr(g,c));if(_&&y instanceof Me){var E=y.value;if(o===g&&!g.name&&(!E||E.is_constant_expression())&&_r(g,hr(c)))return We(p,R(E)).optimize(c)}if(b&&!g.contains_this()){var T,S=!1;if(_&&!g.uses_arguments&&!g.pinned()&&!(g.name&&g instanceof yn)&&(o===g||!Er(c,T=o.definition(),g)&&g.is_constant_expression(Vt(c)))&&(E=function(e){var n=g.body.length;if(n<2&&(e=U(e)))return e;if(c.option("inline")<3)return!1;e=null;for(var t=0;t<n;t++){var i=g.body[t];if(i instanceof ee){if(S){if(e){if(!(e instanceof He))return!1;ui(i)||(e=null)}}else if(!ui(i)){if(e&&!(e instanceof He))return!1;S=!(e=null)}}else if(!(i instanceof ne||i instanceof an||i instanceof Z)){if(e)return!1;e=i}}return U(e)}(y))){var D,P,z,A,O=o===g||T.single_use&&T.references.length-T.replaced==1;if(function(){if(!(x||w||k||S||g.rest)&&!(c.option("inline")<2&&g.argnames.length)&&g.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof Ye})){var i,n=c.find_parent(Ce),r=!1,o=hr(c,n),s=[],a=!1,f=new Be(function(e,n){var t;return!!r||(e instanceof we&&$e[e.operator]||e instanceof Te?void(s=null):e instanceof Ce||o&&e instanceof An&&o[e.name]?r=!0:e instanceof Ne?(t=e.definition(),g.variables.get(e.name)!==t?void(s=null):t.init instanceof bn||ot(e,f.parent())?r=!0:(t=B(t),i<t||(i=t),s?void(a?s=null:s.push(g.argnames[t])):void 0)):a?void 0:e instanceof xe&&e.left instanceof Fe?(e.left.expression.walk(f),e.left instanceof Dn&&e.left.property.walk(f),e.right.walk(f),a=!0):e.has_side_effects(c)?(n(),a=!0):void 0)});if(E.walk(f),!r){var e=p.args.length;if(s&&g.argnames.length>=e){for(e=g.argnames.length;e-- >i&&g.argnames[e]===s.pop(););e++}return e<=i||Le(p.args.slice(i,e),a&&!s?function(e){return e.is_constant_expression(n)}:function(e){return!e.has_side_effects(c)})}}}()){var q=p.args.slice(),F=[],h=E.clone(!0).transform(new Un(function(e){if(e instanceof Ne){var n=e.definition();if(g.variables.get(e.name)!==n)return F.push(e),e;var n=B(n),t=q[n];if(!t)return Ve(Ie,p);q[n]=null;n=this.parent();return n?Qt(n,e,t):t}})),d=g.inlined,Y=(o!==g&&(g.inlined=!0),[]),M=(q.forEach(function(e){e&&((e=e.clone(!0)).walk(new Be(function(e){e instanceof Ne&&F.push(e)})),Y.push(e))},[]),Y.push(h),We(p,Y).optimize(c));if(g.inlined=d,M=Qt(e,m,M),O||xi(M,p)===M)return F.forEach(function(e){e.scope=o===g?g.parent_scope:o.scope,e.reference();e=e.definition();O&&e.replaced++,e.single_use=!1}),M;M.has_side_effects(c)||(p.drop_side_effect_free=function(e,n){var t=this.args.slice();return t.unshift(this.expression),We(this,t).drop_side_effect_free(e,n)})}if(O&&function(){var e,n=new $n,t=0;A=m;do{if(A.variables&&A.variables.each(function(e){n.set(e.name,!0)}),e=A,(A=c.parent(t++))instanceof nn){if(!A.static)return}else A instanceof dn?z=[]:A instanceof _n?A.init!==e&&(z=[]):A instanceof vn&&A.init!==e&&A.object!==e&&(z=[])}while(!(A instanceof Ce));if(!(P=A.body.indexOf(e)+1))return;if(!_r(g,hr(c,A)))return;var i=(o!==g||g.parent_scope.resolve()===A)&&!A.pinned();A instanceof jn&&(c.toplevel.vars?n.set("arguments",!0):i=!1);D=new $n;var r=c.option("inline");return function(n,t){var i=!1;return g.each_argname(function(e){if(!i&&!e.unused){if(!t||L(n,e.name))return i=!0;D.set(e.name,!0),z&&z.push(e.definition())}}),!i}(n,2<=r&&i)&&!(!function(n,e){for(var t=0;t<g.body.length;t++){var i=g.body[t];if(i instanceof bn){var r=i.name;if(!e)return;if(D.has(r.name))return;if(L(n,r.name))return;if(!Le(i.enclosed,function(e){return e.scope===A||e.scope===i||!n.has(e.name)}))return;z&&z.push(r.definition())}else if(i instanceof ee){if(!e)return;for(var o=i.definitions.length;0<=--o;){r=i.definitions[o].name;if(L(n,r.name))return;z&&z.push(r.definition())}}}return 1}(n,3<=r&&i)||z&&0!=z.length&&Ar(g,z))}())return g._squeezed=!0,o!==g&&(g.parent_scope=o.scope),M=We(p,function(){var e=[],n=[];(1<x||w||k||g.rest?function(i,r){function n(e,n){if(n.unused)return N(n);var t=n.definition(),e=(t.assignments++,t.references.push(e),Ve(Fn,n));t.orig.push(e),t.eliminated++,j(i,r,e)}r.push(Ve(xe,p,{operator:"=",left:Ve(fn,p,{elements:g.argnames.map(function(e){return e.unused?Ve(pe,e):e.convert_symbol(Ne,n)}),rest:g.rest&&g.rest.convert_symbol(Ne,n)}),right:Ve(ye,p,{elements:p.args.slice()})}))}:function(e,n){for(var t=g.argnames.length,i=p.args.length;--i>=t;)n.push(p.args[i]);var r,o=[];for(i=t;0<=--i;){var s,a,f=g.argnames[i],c=(r=f instanceof Se?(o.push(f),f.name):f,p.args[i]);r.unused||A.var_names().has(r.name)?c&&n.push(c):(s=Ve(Fn,r),(a=r.definition()).orig.push(s),a.eliminated++,void 0!==r.unused?(j(e,n,s),c&&n.push(c)):(!c&&f===r&&(z||"arguments"==r.name&&!Ln(g)&&Ln(A))&&(c=Ve(Ie,p)),j(e,n,s,c)))}for(e.reverse(),n.reverse(),i=o.length;0<=--i;){var u,l=o[i];void 0!==l.name.unused?n.push(l.value):(u=Ve(Ne,l.name),l.name.definition().references.push(u),n.push(Ve(xe,l,{operator:"=",left:u,right:l.value})))}})(e,n);var t=function(i,e){var t=[P,0],o=[],r=[],s=[],a=[],f=[];return g.body.filter(z?function(e){var n,t;return!(e instanceof bn&&((t=(n=Ve(Fn,Fr(e.name))).definition()).fixed=!1,t.orig.push(n),t.eliminated++,j(i,r,n,Gi(e,!0)),1))}:function(e){var n;return!(e instanceof bn&&(n=e.name.definition(),A.functions.set(n.name,n),A.variables.set(n.name,n),A.enclosed.push(n),A.var_names().set(n.name,!0),t.push(e),1))}).forEach(function(e){if(e instanceof ee)for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n],i=Fr(t.name),r=t.value;r&&0<f.length&&(f.push(r),r=We(t,f),f=[]),j(o,s,i,r),!z||D.has(i.name)||1==i.definition().orig.length&&g.functions.has(i.name)||a.push(jr(c,i))}else e instanceof He&&f.push(e.body)}),[].push.apply(i,o),[].push.apply(e,a),[].push.apply(e,r),[].push.apply(e,s),t}(e,n);n.push(E),e.length&&t.push(Ve(ee,g,{definitions:e}));return[].splice.apply(A.body,t),g.enclosed.forEach(function(e){A.var_names().has(e.name)||(A.enclosed.push(e),A.var_names().set(e.name,!0))}),n}()).optimize(c),Qt(e,m,M)}if(c.option("side_effects")&&v&&Le(g.body,ii)&&(g===o?Ki(g,c):!x&&!w&&!g.rest)&&(!Ln(g)||!g.value)&&_r(g,hr(c)))return We(p,R()).optimize(c)}if(c.option("drop_console")&&o instanceof Fe){for(var C=o.expression;C.expression;)C=C.expression;if(fi(C)&&"console"==C.name)return Ve(Ie,p).optimize(c)}return c.option("negate_iife")&&e instanceof He&&si(m)?p.negate(c,!0):Di(c,p);function N(e){return Ve(Dn,e,{expression:Ve(ye,e,{elements:[]}),property:Ve(qe,e,{value:0})})}function R(e){var s,t,n=p.args.slice(),i=1<x||w||g.rest;return(i||k)&&(n=[Ve(ye,p,{elements:n})]),i?(s=new Un(function(i,e){var t,r,o;return i instanceof Se?Ve(Se,i,{name:i.name.transform(s)||N(i),value:i.value}):i instanceof fn?(t=[],i.elements.forEach(function(e,n){(e=e.transform(s))&&(t[n]=e)}),Bi(i,t),Ve(fn,i,{elements:t})):i instanceof un?(r=[],o=[],i.properties.forEach(function(e){var n=e.key,t=e.value.transform(s);t?(o.length&&(n instanceof Oe||(n=Jt(n,e)),o.push(n),n=We(i,o),o=[]),r.push(Ve(cn,e,{key:n,value:t}))):n instanceof Oe&&o.push(n)}),o.length&&r.push(Ve(cn,i,{key:We(i,o),value:N(i)})),Ve(un,i,{properties:r})):i instanceof Ye?null:void 0}),t=[],g.argnames.forEach(function(e,n){(e=e.transform(s))&&(t[n]=e)}),(i=g.rest&&g.rest.transform(s))&&(t.length=g.argnames.length),Bi(g,t),n[0]=Ve(xe,p,{operator:"=",left:Ve(fn,g,{elements:t,rest:i}),right:n[0]})):g.argnames.forEach(function(e){e instanceof Se&&n.push(e.value)}),n.push(e||Ve(Ie,p)),n}function I(){return p.call_only?Ve(qe,p,{value:0}):Ve(Ie,p)}function U(e){return e?e instanceof Me?e.value||I():e instanceof He?p.call_only?e.body:Ve(Re,e,{operator:"void",expression:e.body}):void 0:I()}function B(e){for(var n=g.argnames.length;0<=--n;)if(g.argnames[n].definition()===e)return n}function L(e,n){return e.has(n)||Yr[n]||A.var_names().has(n)}function j(e,n,t,i){var r=t.definition();A.var_names().has(t.name)||(A.var_names().set(t.name,!0),e.push(Ve(Ue,t,{name:t,value:null}))),A.variables.set(t.name,r),A.enclosed.push(r),i&&(e=Ve(Ne,t),r.assignments++,r.references.push(e),n.push(Ve(xe,p,{operator:"=",left:e,right:i})))}}),n(b,function(e,n){if(n.option("unsafe")){var t=e.expression;if(fi(t))switch(t.name){case"Array":case"Error":case"Function":case"Object":case"RegExp":return Ve(Ee,e).transform(n)}}if(n.option("sequences")){t=pr(e);if(t!==e)return t.optimize(n)}return n.option("unused")&&dr(e,n),e}),n(je,function(e,t){for(var i,r,o,n=t.option("side_effects")?(i=[],r=I(t),o=e.expressions.length-1,e.expressions.forEach(function(e,n){(e=n<o?e.drop_side_effect_free(t,r):e)&&(Zt(i,e),r=!1)}),i):e.expressions,s=n.length-1,a=1;a<s;a++){var f=n[a-1],c=p(f);if(c){var u=n[a];if(t.option("conditionals")){var l=gr(t,c,f.right,u);if(l){f.right=l,n.splice(a--,1),s--;continue}}t.option("dead_code")&&p(u)===c&&u.right.is_constant_expression(c.scope.resolve())&&(n[--a]=f.right)}}if(t.option("side_effects")){for(;0<s&&vi(n[s],t);)s--;s<n.length-1&&(n[s]=Ve(Re,e,{operator:"void",expression:n[s]}),n.length=s+1)}return 0==s?(e=Qt(t.parent(),t.self(),n[0]))instanceof je?e:e.optimize(t):(e.expressions=n,e);function p(e){return e instanceof xe&&"="==e.operator&&e.left instanceof Ne&&e.left.definition()}}),n(Yn,function(e,n){if(n.option("sequences")){var t=pr(e);if(t!==e)return t.optimize(n)}return Di(n,e)}),so=K("+ -"),ao=K("* / %"),n(Re,function(e,n){var t=e.operator,i=e.expression;if(n.option("sequences")&&function(){switch(t){case"delete":return!s(i.tail_node());case"typeof":return!fi(i.tail_node());default:return 1}}()){var r=pr(e);if(r!==e)return r.optimize(n)}switch(t){case"+":if(!n.option("evaluate"))break;if(!i.is_number(n,!0))break;var o=n.parent();if(o instanceof Re&&"delete"==o.operator)break;return i;case"-":if((i=i instanceof g?i.transform(n):i)instanceof qe||i instanceof g)return e;break;case"!":if(n.option("booleans")){if(i.is_truthy())return We(e,[i,Ve(le,e)]).optimize(n);if(n.in_boolean_context()){if(i instanceof Re&&"!"==i.operator)return i.expression;i instanceof we&&(e=((o=I(n))?wi:xi)(e,i.negate(n,o)))}}break;case"delete":if(!n.option("evaluate"))break;if(s(i))break;return We(e,[i,Ve(R,e)]).optimize(n);case"typeof":if(!n.option("booleans"))break;if(!n.in_boolean_context())break;Oe.warn("Boolean expression always true [{start}]",e);o=[Ve(R,e)];return i instanceof Ne&&_t(i,n)||o.unshift(i),We(e,o).optimize(n);case"void":if(n.option("side_effects"))return(i=i.drop_side_effect_free(n))?(e.expression=i,e):Ve(Ie,e).optimize(n)}return n.option("evaluate")&&i instanceof we&&so[t]&&ao[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(n))?Ve(we,e,{operator:i.operator,left:Ve(Re,i.left,{operator:t,expression:i.left}),right:i.right}):Di(n,e);function s(e){return e instanceof g||e instanceof m||e instanceof y||e instanceof Fe||e instanceof Ne||e instanceof Ie}}),n(Ke,function(e,n){if(n.option("awaits")){if(n.option("sequences")){var t=pr(e);if(t!==e)return t.optimize(n)}if(n.option("side_effects")){var i=e.expression;if(i instanceof Ke)return i.optimize(n);if(i instanceof Re&&i.expression instanceof Ke)return i.optimize(n);for(var r,o=0,s=e;r=n.parent(o++);s=r){if(Ln(r)){if(r.value===s)return i.optimize(n)}else if(r instanceof Me){var a=!0;do{if(s=r,(r=n.parent(o++))instanceof Hn&&(r.bfinally||r.bcatch)!==s){a=!1;break}}while(r&&!(r instanceof Ce));if(a)return i.optimize(n)}else if(r instanceof je&&r.tail_node()===s)continue;break}}}return e}),n(In,function(e,n){if(n.option("yields")){if(n.option("sequences")){var t=pr(e);if(t!==e)return t.optimize(n)}t=e.expression;if(e.nested&&"Call"==t.TYPE){t=t.clone().optimize(n);if("Call"!=t.TYPE)return t}}return e}),we.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof Fe)return this.left.expression instanceof je?(n=this.left.expression.expressions.slice(),(t=this.clone()).left=t.left.clone(),t.left.expression=n.pop(),n.push(t),We(this,n)):this;if(this.left instanceof je)return n=this.left.expressions.slice(),(t=this.clone()).left=n.pop(),n.push(t),We(this,n);if(this.right instanceof je){if(this.left.has_side_effects(e))return this;for(var n,t,i="="==this.operator&&this.left instanceof Ne,r=(n=this.right.expressions).length-1,o=0;o<r&&(i||!n[o].has_side_effects(e));o++);if(o==r)return n=n.slice(),(t=this.clone()).right=n.pop(),n.push(t),We(this,n);if(0<o)return(t=this.clone()).right=We(this.right,n.slice(o)),(n=n.slice(0,o)).push(t),We(this,n)}return this}),fo=K("indexOf lastIndexOf"),co=K("== === != !== * & | ^"),n(we,function(t,r){if(!co[t.operator]||!t.right.is_constant()||t.left.is_constant()||t.left instanceof we&&et[t.left.operator]>=et[t.operator]||E(),r.option("sequences")){var e=t.lift_sequences(r);if(e!==t)return e.optimize(r)}if(r.option("assignments")&&$e[t.operator]){var n,i=xr(t.left,r),e=t.right;if(i instanceof Ne&&e instanceof xe&&"="==e.operator&&i.equals(e.left))return i=i.clone(),n=Ve(xe,t,{operator:"=",left:i,right:Ve(we,t,{operator:t.operator,left:t.left,right:e.right})}),i.fixed&&(i.fixed=function(){return n.right},i.fixed.assigns=[n]),(e=i.definition()).references.push(i),e.replaced++,n.optimize(r)}if(r.option("comparisons"))switch(t.operator){case"===":case"!==":if(vi(t.left,r)&&t.right.is_defined(r))return Oe.warn("Expression always defined [{start}]",t),We(t,[t.right,Ve("==="==t.operator?le:R,t)]).optimize(r);var o=!0;(t.left.is_string(r)&&t.right.is_string(r)||t.left.is_number(r)&&t.right.is_number(r)||t.left.is_boolean(r)&&t.right.is_boolean(r)||wr(r,t.left)&&t.left.equals(t.right))&&(t.operator=t.operator.slice(0,2));case"==":case"!=":if(!o&&vi(t.left,r))t.left=Ve(D,t.left);else if(r.option("typeofs")&&t.left instanceof G&&"undefined"==t.left.value&&t.right instanceof Re&&"typeof"==t.right.operator)((s=t.right.expression)instanceof Ne?!s.is_declared(r):s instanceof Fe&&r.option("ie"))||(t.right=s,t.left=Ve(Ie,t.left).optimize(r),2==t.operator.length&&(t.operator+="="));else if(t.left instanceof Ne&&t.right instanceof Ne&&t.left.definition()===t.right.definition()&&mr(t.left))return Ve("="==t.operator[0]?R:le,t).optimize(r);break;case"&&":case"||":var s,o=t.left;if(o instanceof we&&(o.operator==("&&"==t.operator?"!==":"===")&&t.right instanceof we&&o.operator==t.right.operator&&(vi(o.left,r)&&t.right.left instanceof D||o.left instanceof D&&vi(t.right.left,r)))){if((s=(s=o.right)instanceof xe&&"="==s.operator?s.left:s).has_side_effects(r))break;if(s.equals(t.right.right))return o.operator=o.operator.slice(0,-1),o.left=Ve(D,t),o}}var a,f,c=!1,u=r.parent();if(r.option("booleans")){i=xr(t.left,r);if($e[t.operator]&&!i.has_side_effects(r)){if(i.equals(t.right))return Qt(u,r.self(),t.left).optimize(r);rr(r,i)}c=r.in_boolean_context()}if(c)switch(t.operator){case"+":var l=t.left.evaluate(r,!0);if(l&&"string"==typeof l||(l=t.right.evaluate(r,!0))&&"string"==typeof l){Oe.warn("+ in boolean context always true [{start}]",t);l=[];if(t.left.evaluate(r)instanceof Oe&&l.push(t.left),t.right.evaluate(r)instanceof Oe&&l.push(t.right),l.length<2)return l.push(Ve(R,t)),We(t,l).optimize(r);t.truthy=!0}break;case"==":if(t.left instanceof G&&""==t.left.value&&t.right.is_string(r))return Ve(Re,t,{operator:"!",expression:t.right}).optimize(r);break;case"!=":if(t.left instanceof G&&""==t.left.value&&t.right.is_string(r))return t.right.optimize(r)}if(r.option("comparisons")&&t.is_boolean(r)){if("Binary"!=u.TYPE){e=Ve(Re,t,{operator:"!",expression:t.negate(r)});if(ki(r,t,e)===e)return e}switch(t.operator){case">":E("<");break;case">=":E("<=")}}if(r.option("conditionals")&&$e[t.operator]&&(t.left instanceof we&&t.operator==t.left.operator&&(a=(e=Ve(we,t,{operator:t.operator,left:t.left.right,right:t.right})).transform(r),e!==a)&&(t.left=t.left.left,t.right=a),(p=t.right.tail_node())instanceof we)&&t.operator==p.operator&&kr(t,r),r.option("strings")&&"+"==t.operator){if(t.right instanceof G&&""==t.right.value&&t.left.is_string(r))return t.left.optimize(r);if(t.left instanceof G&&""==t.left.value&&t.right.is_string(r))return t.right.optimize(r);if(t.left instanceof we&&"+"==t.left.operator&&t.left.left instanceof G&&""==t.left.left.value&&t.right.is_string(r)&&(t.left.right.is_constant()||!t.right.has_side_effects(r)))return t.left=t.left.right,t.optimize(r);(p=t.right.tail_node())instanceof we&&t.operator==p.operator&&(t.left.is_string(r)&&p.is_string(r)||p.left.is_string(r)&&(t.left.is_constant()||!p.right.has_side_effects(r)))&&kr(t,r)}if(r.option("evaluate")){var p,d=!0;switch(t.operator){case"&&":if(!(v=ir(r,t.left)))return Oe.warn("Condition left of && always false [{start}]",t),Qt(u,r.self(),t.left).optimize(r);if(!(v instanceof Oe))return Oe.warn("Condition left of && always true [{start}]",t),We(t,[t.left,t.right]).optimize(r);if(t.right.evaluate(r,!0)){if((c||"&&"==u.operator&&u.left===r.self())&&!(t.right.evaluate(r)instanceof Oe))return Oe.warn("Dropping side-effect-free && [{start}]",t),t.left.optimize(r)}else{if(c&&!(t.right.evaluate(r)instanceof Oe))return Oe.warn("Boolean && always false [{start}]",t),We(t,[t.left,Ve(le,t)]).optimize(r);t.falsy=!0}if("||"==t.left.operator)if(!(_=ir(r,t.left.right)))return Ve(Te,t,{condition:t.left.left,consequent:t.right,alternative:t.left.right}).optimize(r);break;case"??":var h=!0;case"||":var _,v=ir(r,t.left,h);if(h?null==v:!v)return Oe.warn("Condition left of {operator} always {value} [{start}]",{operator:t.operator,value:h?"nullish":"false",start:t.start}),We(t,[t.left,t.right]).optimize(r);if(!(v instanceof Oe))return Oe.warn("Condition left of {operator} always {value} [{start}]",{operator:t.operator,value:h?"defined":"true",start:t.start}),Qt(u,r.self(),t.left).optimize(r);if(h||!(v=t.right.evaluate(r,!0))||v instanceof Oe){if((c||"||"==u.operator&&u.left===r.self())&&!t.right.evaluate(r))return Oe.warn("Dropping side-effect-free {operator} [{start}]",t),t.left.optimize(r)}else{if(c&&!(t.right.evaluate(r)instanceof Oe))return Oe.warn("Boolean || always true [{start}]",t),We(t,[t.left,Ve(R,t)]).optimize(r);t.truthy=!0}if(!h&&"&&"==t.left.operator)if((_=ir(r,t.left.right))&&!(_ instanceof Oe))return Ve(Te,t,{condition:t.left.left,consequent:t.left.right,alternative:t.right}).optimize(r);break;case"+":if((t=(t=t.left instanceof T&&t.right instanceof we&&"+"==t.right.operator&&t.right.left instanceof T&&t.right.is_string(r)?Ve(we,t,{operator:"+",left:Ve(G,t.left,{value:""+t.left.value+t.right.left.value,start:t.left.start,end:t.right.left.end}),right:t.right.right}):t).right instanceof T&&t.left instanceof we&&"+"==t.left.operator&&t.left.right instanceof T&&t.left.is_string(r)?Ve(we,t,{operator:"+",left:t.left.left,right:Ve(G,t.right,{value:""+t.left.right.value+t.right.value,start:t.left.right.start,end:t.right.end})}):t).right instanceof Re&&"-"==t.right.operator&&t.left.is_number(r)){t=Ve(we,t,{operator:"-",left:t.left,right:t.right.expression});break}if(t.left instanceof Re&&"-"==t.left.operator&&k()&&t.right.is_number(r)){t=Ve(we,t,{operator:"-",left:t.right,right:t.left.expression});break}if(r.option("unsafe_math")&&t.left instanceof we&&et[t.left.operator]==et[t.operator]&&t.right.is_constant()&&(t.right.is_boolean(r)||t.right.is_number(r))&&t.left.is_number(r)&&!t.left.right.is_constant()&&(t.left.left.is_boolean(r)||t.left.left.is_number(r))){t=Ve(we,t,{operator:t.left.operator,left:Ve(we,t,{operator:t.operator,left:t.right,right:t.left.left}),right:t.left.right});break}case"-":if(t.right instanceof Re&&"-"==t.right.operator&&t.left.is_number(r)&&t.right.expression.is_number(r)){t=Ve(we,t,{operator:"+",left:t.left,right:t.right.expression});break}case"*":case"/":d=r.option("unsafe_math"),"+"!=t.operator&&["left","right"].forEach(function(e){var n=t[e];n instanceof Re&&"+"==n.operator&&((n=n.expression).is_boolean(r)||n.is_number(r)||n.is_string(r))&&(t[e]=n)});case"&":case"|":case"^":"-"==t.operator||"/"==t.operator||!t.left.is_boolean(r)&&!t.left.is_number(r)||!t.right.is_boolean(r)&&!t.right.is_number(r)||!k()||t.left instanceof we&&t.left.operator!=t.operator&&et[t.left.operator]>=et[t.operator]||(t=ki(r,t,Ve(we,t,{operator:t.operator,left:t.right,right:t.left}),t.right instanceof T&&!(t.left instanceof T))),d&&t.is_number(r)&&(!(t.right instanceof we&&"%"!=t.right.operator&&et[t.right.operator]==et[t.operator]&&t.right.is_number(r)&&("+"!=t.operator||t.right.left.is_boolean(r)||t.right.left.is_number(r)))||"-"==t.operator&&t.left.is_negative_zero()||!t.right.left.is_constant_expression()&&t.right.right.has_side_effects(r)||(v=t.right.right,f=!1,v.walk(new Be(function(e){if(f)return!0;if(e instanceof xe){if(e.left instanceof Fe)return f=!0}else if(e instanceof Pn&&at[e.operator]&&e.expression instanceof Fe)return f=!0})),f)||("+"!=(t=Ve(we,t,{operator:y(t.operator,t.right.operator),left:Ve(we,t.left,{operator:t.operator,left:t.left,right:t.right.left,start:t.left.start,end:t.right.left.end}),right:t.right.right})).operator||t.right.is_boolean(r)||t.right.is_number(r)||(t.right=Ve(Re,t.right,{operator:"+",expression:t.right}))),t.right instanceof T)&&t.left instanceof we&&"%"!=t.left.operator&&et[t.left.operator]==et[t.operator]&&t.left.is_number(r)&&(t.left.left instanceof T?(i=x(t.operator,t.left.left,t.right,{start:t.left.left.start,end:t.right.end}),t=x(t.left.operator,Di(r,i),t.left.right,t)):t.left.right instanceof T&&(h=y(t.left.operator,t.operator),!(p=Di(r,x(h,t.left.right,t.right,t.left))).is_constant()||"-"==t.left.operator&&0!=t.right.value&&0==+p.value&&t.left.left.is_negative_zero()||(t=x(t.left.operator,t.left.left,p,t))));break;case"instanceof":if(lt(t.right))return We(t,[t,Ve(le,t)]).optimize(r)}if(!(u instanceof Re&&"delete"==u.operator)){if(t.left instanceof qe&&!t.right.is_constant())switch(t.operator){case"+":if(0==t.left.value){if(t.right.is_boolean(r))return Ve(Re,t,{operator:"+",expression:t.right}).optimize(r);if(t.right.is_number(r)&&!t.right.is_negative_zero())return t.right}break;case"*":if(1==t.left.value)return Ve(Re,t,{operator:"+",expression:t.right}).optimize(r)}if(t.right instanceof qe&&!t.left.is_constant())switch(t.operator){case"+":if(0==t.right.value){if(t.left.is_boolean(r))return Ve(Re,t,{operator:"+",expression:t.left}).optimize(r);if(t.left.is_number(r)&&!t.left.is_negative_zero())return t.left}break;case"-":if(0==t.right.value)return Ve(Re,t,{operator:"+",expression:t.left}).optimize(r);break;case"/":if(1==t.right.value)return Ve(Re,t,{operator:"+",expression:t.left}).optimize(r)}}}if(r.option("typeofs"))switch(t.operator){case"&&":tr(t.left,t.right,null);break;case"||":tr(t.left,null,t.right)}if(r.option("unsafe")){var g=w(t.right);if(c&&g&&("=="==t.operator||"!="==t.operator)&&t.left instanceof qe&&0==t.left.value)return("=="==t.operator?Ve(Re,t,{operator:"!",expression:t.right}):t.right).optimize(r);var m=w(t.left);if(r.option("comparisons")&&function(){switch(t.operator){case"<=":return g&&t.left instanceof qe&&0==t.left.value;case"<":if(m&&t.right instanceof qe&&0==t.right.value)return 1;case"==":case"!=":return g?t.left instanceof qe&&-1==t.left.value||t.left instanceof Re&&"-"==t.left.operator&&t.left.expression instanceof qe&&1==t.left.expression.value:void 0}}()){var b=Ve(Re,t,{operator:"!",expression:Ve(Re,t,{operator:"~",expression:m?t.left:t.right})});switch(t.operator){case"<":if(m)break;case"<=":case"!=":b=Ve(Re,t,{operator:"!",expression:b})}return b.optimize(r)}}return Di(r,t);function y(e,n){switch(e){case"-":return"+"==n?"-":"+";case"/":return"*"==n?"/":"*";default:return n}}function x(e,n,t,i){return"+"==e&&(n.is_boolean(r)||n.is_number(r)||(n=Ve(Re,n,{operator:"+",expression:n})),t.is_boolean(r)||t.is_number(r)||(t=Ve(Re,t,{operator:"+",expression:t}))),Ve(we,i,{operator:e,left:n,right:t})}function w(e){return"Call"==e.TYPE&&e.expression instanceof pn&&fo[e.expression.property]}function k(){return t.left.is_constant()||t.right.is_constant()||!t.left.has_side_effects(r)&&!t.right.has_side_effects(r)}function E(e){k()&&(e&&(t.operator=e),e=t.left,t.left=t.right,t.right=e)}}),n(P,function(e){return e}),n(Ne,function(t,e){if(!e.option("ie")&&fi(t)&&(!t.scope.resolve().uses_with||!e.find_parent(Rn)))switch(t.name){case"undefined":return Ve(Ie,t).optimize(e);case"NaN":return Ve(m,t).optimize(e);case"Infinity":return Ve(g,t).optimize(e)}var n=e.parent();if(e.option("reduce_vars")&&ot(e.self(),n)!==e.self()){var i,r,o,s,a,f,c,u,l,p=t.definition(),d=t.fixed_value(),n=p.single_use&&!(n instanceof Ee&&n.is_expr_pure(e));if(n)if(lt(d)){if(p.scope===t.scope.resolve(!0)&&!p.in_loop||e.option("reduce_funcs")&&1!=p.escaped.depth&&!d.inlined)if(p.redefined())n=!1;else if(Er(e,p,d))n=!1;else if(d.name&&d.name.definition()!==p)n=!1;else if(d.parent_scope!==t.scope||st(p))if(vr(d,e)){if("f"==(n=d.is_constant_expression(t.scope)))for(var h=t.scope;(h instanceof bn||h instanceof yn)&&(h.inlined=!0),h=h.parent_scope;);}else n=!1;else(d.name&&("await"==d.name.name&&Wn(d)||"yield"==d.name.name&&Gn(d))||d.has_side_effects(e)||e.option("ie")&&d instanceof en)&&(n=!1);else n=!1;n&&(d.parent_scope=t.scope)}else(!d||0<p.recursive_refs||!d.is_constant_expression()||d.drop_side_effect_free(e))&&(n=!1);if(n){if(p.single_use=!1,d._squeezed=!0,d.single_use=!0,lt(d=(d=d instanceof fe?Li(d):d)instanceof bn?Gi(d):d)){var _=[],h=t.scope;do{if(_.push(h),h===p.scope)break}while(h=h.parent_scope);d.enclosed.forEach(function(e){if(!d.variables.has(e.name))for(var n=0;n<_.length;n++){var t=_[n];if(!be(t.enclosed,e))return;t.var_names().set(e.name,!0)}})}return 0<p.recursive_refs?(i=(l=d.clone(!0)).name.definition(),r=l.variables.get(l.name.name),o=r&&r.orig[0],n=l instanceof en?(s="def_function",q):(s="def_variable",ve),o instanceof n||(((o=Ve(n,l.name)).scope=l).name=o,(r=l[s](o)).recursive_refs=p.recursive_refs),l.walk(new Be(function(e){var n,t;e instanceof On?e!==o&&((n=e.definition()).orig.push(e),n.eliminated++):e instanceof Ne&&((n=e.definition())===i?e.thedef=n=r:(n.single_use=!1,lt(t=e.fixed_value())&&t.name&&t.name.definition()===n&&n.scope===t.name.scope&&d.variables.get(t.name.name)===n&&(t.name=t.name.clone(),e.thedef=n=l.variables.get(t.name.name)||l[s](t.name))),n.references.push(e))}))):(d instanceof Ce?(e.push(d),l=d.optimize(e),e.pop()):l=d.optimize(e),l=l.transform(new Un(function(e,n){return e instanceof Ce||n(e=e.clone(),this),e}))),p.replaced++,l}if(d&&!1!==(a=t.fixed||p.fixed).should_replace)if(d instanceof N?st(p)||!Tr(p)||function(e){var n=t.scope;for(;n!==e.scope;){if(n instanceof en)return 1;n=n.parent_scope}}(p)||(f=d):(n=d.evaluate(e,!0))!==d&&"function"!=typeof n&&(null===n||"object"!=typeof n||e.option("unsafe_regexp")&&n instanceof RegExp&&!p.cross_loop&&Tr(p))&&(f=Jt(n,d)),f)if(void 0===a.should_replace&&(n=f.optimize(e).print_to_string().length,v(d)||(n=Math.min(n,d.print_to_string().length)),c=p.name.length,e.option("unused")&&!e.exposed(p)&&(u=p.references.length-p.replaced-p.assignments,u=Math.min(u,p.references.filter(function(e){return e.fixed===a}).length),c+=(c+2+n)/Math.max(1,u)),a.should_replace=n-Math.floor(c)<e.eval_threshold),a.should_replace)return v(d)?(l=f.optimize(e))===f&&(l=l.clone(!0)):(l=xi(f.optimize(e),d))!==f&&l!==d||(l=l.clone(!0)),p.replaced++,l}return t;function v(e){var n;return e.walk(new Be(function(e){if(n=e instanceof Ne?!0:n)return!0})),n}}),n(Mn,function(e,t){if(!t.option("templates"))return e;var i=e.tag;if(!i||Sr(t,i)){for(var n,r=[],o=[],s=0;s<e.strings.length;s++){var a,f=e.strings[s];if(i||(a=Dr(f))&&(f=d(a)),0<s){var c=e.expressions[s-1],u=function(e){var n=e.evaluate(t);if(n!==e&&!(i&&/\r|\\|`/.test(n)||(n=d(""+n)).length>e.print_to_string().length+"${}".length))return n}(c);if(u){var l,u=o[o.length-1]+u+f;if(i||typeof(l=Dr(u))==n){o[o.length-1]=l?d(l):u;continue}}r.push(c)}o.push(f),i||(n=typeof a)}if(!i&&1<o.length){if(""==o[o.length-1])return Ve(we,e,{operator:"+",left:Ve(Mn,e,{expressions:r.slice(0,-1),strings:o.slice(0,-1)}).transform(t),right:r[r.length-1]}).optimize(t);if(""==o[0]){for(var p=Ve(we,e,{operator:"+",left:Ve(G,e,{value:""}),right:r[0]}),s=1;""==o[s]&&s<r.length;s++)p=Ve(we,e,{operator:"+",left:p,right:r[s]});return ki(t,e,Ve(we,e,{operator:"+",left:p.transform(t),right:Ve(Mn,e,{expressions:r.slice(s),strings:o.slice(s)}).transform(t)}).optimize(t))}}e.expressions=r,e.strings=o}return Di(t,e);function d(e){return e.replace(/\r|\\|`|\${/g,function(e){return"\\"+("\r"==e?"r":e)})}}),n(Ie,function(e,n){if(n.option("unsafe_undefined")){var t=Vt(n).find_variable("undefined");if(t)return(t=Ve(Ne,e,{name:"undefined",scope:t.scope,thedef:t})).is_undefined=!0,t}t=ot(n.self(),n.parent());return t&&zr(t,e)?e:Ve(Re,e,{operator:"void",expression:Ve(qe,e,{value:0})})}),n(g,function(e,n){var t=ot(n.self(),n.parent());return(!t||!zr(t,e))&&(!n.option("keep_infinity")||t||Vt(n).find_variable("Infinity"))?Ve(we,e,{operator:"/",left:Ve(qe,e,{value:1}),right:Ve(qe,e,{value:0})}):e}),n(m,function(e,n){var t=ot(n.self(),n.parent());return(!t||!zr(t,e))&&(t||Vt(n).find_variable("NaN"))?Ve(we,e,{operator:"/",left:Ve(qe,e,{value:0}),right:Ve(qe,e,{value:0})}):e}),uo=K("+ - * / % >> << >>> | ^ &"),lo=K("* | ^ &"),n(xe,function(o,s){if(s.option("dead_code"))if(o.left instanceof Fe){if("="==o.operator){if(o.redundant)return e=[o.left.expression],o.left instanceof Dn&&e.push(o.left.property),e.push(o.right),We(o,e).optimize(s);if(o.left.equals(o.right)&&!o.left.has_side_effects(s))return o.right;var e=o.left.expression;if(e instanceof Ae||!s.has_directive("use strict")&&e instanceof T&&!e.may_throw_on_access(s))return o.left instanceof pn?o.right:We(o,[o.left.property,o.right]).optimize(s)}}else if(o.left instanceof Ne&&_t(o.left,s)){if("="==o.operator&&o.left.equals(o.right)&&!((f=s.parent())instanceof Re&&"delete"==f.operator))return o.right;if(o.left.is_immutable())return d();var n,t=o.left.definition(),a=t.scope.resolve(),i=a===s.find_parent(Ae),r=0,f=s.self();if(!a.uses_arguments||!st(t)||s.has_directive("use strict"))do{if(n=f,(f=s.parent(r++))instanceof xe){if(f.left instanceof Ne&&f.left.definition()===t){if(l(r,f,!i))break;return d(t)}if(f.left.match_symbol(function(e){if(e instanceof Fe)return!0}))break}else{if(f instanceof hn){if(!i)break;if(l(r,f))break;if(Ar(a,[t]))break;return d(t)}if(f instanceof He){if(!i)break;if(Ar(a,[t]))break;do{if(c=f,(f=s.parent(r++))===a&&pi(f.body,c))return d(t)}while(c=c,(u=f)instanceof ke||u instanceof oe||u instanceof A?pi(u.body,c):u instanceof ze?u.body===c||u.alternative===c:u instanceof Hn?u.bfinally?u.bfinally===c:u.bcatch===c:void 0);break}if(f instanceof Ue&&f.name instanceof On&&f.name.definition()===t){if(l(r,f))break;return d(t)}}}while(function(e,n){if(n instanceof we)switch(e){case n.left:return n.right.is_constant_expression(a);case n.right:return 1;default:return}if(n instanceof Te)switch(e){case n.condition:return n.consequent.is_constant_expression(a)&&n.alternative.is_constant_expression(a);case n.consequent:case n.alternative:return 1;default:return}if(n instanceof je){var t=n.expressions,i=t.indexOf(e);if(i<0)return;for(var r=t.length;--r>i;)if(!t[r].is_constant_expression(a))return;return 1}return n instanceof Re}(n,f))}var c,u;if(s.option("sequences")){var e=o.lift_sequences(s);if(e!==o)return e.optimize(s)}if(s.option("assignments")){if("="==o.operator&&o.left instanceof Ne&&o.right instanceof we){if(o.right.left instanceof Ne&&o.right.left.name==o.left.name&&uo[o.right.operator])return p(o.right.right);if(o.right.right instanceof Ne&&o.right.right.name==o.left.name&&lo[o.right.operator]&&!o.right.left.has_side_effects(s))return p(o.right.left)}if(("-="==o.operator||"+="==o.operator&&(o.left.is_boolean(s)||o.left.is_number(s)))&&o.right instanceof qe&&1==o.right.value)return e=o.operator.slice(0,-1),Ve(Re,o,{operator:e+e,expression:o.left})}return Di(s,o);function l(e,n,t){var i=o.right,r=(o.right=Ve(D,i),n.may_throw(s));return o.right=i,Wt(s,e,n,a,r,t)}function p(e){var n=o.left.fixed;return n&&(n.to_binary=mt(function(e){return e.left},n)),Ve(xe,o,{operator:o.right.operator+"=",left:o.left,right:e})}function d(e){return e&&(e.fixed=!1),("="!=o.operator?Ve(we,o,{operator:o.operator.slice(0,-1),left:o.left,right:o.right}):Qt(s.parent(),o,o.right)).optimize(s)}}),n(Te,function(s,n){if(n.option("sequences")&&s.condition instanceof je)return e=s.condition.expressions.slice(),(c=s.clone()).condition=e.pop(),e.push(c),We(s,e).optimize(n);if(n.option("conditionals")){var a=s.condition;if(n.option("booleans")&&!a.has_side_effects(n)&&rr(n,a),!(a=ir(n,a)))return Oe.warn("Condition always false [{start}]",s),We(s,[s.condition,s.alternative]).optimize(n);if(!(a instanceof Oe))return Oe.warn("Condition always true [{start}]",s),We(s,[s.condition,s.consequent]).optimize(n);var e=I(n),t=a.negate(n,e),e=((e?wi:xi)(a,t)===t&&(s=Ve(Te,s,{condition:t,consequent:s.alternative,alternative:s.consequent}),t=a,a=s.condition),s.consequent),i=s.alternative,r=xr(a,n);if(wr(n,r)){if(r.equals(e))return Ve(we,s,{operator:"||",left:a,right:i}).optimize(n);if(r.equals(i))return Ve(we,s,{operator:"&&",left:a,right:e}).optimize(n)}r=e.tail_node();if(r instanceof xe){var o="="==r.operator,f=o?i.tail_node():i;if((o||e===r)&&f instanceof xe&&r.operator==f.operator&&r.left.equals(f.left)&&(o&&r.left instanceof Ne||!a.has_side_effects(n)&&m(e)&&m(i)))return Ve(xe,s,{operator:r.operator,left:r.left,right:Ve(Te,s,{condition:a,consequent:b(e),alternative:b(i)})})}f=i.tail_node();if(r.equals(f))return We(s,e.equals(i)?[a,e]:[Ve(Te,s,{condition:a,consequent:y(e),alternative:y(i)}),f]).optimize(n);var c,u,o=function e(n,t,i){var r=n.tail_node();var o=t.tail_node();if(!g(r,o))return!i&&Ve(Te,s,{condition:a,consequent:n,alternative:t});i=r.clone();n=v(n,r,"expression");t=v(t,o,"expression");o=e(n,t);r.expression instanceof je&&(o=Qt(r,r.expression,o));i.expression=o;return i}(e,i,!0);if(o)return o;if(e instanceof Ee&&i.TYPE==e.TYPE&&0<=(o=_(e,i))&&e.expression.equals(i.expression)&&!a.has_side_effects(n)&&!e.expression.has_side_effects(n))return c=e.clone(),u=e.args[o],c.args[o]=u instanceof Pe?Ve(Pe,s,{expression:Ve(Te,s,{condition:a,consequent:u.expression,alternative:i.args[o].expression})}):Ve(Te,s,{condition:a,consequent:u,alternative:i.args[o]}),c;if(r instanceof Te&&r.alternative.equals(i))return Ve(Te,s,{condition:Ve(we,s,{left:a,operator:"&&",right:v(e,r,"condition")}),consequent:r.consequent,alternative:Xt(r.alternative,i)});if(r instanceof Te&&r.consequent.equals(i))return Ve(Te,s,{condition:Ve(we,s,{left:t,operator:"||",right:v(e,r,"condition")}),consequent:Xt(r.consequent,i),alternative:r.alternative});if(f instanceof Te&&e.equals(f.consequent))return Ve(Te,s,{condition:Ve(we,s,{left:a,operator:"||",right:v(i,f,"condition")}),consequent:Xt(e,f.consequent),alternative:f.alternative});if(f instanceof Te&&e.equals(f.alternative))return Ve(Te,s,{condition:Ve(we,s,{left:t,operator:"&&",right:v(i,f,"condition")}),consequent:f.consequent,alternative:Xt(e,f.alternative)});if(r instanceof we&&"&&"==r.operator&&r.right.equals(i))return Ve(we,s,{operator:"&&",left:Ve(we,s,{operator:"||",left:t,right:v(e,r,"left")}),right:Xt(r.right,i)}).optimize(n);if(r instanceof we&&"||"==r.operator&&r.right.equals(i))return Ve(we,s,{operator:"||",left:Ve(we,s,{operator:"&&",left:a,right:v(e,r,"left")}),right:Xt(r.right,i)}).optimize(n);if(f instanceof we&&"&&"==f.operator&&f.right.equals(e))return Ve(we,s,{operator:"&&",left:Ve(we,s,{operator:"||",left:a,right:v(i,f,"left")}),right:Xt(e,f.right)}).optimize(n);if(f instanceof we&&"||"==f.operator&&f.right.equals(e))return Ve(we,s,{operator:"||",left:Ve(we,s,{operator:"&&",left:t,right:v(i,f,"left")}),right:Xt(e,f.right)}).optimize(n);var l=n.option("booleans")&&n.in_boolean_context();if(d(e))return h(i)?p(a):Ve(we,s,{operator:"||",left:p(a),right:i}).optimize(n);if(h(e))return d(i)?p(a.negate(n)):Ve(we,s,{operator:"&&",left:p(a.negate(n)),right:i}).optimize(n);if(d(i))return Ve(we,s,{operator:"||",left:p(a.negate(n)),right:e}).optimize(n);if(h(i))return Ve(we,s,{operator:"&&",left:p(a),right:e}).optimize(n);n.option("typeofs")&&tr(a,e,i)}return s;function p(e){return e.is_boolean(n)?e:Ve(Re,e,{operator:"!",expression:e.negate(n)})}function d(e){return e instanceof R||l&&e instanceof T&&e.value||e instanceof Re&&"!"==e.operator&&e.expression instanceof T&&!e.expression.value}function h(e){return e instanceof le||l&&(e instanceof T&&!e.value||e instanceof Re&&"void"==e.operator&&!e.expression.has_side_effects(n))||e instanceof Re&&"!"==e.operator&&e.expression instanceof T&&e.expression.value}function _(e,n){var t=e.args,i=n.args,r=t.length;if(r!=i.length)return-2;for(var o=0;o<r;o++)if(!t[o].equals(i[o])){if(t[o]instanceof Pe!=i[o]instanceof Pe)return-3;for(var s=o+1;s<r;s++)if(!t[s].equals(i[s]))return-2;return o}return-1}function v(e,n,t){var i;return e===n?n[t]:((i=e.expressions.slice(0,-1)).push(n[t]),We(e,i))}function g(e,n){var t,i;if(e.TYPE==n.TYPE&&e.optional==n.optional)return e instanceof Ee?-1!=_(e,n)?void 0:"Call"!=e.TYPE||!(e.expression instanceof Fe||n.expression instanceof Fe)||g(e.expression,n.expression):e instanceof Fe?(t=e.property,i=n.property,(t instanceof Oe?t.equals(i):t==i)&&!(e.expression instanceof $||n.expression instanceof $)):void 0}function m(e){return e===e.tail_node()||Le(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(n)})}function b(e){var n;return e instanceof je?((n=e.expressions.slice()).push(n.pop().right),We(e,n)):e.right}function y(e){return e instanceof je?We(e,e.expressions.slice(0,-1)):Ve(qe,e,{value:0})}}),n(l,function(e,n){return n.option("booleans")?n.in_boolean_context()?Ve(qe,e,{value:+e.value}):(n=n.parent())instanceof we&&("=="==n.operator||"!="==n.operator)?(Oe.warn("Non-strict equality against boolean: {operator} {value} [{start}]",{operator:n.operator,value:e.value,start:n.start}),Ve(qe,e,{value:+e.value})):Ve(Re,e,{operator:"!",expression:Ve(qe,e,{value:1-e.value})}):e}),n(Pe,function(e,n){var t=e.expression;return n.option("spreads")&&t instanceof ye&&!(n.parent()instanceof kn)?Jn.splice(t.elements.map(function(e){return e instanceof pe?Ve(Ie,e).optimize(n):e})):e}),n(Dn,function(e,t){var n=e.expression,i=e.property,r=lr(e,t);if(r)return r;if(t.option("properties")){var o=i.evaluate(t);if(o!==i){"string"==typeof o&&("undefined"==o?o=void 0:(_=parseFloat(o)).toString()==o&&(o=_)),i=e.property=xi(i,Jt(o,i).transform(t));var s=""+o;if(tt(s)&&s.length<=i.print_to_string().length+1)return Ve(pn,e,{optional:e.optional,expression:n,property:s,quoted:!0}).optimize(t)}}var a,f,c,u,r=t.parent(),l=ot(t.self(),r);if(t.option("arguments")&&n instanceof Ne&&dt(a=n.definition())&&!n.in_arg&&i instanceof qe&&Math.floor(h=i.value)==h&&(f=a.scope)===function(){var e,n=0;for(;e=t.parent(n++);)if(e instanceof Ae){if(e instanceof Je)return;if(!Ln(e))return c=t.parent(n),e}}()&&f.uses_arguments<(l?2:3)){r instanceof Re&&"delete"==r.operator&&(a.deleted||(a.deleted=[]),a.deleted[h]=!0);var p=f.argnames[h];if(a.deleted&&a.deleted[h])p=null;else if(p)(!(p instanceof Ye&&"await"!=p.name&&n.scope.find_variable(p.name)===(d=p.definition()))||(t.has_directive("use strict")||f.name||f.rest||!(c instanceof Ee&&h<c.args.length&&Le(c.args.slice(0,h+1),function(e){return!(e instanceof Pe)}))||!Le(f.argnames,function(e){return e instanceof Ye}))&&(y()||d.assignments||1<d.orig.length))&&(p=null);else if((l||!y())&&h<f.argnames.length+5&&t.drop_fargs(f,c)&&!f.rest)for(;h>=f.argnames.length;)p=f.make_var(Ye,f,"argument_"+f.argnames.length),f.argnames.push(p);if(p&&ge(function(e){return e.name===p.name},f.argnames)===p)return l&&a.reassigned--,(d=Ve(Ne,p)).reference(),p.unused=void 0,d}if(l)return e;if(t.option("sequences")&&"Call"!=r.TYPE&&!(r instanceof vn&&r.init===e)){var d=pr(e);if(d!==e)return d.optimize(t)}if(o!==i&&(l=e.flatten_object(s,t))&&(n=e.expression=l.expression,i=e.property=l.property),t.option("properties")&&t.option("side_effects")&&i instanceof qe&&n instanceof ye&&Le(u=n.elements,function(e){return!(e instanceof Pe)})){var h,r=u[h=i.value];if(Or(r,t)){for(var _,v=r instanceof pe,g=!v,m=[],b=u.length;--b>h;)(_=u[b].drop_side_effect_free(t))&&(m.unshift(_),g)&&_.has_side_effects(t)&&(g=!1);for(g||m.unshift(r);0<=--b;)(_=u[b].drop_side_effect_free(t))?m.unshift(_):v?m.unshift(Ve(pe,u[b])):h--;return g?(m.push(r),We(e,m).optimize(t)):Ve(Dn,e,{expression:Ve(ye,n,{elements:m}),property:Ve(qe,i,{value:h})})}}return Di(t,e);function y(){return!t.option("reduce_vars")||a.reassigned}}),yn.DEFMETHOD("contains_super",function(){var n=!1,t=this;return t.walk(new Be(function(e){return!!n||(e instanceof $?n=!0:e!==t&&e instanceof Ce&&!Ln(e)||void 0)})),n}),(e=function(e,n){e.DEFMETHOD("contains_this",n)})(h,Ge),e(_,Ge),e(Oe,function(){var n=!1,t=this;return t.walk(new Be(function(e){return!!n||(e instanceof N?n=!0:e!==t&&e instanceof Ce&&!Ln(e)||void 0)})),n}),Fe.DEFMETHOD("flatten_object",function(e,n){if(n.option("properties")&&"__proto__"!==e){var t=this.expression;if(t instanceof kn)for(var i=t.properties,r=i.length;0<=--r;){var o=i[r];if(o.key===e){if(!Le(i,qr))return;if(!Or(o.value,n))return;for(var s,a=[],f=0;f<i.length;f++){var c=i[f].value;if(i[f]instanceof k){var u,l,p,d=!(c.uses_arguments||Gn(c)||c.contains_this());if(d&&(u=u||n.find_parent(Ce),l=hr(n,u),c.each_argname(function(e){l[e.name]&&(d=!1)})),d)p=Wn(c)?_:h;else{if(!(r!=f||(s=n.parent())instanceof Ee&&s.expression===this))return;p=c.CTOR}c=Ve(p,c)}a.push(c)}return Ve(Dn,this,{expression:Ve(ye,t,{elements:a}),property:Ve(qe,this,{value:r})})}}}}),n(pn,function(e,n){"arguments"!=e.property&&"caller"!=e.property||Oe.warn("Function.prototype.{property} not supported [{start}]",e);var t=n.parent();if(ot(n.self(),t))return e;var i=lr(e,n);if(i)return i;if(n.option("sequences")&&"Call"!=t.TYPE&&!(t instanceof vn&&t.init===e)){i=pr(e);if(i!==e)return i.optimize(n)}if(n.option("unsafe_proto")&&e.expression instanceof pn&&"prototype"==e.expression.property){var r=e.expression.expression;if(fi(r))switch(r.name){case"Array":e.expression=Ve(ye,e.expression,{elements:[]});break;case"Function":e.expression=Ve(gn,e.expression,{argnames:[],body:[]}).init_vars(r.scope);break;case"Number":e.expression=Ve(qe,e.expression,{value:0});break;case"Object":e.expression=Ve(kn,e.expression,{properties:[]});break;case"RegExp":e.expression=Ve(W,e.expression,{value:/t/});break;case"String":e.expression=Ve(G,e.expression,{value:""})}}t=e.flatten_object(e.property,n);return t?t.optimize(n):Di(n,e)}),n(fn,function(e,n){return n.option("rests")&&e.rest instanceof fn?Ve(fn,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),n(cn,function(e,n){var t;return n.option("objects")&&(t=e.key)instanceof Oe&&(t=t.evaluate(n))!==e.key&&(e.key=""+t),e}),n(kn,function(t,i){var r,o,s,a,f,c,u,e;return i.option("objects")&&(s=o=r=!1,a=i.has_directive("use strict"),f=[],c=new $n,u=[],t.properties.forEach(function(e){if(!(e instanceof Pe))return p(e);o=!0;var n=e.expression;i.option("spreads")&&n instanceof kn&&Le(n.properties,function(e){return!(e instanceof x||e instanceof Pe||!("__proto__"!==e.key||e instanceof z)&&e.value.has_side_effects(i))})?(r=!0,n.properties.forEach(function(e){var n=e.key,t=e instanceof z;if("__proto__"===n){if(!t)return;n=Jt(n,e)}p(t?Ve(En,e,{key:n,value:Ve(Ie,e).optimize(i)}):e)})):(s=!0,l(),u.push(e))}),l(),r)?(o&&s&&1==u.length&&(e=u[0])instanceof Tn&&e.key instanceof qe&&(e.key=""+e.key.value),Ve(kn,t,{properties:u})):t;function l(){f.forEach(function(e){var n=c.get(e);switch(n.length){case 0:return;case 1:return u.push(n[0])}r=!0;e=a&&!s&&n.pop();u.push(1==n.length?n[0]:Ve(En,t,{key:n[0].key,value:We(t,n.map(function(e){return e.value}))})),e&&u.push(e),n.length=0}),f=[],c=new $n}function p(e){var n=e.key;n instanceof Oe&&(o=!0,(n=n.evaluate(i))===e.key||"__proto__"===n?s=!0:n=e.key=""+n),qr(e)?(e.value.has_side_effects(i)&&l(),f.push(n),c.add(n,e)):(l(),u.push(e)),o&&!s&&"string"==typeof n&&Pr.test(n)&&(s=!0,(e=c.has(n)?c.get(n)[0]:e).key=Ve(qe,e,{value:+n}))}}),(e=function(e,n){e.DEFMETHOD("try_inline",n)})(Oe,me),e(xe,me),e(Ke,function(t,e,n,i){if(t.option("awaits")){var r=this,e=r.expression.try_inline(t,e,n,i,!0);if(e)return n||Vi(e,function(e){e.in_bool=!1;var n=e.value;n instanceof Ke||(e.value=Ve(Ke,r,{expression:n||Ve(Ie,e).transform(t)}))}),Yi(e)?e:Ve(ke,r,{body:[e,Ve(He,r,{body:Ve(Ke,r,{expression:Ve(qe,r,{value:0})})})]})}}),e(we,function(n,e,t,i,r){if(void 0!==t){var o=this,s=o.operator;if($e[s]){e=o.right.try_inline(n,e,t,i,r);if(e)return Ve(ze,o,{condition:function(e){switch(s){case"&&":return e;case"||":return e.negate(n);case"??":return Ve(we,o,{operator:"==",left:Ve(D,o),right:e})}}(o.left),body:e,alternative:t?null:Ve(Me,o,{value:Ve(Ie,o).transform(n)})})}}}),e(ke,function(e,n,t,i){if(!t&&this.variables){var r=this.body,o=r.length-1;if(!(o<0)){e=r[o].try_inline(e,this,t,i);if(e)return r[o]=e,this}}}),e(Ee,function(i,r,e,o,n){if(!(i.option("inline")<4)){var t=this;if(!t.is_expr_pure(i)){var s=t.expression;if(s instanceof yn&&!(s.name||s.uses_arguments||s.pinned()||Gn(s))){var a=Ln(s);if(!(a&&s.value||s.body[0]instanceof w||s.contains_this())){r=r||Vt(i);var f=new $n;for(f.set("NaN",!0);!(r instanceof Ce);)r.variables.each(function(e){f.set(e.name,!0)}),r=r.parent_scope;if(Kn(r,i.stack)&&!(r.pinned()&&s.variables.size()>(a?0:1))){if(r instanceof jn){if(s.variables.size()>(a?0:1)){if(!i.toplevel.vars)return;if(0<s.functions.size()&&!i.toplevel.funcs)return}f.set("arguments",!0)}var c=!n&&Wn(s);if(c){if(!i.option("awaits"))return;if(!Wn(r))return;if(t.may_throw(i))return}var u=r.var_names();if(o=o&&[],s.variables.all(function(e,n){return o&&o.push(e),!f.has(n)&&!u.has(n)||!a&&"arguments"==n&&1==e.orig.length})&&!(o&&0<o.length&&Ar(s,o))){var l,p,d,h,_,v=!0;if(Le(s.argnames,function(e){var n=!1,t=new Be(function(e){return!!n||(e instanceof Se?Mr(s,e.value)?n=!0:(e.name.walk(t),!0):e instanceof cn?e.key instanceof Oe&&Mr(s,e.key)?n=!0:(e.value.walk(t),!0):e instanceof Ye&&!Le(e.definition().orig,function(e){return!(e instanceof qn)})?n=!0:void 0)});return e.walk(t),!n&&(e instanceof Ye||(v=!1),!0)})){if(s.rest){if(Mr(s,s.rest))return;v=!1}if(e?l=function(e){var n=!1;return e.walk(new Be(function(e){return!!n||(c&&(e instanceof Ke||e instanceof AST_ForAwaitOf)||e instanceof Me?n=!0:e instanceof Ce||void 0)})),!n}:(n||Wn(s)||Gt(r))&&(l=function(e){var n=!1,t=new Be(function(e){return!!n||(e instanceof Me?n=!0:e instanceof Ce||void 0)});return e.walk(new Be(function(e){return!!n||(e instanceof Hn?(e.bfinally&&Le(e.body,function(e){return e.walk(t),!n})&&e.bcatch&&e.bcatch.walk(t),!0):e instanceof Ce||void 0)})),!n}),!l||Le(s.body,l))if(_r(s,hr(i,r)))return s.functions.each(function(e,n){r.functions.set(n,e)}),p=[],s.variables.each(function(n,e){var t;!a&&"arguments"==e&&1==n.orig.length||(u.set(e,!0),r.enclosed.push(n),r.variables.set(e,n),n.single_use=!1,!o)||n.references.length==n.replaced||n.orig.length==n.eliminated||1==n.orig.length&&s.functions.has(e)||!Le(n.orig,function(e){return!(e instanceof F||(e instanceof Ye?e.unused||n.scope.resolve()===s:e instanceof Y))})||(t=n.orig[0])instanceof he||p.push(Ve(He,t,{body:jr(i,Fr(t))}))}),d=Object.create(null),h=new $n,v&&Le(t.args,function(e){return!(e instanceof Pe)})?(_=t.args.slice(),s.argnames.forEach(function(e){var n=_.shift();e.unused?n&&p.push(Ve(He,t,{body:n})):(n=Ve(Ue,t,{name:e.convert_symbol(Fn,g),value:n||Ve(Ie,t).transform(i)}),e instanceof Ye&&Cr(e.definition(),n),p.push(Ve(ee,t,{definitions:[n]})))}),_.length&&p.push(Ve(He,t,{body:We(t,_)}))):p.push(Ve(ee,t,{definitions:[Ve(Ue,t,{name:Ve(fn,t,{elements:s.argnames.map(function(e){return e.unused?Ve(pe,e):e.convert_symbol(Fn,g)}),rest:s.rest&&s.rest.convert_symbol(Fn,g)}),value:Ve(ye,t,{elements:t.args.slice()})})]})),h.each(function(e,n){n=d[n];[].unshift.apply(n.orig,e),n.eliminated+=e.length}),[].push.apply(p,o?s.body.filter(function(e){var n,t;return!(e instanceof bn&&((t=(n=Ve(Fn,Fr(e.name))).definition()).fixed=!1,t.orig.push(n),t.eliminated++,p.push(Ve(ee,e,{definitions:[Ve(Ue,e,{name:n,value:Gi(e,!0)})]})),1))}):s.body),n=Ve(ke,t,{body:p}),e||(c&&Vi(n,function(e){var n=e.value;vi(n)||(e.value=Ve(Ke,t,{expression:n}))}),p.push(Ve(Me,t,{value:Gt(r)?Ve(Ie,t).transform(i):null}))),n}}}}}}}function g(e,n){n=n.definition();d[n.id]=n,h.add(n.id,e)}}),e(Te,function(e,n,t,i,r){var o=this,s=o.consequent.try_inline(e,n,t,i,r),e=o.alternative.try_inline(e,n,t,i,r);if(s||e)return Ve(ze,o,{condition:o.condition,body:s||a(o.consequent),alternative:e||a(o.alternative)});function a(e){return t?Ve(He,e,{body:e}):Ve(Me,e,{value:e})}}),e(_n,function(e,n,t,i){var r=this.body.try_inline(e,n,!0,!0),o=(r&&(this.body=r),this.init);return(o=o&&o.try_inline(e,n,!0,i))?(this.init=null,o instanceof ke?(o.body.push(this),o):Ve(ke,o,{body:[o,this]})):r&&this}),e(vn,function(e,n,t,i){var r=this.body.try_inline(e,n,!0,!0),o=(r&&(this.body=r),this.object);if(o instanceof je){e=Hr(e,n,!0,i,!1,o,1);if(e)return this.object=o.tail_node(),e.body.push(this),e}return r&&this}),e(ze,function(e,n,t,i){var r=this.body.try_inline(e,n,t,i),o=(r&&(this.body=r),this.alternative),t=((o=o&&o.try_inline(e,n,t,i))&&(this.alternative=o),this.condition);if(t instanceof je){e=Hr(e,n,!0,i,!1,t,1);if(e)return this.condition=t.tail_node(),e.body.push(this),e}return(r||o)&&this}),e(mn,function(e,n,t,i){e=this.body.try_inline(e,n,!0,!0);if(e)return this.body=e,this}),e(de,function(e,n,t,i){e=this.body.try_inline(e,n,t,i);if(e)return this.body instanceof mn&&e instanceof ke?(n=e.body.pop(),this.body=n,e.body.push(this),e):(this.body=e,this)}),e(b,me),e(Me,function(e,n,t,i){var r=this.value;return r&&r.try_inline(e,n,void 0,"try"===i)}),e(je,function(e,n,t,i,r){return Hr(e,n,t,i,r,this)}),e(He,function(e,n,t,i){for(var r=this.body;r instanceof Re;){var o=r.operator;if(at[o])break;if("void"==o)break;r=r.expression}return(r=t||vi(r)?r:Ve(Re,this,{operator:"void",expression:r})).try_inline(e,n,t||!1,i)}),e(Re,function(t,e,n,i,r){var o=this,s=o.operator;if(!at[s]){e=o.expression.try_inline(t,e,n=n||"void"!=s?n:!1,i,r);if(e)return n||Vi(e,function(e){e.in_bool=!1;var n=e.value;"void"==s&&vi(n)||(e.value=Ve(Re,o,{operator:s,expression:n||Ve(Ie,e).transform(t)}))}),e}}),e(Rn,function(e,n,t,i){var t=this.body.try_inline(e,n,t,i),r=(t&&(this.body=t),this.expression);if(r instanceof je){e=Hr(e,n,!0,i,!1,r,1);if(e)return this.expression=r.tail_node(),e.body.push(this),e}return t&&this}),e(In,function(e,n,t,i){if(e.option("yields")&&this.nested){var r=this.expression;if("Call"==r.TYPE){var o=r.expression;switch(o.CTOR){case re:o=Ve(te,o);break;case AST_GeneratorFunction:o=Ve(gn,o);break;default:return}return(r=r.clone()).expression=o,r.try_inline(e,n,t,i)}}}),n(Me,function(e,n){var t=e.value;return t&&n.option("side_effects")&&vi(t,n)&&!Gt(n.find_parent(Ce))&&(e.value=null),e}),{Compressor:ft}});
//# sourceMappingURL=sourcemaps/compress.js.map
