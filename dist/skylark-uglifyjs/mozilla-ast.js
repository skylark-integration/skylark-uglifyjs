/**
 * skylark-uglifyjs - A version of uglifyjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./ast"],function(e){"use strict";const{AST_Accessor:t,AST_Array:n,AST_Arrow:r,AST_Assign:a,AST_Atom:o,AST_Await:i,AST_BigInt:s,AST_Binary:u,AST_Block:l,AST_BlockStatement:p,AST_Boolean:c,AST_Break:d,AST_Call:y,AST_Case:f,AST_Catch:m,AST_Chain:S,AST_Class:_,AST_ClassStaticBlock:A,AST_ClassExpression:T,AST_ClassGetter:b,AST_ClassInit:v,AST_ClassProperty:w,AST_ClassPrivateProperty:g,AST_ClassSetter:h,AST_ConciseMethod:x,AST_Conditional:E,AST_Const:k,AST_Constant:D,AST_Continue:C,AST_Debugger:F,AST_Default:P,AST_DefaultAssign:M,AST_DefClass:I,AST_Definitions:L,AST_Defun:z,AST_Destructuring:O,AST_Directive:j,AST_Do:B,AST_Dot:N,AST_DotHash:R,AST_EmptyStatement:U,AST_Expansion:V,AST_Export:q,AST_ExportDeclaration:G,AST_False:H,AST_Finally:W,AST_For:Y,AST_ForIn:K,AST_ForOf:$,AST_Function:J,AST_Hole:Q,AST_If:X,AST_Import:Z,AST_ImportMeta:ee,AST_Label:te,AST_LabeledStatement:ne,AST_LabelRef:re,AST_Lambda:ae,AST_Let:oe,AST_NameMapping:ie,AST_New:se,AST_NewTarget:ue,AST_Node:le,AST_Null:pe,AST_Number:ce,AST_Object:de,AST_ObjectGetter:ye,AST_ObjectKeyVal:fe,AST_ObjectProperty:me,AST_ObjectSetter:Se,AST_PrefixedTemplateString:_e,AST_PrivateGetter:Ae,AST_PrivateMethod:Te,AST_PrivateSetter:be,AST_PrivateIn:ve,AST_PropAccess:we,AST_RegExp:ge,AST_Return:he,AST_Sequence:xe,AST_SimpleStatement:Ee,AST_Statement:ke,AST_String:De,AST_Sub:Ce,AST_Super:Fe,AST_Switch:Pe,AST_SwitchBranch:Me,AST_Symbol:Ie,AST_SymbolCatch:Le,AST_SymbolClass:ze,AST_SymbolClassProperty:Oe,AST_SymbolPrivateProperty:je,AST_SymbolConst:Be,AST_SymbolDefClass:Ne,AST_SymbolDefun:Re,AST_SymbolExport:Ue,AST_SymbolExportForeign:Ve,AST_SymbolFunarg:qe,AST_SymbolImport:Ge,AST_SymbolImportForeign:He,AST_SymbolLambda:We,AST_SymbolLet:Ye,AST_SymbolMethod:Ke,AST_SymbolRef:$e,AST_SymbolVar:Je,AST_TemplateSegment:Qe,AST_TemplateString:Xe,AST_This:Ze,AST_Throw:et,AST_Token:tt,AST_Toplevel:nt,AST_True:rt,AST_Try:at,AST_TryBlock:ot,AST_Unary:it,AST_UnaryPostfix:st,AST_UnaryPrefix:ut,AST_Var:lt,AST_VarDef:pt,AST_While:ct,AST_With:dt,AST_Yield:yt,is_generator:ft,is_arrow:mt,is_async:St}=e;!function(){var e={Program:function(e){return new nt({start:x(e),end:M(e),body:w(e.body.map(q))})},ArrowFunctionExpression:function(e){var t=[],n=null;e.params.forEach(function(e){"RestElement"==e.type?n=q(e.argument):t.push(q(e))});var a=new(e.async?AST_AsyncArrow:r)({start:x(e),end:M(e),argnames:t,rest:n}),o=q(e.body);return o instanceof p?(a.body=w(o.body),a.value=null):(a.body=[],a.value=o),a},FunctionDeclaration:function(e){var t;t=e.async?e.generator?AST_AsyncGeneratorDefun:AST_AsyncDefun:e.generator?AST_GeneratorDefun:z;var n=[],r=null;return e.params.forEach(function(e){"RestElement"==e.type?r=q(e.argument):n.push(q(e))}),new t({start:x(e),end:M(e),name:q(e.id),argnames:n,rest:r,body:w(q(e.body).body)})},FunctionExpression:function(e){var t;t=e.async?e.generator?AST_AsyncGeneratorFunction:AST_AsyncFunction:e.generator?AST_GeneratorFunction:J;var n=[],r=null;return e.params.forEach(function(e){"RestElement"==e.type?r=q(e.argument):n.push(q(e))}),new t({start:x(e),end:M(e),name:q(e.id),argnames:n,rest:r,body:w(q(e.body).body)})},ClassDeclaration:function(e){return new I({start:x(e),end:M(e),name:q(e.id),extends:q(e.superClass),properties:e.body.body.map(q)})},ClassExpression:function(e){return new T({start:x(e),end:M(e),name:q(e.id),extends:q(e.superClass),properties:e.body.body.map(q)})},MethodDefinition:function(e){var n=e.key,r=!1;e.computed?n=q(n):"PrivateIdentifier"==n.type?(r=!0,n="#"+n.name):n=O(n);var a=AST_ClassMethod,o=q(e.value);switch(e.kind){case"get":a=b,o=new t(o);break;case"set":a=h,o=new t(o)}return new a({start:x(e),end:M(e),key:n,private:r,static:e.static,value:o})},PropertyDefinition:function(e){var t=e.key,n=!1;return e.computed?t=q(t):"PrivateIdentifier"==t.type?(n=!0,t="#"+t.name):t=O(t),new AST_ClassField({start:x(e),end:M(e),key:t,private:n,static:e.static,value:q(e.value)})},StaticBlock:function(e){var t=x(e),n=M(e);return new v({start:t,end:n,value:new AST_ClassInitBlock({start:t,end:n,body:w(e.body.map(q))})})},ForOfStatement:function(e){return new(e.await?AST_ForAwaitOf:$)({start:x(e),end:M(e),init:q(e.left),object:q(e.right),body:q(e.body)})},TryStatement:function(e){var t=e.handlers||[e.handler];if(t.length>1||e.guardedHandlers&&e.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new at({start:x(e),end:M(e),body:q(e.block).body,bcatch:q(t[0]),bfinally:e.finalizer?new W(q(e.finalizer)):null})},Property:function(e){var n=e.computed?q(e.key):O(e.key),r={start:x(e),end:M(e),key:n,value:q(e.value)};return"init"==e.kind?new(e.method?AST_ObjectMethod:fe)(r):(r.value=new t(r.value),"get"==e.kind?new ye(r):"set"==e.kind?new Se(r):void 0)},ArrayExpression:function(e){return new n({start:x(e),end:M(e),elements:e.elements.map(function(e){return null===e?new Q:q(e)})})},ArrayPattern:function(e){var t=[],n=null;return e.elements.forEach(function(e){null===e?t.push(new Q):"RestElement"==e.type?n=q(e.argument):t.push(q(e))}),new AST_DestructuredArray({start:x(e),end:M(e),elements:t,rest:n})},ObjectPattern:function(e){var t=[],n=null;return e.properties.forEach(function(e){"RestElement"==e.type?n=q(e.argument):t.push(new AST_DestructuredKeyVal(q(e)))}),new AST_DestructuredObject({start:x(e),end:M(e),properties:t,rest:n})},MemberExpression:function(e){return new(e.computed?Ce:N)({start:x(e),end:M(e),optional:e.optional,expression:q(e.object),property:e.computed?q(e.property):e.property.name})},MetaProperty:function(e){var t=q(e.meta),n=O(e.property);return"new"==t.name&&"target"==n?new ue({start:x(e),end:M(e),name:"new.target"}):new N({start:x(e),end:M(e),expression:t,property:n})},SwitchCase:function(e){return new(e.test?f:P)({start:x(e),end:M(e),expression:q(e.test),body:e.consequent.map(q)})},ExportAllDeclaration:function(e){var t=x(e),n=M(e);return new AST_ExportForeign({start:t,end:n,aliases:[e.exported?ee(e.exported):new De({start:t,value:"*",end:n})],keys:[new De({start:t,value:"*",end:n})],path:q(e.source)})},ExportDefaultDeclaration:function(e){var t=q(e.declaration);if(!t.name)switch(t.CTOR){case AST_AsyncDefun:t=new AST_AsyncFunction(t);break;case AST_AsyncGeneratorDefun:t=new AST_AsyncGeneratorFunction(t);break;case I:t=new T(t);break;case z:t=new J(t);break;case AST_GeneratorDefun:t=new AST_GeneratorFunction(t)}return new AST_ExportDefault({start:x(e),end:M(e),body:t})},ExportNamedDeclaration:function(e){if(e.declaration)return new G({start:x(e),end:M(e),body:q(e.declaration)});if(e.source){var t=[],n=[];return e.specifiers.forEach(function(e){t.push(ee(e.exported)),n.push(ee(e.local))}),new AST_ExportForeign({start:x(e),end:M(e),aliases:t,keys:n,path:q(e.source)})}return new AST_ExportReferences({start:x(e),end:M(e),properties:e.specifiers.map(function(e){var t=new Ue(q(e.local));return t.alias=ee(e.exported),t})})},ImportDeclaration:function(e){var t=x(e),n=M(e),r=null,a=null,o=null;return e.specifiers.forEach(function(e){var i=new Ge(q(e.local));switch(e.type){case"ImportDefaultSpecifier":(a=i).key=new De({start:t,value:"",end:n});break;case"ImportNamespaceSpecifier":(r=i).key=new De({start:t,value:"*",end:n});break;default:i.key=ee(e.imported),o||(o=[]),o.push(i)}}),new Z({start:t,end:n,all:r,default:a,properties:o,path:q(e.source)})},ImportExpression:function(e){var t=x(e),n=q(e.source);return new y({start:t,end:M(e),expression:new $e({start:t,end:n.start,name:"import"}),args:[n]})},VariableDeclaration:function(e){return new({const:k,let:oe}[e.kind]||lt)({start:x(e),end:M(e),definitions:e.declarations.map(q)})},Literal:function(e){var t={start:x(e),end:M(e)};if(e.bigint)return t.value=e.bigint.toLowerCase()+"n",new s(t);var n=e.value;if(null===n)return new pe(t);var r=e.regex;if(r&&r.pattern)return t.value=new RegExp(r.pattern,r.flags),t.value.raw_source=r.pattern,new ge(t);if(r)return t.value=e.regex&&e.raw?e.raw:n,new ge(t);switch(typeof n){case"string":return t.value=n,new De(t);case"number":return isNaN(n)?new AST_NaN(t):(isFinite(n)?(a=1/n<0,t.value=a?-n:n,o=new ce(t)):(a=n<0,o=new AST_Infinity(t)),a?new ut({start:t.start,end:t.end,operator:"-",expression:o}):o);var a,o;case"boolean":return new(n?rt:H)(t)}},TemplateLiteral:function(e){return new AST_Template({start:x(e),end:M(e),expressions:e.expressions.map(q),strings:e.quasis.map(function(e){return e.value.raw})})},TaggedTemplateExpression:function(e){var t=q(e.quasi);return t.start=x(e),t.end=M(e),t.tag=q(e.tag),t},Identifier:function(e){var t,n=V.length-1;do{t=V[--n]}while("ArrayPattern"==t.type||"AssignmentPattern"==t.type&&t.left===V[n+1]||"ObjectPattern"==t.type||"Property"==t.type&&t.value===V[n+1]||"VariableDeclarator"==t.type&&t.id===V[n+1]);var r=$e;switch(t.type){case"ArrowFunctionExpression":t.body!==V[n+1]&&(r=qe);break;case"BreakStatement":case"ContinueStatement":r=re;break;case"CatchClause":r=Le;break;case"ClassDeclaration":t.id===V[n+1]&&(r=Ne);break;case"ClassExpression":t.id===V[n+1]&&(r=ze);break;case"FunctionDeclaration":r=t.id===V[n+1]?Re:qe;break;case"FunctionExpression":r=t.id===V[n+1]?We:qe;break;case"LabeledStatement":r=te;break;case"VariableDeclaration":r={const:Be,let:Ye}[t.kind]||Je}return new r({start:x(e),end:M(e),name:e.name})},Super:function(e){return new Fe({start:x(e),end:M(e),name:"super"})},ThisExpression:function(e){return new Ze({start:x(e),end:M(e),name:"this"})},ParenthesizedExpression:function(e){var t=q(e.expression);return t.start.parens||(t.start.parens=[]),t.start.parens.push(x(e)),t.end.parens||(t.end.parens=[]),t.end.parens.push(M(e)),t},ChainExpression:function(e){var t=q(e.expression);return t.terminal=!0,t}};function S(e){return function(t){var n=t.key instanceof le,r=n?Ae(t.key):t.private?{type:"PrivateIdentifier",name:t.key.slice(1)}:{type:"Literal",value:t.key};return{type:"MethodDefinition",kind:e,computed:n,key:r,static:t.static,value:Ae(t.value)}}}function _(e){return function(t){return{type:"ForOfStatement",await:e,left:Ae(t.init),right:Ae(t.object),body:Ae(t.body)}}}function A(e){var t=e.value;return"number"==typeof t&&(t<0||0===t&&1/t<0)?{type:"UnaryExpression",operator:"-",prefix:!0,argument:{type:"Literal",value:-t,raw:e.start.raw}}:{type:"Literal",value:t,raw:e.start.raw}}function w(e){for(var t=0;t<e.length;t++){var n=e[t];if(!(n instanceof Ee))break;var r=n.body;if(!(r instanceof De))break;if(n.start.pos!==r.start.pos)break;e[t]=new j(r)}return e}function g(e){if("Literal"==e.type)return null!=e.raw?e.raw:e.value+""}function x(e){var t=e.loc,n=t&&t.start,r=e.range;return new tt({file:t&&t.source,line:n&&n.line,col:n&&n.column,pos:r?r[0]:e.start,endline:n&&n.line,endcol:n&&n.column,endpos:r?r[0]:e.start,raw:g(e)})}function M(e){var t=e.loc,n=t&&t.end,r=e.range;return new tt({file:t&&t.source,line:n&&n.line,col:n&&n.column,pos:r?r[1]:e.end,endline:n&&n.line,endcol:n&&n.column,endpos:r?r[1]:e.end,raw:g(e)})}function O(e){return""+e["Identifier"==e.type?"name":"value"]}function R(t,n,r){var a=["start: my_start_token(M)","end: my_end_token(M)"],o=["type: "+JSON.stringify(t)];r&&r.split(/\s*,\s*/).forEach(function(e){var t=/([a-z0-9$_]+)(=|@|>|%)([a-z0-9$_]+)/i.exec(e);if(!t)throw new Error("Can't understand property map: "+e);var n=t[1],r=t[2],i=t[3];switch(r){case"@":a.push(i+": M."+n+".map(from_moz)"),o.push(n+": M."+i+".map(to_moz)");break;case">":a.push(i+": from_moz(M."+n+")"),o.push(n+": to_moz(M."+i+")");break;case"=":a.push(i+": M."+n),o.push(n+": M."+i);break;case"%":a.push(i+": from_moz(M."+n+").body"),o.push(n+": to_moz_block(M)");break;default:throw new Error("Can't understand operator in propmap: "+e)}}),e[t]=new Function("U2","my_start_token","my_end_token","from_moz",["return function From_Moz_"+t+"(M) {","    return new U2.AST_"+n.TYPE+"({",a.join(",\n"),"    });","};"].join("\n"))(exports,x,M,q),_e(n,new Function("to_moz","to_moz_block","to_moz_scope",["return function To_Moz_"+t+"(M) {","    return {",o.join(",\n"),"    };","};"].join("\n"))(Ae,be,ve))}e.UpdateExpression=e.UnaryExpression=function(e){return new(("prefix"in e?e.prefix:"UnaryExpression"==e.type)?ut:st)({start:x(e),end:M(e),operator:e.operator,expression:q(e.argument)})},R("EmptyStatement",U),R("ExpressionStatement",Ee,"expression>body"),R("BlockStatement",p,"body@body"),R("IfStatement",X,"test>condition, consequent>body, alternate>alternative"),R("LabeledStatement",ne,"label>label, body>body"),R("BreakStatement",d,"label>label"),R("ContinueStatement",C,"label>label"),R("WithStatement",dt,"object>expression, body>body"),R("SwitchStatement",Pe,"discriminant>expression, cases@body"),R("ReturnStatement",he,"argument>value"),R("ThrowStatement",et,"argument>value"),R("WhileStatement",ct,"test>condition, body>body"),R("DoWhileStatement",B,"test>condition, body>body"),R("ForStatement",Y,"init>init, test>condition, update>step, body>body"),R("ForInStatement",K,"left>init, right>object, body>body"),R("DebuggerStatement",F),R("VariableDeclarator",pt,"id>name, init>value"),R("CatchClause",m,"param>argname, body%body"),R("BinaryExpression",u,"operator=operator, left>left, right>right"),R("LogicalExpression",u,"operator=operator, left>left, right>right"),R("AssignmentExpression",a,"operator=operator, left>left, right>right"),R("AssignmentPattern",AST_DefaultValue,"left>name, right>value"),R("ConditionalExpression",E,"test>condition, consequent>consequent, alternate>alternative"),R("NewExpression",se,"callee>expression, arguments@args, pure=pure"),R("CallExpression",y,"callee>expression, arguments@args, optional=optional, pure=pure"),R("SequenceExpression",xe,"expressions@expressions"),R("SpreadElement",AST_Spread,"argument>expression"),R("ObjectExpression",de,"properties@properties"),R("AwaitExpression",i,"argument>expression"),R("YieldExpression",yt,"argument>expression, delegate=nested"),_e(nt,function(e){return ve("Program",e)}),_e(AST_LambdaDefinition,function(e){var t=e.argnames.map(Ae);return e.rest&&t.push({type:"RestElement",argument:Ae(e.rest)}),{type:"FunctionDeclaration",id:Ae(e.name),async:St(e),generator:ft(e),params:t,body:ve("BlockStatement",e)}}),_e(ae,function(e){var t=e.argnames.map(Ae);return e.rest&&t.push({type:"RestElement",argument:Ae(e.rest)}),mt(e)?{type:"ArrowFunctionExpression",async:St(e),params:t,body:e.value?Ae(e.value):ve("BlockStatement",e)}:{type:"FunctionExpression",id:Ae(e.name),async:St(e),generator:ft(e),params:t,body:ve("BlockStatement",e)}}),_e(I,function(e){return{type:"ClassDeclaration",id:Ae(e.name),superClass:Ae(e.extends),body:{type:"ClassBody",body:e.properties.map(Ae)}}}),_e(T,function(e){return{type:"ClassExpression",id:Ae(e.name),superClass:Ae(e.extends),body:{type:"ClassBody",body:e.properties.map(Ae)}}}),_e(b,S("get")),_e(h,S("set")),_e(AST_ClassMethod,S("method")),_e(AST_ClassField,function(e){var t=e.key instanceof le;return{type:"PropertyDefinition",computed:t,key:t?Ae(e.key):e.private?{type:"PrivateIdentifier",name:e.key.slice(1)}:{type:"Literal",value:e.key},static:e.static,value:Ae(e.value)}}),_e(v,function(e){return ve("StaticBlock",e.value)}),_e(AST_ForAwaitOf,_(!0)),_e($,_(!1)),_e(j,function(e){return{type:"ExpressionStatement",expression:ie(e,{type:"Literal",value:e.value})}}),_e(Me,function(e){return{type:"SwitchCase",test:Ae(e.expression),consequent:e.body.map(Ae)}}),_e(at,function(e){return{type:"TryStatement",block:be(e),handler:Ae(e.bcatch),guardedHandlers:[],finalizer:Ae(e.bfinally)}}),_e(m,function(e){return{type:"CatchClause",param:Ae(e.argname),guard:null,body:be(e)}}),_e(G,function(e){return{type:"ExportNamedDeclaration",declaration:Ae(e.body)}}),_e(AST_ExportDefault,function(e){return{type:"ExportDefaultDeclaration",declaration:Ae(e.body)}}),_e(AST_ExportForeign,function(e){if("*"==e.keys[0].value)return{type:"ExportAllDeclaration",exported:"*"==e.aliases[0].value?null:Te(e.aliases[0]),source:Ae(e.path)};for(var t=[],n=0;n<e.aliases.length;n++)t.push(ie({start:e.keys[n].start,end:e.aliases[n].end},{type:"ExportSpecifier",local:Te(e.keys[n]),exported:Te(e.aliases[n])}));return{type:"ExportNamedDeclaration",specifiers:t,source:Ae(e.path)}}),_e(AST_ExportReferences,function(e){return{type:"ExportNamedDeclaration",specifiers:e.properties.map(function(e){return ie({start:e.start,end:e.alias.end},{type:"ExportSpecifier",local:Ae(e),exported:Te(e.alias)})})}}),_e(Z,function(e){var t=e.properties?e.properties.map(function(e){return ie({start:e.key.start,end:e.end},{type:"ImportSpecifier",local:Ae(e),imported:Te(e.key)})}):[];return e.all&&t.unshift(ie(e.all,{type:"ImportNamespaceSpecifier",local:Ae(e.all)})),e.default&&t.unshift(ie(e.default,{type:"ImportDefaultSpecifier",local:Ae(e.default)})),{type:"ImportDeclaration",specifiers:t,source:Ae(e.path)}}),_e(L,function(e){return{type:"VariableDeclaration",kind:e.TYPE.toLowerCase(),declarations:e.definitions.map(Ae)}}),_e(we,function(e){var t=e instanceof Ce,n={type:"MemberExpression",object:Ae(e.expression),computed:t,optional:e.optional,property:t?Ae(e.property):{type:"Identifier",name:e.property}};return e.terminal?{type:"ChainExpression",expression:n}:n}),_e(it,function(e){return{type:"++"==e.operator||"--"==e.operator?"UpdateExpression":"UnaryExpression",operator:e.operator,prefix:e instanceof ut,argument:Ae(e.expression)}}),_e(u,function(e){return{type:"&&"==e.operator||"||"==e.operator?"LogicalExpression":"BinaryExpression",left:Ae(e.left),operator:e.operator,right:Ae(e.right)}}),_e(n,function(e){return{type:"ArrayExpression",elements:e.elements.map(Ae)}}),_e(AST_DestructuredArray,function(e){var t=e.elements.map(Ae);return e.rest&&t.push({type:"RestElement",argument:Ae(e.rest)}),{type:"ArrayPattern",elements:t}}),_e(AST_DestructuredKeyVal,function(e){var t=e.key instanceof le;return{type:"Property",kind:"init",computed:t,key:t?Ae(e.key):{type:"Literal",value:e.key},value:Ae(e.value)}}),_e(AST_DestructuredObject,function(e){var t=e.properties.map(Ae);return e.rest&&t.push({type:"RestElement",argument:Ae(e.rest)}),{type:"ObjectPattern",properties:t}}),_e(me,function(e){var t,n=e.key instanceof le,r=n?Ae(e.key):{type:"Literal",value:e.key};return e instanceof fe?t="init":e instanceof ye?t="get":e instanceof Se&&(t="set"),{type:"Property",kind:t,computed:n,method:e instanceof AST_ObjectMethod,key:r,value:Ae(e.value)}}),_e(Ie,function(e){var t=e.definition();return{type:"Identifier",name:t&&t.mangled_name||e.name}}),_e(Fe,function(){return{type:"Super"}}),_e(Ze,function(){return{type:"ThisExpression"}}),_e(ue,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"new"},property:{type:"Identifier",name:"target"}}}),_e(ge,function(e){var t=e.value.toString().match(/\/([gimuy]*)$/)[1],n="/"+e.value.raw_source+"/"+t;return{type:"Literal",value:n,raw:n,regex:{pattern:e.value.raw_source,flags:t}}}),_e(s,function(e){var t=e.value;return{type:"Literal",bigint:t.slice(0,-1),raw:t}}),_e(c,A),_e(D,A),_e(pe,A),_e(o,function(e){return{type:"Identifier",name:String(e.value)}}),_e(AST_Template,function(e){var t=e.strings.length-1,n={type:"TemplateLiteral",expressions:e.expressions.map(Ae),quasis:e.strings.map(function(e,n){return{type:"TemplateElement",tail:n==t,value:{raw:e}}})};return e.tag?{type:"TaggedTemplateExpression",tag:Ae(e.tag),quasi:n}:n}),l.DEFMETHOD("to_mozilla_ast",p.prototype.to_mozilla_ast),Q.DEFMETHOD("to_mozilla_ast",return_null),le.DEFMETHOD("to_mozilla_ast",function(){throw new Error("Cannot convert AST_"+this.TYPE)});var V=null;function q(t){V.push(t);var n=null;if(t){if(!HOP(e,t.type))throw new Error("Unsupported type: "+t.type);n=e[t.type](t)}return V.pop(),n}function ee(e){return new De({start:x(e),value:O(e),end:M(e)})}function ie(e,t){var n=e.start,r=e.end;return null!=n.pos&&null!=r.endpos&&(t.range=[n.pos,r.endpos]),n.line&&(t.loc={start:{line:n.line,column:n.col},end:r.endline?{line:r.endline,column:r.endcol}:null},n.file&&(t.loc.source=n.file)),t}function _e(e,t){e.DEFMETHOD("to_mozilla_ast",function(){return ie(this,t(this))})}function Ae(e){return null!=e?e.to_mozilla_ast():null}function Te(e){return is_identifier_string(e.value)?ie(e,{type:"Identifier",name:e.value}):Ae(e)}function be(e){return{type:"BlockStatement",body:e.body.map(Ae)}}function ve(e,t){var n=t.body.map(Ae);return t.body[0]instanceof Ee&&t.body[0].body instanceof De&&n.unshift(Ae(new U(t.body[0]))),{type:e,body:n}}le.from_mozilla_ast=function(e){var t=V;V=[];var n=q(e);return V=t,n.walk(new TreeWalker(function(e){if(e instanceof re){for(var t,n=0;(t=this.parent(n))&&!(t instanceof AST_Scope);n++)if(t instanceof ne&&t.label.name==e.name){e.thedef=t.label;break}if(!e.thedef){var r=e.start;js_error("Undefined label "+e.name,r.file,r.line,r.col,r.pos)}}})),n}}()});
//# sourceMappingURL=sourcemaps/mozilla-ast.js.map
