/**
 * skylark-uglifyjs - A version of uglifyjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./ast"],function(e){"use strict";const{AST_Accessor:t,AST_Array:n,AST_Arrow:r,AST_Assign:a,AST_Atom:o,AST_Await:i,AST_BigInt:s,AST_Binary:u,AST_Block:l,AST_BlockStatement:p,AST_Boolean:c,AST_Break:d,AST_Call:y,AST_Case:f,AST_Catch:m,AST_Chain:S,AST_Class:_,AST_ClassStaticBlock:A,AST_ClassExpression:T,AST_ClassProperty:b,AST_ClassPrivateProperty:v,AST_ConciseMethod:w,AST_Conditional:g,AST_Const:h,AST_Constant:x,AST_Continue:E,AST_Debugger:k,AST_Default:D,AST_DefaultAssign:C,AST_DefClass:F,AST_Definitions:P,AST_Defun:I,AST_Destructuring:M,AST_Directive:L,AST_Do:z,AST_Dot:O,AST_DotHash:j,AST_EmptyStatement:B,AST_Expansion:N,AST_Export:R,AST_False:U,AST_Finally:G,AST_For:V,AST_ForIn:q,AST_ForOf:H,AST_Function:W,AST_Hole:Y,AST_If:K,AST_Import:$,AST_ImportMeta:J,AST_Label:Q,AST_LabeledStatement:X,AST_LabelRef:Z,AST_Lambda:ee,AST_Let:te,AST_NameMapping:ne,AST_New:re,AST_NewTarget:ae,AST_Node:oe,AST_Null:ie,AST_Number:se,AST_Object:ue,AST_ObjectGetter:le,AST_ObjectKeyVal:pe,AST_ObjectProperty:ce,AST_ObjectSetter:de,AST_PrefixedTemplateString:ye,AST_PrivateGetter:fe,AST_PrivateMethod:me,AST_PrivateSetter:Se,AST_PrivateIn:_e,AST_PropAccess:Ae,AST_RegExp:Te,AST_Return:be,AST_Sequence:ve,AST_SimpleStatement:we,AST_Statement:ge,AST_String:he,AST_Sub:xe,AST_Super:Ee,AST_Switch:ke,AST_SwitchBranch:De,AST_Symbol:Ce,AST_SymbolCatch:Fe,AST_SymbolClass:Pe,AST_SymbolClassProperty:Ie,AST_SymbolPrivateProperty:Me,AST_SymbolConst:Le,AST_SymbolDefClass:ze,AST_SymbolDefun:Oe,AST_SymbolExport:je,AST_SymbolExportForeign:Be,AST_SymbolFunarg:Ne,AST_SymbolImport:Re,AST_SymbolImportForeign:Ue,AST_SymbolLambda:Ge,AST_SymbolLet:Ve,AST_SymbolMethod:qe,AST_SymbolRef:He,AST_SymbolVar:We,AST_TemplateSegment:Ye,AST_TemplateString:Ke,AST_This:$e,AST_Throw:Je,AST_Token:Qe,AST_Toplevel:Xe,AST_True:Ze,AST_Try:et,AST_TryBlock:tt,AST_Unary:nt,AST_UnaryPostfix:rt,AST_UnaryPrefix:at,AST_Var:ot,AST_VarDef:it,AST_While:st,AST_With:ut,AST_Yield:lt,is_generator:pt}=e;!function(){var e={Program:function(e){return new Xe({start:w(e),end:C(e),body:b(e.body.map(R))})},ArrowFunctionExpression:function(e){var t=[],n=null;e.params.forEach(function(e){"RestElement"==e.type?n=R(e.argument):t.push(R(e))});var a=new(e.async?AST_AsyncArrow:r)({start:w(e),end:C(e),argnames:t,rest:n}),o=R(e.body);return o instanceof p?(a.body=b(o.body),a.value=null):(a.body=[],a.value=o),a},FunctionDeclaration:function(e){var t;t=e.async?e.generator?AST_AsyncGeneratorDefun:AST_AsyncDefun:e.generator?AST_GeneratorDefun:I;var n=[],r=null;return e.params.forEach(function(e){"RestElement"==e.type?r=R(e.argument):n.push(R(e))}),new t({start:w(e),end:C(e),name:R(e.id),argnames:n,rest:r,body:b(R(e.body).body)})},FunctionExpression:function(e){var t;t=e.async?e.generator?AST_AsyncGeneratorFunction:AST_AsyncFunction:e.generator?AST_GeneratorFunction:W;var n=[],r=null;return e.params.forEach(function(e){"RestElement"==e.type?r=R(e.argument):n.push(R(e))}),new t({start:w(e),end:C(e),name:R(e.id),argnames:n,rest:r,body:b(R(e.body).body)})},ClassDeclaration:function(e){return new F({start:w(e),end:C(e),name:R(e.id),extends:R(e.superClass),properties:e.body.body.map(R)})},ClassExpression:function(e){return new T({start:w(e),end:C(e),name:R(e.id),extends:R(e.superClass),properties:e.body.body.map(R)})},MethodDefinition:function(e){var n=e.key,r=!1;e.computed?n=R(n):"PrivateIdentifier"==n.type?(r=!0,n="#"+n.name):n=M(n);var a=AST_ClassMethod,o=R(e.value);switch(e.kind){case"get":a=AST_ClassGetter,o=new t(o);break;case"set":a=AST_ClassSetter,o=new t(o)}return new a({start:w(e),end:C(e),key:n,private:r,static:e.static,value:o})},PropertyDefinition:function(e){var t=e.key,n=!1;return e.computed?t=R(t):"PrivateIdentifier"==t.type?(n=!0,t="#"+t.name):t=M(t),new AST_ClassField({start:w(e),end:C(e),key:t,private:n,static:e.static,value:R(e.value)})},StaticBlock:function(e){var t=w(e),n=C(e);return new AST_ClassInit({start:t,end:n,value:new AST_ClassInitBlock({start:t,end:n,body:b(e.body.map(R))})})},ForOfStatement:function(e){return new(e.await?AST_ForAwaitOf:H)({start:w(e),end:C(e),init:R(e.left),object:R(e.right),body:R(e.body)})},TryStatement:function(e){var t=e.handlers||[e.handler];if(t.length>1||e.guardedHandlers&&e.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new et({start:w(e),end:C(e),body:R(e.block).body,bcatch:R(t[0]),bfinally:e.finalizer?new G(R(e.finalizer)):null})},Property:function(e){var n=e.computed?R(e.key):M(e.key),r={start:w(e),end:C(e),key:n,value:R(e.value)};return"init"==e.kind?new(e.method?AST_ObjectMethod:pe)(r):(r.value=new t(r.value),"get"==e.kind?new le(r):"set"==e.kind?new de(r):void 0)},ArrayExpression:function(e){return new n({start:w(e),end:C(e),elements:e.elements.map(function(e){return null===e?new Y:R(e)})})},ArrayPattern:function(e){var t=[],n=null;return e.elements.forEach(function(e){null===e?t.push(new Y):"RestElement"==e.type?n=R(e.argument):t.push(R(e))}),new AST_DestructuredArray({start:w(e),end:C(e),elements:t,rest:n})},ObjectPattern:function(e){var t=[],n=null;return e.properties.forEach(function(e){"RestElement"==e.type?n=R(e.argument):t.push(new AST_DestructuredKeyVal(R(e)))}),new AST_DestructuredObject({start:w(e),end:C(e),properties:t,rest:n})},MemberExpression:function(e){return new(e.computed?xe:O)({start:w(e),end:C(e),optional:e.optional,expression:R(e.object),property:e.computed?R(e.property):e.property.name})},MetaProperty:function(e){var t=R(e.meta),n=M(e.property);return"new"==t.name&&"target"==n?new ae({start:w(e),end:C(e),name:"new.target"}):new O({start:w(e),end:C(e),expression:t,property:n})},SwitchCase:function(e){return new(e.test?f:D)({start:w(e),end:C(e),expression:R(e.test),body:e.consequent.map(R)})},ExportAllDeclaration:function(e){var t=w(e),n=C(e);return new AST_ExportForeign({start:t,end:n,aliases:[e.exported?J(e.exported):new he({start:t,value:"*",end:n})],keys:[new he({start:t,value:"*",end:n})],path:R(e.source)})},ExportDefaultDeclaration:function(e){var t=R(e.declaration);if(!t.name)switch(t.CTOR){case AST_AsyncDefun:t=new AST_AsyncFunction(t);break;case AST_AsyncGeneratorDefun:t=new AST_AsyncGeneratorFunction(t);break;case F:t=new T(t);break;case I:t=new W(t);break;case AST_GeneratorDefun:t=new AST_GeneratorFunction(t)}return new AST_ExportDefault({start:w(e),end:C(e),body:t})},ExportNamedDeclaration:function(e){if(e.declaration)return new AST_ExportDeclaration({start:w(e),end:C(e),body:R(e.declaration)});if(e.source){var t=[],n=[];return e.specifiers.forEach(function(e){t.push(J(e.exported)),n.push(J(e.local))}),new AST_ExportForeign({start:w(e),end:C(e),aliases:t,keys:n,path:R(e.source)})}return new AST_ExportReferences({start:w(e),end:C(e),properties:e.specifiers.map(function(e){var t=new je(R(e.local));return t.alias=J(e.exported),t})})},ImportDeclaration:function(e){var t=w(e),n=C(e),r=null,a=null,o=null;return e.specifiers.forEach(function(e){var i=new Re(R(e.local));switch(e.type){case"ImportDefaultSpecifier":(a=i).key=new he({start:t,value:"",end:n});break;case"ImportNamespaceSpecifier":(r=i).key=new he({start:t,value:"*",end:n});break;default:i.key=J(e.imported),o||(o=[]),o.push(i)}}),new $({start:t,end:n,all:r,default:a,properties:o,path:R(e.source)})},ImportExpression:function(e){var t=w(e),n=R(e.source);return new y({start:t,end:C(e),expression:new He({start:t,end:n.start,name:"import"}),args:[n]})},VariableDeclaration:function(e){return new({const:h,let:te}[e.kind]||ot)({start:w(e),end:C(e),definitions:e.declarations.map(R)})},Literal:function(e){var t={start:w(e),end:C(e)};if(e.bigint)return t.value=e.bigint.toLowerCase()+"n",new s(t);var n=e.value;if(null===n)return new ie(t);var r=e.regex;if(r&&r.pattern)return t.value=new RegExp(r.pattern,r.flags),t.value.raw_source=r.pattern,new Te(t);if(r)return t.value=e.regex&&e.raw?e.raw:n,new Te(t);switch(typeof n){case"string":return t.value=n,new he(t);case"number":return isNaN(n)?new AST_NaN(t):(isFinite(n)?(a=1/n<0,t.value=a?-n:n,o=new se(t)):(a=n<0,o=new AST_Infinity(t)),a?new at({start:t.start,end:t.end,operator:"-",expression:o}):o);var a,o;case"boolean":return new(n?Ze:U)(t)}},TemplateLiteral:function(e){return new AST_Template({start:w(e),end:C(e),expressions:e.expressions.map(R),strings:e.quasis.map(function(e){return e.value.raw})})},TaggedTemplateExpression:function(e){var t=R(e.quasi);return t.start=w(e),t.end=C(e),t.tag=R(e.tag),t},Identifier:function(e){var t,n=N.length-1;do{t=N[--n]}while("ArrayPattern"==t.type||"AssignmentPattern"==t.type&&t.left===N[n+1]||"ObjectPattern"==t.type||"Property"==t.type&&t.value===N[n+1]||"VariableDeclarator"==t.type&&t.id===N[n+1]);var r=He;switch(t.type){case"ArrowFunctionExpression":t.body!==N[n+1]&&(r=Ne);break;case"BreakStatement":case"ContinueStatement":r=Z;break;case"CatchClause":r=Fe;break;case"ClassDeclaration":t.id===N[n+1]&&(r=ze);break;case"ClassExpression":t.id===N[n+1]&&(r=Pe);break;case"FunctionDeclaration":r=t.id===N[n+1]?Oe:Ne;break;case"FunctionExpression":r=t.id===N[n+1]?Ge:Ne;break;case"LabeledStatement":r=Q;break;case"VariableDeclaration":r={const:Le,let:Ve}[t.kind]||We}return new r({start:w(e),end:C(e),name:e.name})},Super:function(e){return new Ee({start:w(e),end:C(e),name:"super"})},ThisExpression:function(e){return new $e({start:w(e),end:C(e),name:"this"})},ParenthesizedExpression:function(e){var t=R(e.expression);return t.start.parens||(t.start.parens=[]),t.start.parens.push(w(e)),t.end.parens||(t.end.parens=[]),t.end.parens.push(C(e)),t},ChainExpression:function(e){var t=R(e.expression);return t.terminal=!0,t}};function S(e){return function(t){var n=t.key instanceof oe,r=n?fe(t.key):t.private?{type:"PrivateIdentifier",name:t.key.slice(1)}:{type:"Literal",value:t.key};return{type:"MethodDefinition",kind:e,computed:n,key:r,static:t.static,value:fe(t.value)}}}function _(e){return function(t){return{type:"ForOfStatement",await:e,left:fe(t.init),right:fe(t.object),body:fe(t.body)}}}function A(e){var t=e.value;return"number"==typeof t&&(t<0||0===t&&1/t<0)?{type:"UnaryExpression",operator:"-",prefix:!0,argument:{type:"Literal",value:-t,raw:e.start.raw}}:{type:"Literal",value:t,raw:e.start.raw}}function b(e){for(var t=0;t<e.length;t++){var n=e[t];if(!(n instanceof we))break;var r=n.body;if(!(r instanceof he))break;if(n.start.pos!==r.start.pos)break;e[t]=new L(r)}return e}function v(e){if("Literal"==e.type)return null!=e.raw?e.raw:e.value+""}function w(e){var t=e.loc,n=t&&t.start,r=e.range;return new Qe({file:t&&t.source,line:n&&n.line,col:n&&n.column,pos:r?r[0]:e.start,endline:n&&n.line,endcol:n&&n.column,endpos:r?r[0]:e.start,raw:v(e)})}function C(e){var t=e.loc,n=t&&t.end,r=e.range;return new Qe({file:t&&t.source,line:n&&n.line,col:n&&n.column,pos:r?r[1]:e.end,endline:n&&n.line,endcol:n&&n.column,endpos:r?r[1]:e.end,raw:v(e)})}function M(e){return""+e["Identifier"==e.type?"name":"value"]}function j(t,n,r){var a=["start: my_start_token(M)","end: my_end_token(M)"],o=["type: "+JSON.stringify(t)];r&&r.split(/\s*,\s*/).forEach(function(e){var t=/([a-z0-9$_]+)(=|@|>|%)([a-z0-9$_]+)/i.exec(e);if(!t)throw new Error("Can't understand property map: "+e);var n=t[1],r=t[2],i=t[3];switch(r){case"@":a.push(i+": M."+n+".map(from_moz)"),o.push(n+": M."+i+".map(to_moz)");break;case">":a.push(i+": from_moz(M."+n+")"),o.push(n+": to_moz(M."+i+")");break;case"=":a.push(i+": M."+n),o.push(n+": M."+i);break;case"%":a.push(i+": from_moz(M."+n+").body"),o.push(n+": to_moz_block(M)");break;default:throw new Error("Can't understand operator in propmap: "+e)}}),e[t]=new Function("U2","my_start_token","my_end_token","from_moz",["return function From_Moz_"+t+"(M) {","    return new U2.AST_"+n.TYPE+"({",a.join(",\n"),"    });","};"].join("\n"))(exports,w,C,R),ye(n,new Function("to_moz","to_moz_block","to_moz_scope",["return function To_Moz_"+t+"(M) {","    return {",o.join(",\n"),"    };","};"].join("\n"))(fe,Se,_e))}e.UpdateExpression=e.UnaryExpression=function(e){return new(("prefix"in e?e.prefix:"UnaryExpression"==e.type)?at:rt)({start:w(e),end:C(e),operator:e.operator,expression:R(e.argument)})},j("EmptyStatement",B),j("ExpressionStatement",we,"expression>body"),j("BlockStatement",p,"body@body"),j("IfStatement",K,"test>condition, consequent>body, alternate>alternative"),j("LabeledStatement",X,"label>label, body>body"),j("BreakStatement",d,"label>label"),j("ContinueStatement",E,"label>label"),j("WithStatement",ut,"object>expression, body>body"),j("SwitchStatement",ke,"discriminant>expression, cases@body"),j("ReturnStatement",be,"argument>value"),j("ThrowStatement",Je,"argument>value"),j("WhileStatement",st,"test>condition, body>body"),j("DoWhileStatement",z,"test>condition, body>body"),j("ForStatement",V,"init>init, test>condition, update>step, body>body"),j("ForInStatement",q,"left>init, right>object, body>body"),j("DebuggerStatement",k),j("VariableDeclarator",it,"id>name, init>value"),j("CatchClause",m,"param>argname, body%body"),j("BinaryExpression",u,"operator=operator, left>left, right>right"),j("LogicalExpression",u,"operator=operator, left>left, right>right"),j("AssignmentExpression",a,"operator=operator, left>left, right>right"),j("AssignmentPattern",AST_DefaultValue,"left>name, right>value"),j("ConditionalExpression",g,"test>condition, consequent>consequent, alternate>alternative"),j("NewExpression",re,"callee>expression, arguments@args, pure=pure"),j("CallExpression",y,"callee>expression, arguments@args, optional=optional, pure=pure"),j("SequenceExpression",ve,"expressions@expressions"),j("SpreadElement",AST_Spread,"argument>expression"),j("ObjectExpression",ue,"properties@properties"),j("AwaitExpression",i,"argument>expression"),j("YieldExpression",lt,"argument>expression, delegate=nested"),ye(Xe,function(e){return _e("Program",e)}),ye(AST_LambdaDefinition,function(e){var t=e.argnames.map(fe);return e.rest&&t.push({type:"RestElement",argument:fe(e.rest)}),{type:"FunctionDeclaration",id:fe(e.name),async:is_async(e),generator:pt(e),params:t,body:_e("BlockStatement",e)}}),ye(ee,function(e){var t=e.argnames.map(fe);return e.rest&&t.push({type:"RestElement",argument:fe(e.rest)}),is_arrow(e)?{type:"ArrowFunctionExpression",async:is_async(e),params:t,body:e.value?fe(e.value):_e("BlockStatement",e)}:{type:"FunctionExpression",id:fe(e.name),async:is_async(e),generator:pt(e),params:t,body:_e("BlockStatement",e)}}),ye(F,function(e){return{type:"ClassDeclaration",id:fe(e.name),superClass:fe(e.extends),body:{type:"ClassBody",body:e.properties.map(fe)}}}),ye(T,function(e){return{type:"ClassExpression",id:fe(e.name),superClass:fe(e.extends),body:{type:"ClassBody",body:e.properties.map(fe)}}}),ye(AST_ClassGetter,S("get")),ye(AST_ClassSetter,S("set")),ye(AST_ClassMethod,S("method")),ye(AST_ClassField,function(e){var t=e.key instanceof oe;return{type:"PropertyDefinition",computed:t,key:t?fe(e.key):e.private?{type:"PrivateIdentifier",name:e.key.slice(1)}:{type:"Literal",value:e.key},static:e.static,value:fe(e.value)}}),ye(AST_ClassInit,function(e){return _e("StaticBlock",e.value)}),ye(AST_ForAwaitOf,_(!0)),ye(H,_(!1)),ye(L,function(e){return{type:"ExpressionStatement",expression:ne(e,{type:"Literal",value:e.value})}}),ye(De,function(e){return{type:"SwitchCase",test:fe(e.expression),consequent:e.body.map(fe)}}),ye(et,function(e){return{type:"TryStatement",block:Se(e),handler:fe(e.bcatch),guardedHandlers:[],finalizer:fe(e.bfinally)}}),ye(m,function(e){return{type:"CatchClause",param:fe(e.argname),guard:null,body:Se(e)}}),ye(AST_ExportDeclaration,function(e){return{type:"ExportNamedDeclaration",declaration:fe(e.body)}}),ye(AST_ExportDefault,function(e){return{type:"ExportDefaultDeclaration",declaration:fe(e.body)}}),ye(AST_ExportForeign,function(e){if("*"==e.keys[0].value)return{type:"ExportAllDeclaration",exported:"*"==e.aliases[0].value?null:me(e.aliases[0]),source:fe(e.path)};for(var t=[],n=0;n<e.aliases.length;n++)t.push(ne({start:e.keys[n].start,end:e.aliases[n].end},{type:"ExportSpecifier",local:me(e.keys[n]),exported:me(e.aliases[n])}));return{type:"ExportNamedDeclaration",specifiers:t,source:fe(e.path)}}),ye(AST_ExportReferences,function(e){return{type:"ExportNamedDeclaration",specifiers:e.properties.map(function(e){return ne({start:e.start,end:e.alias.end},{type:"ExportSpecifier",local:fe(e),exported:me(e.alias)})})}}),ye($,function(e){var t=e.properties?e.properties.map(function(e){return ne({start:e.key.start,end:e.end},{type:"ImportSpecifier",local:fe(e),imported:me(e.key)})}):[];return e.all&&t.unshift(ne(e.all,{type:"ImportNamespaceSpecifier",local:fe(e.all)})),e.default&&t.unshift(ne(e.default,{type:"ImportDefaultSpecifier",local:fe(e.default)})),{type:"ImportDeclaration",specifiers:t,source:fe(e.path)}}),ye(P,function(e){return{type:"VariableDeclaration",kind:e.TYPE.toLowerCase(),declarations:e.definitions.map(fe)}}),ye(Ae,function(e){var t=e instanceof xe,n={type:"MemberExpression",object:fe(e.expression),computed:t,optional:e.optional,property:t?fe(e.property):{type:"Identifier",name:e.property}};return e.terminal?{type:"ChainExpression",expression:n}:n}),ye(nt,function(e){return{type:"++"==e.operator||"--"==e.operator?"UpdateExpression":"UnaryExpression",operator:e.operator,prefix:e instanceof at,argument:fe(e.expression)}}),ye(u,function(e){return{type:"&&"==e.operator||"||"==e.operator?"LogicalExpression":"BinaryExpression",left:fe(e.left),operator:e.operator,right:fe(e.right)}}),ye(n,function(e){return{type:"ArrayExpression",elements:e.elements.map(fe)}}),ye(AST_DestructuredArray,function(e){var t=e.elements.map(fe);return e.rest&&t.push({type:"RestElement",argument:fe(e.rest)}),{type:"ArrayPattern",elements:t}}),ye(AST_DestructuredKeyVal,function(e){var t=e.key instanceof oe;return{type:"Property",kind:"init",computed:t,key:t?fe(e.key):{type:"Literal",value:e.key},value:fe(e.value)}}),ye(AST_DestructuredObject,function(e){var t=e.properties.map(fe);return e.rest&&t.push({type:"RestElement",argument:fe(e.rest)}),{type:"ObjectPattern",properties:t}}),ye(ce,function(e){var t,n=e.key instanceof oe,r=n?fe(e.key):{type:"Literal",value:e.key};return e instanceof pe?t="init":e instanceof le?t="get":e instanceof de&&(t="set"),{type:"Property",kind:t,computed:n,method:e instanceof AST_ObjectMethod,key:r,value:fe(e.value)}}),ye(Ce,function(e){var t=e.definition();return{type:"Identifier",name:t&&t.mangled_name||e.name}}),ye(Ee,function(){return{type:"Super"}}),ye($e,function(){return{type:"ThisExpression"}}),ye(ae,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"new"},property:{type:"Identifier",name:"target"}}}),ye(Te,function(e){var t=e.value.toString().match(/\/([gimuy]*)$/)[1],n="/"+e.value.raw_source+"/"+t;return{type:"Literal",value:n,raw:n,regex:{pattern:e.value.raw_source,flags:t}}}),ye(s,function(e){var t=e.value;return{type:"Literal",bigint:t.slice(0,-1),raw:t}}),ye(c,A),ye(x,A),ye(ie,A),ye(o,function(e){return{type:"Identifier",name:String(e.value)}}),ye(AST_Template,function(e){var t=e.strings.length-1,n={type:"TemplateLiteral",expressions:e.expressions.map(fe),quasis:e.strings.map(function(e,n){return{type:"TemplateElement",tail:n==t,value:{raw:e}}})};return e.tag?{type:"TaggedTemplateExpression",tag:fe(e.tag),quasi:n}:n}),l.DEFMETHOD("to_mozilla_ast",p.prototype.to_mozilla_ast),Y.DEFMETHOD("to_mozilla_ast",return_null),oe.DEFMETHOD("to_mozilla_ast",function(){throw new Error("Cannot convert AST_"+this.TYPE)});var N=null;function R(t){N.push(t);var n=null;if(t){if(!HOP(e,t.type))throw new Error("Unsupported type: "+t.type);n=e[t.type](t)}return N.pop(),n}function J(e){return new he({start:w(e),value:M(e),end:C(e)})}function ne(e,t){var n=e.start,r=e.end;return null!=n.pos&&null!=r.endpos&&(t.range=[n.pos,r.endpos]),n.line&&(t.loc={start:{line:n.line,column:n.col},end:r.endline?{line:r.endline,column:r.endcol}:null},n.file&&(t.loc.source=n.file)),t}function ye(e,t){e.DEFMETHOD("to_mozilla_ast",function(){return ne(this,t(this))})}function fe(e){return null!=e?e.to_mozilla_ast():null}function me(e){return is_identifier_string(e.value)?ne(e,{type:"Identifier",name:e.value}):fe(e)}function Se(e){return{type:"BlockStatement",body:e.body.map(fe)}}function _e(e,t){var n=t.body.map(fe);return t.body[0]instanceof we&&t.body[0].body instanceof he&&n.unshift(fe(new B(t.body[0]))),{type:e,body:n}}oe.from_mozilla_ast=function(e){var t=N;N=[];var n=R(e);return N=t,n.walk(new TreeWalker(function(e){if(e instanceof Z){for(var t,n=0;(t=this.parent(n))&&!(t instanceof AST_Scope);n++)if(t instanceof X&&t.label.name==e.name){e.thedef=t.label;break}if(!e.thedef){var r=e.start;js_error("Undefined label "+e.name,r.file,r.line,r.col,r.pos)}}})),n}}()});
//# sourceMappingURL=sourcemaps/mozilla-ast.js.map
