/**
 * skylark-uglifyjs - A version of uglifyjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,n){var t=n.define,require=n.require,i="function"==typeof t&&t.amd,r=!i&&"undefined"!=typeof exports;if(!i&&!t){var o={};t=n.define=function(e,n,t){"function"==typeof t?(o[e]={factory:t,deps:n.map(function(n){return function(e,n){if("."!==e[0])return e;var t=n.split("/"),i=e.split("/");t.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?t.pop():t.push(i[r]));return t.join("/")}(n,e)}),resolved:!1,exports:null},require(e)):o[e]={factory:null,resolved:!0,exports:t}},require=n.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=o[e];if(!module.resolved){var t=[];module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(n,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-uglifyjs/utils",[],function(){"use strict";function e(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(e){return e.stack}}})}function n(e,n){this.message=e,this.defs=n}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.name="DefaultsError",e(n);var t=function(){function e(e,i){for(var r=[],o=0;o<e.length;o++){var a=i(e[o],o);a!==n&&(a instanceof t?r.push.apply(r,a.v):r.push(a))}return r}e.is_op=function(e){return e===n||e instanceof t},e.splice=function(e){return new t(e)};var n=e.skip={};function t(e){this.v=e}return e}();function i(){this.values=Object.create(null)}function r(e,n){return Object.prototype.hasOwnProperty.call(e,n)}return i.prototype={set:function(e,n){return"__proto__"==e?this.proto_value=n:this.values[e]=n,this},add:function(e,n){var t=this.get(e);return t?t.push(n):this.set(e,[n]),this},get:function(e){return"__proto__"==e?this.proto_value:this.values[e]},del:function(e){return"__proto__"==e?delete this.proto_value:delete this.values[e],this},has:function(e){return"__proto__"==e?"proto_value"in this:e in this.values},all:function(e){for(var n in this.values)if(!e(this.values[n],n))return!1;return!("proto_value"in this&&!e(this.proto_value,"__proto__"))},each:function(e){for(var n in this.values)e(this.values[n],n);"proto_value"in this&&e(this.proto_value,"__proto__")},size:function(){return Object.keys(this.values).length+("proto_value"in this)},map:function(e){var n=[];for(var t in this.values)n.push(e(this.values[t],t));return"proto_value"in this&&n.push(e(this.proto_value,"__proto__")),n},clone:function(){var e=new i;return this.each(function(n,t){e.set(t,n)}),e},toObject:function(){var e={};return this.each(function(n,t){e["$"+t]=n}),e}},i.fromObject=function(e){var n=new i;for(var t in e)r(e,t)&&n.set(t.slice(1),e[t]);return n},{characters:function(e){return e.split("")},member:function(e,n){return n.indexOf(e)>=0},find_if:function(e,n){for(var t=n.length;--t>=0;)if(e(n[t]))return n[t]},configure_error_stack:e,defaults:function(e,t,i){if(i)for(var o in e)if(r(e,o)&&!r(t,o))throw new n("`"+o+"` is not a supported option",t);for(var o in e)r(e,o)&&(t[o]=e[o]);return t},DefaultsError:n,noop:function(){},return_false:function(){return!1},return_true:function(){return!0},return_this:function(){return this},return_null:function(){return null},List:t,push_uniq:function(e,n){if(e.indexOf(n)<0)return e.push(n)},string_template:function(e,n){return e.replace(/\{([^{}]+)\}/g,function(e,t){var i="this"==t?n:n[t];return i instanceof AST_Node?i.print_to_string():i instanceof AST_Token?i.file+":"+i.line+","+i.col:i})},remove:function(e,n){var t=e.indexOf(n);t>=0&&e.splice(t,1)},makePredicate:function(e){Array.isArray(e)||(e=e.split(" "));var n=Object.create(null);return e.forEach(function(e){n[e]=!0}),n},all:function(e,n){for(var t=e.length;--t>=0;)if(!n(e[t],t))return!1;return!0},Dictionary:i,HOP:r,DEF_BITPROPS:function(e,n){if(n.length>31)throw new Error("Too many properties: "+n.length+"\n"+n.join(", "));n.forEach(function(n,t){var i=1<<t;Object.defineProperty(e.prototype,n,{get:function(){return!!(this._bits&i)},set:function(e){e?this._bits|=i:this._bits&=~i}})})}}}),e("skylark-uglifyjs/ast",["./utils"],function(e){"use strict";const{all:n,HOP:t,List:i,MAP:r,noop:o,DEF_BITPROPS:a,return_true:s,return_this:f}=e;var c;function u(e,n,i,r){void 0===r&&(r=p);var o=n=n?n.split(/\s+/):[];r&&r.PROPS&&(n=n.concat(r.PROPS));var a=["return function AST_",e,"(props){","this._bits=0;","if(props){"];n.forEach(function(e){a.push("this.",e,"=props.",e,";")}),a.push("}");var s=Object.create(r&&r.prototype);(i.initialize||s.initialize)&&a.push("this.initialize();"),a.push("};");var f=new Function(a.join(""))();for(var c in f.prototype=s,f.prototype.CTOR=f,f.prototype.TYPE=f.TYPE=e,r&&(f.BASE=r,r.SUBCLASSES.push(f)),f.DEFMETHOD=function(e,n){this.prototype[e]=n},f.PROPS=n,f.SELF_PROPS=o,f.SUBCLASSES=[],i)t(i,c)&&(/^\$/.test(c)?f[c.substr(1)]=i[c]:f.DEFMETHOD(c,i[c]));return"undefined"!=typeof exports&&(exports["AST_"+e]=f),f}var l=u("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),p=u("Node","start end",{_clone:function(e){if(e){var n=this.clone();return n.transform(new Jn(function(e){if(e!==n)return e.clone(!0)}))}return new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},equals:function(e){return this.TYPE==e.TYPE&&this._equals(e)},walk:function(e){e.visit(this)},_validate:function(){if("Node"==this.TYPE)throw new Error("should not instantiate AST_Node")},validate:function(){var e=this.CTOR;do{e.prototype._validate.call(this)}while(e=e.BASE)},validate_ast:function(){var e={};this.walk(new Kn(function(n){if(n.validate_visited===e)throw new Error(string_template("cannot reuse AST_{TYPE} from [{start}]",n));n.validate_visited=e}))}},null);a(p,["_optimized","_squeezed","call_only","collapse_scanning","defined","evaluating","falsy","in_arg","in_bool","is_undefined","inlined","length_read","nested","new","optional","private","pure","redundant","single_use","static","terminal","truthy","uses_eval","uses_with"]),(p.log_function=function(e,n){if("function"==typeof e){var t=Object.create(null);p.info=n?function(e,n){i("INFO: "+string_template(e,n))}:o,p.warn=function(e,n){i("WARN: "+string_template(e,n))}}else p.info=p.warn=o;function i(n){t[n]||(t[n]=!0,e(n))}})();var h=[];function d(e,t){return e.length==t.length&&n(e,function(e,n){return e.equals(t[n])})}function v(e,n){return e===n||(null==e?null==n:e instanceof p&&n instanceof p&&e.equals(n))}p.enable_validation=function(){p.disable_validation(),function e(n){if(n.SUBCLASSES.forEach(e),t(n.prototype,"transform")){var r=n.prototype.transform;n.prototype.transform=function(e,n){var t=r.call(this,e,n);if(t instanceof p)t.validate();else if(!(null===t||n&&i.is_op(t)))throw new Error("invalid transformed value: "+t);return t},h.push(function(){n.prototype.transform=r})}}(this)},p.disable_validation=function(){for(var e;e=h.pop();)e()};var _=u("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if("Statement"==this.TYPE)throw new Error("should not instantiate AST_Statement")}}),m=u("Debugger",null,{$documentation:"Represents a debugger statement",_equals:s},_),g=u("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_equals:function(e){return this.value==e.value},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},_),b=u("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_equals:s},_);function y(e){return e instanceof _&&!(e instanceof ae)&&!(e instanceof U)}function w(e,n,t,i,r){if(t=t?"contain":"be",!(e instanceof p))throw new Error(n+" must "+t+" AST_Node");if(e instanceof Ne)throw new Error(n+" cannot "+t+" AST_DefaultValue");if(e instanceof tn)throw new Error(n+" cannot "+t+" AST_Destructured");if(e instanceof Ln&&!r)throw new Error(n+" cannot "+t+" AST_Hole");if(e instanceof Ve&&!i)throw new Error(n+" cannot "+t+" AST_Spread");if(y(e))throw new Error(n+" cannot "+t+" AST_Statement");if(e instanceof vn)throw new Error(n+" cannot "+t+" AST_SymbolDeclaration")}function S(e,n){w(e[n],n)}var x=u("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){S(this,"body")}},_),k=u("BlockScope","_var_names enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any inner scopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---\x3e SymbolDef for all variables/functions defined in this scope"},clone:function(e){var n=this._clone(e);return this.enclosed&&(n.enclosed=this.enclosed.slice()),this.functions&&(n.functions=this.functions.clone()),this.variables&&(n.variables=this.variables.clone()),n},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if("BlockScope"==this.TYPE)throw new Error("should not instantiate AST_BlockScope");if(null!=this.parent_scope){if(!(this.parent_scope instanceof k))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof R))throw new Error("must be contained within AST_Scope")}}},_);function T(e,n){e.body.forEach(function(e){e.walk(n)})}var A=u("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},_equals:function(e){return d(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){T(n,e)})},_validate:function(){if("Block"==this.TYPE)throw new Error("should not instantiate AST_Block");this.body.forEach(function(e){if(!y(e))throw new Error("body must contain AST_Statement")})}},k),E=u("BlockStatement",null,{$documentation:"A block statement"},A),D=u("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if("StatementWithBody"==this.TYPE)throw new Error("should not instantiate AST_StatementWithBody");if(!y(this.body))throw new Error("body must be AST_Statement")}},k),O=u("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_equals:function(e){return this.label.equals(e.label)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.label.walk(e),n.body.walk(e)})},clone:function(e){var n=this._clone(e);if(e){var t=n.label,i=this.label;n.walk(new Kn(function(e){if(e instanceof me){if(!e.label||e.label.thedef!==i)return;return e.label.thedef=t,t.references.push(e),!0}if(e instanceof R)return!0}))}return n},_validate:function(){if(!(this.label instanceof An))throw new Error("label must be AST_Label")}},D),q=u("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if("IterationStatement"==this.TYPE)throw new Error("should not instantiate AST_IterationStatement")}},D),C=u("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)},_validate:function(){if("DWLoop"==this.TYPE)throw new Error("should not instantiate AST_DWLoop");S(this,"condition")}},q),$=u("Do",null,{$documentation:"A `do` statement",walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e),n.condition.walk(e)})}},C),F=u("While",null,{$documentation:"A `while` statement",walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e)})}},C),P=u("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_equals:function(e){return v(this.init,e.init)&&v(this.condition,e.condition)&&v(this.step,e.step)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.init&&n.init.walk(e),n.condition&&n.condition.walk(e),n.step&&n.step.walk(e),n.body.walk(e)})},_validate:function(){if(null!=this.init){if(!(this.init instanceof p))throw new Error("init must be AST_Node");if(y(this.init)&&!(this.init instanceof De))throw new Error("init cannot be AST_Statement")}null!=this.condition&&S(this,"condition"),null!=this.step&&S(this,"step")}},q),j=u("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},_equals:function(e){return this.init.equals(e.init)&&this.object.equals(e.object)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.init.walk(e),n.object.walk(e),n.body.walk(e)})},_validate:function(){if("ForEnumeration"==this.TYPE)throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof De){if(1!=this.init.definitions.length)throw new Error("init must have single declaration")}else rn(this.init,function(e){if(!(e instanceof Ye||e instanceof En))throw new Error("init must be assignable: "+e.TYPE)});S(this,"object")}},q),z=u("ForIn",null,{$documentation:"A `for ... in` statement"},j),M=u("ForOf",null,{$documentation:"A `for ... of` statement"},j),N=u("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},M),I=u("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_equals:function(e){return this.expression.equals(e.expression)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.body.walk(e)})},_validate:function(){S(this,"expression")}},D),R=u("Scope","fn_defs may_call_this uses_eval uses_with",{$documentation:"Base class for all statements introducing a lambda scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:f,_validate:function(){if("Scope"==this.TYPE)throw new Error("should not instantiate AST_Scope")}},A),B=u("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---\x3e SymbolDef for all undeclared names"},wrap:function(e){var n=this.body;return c.parse(["(function(exports){'$ORIG';})(typeof ",e,"=='undefined'?(",e,"={}):",e,");"].join(""),{filename:"wrap="+JSON.stringify(e)}).transform(new Jn(function(e){if(e instanceof g&&"$ORIG"==e.value)return i.splice(n)}))},enclose:function(e){"string"!=typeof e&&(e="");var n=e.indexOf(":");n<0&&(n=e.length);var t=this.body;return c.parse(["(function(",e.slice(0,n),'){"$ORIG"})(',e.slice(n+1),")"].join(""),{filename:"enclose="+JSON.stringify(e)}).transform(new Jn(function(e){if(e instanceof g&&"$ORIG"==e.value)return i.splice(t)}))}},R),H=u("ClassInitBlock",null,{$documentation:"Value for `class` static initialization blocks"},R),Y=u("Lambda","argnames length_read rest safe_ids uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean|number/S] whether this function accesses the arguments array"},each_argname:function(e){var n=new Kn(function(t){return t instanceof Ne?(t.name.walk(n),!0):t instanceof an?(t.value.walk(n),!0):void(t instanceof yn&&e(t))});this.argnames.forEach(function(e){e.walk(n)}),this.rest&&this.rest.walk(n)},_equals:function(e){return v(this.rest,e.rest)&&v(this.name,e.name)&&v(this.value,e.value)&&d(this.argnames,e.argnames)&&d(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.name&&n.name.walk(e),n.argnames.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e),T(n,e)})},_validate:function(){if("Lambda"==this.TYPE)throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(e){rn(e,function(e){if(!(e instanceof yn))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),null!=this.rest&&rn(this.rest,function(e){if(!(e instanceof yn))throw new Error("rest must be AST_SymbolFunarg")})}},R),L=u("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(null!=this.name)throw new Error("name must be null")}},Y),U=u("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if("LambdaExpression"==this.TYPE)throw new Error("should not instantiate AST_LambdaExpression")}},Y);function V(e){return e instanceof G||e instanceof W}var G=u("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(e){var n=this;e.visit(n,function(){n.argnames.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e),n.value?n.value.walk(e):T(n,e)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(S(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},U),W=u("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(e){var n=this;e.visit(n,function(){n.argnames.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e),n.value?n.value.walk(e):T(n,e)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(S(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},U),K=u("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Sn))throw new Error("name must be AST_SymbolLambda")}},U),J=u("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Sn))throw new Error("name must be AST_SymbolLambda")}},U),X=u("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Sn))throw new Error("name must be AST_SymbolLambda")}},U),Q=u("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Sn))throw new Error("name must be AST_SymbolLambda")}},U),Z=u("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if("LambdaDefinition"==this.TYPE)throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof wn))throw new Error("name must be AST_SymbolDefun")}},Y),ee=u("AsyncDefun",null,{$documentation:"An asynchronous function definition"},Z),ne=u("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},Z),te=u("Defun",null,{$documentation:"A function definition"},Z),ie=u("GeneratorDefun",null,{$documentation:"A generator function definition"},Z),re=u("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},_equals:function(e){return v(this.name,e.name)&&v(this.extends,e.extends)&&d(this.properties,e.properties)},resolve:function(e){return e?this:this.parent_scope.resolve()},walk:function(e){var n=this;e.visit(n,function(){n.name&&n.name.walk(e),n.extends&&n.extends.walk(e),n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){if("Class"==this.TYPE)throw new Error("should not instantiate AST_Class");null!=this.extends&&S(this,"extends"),this.properties.forEach(function(e){if(!(e instanceof se))throw new Error("properties must contain AST_ClassProperty")})}},k),oe=u("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof xn))throw new Error("name must be AST_SymbolDefClass")}},re),ae=u("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof kn))throw new Error("name must be AST_SymbolClass")}},re),se=u("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node?] property name (AST_Node for computed property, null for initialization block)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},_equals:function(e){return!this.private==!e.private&&!this.static==!e.static&&v(this.key,e.key)&&v(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof p&&n.key.walk(e),n.value&&n.value.walk(e)})},_validate:function(){if("ClassProperty"==this.TYPE)throw new Error("should not instantiate AST_ClassProperty");if(this instanceof pe){if(null!=this.key)throw new Error("key must be null")}else if("string"!=typeof this.key){if(!(this.key instanceof p))throw new Error("key must be string or AST_Node");S(this,"key")}if(null!=this.value&&!(this.value instanceof p))throw new Error("value must be AST_Node")}}),fe=u("ClassField",null,{$documentation:"A `class` field",_validate:function(){null!=this.value&&S(this,"value")}},se),ce=u("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof L))throw new Error("value must be AST_Accessor")}},se),ue=u("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof L))throw new Error("value must be AST_Accessor")}},se),le=u("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof U))throw new Error("value must be AST_LambdaExpression");if(V(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of class method's lambda must be null")}},se),pe=u("ClassInit",null,{$documentation:"A `class` static initialization block",_validate:function(){if(!this.static)throw new Error("static must be true");if(!(this.value instanceof H))throw new Error("value must be AST_ClassInitBlock")},initialize:function(){this.static=!0}},se),he=u("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if("Jump"==this.TYPE)throw new Error("should not instantiate AST_Jump")}},_),de=u("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_equals:function(e){return v(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.value&&n.value.walk(e)})},_validate:function(){if("Exit"==this.TYPE)throw new Error("should not instantiate AST_Exit")}},he),ve=u("Return",null,{$documentation:"A `return` statement",_validate:function(){null!=this.value&&S(this,"value")}},de),_e=u("Throw",null,{$documentation:"A `throw` statement",_validate:function(){S(this,"value")}},de),me=u("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_equals:function(e){return v(this.label,e.label)},walk:function(e){var n=this;e.visit(n,function(){n.label&&n.label.walk(e)})},_validate:function(){if("LoopControl"==this.TYPE)throw new Error("should not instantiate AST_LoopControl");if(null!=this.label&&!(this.label instanceof On))throw new Error("label must be AST_LabelRef")}},he),ge=u("Break",null,{$documentation:"A `break` statement"},me),be=u("Continue",null,{$documentation:"A `continue` statement"},me),ye=u("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)&&v(this.alternative,e.alternative)},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e),n.alternative&&n.alternative.walk(e)})},_validate:function(){if(S(this,"condition"),null!=this.alternative&&!y(this.alternative))throw new Error("alternative must be AST_Statement")}},D),we=u("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_equals:function(e){return this.expression.equals(e.expression)&&d(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),T(n,e)})},_validate:function(){S(this,"expression"),this.body.forEach(function(e){if(!(e instanceof Se))throw new Error("body must be AST_SwitchBranch[]")})}},A),Se=u("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if("SwitchBranch"==this.TYPE)throw new Error("should not instantiate AST_SwitchBranch")}},A),xe=u("Default",null,{$documentation:"A `default` switch branch"},Se),ke=u("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_equals:function(e){return this.expression.equals(e.expression)&&d(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),T(n,e)})},_validate:function(){S(this,"expression")}},Se),Te=u("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_equals:function(e){return d(this.body,e.body)&&v(this.bcatch,e.bcatch)&&v(this.bfinally,e.bfinally)},walk:function(e){var n=this;e.visit(n,function(){T(n,e),n.bcatch&&n.bcatch.walk(e),n.bfinally&&n.bfinally.walk(e)})},_validate:function(){if(null!=this.bcatch&&!(this.bcatch instanceof Ae))throw new Error("bcatch must be AST_Catch");if(null!=this.bfinally&&!(this.bfinally instanceof Ee))throw new Error("bfinally must be AST_Finally")}},A),Ae=u("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},_equals:function(e){return v(this.argname,e.argname)&&d(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.argname&&n.argname.walk(e),T(n,e)})},_validate:function(){null!=this.argname&&rn(this.argname,function(e){if(!(e instanceof Tn))throw new Error("argname must be AST_SymbolCatch")})}},A),Ee=u("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},A),De=u("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_equals:function(e){return d(this.definitions,e.definitions)},walk:function(e){var n=this;e.visit(n,function(){n.definitions.forEach(function(n){n.walk(e)})})},_validate:function(){if("Definitions"==this.TYPE)throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},_),Oe=u("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof $e))throw new Error("definitions must be AST_VarDef[]");rn(e.name,function(e){if(!(e instanceof _n))throw new Error("name must be AST_SymbolConst")})})}},De),qe=u("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof $e))throw new Error("definitions must be AST_VarDef[]");rn(e.name,function(e){if(!(e instanceof gn))throw new Error("name must be AST_SymbolLet")})})}},De),Ce=u("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof $e))throw new Error("definitions must be AST_VarDef[]");rn(e.name,function(e){if(!(e instanceof bn))throw new Error("name must be AST_SymbolVar")})})}},De),$e=u("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_equals:function(e){return this.name.equals(e.name)&&v(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value&&n.value.walk(e)})},_validate:function(){null!=this.value&&S(this,"value")}}),Fe=u("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){if(!(this.body instanceof oe||this.body instanceof De||this.body instanceof Z))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},_),Pe=u("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){this.body instanceof oe||this.body instanceof Z||S(this,"body")}},_),je=u("ExportForeign","aliases keys path",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[AST_String*] array of aliases to export",keys:"[AST_String*] array of keys to import",path:"[AST_String] the path to import module"},_equals:function(e){return this.path.equals(e.path)&&d(this.aliases,e.aliases)&&d(this.keys,e.keys)},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(e){if(!(e instanceof zn))throw new Error("aliases must contain AST_String")}),this.keys.forEach(function(e){if(!(e instanceof zn))throw new Error("keys must contain AST_String")}),!(this.path instanceof zn))throw new Error("path must be AST_String")}},_),ze=u("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},_equals:function(e){return d(this.properties,e.properties)},walk:function(e){var n=this;e.visit(n,function(){n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof Dn))throw new Error("properties must contain AST_SymbolExport")})}},_),Me=u("Import","all default path properties",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[AST_String] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified"},_equals:function(e){return this.path.equals(e.path)&&v(this.all,e.all)&&v(this.default,e.default)&&!this.properties==!e.properties&&(!this.properties||d(this.properties,e.properties))},walk:function(e){var n=this;e.visit(n,function(){n.all&&n.all.walk(e),n.default&&n.default.walk(e),n.properties&&n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){if(null!=this.all){if(!(this.all instanceof mn))throw new Error("all must be AST_SymbolImport");if(null!=this.properties)throw new Error("cannot import both * and {} in the same statement")}if(null!=this.default){if(!(this.default instanceof mn))throw new Error("default must be AST_SymbolImport");if(""!==this.default.key.value)throw new Error("invalid default key: "+this.default.key.value)}if(!(this.path instanceof zn))throw new Error("path must be AST_String");null!=this.properties&&this.properties.forEach(function(e){if(!(e instanceof mn))throw new Error("properties must contain AST_SymbolImport")})}},_),Ne=u("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},_equals:function(e){return this.name.equals(e.name)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value.walk(e)})},_validate:function(){S(this,"value")}});function Ie(e,n,t,i){e[n].forEach(function(e){w(e,n,!0,t,i)})}var Re=u("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[boolean/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&this.expression.equals(e.expression)&&d(this.args,e.args)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.args.forEach(function(n){n.walk(e)})})},_validate:function(){S(this,"expression"),Ie(this,"args",!0)}}),Be=u("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},Re),He=u("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_equals:function(e){return d(this.expressions,e.expressions)},walk:function(e){var n=this;e.visit(n,function(){n.expressions.forEach(function(n){n.walk(e)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");Ie(this,"expressions")}});var Ye=u("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&v(this.property,e.property)&&this.expression.equals(e.expression)},get_property:function(){var e=this.property;return e instanceof jn?e.value:e instanceof We&&"void"==e.operator&&e.expression instanceof jn?void 0:e},_validate:function(){if("PropAccess"==this.TYPE)throw new Error("should not instantiate AST_PropAccess");S(this,"expression")}}),Le=u("Dot","quoted",{$documentation:"A dotted property access expression",$propdoc:{quoted:"[boolean] whether property is transformed from a quoted string"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("string"!=typeof this.property)throw new Error("property must be string")}},Ye),Ue=u("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.property.walk(e)})},_validate:function(){S(this,"property")}},Ye),Ve=u("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){S(this,"expression")}}),Ge=u("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_equals:function(e){return this.operator==e.operator&&this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("Unary"==this.TYPE)throw new Error("should not instantiate AST_Unary");if("string"!=typeof this.operator)throw new Error("operator must be string");S(this,"expression")}}),We=u("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},Ge),Ke=u("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},Ge),Je=u("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_equals:function(e){return this.operator==e.operator&&this.left.equals(e.left)&&this.right.equals(e.right)},walk:function(e){var n=this;e.visit(n,function(){n.left.walk(e),n.right.walk(e)})},_validate:function(){if(this instanceof Qe||S(this,"left"),"string"!=typeof this.operator)throw new Error("operator must be string");S(this,"right")}}),Xe=u("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_equals:function(e){return this.condition.equals(e.condition)&&this.consequent.equals(e.consequent)&&this.alternative.equals(e.alternative)},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.consequent.walk(e),n.alternative.walk(e)})},_validate:function(){S(this,"condition"),S(this,"consequent"),S(this,"alternative")}}),Qe=u("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof tn){if("="!=this.operator)throw new Error("invalid destructuring operator: "+this.operator);rn(this.left,function(e){if(!(e instanceof Ye||e instanceof En))throw new Error("left must be assignable: "+e.TYPE)})}else if(!(this.left instanceof Un||this.left instanceof Hn||this.left instanceof Ye&&!this.left.optional||this.left instanceof En||this.left instanceof Yn))throw new Error("left must be assignable")}},Je),Ze=u("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){S(this,"expression")}}),en=u("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},_equals:function(e){return!this.nested==!e.nested&&v(this.expression,e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression&&n.expression.walk(e)})},_validate:function(){if(null!=this.expression)S(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),nn=u("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_equals:function(e){return d(this.elements,e.elements)},walk:function(e){var n=this;e.visit(n,function(){n.elements.forEach(function(n){n.walk(e)})})},_validate:function(){Ie(this,"elements",!0,!0)}}),tn=u("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if("Destructured"==this.TYPE)throw new Error("should not instantiate AST_Destructured")}});function rn(e,n,t){if(e instanceof Ne&&t)return rn(e.name,n);if(e instanceof tn){if(null!=e.rest&&rn(e.rest,n),e instanceof on)return e.elements.forEach(function(e){e instanceof Ln||rn(e,n,!0)});if(e instanceof sn)return e.properties.forEach(function(e){rn(e.value,n,!0)})}n(e)}var on=u("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},_equals:function(e){return v(this.rest,e.rest)&&d(this.elements,e.elements)},walk:function(e){var n=this;e.visit(n,function(){n.elements.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e)})}},tn),an=u("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},_equals:function(e){return v(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof p&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("string"!=typeof this.key){if(!(this.key instanceof p))throw new Error("key must be string or AST_Node");S(this,"key")}if(!(this.value instanceof p))throw new Error("value must be AST_Node")}}),sn=u("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},_equals:function(e){return v(this.rest,e.rest)&&d(this.properties,e.properties)},walk:function(e){var n=this;e.visit(n,function(){n.properties.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e)})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof an))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},tn),fn=u("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},_equals:function(e){return d(this.properties,e.properties)},walk:function(e){var n=this;e.visit(n,function(){n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof cn||e instanceof Ve))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),cn=u("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},_equals:function(e){return v(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof p&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("ObjectProperty"==this.TYPE)throw new Error("should not instantiate AST_ObjectProperty");if("string"!=typeof this.key){if(!(this.key instanceof p))throw new Error("key must be string or AST_Node");S(this,"key")}if(!(this.value instanceof p))throw new Error("value must be AST_Node")}}),un=u("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){S(this,"value")}},cn),ln=u("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof U))throw new Error("value must be AST_LambdaExpression");if(V(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of object method's lambda must be null")}},un),pn=u("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof L))throw new Error("value must be AST_Accessor")}},cn),hn=u("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof L))throw new Error("value must be AST_Accessor")}},cn),dn=u("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_equals:function(e){return this.thedef?this.thedef===e.thedef:this.name==e.name},_validate:function(){if("Symbol"==this.TYPE)throw new Error("should not instantiate AST_Symbol");if("string"!=typeof this.name)throw new Error("name must be string")}}),vn=u("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},dn),_n=u("SymbolConst",null,{$documentation:"Symbol defining a constant"},vn),mn=u("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[AST_String] the original `export` name"},_equals:function(e){return this.name==e.name&&this.key.equals(e.key)},_validate:function(){if(!(this.key instanceof zn))throw new Error("key must be AST_String")}},_n),gn=u("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},vn),bn=u("SymbolVar",null,{$documentation:"Symbol defining a variable"},vn),yn=u("SymbolFunarg","unused",{$documentation:"Symbol naming a function argument"},bn),wn=u("SymbolDefun",null,{$documentation:"Symbol defining a function"},vn),Sn=u("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},vn),xn=u("SymbolDefClass",null,{$documentation:"Symbol defining a class"},_n),kn=u("SymbolClass",null,{$documentation:"Symbol naming a class expression"},_n),Tn=u("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},vn),An=u("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},dn),En=u("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},dn),Dn=u("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[AST_String] the `export` alias"},_equals:function(e){return this.name==e.name&&this.alias.equals(e.alias)},_validate:function(){if(!(this.alias instanceof zn))throw new Error("alias must be AST_String")}},En),On=u("LabelRef",null,{$documentation:"Reference to a label symbol"},dn),qn=u("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_equals:s,_validate:function(){if("ObjectIdentity"==this.TYPE)throw new Error("should not instantiate AST_ObjectIdentity")}},dn),Cn=u("Super",null,{$documentation:"The `super` symbol",_validate:function(){if("super"!==this.name)throw new Error('name must be "super"')}},qn),$n=u("This",null,{$documentation:"The `this` symbol",_validate:function(){if("This"==this.TYPE&&"this"!==this.name)throw new Error('name must be "this"')}},qn),Fn=u("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if("new.target"!==this.name)throw new Error('name must be "new.target": '+this.name)}},$n),Pn=u("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node?] tag function, or null if absent"},_equals:function(e){return v(this.tag,e.tag)&&(t=this.strings,i=e.strings,t.length==i.length&&n(t,function(e,n){return e==i[n]}))&&d(this.expressions,e.expressions);var t,i},walk:function(e){var n=this;e.visit(n,function(){n.tag&&n.tag.walk(e),n.expressions.forEach(function(n){n.walk(e)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");Ie(this,"expressions"),this.strings.forEach(function(e){if("string"!=typeof e)throw new Error("strings must contain string")}),null!=this.tag&&S(this,"tag")}}),jn=u("Constant",null,{$documentation:"Base class for all constants",_equals:function(e){return this.value===e.value},_validate:function(){if("Constant"==this.TYPE)throw new Error("should not instantiate AST_Constant")}}),zn=u("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},jn),Mn=u("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if("number"!=typeof this.value)throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},jn),Nn=u("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if("string"!=typeof this.value)throw new Error("value must be string");if("-"==this.value[0])throw new Error("value cannot be negative")}},jn),In=u("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_equals:function(e){return""+this.value==""+e.value},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},jn),Rn=u("Atom",null,{$documentation:"Base class for atoms",_equals:s,_validate:function(){if("Atom"==this.TYPE)throw new Error("should not instantiate AST_Atom")}},jn),Bn=u("Null",null,{$documentation:"The `null` atom",value:null},Rn),Hn=u("NaN",null,{$documentation:"The impossible value",value:NaN},Rn),Yn=u("Undefined",null,{$documentation:"The `undefined` value",value:void 0},Rn),Ln=u("Hole",null,{$documentation:"A hole in an array",value:void 0},Rn),Un=u("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},Rn),Vn=u("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if("Boolean"==this.TYPE)throw new Error("should not instantiate AST_Boolean")}},Rn),Gn=u("False",null,{$documentation:"The `false` atom",value:!1},Vn),Wn=u("True",null,{$documentation:"The `true` atom",value:!0},Vn);function Kn(e){this.callback=e,this.directives=Object.create(null),this.stack=[]}function Jn(e,n){Kn.call(this),this.before=e,this.after=n}return Kn.prototype={visit:function(e,n){this.push(e);var t=this.callback(e,n||o);!t&&n&&n(),this.pop()},parent:function(e){return this.stack[this.stack.length-2-(e||0)]},push:function(e){var n;e instanceof re?(this.directives=Object.create(this.directives),n="use strict"):e instanceof g?n=e.value:e instanceof Y&&(this.directives=Object.create(this.directives)),n&&!this.directives[n]&&(this.directives[n]=e),this.stack.push(e)},pop:function(){var e=this.stack.pop();(e instanceof re||e instanceof Y)&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(e){for(var n=this.stack,t=n.length-1;--t>=0;){var i=n[t];if(i instanceof e)return i}},has_directive:function(e){var n=this.directives[e];if(n)return n;var t=this.stack[this.stack.length-1];if(t instanceof R)for(var i=0;i<t.body.length;++i){var r=t.body[i];if(!(r instanceof g))break;if(r.value==e)return r}},loopcontrol_target:function(e){var n=this.stack;if(e.label)for(var t=n.length;--t>=0;){var i=n[t];if(i instanceof O&&i.label.name==e.label.name)return i.body}else for(var t=n.length;--t>=0;){var i=n[t];if(i instanceof q||e instanceof ge&&i instanceof we)return i}},in_boolean_context:function(){for(var e,n=!0,t=0,i=this.self();e=this.parent(t++);i=e){if(e instanceof Je)switch(e.operator){case"&&":case"||":e.left===i&&(n=!1);continue;default:return!1}if(!(e instanceof Xe)){if(e instanceof C)return e.condition===i;if(e instanceof P)return e.condition===i;if(e instanceof ye)return e.condition===i;if(e instanceof ve){if(e.in_bool)return!0;for(;e=this.parent(t++);)if(e instanceof Y){if(e.name)return!1;if("Call"!=(e=this.parent(t++)).TYPE)return!1;break}}if(e instanceof He){if(e.tail_node()===i)continue;return!n||"d"}return e instanceof x?!n||"d":e instanceof We&&"!"==e.operator}if(e.condition===i)return!0}}},Jn.prototype=new Kn,function(e){function n(e,n){return i(e,function(e){return e.transform(n,!0)})}function t(e,t){e.argnames=n(e.argnames,t),e.rest&&(e.rest=e.rest.transform(t)),e.value?e.value=e.value.transform(t):e.body=n(e.body,t)}e(p,o),e(O,function(e,n){e.label=e.label.transform(n),e.body=e.body.transform(n)}),e(x,function(e,n){e.body=e.body.transform(n)}),e(A,function(e,t){e.body=n(e.body,t)}),e($,function(e,n){e.body=e.body.transform(n),e.condition=e.condition.transform(n)}),e(F,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n)}),e(P,function(e,n){e.init&&(e.init=e.init.transform(n)),e.condition&&(e.condition=e.condition.transform(n)),e.step&&(e.step=e.step.transform(n)),e.body=e.body.transform(n)}),e(j,function(e,n){e.init=e.init.transform(n),e.object=e.object.transform(n),e.body=e.body.transform(n)}),e(I,function(e,n){e.expression=e.expression.transform(n),e.body=e.body.transform(n)}),e(de,function(e,n){e.value&&(e.value=e.value.transform(n))}),e(me,function(e,n){e.label&&(e.label=e.label.transform(n))}),e(ye,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n),e.alternative&&(e.alternative=e.alternative.transform(n))}),e(we,function(e,t){e.expression=e.expression.transform(t),e.body=n(e.body,t)}),e(ke,function(e,t){e.expression=e.expression.transform(t),e.body=n(e.body,t)}),e(Te,function(e,t){e.body=n(e.body,t),e.bcatch&&(e.bcatch=e.bcatch.transform(t)),e.bfinally&&(e.bfinally=e.bfinally.transform(t))}),e(Ae,function(e,t){e.argname&&(e.argname=e.argname.transform(t)),e.body=n(e.body,t)}),e(De,function(e,t){e.definitions=n(e.definitions,t)}),e($e,function(e,n){e.name=e.name.transform(n),e.value&&(e.value=e.value.transform(n))}),e(Ne,function(e,n){e.name=e.name.transform(n),e.value=e.value.transform(n)}),e(Y,function(e,t){e.name&&(e.name=e.name.transform(t)),e.argnames=n(e.argnames,t),e.rest&&(e.rest=e.rest.transform(t)),e.body=n(e.body,t)}),e(G,t),e(W,t),e(re,function(e,t){e.name&&(e.name=e.name.transform(t)),e.extends&&(e.extends=e.extends.transform(t)),e.properties=n(e.properties,t)}),e(se,function(e,n){e.key instanceof p&&(e.key=e.key.transform(n)),e.value&&(e.value=e.value.transform(n))}),e(Re,function(e,t){e.expression=e.expression.transform(t),e.args=n(e.args,t)}),e(He,function(e,t){e.expressions=n(e.expressions,t)}),e(Ze,function(e,n){e.expression=e.expression.transform(n)}),e(en,function(e,n){e.expression&&(e.expression=e.expression.transform(n))}),e(Le,function(e,n){e.expression=e.expression.transform(n)}),e(Ue,function(e,n){e.expression=e.expression.transform(n),e.property=e.property.transform(n)}),e(Ve,function(e,n){e.expression=e.expression.transform(n)}),e(Ge,function(e,n){e.expression=e.expression.transform(n)}),e(Je,function(e,n){e.left=e.left.transform(n),e.right=e.right.transform(n)}),e(Xe,function(e,n){e.condition=e.condition.transform(n),e.consequent=e.consequent.transform(n),e.alternative=e.alternative.transform(n)}),e(nn,function(e,t){e.elements=n(e.elements,t)}),e(on,function(e,t){e.elements=n(e.elements,t),e.rest&&(e.rest=e.rest.transform(t))}),e(an,function(e,n){e.key instanceof p&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),e(sn,function(e,t){e.properties=n(e.properties,t),e.rest&&(e.rest=e.rest.transform(t))}),e(fn,function(e,t){e.properties=n(e.properties,t)}),e(cn,function(e,n){e.key instanceof p&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),e(Fe,function(e,n){e.body=e.body.transform(n)}),e(Pe,function(e,n){e.body=e.body.transform(n)}),e(ze,function(e,t){e.properties=n(e.properties,t)}),e(Me,function(e,t){e.all&&(e.all=e.all.transform(t)),e.default&&(e.default=e.default.transform(t)),e.properties&&(e.properties=n(e.properties,t))}),e(Pn,function(e,t){e.tag&&(e.tag=e.tag.transform(t)),e.expressions=n(e.expressions,t)})}(function(e,n){e.DEFMETHOD("transform",function(e,t){var i,r;return e.push(this),e.before&&(i=e.before(this,n,t)),void 0===i&&(n(i=this,e),e.after&&void 0!==(r=e.after(i,t))&&(i=r)),e.pop(),i})}),c={parse:null,DEFNODE:u,AST_Token:l,AST_Node:p,AST_Statement:_,AST_Debugger:m,AST_Directive:g,AST_EmptyStatement:b,AST_SimpleStatement:x,AST_BlockScope:k,AST_Block:A,AST_BlockStatement:E,AST_StatementWithBody:D,AST_LabeledStatement:O,AST_IterationStatement:q,AST_DWLoop:C,AST_Do:$,AST_While:F,AST_For:P,AST_ForEnumeration:j,AST_ForIn:z,AST_ForOf:M,AST_ForAwaitOf:N,AST_With:I,AST_Scope:R,AST_Toplevel:B,AST_ClassInitBlock:H,AST_Lambda:Y,AST_Accessor:L,AST_LambdaExpression:U,AST_Arrow:G,AST_AsyncArrow:W,AST_AsyncFunction:K,AST_Function:X,AST_GeneratorFunction:Q,AST_AsyncGeneratorFunction:J,AST_LambdaDefinition:Z,AST_AsyncDefun:ee,AST_AsyncGeneratorDefun:ne,AST_Defun:te,AST_GeneratorDefun:ie,AST_Class:re,AST_DefClass:oe,AST_ClassExpression:ae,AST_ClassProperty:se,AST_ClassField:fe,AST_ClassGetter:ce,AST_ClassSetter:ue,AST_ClassMethod:le,AST_ClassInit:pe,AST_Jump:he,AST_Exit:de,AST_Return:ve,AST_Throw:_e,AST_LoopControl:me,AST_Break:ge,AST_Continue:be,AST_If:ye,AST_Switch:we,AST_SwitchBranch:Se,AST_Default:xe,AST_Case:ke,AST_Try:Te,AST_Catch:Ae,AST_Finally:Ee,AST_Definitions:De,AST_Const:Oe,AST_Let:qe,AST_Var:Ce,AST_VarDef:$e,AST_ExportDeclaration:Fe,AST_ExportDefault:Pe,AST_ExportForeign:je,AST_ExportReferences:ze,AST_Import:Me,AST_DefaultValue:Ne,AST_Call:Re,AST_New:Be,AST_Sequence:He,AST_PropAccess:Ye,AST_Dot:Le,AST_Sub:Ue,AST_Spread:Ve,AST_Unary:Ge,AST_UnaryPrefix:We,AST_UnaryPostfix:Ke,AST_Binary:Je,AST_Conditional:Xe,AST_Assign:Qe,AST_Await:Ze,AST_Yield:en,AST_Array:nn,AST_Destructured:tn,AST_DestructuredArray:on,AST_DestructuredKeyVal:an,AST_DestructuredObject:sn,AST_Object:fn,AST_ObjectProperty:cn,AST_ObjectKeyVal:un,AST_ObjectMethod:ln,AST_ObjectSetter:pn,AST_ObjectGetter:hn,AST_Symbol:dn,AST_SymbolDeclaration:vn,AST_SymbolConst:_n,AST_SymbolImport:mn,AST_SymbolLet:gn,AST_SymbolVar:bn,AST_SymbolFunarg:yn,AST_SymbolDefun:wn,AST_SymbolLambda:Sn,AST_SymbolDefClass:xn,AST_SymbolClass:kn,AST_SymbolCatch:Tn,AST_Label:An,AST_SymbolRef:En,AST_SymbolExport:Dn,AST_LabelRef:On,AST_ObjectIdentity:qn,AST_Super:Cn,AST_This:$n,AST_NewTarget:Fn,AST_Template:Pn,AST_Constant:jn,AST_String:zn,AST_Number:Mn,AST_BigInt:Nn,AST_RegExp:In,AST_Atom:Rn,AST_Null:Bn,AST_NaN:Hn,AST_Undefined:Yn,AST_Hole:Ln,AST_Infinity:Un,AST_Boolean:Vn,AST_False:Gn,AST_True:Wn,first_in_statement:function(e,n,t){for(var i,r=e.parent(-1),o=0;i=e.parent(o++);r=i){if(V(i))return n&&i.value===r;if(i instanceof Je){if(i.left===r)continue}else if("Call"==i.TYPE){if(i.expression===r)continue}else if(i instanceof Xe){if(i.condition===r)continue}else{if(i instanceof Pe)return t;if(i instanceof Ye){if(i.expression===r)continue}else if(i instanceof He){if(i.expressions[0]===r)continue}else{if(i instanceof x)return!0;if(i instanceof Pn){if(i.tag===r)continue}else if(i instanceof Ke&&i.expression===r)continue}}return!1}},root_expr:function(e){for(;e instanceof Ye;)e=e.expression;return e},is_arrow:V,is_generator:function(e){return e instanceof ne||e instanceof J||e instanceof ie||e instanceof Q},walk_lambda:function(e,n){V(e)&&e.value?e.value.walk(n):T(e,n)},walk_body:T,is_statement:y,is_async:function(e){return e instanceof W||e instanceof ee||e instanceof K||e instanceof ne||e instanceof J},TreeWalker:Kn,TreeTransformer:Jn}}),e("skylark-uglifyjs/parse",["./utils","./ast"],function(e,n){"use strict";const{characters:t,defaults:i,find_if:r,makePredicate:o,set_annotation:a,configure_error_stack:s,HOP:f,all:c}=e,{AST_Accessor:u,AST_Array:l,AST_Arrow:p,AST_Assign:h,AST_Await:d,AST_BigInt:v,AST_Binary:_,AST_BlockStatement:m,AST_Break:g,AST_Call:b,AST_Case:y,AST_Catch:w,AST_Chain:S,AST_ClassExpression:x,AST_ClassGetter:k,AST_ClassInit:T,AST_ClassMethod:A,AST_ClassPrivateProperty:E,AST_ClassProperty:D,AST_ClassStaticBlock:O,AST_ClassSetter:q,AST_ConciseMethod:C,AST_PrivateIn:$,AST_PrivateGetter:F,AST_PrivateMethod:P,AST_PrivateSetter:j,AST_Conditional:z,AST_Const:M,AST_Continue:N,AST_Debugger:I,AST_Default:R,AST_DefaultAssign:B,AST_DefaultValue:H,AST_DefClass:Y,AST_Definitions:L,AST_Defun:U,AST_Destructured:V,AST_DestructuredArray:G,AST_DestructuredKeyVal:W,AST_DestructuredObject:K,AST_Destructuring:J,AST_Directive:X,AST_Do:Q,AST_Dot:Z,AST_DotHash:ee,AST_EmptyStatement:ne,AST_Expansion:te,AST_Export:ie,AST_ExportDeclaration:re,AST_False:oe,AST_Finally:ae,AST_For:se,AST_ForIn:fe,AST_ForOf:ce,AST_Function:ue,AST_Hole:le,AST_If:pe,AST_Import:he,AST_ImportMeta:de,AST_IterationStatement:ve,AST_Label:_e,AST_LabeledStatement:me,AST_LabelRef:ge,AST_Let:be,AST_NameMapping:ye,AST_New:we,AST_NewTarget:Se,AST_Node:xe,AST_Null:ke,AST_Number:Te,AST_Object:Ae,AST_ObjectGetter:Ee,AST_ObjectKeyVal:De,AST_ObjectMethod:Oe,AST_ObjectProperty:qe,AST_ObjectSetter:Ce,AST_PrefixedTemplateString:$e,AST_PropAccess:Fe,AST_RegExp:Pe,AST_Return:je,AST_Sequence:ze,AST_SimpleStatement:Me,AST_Spread:Ne,AST_String:Ie,AST_Sub:Re,AST_Super:Be,AST_Switch:He,AST_SymbolCatch:Ye,AST_SymbolClass:Le,AST_SymbolClassProperty:Ue,AST_SymbolConst:Ve,AST_SymbolDeclaration:Ge,AST_SymbolDefClass:We,AST_SymbolDefun:Ke,AST_SymbolExport:Je,AST_SymbolExportForeign:Xe,AST_SymbolFunarg:Qe,AST_SymbolImport:Ze,AST_SymbolImportForeign:en,AST_SymbolLambda:nn,AST_SymbolLet:tn,AST_SymbolMethod:rn,AST_SymbolRef:on,AST_SymbolVar:an,AST_Template:sn,AST_TemplateSegment:fn,AST_TemplateString:cn,AST_This:un,AST_SymbolPrivateProperty:ln,AST_Throw:pn,AST_Token:hn,AST_Toplevel:dn,AST_True:vn,AST_Try:_n,AST_TryBlock:mn,AST_UnaryPostfix:gn,AST_UnaryPrefix:bn,AST_Var:yn,AST_VarDef:wn,AST_While:Sn,AST_With:xn,AST_Yield:kn,_INLINE:Tn,_NOINLINE:An,_PURE:En,_KEY:Dn,_MANGLEPROP:On}=n;var qn="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with",Cn="false null true",$n=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",Cn,qn].join(" "),Fn="return new delete throw else case";qn=o(qn),$n=o($n),Fn=o(Fn),Cn=o(Cn);var Pn=/^0b([01]+)$/i,jn=/^0x([0-9a-f]+)$/i,zn=/^0o?([0-7]+)$/i,Mn=o(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),Nn="\n\r\u2028\u2029",In="+-*&%=<>!?|~^",Rn=",;:)}]",Bn="[{(,;:",Hn=Bn+"`)}]",Yn=Nn+"  \t\f\v​             　\ufeff",Ln=o(t("./'\"#"+In+Hn+Yn));function Un(e){return e>=48&&e<=57}function Vn(e){return!Ln[e]}function Gn(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function Wn(e,n,t,i,r){this.message=e,this.filename=n,this.line=t,this.col=i,this.pos=r}function Kn(e,n,t,i,r){throw new Wn(e,n,t,i,r)}function Jn(e,n,t){return e.type==n&&(null==t||e.value==t)}Nn=o(t(Nn)),In=o(t(In)),Rn=o(t(Rn)),Bn=o(t(Bn)),Hn=o(t(Hn)),Yn=o(t(Yn)),Wn.prototype=Object.create(Error.prototype),Wn.prototype.constructor=Wn,Wn.prototype.name="SyntaxError",s(Wn);var Xn={};function Qn(e,n,t,i){var r={text:e,filename:n,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:Object.create(null),read_template:A("Unterminated template literal",function(e){for(var n="";;){var t=i();switch(t){case"\\":t+=i();break;case"`":return void e.push(n);case"$":if("{"==a())return s(),e.push(n),r.regex_allowed=!0,!0}n+=t}function i(){var e=s(!0,!0);return"\r"==e?"\n":e}})},o=!1;function a(){return r.text.charAt(r.pos)}function s(e,n){var t=r.text.charAt(r.pos++);if(e&&!t)throw Xn;return Nn[t]?(r.col=0,r.line++,n||(r.newline_before=!0),"\r"==t&&"\n"==a()&&(r.pos++,t="\n")):r.col++,t}function f(e){for(;e-- >0;)s()}function c(e){return r.text.substr(r.pos,e.length)==e}function u(){r.tokline=r.line,r.tokcol=r.col,r.tokpos=r.pos}function l(t,i,a){r.regex_allowed="operator"==t&&!et[i]||"keyword"==t&&Fn[i]||"punc"==t&&Bn[i],"punc"==t&&"."==i?o=!0:a||(o=!1);var s={type:t,value:i,line:r.tokline,col:r.tokcol,pos:r.tokpos,endline:r.line,endcol:r.col,endpos:r.pos,nlb:r.newline_before,file:n};return/^(?:num|string|regexp)$/i.test(t)&&(s.raw=e.substring(s.pos,s.endpos)),a||(s.comments_before=r.comments_before,s.comments_after=r.comments_before=[]),r.newline_before=!1,new hn(s)}function p(){for(;Yn[a()];)s()}function h(e){Kn(e,n,r.tokline,r.tokcol,r.tokpos)}function d(e){return/^0[0-7_]+$/.test(e)}function v(e){var n=!1,t=!1,i=!1,r="."==e,o=function(e){var n,t="";for(;(n=a())&&e(n,t);)t+=s();return t}(function(e,o){switch(e){case"x":case"X":return!i&&(i=!0);case"e":case"E":return!!i||!n&&(n=t=!0);case"+":case"-":return t;case t=!1,".":return!(r||n||i||d(o))&&(r=!0)}return/[_0-9a-dfo]/i.test(e)});e&&(o=e+o),d(o)?E.has_directive("use strict")&&h("Legacy octal literals are not allowed in strict mode"):o=o.replace(i?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1");var f=function(e){var n;if(n=Pn.exec(e))return parseInt(n[1],2);if(n=jn.exec(e))return parseInt(n[1],16);if(n=zn.exec(e))return parseInt(n[1],8);var t=parseFloat(e);if(t==e)return t}(o);return isNaN(f)&&h("Invalid syntax: "+o),r||n||"n"!=a()?l("num",f):l("bigint",o.toLowerCase()+s())}function _(e){var n=s(!0,e);if(n>="0"&&n<="7")return function(e){var n=a();n>="0"&&n<="7"&&(e+=s(!0))[0]<="3"&&(n=a())>="0"&&n<="7"&&(e+=s(!0));if("0"===e)return"\0";e.length>0&&E.has_directive("use strict")&&h("Legacy octal escape sequences are not allowed in strict mode");return String.fromCharCode(parseInt(e,8))}(n);if("u"==n){var t=s(!0,e);if(n+=t,"{"!=t)n+=s(!0,e)+s(!0,e)+s(!0,e);else do{t=s(!0,e),n+=t}while("}"!=t)}else"x"==n&&(n+=s(!0,e)+s(!0,e));var i=function(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":var n;if("{"==e[1]&&"}"==e.slice(-1))n=e.slice(2,-1);else{if(5!=e.length)return;n=e.slice(1)}var t=parseInt(n,16);if(t<0||isNaN(t))return;if(t<65536)return String.fromCharCode(t);if(t>1114111)return;return String.fromCharCode(55232+(t>>10))+String.fromCharCode(56320+(1023&t));case"v":return"\v";case"x":if(3!=e.length)return;var t=parseInt(e.slice(1),16);if(t<0||isNaN(t))return;return String.fromCharCode(t);case"\r":case"\n":return"";default:if("0"==e)return"\0";if(e[0]>="0"&&e[0]<="9")return;return e}}(n);return"string"!=typeof i&&h("Invalid escape sequence: \\"+n),i}var m=A("Unterminated string constant",function(e){for(var n=s(),t="";;){var i=s(!0,!0);if("\\"==i)i=_(!0);else if(Nn[i])h("Unterminated string constant");else if(i==n)break;t+=i}var r=l("string",t);return r.quote=e,r});function g(e){var n,t=r.regex_allowed,i=function(){for(var e=r.text,n=r.pos;n<r.text.length;++n)if(Nn[e[n]])return n;return-1}();return-1==i?(n=r.text.substr(r.pos),r.pos=r.text.length):(n=r.text.substring(r.pos,i),r.pos=i),r.col=r.tokcol+(r.pos-r.tokpos),r.comments_before.push(l(e,n,!0)),r.regex_allowed=t,E}var b=A("Unterminated multiline comment",function(){var e=r.regex_allowed,n=function(e,n){var t=r.text.indexOf(e,r.pos);if(n&&-1==t)throw Xn;return t}("*/",!0),t=r.text.substring(r.pos,n).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return f(t.length+2),r.comments_before.push(l("comment2",t,!0)),r.regex_allowed=e,E});function y(){for(var e,n=!1,t=!1,i="#"==a()?s():"";e=a();)if(n)"u"!=e&&h("Expecting UnicodeEscapeSequence -- uXXXX"),Vn(e=_())||h("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),i+=e,n=!1;else if("\\"==e)t=n=!0,s();else{if(!Vn(e))break;i+=s()}if(qn[i]&&t){var r=i.charCodeAt(0).toString(16).toUpperCase();i="\\u"+"0000".substr(r.length)+r+i.slice(1)}return i}var w=A("Unterminated regular expression",function(e){for(var n,t=!1,i=!1;n=s(!0);)if(Nn[n])h("Unexpected line terminator");else if(t)e+="\\"+n,t=!1;else if("["==n)i=!0,e+=n;else if("]"==n&&i)i=!1,e+=n;else{if("/"==n&&!i)break;"\\"==n?t=!0:e+=n}var r=y();try{var o=new RegExp(e,r);return o.raw_source=e,l("regexp",o)}catch(e){h(e.message)}});function S(e){return l("operator",function e(n){if(!a())return n;var t=n+a();return Mn[t]?(s(),e(t)):n}(e||s()))}function x(){switch(s(),a()){case"/":return s(),g("comment1");case"*":return s(),b()}return r.regex_allowed?w(""):S("/")}function k(){return s(),c("..")?l("operator","."+s()+s()):Un(a().charCodeAt(0))?v("."):l("punc",".")}function T(){var e=y();return o?l("name",e):Cn[e]?l("atom",e):qn[e]?Mn[e]?l("operator",e):l("keyword",e):l("name",e)}function A(e,n){return function(t){try{return n(t)}catch(n){if(n!==Xn)throw n;h(e)}}}function E(e){if(null!=e)return w(e);for(i&&0==r.pos&&c("#!")&&(u(),f(2),g("comment5"));;){if(p(),u(),t){if(c("\x3c!--")){f(4),g("comment3");continue}if(c("--\x3e")&&r.newline_before){f(3),g("comment4");continue}}var n=a();if(!n)return l("eof");var o=n.charCodeAt(0);switch(o){case 34:case 39:return m(n);case 46:return k();case 47:var d=x();if(d===E)continue;return d}if(Un(o))return v();if(Hn[n])return l("punc",s());if(c("=>"))return l("punc",s()+s());if(In[n])return S();if(35==o||92==o||!Ln[n])return T();break}h("Unexpected character '"+n+"'")}return E.context=function(e){return e&&(r=e),r},E.add_directive=function(e){r.directives[e]=!0},E.push_directives_stack=function(){r.directives=Object.create(r.directives)},E.pop_directives_stack=function(){r.directives=Object.getPrototypeOf(r.directives)},E.has_directive=function(e){return!!r.directives[e]},E}var Zn=o("typeof void delete -- ++ ! ~ - +"),et=o("-- ++"),nt=o("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),tt=function(e,n){for(var t=0;t<e.length;)for(var i=e[t++],r=0;r<i.length;r++)n[i[r]]=t;return n}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),it=o("atom bigint num regexp string");function rt(e,n){n=i(n,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var t={input:"string"==typeof e?Qn(e,n.filename,n.html5_comments,n.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function o(e,n){return Jn(t.token,e,n)}function a(){return t.peeked||(t.peeked=t.input())}function s(){return t.prev=t.token,t.peeked?(t.token=t.peeked,t.peeked=null):t.token=t.input(),t.in_directives=t.in_directives&&("string"==t.token.type||o("punc",";")),t.token}function S(){return t.prev}function E(e,n,i,r){var o=t.input.context();Kn(e,o.filename,null!=n?n:o.tokline,null!=i?i:o.tokcol,null!=r?r:o.tokpos)}function D(e,n){E(n,e.line,e.col)}function O(e,n){return e+(void 0===n?"":" «"+n+"»")}function C(e){null==e&&(e=t.token),D(e,"Unexpected token: "+O(e.type,e.value))}function $(e,n){if(o(e,n))return s();D(t.token,"Unexpected token: "+O(t.token.type,t.token.value)+", expected: "+O(e,n))}function F(e){return $("punc",e)}function P(e){return e.nlb||!c(e.comments_before,function(e){return!e.nlb})}function j(){return!n.strict&&(o("eof")||o("punc","}")||P(t.token))}function B(e){o("punc",";")?s():e||j()||F(";")}function J(){F("(");var e=ft();return F(")"),e}function ee(e){return function(){var n=t.token,i=e.apply(null,arguments),r=S();return i.start=n,i.end=r,i}}function te(){(o("operator","/")||o("operator","/="))&&(t.peeked=null,t.token=t.input(t.token.value.substr(1)))}t.token=s();var ie=ee(function(e){switch(te(),t.token.type){case"string":var i=t.in_directives,r=ft();if(i)if(r instanceof Ie){var f=r.start.raw.slice(1,-1);t.input.add_directive(f),r.value=f}else t.in_directives=i=!1;return B(),i?new X(r):new Me({body:r});case"num":case"bigint":case"regexp":case"operator":case"atom":return de();case"name":switch(t.token.value){case"async":if(Jn(a(),"keyword","function"))return s(),s(),o("operator","*")?(s(),Xe(AST_AsyncGeneratorDefun)):Xe(AST_AsyncDefun);break;case"await":if(t.in_async)return de();break;case"export":return e||""===n.module||C(),s(),function(){if(o("operator","*")){var e=t.token,n=e;return s(),o("name","as")&&(s(),en()||$("name"),n=t.token,s()),$("name","from"),new AST_ExportForeign({aliases:[rn(n)],keys:[rn(e)],path:fn()})}if(o("punc","{")){s();for(var i=[],r=[];en();){var e=t.token;s(),r.push(e),o("name","as")?(s(),en()||$("name"),i.push(t.token),s()):i.push(e),o("punc","}")||F(",")}return F("}"),o("name","from")?(s(),new AST_ExportForeign({aliases:i.map(rn),keys:r.map(rn),path:fn()})):(B(),new AST_ExportReferences({properties:r.map(function(e,n){Jn(e,"name")||D(e,"Name expected");var t=Nn(Je,e);return t.alias=rn(i[n]),t})}))}if(o("keyword","default")){s();var f=t.token,c=function(){if(o("name","async")){if(!Jn(a(),"keyword","function"))return;return s(),s(),o("operator","*")?(s(),cn(AST_AsyncGeneratorDefun,Xe(AST_AsyncGeneratorFunction))):cn(AST_AsyncDefun,Xe(AST_AsyncFunction))}if(o("keyword"))switch(t.token.value){case"class":return s(),cn(Y,qe(x));case"function":return s(),o("operator","*")?(s(),cn(AST_GeneratorDefun,Xe(AST_GeneratorFunction))):cn(U,Xe(ue))}}();return c?(c.start=f,c.end=S()):(te(),c=ft(),B()),new AST_ExportDefault({body:c})}return new re({body:ln()})}();case"import":var u=a();if("punc"==u.type&&/^[(.]$/.test(u.value))break;return e||""===n.module||C(),s(),function(){var e,n=null,i=Bn(Ze,!0),r=null;i?(i.key=new Ie({start:i.start,value:"",end:i.end}),(e=o("punc",","))&&s()):e=!o("string");if(e)if(o("operator","*")){var f=t.token;s(),$("name","as"),(n=Bn(Ze)).key=rn(f)}else{for(F("{"),r=[];en();){var c;if(Jn(a(),"name","as")){var f=t.token;s(),s(),(c=Bn(Ze)).key=rn(f)}else(c=Bn(Ze)).key=new Ie({start:c.start,value:c.name,end:c.end});r.push(c),o("punc","}")||F(",")}F("}")}(n||i||r)&&$("name","from");return new he({all:n,default:i,path:fn(),properties:r})}();case"let":if(An()){s();var l=Dn();return B(),l}break;case"yield":if(t.in_generator)return de()}return Jn(a(),"punc",":")?function(){var e=Bn(_e);c(t.labels,function(n){return n.name!=e.name})||E("Label "+e.name+" defined twice");F(":"),t.labels.push(e);var n=ie();t.labels.pop(),n instanceof ve||e.references.forEach(function(n){n instanceof N&&D(n.label.start,"Continue label `"+e.name+"` must refer to IterationStatement")});return new me({body:n,label:e})}():de();case"punc":switch(t.token.value){case"{":return new m({start:t.token,body:hn(),end:S()});case"[":case"(":case"`":return de();case";":return t.in_directives=!1,s(),new ne;default:C()}case"keyword":switch(t.token.value){case"break":return s(),ye(g);case"class":return s(),qe(Y);case"const":s();var l=En();return B(),l;case"continue":return s(),ye(N);case"debugger":return s(),B(),new I;case"do":s();var r=ct(ie);$("keyword","while");var p=J();return B(!0),new Q({body:r,condition:p});case"while":return s(),new Sn({condition:J(),body:ct(ie)});case"for":return s(),function(){var e=o("name","await")&&s();F("(");var n=null;if(e||!o("punc",";")){var t;if(n=o("keyword","const")?(s(),En(!0)):o("name","let")&&An()?(s(),Dn(!0)):o("keyword","var")?(s(),On(!0)):ft(!0),e?($("name","of"),t=AST_ForAwaitOf):o("operator","in")?(s(),t=fe):o("name","of")&&(s(),t=ce),t)return n instanceof L?(n.definitions.length>1&&D(n.start,"Only one variable declaration allowed in for..in/of loop"),t!==fe&&n.definitions[0].value&&D(n.definitions[0].value.start,"No initializers allowed in for..of loop")):ot(n)||(n=at(n))instanceof V||D(n.start,"Invalid left-hand side in for..in/of loop"),function(e,n){te();var t=ft();return F(")"),new e({init:n,object:t,body:ct(ie)})}(t,n)}return function(e){F(";");var n=o("punc",";")?null:ft();F(";");var t=o("punc",")")?null:ft();return F(")"),new se({init:e,condition:n,step:t,body:ct(ie)})}(n)}();case"function":return s(),o("operator","*")?(s(),Xe(AST_GeneratorDefun)):Xe(U);case"if":return s(),function(){var e=J(),n=ie(),t=null;o("keyword","else")&&(s(),t=ie());return new pe({condition:e,body:n,alternative:t})}();case"return":0!=t.in_function||n.bare_returns||E("'return' outside of function"),s();var f=null;return o("punc",";")?s():j()||(f=ft(),B()),new je({value:f});case"switch":return s(),new He({expression:J(),body:ct(mn)});case"throw":s(),P(t.token)&&E("Illegal newline after 'throw'");var f=ft();return B(),new pn({value:f});case"try":return s(),function(){var e=hn(),n=null,i=null;if(o("keyword","catch")){var r=t.token;s();var a=null;o("punc","(")&&(s(),a=Hn(Ye),F(")")),n=new w({start:r,argname:a,body:hn(),end:S()})}if(o("keyword","finally")){var r=t.token;s(),i=new ae({start:r,body:hn(),end:S()})}n||i||E("Missing catch/finally blocks");return new _n({body:e,bcatch:n,bfinally:i})}();case"var":s();var l=On();return B(),l;case"with":return t.input.has_directive("use strict")&&E("Strict mode may not include a with statement"),s(),new xn({expression:J(),body:ie()})}}C()});function de(){var e=ft();return B(),new Me({body:e})}function ye(e){var n,i=null;j()||(i=Bn(ge,!0)),null!=i?((n=r(function(e){return e.name==i.name},t.labels))||D(i.start,"Undefined label "+i.name),i.thedef=n):0==t.in_loop&&E(e.TYPE+" not inside a loop or switch"),B();var o=new e({label:i});return n&&n.references.push(o),o}function xe(e,n){if(o("name",e)){var t=a();if(t&&!Jn(t,"operator","=")&&!("punc"==t.type&&/^[(;}]$/.test(t.value)||n&&P(t)))return s()}}function qe(e){var n,i=t.in_async,r=t.in_generator;t.input.push_directives_stack(),t.input.add_directive("use strict"),n=e===Y?Bn(We):Bn(Le,!0);var a=null;o("keyword","extends")&&(s(),te(),a=Cn(!0)),F("{");for(var f=[];!o("punc","}");)if(o("punc",";"))s();else{var c=t.token,u=!!xe("static"),l=xe("async",!0);if(o("operator","*")){s();var p=o("name")&&/^#/.test(t.token.value),h=zn(),d=t.token,v=Xe(l?AST_AsyncGeneratorFunction:AST_GeneratorFunction);v.start=d,v.end=S(),f.push(new A({start:c,static:u,private:p,key:h,value:v,end:S()}))}else if(u&&o("punc","{"))f.push(new T({start:c,value:new AST_ClassInitBlock({start:c,body:hn(),end:S()}),end:S()}));else{var p=o("name")&&/^#/.test(t.token.value),h=zn();if(o("punc","(")){var _=t.token,m=Xe(l?AST_AsyncFunction:ue);m.start=_,m.end=S(),f.push(new A({start:c,static:u,private:p,key:h,value:m,end:S()}))}else{l&&C(l);var g=null;if(o("operator","="))s(),t.in_async=!1,t.in_generator=!1,g=st(),t.in_generator=r,t.in_async=i;else if(!o("punc",";")&&!o("punc","}")){var b=null;switch(h){case"get":b=k;break;case"set":b=q}if(b){f.push(new b({start:c,static:u,private:o("name")&&/^#/.test(t.token.value),key:zn(),value:Pn(),end:S()}));continue}}B(),f.push(new AST_ClassField({start:c,static:u,private:p,key:h,value:g,end:S()}))}}}return s(),t.input.pop_directives_stack(),t.in_generator=r,t.in_async=i,new e({extends:a,name:n,properties:f})}function $e(e){if(e instanceof l){var n=null;return e.elements[e.elements.length-1]instanceof Ne&&(n=$e(e.elements.pop().expression)),new G({start:e.start,elements:e.elements.map($e),rest:n,end:e.end})}if(e instanceof h)return new H({start:e.start,name:$e(e.left),value:e.right,end:e.end});if(e instanceof H)return e.name=$e(e.name),e;if(e instanceof G)return e.elements=e.elements.map($e),e.rest&&(e.rest=$e(e.rest)),e;if(e instanceof K)return e.properties.forEach(function(e){e.value=$e(e.value)}),e.rest&&(e.rest=$e(e.rest)),e;if(e instanceof le)return e;if(e instanceof Ae){var n=null;return e.properties[e.properties.length-1]instanceof Ne&&(n=$e(e.properties.pop().expression)),new K({start:e.start,properties:e.properties.map(function(e){return e instanceof De||D(e.start,"Invalid destructuring assignment"),new W({start:e.start,key:e.key,value:$e(e.value),end:e.end})}),rest:n,end:e.end})}return e instanceof Qe?e:e instanceof on?new Qe(e):e instanceof kn?new Qe({start:e.start,name:"yield",end:e.end}):void D(e.start,"Invalid arrow parameter")}function Ue(e,n,i){var r=t.in_async,a=t.in_generator;t.in_async=i,t.in_generator=!1;var s=t.in_funarg;t.in_funarg=t.in_function;var f,c,u=e.map($e),l=e.rest||null;l&&(l=$e(l)),t.in_funarg=s,F("=>");var h=t.in_loop,d=t.labels;++t.in_function,t.input.push_directives_stack(),t.in_loop=0,t.labels=[],o("punc","{")?(t.in_directives=!0,f=hn(),c=null):(f=[],te(),c=st());var v=t.input.has_directive("use strict");t.input.pop_directives_stack(),--t.in_function,t.in_loop=h,t.labels=d,t.in_generator=a,t.in_async=r;var _=new(i?AST_AsyncArrow:p)({start:n,argnames:u,rest:l,body:f,value:c,end:S()});return v&&_.each_argname(In),_}var Xe=function(e){var i,r=t.in_async,o=t.in_generator;/Defun$/.test(e.TYPE)?(i=Bn(Ke),t.in_async=/^Async/.test(e.TYPE),t.in_generator=/Generator/.test(e.TYPE)):(t.in_async=/^Async/.test(e.TYPE),t.in_generator=/Generator/.test(e.TYPE),i=Bn(nn,!0)),!i||e===u||i instanceof Ge||C(S()),F("(");var a=t.in_funarg;t.in_funarg=t.in_function;var s=$n(")",!n.strict,!1,function(){return Yn(Qe)});t.in_funarg=a;var f=t.in_loop,c=t.labels;++t.in_function,t.in_directives=!0,t.input.push_directives_stack(),t.in_loop=0,t.labels=[];var l=hn(),p=t.input.has_directive("use strict");t.input.pop_directives_stack(),--t.in_function,t.in_loop=f,t.labels=c,t.in_generator=o,t.in_async=r;var h=new e({name:i,argnames:s,rest:s.rest||null,body:l});return p&&(i&&In(i),h.each_argname(In)),h};function en(){return o("name")||o("string")||Gn(t.token.value)}function rn(e){return new Ie({start:e,quote:e.quote,value:e.value,end:e})}function fn(){var e=t.token;return $("string"),B(),rn(e)}function cn(e,n){return n.name&&((n=new e(n)).name=new(e===Y?We:Ke)(n.name)),n}var ln=ee(function(){if(o("name"))switch(t.token.value){case"async":return s(),$("keyword","function"),o("operator","*")?(s(),Xe(AST_AsyncGeneratorDefun)):Xe(AST_AsyncDefun);case"let":s();var e=Dn();return B(),e}else if(o("keyword"))switch(t.token.value){case"class":return s(),qe(Y);case"const":s();var e=En();return B(),e;case"function":return s(),o("operator","*")?(s(),Xe(AST_GeneratorDefun)):Xe(U);case"var":s();var e=On();return B(),e}C()});function hn(){F("{");for(var e=[];!o("punc","}");)o("eof")&&F("}"),e.push(ie());return s(),e}function mn(){F("{");for(var e,n,i,r,a=[];!o("punc","}");)o("eof")&&F("}"),o("keyword","case")?(e&&(e.end=S()),n=[],e=new y({start:(r=t.token,s(),r),expression:ft(),body:n}),a.push(e),F(":")):o("keyword","default")?(e&&(e.end=S()),i&&E("More than one default clause in switch statement"),n=[],e=new R({start:(r=t.token,s(),F(":"),r),body:n}),a.push(e),i=e):(n||C(),n.push(ie()));return e&&(e.end=S()),s(),a}function Tn(e,n){for(var i=[];;){var r=t.token,a=Hn(e),f=null;if(o("operator","=")?(s(),f=st(n)):!n&&(e===Ve||a instanceof V)&&E("Missing initializer in declaration"),i.push(new wn({start:r,name:a,value:f,end:S()})),!o("punc",","))break;s()}return i}function An(){var e=a();return Jn(e,"name")||Jn(e,"punc","[")||Jn(e,"punc","{")}var En=function(e){return new M({start:S(),definitions:Tn(Ve,e),end:S()})},Dn=function(e){return new be({start:S(),definitions:Tn(tn,e),end:S()})},On=function(e){return new yn({start:S(),definitions:Tn(an,e),end:S()})};var Cn=function(e){if(o("operator","new"))return function(e){var i,r=t.token;if($("operator","new"),o("punc",".")&&Jn(a(),"name","target"))s(),s(),i=new Se;else{var f,c=Cn(!1);o("punc","(")?(s(),f=$n(")",!n.strict)):f=[],i=new we({expression:c,args:f})}return i.start=r,i.end=S(),Un(i,e)}(e);var i=t.token;if(o("punc")){switch(i.value){case"`":return Un(Ln(null),e);case"(":if(s(),o("punc",")"))return s(),Ue([],i);var r=ft(!1,!0),f=i.comments_before.length;if([].unshift.apply(r.start.comments_before,i.comments_before),i.comments_before.length=0,i.comments_before=r.start.comments_before,i.comments_before_length=f,0==f&&i.comments_before.length>0){var c=i.comments_before[0];c.nlb||(c.nlb=i.nlb,i.nlb=!1)}i.comments_after=r.start.comments_after,r.start=i,F(")");var u=S();return u.comments_before=r.end.comments_before,u.comments_after.forEach(function(e){r.end.comments_after.push(e),e.nlb&&(t.token.nlb=!0)}),u.comments_after.length=0,u.comments_after=r.end.comments_after,r.end=u,o("punc","=>")?Ue(r instanceof ze?r.expressions:[r],i):Un(r,e);case"[":return Un(Fn(),e);case"{":return Un(jn(),e)}C()}if(o("keyword"))switch(i.value){case"class":s();var l=qe(x);return l.start=i,l.end=S(),Un(l,e);case"function":return s(),o("operator","*")?(s(),h=Xe(AST_GeneratorFunction)):h=Xe(ue),h.start=i,h.end=S(),Un(h,e)}if(o("name")){var p=Nn(on,i);if(s(),"async"==p.name){var h;if(o("keyword","function"))return s(),o("operator","*")?(s(),h=Xe(AST_AsyncGeneratorFunction)):h=Xe(AST_AsyncFunction),h.start=i,h.end=S(),Un(h,e);if(o("name")&&Jn(a(),"punc","=>"))return i=t.token,p=Nn(on,i),s(),Ue([p],i,!0);if(o("punc","(")){var d=Un(p,e);if(!o("punc","=>"))return d;var _=d.args;return _[_.length-1]instanceof Ne&&(_.rest=_.pop().expression),Ue(_,i,!0)}}return o("punc","=>")?Ue([p],i):Un(p,e)}if(it[t.token.type])return Un(function(){var e,n=t.token,i=n.value;switch(n.type){case"num":isFinite(i)?e=new Te({value:i}):(e=new AST_Infinity,i<0&&(e=new bn({operator:"-",expression:e})));break;case"bigint":e=new v({value:i});break;case"string":e=new Ie({value:i,quote:n.quote});break;case"regexp":e=new Pe({value:i});break;case"atom":switch(i){case"false":e=new oe;break;case"true":e=new vn;break;case"null":e=new ke;break;default:C()}break;default:C()}return s(),e.start=e.end=n,e}(),e);C()};function $n(e,n,i,r){r||(r=st);for(var a=!0,f=[];!o("punc",e)&&(a?a=!1:F(","),!n||!o("punc",e));)if(i&&o("punc",","))f.push(new le({start:t.token,end:t.token}));else if(o("operator","...")){if(r!==st){s(),f.rest=r(),f.rest instanceof H&&D(f.rest.start,"Invalid rest parameter");break}f.push(new Ne({start:t.token,expression:(s(),r()),end:S()}))}else f.push(r());return F(e),f}var Fn=ee(function(){return F("["),new l({elements:$n("]",!n.strict,!0)})}),Pn=ee(function(){return Xe(u)}),jn=ee(function(){F("{");for(var e=!0,i=[];!o("punc","}")&&(e?e=!1:F(","),n.strict||!o("punc","}"));){var r=t.token;if(o("operator","*")){s();var f=zn(),c=t.token,u=Xe(AST_GeneratorFunction);u.start=c,u.end=S(),i.push(new Oe({start:r,key:f,value:u,end:S()}))}else if(o("operator","..."))s(),i.push(new Ne({start:r,expression:st(),end:S()}));else if(Jn(a(),"operator","=")){var l=Bn(on);s(),i.push(new De({start:r,key:r.value,value:new h({start:r,left:l,operator:"=",right:st(),end:S()}),end:S()}))}else if(Jn(a(),"punc",",")||Jn(a(),"punc","}"))i.push(new De({start:r,key:r.value,value:Bn(on),end:S()}));else{var f=zn();if(o("punc","(")){var p=t.token,d=Xe(ue);d.start=p,d.end=S(),i.push(new Oe({start:r,key:f,value:d,end:S()}))}else if(o("punc",":"))s(),i.push(new De({start:r,key:f,value:st(),end:S()}));else{if("name"==r.type)switch(f){case"async":var v=o("operator","*")&&s();f=zn();var p=t.token,d=Xe(v?AST_AsyncGeneratorFunction:AST_AsyncFunction);d.start=p,d.end=S(),i.push(new Oe({start:r,key:f,value:d,end:S()}));continue;case"get":i.push(new Ee({start:r,key:zn(),value:Pn(),end:S()}));continue;case"set":i.push(new Ce({start:r,key:zn(),value:Pn(),end:S()}));continue}C()}}}return s(),new Ae({properties:i})});function zn(){var e=t.token;switch(e.type){case"operator":qn[e.value]||C();case"num":case"string":case"name":case"keyword":case"atom":return s(),""+e.value;case"punc":F("[");var n=st();return F("]"),n;default:C()}}function Mn(){var e=t.token.value;return $("name"),e}function Nn(e,n){var i=n.value;switch(i){case"await":t.in_async&&C(n);break;case"super":e=Be;break;case"this":e=un;break;case"yield":t.in_generator&&C(n)}return new e({name:""+i,start:n,end:n})}function In(e){"arguments"!=e.name&&"eval"!=e.name&&"let"!=e.name||D(e.start,"Unexpected "+e.name+" in strict mode")}function Bn(e,n){if(!o("name"))return n||E("Name expected"),null;var i=Nn(e,t.token);return t.input.has_directive("use strict")&&i instanceof Ge&&In(i),s(),i}function Hn(e){var i=t.token;if(o("punc","[")){s();var r=$n("]",!n.strict,!0,function(){return Yn(e)});return new G({start:i,elements:r,rest:r.rest||null,end:S()})}if(o("punc","{")){s();for(var f=!0,c=[],u=null;!o("punc","}")&&(f?f=!1:F(","),n.strict||!o("punc","}"));){var l=t.token;if(o("punc","[")||Jn(a(),"punc",":")){var p=zn();F(":"),c.push(new W({start:l,key:p,value:Yn(e),end:S()}))}else{if(o("operator","...")){s(),u=Hn(e);break}var h=Bn(e);o("operator","=")&&(s(),h=new H({start:h.start,name:h,value:st(),end:S()})),c.push(new W({start:l,key:l.value,value:h,end:S()}))}}return F("}"),new K({start:i,properties:c,rest:u,end:S()})}return Bn(e)}function Yn(e){var n=t.token,i=Hn(e);return o("operator","=")?(s(),new H({start:n,name:i,value:st(),end:S()})):i}function Ln(e){for(var n=e?e.start:t.token,i=t.input.context().read_template,r=[],a=[];i(r);)s(),a.push(ft()),o("punc","}")||C();return s(),new sn({start:n,expressions:a,strings:r,tag:e,end:S()})}function Un(e,t){for(var i=e.start,r=null;;)if(o("operator","?")&&Jn(a(),"punc",".")&&(s(),s(),r=e),o("punc","[")){s();var c=ft();F("]"),e=new Re({start:i,optional:r===e,expression:e,property:c,end:S()})}else if(t&&o("punc","("))s(),e=new b({start:i,optional:r===e,expression:e,args:$n(")",!n.strict),end:S()});else if(r===e||o("punc","."))r!==e&&s(),e=new Z({start:i,optional:r===e,expression:e,property:Mn(),end:S()});else{if(!o("punc","`"))break;r&&E("Invalid template on optional chain"),e=Ln(e)}if(r&&(e.terminal=!0),e instanceof b&&!e.pure)for(var i=e.start,u=i.comments_before,l=f(i,"comments_before_length")?i.comments_before_length:u.length;--l>=0;)if(/[@#]__PURE__/.test(u[l].value)){e.pure=!0;break}return e}function Vn(e){var n=t.token;if(t.in_async&&o("name","await"))return t.in_funarg===t.in_function&&E("Invalid use of await in function argument"),t.input.context().regex_allowed=!0,s(),new d({start:n,expression:Vn(e),end:S()});if(t.in_generator&&o("name","yield")){t.in_funarg===t.in_function&&E("Invalid use of yield in function argument"),t.input.context().regex_allowed=!0,s();var i=null,r=!1;return o("operator","*")?(s(),i=st(e),r=!0):(o("punc")?Rn[t.token.value]:j())||(i=st(e)),new kn({start:n,expression:i,nested:r,end:S()})}if(o("operator")&&Zn[n.value]){s(),te();var a=Wn(bn,n,Vn(e));return a.start=n,a.end=S(),a}for(var f=Cn(!0);o("operator")&&et[t.token.value]&&!P(t.token);)(f=Wn(gn,t.token,f)).start=n,f.end=t.token,s();return f}function Wn(e,n,i){var r=n.value;switch(r){case"++":case"--":ot(i)||D(n,"Invalid use of "+r+" operator");break;case"delete":i instanceof on&&t.input.has_directive("use strict")&&D(i.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:r,expression:i})}var Xn=function(e,n,i){var r=o("operator")?t.token.value:null;"in"==r&&i&&(r=null);var a=null!=r?tt[r]:null;if(null!=a&&a>n){s();var f=Xn(Vn(i),"**"==r?a-1:a,i);return Xn(new _({start:e.start,left:e,operator:r,right:f,end:f.end}),n,i)}return e};var rt=function(e){var n=t.token,i=function(e){return Xn(Vn(e),0,e)}(e);if(o("operator","?")){s();var r=st();return F(":"),new z({start:n,condition:i,consequent:r,alternative:st(e),end:S()})}return i};function ot(e){return e instanceof Fe&&!e.optional||e instanceof on}function at(e){if(e instanceof l){var n=null;if(e.elements[e.elements.length-1]instanceof Ne&&!((n=at(e.elements.pop().expression))instanceof V||ot(n)))return e;var t=e.elements.map(at);return c(t,function(e){return e instanceof H||e instanceof V||e instanceof le||ot(e)})?new G({start:e.start,elements:t,rest:n,end:e.end}):e}if(e instanceof h){var i=at(e.left);return i instanceof V||ot(i)?new H({start:e.start,name:i,value:e.right,end:e.end}):e}if(!(e instanceof Ae))return e;var n=null;if(e.properties[e.properties.length-1]instanceof Ne&&!((n=at(e.properties.pop().expression))instanceof V||ot(n)))return e;for(var r=[],o=0;o<e.properties.length;o++){var a=e.properties[o];if(!(a instanceof De))return e;var s=at(a.value);if(!(s instanceof H||s instanceof V||ot(s)))return e;r.push(new W({start:a.start,key:a.key,value:s,end:a.end}))}return new K({start:e.start,properties:r,rest:n,end:e.end})}function st(e){var n=t.token,i=rt(e),r=t.token.value;if(o("operator")&&nt[r]){if(ot(i)||"="==r&&(i=at(i))instanceof V)return s(),new h({start:n,left:i,operator:r,right:st(e),end:S()});E("Invalid assignment")}return i}function ft(e,n){for(var i=t.token,r=[];;){if(n&&o("operator","...")){s(),r.rest=Hn(Qe);break}if(r.push(st(e)),!o("punc",","))break;if(s(),n&&o("punc",")")&&Jn(a(),"punc","=>"))break}return 1!=r.length||r.rest?new ze({start:i,expressions:r,end:S()}):r[0]}function ct(e){++t.in_loop;var n=e();return--t.in_loop,n}if(n.expression){te();var ut=ft();return $("eof"),ut}return function(){var e=t.token,i=[];for(n.module&&(t.in_async=!0,t.input.add_directive("use strict")),t.input.push_directives_stack();!o("eof");)i.push(ie(!0));t.input.pop_directives_stack();var r=S()||e,a=n.toplevel;return a?(a.body=a.body.concat(i),a.end=r):a=new dn({start:e,body:i,end:r}),a}()}return n.parse=rt,{is_identifier_string:Gn,is_identifier_char:Vn,is_surrogate_pair_head:function(e){return e>=55296&&e<=56319},is_surrogate_pair_tail:function(e){return e>=56320&&e<=57343},tokenizer:Qn,parse:rt,KEYWORDS:qn,RESERVED_WORDS:$n,KEYWORDS_BEFORE_EXPRESSION:Fn,KEYWORDS_ATOM:Cn,UNARY_POSTFIX:et,PRECEDENCE:tt}}),e("skylark-uglifyjs/output",["./utils","./ast","./parse"],function(e,n,t){"use strict";const{defaults:i,makePredicate:r,noop:o,return_false:a,return_true:s}=e,{AST_Array:f,AST_Arrow:c,AST_AsyncArrow:u,AST_AsyncDefun:l,AST_AsyncFunction:p,AST_AsyncGeneratorDefun:h,AST_AsyncGeneratorFunction:d,AST_Assign:v,AST_Await:_,AST_BigInt:m,AST_Binary:g,AST_BlockStatement:b,AST_Break:y,AST_Call:w,AST_Case:S,AST_Catch:x,AST_Chain:k,AST_Class:T,AST_ClassExpression:A,AST_ClassField:E,AST_ClassGetter:D,AST_ClassInit:O,AST_ClassMethod:q,AST_ClassPrivateProperty:C,AST_ClassProperty:$,AST_ClassSetter:F,AST_ClassStaticBlock:P,AST_ConciseMethod:j,AST_Conditional:z,AST_Const:M,AST_Constant:N,AST_Continue:I,AST_Debugger:R,AST_Default:B,AST_DefaultAssign:H,AST_DefaultValue:Y,AST_Definitions:L,AST_Defun:U,AST_Destructuring:V,AST_DestructuredArray:G,AST_DestructuredKeyVal:W,AST_DestructuredObject:K,AST_Destructured:J,AST_Directive:X,AST_Do:Q,AST_Dot:Z,AST_DotHash:ee,AST_EmptyStatement:ne,AST_Exit:te,AST_Expansion:ie,AST_Export:re,AST_ExportDeclaration:oe,AST_ExportDefault:ae,AST_ExportForeign:se,AST_ExportReferences:fe,AST_Finally:ce,AST_For:ue,AST_ForAwaitOf:le,AST_ForEnumeration:pe,AST_ForIn:he,AST_ForOf:de,AST_Function:ve,AST_GeneratorDefun:_e,AST_GeneratorFunction:me,AST_Hole:ge,AST_If:be,AST_Import:ye,AST_ImportMeta:we,AST_IterationStatement:Se,AST_Jump:xe,AST_LabeledStatement:ke,AST_Lambda:Te,AST_Let:Ae,AST_LoopControl:Ee,AST_NameMapping:De,AST_New:Oe,AST_NewTarget:qe,AST_Node:Ce,AST_Number:$e,AST_Object:Fe,AST_ObjectGetter:Pe,AST_ObjectKeyVal:je,AST_ObjectMethod:ze,AST_ObjectProperty:Me,AST_ObjectSetter:Ne,AST_PrefixedTemplateString:Ie,AST_PropAccess:Re,AST_PrivateGetter:Be,AST_PrivateMethod:He,AST_PrivateSetter:Ye,AST_PrivateIn:Le,AST_RegExp:Ue,AST_Return:Ve,AST_Scope:Ge,AST_Sequence:We,AST_SimpleStatement:Ke,AST_Spread:Je,AST_Statement:Xe,AST_StatementWithBody:Qe,AST_String:Ze,AST_Sub:en,AST_Super:nn,AST_Switch:tn,AST_SwitchBranch:rn,AST_Symbol:on,AST_SymbolClassProperty:an,AST_SymbolExport:sn,AST_SymbolFunarg:fn,AST_SymbolImport:cn,AST_SymbolMethod:un,AST_SymbolPrivateProperty:ln,AST_SymbolRef:pn,AST_Template:hn,AST_TemplateSegment:dn,AST_TemplateString:vn,AST_This:_n,AST_Throw:mn,AST_Toplevel:gn,AST_Try:bn,AST_TryBlock:yn,AST_Unary:wn,AST_UnaryPostfix:Sn,AST_UnaryPrefix:xn,AST_Var:kn,AST_VarDef:Tn,AST_While:An,AST_With:En,AST_Yield:Dn,TreeWalker:On,is_arrow:qn,is_generator:Cn,is_async:$n,walk:Fn,walk_abort:Pn,first_in_statement:jn,root_expr:zn}=n,{is_identifier_char:Mn,is_identifier_string:Nn,is_surrogate_pair_head:In,is_surrogate_pair_tail:Rn,PRECEDENCE:Bn,RESERVED_WORDS:Hn}=t;function Yn(e){return"comment2"==e.type&&/@preserve|@license|@cc_on/i.test(e.value)}function Ln(e){e=i(e,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,extendscript:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var n=a;if(e.comments){var t=e.comments;if("string"==typeof e.comments&&/^\/.*\/[a-zA-Z]*$/.test(e.comments)){var f=e.comments.lastIndexOf("/");t=new RegExp(e.comments.substr(1,f-1),e.comments.substr(f+1))}n=t instanceof RegExp?function(e){return"comment5"!=e.type&&t.test(e.value)}:"function"==typeof t?function(e){return"comment5"!=e.type&&t(this,e)}:"some"===t?Yn:s}function c(e){if("number"==typeof e)return new Array(e+1).join(" ");if(!e)return"";if(!/^\s*$/.test(e))throw new Error("unsupported indentation: "+JSON.stringify(""+e));return e}var u,l,p,h,d,v,_,m=0,b=1,y=c(e.indent_start),w=c(e.indent_level),S=w.length+1>>1,x=0,k=!0,T=e.source_map&&[],A=!1,E=!1,D="";function O(){u="",h=!1,d=!1,_=[];var e=v;return v="",e}O();var q=e.ascii_only?function(e,n){return n&&(e=e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return"\\u{"+(e.charCodeAt(0)-55232<<10|e.charCodeAt(1)-56320).toString(16)+"}"})),e.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var t=e.charCodeAt(0).toString(16);if(t.length<=2&&!n){for(;t.length<2;)t="0"+t;return"\\x"+t}for(;t.length<4;)t="0"+t;return"\\u"+t})}:function(e){for(var n="",t=0,i=0;t<e.length;t++){var r=e.charCodeAt(t);if(In(r)){if(Rn(e.charCodeAt(t+1))){t++;continue}}else if(!Rn(r))continue;n+=e.slice(i,t)+"\\u"+r.toString(16),i=t+1}return 0==i?e:n+e.slice(i)};function C(e){return"'"+e.replace(/\x27/g,"\\'")+"'"}function $(e){return'"'+e.replace(/\x22/g,'\\"')+'"'}var F=[null,C,$,function(e,n){return"'"==n?C(e):$(e)}][e.quote_style]||function(e,n,t,i){return t>i?C(e):$(e)};function P(n,t){var i=0,r=0;return n=n.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(t,o){switch(t){case'"':return++i,'"';case"'":return++r,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return e.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(n.charAt(o+1))?"\\x00":"\\0"}return t}),F(q(n),t,i,r)}var j=T?function(e,n){T.forEach(function(t){t.line+=e,t.col+=n})}:o,M=T?function(){T.forEach(function(n){e.source_map.add(n.token.file,n.line,n.col,n.token.line,n.token.col,n.name||"name"!=n.token.type?n.name:n.token.value)}),T=[]}:o;function N(e){D+=v.slice(0,x);var n=(v=v.slice(x)).length;for(j(e,n-m),b+=e,m=n;e--;)D+="\n"}var I=e.max_line_len?function(n){k?m>e.max_line_len&&Ce.warn("Output exceeds {max_line_len} characters",e):(m>e.max_line_len&&(N(1),k=!0),(k||n)&&M())}:o,R=r("( [ + * / - , .");function B(e,n,t){return Mn(e)&&(Mn(n)||"\\"==n)||"/"==n&&n==e||("+"==n||"-"==n)&&n==u||"--"==u&&">"==n||"!"==u&&"--"==t||"/"==e&&("in"==t||"instanceof"==t)}var H=e.beautify||e.comments||e.max_line_len||e.preserve_line||e.shebang||!e.semicolons||e.source_map||e.width?function(n){var t=n.charAt(0);A&&t&&(A=!1,"\n"!=t&&(H("\n"),L())),E&&t&&(E=!1,/[\s;})]/.test(t)||Y());var i=u.slice(-1);if(d&&(d=!1,":"==i&&"}"==t||";"!=i&&(!t||";}".indexOf(t)<0))){var r=R[t];r||e.semicolons?(v+=";",m++,k||(I(),k&&!r&&";"==v&&(v="",m=0)),x==v.length-1&&x++):(I(),v+="\n",b++,m=0,/^\s+$/.test(n)&&(d=!0)),e.beautify||(h=!1)}h&&(B(i,t,n)&&(v+=" ",m++),"<"==i&&"!"==n||(h=!1)),p&&(T.push({token:p,name:l,line:b,col:m}),p=!1,k&&M()),v+=n;var o=n.split(/\r?\n/),a=o.length-1;b+=a,m+=o[0].length,a>0&&(I(),m=o[a].length),u=n}:function(e){var n=e.charAt(0),t=u.slice(-1);d&&(d=!1,(":"==t&&"}"==n||(!n||";}".indexOf(n)<0)&&";"!=t)&&(v+=";",h=!1)),h&&(B(t,n,e)&&(v+=" "),"<"==t&&"!"==e||(h=!1)),v+=e,u=e},Y=e.beautify?function(){H(" ")}:function(){h=!0},L=e.beautify?function(e){A&&H("\n"),H(e?y.slice(0,-S):y)}:o,U=e.beautify?function(e){var n=y;y+=w,e(),y=n}:function(e){e()},V=e.max_line_len||e.preserve_line?function(){I(),x=v.length,k=!1}:o,G=e.beautify?function(){H("\n"),x=v.length}:V,W=e.beautify?function(){H(";")}:function(){d=!0};var K=T?function(e,n){p=e,l=n}:o;function J(e,n){A||(!e.nlb||!n&&/(^|\n) *$/.test(v)?n&&(E=!0):A=!0)}function X(e){var n=e.value.replace(/[@#]__PURE__/g," ");return!(/^\s*$/.test(n)&&!/^\s*$/.test(e.value))&&(/comment[134]/.test(e.type)?(H("//"+n),A=!0):"comment2"==e.type&&H("/*"+n+"*/"),!0)}return{get:function(){k||I(!0);return D+v},reset:O,indent:L,should_break:e.beautify&&e.width?function(){return m>=e.width}:a,has_parens:function(){return"("==u.slice(-1)},newline:G,print:H,space:Y,comma:function(){V(),H(","),V(),Y()},colon:function(){H(":"),Y()},last:function(){return u},semicolon:W,force_semicolon:function(){d&&H(";");H(";")},to_utf8:q,print_name:function(e){H(q(e.toString(),!0))},print_string:e.inline_script?function(e,n){e=P(e,n).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),H(e.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(e,n){H(P(e,n))},with_indent:U,with_block:function(e,n){H("{"),G(),U(e),K(n),L(),H("}")},with_parens:function(e){H("("),V(),e(),V(),H(")")},with_square:function(e){H("["),V(),e(),V(),H("]")},add_mapping:K,option:function(n){return e[n]},prepend_comments:e.comments||e.shebang?function(t){var i,r=this;t instanceof te?i=t.value:t instanceof Dn&&(i=t.expression);var o=c(t);o||(o=[]);if(i){var a=new On(function(e){if(!function(e,n){if(n instanceof g)return n.left===e;if("Call"==n.TYPE)return n.expression===e;if(n instanceof z)return n.condition===e;if(n instanceof Z)return n.expression===e;if(n instanceof te)return!0;if(n instanceof We)return n.expressions[0]===e;if(n instanceof en)return n.expression===e;if(n instanceof Sn)return!0;if(n instanceof Dn)return!0}(e,a.parent()))return!0;var n=c(e);n&&(o=o.concat(n))});a.push(t),i.walk(a)}if(1==b&&0==m){o.length>0&&e.shebang&&"comment5"==o[0].type&&(H("#!"+o.shift().value+"\n"),L());var s=e.preamble;s&&H(s.replace(/\r\n?|\u2028|\u2029|(^|\S)\s*$/g,"$1\n"))}var f=!1;(o=o.filter(n,t)).forEach(function(e,n){J(e,n),X(e)&&(f=!0)}),f&&J(t.start,!0);function c(e){var n=e.start;if(!n){if(!i)return;e.start=n=new AST_Token}var t=n.comments_before;if(!t){if(!i)return;n.comments_before=t=[]}if(t._dumped!==r)return t._dumped=r,t}}:o,append_comments:e.comments?function(e,t){var i=e.end;if(!i)return;var r=i[t?"comments_before":"comments_after"];if(!r||r._dumped===this)return;if(!(e instanceof Xe||all(r,function(e){return!/comment[134]/.test(e.type)})))return;r._dumped=this,r.filter(n,e).forEach(function(e,n){J(e,n||!t),X(e)})}:o,push_node:function(e){_.push(e)},pop_node:e.preserve_line?function(){var e=_.pop();e.start&&e.start.line>b&&N(e.start.line-b)}:function(){_.pop()},parent:function(e){return _[_.length-2-(e||0)]}}}return function(){function e(e,n){e.DEFMETHOD("_codegen",n)}var n=!1;Ce.DEFMETHOD("print",function(e,n){var t=this;function i(){e.prepend_comments(t),t.add_source_map(e),t._codegen(e),e.append_comments(t)}e.push_node(t),n||t.needs_parens(e)?e.with_parens(i):i(),e.pop_node()});var t=Ln({inline_script:!1,shebang:!1,width:!1});function i(e,n){e.DEFMETHOD("needs_parens",n)}function r(e){var n=e.parent();return!e.has_parens()&&jn(e,!1,!0)?this.name||!(n instanceof ae):!!(e.option("webkit")&&n instanceof Re&&n.expression===this)||(!!(e.option("wrap_iife")&&n instanceof w&&n.expression===this)||void 0)}function s(e){return!e.has_parens()&&jn(e,!0)}function m(e){var n=e.parent();return n instanceof g?"**"==n.operator&&n.left===this:n instanceof w?n.expression===this:n instanceof T||(n instanceof Re?n.expression===this:n instanceof hn?n.tag===this:void 0)}function k(e,n){return!!e.terminal&&((n instanceof w||n instanceof Re)&&n.expression===e)}function C(e,n){var t=n.parent();return t instanceof _||(t instanceof g?!(t instanceof v):t instanceof w?t.expression===e:t instanceof T||(t instanceof z?t.condition===e:t instanceof Re?t.expression===e:t instanceof hn?t.tag===e:t instanceof wn||void 0))}function P(e,t,i,r){var o=e.length-1,a=r,s=n;e.forEach(function(e,r){a&&(e instanceof X?"use asm"==e.value&&(n=!0):e instanceof ne||(e instanceof Ke&&e.body instanceof Ze&&i.force_semicolon(),a=!1)),e instanceof ne||(i.indent(),e.print(i),r==o&&t||(i.newline(),t&&i.newline()))}),n=s}function j(e,n){n.print("{"),n.with_indent(function(){n.append_comments(e,!0)}),n.print("}")}function H(e,n,t){e.body.length>0?n.with_block(function(){P(e.body,!1,n,t)},e.end):j(e,n)}function U(e,n){return function(t){var i=this;t.print(e),t.space(),t.with_parens(function(){i.init.print(t),t.space(),t.print(n),t.space(),i.object.print(t)}),ln(i.body,t)}}function V(e,n){var t=e.value;"*"==t||Nn(t)?n.print_name(t):n.print_string(t,e.quote)}function ee(e,n){n.with_parens(function(){e.argnames.forEach(function(e,t){t&&n.comma(),e.print(n)}),e.rest&&(e.argnames.length&&n.comma(),n.print("..."),e.rest.print(n))})}function te(e,n){var t=1==e.argnames.length&&!e.rest&&e.argnames[0];t instanceof fn&&"yield"!=t.name?t.print(n):ee(e,n),n.space(),n.print("=>"),n.space(),e.value?e.value.print(n):H(e,n,!0)}function ie(e,n){e.name&&(n.space(),e.name.print(n)),ee(e,n),n.space(),H(e,n,!0)}function re(e){e.print("async"),e.space(),e.print("function"),ie(this,e)}function we(e){e.print("async"),e.space(),e.print("function*"),ie(this,e)}function Ee(e){e.print("function*"),ie(this,e)}function De(e,n){var t=e.value;$n(t)&&(n.print("async"),n.space()),Cn(t)&&n.print("*"),nn(e,n),ie(e.value,n)}function qe(e,n){return function(t){t.print(e);var i=this[n];i&&(t.space(),i.print(t)),t.semicolon()}}function Ie(e,n){n.newline(),e.body.forEach(function(e){n.indent(),e.print(n),n.newline()})}function Be(e){return function(n){n.print(e),n.space(),this.definitions.forEach(function(e,t){t&&n.comma(),e.print(n)});var t=n.parent();t instanceof Se&&t.init===this||n.semicolon()}}function He(e,n,t){var i=!1;t&&e.walk(new On(function(e){return!!i||(e instanceof g&&"in"==e.operator?i=!0:e instanceof Ge&&(!qn(e)||!e.value)||void 0)})),e.print(n,i)}function Ye(e,n){if(n.option("annotations")&&e.pure){var t,i=0,r=e;do{if(t=r,(r=n.parent(i++))instanceof w&&r.expression===t)return}while(r instanceof Re&&r.expression===t);n.print("/*@__PURE__*/")}}function Le(e,n){n.with_parens(function(){e.args.forEach(function(e,t){t&&n.comma(),e.print(n)}),n.add_mapping(e.end)})}function Xe(e,n,t){var i=e.properties;i.length>0?n.with_block(function(){i.forEach(function(e,i){i&&(t||n.print(","),n.newline()),n.indent(),e.print(n)}),n.newline()},e.end):j(e,n)}function nn(e,n){var t=e.key;if(t instanceof Ce)return n.with_square(function(){t.print(n)});var i=e.start&&e.start.quote;if(n.option("quote_keys")||i&&n.option("keep_quoted_props"))n.print_string(t,i);else if(""+ +t==t&&t>=0)n.print(dn(t));else if(e.private)n.print_name(t);else{if(Hn[t]?!n.option("ie"):Nn(t))return n.print_name(t),t;n.print_string(t,i)}}function an(e){return function(n){this.static&&(n.print("static"),n.space()),n.print(e),n.space(),nn(this,n),ie(this.value,n)}}function un(e){var n=e.definition();return n&&n.mangled_name||e.name}function ln(e,n){n.option("braces")&&!(e instanceof M||e instanceof Ae)?vn(e,n):e instanceof ne?n.force_semicolon():(n.space(),e.print(n))}function pn(e,n){return e.args.length>0||n.option("beautify")}function dn(e){var n,t,i,r=e.toString(10).replace(/^0\./,".").replace("e+","e"),o=[r];return Math.floor(e)===e&&(e<0?o.push("-0x"+(-e).toString(16).toLowerCase()):o.push("0x"+e.toString(16).toLowerCase())),(n=/^\.0+/.exec(r))?(t=n[0].length,i=r.slice(t),o.push(i+"e-"+(i.length+t-1))):(n=/[^0]0+$/.exec(r))?(t=n[0].length-1,o.push(r.slice(0,-t)+"e"+t)):(n=/^(\d)\.(\d+)e(-?\d+)$/.exec(r))&&o.push(n[1]+n[2]+"e"+(n[3]-n[2].length)),function(e){for(var n=e[0],t=n.length,i=1;i<e.length;++i)e[i].length<t&&(n=e[i],t=n.length);return n}(o)}function vn(e,n){n.space(),e instanceof ne?j(e,n):e instanceof b?e.print(n):n.with_block(function(){n.indent(),e.print(n),n.newline()},e.end)}function _n(e,n){e.forEach(function(e){e.DEFMETHOD("add_source_map",n)})}Ce.DEFMETHOD("print_to_string",function(e){if(e){var n=Ln(e);return this.print(n),n.get()}return this.print(t),t.reset()}),i(Ce,a),i(p,r),i(d,r),i(A,r),i(ve,r),i(me,r),i(Fe,s),i(_,m),i(wn,m),i(We,function(e){var n=e.parent();return n instanceof f||qn(n)&&n.value===this||n instanceof _||n instanceof g||n instanceof w||n instanceof T||n instanceof $||n instanceof z||n instanceof Y||n instanceof W||n instanceof ae||n instanceof de||n instanceof Me||n instanceof Re&&n.expression===this||n instanceof Je||n instanceof hn&&n.tag===this||n instanceof wn||n instanceof Tn||n instanceof Dn}),i(g,function(e){var n=e.parent();if(n instanceof _)return!0;if(n instanceof g){var t=n.operator,i=Bn[t],r=this.operator,o=Bn[r];return i>o||"??"==t&&("&&"==r||"||"==r)||i==o&&this===n["**"==t?"left":"right"]}return n instanceof w?n.expression===this:n instanceof T||(n instanceof Re?n.expression===this:n instanceof hn?n.tag===this:n instanceof wn||void 0)}),i(Re,function(e){var n=e.parent();return n instanceof Oe&&n.expression===this&&"Call"==zn(this).TYPE||k(this,n)}),i(w,function(e){var n=e.parent();if(n instanceof Oe)return n.expression===this;if(e.option("webkit")&&this.expression instanceof ve&&n instanceof Re&&n.expression===this){var t=e.parent(1);if(t instanceof v&&t.left===n)return!0}return k(this,n)}),i(Oe,function(e){if(pn(this,e))return!1;var n=e.parent();return n instanceof w?n.expression===this:n instanceof Re||(n instanceof hn?n.tag===this:void 0)}),i($e,function(e){if(!e.option("galio"))return!1;var n=e.parent();return n instanceof Re&&n.expression===this&&/^0/.test(dn(this.value))}),i(c,function(e){return C(this,e)}),i(v,function(e){return!!C(this,e)||(e.option("v8")?this.left instanceof J:this.left instanceof K?s(e):void 0)}),i(u,function(e){return C(this,e)}),i(z,function(e){return C(this,e)||e.option("extendscript")&&e.parent()instanceof z}),i(Dn,function(e){return C(this,e)}),e(X,function(e){var n=this.quote,t=this.value;switch(e.option("quote_style")){case 0:case 2:-1==t.indexOf('"')&&(n='"');break;case 1:-1==t.indexOf("'")&&(n="'")}e.print(n+t+n),e.semicolon()}),e(R,function(e){e.print("debugger"),e.semicolon()}),e(gn,function(e){P(this.body,!0,e,!0),e.print("")}),e(ke,function(e){this.label.print(e),e.colon(),this.body.print(e)}),e(Ke,function(e){this.body.print(e),e.semicolon()}),e(b,function(e){H(this,e)}),e(ne,function(e){e.semicolon()}),e(Q,function(e){var n=this;e.print("do"),vn(n.body,e),e.space(),e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),e.semicolon()}),e(An,function(e){var n=this;e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),ln(n.body,e)}),e(ue,function(e){var n=this;e.print("for"),e.space(),e.with_parens(function(){n.init?(n.init instanceof L?n.init.print(e):He(n.init,e,!0),e.print(";"),e.space()):e.print(";"),n.condition?(n.condition.print(e),e.print(";"),e.space()):e.print(";"),n.step&&n.step.print(e)}),ln(n.body,e)}),e(le,U("for await","of")),e(he,U("for","in")),e(de,U("for","of")),e(En,function(e){var n=this;e.print("with"),e.space(),e.with_parens(function(){n.expression.print(e)}),ln(n.body,e)}),e(oe,function(e){e.print("export"),e.space(),this.body.print(e)}),e(ae,function(e){e.print("export"),e.space(),e.print("default"),e.space();var n=this.body;n.print(e),n instanceof A&&!n.name||n instanceof AST_DefClass||n instanceof AST_LambdaDefinition||n instanceof AST_LambdaExpression&&!n.name&&!qn(n)||e.semicolon()}),e(se,function(e){var n=this;e.print("export"),e.space();var t=n.keys.length;function i(t){var i=n.aliases[t],r=n.keys[t];V(r,e),i.value!=r.value&&(e.space(),e.print("as"),e.space(),V(i,e))}0==t?j(n,e):"*"==n.keys[0].value?i(0):e.with_block(function(){e.indent(),i(0);for(var n=1;n<t;n++)e.print(","),e.newline(),e.indent(),i(n);e.newline()},n.end),e.space(),e.print("from"),e.space(),n.path.print(e),e.semicolon()}),e(fe,function(e){e.print("export"),e.space(),Xe(this,e),e.semicolon()}),e(ye,function(e){e.print("import"),e.space(),this.default&&this.default.print(e),this.all&&(this.default&&e.comma(),this.all.print(e)),this.properties&&(this.default&&e.comma(),Xe(this,e)),(this.all||this.default||this.properties)&&(e.space(),e.print("from"),e.space()),this.path.print(e),e.semicolon()}),e(c,function(e){te(this,e)}),e(u,function(e){e.print("async"),e.space(),te(this,e)}),e(Te,function(e){e.print("function"),ie(this,e)}),e(l,re),e(p,re),e(h,we),e(d,we),e(_e,Ee),e(me,Ee),e(T,function(e){e.print("class"),this.name&&(e.space(),this.name.print(e)),this.extends&&(e.space(),e.print("extends"),e.space(),this.extends.print(e)),e.space(),Xe(this,e,!0)}),e(E,function(e){this.static&&(e.print("static"),e.space()),nn(this,e),this.value&&(e.space(),e.print("="),e.space(),this.value.print(e)),e.semicolon()}),e(D,an("get")),e(F,an("set")),e(q,function(e){this.static&&(e.print("static"),e.space()),De(this,e)}),e(O,function(e){e.print("static"),e.space(),H(this.value,e)}),e(Ve,qe("return","value")),e(mn,qe("throw","value")),e(y,qe("break","label")),e(I,qe("continue","label")),e(be,function(e){var n=this;e.print("if"),e.space(),e.with_parens(function(){n.condition.print(e)}),n.alternative?(!function(e,n){var t=e.body;if(n.option("braces")&&!(t instanceof M||t instanceof Ae)||n.option("ie")&&t instanceof Q)return vn(t,n);if(!t)return n.force_semicolon();for(;;)if(t instanceof be){if(!t.alternative)return void vn(e.body,n);t=t.alternative}else{if(!(t instanceof Qe))break;t=t.body}ln(e.body,n)}(n,e),e.space(),e.print("else"),n.alternative instanceof be?(e.space(),n.alternative.print(e)):ln(n.alternative,e)):ln(n.body,e)}),e(tn,function(e){var n=this;e.print("switch"),e.space(),e.with_parens(function(){n.expression.print(e)}),e.space();var t=n.body.length-1;t<0?j(n,e):e.with_block(function(){n.body.forEach(function(n,i){e.indent(!0),n.print(e),i<t&&n.body.length>0&&e.newline()})},n.end)}),e(B,function(e){e.print("default:"),Ie(this,e)}),e(S,function(e){e.print("case"),e.space(),this.expression.print(e),e.print(":"),Ie(this,e)}),e(bn,function(e){e.print("try"),e.space(),H(this,e),this.bcatch&&(e.space(),this.bcatch.print(e)),this.bfinally&&(e.space(),this.bfinally.print(e))}),e(x,function(e){var n=this;e.print("catch"),n.argname&&(e.space(),e.with_parens(function(){n.argname.print(e)})),e.space(),H(n,e)}),e(ce,function(e){e.print("finally"),e.space(),H(this,e)}),e(M,Be("const")),e(Ae,Be("let")),e(kn,Be("var")),e(Tn,function(e){if(this.name.print(e),this.value){e.space(),e.print("="),e.space();var n=e.parent(1),t=n instanceof ue||n instanceof pe;He(this.value,e,t)}}),e(Y,function(e){this.name.print(e),e.space(),e.print("="),e.space(),this.value.print(e)}),e(w,function(e){Ye(this,e),this.expression.print(e),this.optional&&e.print("?."),Le(this,e)}),e(Oe,function(e){Ye(this,e),e.print("new"),e.space(),this.expression.print(e),pn(this,e)&&Le(this,e)}),e(We,function(e){this.expressions.forEach(function(n,t){t>0&&(e.comma(),e.should_break()&&(e.newline(),e.indent())),n.print(e)})}),e(Z,function(e){var n=this,t=n.expression;t.print(e);var i=n.property;e.option("ie")&&Hn[i]||n.quoted&&e.option("keep_quoted_props")?(n.optional&&e.print("?."),e.with_square(function(){e.add_mapping(n.end),e.print_string(i)})):(t instanceof $e&&!/[ex.)]/i.test(e.last())&&e.print("."),e.print(n.optional?"?.":"."),e.add_mapping(n.end),e.print_name(i))}),e(en,function(e){var n=this;n.expression.print(e),n.optional&&e.print("?."),e.with_square(function(){n.property.print(e)})}),e(Je,function(e){e.print("..."),this.expression.print(e)}),e(xn,function(e){var n=this.operator,t=this.expression;e.print(n),(/^[a-z]/i.test(n)||/[+-]$/.test(n)&&t instanceof xn&&/^[+-]/.test(t.operator))&&e.space(),t.print(e)}),e(Sn,function(e){this.expression.print(e),e.add_mapping(this.end),e.print(this.operator)}),e(g,function(e){this.left.print(e),e.space(),e.print(this.operator),e.space(),this.right.print(e)}),e(z,function(e){this.condition.print(e),e.space(),e.print("?"),e.space(),this.consequent.print(e),e.space(),e.colon(),this.alternative.print(e)}),e(_,function(e){e.print("await"),e.space(),this.expression.print(e)}),e(Dn,function(e){e.print(this.nested?"yield*":"yield"),this.expression&&(e.space(),this.expression.print(e))}),e(f,function(e){var n=this.elements,t=n.length;e.with_square(t>0?function(){e.space(),n.forEach(function(n,i){i&&e.comma(),n.print(e),i===t-1&&n instanceof ge&&e.comma()}),e.space()}:o)}),e(G,function(e){var n=this.elements,t=n.length,i=this.rest;e.with_square(t||i?function(){e.space(),n.forEach(function(n,t){t&&e.comma(),n.print(e)}),i?(t&&e.comma(),e.print("..."),i.print(e)):n[t-1]instanceof ge&&e.comma(),e.space()}:o)}),e(W,function(e){var n=nn(this,e),t=this.value;if(n)if(t instanceof Y){if(t.name instanceof on&&n==un(t.name))return e.space(),e.print("="),e.space(),void t.value.print(e)}else if(t instanceof on&&n==un(t))return;e.colon(),t.print(e)}),e(K,function(e){var n=this.properties,t=n.length,i=this.rest;t||i?e.with_block(function(){n.forEach(function(n,t){t&&(e.print(","),e.newline()),e.indent(),n.print(e)}),i&&(t&&(e.print(","),e.newline()),e.indent(),e.print("..."),i.print(e)),e.newline()},this.end):j(this,e)}),e(Fe,function(e){Xe(this,e)}),e(je,function(e){nn(this,e),e.colon(),this.value.print(e)}),e(ze,function(e){De(this,e)}),e(Pe,an("get")),e(Ne,an("set")),e(on,function(e){e.print_name(un(this))}),e(sn,function(e){var n=un(this);e.print_name(n);var t=this.alias;t.value!=n&&(e.space(),e.print("as"),e.space(),V(t,e))}),e(cn,function(e){var n=un(this),t=this.key;t.value&&t.value!=n&&(V(t,e),e.space(),e.print("as"),e.space()),e.print_name(n)}),e(ge,o),e(hn,function(e){this.tag&&this.tag.print(e),e.print("`");for(var n=0;n<this.expressions.length;n++)e.print(this.strings[n]),e.print("${"),this.expressions[n].print(e),e.print("}");e.print(this.strings[n]),e.print("`")}),e(N,function(e){e.print(""+this.value)}),e(Ze,function(e){e.print_string(this.value,this.quote)}),e($e,function(e){var t=this.start;n&&t&&null!=t.raw?e.print(t.raw):e.print(dn(this.value))}),e(Ue,function(e){var n=this.value,t=n.toString(),i=t.lastIndexOf("/");n.raw_source?t="/"+n.raw_source+t.slice(i):1==i?t="/(?:)"+t.slice(i):t.indexOf("/",1)<i&&(t="/"+t.slice(1,i).replace(/\\\\|[^/]?\//g,function(e){return"\\"==e[0]?e:e.slice(0,-1)+"\\/"})+t.slice(i)),e.print(e.to_utf8(t).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(e){switch(e[1]){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\t";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}).replace(/[\n\r\u2028\u2029]/g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}),_n([Ce,ke],o),_n([f,_,b,x,N,R,L,J,X,ce,xe,Te,Oe,Fe,Je,Qe,on,tn,rn,bn,xn,Dn],function(e){e.add_mapping(this.start)}),_n([$,W,Me],function(e){"string"==typeof this.key&&e.add_mapping(this.start,this.key)})}(),{OutputStream:Ln}}),e("skylark-uglifyjs/scope",["./utils","./ast","./parse"],function(e,n,t){"use strict";const{defaults:i,find_if:r,keep_name:o,mergeSort:a,member:s,push_uniq:f,make_node:c,return_false:u,return_this:l,return_true:p,string_template:h,DEF_BITPROPS:d,makePredicate:v,Dictionary:_}=e,{AST_Arrow:m,AST_Assign:g,AST_AsyncArrow:b,AST_Block:y,AST_Call:w,AST_Catch:S,AST_Class:x,AST_Conditional:k,AST_DefClass:T,AST_Definitions:A,AST_DefaultValue:E,AST_Defun:D,AST_Destructuring:O,AST_Destructured:q,AST_DestructuredKeyVal:C,AST_Dot:$,AST_DotHash:F,AST_Export:P,AST_ExportDeclaration:j,AST_For:z,AST_ForIn:M,AST_ForOf:N,AST_ForEnumeration:I,AST_Function:R,AST_Import:B,AST_IterationStatement:H,AST_Label:Y,AST_LabeledStatement:L,AST_LabelRef:U,AST_Lambda:V,AST_LambdaDefinition:G,AST_LambdaExpression:W,AST_LoopControl:K,AST_NameMapping:J,AST_Node:X,AST_PropAccess:Q,AST_Scope:Z,AST_Sequence:ee,AST_String:ne,AST_Sub:te,AST_Switch:ie,AST_SwitchBranch:re,AST_Symbol:oe,AST_SymbolBlockDeclaration:ae,AST_SymbolCatch:se,AST_SymbolClass:fe,AST_SymbolConst:ce,AST_SymbolDeclaration:ue,AST_SymbolDefClass:le,AST_SymbolDefun:pe,AST_SymbolExport:he,AST_SymbolFunarg:de,AST_SymbolImport:ve,AST_SymbolLambda:_e,AST_SymbolLet:me,AST_SymbolMethod:ge,AST_SymbolRef:be,AST_SymbolVar:ye,AST_Toplevel:we,AST_Try:Se,AST_VarDef:xe,AST_With:ke,TreeWalker:Te,walk_body:Ae,walk_lambda:Ee,AST_BlockScope:De,AST_Unary:Oe,is_arrow:qe}=n,{RESERVED_WORDS:Ce}=t;function $e(e,n,t,i){this._bits=0,this.defun=void 0,this.eliminated=0,this.id=e,this.init=i,this.mangled_name=null,this.name=t.name,this.orig=[t],this.references=[],this.replaced=0,this.safe_ids=void 0,this.scope=n}function Fe(e){return e.orig[0]instanceof de||e.orig[1]instanceof de}$e.prototype={forEach:function(e){this.orig.forEach(e),this.references.forEach(e)},mangle:function(e){if(!this.mangled_name){var n=this.global&&e.cache&&e.cache.props;if(n&&n.has(this.name))this.mangled_name=n.get(this.name);else if(this.unmangleable(e))Ne(this.scope,e).set(this.name,!0);else{var t=this.redefined();this.mangled_name=t?t.mangled_name||t.name:function(e,n){var t,i=e.scope,r=Ne(i,n),o=i.cname_holes,a=new _,f=[i];e.forEach(function(e){var t=e.scope;do{if(s(t,f))break;Ne(t,n).each(function(e,n){a.set(n,e)}),f.push(t)}while(t=t.parent_scope)});for(var c=0;c<o.length;c++)if(t=Re(o[c]),!a.has(t))return o.splice(c,1),r.set(t,!0),t;for(;;)if(t=Re(++i.cname),!(r.has(t)||Ce[t]||n.reserved.has[t])){if(!a.has(t))break;o.push(i.cname)}return r.set(t,!0),t}(this,e),n&&n.set(this.name,this.mangled_name)}}},redefined:function(){var e=this.defun;if(e){var n=this.name,t=e.variables.get(n)||e instanceof we&&e.globals.get(n)||this.orig[0]instanceof ce&&r(function(e){return e.name==n},e.enclosed);return t&&t!==this?t.redefined()||t:void 0}},unmangleable:function(e){if(this.exported)return!0;if(this.undeclared)return!0;if(!e.eval&&this.scope.pinned())return!0;if(e.keep_fargs&&Fe(this))return!0;if(e.keep_fnames){var n=this.orig[0];if(n instanceof fe)return!0;if(n instanceof le)return!0;if(n instanceof pe)return!0;if(n instanceof _e)return!0}return!(e.toplevel||!this.global)}},d($e,["const_redefs","cross_loop","direct_access","exported","global","undeclared"]);var Pe=v("delete ++ --");function je(e,n){return n instanceof g?n.left===e&&e:n instanceof E?n.name===e&&e:n instanceof q?e:n instanceof C?e:n instanceof I?n.init===e&&e:n instanceof Oe?Pe[n.operator]&&n.expression:void 0}function ze(e,n){e.enclosed=[],e.parent_scope=n,e.functions=new _,e.variables=new _,n&&(e.make_def=n.make_def)}function Me(e,n){ze(e,n),e.uses_eval=!1,e.uses_with=!1}function Ne(e,n){var t=e.names_in_use;if(!t){e.cname=-1,e.cname_holes=[],e.names_in_use=t=new _;var i=n.cache&&n.cache.props;e.enclosed.forEach(function(e){e.unmangleable(n)&&t.set(e.name,!0),e.global&&i&&i.has(e.name)&&t.set(i.get(e.name),!0)})}return t}function Ie(e){return e=i(e,{eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(e.reserved)||(e.reserved=[]),f(e.reserved,"arguments"),e.reserved.has=v(e.reserved),e}we.DEFMETHOD("figure_out_scope",function(e){e=i(e,{cache:null,ie:!1});var n=this,t=null,r=!1,o=0,a=n.parent_scope=null,s=new Te(function(n,i){if(n instanceof T){var o=r;return r=s.parent()instanceof j,n.name.walk(s),r=o,u(function(){n.extends&&n.extends.walk(s),n.properties.forEach(function(e){e.walk(s)})}),!0}if(n instanceof A){var o=r;return r=s.parent()instanceof j,i(),r=o,!0}if(n instanceof G){var o=r;return r=s.parent()instanceof j,n.name.walk(s),r=o,u(function(){n.argnames.forEach(function(e){e.walk(s)}),n.rest&&n.rest.walk(s),Ae(n,s)}),!0}if(n instanceof re)return n.init_vars(a),i(),!0;if(n instanceof Se)return u(function(){Ae(n,s)}),n.bcatch&&n.bcatch.walk(s),n.bfinally&&n.bfinally.walk(s),!0;if(n instanceof ke){var f=a;do{if((f=f.resolve()).uses_with)break;f.uses_with=!0}while(f=f.parent_scope);return u(i),!0}if(n instanceof De)return u(i),!0;if(n instanceof oe&&(n.scope=a),n instanceof Y&&(n.thedef=n,n.references=[]),n instanceof se)a.def_variable(n).defun=t;else if(n instanceof ce){var c=a.def_variable(n);c.defun=t,r&&(c.exported=!0)}else if(n instanceof pe){var c=t.def_function(n,s.parent());r&&(c.exported=!0)}else if(n instanceof de)t.def_variable(n);else if(n instanceof _e){var c=t.def_function(n,"arguments"==n.name?void 0:t);e.ie&&"arguments"!=n.name&&(c.defun=t.parent_scope.resolve())}else if(n instanceof me){var c=a.def_variable(n);r&&(c.exported=!0)}else if(n instanceof ye){var c=t.def_variable(n,n instanceof ve?void 0:null);r&&(c.exported=!0)}function u(e){n.init_vars(a);var i=t,r=a;n instanceof Z&&(t=n),a=n,e(),a=r,t=i}});n.make_def=function(e,n){return new $e(++o,this,e,n)},n.walk(s),n.globals=new _;var c=[],s=new Te(function(t){if(t instanceof S){if(!(t.argname instanceof q))return;return c.push(t),t.argname.walk(s),c.pop(),Ae(t,s),!0}if(t instanceof V)return c.push(t),t.name&&t.name.walk(s),t.argnames.forEach(function(e){e.walk(s)}),t.rest&&t.rest.walk(s),c.pop(),Ee(t,s),!0;if(t instanceof K)return t.label&&t.label.thedef.references.push(t),!0;if(t instanceof ue){var i=t.definition();if(i.preinit=i.references.length,t instanceof se){var r=i.redefined();if(r)for(var o=t.scope;o&&f(o.enclosed,r)&&o!==r.scope;o=o.parent_scope);}else if(t instanceof ce){var r=i.redefined();r&&(r.const_redefs=!0)}else if(i.scope!==t.scope&&(t instanceof pe||t instanceof de||t instanceof ye)){t.mark_enclosed(e);var r=t.scope.find_variable(t.name);t.thedef!==r&&(t.thedef=r,r.orig.push(t),t.mark_enclosed(e))}if("arguments"!=t.name)return!0;var a=t instanceof ye&&s.parent();if(a instanceof xe&&!a.value)return!0;var l=t.scope.resolve().find_variable("arguments");return l&&u(l)&&(l.scope.uses_arguments=3),!0}if(t instanceof be){for(var p=t.name,l=t.scope.find_variable(p),h=c.length;h>0&&l&&!((h=c.lastIndexOf(l.scope,h-1))<0);){var d=l.orig[0];if(d instanceof se||d instanceof de||d instanceof _e){t.in_arg=!0;break}l=l.scope.parent_scope.find_variable(p)}if(l){if("arguments"==p&&u(l)){var a=s.parent();je(t,a)?l.scope.uses_arguments=3:l.scope.uses_arguments<2&&!(a instanceof Q&&a.expression===t)?l.scope.uses_arguments=2:l.scope.uses_arguments||(l.scope.uses_arguments=!0)}}else l=n.def_global(t);if("eval"==p){var a=s.parent();if("Call"==a.TYPE&&a.expression===t){var o=t.scope;do{if((o=o.resolve()).uses_eval)break;o.uses_eval=!0}while(o=o.parent_scope)}else l.undeclared&&(n.uses_eval=!0)}if(l.init instanceof G&&l.scope!==l.init.name.scope){var v=t.scope;do{if(v===l.init.name.scope)break}while(v=v.parent_scope);v||(l.init=void 0)}return t.thedef=l,t.reference(e),!0}});function u(e){return e.orig[0]instanceof de&&!(e.orig[1]instanceof de||e.orig[2]instanceof de)&&!qe(e.scope)}function l(t,i){var r=t.name,o=t.thedef;if(!all(o.orig,function(e){return!(e instanceof ce||e instanceof me)}))return!1;var a=i.find_variable(r);if(a){var s=a.redefined();s&&(a=s)}else a=n.globals.get(r);return a?a.orig.push(t):a=i.def_variable(t),a.undeclared&&n.variables.set(r,a),!!("arguments"==r&&u(o)&&t instanceof _e)||(o.defun=a.scope,o.forEach(function(n){n.redef=o,n.thedef=a,n.reference(e)}),!0)}n.walk(s),e.ie&&n.walk(new Te(function(e){if(e instanceof se){var n=e.thedef,t=n.defun;return"arguments"!=n.name&&t.name instanceof _e&&t.name.name==n.name&&(t=t.parent_scope.resolve()),l(e,t),!0}if(e instanceof _e){var n=e.thedef;return l(e,e.scope.parent_scope.resolve())?void 0!==e.thedef.init?e.thedef.init=!1:n.init&&(e.thedef.init=n.init):n.defun=void 0,!0}}))}),we.DEFMETHOD("def_global",function(e){var n=this.globals,t=e.name;if(n.has(t))return n.get(t);var i=this.make_def(e);return i.undeclared=!0,i.global=!0,n.set(t,i),i}),De.DEFMETHOD("init_vars",function(e){ze(this,e)}),Z.DEFMETHOD("init_vars",function(e){Me(this,e)}),m.DEFMETHOD("init_vars",function(e){return Me(this,e),this}),b.DEFMETHOD("init_vars",function(e){Me(this,e)}),V.DEFMETHOD("init_vars",function(e){return Me(this,e),this.uses_arguments=!1,this.def_variable(new de({name:"arguments",scope:this,start:this.start,end:this.end})),this}),oe.DEFMETHOD("mark_enclosed",function(e){for(var n=this.definition(),t=this.scope;t&&f(t.enclosed,n)&&(e?(e.keep_fargs&&t instanceof V&&t.each_argname(function(e){f(n.scope.enclosed,e.definition())}),e.keep_fnames&&t.functions.each(function(e){f(n.scope.enclosed,e)})):t._var_names=void 0,t!==n.scope);t=t.parent_scope);}),oe.DEFMETHOD("reference",function(e){this.definition().references.push(this),this.mark_enclosed(e)}),De.DEFMETHOD("find_variable",function(e){return this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),De.DEFMETHOD("def_function",function(e,n){var t=this.def_variable(e,n);return(!t.init||t.init instanceof G)&&(t.init=n),this.functions.set(e.name,t),t}),De.DEFMETHOD("def_variable",function(e,n){var t=this.variables.get(e.name);return t?(t.orig.push(e),t.init instanceof W&&(t.init=n)):(t=this.make_def(e,n),this.variables.set(e.name,t),t.global=!this.parent_scope),e.thedef=t}),oe.DEFMETHOD("unmangleable",function(e){var n=this.definition();return!n||n.unmangleable(e)}),Y.DEFMETHOD("unmangleable",u),oe.DEFMETHOD("definition",function(){return this.thedef}),we.DEFMETHOD("mangle_names",function(e){if((e=Ie(e)).cache&&e.cache.props){var n=Ne(this,e);e.cache.props.each(function(e){n.set(e,!0)})}var t=-1,i=[],r=new Te(function(n,a){var s;if(n instanceof De){n instanceof L&&(s=t),e.webkit&&n instanceof H&&n.init instanceof AST_Let&&n.init.definitions.forEach(function(e){e.name.match_symbol(function(e){if(e instanceof me){var n=e.definition(),t=e.scope.parent_scope,i=t.def_variable(e);e.thedef=n,t.to_mangle.push(i),n.redefined=function(){return i}}})},!0);var f=n.to_mangle=[];if(n.variables.each(function(n){(function(n){var t=n.orig[0],r=n.redefined();if(!r){if(!(t instanceof ce))return!1;var o=n.scope.resolve();if(n.scope===o)return!1;if(n.scope.parent_scope.find_variable(t.name))return!1;r=o.def_variable(t),o.to_mangle.push(r)}i.push(n),n.references.forEach(a),(t instanceof se||t instanceof ce)&&(a(t),n.redefined=function(){return r});return!0;function a(t){t.thedef=r,t.reference(e),t.thedef=n}})(n)||f.push(n)}),a(),e.cache&&n instanceof we&&n.globals.each(o),n instanceof D&&r.has_directive("use asm")){var c=new be(n.name);c.scope=n,c.reference(e)}if(f.length>36){var u=f.map(function(e,n){return n}).sort(function(e,n){return f[n].references.length-f[e].references.length||e-n});f=u.slice(0,36).sort(function(e,n){return e-n}).map(function(e){return f[e]}).concat(u.slice(36).sort(function(e,n){return e-n}).map(function(e){return f[e]}))}return f.forEach(o),!(n instanceof L)||e.v8&&function(n){var t,i=0;for(;t=n.parent(i++);){if(t instanceof y)return t instanceof we&&!e.toplevel;if(t instanceof L)return!0}}(r)||(t=s),!0}if(n instanceof Y){var l;do{l=Re(++t)}while(Ce[l]);return n.mangled_name=l,!0}});function o(n){e.reserved.has[n.name]||n.mangle(e)}this.walk(r),i.forEach(o)}),we.DEFMETHOD("find_colliding_names",function(e){var n=e.cache&&e.cache.props,t=Object.create(Ce);return e.reserved.forEach(i),this.globals.each(r),this.walk(new Te(function(e){e instanceof De&&e.variables.each(r)})),t;function i(e){t[e]=!0}function r(t){var r=t.name;if(t.global&&n&&n.has(r))r=n.get(r);else if(!t.unmangleable(e))return;i(r)}}),we.DEFMETHOD("expand_names",function(e){Re.reset(),Re.sort(),e=Ie(e);var n=this.find_colliding_names(e),t=0;function i(i){if(!(i.global&&e.cache||i.unmangleable(e)||e.reserved.has[i.name])){var r=i.redefined(),o=r?r.rename||r.name:function(){var e;do{e=Re(t++)}while(n[e]);return e}();i.rename=o,i.forEach(function(e){e.definition()===i&&(e.name=o)})}}this.globals.each(i),this.walk(new Te(function(e){e instanceof De&&e.variables.each(i)}))}),X.DEFMETHOD("tail_node",l),ee.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),we.DEFMETHOD("compute_char_frequency",function(e){e=Ie(e),Re.reset();var n=oe.prototype.add_source_map;try{oe.prototype.add_source_map=function(){this.unmangleable(e)||Re.consider(this.name,-1)},e.properties&&($.prototype.add_source_map=function(){Re.consider(this.property,-1)},te.prototype.add_source_map=function(){!function e(n){n instanceof ne?Re.consider(n.value,-1):n instanceof k?(e(n.consequent),e(n.alternative)):n instanceof ee&&e(n.tail_node())}(this.property)}),Re.consider(this.print_to_string(),1)}finally{oe.prototype.add_source_map=n,delete $.prototype.add_source_map,delete te.prototype.add_source_map}Re.sort()});var Re=function(){var e=Object.create(null);function n(n){for(var t=[],i=0;i<n.length;i++){var r=n[i];t.push(r),e[r]=-.01*i}return t}var t,i,r=n("0123456789"),o=n("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_");function a(){t=null,i=Object.create(e)}function s(e,n){return i[n]-i[e]}function f(e){var n=o[e%54];for(e=Math.floor(e/54);--e>=0;e>>=6)n+=t[63&e];return n}return f.consider=function(e,n){for(var t=e.length;--t>=0;)i[e[t]]+=n},f.sort=function(){t=o.sort(s).concat(r).sort(s)},f.reset=a,a(),f}();return{base54:Re,is_lhs:je,is_funarg:Fe,unary_side_effects:Pe}}),e("skylark-uglifyjs/compress",["./utils","./ast","./output","./parse","./scope"],function(e,n,t,i,r){"use strict";const{AST_Accessor:o,AST_Array:a,AST_Arrow:s,AST_Assign:f,AST_AsyncArrow:c,AST_AsyncDefun:u,AST_AsyncFunction:l,AST_AsyncGeneratorDefun:p,AST_AsyncGeneratorFunction:h,AST_Atom:d,AST_Await:v,AST_BigInt:_,AST_Binary:m,AST_Block:g,AST_BlockScope:b,AST_BlockStatement:y,AST_Boolean:w,AST_Break:S,AST_Call:x,AST_Case:k,AST_Catch:T,AST_Chain:A,AST_Class:E,AST_ClassExpression:D,AST_ClassField:O,AST_ClassGetter:q,AST_ClassInit:C,AST_ClassInitBlock:$,AST_ClassMethod:F,AST_ClassProperty:P,AST_ClassSetter:j,AST_ClassStaticBlock:z,AST_ConciseMethod:M,AST_Conditional:N,AST_Const:I,AST_Constant:R,AST_Continue:B,AST_Debugger:H,AST_Default:Y,AST_DefaultAssign:L,AST_DefaultValue:U,AST_DefClass:V,AST_Definitions:G,AST_Defun:W,AST_Destructuring:K,AST_Destructured:J,AST_DestructuredArray:X,AST_DestructuredKeyVal:Q,AST_DestructuredObject:Z,AST_Directive:ee,AST_Do:ne,AST_Dot:te,AST_DWLoop:ie,AST_EmptyStatement:re,AST_Exit:oe,AST_Expansion:ae,AST_Export:se,AST_ExportDeclaration:fe,AST_ExportDefault:ce,AST_ExportReferences:ue,AST_False:le,AST_Finally:pe,AST_For:he,AST_ForEnumeration:de,AST_ForIn:ve,AST_Function:_e,AST_Hole:me,AST_If:ge,AST_Import:be,AST_Infinity:ye,AST_IterationStatement:we,AST_Jump:Se,AST_LabeledStatement:xe,AST_Lambda:ke,AST_LambdaDefinition:Te,AST_LambdaExpression:Ae,AST_Let:Ee,AST_LoopControl:De,AST_NaN:Oe,AST_New:qe,AST_NewTarget:Ce,AST_Node:$e,AST_Null:Fe,AST_Number:Pe,AST_Object:je,AST_ObjectKeyVal:ze,AST_ObjectGetter:Me,AST_ObjectProperty:Ne,AST_ObjectIdentity:Ie,AST_ObjectMethod:Re,AST_ObjectSetter:Be,AST_PrefixedTemplateString:He,AST_PropAccess:Ye,AST_RegExp:Le,AST_Return:Ue,AST_Scope:Ve,AST_Sequence:Ge,AST_SimpleStatement:We,AST_Spread:Ke,AST_Statement:Je,AST_String:Xe,AST_Sub:Qe,AST_Super:Ze,AST_Switch:en,AST_SwitchBranch:nn,AST_Symbol:tn,AST_SymbolCatch:rn,AST_SymbolClass:on,AST_SymbolClassProperty:an,AST_SymbolConst:sn,AST_SymbolDeclaration:fn,AST_SymbolDefun:cn,AST_SymbolExport:un,AST_SymbolFunarg:ln,AST_SymbolImport:pn,AST_SymbolLambda:hn,AST_SymbolLet:dn,AST_SymbolMethod:vn,AST_SymbolRef:_n,AST_SymbolVar:mn,AST_Template:gn,AST_TemplateString:bn,AST_This:yn,AST_Throw:wn,AST_Toplevel:Sn,AST_True:xn,AST_Try:kn,AST_Unary:Tn,AST_UnaryPostfix:An,AST_UnaryPrefix:En,AST_Undefined:Dn,AST_Var:On,AST_VarDef:qn,AST_While:Cn,AST_With:$n,AST_Yield:Fn,TreeTransformer:Pn,TreeWalker:jn,_INLINE:zn,_NOINLINE:Mn,_PURE:Nn,first_in_statement:In,root_expr:Rn,is_arrow:Bn,is_generator:Hn,is_statement:Yn,is_async:Ln,walk_body:Un,walk_lambda:Vn}=n,{all:Gn,defaults:Wn,Dictionary:Kn,find_if:Jn,has_annotation:Xn,HOP:Qn,List:Zn,make_node:et,makePredicate:nt,MAP:tt,member:it,noop:rt,push_uniq:ot,regexp_source_fix:at,regexp_is_safe:st,remove:ft,return_false:ct,return_null:ut,return_true:lt,return_this:pt}=e,{is_basic_identifier_string:ht,JS_Parse_Error:dt,parse:vt,PRECEDENCE:_t,is_identifier_string:mt,UNARY_POSTFIX:gt}=i,{OutputStream:bt}=t,{base54:yt,is_lhs:wt,is_funarg:St,unary_side_effects:xt}=r;function kt(e,n){if(!(this instanceof kt))return new kt(e,n);Pn.call(this,this.before,this.after),this.options=Wn(e,{annotations:!n,arguments:!n,arrows:!n,assignments:!n,awaits:!n,booleans:!n,collapse_vars:!n,comparisons:!n,conditionals:!n,dead_code:!n,default_values:!n,directives:!n,drop_console:!1,drop_debugger:!n,evaluate:!n,expression:!1,functions:!n,global_defs:!1,hoist_exports:!n,hoist_funs:!1,hoist_props:!n,hoist_vars:!1,ie:!1,if_return:!n,imports:!n,inline:!n,join_vars:!n,keep_fargs:n,keep_fnames:!1,keep_infinity:!1,loops:!n,merge_vars:!n,module:!1,negate_iife:!n,objects:!n,optional_chains:!n,passes:1,properties:!n,pure_funcs:null,pure_getters:!n&&"strict",reduce_funcs:!n,reduce_vars:!n,rests:!n,sequences:!n,side_effects:!n,spreads:!n,strings:!n,switches:!n,templates:!n,top_retain:null,toplevel:!(!e||!e.module&&!e.top_retain),typeofs:!n,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!n,varify:!n,webkit:!1,yields:!n},!0);var t=this.options.evaluate;this.eval_threshold=/eager/.test(t)?1/0:+t;var i=this.options.global_defs;if("object"==typeof i)for(var r in i)/^@/.test(r)&&Qn(i,r)&&(i[r.slice(1)]=vt(i[r],{expression:!0}));!0===this.options.inline&&(this.options.inline=4),this.drop_fargs=this.options.keep_fargs?ct:function(e,n){if(e.length_read)return!1;var t=e.name;if(!t)return n&&"Call"==n.TYPE&&n.expression===e;if(t.fixed_value()!==e)return!1;var i=t.definition();if(i.direct_access)return!1;var r=i.escaped;return r&&1!=r.depth},this.options.module&&(this.directives["use strict"]=!0);var o=this.options.pure_funcs;"function"==typeof o?this.pure_funcs=o:"string"==typeof o?this.pure_funcs=function(e){var n;return e instanceof x?n=e.expression:e instanceof gn&&(n=e.tag),!(n&&o===n.print_to_string())}:Array.isArray(o)?this.pure_funcs=function(e){var n;return e instanceof x?n=e.expression:e instanceof gn&&(n=e.tag),!(n&&it(n.print_to_string(),o))}:this.pure_funcs=lt;var a=this.options.sequences;this.sequences_limit=1==a?800:0|a;var s=this.options.top_retain;s instanceof RegExp?this.top_retain=function(e){return s.test(e.name)}:"function"==typeof s?this.top_retain=s:s&&("string"==typeof s&&(s=s.split(/,/)),this.top_retain=function(e){return it(e.name,s)});var f=this.options.toplevel;this.toplevel="string"==typeof f?{funcs:/funcs/.test(f),vars:/vars/.test(f)}:{funcs:f,vars:f}}return kt.prototype=new Pn(function(e,n,t){if(e._squeezed)return e;var i=e instanceof Ve;i&&(this.option("arrows")&&Bn(e)&&e.value&&(e.body=[e.first_statement()],e.value=null),e.hoist_properties(this),e.hoist_declarations(this),e.process_returns(this)),n(e,this),n(e,this);var r=e.optimize(this);return!i||r!==e||this.has_directive("use asm")||r.pinned()||(r.drop_unused(this),r.merge_variables(this)&&r.drop_unused(this),n(r,this)),r===e&&(r._squeezed=!0),r}),kt.prototype.option=function(e){return this.options[e]},kt.prototype.exposed=function(e){if(e.exported)return!0;if(e.undeclared)return!0;if(!(e.global||e.scope.resolve()instanceof Sn))return!1;var n=this.toplevel;return!Gn(e.orig,function(e){return n[e instanceof cn?"funcs":"vars"]})},kt.prototype.compress=function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var n=this.options.merge_vars,t=+this.options.passes||1,i=1/0,r=!1,o={ie:this.option("ie")},a=0;a<t;a++)if(e.figure_out_scope(o),(a>0||this.option("reduce_vars"))&&e.reset_opt_flags(this),this.options.merge_vars=n&&(r||a==t-1),e=e.transform(this),t>1){var s=0;if(e.walk(new jn(function(){s++})),$e.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:a,min_count:i,count:s}),s<i)i=s,r=!1;else{if(r)break;r=!0}}return this.option("expression")&&e.process_expression(!1),e},function(e){function n(e,n){var t=n.get_property();if(!(t instanceof $e)){var i;if(e instanceof a){var r=e.elements;if("length"==t)return yt(r.length,e);"number"==typeof t&&t in r&&(i=r[t])}else if(e instanceof ke){if("length"==t)return e.length_read=!0,yt(e.argnames.length,e)}else if(e instanceof je){t=""+t;for(var o=e.properties,s=o.length;--s>=0;){var f=o[s];if(!or(f))return;i||o[s].key!==t||(i=o[s].value)}}return i instanceof _n&&i.fixed_value()||i}}function t(e,i,r,o,s,c,u){var l=i.parent(s);if(!(e.option("unsafe")&&l instanceof te&&function(e,n){if(e instanceof w)return ii.Boolean[n];if(e instanceof Pe)return ii.Number[n];if(e instanceof Xe)return ii.String[n];if("valueOf"==n)return!1;if(e instanceof a)return ii.Array[n];if(e instanceof ke)return ii.Function[n];if(e instanceof je)return ii.Object[n];if(e instanceof Le)return ii.RegExp[n]&&!e.value.global}(o,l.property))){var p=wt(r,l);if(p)return p;if(0!=s||!o||!o.is_constant()){if(l instanceof a)return t(e,i,l,l,s+1);if(l instanceof f)switch(l.operator){case"=":return t(e,i,l,o,s+1,c,u);case"&&=":case"||=":case"??=":return t(e,i,l,l,s+1);default:return}if(l instanceof m){if(!Wt[l.operator])return;return t(e,i,l,l,s+1)}if(l instanceof x)return!c&&l.expression===r&&!l.is_expr_pure(e)&&(!(o instanceof Ae)||!(l instanceof qe)&&o.contains_this());if(l instanceof N){if(l.condition===r)return;return t(e,i,l,l,s+1)}if(l instanceof de)return l.init===r;if(l instanceof ze){if(l.value!==r)return;var h=i.parent(s+1);return t(e,i,h,h,s+2)}if(l instanceof Ye){if(l.expression!==r)return;var d=n(o,l);return(!c||u)&&t(e,i,l,d,s+1)}if(l instanceof Ge){if(l.tail_node()!==r)return;return t(e,i,l,o,s+1,c,u)}}}}function i(e){return e instanceof E||e instanceof ke}function r(e){return e instanceof E||e instanceof W||e instanceof _e}function A(e){return"arguments"==e.name&&e.scope.uses_arguments}function z(e,n){do{if(e===n)return!1;if(n instanceof Ve)return!0}while(n=n.parent_scope)}function M(e,n,t){var i=e.redef||e.definition();return(!e.in_arg||!St(i))&&Gn(i.orig,function(e){return e instanceof sn||e instanceof dn?e instanceof pn||n&&Ci(n,e):!(t&&e instanceof hn)})}function L(e,n,t,i){return i instanceof f?"="==i.operator&&i.right===t:i instanceof x?i.expression!==t||i instanceof qe:i instanceof O?i.value===t&&!i.static:i instanceof oe?i.value===t&&n.resolve()!==e.scope.resolve():i instanceof qn?i.value===t:void 0}function K(e,n){var t=st(_n,e);return t.fixed=n||st(Dn,e),t}function ae(e,n){return function(t){var i=e(t),t=K(i,n),r=i.definition();return r.references.push(t),r.replaced++,t}}e($e,function(e,n){return e}),Sn.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var n=this.body,t=[],i=0;i<n.length;i++){var r=n[i];r instanceof fe?(n[i]=r=r.body,r instanceof G?r.definitions.forEach(function(e){e.name.match_symbol(o,!0)}):o(r.name)):r instanceof ue&&(n.splice(i--,1),[].push.apply(t,r.properties))}t.length&&n.push(st(ue,this,{properties:t}))}function o(e){if(e instanceof fn){var n=st(un,e);n.alias=st(Xe,n,{value:n.name}),t.push(n)}}}),Ve.DEFMETHOD("process_expression",function(e,n){var t=this,i=new Pn(function(r){if(e){if(r instanceof ee&&(r=st(We,r,{body:st(Xe,r)})),r instanceof We)return n?n(r):st(Ue,r,{value:r.body})}else if(r instanceof Ue){if(n)return n(r);var o=r.value;return o instanceof Xe?st(ee,o):st(We,r,{body:o||st(En,r,{operator:"void",expression:st(Pe,r,{value:0})})})}if(r instanceof g){if(r instanceof ke){if(r!==t)return r}else if("awaits"===e&&r instanceof kn&&r.bfinally)return r;for(var a=r.body.length;--a>=0;){var s=r.body[a];if(!Ht(s,!0)){r.body[a]=s.transform(i);break}}}else r instanceof ge?(r.body=r.body.transform(i),r.alternative&&(r.alternative=r.alternative.transform(i))):r instanceof $n&&(r.body=r.body.transform(i));return r});t.transform(i)}),Sn.DEFMETHOD("unwrap_expression",function(){switch(this.body.length){case 0:return st(En,this,{operator:"void",expression:st(Pe,this,{value:0})});case 1:var e=this.body[0];if(e instanceof ee)return st(Xe,e);if(e instanceof We)return e.body;default:return st(x,this,{expression:st(_e,this,{argnames:[],body:this.body}).init_vars(this),args:[]})}}),$e.DEFMETHOD("wrap_expression",function(){var e=this;return Yn(e)||(e=st(We,e,{body:e})),e instanceof Sn||(e=st(Sn,e,{body:[e]})),e});var se=/^(0|[1-9][0-9]*)$/;function He(e){e._squeezed=!1,e._optimized=!1,e instanceof b&&(e._var_names=void 0),e instanceof _n&&(e.fixed=void 0)}function an(e,n){return this.transform(new Pn(function(t,i){return t instanceof U?((t=t.clone()).name=t.name.transform(this),t):t instanceof J?(t=t.clone(),i(t,this),t):t instanceof Q?((t=t.clone()).value=t.value.transform(this),t):t.convert_symbol(e,n)}))}function vn(e,n){var t=st(e,this);return n(t,this)||t}function bn(e){var n=e.definition();n.assignments++,n.references.push(e)}function zn(e,n){var t=new jn(function(i){return i instanceof U?(i.value.walk(n),i.name.walk(t),!0):i instanceof Q?(i.key instanceof $e&&i.key.walk(n),i.value.walk(t),!0):e(i)});this.walk(t)}function Mn(e){return e(this)}function Nn(e,n){var t=!1,i=new jn(function(r){return!!t||(r instanceof U?n?(r.name.walk(i),!0):t=!0:r instanceof Q?!n&&r.key instanceof $e?t=!0:(r.value.walk(i),!0):e(r)?t=!0:void 0)});return this.walk(i),t}function Wn(e){return e instanceof p||e instanceof h}function Xn(e){var n=0,t=e.self();do{if(t.variables)return t}while(t=e.parent(n++))}function et(e,n,t,i,r,o){for(var a;a=e.parent(n++);t=a){if(a===i)return!1;if(o&&a instanceof ke){if(a.name||Ln(a)||Hn(a))return!0}else if(a instanceof kn){if(a.bfinally&&a.bfinally!==t)return!0;if(r&&a.bcatch&&a.bcatch!==t)return!0}}return!1}!function(e){function r(e,n,t){t.assignments=0,t.bool_return=0,t.drop_return=0,t.cross_loop=!1,t.direct_access=!1,t.escaped=[],t.fixed=!t.const_redefs&&!t.scope.pinned()&&!n.exposed(t)&&!(t.init instanceof Ae&&t.init!==t.scope)&&t.init,t.reassigned=0,t.recursive_refs=0,t.references=[],t.single_use=void 0}function o(e,n,t){t.variables.each(function(t){r(e,n,t)})}function s(e,n,t){t.fn_defs=[],t.variables.each(function(i){r(e,n,i);var o=i.init;o instanceof Te&&(t.fn_defs.push(o),o.safe_ids=null),null===i.fixed?(i.safe_ids=e.safe_ids,_(e,i)):i.fixed&&(e.loop_ids[i.id]=e.in_loop,_(e,i))}),t.may_call_this=function(){t.may_call_this=t.contains_this()?lt:ct},t.uses_arguments&&t.each_argname(function(e){e.definition().last_ref=!1}),n.option("ie")&&t.variables.each(function(e){var n=e.orig[0].definition();n!==e&&(n.fixed=!1)})}function c(e,n){var t=n.safe_ids;return void 0===t||t===e.safe_ids}function u(e,n){var t=e.fn_scanning;e.fn_scanning=n,n.walk(e),e.fn_scanning=t}function l(e,n){n.enclosed.forEach(function(t){if(n.variables.get(t.name)!==t&&!y(e,t)){t.single_use=!1;var i=t.fixed;"function"==typeof i&&(i=i()),i instanceof ke&&void 0!==i.safe_ids||(t.fixed=!1)}})}function p(e,n,t){var i=t.safe_ids;if(void 0!==i&&!1!==i)if(t.parent_scope.resolve().may_call_this===lt)it(t,e.fn_visited)&&l(e,t);else if(i){var r=it(t,e.fn_visited);i===e.safe_ids?r||u(e,t):r?l(e,t):t.safe_ids=!1}else e.fn_scanning&&e.fn_scanning!==n.scope.resolve()?t.safe_ids=!1:(t.safe_ids=e.safe_ids,u(e,t))}function h(e,n){var t=n.fn_defs,i=n.may_call_this===lt?t:t.filter(function(n){return!1===n.safe_ids||(n.safe_ids=e.safe_ids,u(e,n),!1)});v(e),i.forEach(function(n){n.safe_ids=e.safe_ids,u(e,n)}),t.forEach(function(e){e.safe_ids=void 0}),n.fn_defs=void 0,n.may_call_this=void 0}function d(e,n){var t=Object.create(e.safe_ids);n||(t.seq={}),e.safe_ids=t}function v(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function _(e,n){e.safe_ids[n.id]={}}function g(e,n){e.references.push(n),!1!==e.last_ref&&(e.last_ref=n)}function y(e,n){if("m"==n.single_use)return!1;var t=e.safe_ids[n.id];if(t){var i=Qn(e.safe_ids,n.id);if(!i){var r=e.safe_ids.seq;t.read?t.read!==r&&(t.read=!0):t.read=r}return null==n.fixed?!A(n)&&((!n.global||"arguments"!=n.name)&&(e.loop_ids[n.id]=null,n.fixed=st(Dn,n.orig[0]),i&&(n.safe_ids=void 0),!0)):!t.assign||t.assign===e.safe_ids}return n.fixed instanceof Te}function w(e,n,t){if(!t){if(St(n)&&n.scope.uses_arguments&&!e.has_directive("use strict"))return!1;if(!Gn(n.orig,function(e){return!(e instanceof sn)}))return!1}if(void 0===n.fixed)return t||Gn(n.orig,function(e){return!(e instanceof dn)});if(!1===n.fixed||0===n.fixed)return!1;var i=e.safe_ids[n.id];if(n.safe_ids)return n.safe_ids[n.id]=!1,n.safe_ids=void 0,null===n.fixed||Qn(e.safe_ids,n.id)&&!i.read;if(!Qn(e.safe_ids,n.id)){if(!i)return!1;if(i.read||e.in_loop){var r=e.find_parent(b);if(r instanceof E)return!1;if(n.scope.resolve()!==r.resolve())return!1}i.assign=!(!i.assign||i.assign===e.safe_ids)||e.safe_ids}if(null!=n.fixed&&i.read){if(i.read!==e.safe_ids.seq)return!1;if(e.loop_ids[n.id]!==e.in_loop)return!1}return y(e,n)&&Gn(n.orig,function(e){return!(e instanceof hn)})}function S(e){if(!e)return!1;if(e instanceof f){var n=e.operator;return"="==n?S(e.right):!Wt[n.slice(0,-1)]}return e instanceof Ge?S(e.tail_node()):e.is_constant()||i(e)||e instanceof Ie}function k(e,t,i,r,o,s,f){var c=e.parent(s);if(!o||!o.is_constant()){if(L(t,i,r,c))return t.escaped.push(c),!(f>1)||o&&o.is_constant_expression(i)||(f=1),(!t.escaped.depth||t.escaped.depth>f)&&(t.escaped.depth=f),t.scope.resolve()!==i.resolve()&&(t.escaped.cross_scope=!0),void(t.fixed&&(t.fixed.escaped=t.escaped));if(function(e,n){if(n instanceof a)return!0;if(n instanceof m)return Wt[n.operator];if(n instanceof N)return n.condition!==e;if(n instanceof Ge)return n.tail_node()===e;if(n instanceof Ke)return!0}(r,c))k(e,t,i,c,c,s+1,f);else if(c instanceof ze&&c.value===r){var u=e.parent(s+1);k(e,t,i,u,u,s+2,f)}else if(c instanceof Ye&&c.expression===r&&(o=n(o,c),k(e,t,i,c,o,s+1,f+1),o))return;s>0||c instanceof x&&c.expression===r||c instanceof Ge&&c.tail_node()!==r||c instanceof We||c instanceof Tn&&!xt[c.operator]||(t.direct_access=!0,t.fixed&&(t.fixed.direct_access=!0))}}function T(e){if(e instanceof Qe){var n=e.expression;if(n instanceof _n){var t=n.definition();if(A(t)){var i=e.property;i.is_constant()&&(i=i.value),(i instanceof $e||se.test(i))&&(t.reassigned++,(i instanceof $e?t.scope.argnames:[t.scope.argnames[i]]).forEach(function(e){e instanceof ln&&(e.definition().fixed=!1)}))}}}}function D(e,n){var t,i;return function(){var r=e();return t!==r&&(t=r,i=n(r)),i}}function O(e,n,t,i,r){var o=new jn(function(t){if(t instanceof U){He(t),d(e,!0),t.value.walk(e),v(e);var s=i;return s&&(i=function(e,n,t){var i,r;return function(){if(r===n)return n;var o=t(),a=Ti(e,o,!0);return a instanceof $e?r=n:i!==o&&(i=o,r=void 0===a?ht(n,[o,n.value]):o),r}}(n,t,s)),t.name.walk(o),i=s,!0}if(t instanceof X){He(t);var f,s=i;if(t.elements.forEach(function(e,n){if(e instanceof me)return He(e);s&&(i=D(s,function(t){return st(Qe,e,{expression:t,property:st(Pe,e,{value:n})})})),e.walk(o)}),t.rest)s&&(i=n.option("rests")&&D(s,function(e){if(!(e instanceof a))return t;for(var n=0,i=t.elements.length;n<i;n++)if(e.elements[n]instanceof Ke)return t;return f||(f=st(a,t,{})),f.elements=e.elements.slice(i),f})),t.rest.walk(o);return i=s,!0}if(t instanceof Z){He(t);var s=i;return t.properties.forEach(function(n){He(n),n.key instanceof $e&&(d(e),n.key.walk(e),v(e)),s&&(i=D(s,function(e){var t=n.key,i=Qe;return"string"==typeof t&&(mt(t)?i=te:t=yt(t,n)),st(i,n,{expression:e,property:t})})),n.value.walk(o)}),t.rest&&(i=!1,t.rest.walk(o)),i=s,!0}return r(t,i,function(){for(var n=e.stack.length,i=0,r=o.stack.length-1;i<r;i++)e.stack.push(o.stack[i]);t.walk(e),e.stack.length=n}),!0});t.walk(o)}function q(e,n,t){var i=this;i.inlined=!1;var r=e.parent(),o=!Ln(i)&&!Hn(i),f=!o,c=!1;i.walk(new jn(function(e){return f?c=!0:e instanceof Ue?f=!0:e instanceof Ve&&e!==i||void 0})),c&&d(e,o),s(e,t,i);var u=!i.uses_arguments||e.has_directive("use strict");i.argnames.forEach(function(n,o){var a=r.args[o];O(e,t,n,function(){var e=i.argnames.indexOf(n),t=e<0?a:r.args[e];return t instanceof Ge&&t.expressions.length<2&&(t=t.expressions[0]),t||st(Dn,r)},m)});var l,p=i.rest;p&&O(e,t,p,t.option("rests")&&function(){return i.rest!==p?p:(l||(l=st(a,i,{})),l.elements=r.args.slice(i.argnames.length),l)},m),Vn(i,e);var v=e.safe_ids;return h(e,i),c||(e.safe_ids=v),!0;function m(n,t){var i=n.definition();t&&u&&void 0===i.fixed?(_(e,i),e.loop_ids[i.id]=e.in_loop,i.fixed=t,i.fixed.assigns=[n]):i.fixed=!1}}e($e,rt),e(f,function(e,n,i){var r=this,o=r.left,a=r.right,s=o instanceof _n&&o.definition(),f=s||o instanceof J;switch(r.operator){case"=":return o.equals(a)&&!o.has_side_effects(i)?(a.walk(e),function n(t){He(t);if(t instanceof te)n(t.expression);else if(t instanceof Qe)n(t.expression),t.property.walk(e);else if(t instanceof _n){var i=t.definition();g(i,t),i.fixed&&(t.fixed=i.fixed,t.fixed.assigns?t.fixed.assigns.push(r):t.fixed.assigns=[r])}else t.walk(e)}(o),r.redundant=!0,!0):s&&a instanceof Ae?(h(),a.parent_scope.resolve().fn_defs.push(a),a.safe_ids=null,s.fixed&&r.write_only||p(e,s,a),!0):f?(a.walk(e),h(),!0):void T(o);case"&&=":case"||=":case"??=":var c=!0;default:if(!f)return T(o),b();s.assignments++;var u=s.fixed;if(t(i,e,r,r,0))return s.fixed=!1,b();var l=y(e,s);return c&&d(e,!0),a.walk(e),c&&v(e),l&&!o.in_arg&&w(e,s)?(g(s,o),_(e,s),s.single_use&&(s.single_use=!1),o.fixed=s.fixed=function(){return st(m,r,{operator:r.operator.slice(0,-1),left:K(o,u),right:r.right})},o.fixed.assigns=u&&u.assigns?u.assigns.slice():[s.orig[0]],o.fixed.assigns.push(r),o.fixed.to_binary=ae(function(e){return e.left},u)):(o.walk(e),s.fixed=!1),!0}function h(){var n=s&&Ji(e,s),f=t(i,e,r,a,0,S(a),n);O(e,i,o,function(){return r.right},function(n,t,i){if(!(n instanceof _n))return T(n),void i();var s=n.definition();s.assignments++,t&&!n.in_arg&&w(e,s)?(g(s,n),_(e,s),(o instanceof J||1==s.orig.length&&s.orig[0]instanceof cn)&&(s.single_use=!1),e.loop_ids[s.id]=e.in_loop,s.fixed=f?0:t,n.fixed=t,n.fixed.assigns=[r],k(e,s,n.scope,r,a,0,1)):(i(),s.fixed=!1)})}function b(){if(c)return o.walk(e),d(e,!0),a.walk(e),v(e),!0}}),e(m,function(e){if(Wt[this.operator])return this.left.walk(e),d(e,!0),this.right.walk(e),v(e),!0}),e(b,function(e,n,t){o(e,t,this)}),e(x,function(e,n){var t=this.expression;if(t instanceof Ae){var i=zt(this);return this.args.forEach(function(n){n.walk(e),n instanceof Ke&&(i=!1)}),i&&(t.reduce_vars=q),t.walk(e),i&&delete t.reduce_vars,!0}if("Call"==this.TYPE)switch(e.in_boolean_context()){case"d":var r=!0;case!0:!function e(n,t){if(n instanceof f){if("="!=n.operator)return;e(n.left,t),e(n.right,t)}else if(n instanceof m){if(!Wt[n.operator])return;e(n.left,t),e(n.right,t)}else if(n instanceof N)e(n.consequent,t),e(n.alternative,t);else if(n instanceof _n){var i=n.definition();i.bool_return++,t&&i.drop_return++}}(t,r)}t.walk(e);var o=this.optional;o&&d(e,!0),this.args.forEach(function(n){n.walk(e)}),o&&v(e);var a=t instanceof _n&&t.fixed_value();return a instanceof ke?p(e,t.definition(),a):e.find_parent(Ve).may_call_this(),!0}),e(E,function(e,n,t){var i=this;o(e,t,i),i.extends&&i.extends.walk(e);var r=i.properties.filter(function(n){return He(n),n.key instanceof $e&&(e.push(n),n.key.walk(e),e.pop()),n.value});if(i.name){var a=i.name.definition(),s=e.parent();(s instanceof fe||s instanceof ce)&&(a.single_use=!1),w(e,a,!0)?(_(e,a),e.loop_ids[a.id]=e.in_loop,a.fixed=function(){return i},a.fixed.assigns=[i],Di(a)||(a.single_use=!1)):a.fixed=!1}return r.forEach(function(n){e.push(n),!n.static||Rt(n)&&n.value.contains_this()?(d(e),n.value.walk(e),v(e)):n.value.walk(e),e.pop()}),!0}),e($,function(e,n,t){return d(e,!0),s(e,t,this),n(),h(e,this),!0}),e(N,function(e){return this.condition.walk(e),d(e,!0),this.consequent.walk(e),v(e),d(e,!0),this.alternative.walk(e),v(e),!0}),e(U,function(e){return d(e,!0),this.value.walk(e),v(e),this.name.walk(e),!0}),e(ne,function(e){var n=e.in_loop;return e.in_loop=this,d(e),this.body.walk(e),xi(this,e.parent())&&(v(e),d(e)),this.condition.walk(e),v(e),e.in_loop=n,!0}),e(he,function(e,n,t){o(e,t,this),this.init&&this.init.walk(e);var i=e.in_loop;return e.in_loop=this,d(e),this.condition&&this.condition.walk(e),this.body.walk(e),this.step&&(xi(this,e.parent())&&(v(e),d(e)),this.step.walk(e)),v(e),e.in_loop=i,!0}),e(de,function(e,n,t){o(e,t,this),this.object.walk(e);var i=e.in_loop;e.in_loop=this,d(e);var r=this.init;return r instanceof G?r.definitions[0].name.mark_symbol(function(e){if(e instanceof fn){var n=e.definition();n.assignments++,n.fixed=!1}},e):r instanceof J||r instanceof _n?r.mark_symbol(function(e){if(e instanceof _n){var n=e.definition();g(n,e),n.assignments++,e.is_immutable()||(n.fixed=!1)}},e):r.walk(e),this.body.walk(e),v(e),e.in_loop=i,!0}),e(ge,function(e){return this.condition.walk(e),d(e,!0),this.body.walk(e),v(e),this.alternative&&(d(e,!0),this.alternative.walk(e),v(e)),!0}),e(xe,function(e){return d(e,!0),this.body.walk(e),v(e),!0}),e(ke,function(e,n,t){var i=this;return!c(e,i)||(!ot(e.fn_visited,i)||(i.inlined=!1,d(e),s(e,t,i),n(),h(e,i),i.name&&k(e,i.name.definition(),i,i.name,i,0,1),!0))}),e(Te,function(e,n,t){var i=this,r=i.name.definition(),o=e.parent();return(o instanceof fe||o instanceof ce)&&(r.single_use=!1),!c(e,i)||(!ot(e.fn_visited,i)||(i.inlined=!1,d(e),s(e,t,i),n(),h(e,i),!0))}),e(Qe,function(e){if(this.optional)return this.expression.walk(e),d(e,!0),this.property.walk(e),v(e),!0}),e(en,function(e,n,t){o(e,t,this),this.expression.walk(e);var i=!0;return this.body.forEach(function(n){n instanceof Y||(n.expression.walk(e),i&&(i=!1,d(e,!0)))}),i||v(e),Un(this,e),!0}),e(nn,function(e){return d(e,!0),Un(this,e),v(e),!0}),e(rn,function(){this.definition().fixed=!1}),e(pn,function(){this.definition().fixed=!1}),e(_n,function(e,n,r){var o=this,a=o.definition(),s=a.fixed||a.last_ref&&a.last_ref.fixed;g(a,o),1==a.references.length&&!a.fixed&&a.orig[0]instanceof cn&&(e.loop_ids[a.id]=e.in_loop);var f,c=Ji(e,a);switch(c&&c.enclosed.forEach(function(n){if(a!==n&&n.scope.resolve()!==c){var t=n.fixed&&n.fixed.assigns;if(t&&!(t[t.length-1]instanceof qn)){var i=e.safe_ids[n.id];i&&(i.assign=!0)}}}),"m"==a.single_use&&a.fixed&&(a.fixed=0,a.single_use=!1),a.fixed){case 0:y(e,a)||(a.fixed=!1);case!1:var u=a.redefined();u&&z(a.scope,o.scope)&&(u.single_use=!1);break;case void 0:a.fixed=!1;break;default:if(!y(e,a)){a.fixed=!1;break}o.in_arg&&a.orig[0]instanceof hn&&(o.fixed=a.scope);var l=o.fixed_value();c?a.recursive_refs++:l&&function(e,n){return e.option("unused")&&!n.scope.pinned()&&!1!==n.single_use&&n.references.length-n.recursive_refs==1&&!(St(n)&&n.scope.uses_arguments)}(r,a)?(a.in_loop=e.loop_ids[a.id]!==e.in_loop,a.single_use=i(l)&&!l.pinned()&&(!a.in_loop||e.parent()instanceof x)||!a.in_loop&&a.scope===o.scope.resolve()&&l.is_constant_expression()):a.single_use=!1,t(r,e,o,l,0,S(l),c)&&(a.single_use?a.single_use="m":a.fixed=0),a.fixed&&e.loop_ids[a.id]!==e.in_loop&&(a.cross_loop=!0),k(e,a,o.scope,o,l,0,1)}o.fixed||(o.fixed=0===a.fixed?s:a.fixed),l instanceof ke&&!((f=e.parent())instanceof x&&f.expression===o)&&p(e,a,l)}),e(gn,function(e,n){var t=this.tag;if(t){if(t instanceof Ae)return this.expressions.forEach(function(n){n.walk(e)}),t.walk(e),!0;t.walk(e),this.expressions.forEach(function(n){n.walk(e)});var i=t instanceof _n&&t.fixed_value();return i instanceof ke?p(e,t.definition(),i):e.find_parent(Ve).may_call_this(),!0}}),e(Sn,function(e,n,t){return this.globals.each(function(n){r(e,t,n)}),d(e,!0),s(e,t,this),n(),h(e,this),!0}),e(kn,function(e,n,t){return o(e,t,this),d(e,!0),Un(this,e),v(e),this.bcatch&&(d(e,!0),this.bcatch.walk(e),v(e)),this.bfinally&&this.bfinally.walk(e),!0}),e(Tn,function(e,n){var t=this;if(gt[t.operator]){var i=t.expression;if(i instanceof _n){var r=i.definition();r.assignments++;var o=r.fixed;return y(e,r)&&!i.in_arg&&w(e,r)?(g(r,i),_(e,r),r.single_use&&(r.single_use=!1),r.fixed=function(){return st(m,t,{operator:t.operator.slice(0,-1),left:st(En,t,{operator:"+",expression:K(i,o)}),right:st(Pe,t,{value:1})})},r.fixed.assigns=o&&o.assigns?o.assigns.slice():[],r.fixed.assigns.push(t),t instanceof En?i.fixed=r.fixed:(i.fixed=function(){return st(En,t,{operator:"+",expression:K(i,o)})},i.fixed.assigns=o&&o.assigns,i.fixed.to_prefix=ae(function(e){return e.expression},r.fixed))):(i.walk(e),r.fixed=!1),!0}T(i)}}),e(qn,function(e,n,t){var i=this,r=i.value;if(r instanceof Ae&&i.name instanceof fn){a(),r.parent_scope.resolve().fn_defs.push(r),r.safe_ids=null;var o=i.name.definition();o.fixed||p(e,o,r)}else r?(r.walk(e),a()):e.parent()instanceof Ee&&a();return!0;function a(){O(e,t,i.name,function(){return i.value||st(Dn,i)},function(n,t){var r=n.definition();t&&w(e,r,!0)?(_(e,r),e.loop_ids[r.id]=e.in_loop,r.fixed=t,r.fixed.assigns=[i],(n instanceof sn&&r.redefined()||!M(n)&&!Di(r))&&(r.single_use=!1)):r.fixed=!1})}}),e(Cn,function(e,n){var t=e.in_loop;return e.in_loop=this,d(e),n(),v(e),e.in_loop=t,!0})}(function(e,n){e.DEFMETHOD("reduce_vars",n)}),Sn.DEFMETHOD("reset_opt_flags",function(e){var n=new jn(e.option("reduce_vars")?function(t,i){return He(t),t.reduce_vars(n,i,e)}:He);n.fn_scanning=null,n.fn_visited=[],n.in_loop=null,n.loop_ids=Object.create(null),n.safe_ids=Object.create(null),n.safe_ids.seq={},this.walk(n)}),tn.DEFMETHOD("fixed_value",function(e){var n=this.definition(),t=n.fixed;if(t)return this.fixed&&(t=this.fixed),(t instanceof $e?t:t()).tail_node();if(!(t=0===t&&this.fixed))return t;var i=(t instanceof $e?t:t()).tail_node();return e&&1!=n.escaped.depth&&Li(i,!0)?i:i.is_constant()?i:void 0}),_n.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return e.orig[0]instanceof hn&&(1==e.orig.length||!!this.in_arg&&!(e.orig[1]instanceof ln))}),$e.DEFMETHOD("convert_symbol",rt),U.DEFMETHOD("convert_symbol",an),J.DEFMETHOD("convert_symbol",an),fn.DEFMETHOD("convert_symbol",vn),_n.DEFMETHOD("convert_symbol",vn),U.DEFMETHOD("mark_symbol",zn),J.DEFMETHOD("mark_symbol",zn),fn.DEFMETHOD("mark_symbol",Mn),_n.DEFMETHOD("mark_symbol",Mn),$e.DEFMETHOD("match_symbol",function(e){return e(this)}),U.DEFMETHOD("match_symbol",Nn),J.DEFMETHOD("match_symbol",Nn);var tt=nt("Infinity NaN undefined");function at(e,n){if(e instanceof d)return!0;if(e instanceof Ie)return!0;if(e instanceof Ye){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof _n){if(e.is_immutable())return!1;e=e.fixed_value()}return!e||(!!e.tail_node().is_constant()||at(e,n))}if(e instanceof _n){if(e.is_immutable())return!0;var t=e.definition();return n.exposed(t)&&tt[t.name]}return!1}function st(e,n,t){return t?(t.start=n.start,t.end=n.end):t=n,new e(t)}function ht(e,n){return 1==n.length?n[0]:st(Ge,e,{expressions:n.reduce(Dt,[])})}function yt(e,n){switch(typeof e){case"string":return st(Xe,n,{value:e});case"number":return isNaN(e)?st(Oe,n):isFinite(e)?1/e<0?st(En,n,{operator:"-",expression:st(Pe,n,{value:-e})}):st(Pe,n,{value:e}):e<0?st(En,n,{operator:"-",expression:st(ye,n)}):st(ye,n);case"boolean":return st(e?xn:le,n);case"undefined":return st(Dn,n);default:if(null===e)return st(Fe,n);if(e instanceof RegExp)return st(Le,n,{value:e});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof e}))}}function Tt(e){return e instanceof Ye||Mt(e)&&"eval"==e.name}function At(e,n,t){var i=!1;return"Call"==e.TYPE?i=e.expression===n&&Tt(t):e instanceof gn?i=e.tag===n&&Tt(t):e instanceof En&&(i="delete"==e.operator||"typeof"==e.operator&&Mt(t)),i?ht(n,[st(Pe,n,{value:0}),t]):t}function Et(e,n){var t=new Kn;return e.walk(new jn(function(e){if(e instanceof _n){var n=e.definition(),i=e.fixed;i&&t.has(n.id)?t.get(n.id)!==i&&t.set(n.id,!1):t.set(n.id,i)}})),t.size()>0&&n.walk(new jn(function(e){if(e instanceof _n){var n=e.definition(),i=e.fixed;i&&t.has(n.id)&&t.get(n.id)!==i&&(e.fixed=!1)}})),n}function Dt(e,n){return n instanceof Ge?[].push.apply(e,n.expressions):e.push(n),e}function Ot(e){return e instanceof I||e instanceof V||e instanceof Ee}function qt(e){if(e instanceof Te){var n=e.name.definition(),t=e.name.scope;return n.scope===t||Gn(n.references,function(e){var n=e.scope;do{if(n===t)return!0}while(n=n.parent_scope)})}return!Ot(e)}function Ct(e){if(null===e)return[];if(e instanceof y)return Gn(e.body,qt)?e.body:[e];if(e instanceof re)return[];if(Yn(e))return[e];throw new Error("Can't convert thing to statement array")}function $t(e){return null===e||(e instanceof re||e instanceof y&&0==e.body.length)}function Ft(e){return Gn(e.body,function(e){return $t(e)||e instanceof W||e instanceof On&&Bt(e)})}function Pt(e){return e instanceof we&&e.body instanceof y?e.body:e}function jt(e){if("Call"!=e.TYPE)return!1;do{e=e.expression}while(e instanceof Ye);return e instanceof Ae?!Bn(e):jt(e)}function zt(e){var n=e.expression;if(n.name)return!1;if(!(e instanceof qe))return!0;var t=!1;return n.walk(new jn(function(e){return!!t||(e instanceof Ce?t=!0:e instanceof Ve&&e!==n||void 0)})),!t}function Mt(e){return e instanceof _n&&e.definition().undeclared}var Nt,It=nt("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet");function Rt(e){return e.static&&e.value&&(e instanceof O||e instanceof C)}function Bt(e){return Gn(e.definitions,function(e){return!e.value})}function Ht(e,n){return e instanceof V?n&&!e.extends&&Gn(e.properties,function(e){return!(e.key instanceof $e)&&!Rt(e)}):e instanceof G?(n||e instanceof On)&&Bt(e):e instanceof fe?Ht(e.body,n):e instanceof ce?Ht(e.body,n):e instanceof Te}function Yt(e,n){var t=e.lastIndexOf(n);if(t<0)return!1;for(;++t<e.length;)if(!Ht(e[t],!0))return!1;return!0}function Lt(e,n){var t;if(e.init instanceof y&&(t=e.init,e.init=t.body.pop(),t.body.push(e)),e.init instanceof W?(t||(t=st(y,e,{body:[e]})),t.body.splice(-1,0,e.init),e.init=null):e.init instanceof We?e.init=e.init.body:$t(e.init)&&(e.init=null),t)return n?Zn.splice(t.body):t}function Ut(e,n){var i,s,c,u,l,p,h=D(n,function(e){return e instanceof ke});!function(){var e=n.self(),t=0;do{if(!i&&e.variables&&(i=e),e instanceof T)n.parent(t).bfinally&&(l||(l={}),l.bfinally=!0),t++;else if(e instanceof pe)t++;else if(e instanceof we)u=!0;else{if(e instanceof Ve){p=e;break}e instanceof kn&&(l||(l={}),e.bcatch&&(l.bcatch=!0),e.bfinally&&(l.bfinally=!0))}}while(e=n.parent(t++))}();var d,_,w=10;do{if(_=d,d=0,$(e)&&(d=1),!d&&1==_)break;if(n.option("dead_code")&&(P(e,n)&&(d=2),!d&&2==_))break;if(n.option("if_return")&&(F(e,n)&&(d=3),!d&&3==_))break;if(n.option("awaits")&&n.option("side_effects")&&(j(e,n)&&(d=4),!d&&4==_))break;if(n.option("inline")>=4&&(z(e,n)&&(d=5),!d&&5==_))break;if(n.sequences_limit>0){if(R(e,n)&&(d=6),!d&&6==_)break;if(ae(e,n)&&(d=7),!d&&7==_)break}if(n.option("join_vars")&&(ye(e)&&(d=8),!d&&8==_))break;n.option("collapse_vars")&&q(e,n)&&(d=9)}while(d&&w-- >0);return e;function D(e,n){var t,i=e.self(),r=0;do{if(i instanceof T)i=e.parent(r++);else if(i instanceof xe)i=i.body;else if(i instanceof nn){var o=e.parent(r);(o.body[o.body.length-1]===i||a(i.body))&&(r++,i=o)}do{if(n(t=i))return t;i=e.parent(r++)}while(i instanceof ge)}while(t&&(i instanceof y||i instanceof T||i instanceof Ve||i instanceof nn||i instanceof kn)&&Yt(i.body,t));function a(e){for(var n=e.length;--n>=0;)if(e[n]instanceof S)return!0;return!1}}function q(e,n){if(!p.pinned()){for(var h,d,_=new Kn,w=[],S=!1,T=new Kn,D=e.length,q=new Pn(function(e,t){if(Fe)return e;if(!Ce)return e!==F[j]?e:++j<F.length?Xe(e,q):(Ce=!0,(K=(V?function e(n,t){var i=q.parent(t);if(i instanceof a)return e(i,t+1);if(i instanceof f){return le(i)?n:i.left.match_symbol(function(e){return e instanceof _n&&(re.name==e.name||V.name==e.name)})?n:i.left!==n&&Wt[r=i.operator.slice(0,-1)]?un(i,r,t):e(i,t+1)}if(i instanceof v)return e(i,t+1);if(i instanceof m){var r;return i.left!==n&&Wt[r=i.operator]?un(i,r,t):e(i,t+1)}if(i instanceof x)return i;if(i instanceof k)return i.expression!==n?n:e(i,t+1);if(i instanceof N)return i.condition!==n?n:e(i,t+1);if(i instanceof G)return hn(i,t+1);if(i instanceof ne)return n;if(i instanceof oe)return hn(i,t+1);if(i instanceof he)return i.init!==n&&i.condition!==n?n:e(i,t+1);if(i instanceof de)return i.init!==n?n:e(i,t+1);if(i instanceof ge)return i.condition!==n?n:e(i,t+1);if(i instanceof Ne){var o=q.parent(t+1);return Gn(o.properties,function(e){return e instanceof ze})?e(o,t+2):o}if(i instanceof Ye){var s=i.expression;return s===n?e(i,t+1):n}if(i instanceof Ge)return(i.tail_node()===n?e:hn)(i,t+1);if(i instanceof We)return hn(i,t+1);if(i instanceof Ke)return e(i,t+1);if(i instanceof en)return i.expression!==n?n:e(i,t+1);if(i instanceof Tn)return"delete"==i.operator?n:e(i,t+1);if(i instanceof qn)return i.name.match_symbol(function(e){return e instanceof fn&&(re.name==e.name||V.name==e.name)})?n:e(i,t+1);if(i instanceof Cn)return i.condition!==n?n:e(i,t+1);if(i instanceof Fn)return e(i,t+1);return null}:function e(n,t){var i=q.parent(t);if(i instanceof a)return n;if(i instanceof f)return n;if(i instanceof v)return n;if(i instanceof m)return n;if(i instanceof x)return n;if(i instanceof k)return n;if(i instanceof N)return n;if(i instanceof G)return hn(i,t+1);if(i instanceof oe)return n;if(i instanceof ge)return n;if(i instanceof we)return n;if(i instanceof Ne)return n;if(i instanceof Ye)return n;if(i instanceof Ge)return(i.tail_node()===n?e:hn)(i,t+1);if(i instanceof We)return hn(i,t+1);if(i instanceof Ke)return n;if(i instanceof en)return n;if(i instanceof Tn)return n;if(i instanceof qn)return n;if(i instanceof Fn)return n;return null})(e,0))===e&&(Fe=!0),e);var i,r,s=q.parent();if(!ee&&nn(e,s)&&(ee=s),ce&&se&&Re&&!ee&&e instanceof f&&"="!=e.operator&&e.left.equals(re))return Me++,S=!0,$e.info("Cascading {this} [{start}]",e),Re=!1,ye=Nn(re),e.right.transform(q),zn(z),Fe?i=z:(Fe=!0,i=st(m,z,{operator:ce,left:re.fixed&&re.definition().fixed?re.fixed.to_binary(z):re,right:Te})),st(f,e,{operator:"=",left:e.left,right:st(m,e,{operator:e.operator.slice(0,-1),left:i,right:e.right})});if(function(e,t){if(e===Te)return!0;if(t instanceof he&&e!==t.init)return!0;if(e instanceof f)return"="!=e.operator&&re.equals(e.left);if(e instanceof x)return re instanceof Ye&&(!!re.equals(e.expression)&&!(Te instanceof Ae&&!Te.contains_this()));return e instanceof E?!n.has_directive("use strict"):e instanceof H||(e instanceof W?ue&&re.name===e.name.name:e instanceof Q?e.key instanceof $e:e instanceof ie||e instanceof De||e instanceof kn||e instanceof $n)}(e,s))return Fe=!0,e;if(e.single_use)return e;if(!(e instanceof fn)&&(se&&re.equals(e)||fe&&(r=fe(e,this)))){if(!Re||ee&&(r||!Se||!qe))return r||V||(Fe=!0),e;if(wt(e,s))return V&&!r&&(R=!0),e;if(!r&&B&&e.fixed!==re.fixed)return Fe=!0,e;if(V)return ee&&0==I&&(I=P-Me),r||Me++,e;if(Me++,S=Fe=!0,$e.info("Collapsing {this} [{start}]",e),"Binary"==z.TYPE)return Mn(z,e),st(f,z,{operator:"=",left:z.right.left,right:"&&"==z.operator?st(N,z,{condition:z.left,consequent:z.right.right,alternative:e}):st(N,z,{condition:z.left,consequent:e,alternative:z.right.right})});if(z instanceof An)return st(En,z,{operator:z.operator,expression:re.fixed&&re.definition().fixed?re.fixed.to_prefix(z):re});if(z instanceof En)return zn(z),z;if(Mn(Te,e),z instanceof qn){var c=z.name.definition();return c.references.length-c.replaced!=1||n.exposed(c)?st(f,z,{operator:"=",left:e,right:Te}):(c.replaced++,At(s,e,Te))}zn(Te);var u=z.clone();return u.right=Te,u}if(function(e,t){if(!(e instanceof _n))return!1;if(e.is_declared(n)){if(e.fixed_value())return!1;if(M(e))return!(t instanceof Ye&&t.expression===e)&&A(e.definition())}else if(Ze(e,t))return!1;return!qe||(fe=!1,!1)}(e,s))return Fe=!0,e;if((rn(e,s)||le(e))&&(K=e,e instanceof Ve&&(Fe=!0)),e instanceof o){var l=Re;return Re=!1,t(e,q),Re=l,Je(e)}if(e instanceof J){var l=Re;return Re=!1,t(e,q),Re=l,Je(e)}if(e instanceof U){e.name=e.name.transform(q);var l=Re;return Re=!1,e.value=e.value.transform(q),Re=l,Je(e)}if(!(!(e instanceof b)||e instanceof Ve||e.variables&&e.variables.all(function(e){return!me.has(e.name)&&!ye.has(e.name)}))){var l=Re;return Re=!1,Xe(e,q)||t(e,q),Re=l,Je(e)}return Xe(e,q)?Je(e):void 0},Je),$=new Pn(function(e){if(Fe)return e;if(!Ce){if(e!==F[j])return e;switch(j++,F.length-j){case 0:if(Ce=!0,R)return e;if(e!==z)return e;if(e instanceof qn)return e;Le.replaced++;var n=$.parent();return n instanceof Ge&&n.tail_node()!==e?(V.replaced++,Te===xe?Zn.skip:ht(xe,xe.expressions.slice(0,-1))):Te;case 1:if(!R&&e.body===z)return Ce=!0,Le.replaced++,V.replaced++,null;default:return Xe(e,$)}}if(e instanceof _n&&e.definition()===Le){if(wt(e,$.parent()))return e;--Me||(Fe=!0),$e.info("Replacing {this} [{start}]",e);var t=Te.clone();return t.scope=e.scope,t.reference(),Me==I?(Fe=!0,st(f,z,{operator:"=",left:e,right:t})):(Le.replaced++,t)}return e instanceof Y||e instanceof Ve?e:void 0},function(e){return Un(e,$)});--D>=0;){0==D&&n.option("unused")&&an();var F=[];for(sn(e[D]);w.length>0;){var P,j=0,z=(F=w.pop())[F.length-1],I=-1,R=!1,B=!1,V=null,K=null,ee=null,re=bn(z),ae=re&&re.has_side_effects(n),se=re&&(!ae||re instanceof _n)&&!at(re,n),fe=xn(z);if(se||fe){var ce=z instanceof f&&z.operator.slice(0,-1),ue=z.name instanceof ln,le=ct;if(z.may_throw(n)){if(ue&&Ln(p))continue;le=l?function(e){return e.has_side_effects(n)}:tt}var pe=!1,ve=!1,me=new Kn,be=!0,ye=Nn(z),Se=Vn(re),xe=yn(z),Te=xe;ae||(!ce&&Te instanceof Ge&&(Te=Te.tail_node()),ae=Wn());var Oe=l||!Se?function(e){return e instanceof J}:ct,qe=Jn(z),Ce=ue,Fe=!1,Me=0,Re=!h||!Ce;if(!Re){for(var Be=z.arg_index+1;!Fe&&Be<h.length;Be++)h[Be]&&h[Be].transform(q);Re=!0}for(var He=D;!Fe&&He<e.length;He++)e[He].transform(q);if(V){if(!Me||P>Me+R){w.push(F),d=!0;continue}Me==I&&(R=!0);var Le=re.definition();Fe=!1,j=0,Ce=ue;for(var He=D;!Fe&&He<e.length;He++)e[He].transform($)||e.splice(He--,1);Me=z instanceof qn&&z===F[F.length-1]&&Le.references.length==Le.replaced&&!n.exposed(Le),V.last_ref=!1,V.single_use=!1,S=!0}Me&&In(z)}}}return S}function Je(e){return Fe?e:(K===e&&(Fe=!0),ee===e&&(ee=null),e)}function Xe(e,n){if(e instanceof b){if(e instanceof Ve)return e;if(e instanceof E){e.name&&(e.name=e.name.transform(n)),!Fe&&e.extends&&(e.extends=e.extends.transform(n));for(var t=[],i=[],r=0;!Fe&&r<e.properties.length;r++){var o=e.properties[r];o.key instanceof $e&&(o.key=o.key.transform(n)),o.static&&(o instanceof O?o.value&&t.push(o):o instanceof C&&[].push.apply(i,o.value.body))}for(var r=0;!Fe&&r<i.length;r++)i[r].transform(n);for(var r=0;!Fe&&r<t.length;r++){var o=t[r];o.value=o.value.transform(n)}return e}if(e instanceof de)return e.object=e.object.transform(n),Fe=!0,e;if(e instanceof en){e.expression=e.expression.transform(n);for(var r=0;!Fe&&r<e.body.length;r++){var a=e.body[r];if(a instanceof k){if(!Ce){if(a!==F[j])continue;j++}if(a.expression=a.expression.transform(n),!qe)break;fe=!1}}return Fe=!0,e}}}function Ze(e,n){return n instanceof f?"="==n.operator&&n.left===e:n instanceof U?n.name===e:n instanceof X||(n instanceof Q?n.value===e:void 0)}function nn(e,n){return n instanceof f?n.left!==e&&Wt[n.operator.slice(0,-1)]:n instanceof m?n.left!==e&&Wt[n.operator]:n instanceof x?n.optional&&n.expression!==e:n instanceof k?n.expression!==e:n instanceof N?n.condition!==e:n instanceof ge?n.condition!==e:n instanceof Qe?n.optional&&n.expression!==e:void 0}function rn(e,t){if(e instanceof v)return!0;if("Binary"==e.TYPE)return!Ui(e.operator,e.right,n);if(e instanceof x){var i=e.expression;if(i instanceof _n&&(_=i.definition(),i=i.fixed_value()),!(i instanceof ke))return!e.is_expr_pure(n);if(_&&Ji(n,_,i))return!0;if(i.collapse_scanning)return!1;i.collapse_scanning=!0;var o=Re;Re=!1;for(var s=K,f=ee,c=0;!Fe&&c<i.argnames.length;c++)on(g,i.argnames[c],e.args[c])&&(Fe=!0);if(!Fe)if(i.rest&&on(g,i.rest,st(a,e,{elements:e.args.slice(c)})))Fe=!0;else if(Bn(i)&&i.value)i.value.transform(q);else for(var c=0;!Fe&&c<i.body.length;c++){var u=i.body[c];if(u instanceof Ue){u.value&&u.value.transform(q);break}u.transform(q)}return ee=f,K=s,Re=o,i.collapse_scanning=!1,Fe?(Fe=!1,!0):!1}if(e instanceof E){if(!l)return!1;var h=e.extends;return!!h&&(h instanceof _n&&(h=h.fixed_value()),!r(h))}if(e instanceof oe){if(l){if(l.bfinally)return!0;if(l.bcatch&&e instanceof wn)return!0}return ae||re instanceof Ye||nt(re)}if(e instanceof _e)return n.option("ie")&&e.name&&ye.has(e.name.name);if(e instanceof Ie)return Qn(e,t);if(e instanceof Ye){if(ae)return!0;var d=e.expression;if(d instanceof _n&&A(d.definition()))return!0;if(n.option("unsafe")){if(Mt(d)&&It[d.name])return!1;if(oi(d))return!1}return!be||!V&&(!(!l&&Se)&&(!e.optional&&d.may_throw_on_access(n)))}if(e instanceof Ke)return!0;if(e instanceof _n){if(Qn(e,t))return!Ze(e,t);if(ae&&nt(e))return!0;var _=e.definition();return(l||_.scope.resolve()!==p)&&!M(e)}if(e instanceof gn)return!e.is_expr_pure(n);if(e instanceof qn)return!!Oe(e.name)||(e.value||t instanceof Ee)&&e.name.match_symbol(function(e){return e instanceof fn&&(ye.has(e.name)||ae&&nt(e))},!0);if(e instanceof Fn)return!0;var m=wt(e.left,e);return!!m&&(m instanceof Ye||(!!Oe(m)||m.match_symbol(function(e){return e instanceof _n&&(ye.has(e.name)||pe&&n.exposed(e.definition()))},!0)));function g(e){return e.transform(q),Fe}}function on(e,t,i){if(t instanceof U)return e(t.value)||on(e,t.name,t.value)||!Gt(i)&&on(e,t.name,i);if(!i)return!(t instanceof tn);if(t instanceof J){if(t.rest&&on(e,t.rest))return!0;if(t instanceof X)return i instanceof a?!Gn(t.elements,function(n,t){return!on(e,n,i[t])}):!i.is_string(n)||!Gn(t.elements,function(n){return!on(e,n)});if(t instanceof Z)return!!i.may_throw_on_access(n)||!Gn(t.properties,function(n){return!(n.key instanceof $e&&e(n.key))&&!on(e,n.value)})}}function an(){if(!1!==c){var e=n.parent(),t=n.self();if(void 0===c){if(!(t instanceof Ae)||Hn(t)||t.uses_arguments||t.pinned()||!(e instanceof x)||e.expression!==t||!Gn(e.args,function(e){return!(e instanceof Ke)}))return void(c=!1);if(!zt(e))return;c=!0}var i,r=t.in_strict_mode(n)&&!t.parent_scope.resolve(!0).in_strict_mode(n);Ln(t)?(i=function(e){return e instanceof tn&&"await"==e.name},s=!0):(i=function(e){return e instanceof v&&!a.find_parent(Ve)},void 0===s&&(s=et(n,1,e,null,!0,!0)));for(var o=null,a=new jn(function(e,n){if(!d)return!0;if(i(e)||e instanceof Fn)return d=null,!0;if(e instanceof Ie)return!r&&o||(d=null),!0;var a;if(e instanceof _n)return(e.in_arg&&!Di(e.definition())||(a=t.variables.get(e.name))&&a!==e.definition())&&(d=null),!0;if(e instanceof Ve&&!Bn(e)){var s=o;return o=e,n(),o=s,!0}}),f=(h=e.args.slice()).length,u=new Kn,l=t.argnames.length;--l>=0;){var p=t.argnames[l],d=h[l],_=null;if(p instanceof U&&(_=p.value,p=p.name,h[f+l]=_),p instanceof J){if(s&&on(function(e){return e.has_side_effects(n)},p,d)){w.length=0;break}h[f+l]=t.argnames[l]}else if(!u.has(p.name)&&(u.set(p.name,!0),_&&(d=Gt(d)?_:null),d||_?d instanceof ke&&d.pinned()?d=null:d&&d.walk(a):d=st(Dn,p).transform(n),d)){var m=st(qn,p,{name:p,value:d});m.name_index=l,m.arg_index=_?f+l:l,w.unshift([m])}}t.rest&&h.push(t.rest)}}function sn(e,n){if(F.push(e),e instanceof a)e.elements.forEach(function(e){sn(e,n)});else if(e instanceof f){var t=e.left;t instanceof J||w.push(F.slice()),sn(t),sn(e.right),t instanceof _n&&"="==e.operator&&_.set(t.name,(_.get(t.name)||0)+1)}else if(e instanceof v)sn(e.expression,n);else if(e instanceof m){var i=Wt[e.operator];n&&i&&"??"!=e.operator&&e.right instanceof f&&"="==e.right.operator&&!(e.right.left instanceof J)&&w.push(F.slice()),sn(e.left,!i&&n),sn(e.right,n)}else if(e instanceof x)sn(e.expression),e.args.forEach(sn);else if(e instanceof k)sn(e.expression);else if(e instanceof N)sn(e.condition),sn(e.consequent,n),sn(e.alternative,n);else if(e instanceof G)e.definitions.forEach(sn);else if(e instanceof te)sn(e.expression);else if(e instanceof ie)sn(e.condition),e.body instanceof g||sn(e.body);else if(e instanceof oe)e.value&&sn(e.value);else if(e instanceof he)e.init&&sn(e.init,!0),e.condition&&sn(e.condition),e.step&&sn(e.step,!0),e.body instanceof g||sn(e.body);else if(e instanceof de)sn(e.object),e.body instanceof g||sn(e.body);else if(e instanceof ge)sn(e.condition),e.body instanceof g||sn(e.body),!e.alternative||e.alternative instanceof g||sn(e.alternative);else if(e instanceof je)e.properties.forEach(function(e){F.push(e),e.key instanceof $e&&sn(e.key),e instanceof ze&&sn(e.value,n),F.pop()});else if(e instanceof Ge){var r=e.expressions.length-(n?0:1);e.expressions.forEach(function(e,n){sn(e,n<r)})}else if(e instanceof We)sn(e.body,!0);else if(e instanceof Ke)sn(e.expression);else if(e instanceof Qe)sn(e.expression),sn(e.property);else if(e instanceof en)sn(e.expression),e.body.forEach(sn);else if(e instanceof Tn)gt[e.operator]?w.push(F.slice()):sn(e.expression);else if(e instanceof qn){if(e.name instanceof mn)if(e.value){var o=e.name.definition();o.references.length>o.replaced&&w.push(F.slice())}else T.set(e.name.name,(T.get(e.name.name)||0)+1);e.value&&sn(e.value)}else e instanceof Fn&&e.expression&&sn(e.expression);F.pop()}function un(e,n,t){var i;do{i=e,e=q.parent(++t)}while(e instanceof f&&e.operator.slice(0,-1)==n||e instanceof m&&e.operator==n);return i}function pn(e,n,t,i,r){var o=Re;Re=!1;var a=K,s=ee,f=q.stack;return q.stack=[i],e.transform(q),q.stack=f,ee=s,K=a,Re=o,Fe?(Fe=!1,t):n(i,r+1)}function hn(e,n){var t=q.parent(n);if(rn(e,t))return e;if(nn(e,t))return e;if(t instanceof a)return hn(t,n+1);if(t instanceof f)return o(t.left);if(t instanceof v)return e;if(t instanceof m)return hn(t,n+1);if(t instanceof x)return hn(t,n+1);if(t instanceof k)return hn(t,n+1);if(t instanceof N)return hn(t,n+1);if(t instanceof G)return hn(t,n+1);if(t instanceof oe)return hn(t,n+1);if(t instanceof ge)return hn(t,n+1);if(t instanceof we)return e;if(t instanceof Ne){var i=q.parent(n+1);return Gn(i.properties,function(e){return e instanceof ze})?hn(i,n+2):i}if(t instanceof Ye){var r=t.expression;return r===e?hn(t,n+1):pn(r,hn,e,t,n)}return t instanceof Ge?hn(t,n+1):t instanceof We?hn(t,n+1):t instanceof Ke?e:t instanceof en?hn(t,n+1):t instanceof Tn?hn(t,n+1):t instanceof qn?o(t.name):t instanceof Fn?e:null;function o(i){return le(t)?e:i!==e&&i instanceof J?pn(i,hn,e,t,n):hn(t,n+1)}}function dn(e){if(d)d=!1;else if(!(P<1)){var t=(e=e.tail_node())instanceof f&&"="==e.operator?e.left:e;if(t instanceof _n){var i=t.definition();if(!i.undeclared&&!A(i)){if(t!==e){if(at(t,n))return;var r=i.references.length-i.replaced;if(r<2)return;var o=z.clone();o[o instanceof f?"right":"value"]=t,z.name_index>=0&&(o.name_index=z.name_index,o.arg_index=z.arg_index),z=o}return V=i}}}}function vn(e){return e.references.length-e.replaced-(_.get(e.name)||0)}function bn(e){if(e instanceof f){var t=e.left;if(!(t instanceof _n))return t;var i=t.definition();if(p.uses_arguments&&St(i))return t;if(n.exposed(i))return t;if(P=vn(i),i.fixed&&t.fixed){var r=i.references.filter(function(e){return e.fixed===t.fixed}).length-1;r<P&&(P=r,I=0,B=!0)}return"="==e.operator&&dn(e.right),t}if(e instanceof m)return e.right.left;if(e instanceof Tn)return e.expression;if(e instanceof qn){var t=e.name,i=t.definition();if(i.const_redefs)return;if(!it(t,i.orig))return;if(p.uses_arguments&&St(i))return;var o=i.orig.length-i.eliminated-(T.get(i.name)||0);return P=vn(i),i.fixed&&(P=Math.min(P,i.references.filter(function(n){if(!n.fixed)return!0;if(!n.fixed.assigns)return!0;var i=n.fixed.assigns[0];return i===t||yn(i)===e.value}).length)),o>1&&!(t instanceof ln)?(dn(e.value),st(_n,t)):dn(e.value)||1==P&&!n.exposed(i)?st(_n,t):void 0}}function yn(e){if(e instanceof f)return e.right;if(e instanceof m){var n=e.clone();return n.right=e.right.right,n}return e instanceof qn?e.value:void 0}function xn(e){if(!(e instanceof f&&e.right.single_use)){for(var t,i=Object.create(null),r=new jn(function(e){e instanceof _n&&(i[e.definition().id]=!0)});e instanceof f&&"="==e.operator;)e.left.walk(r),e=e.right;if(e instanceof Ie)return c;if(e instanceof _n){var o=e.evaluate(n);return o===e?c:On(o,c)}if(e.is_truthy())return On(!0,ct);if(e.is_constant()){var s=e.evaluate(n);if(!(s instanceof $e))return On(s,c)}return re instanceof _n&&(!!function e(t){if(t instanceof a)return!1;if(t instanceof m&&Wt[t.operator])return e(t.left)&&e(t.right);if(t instanceof x)return!1;if(t instanceof N)return e(t.consequent)&&e(t.alternative);if(t instanceof je)return!1;return!t.has_side_effects(n)}(e)&&(e.walk(new jn(function(e){if(t)return!0;e instanceof _n&&i[e.definition().id]&&(t=!0)})),!t&&c))}function c(n){return e.equals(n)}}function On(e,t){return function(i,r){if(r.in_boolean_context()){if(e&&i.is_truthy()&&!i.has_side_effects(n))return!0;if(i.is_constant()){var o=i.evaluate(n);if(!(o instanceof $e))return!o==!e}}return t(i)}}function zn(e){for(;e.write_only&&(e.write_only=!1,e instanceof f);)e=e.right}function Mn(e,n){var t=n.scope||Xn(q)||i;e.walk(new jn(function(e){if(e instanceof b)return!0;e instanceof tn&&(e.scope=t)}))}function Nn(e){var i=new Kn;e instanceof qn&&(e.name.definition().fixed||(be=!1),i.add(e.name.name,re));var r=p.uses_arguments&&!n.has_directive("use strict"),o=p instanceof Sn,a=new jn(function(s){var c;if(s instanceof _n){if(!(c=s.fixed_value())){c=s;var u=s.definition(),l=s.fixed&&s.fixed.escaped||u.escaped;u.undeclared||!u.assignments&&l&&!l.cross_scope||!L(u,s.scope,s,a.parent())&&Xi(u)||(be=!1)}}else s instanceof Ie&&(c=s);if(c)i.add(s.name,t(n,a,s,c,0));else{if(s instanceof ke){for(var h,d=0,v=s;h=a.parent(d++);v=h){if(h instanceof f){if(h.left===v)break;if("="==h.operator)continue;if(Wt[h.operator.slice(0,-1)])continue;break}if(h instanceof m){if(Wt[h.operator])continue;break}if(h instanceof x)return;if(h instanceof Ve)return;if(h instanceof Ge){if(h.tail_node()===v)continue;break}if(h instanceof gn){if(h.tag)return;break}}return s.enclosed.forEach(function(e){e.scope!==s&&me.set(e.name,!0)}),!0}r&&s instanceof Qe&&(p.each_argname(function(e){n.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||(be=!1),i.add(e.name,!0))}),r=!1)}if(o)if("Call"==s.TYPE){if(ve)return;var _=s.expression;if(_ instanceof Ye)return;if(_ instanceof Ae&&!_.contains_this())return;ve=!0}else s instanceof Ye&&function e(n){if(n instanceof _n&&!(n=n.fixed_value()))return!0;if(n instanceof f)return"="==n.operator&&e(n.right);return n instanceof Ye||n instanceof Ie}(s.expression)&&(s!==re||e instanceof Tn?pe=!0:ve=!0)});return e.walk(a),i}function In(t){var i=Te===xe?null:ht(xe,xe.expressions.slice(0,-1)),r=t.name_index;if(r>=0){var o,a=p.argnames[r];a instanceof U?(p.argnames[r]=a=a.clone(),a.value=i||st(Pe,a,{value:0})):(o=n.parent().args)[r]&&(p.argnames[r]=a.clone(),o[r]=i||st(Pe,o[r],{value:0}))}else{var s=F.length-1,f=F[s];(f instanceof qn||F[s-1].body===f)&&s--;var c=new Pn(function(e,n,t){if(Ce)return e;if(e!==F[j])return e;if(++j<=s)return Xe(e,c);if(Ce=!0,e instanceof G){T.set(f.name.name,(T.get(f.name.name)||0)+1),V&&V.replaced++;var r=e.definitions,o=r.indexOf(f),a=f.clone();if(a.value=null,!i)return e.definitions[o]=a,e;var u=[st(We,i,{body:i})];if(o>0){var l=e.clone();l.definitions=r.slice(0,o),u.unshift(l),(e=e.clone()).definitions=r.slice(o)}return u.push(e),e.definitions[0]=a,t?Zn.splice(u):st(y,e,{body:u})}return i?Yn(e)?st(We,i,{body:i}):i:t?Zn.skip:null},function(e,n){return e instanceof he?Lt(e,n):Un(e,c)});Fe=!1,Ce=!1,j=0,(e[D]=e[D].transform(c))||e.splice(D,1)}}function Un(e,n){if(e instanceof Ge)switch(e.expressions.length){case 0:return null;case 1:return At(n.parent(),e,e.expressions[0])}}function Vn(e){var n=Rn(e);if(!(n instanceof _n))return!1;if(n.definition().scope.resolve()!==p)return!1;if(!u)return!0;if(ce)return!1;if(z instanceof Tn)return!1;var t=ye.get(n.name);return!t||t[0]===e}function Wn(){return!(z instanceof Tn)&&Te.has_side_effects(n)}function Jn(e){if(e instanceof Tn)return!1;if(ae)return!1;if(V)return!0;if(!(re instanceof _n))return!1;var n;if(e instanceof qn)n=1;else{if("="!=e.operator)return!1;n=2}var t=re.definition();if(t.references.length-t.replaced==n)return!0;if(!t.fixed)return!1;if(!re.fixed)return!1;var i=re.fixed.assigns,r=0;return!!Gn(t.references,function(e,n){var t=e.fixed;return!!t&&(!t.to_binary&&!t.to_prefix&&(t===re.fixed?(r++,!0):i&&t.assigns&&i[0]!==t.assigns[0]))})&&(r==n&&(B=!0,!0))}function Qn(e,n){var t=ye.get(e.name);if(t&&!Gn(t,function(e){return!e}))return t[0]!==re||void(fe=!1)}function nt(e){var t=e.definition();return!(1==t.orig.length&&t.orig[0]instanceof cn)&&(t.scope.resolve()!==p||(!(!ve||!n.exposed(t))||!Gn(t.references,function(e){return e.scope.resolve(!0)===p})))}function tt(e,n){if(e instanceof f)return tt(e.left,!0);if(e instanceof Tn)return tt(e.expression,!0);if(e instanceof qn)return e.value&&tt(e.value);if(n){if(e instanceof te)return tt(e.expression,!0);if(e instanceof Qe)return tt(e.expression,!0);if(e instanceof _n)return e.definition().scope.resolve()!==p}return!1}}function $(e){for(var n=!1,t=[],i=0;i<e.length;){var r=e[i];if(r instanceof y&&Gn(r.body,qt))n=!0,$(r.body),[].splice.apply(e,[i,1].concat(r.body)),i+=r.body.length;else{if(r instanceof ee){if(it(r.value,t)){n=!0,e.splice(i,1);continue}t.push(r.value)}r instanceof re?(n=!0,e.splice(i,1)):i++}}return n}function F(e,n){for(var t,i,r,o=!1,a=n.parent(),s=n.self(),f=h&&a&&"Call"==a.TYPE&&a.expression===s,c=h&&n.option("conditionals")&&n.option("sequences"),u=!(l&&l.bfinally&&Wn(p)),d=function(e){for(var n=0,t=e.length;--t>=0;){var i=e[t];if(i instanceof ge&&i.body instanceof Ue&&++n>1)return!0}return!1}(e),v=e.length;--v>=0;){var _=e[v],m=U(v),b=e[m];if(h&&t&&!b&&_ instanceof Ue&&u&&!(s instanceof nn)){var w=_.value;if(!w){o=!0,e.splice(v,1);continue}var x=w.tail_node();if(Gt(x)){o=!0,w instanceof En?w=w.expression:x instanceof En&&((w=w.clone()).expressions[w.expressions.length-1]=x.expression),e[v]=st(We,_,{body:w});continue}}if(_ instanceof ge){var k=fi(_.body);if(M(k)){k.label&&ft(k.label.thedef.references,k),o=!0,(_=_.clone()).body=st(y,_,{body:Y(_.body,k)}),_.alternative=st(y,_,{body:Ct(_.alternative).concat(R(r,i))}),L(k.value,r),e[v]=_,e[v]=_.transform(n);continue}if(k&&!_.alternative&&b instanceof Se){var T=_.condition,A=v+1==m&&_.body instanceof y;if((T=Kt(T,T.negate(n),A))!==_.condition){o=!0,(_=_.clone()).condition=T;var w=_.body;_.body=st(y,b,{body:R(!0,null,m+1)}),e.splice(v,1,_,w),(!h||s instanceof g&&s.body===e)&&(e[v]=_.transform(n));continue}}var E=fi(_.alternative);if(M(E)){E.label&&ft(E.label.thedef.references,E),o=!0,(_=_.clone()).body=st(y,_.body,{body:Ct(_.body).concat(R(r,i))}),_.alternative=st(y,_.alternative,{body:Y(_.alternative,E)}),L(E.value,r),e[v]=_,e[v]=_.transform(n);continue}if(n.option("typeofs")){if(k&&!E){var O=st(y,s,{body:e.slice(v+1)});ki(_.condition,null,O)}if(!k&&E){var O=st(y,s,{body:e.slice(v+1)});ki(_.condition,O)}}}if(_ instanceof ge&&_.body instanceof Ue){var q,C,$=_.body.value,F=_.body.in_bool||b instanceof Ue&&b.in_bool;if(!_.alternative&&b instanceof Ue&&(u||!$==!b.value)){o=!0,(_=_.clone()).alternative=st(y,b,{body:R(!0,null,m+1)}),e[v]=_,e[v]=_.transform(n);continue}if(h&&t&&!b&&!_.alternative&&(F||$&&d||$ instanceof N&&(Gt($.consequent,n)||Gt($.alternative,n)))){o=!0,(_=_.clone()).alternative=st(Ue,_,{value:null}),e[v]=_,e[v]=_.transform(n);continue}if(c&&!_.alternative&&(!(C=e[q=G(v)])&&f||C instanceof ge&&C.body instanceof Ue)&&(b?b instanceof We&&U(m)==e.length:!t)){o=!0;var P=[];_=_.clone(),P.push(_.condition),_.condition=ht(_,P),_.alternative=st(y,s,{body:R().concat(st(Ue,s,{value:null}))}),e[v]=_.transform(n),v=q+1;continue}}_ instanceof S||_ instanceof oe?i=_:t&&i&&i===b&&W(_)}return o;function j(e){return D(n,function(n){return n===e})}function z(e,n){if(!i)return!1;if(i.TYPE!=e.TYPE)return!1;var t=e.value;if(!t)return!1;var r=i.equals(e);return!r&&t instanceof Ge&&(t=t.tail_node(),i.value&&i.value.equals(t)&&(r=2)),!r&&!n&&i.value instanceof Ge&&i.value.tail_node().equals(t)&&(r=3),r}function M(t){if(r=!1,!function(e){if(e instanceof oe){if(r=z(e))return!0;if(!h)return!1;if(!(e instanceof Ue))return!1;var t=e.value;return!(t&&!Gt(t.tail_node()))&&(!(s instanceof nn)||!!i&&(!(i instanceof oe&&i.value)&&(r=4,!0)))}if(!(e instanceof De))return!1;if(s instanceof nn)if(i instanceof oe){if(!h)return!1;if(i.value)return!1;r=!0}else if(i){if(n.loopcontrol_target(i)!==a)return!1;r=!0}else if(!1===i)return!1;var o=n.loopcontrol_target(e);return e instanceof B?j(Pt(o)):!(o instanceof we)&&j(o)}(t))return!1;for(var o=e.length;--o>v;){var f=e[o];if(f instanceof V){if(f.name.definition().preinit)return!1}else if((f instanceof I||f instanceof Ee)&&!Gn(f.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof fn&&e.definition().preinit})}))return!1}return!0}function R(n,t,r){var o=[],a=!1,s=v+1;n?t?r=e.lastIndexOf(t):(t=e[r])!==i&&(i=!1):(r=e.length,i=null);var f=e.splice(s,r-s).filter(function(e){return e instanceof Te?(o.push(e),!1):(Ot(e)&&(a=!0),!0)});return 3===n&&(f.push(st(We,t.value,{body:ht(t.value,t.value.expressions.slice(0,-1))})),t.value=t.value.tail_node()),[].push.apply(a?f:e,o),f}function H(e,n){if(e)switch(n){case 4:return e;case 3:if(!(e instanceof Ge))break;case 2:return ht(e,e.expressions.slice(0,-1))}}function Y(e,n){for(var t,i=Ct(e),o=i;(t=o[o.length-1])!==n;)o=t.body;o.pop();var a=n.value;return r&&(a=H(a,r)),a&&o.push(st(We,a,{body:a})),i}function L(e,n){if(n&&e){switch(n){case 4:return;case 3:case 2:e=e.tail_node()}Et(e,i.value)}}function U(n){t=!0;for(var i=n;++i<e.length;){var r=e[i];if(!Ht(r)){if(!(r instanceof On))break;t=!1}}return i}function G(n){for(var t=n;--t>=0;){var i=e[t];if(!(i instanceof On)&&!Ht(i))break}return t}function W(e,n,t){if(e instanceof oe){var r=!(n&&e instanceof wn)&&z(e,!0);if(r){o=!0;var a=H(e.value,r);return a?st(We,a,{body:a}):t?null:st(re,e)}}else if(e instanceof ge)e.body=W(e.body,n),e.alternative&&(e.alternative=W(e.alternative,n));else if(e instanceof xe)e.body=W(e.body,n);else if(e instanceof kn){if(!e.bfinally||!i.value||i.value.is_constant()){e.bcatch&&W(e.bcatch,n);var s=W(e.body.pop(),!0,!0);s&&e.body.push(s)}}else if(e instanceof g&&!(e instanceof Ve||e instanceof en)){var s=W(e.body.pop(),n,!0);s&&e.body.push(s)}return e}}function P(e,n){var t,i=n.self();i instanceof T?i=n.parent():i instanceof xe&&(i=i.body);for(var r=0,o=0,a=e.length;r<a;r++){var s=e[r];if(s instanceof De){var f=n.loopcontrol_target(s);Pt(f)!==i||s instanceof S&&f instanceof we?e[o++]=s:s.label&&ft(s.label.thedef.references,s)}else e[o++]=s;if(fi(s)){t=e.slice(r+1);break}}return e.length=o,t&&t.forEach(function(t){Vt(n,t,e)}),e.length!=a}function j(e,n){if(!(!h||l&&l.bfinally)){for(var t=!1,i=e.length;--i>=0;){var r=e[i];if(!(r instanceof We))break;var o=r.body;if(!(o instanceof v))break;var a=o.expression;if(!Vi(n,a))break;if(t=!0,a=a.drop_side_effect_free(n,!0)){r.body=a;break}}return e.length=i+1,t}}function z(e,n){var t=!1,r=e.length-1;if(h&&r>=0){var o=l&&l.bfinally&&Wn(p),a=e[r].try_inline(n,i,o);a&&(e[r--]=a,t=!0)}for(var s=u&&l&&l.bfinally?"try":u;r>=0;r--){var a=e[r].try_inline(n,i,!0,s);a&&(e[r]=a,t=!0)}return t}function R(e,n){if(!(e.length<2)){for(var t=[],i=0,r=0,o=e.length;r<o;r++){var a=e[r];a instanceof We?(t.length>=n.sequences_limit&&s(),Dt(t,a.body)):Ht(a)?e[i++]=a:(s(),e[i++]=a)}return s(),e.length=i,i!=o}function s(){if(t.length){var n=ht(t[0],t);e[i++]=st(We,n,{body:n}),t=[]}}}function K(e,n){if(!(e instanceof y))return e;for(var t=null,i=0;i<e.body.length;i++){var r=e.body[i];if(r instanceof On&&Bt(r))n.push(r);else{if(t||Ot(r))return!1;t=r}}return t}function ae(e,n){for(var t,i=!1,r=0,o=0;o<e.length;o++){var a=e[o];if(t)if(a instanceof oe)!a.value&&Wn(p)||(a.value=h(a.value||st(Dn,a)).optimize(n));else if(a instanceof he){if(!(a.init instanceof G)){var s=!1;t.body.walk(new jn(function(e){return!!(s||e instanceof Ve)||(e instanceof m&&"in"==e.operator?(s=!0,!0):void 0)})),s||(a.init?a.init=h(a.init):(a.init=t.body,r--,i=!0))}}else a instanceof ve?Ot(a.init)||(a.object=h(a.object)):a instanceof ge?a.condition=h(a.condition):a instanceof en?a.expression=h(a.expression):a instanceof $n&&(a.expression=h(a.expression));if(n.option("conditionals")&&a instanceof ge){var f=[],c=K(a.body,f),u=K(a.alternative,f);if(!1!==c&&!1!==u&&f.length>0){var l=f.length;f.push(st(ge,a,{condition:a.condition,body:c||st(re,a.body),alternative:u})),f.unshift(r,1),[].splice.apply(e,f),o+=l,r+=l+1,t=null,i=!0;continue}}e[r++]=a,t=a instanceof We?a:null}return e.length=r,i;function h(e){r--,i=!0;var n=t.body;return ht(n,[n,e])}}function se(e){return e instanceof f?[e]:e instanceof Ge?e.expressions.slice():void 0}function ce(e,n,t){var i=se(n);if(i){t=t||0;for(var r=!1,o=i.length-t;--o>=0;){var a=i[o];if(l(a)){var s;if(a.left instanceof _n)s=i.slice(o+1);else{if(!(a.left instanceof Ye&&l(a.left.expression)))continue;s=i.slice(o+1);var c=a.clone();a=a.left.expression,c.left=c.left.clone(),c.left.expression=a.left.clone(),s.unshift(c)}0!=s.length&&be(a.left,a.right,s)&&(r=!0,i=i.slice(0,o).concat(a,s))}}if(e instanceof G){for(var o=e.definitions.length;--o>=0;){var u=e.definitions[o];if(u.value){be(u.name,u.value,i)&&(r=!0),le(u,i,t)&&(r=!0);break}}e instanceof On&&me(e.definitions,i,t)&&(r=!0)}return r&&i}function l(e){return e instanceof f&&"="==e.operator}}function ue(e,n){if(e instanceof We&&!Bt(n)){var t=se(e.body);if(t){var i=[];if(me(i,t.reverse(),0))return n.definitions=i.reverse().concat(n.definitions),t.reverse()}}}function le(e,t,i){if(n.option("conditionals")&&!(e.name instanceof J)){for(var r=!1,o=e.name.definition();t.length>i;){var a=Ii(n,o,e.value,t[0]);if(!a)break;e.value=a,t.shift(),r=!0}return r}}function me(e,n,t){for(var i=!1;n.length>t;){var r=n[0];if(!(r instanceof f))break;if("="!=r.operator)break;var o=r.left;if(!(o instanceof _n))break;if(Mt(o))break;if(o.scope.resolve()!==p)break;var a=o.definition();if(a.scope!==p)break;if(a.orig.length>a.eliminated+1)break;if("SymbolVar"!=a.orig[0].TYPE)break;var s=st(mn,o);e.push(st(qn,r,{name:s,value:r.right})),a.orig.push(s),a.replaced++,n.shift(),i=!0}return i}function be(e,t,i){var r=new Kn;for(r.set(e.name,!0);t instanceof f&&"="==t.operator;)t.left instanceof _n&&r.set(t.left.name,!0),t=t.right;if(t instanceof je){var o=!1;do{if(!a(i[0]))break;i.shift(),o=!0}while(i.length);return o}function a(e){if(e instanceof f&&"="==e.operator&&e.left instanceof Ye){var i=e.left.expression;if(i instanceof _n&&r.has(i.name)&&e.right.is_constant_expression(p)){var o=e.left.property;if(o instanceof $e&&(a(o)&&(o=e.left.property=o.right.clone()),o=o.evaluate(n)),!(o instanceof $e)){var s="__proto__"==(o=""+o)||n.has_directive("use strict")?function(e){var n=e.key;return"string"==typeof n&&n!=o&&"__proto__"!=n}:function(e){var n=e.key;return e instanceof Me||e instanceof Be?"string"==typeof n&&n!=o:"__proto__"!==n};if(Gn(t.properties,s))return t.properties.push(st(ze,e,{key:o,value:e.right})),!0}}}}}function ye(e){for(var n,t=!1,i=0,r=-1;i<e.length;i++){var o=e[i],a=e[r];if(o instanceof G)if(a&&a.TYPE==o.TYPE)a.definitions=a.definitions.concat(o.definitions),t=!0;else if(n&&n.TYPE==o.TYPE&&Bt(o))n.definitions=n.definitions.concat(o.definitions),t=!0;else if(o instanceof On){var s=ue(a,o);s?(s.length&&(a.body=ht(a,s),r++),t=!0):r++,e[r]=n=o}else e[++r]=o;else{if(o instanceof oe)o.value=u(o.value);else if(o instanceof he){var s=ce(a,o.init);if(s)t=!0,o.init=s.length?ht(o.init,s):null;else{if(a instanceof On&&(!o.init||o.init.TYPE==a.TYPE)){o.init&&(a.definitions=a.definitions.concat(o.init.definitions)),o=o.clone(),n=o.init=a,e[r]=l(o),t=!0;continue}if(n&&o.init&&n.TYPE==o.init.TYPE&&Bt(o.init))n.definitions=n.definitions.concat(o.init.definitions),o.init=null,t=!0;else if(o.init instanceof On&&(n=o.init,s=ue(a,o.init))){if(t=!0,0==s.length){e[r]=l(o);continue}a.body=ht(a,s)}}}else if(o instanceof de){if(n&&n.TYPE==o.init.TYPE){var f=n.definitions.slice();o.init=o.init.definitions[0].name.convert_symbol(_n,function(e,n){f.push(st(qn,n,{name:n,value:null})),n.definition().references.push(e)}),n.definitions=f,t=!0}o.object=u(o.object)}else if(o instanceof ge)o.condition=u(o.condition);else if(o instanceof We){var c,s=ce(a,o.body);if(s){if(t=!0,!s.length)continue;o.body=ht(o.body,s)}else if(a instanceof G&&(c=e[i+1])&&a.TYPE==c.TYPE&&(c=c.definitions[0]).value){t=!0,c.value=ht(o,[o.body,c.value]);continue}}else o instanceof en?o.expression=u(o.expression):o instanceof $n&&(o.expression=u(o.expression));e[++r]=n?l(o):o}}return e.length=r+1,t;function u(e){var n=ce(a,e,1);if(!n)return e;t=!0;var i=e.tail_node();return n[n.length-1]!==i&&n.push(i.left),ht(e,n)}function l(e){return e.transform(new Pn(function(e,i,r){if(e instanceof G){if(n===e)return e;if(n.TYPE!=e.TYPE)return e;var o=this.parent();return o instanceof de&&o.init===e?e:Bt(e)?(n.definitions=n.definitions.concat(e.definitions),t=!0,o instanceof he&&o.init===e?null:r?Zn.skip:st(re,e)):e}return e instanceof fe?e:e instanceof Ve?e:Yn(e)?void 0:e}))}}}function Vt(e,n,t){var i,r=!1;function o(e){i?(i.push(e),qt(e)||(i.required=!0)):t.push(e)}n.walk(new jn(function(a,s){if(a instanceof V)return a.extends=null,a.properties=[],o(a),!0;if(a instanceof G){var f=[];return a.remove_initializers(e,f)&&$e.warn("Dropping initialization in unreachable code [{start}]",a),f.length>0&&(a.definitions=f,o(a)),!0}if(a instanceof Te)return o(a),!0;if(a instanceof Ve)return!0;if(a instanceof b){var c=i;return i=[],s(),i.required?t.push(st(y,n,{body:i})):i.length&&[].push.apply(t,i),i=c,!0}a instanceof De||(r=!0)})),r&&$e.warn("Dropping unreachable code [{start}]",n)}function Gt(e,n){return null==e||e.is_undefined||e instanceof Dn||e instanceof En&&"void"==e.operator&&!(n&&e.expression.has_side_effects(n))}_n.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&It[this.name]}),(Nt=function(e,n){e.DEFMETHOD("in_strict_mode",n)})(E,lt),Nt(Ve,function(e){for(var n=this.body,t=0;t<n.length;t++){var i=n[t];if(!(i instanceof ee))break;if("use strict"==i.value)return!0}var r=this.parent_scope;return r?r.resolve(!0).in_strict_mode(e):e.option("module")}),function(e){e($e,ct),e(a,lt),e(f,function(){return"="==this.operator&&this.right.is_truthy()}),e(ke,lt),e(je,lt),e(Le,lt),e(Ge,function(){return this.tail_node().is_truthy()}),e(_n,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=ct;var n=e.is_truthy();return delete this.is_truthy,n})}(function(e,n){e.DEFMETHOD("is_truthy",n)}),function(e){function n(e,n,t){switch(e){case"-":return n.is_negative_zero()&&(!(t instanceof R)||0==t.value);case"&&":case"||":return n.is_negative_zero()||t.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}e($e,lt),e(a,ct),e(f,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():n(e.slice(0,-1),this.left,this.right)}),e(m,function(){return n(this.operator,this.left,this.right)}),e(R,function(){return 0==this.value&&1/this.value<0}),e(ke,ct),e(je,ct),e(Le,ct),e(Ge,function(){return this.tail_node().is_negative_zero()}),e(_n,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=lt;var n=e.is_negative_zero();return delete this.is_negative_zero,n}),e(En,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator})}(function(e,n){e.DEFMETHOD("is_negative_zero",n)}),function(e){function n(e,n){return n||/strict/.test(e.option("pure_getters"))}$e.DEFMETHOD("may_throw_on_access",function(e,n){return!e.option("pure_getters")||this._dot_throw(e,n)}),e($e,n),e(a,ct),e(f,function(e){var n=this.operator,t=this.left,i=this.right;return"="!=n?Wt[n.slice(0,-1)]&&(t._dot_throw(e)||i._dot_throw(e)):!!i._dot_throw(e)&&(!(t instanceof _n)||(!(i instanceof m&&"||"==i.operator&&t.name==i.left.name)||i.right._dot_throw(e)))}),e(m,function(e){return Wt[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),e(E,function(e,t){return n(e,t)&&!Gn(this.properties,function(e){return!!e.private||(!e.static||!(e instanceof q||e instanceof j))})}),e(N,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),e(R,ct),e(te,function(e,t){if(!n(e,t))return!1;var r=this.expression;return r instanceof _n&&(r=r.fixed_value()),!("prototype"==this.property&&i(r))}),e(ke,ct),e(Fe,lt),e(je,function(e,t){return n(e,t)&&!Gn(this.properties,function(n){return!(n instanceof Me||n instanceof Be)&&!("__proto__"===n.key&&n.value._dot_throw(e,t))})}),e(Ie,function(e,t){return n(e,t)&&!this.scope.resolve().new}),e(Ge,function(e){return this.tail_node()._dot_throw(e)}),e(_n,function(e,t){if(this.is_undefined)return!0;if(!n(e,t))return!1;if(Mt(this)&&this.is_declared(e))return!1;if(this.is_immutable())return!1;var i=this.definition();if(A(i)&&!i.scope.rest&&Gn(i.scope.argnames,function(e){return e instanceof ln}))return i.scope.uses_arguments>2;var r=this.fixed_value(!0);return!r||(this._dot_throw=lt,r._dot_throw(e)?(delete this._dot_throw,!0):(this._dot_throw=ct,!1))}),e(En,function(){return"void"==this.operator}),e(An,ct),e(Dn,lt)}(function(e,n){e.DEFMETHOD("_dot_throw",n)}),function(e){function n(e,n,t){switch(n){case"&&":return t.left.is_defined(e)&&t.right.is_defined(e);case"||":return t.left.is_truthy()||t.right.is_defined(e);case"??":return t.left.is_defined(e)||t.right.is_defined(e);default:return!0}}e($e,ct),e(a,lt),e(f,function(e){var t=this.operator;return"="==t?this.right.is_defined(e):n(e,t.slice(0,-1),this)}),e(m,function(e){return n(e,this.operator,this)}),e(N,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),e(R,lt),e(me,ct),e(ke,lt),e(je,lt),e(Ge,function(e){return this.tail_node().is_defined(e)}),e(_n,function(e){if(this.is_undefined)return!1;if(Mt(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var n=this.fixed_value();if(!n)return!1;this.is_defined=ct;var t=n.is_defined(e);return delete this.is_defined,t}),e(En,function(){return"void"!=this.operator}),e(An,lt),e(Dn,ct)}(function(e,n){e.DEFMETHOD("is_defined",n)}),function(e){e($e,ct),e(f,function(e){return"="==this.operator&&this.right.is_boolean(e)});var n=nt("in instanceof == != === !== < <= >= >");e(m,function(e){return n[this.operator]||Wt[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(w,lt);var t=nt("every hasOwnProperty isPrototypeOf propertyIsEnumerable some");e(x,function(e){if(!e.option("unsafe"))return!1;var n=this.expression;return n instanceof te&&(t[n.property]||"test"==n.property&&n.expression instanceof Le)}),e(N,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(qe,ct),e(Ge,function(e){return this.tail_node().is_boolean(e)}),e(_n,function(e){var n=this.fixed_value();if(!n)return!1;this.is_boolean=ct;var t=n.is_boolean(e);return delete this.is_boolean,t});var i=nt("! delete");e(En,function(){return i[this.operator]})}(function(e,n){e.DEFMETHOD("is_boolean",n)}),function(e){e($e,ct);var n=nt("- * / % ** & | ^ << >> >>>");e(f,function(e){return n[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(m,function(e){return!!n[this.operator]||"+"==this.operator&&((this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e)))});var t=nt(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);e(x,function(e){if(!e.option("unsafe"))return!1;var n=this.expression;return n instanceof te&&(t[n.property]||Mt(n.expression)&&"Math"==n.expression.name)}),e(N,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(qe,ct),e(Pe,lt),e(Ge,function(e){return this.tail_node().is_number(e)}),e(_n,function(e,n){var t=this.fixed_value();if(!t)return!1;if(n&&t instanceof En&&"+"==t.operator&&t.expression.equals(this))return!1;this.is_number=ct;var i=t.is_number(e);return delete this.is_number,i});var i=nt("+ - ~ ++ --");e(Tn,function(){return i[this.operator]})}(function(e,n){e.DEFMETHOD("is_number",n)}),function(e){e($e,ct),e(f,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(m,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))});var n=nt(["charAt","substr","substring","toExponential","toFixed","toLowerCase","toPrecision","toString","toUpperCase","trim"]);e(x,function(e){if(!e.option("unsafe"))return!1;var t=this.expression;return t instanceof te&&n[t.property]}),e(N,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(Ge,function(e){return this.tail_node().is_string(e)}),e(Xe,lt),e(_n,function(e){var n=this.fixed_value();if(!n)return!1;this.is_string=ct;var t=n.is_string(e);return delete this.is_string,t}),e(gn,function(e){return!this.tag||Qi(e,this.tag)}),e(En,function(){return"typeof"==this.operator})}(function(e,n){e.DEFMETHOD("is_string",n)});var Wt=nt("&& || ??");function Kt(e,n,t){var i=n.print_to_string().length-e.print_to_string().length;return i<(t||0)?n:e}function Jt(e,n,t){return Kt(st(We,e,{body:e}),st(We,n,{body:n}),t).body}function Xt(e,n,t,i){return(In(e)?Jt:Kt)(n,t,i)}function Qt(e){var n=Object.create(null);return Object.keys(e).forEach(function(t){n[t]=nt(e[t])}),n}function Zt(e){for(var n=0;n<e.length;n++){var t=e[n];if(!(t instanceof ee))return t}}function ei(){return this.value?st(Ue,this.value,{value:this.value}):Zt(this.body)}function ni(e,n){var t=n.evaluate(e);return t===n?n:(t=yt(t,n).optimize(e),Xt(e,n,t,e.eval_threshold))}!function(e){function n(e){$e.warn("global_defs {this} redefined [{start}]",e)}Sn.DEFMETHOD("resolve_defines",function(e){return e.option("global_defs")?(this.figure_out_scope({ie:e.option("ie")}),this.transform(new Pn(function(t){var i=t._find_defs(e,"");if(i){for(var r,o=0,a=t;(r=this.parent(o++))&&r instanceof Ye&&r.expression===a;)a=r;if(!wt(a,r))return i;n(t)}}))):this}),e($e,rt),e(te,function(e,n){return this.expression._find_defs(e,"."+this.property+n)}),e(fn,function(e){this.definition().global&&Qn(e.option("global_defs"),this.name)&&n(this)}),e(_n,function(e,n){if(this.definition().global){var t=e.option("global_defs"),i=this.name+n;return Qn(t,i)?function e(n,t){if(n instanceof $e)return n.clone(!0);if(Array.isArray(n))return st(a,t,{elements:n.map(function(n){return e(n,t)})});if(n&&"object"==typeof n){var i=[];for(var r in n)Qn(n,r)&&i.push(st(ze,t,{key:r,value:e(n[r],t)}));return st(je,t,{properties:i})}return yt(n,t)}(t[i],this):void 0}})}(function(e,n){e.DEFMETHOD("_find_defs",n)}),s.DEFMETHOD("first_statement",ei),c.DEFMETHOD("first_statement",ei),ke.DEFMETHOD("first_statement",function(){return Zt(this.body)}),ke.DEFMETHOD("length",function(){for(var e=this.argnames,n=0;n<e.length&&!(e[n]instanceof U);n++);return n});var ti=["constructor","toString","valueOf"],ii=Qt({Array:["indexOf","join","lastIndexOf","slice"].concat(ti),Boolean:ti,Function:ti,Number:["toExponential","toFixed","toPrecision"].concat(ti),Object:ti,RegExp:["exec","test"].concat(ti),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(ti)}),ri=Qt({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]});function oi(e){if(!(e instanceof te))return!1;var n=e.expression;if(!Mt(n))return!1;var t=ri[n.name];return t&&(t[e.property]||"Math"==n.name&&"random"==e.property)}!function(e){e($e,ct),e(R,lt),e(Le,ct);var n=nt("! ~ - + void");e(En,function(){return n[this.operator]&&this.expression instanceof R})}(function(e,n){e.DEFMETHOD("is_constant",n)}),function(e){$e.DEFMETHOD("evaluate",function(e,n){if(!e.option("evaluate"))return this;var t=[],i=this._eval(e,n,t,1);return t.forEach(function(e){delete e._eval}),n?i:!i||i instanceof RegExp?i:"function"==typeof i||"object"==typeof i?this:i});var n=new jn(function(e){e instanceof f&&t(e.left),e instanceof de&&t(e.init),e instanceof Tn&&gt[e.operator]&&t(e.expression)});function t(e){e instanceof X?e.elements.forEach(t):e instanceof Z?e.properties.forEach(function(e){t(e.value)}):e instanceof Ye?t(e.expression):e instanceof _n&&e.definition().references.forEach(function(e){delete e._eval})}e(Je,function(){throw new Error(string_template("Cannot evaluate a statement [{start}]",this))}),e(o,pt),e(_,pt),e(E,pt),e($e,pt),e(R,function(){return this.value}),e(f,function(e,i,r,o){var a=this.left;if(!i){if(!(a instanceof _n))return this;if(!Qn(a,"_eval")){if(!a.fixed)return this;var s=a.definition();if(!s.fixed)return this;if(s.undeclared)return this;if(s.last_ref!==a)return this;if("m"==s.single_use)return this;if(this.right.has_side_effects(e))return this}}var f,c=this.operator;f=!Qn(a,"_eval")&&a instanceof _n&&a.fixed&&a.definition().fixed?a:"="==c?this.right:st(m,this,{operator:c.slice(0,-1),left:a,right:this.right}),a.walk(n);var u=f._eval(e,i,r,o);return"object"==typeof u?this:(t(a),u)}),e(Ge,function(e,t,i,r){if(!t)return this;for(var o=this.expressions,a=0,s=o.length-1;a<s;a++)o[a].walk(n);var f=o[s],c=f._eval(e,t,i,r);return c===f?this:c}),e(ke,function(e){if(e.option("unsafe")){var n=function(){};return n.node=this,n.toString=function(){return"function(){}"},n}return this}),e(a,function(e,n,t,i){if(e.option("unsafe")){for(var r=[],o=0;o<this.elements.length;o++){var a=this.elements[o];if(a instanceof me)return this;var s=a._eval(e,n,t,i);if(a===s)return this;r.push(s)}return r}return this}),e(je,function(e,n,t,i){if(e.option("unsafe")){for(var r={},o=0;o<this.properties.length;o++){var a=this.properties[o];if(!(a instanceof ze))return this;var s=a.key;if(s instanceof $e&&(s=s._eval(e,n,t,i))===a.key)return this;switch(s){case"__proto__":case"toString":case"valueOf":return this}if(r[s]=a.value._eval(e,n,t,i),r[s]===a.value)return this}return r}return this});var i=nt("! typeof void");e(En,function(e,r,o,a){var s=this.expression,f=this.operator;if(e.option("typeofs")&&"typeof"==f&&(s instanceof ke||s instanceof _n&&s.fixed_value()instanceof ke))return"function";var c=s instanceof _n&&s.definition();i[f]||c&&c.fixed||a++,s.walk(n);var u=s._eval(e,r,o,a);if(u===s){if(r&&"void"==f)return;return this}switch(f){case"!":return!u;case"typeof":return u instanceof RegExp?this:typeof u;case"void":return;case"~":return~u;case"-":return-u;case"+":return+u;case"++":case"--":if(!c)return this;if(!r){if(c.undeclared)return this;if(c.last_ref!==s)return this}return Qn(s,"_eval")&&(u=+(f[0]+1)+ +u),t(s),u}return this}),e(An,function(e,i,r,o){var a=this.expression;if(a instanceof _n){if(!Qn(a,"_eval")){if(!a.fixed)return this;if(!i){var s=a.definition();if(!s.fixed)return this;if(s.undeclared)return this;if(s.last_ref!==a)return this}}}else if(!i)return this;a instanceof _n&&a.definition().fixed||o++,a.walk(n);var f=a._eval(e,i,r,o);return f===a?this:(t(a),+f)});var r=nt("&& || === !==");e(m,function(e,n,t,i){r[this.operator]||i++;var o=this.left._eval(e,n,t,i);if(o===this.left)return this;if(this.operator==(o?"||":"&&"))return o;var a,s=n&&!(o&&"object"==typeof o),f=this.right._eval(e,s,t,i);if(f===this.right)return this;switch(this.operator){case"&&":a=o&&f;break;case"||":a=o||f;break;case"??":a=null==o?f:o;break;case"|":a=o|f;break;case"&":a=o&f;break;case"^":a=o^f;break;case"+":a=o+f;break;case"-":a=o-f;break;case"*":a=o*f;break;case"/":a=o/f;break;case"%":a=o%f;break;case"<<":a=o<<f;break;case">>":a=o>>f;break;case">>>":a=o>>>f;break;case"==":a=o==f;break;case"===":a=o===f;break;case"!=":a=o!=f;break;case"!==":a=o!==f;break;case"<":a=o<f;break;case"<=":a=o<=f;break;case">":a=o>f;break;case">=":a=o>=f;break;case"**":a=Math.pow(o,f);break;case"in":if(f&&"object"==typeof f&&Qn(f,o)){a=!0;break}default:return this}if(isNaN(a))return e.find_parent($n)?this:a;if(e.option("unsafe_math")&&!n&&a&&"number"==typeof a&&("+"==this.operator||"-"==this.operator)){var c=Math.max(0,u(o),u(f));if(c<16)return+a.toFixed(c)}return a;function u(e){var n=/(\.[0-9]*)?(e[^e]+)?$/.exec(+e);return(n[1]||".").length-1-(n[2]||"").slice(1)}}),e(N,function(e,n,t,i){var r=this.condition._eval(e,n,t,i);if(r===this.condition)return this;var o=r?this.consequent:this.alternative,a=o._eval(e,n,t,i);return a===o?this:a}),e(_n,function(e,n,t,i){var r,o=this.fixed_value();if(!o)return this;if(Qn(o,"_eval"))r=o._eval();else{if(this._eval=pt,r=o._eval(e,n,t,i),delete this._eval,r===o)return this;o._eval=function(){return r},t.push(o)}return r&&"object"==typeof r&&!function(e,n){var t=e.definition().escaped;switch(t.length){case 0:return!0;case 1:var i=!1;return t[0].walk(new jn(function(n){return!!i||(n===e?i=!0:n instanceof Ve||void 0)})),i;default:return n<=t.depth}}(this,i)?this:r});var c={Array:Array,Math:Math,Number:Number,Object:Object,String:String},u=Qt({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),l=nt("global ignoreCase multiline source");function p(e,n,t,i,r){for(var o=[],a=0;a<e.length;a++){var s=e[a],f=s._eval(n,t,i,r);if(s===f)return;o.push(f)}return o}e(Ye,function(e,n,t,i){if(e.option("unsafe")){var r,o=this.expression;if(!Mt(o)&&(null==(r=o._eval(e,n,t,i+1))||r===o))return this;var a=this.property;if(a instanceof $e&&(a=a._eval(e,n,t,i))===this.property)return this;if(void 0===r){var s=u[o.name];if(!s||!s[a])return this;r=c[o.name]}else if(r instanceof RegExp){if(!l[a])return this}else if("object"==typeof r){if(!Qn(r,a))return this}else if("function"==typeof r)switch(a){case"name":return r.node.name?r.node.name.name:"";case"length":return r.node.length();default:return this}return r[a]}return this}),e(x,function(e,t,i,r){var o=this.expression,a=o instanceof _n?o.fixed_value():o;if(a instanceof s||a instanceof W||a instanceof _e){if(a.evaluating)return this;if(a.name&&a.name.definition().recursive_refs>0)return this;if(this.is_expr_pure(e))return this;var f=p(this.args,e,t,i,r);if(!Gn(a.argnames,function(n,o){if(n instanceof U){if(!f)return!1;if(void 0===f[o]){var a=n.value._eval(e,t,i,r);if(a===n.value)return!1;f[o]=a}n=n.name}return!(n instanceof J)}))return this;if(a.rest instanceof J)return this;if(!f&&!t)return this;var u=a.first_statement();if(!(u instanceof Ue)){if(t){a.walk(n);var l=!1;if(a.evaluating=!0,Un(a,new jn(function(n){return!!l||(n instanceof Ue?(n.value&&void 0!==n.value._eval(e,!0,i,r)&&(l=!0),!0):n instanceof Ve&&n!==a||void 0)})),a.evaluating=!1,!l)return}return this}var h=u.value;if(!h)return;var d=[];return(!f||Gn(a.argnames,function(e,n){return b(e,f[n])})&&(!a.rest||b(a.rest,f.slice(a.argnames.length)))||t)&&(t&&a.argnames.forEach(function(e){e instanceof U&&e.value.walk(n)}),a.evaluating=!0,h=h._eval(e,t,i,r),a.evaluating=!1),d.forEach(function(e){delete e._eval}),h===u.value?this:h}if(e.option("unsafe")&&o instanceof Ye){var v=o.property;if(v instanceof $e&&(v=v._eval(e,t,i,r))===o.property)return this;var _=o.expression;if(Mt(_)){var m=ri[_.name];if(!m||!m[v])return this;h=c[_.name]}else{if(null==(h=_._eval(e,t,i,r+1))||h===_)return this;var g=ii[h.constructor.name];if(!g||!g[v])return this;if(h instanceof RegExp&&h.global&&!(_ instanceof Le))return this}var f=p(this.args,e,t,i,r);if(!f)return this;if("replace"==v&&"function"==typeof f[1])return this;try{return h[v].apply(h,f)}catch(e){$e.warn("Error evaluating {this} [{start}]",this)}finally{h instanceof RegExp&&(h.lastIndex=0)}}return this;function b(e,n){e instanceof U&&(e=e.name);var t=e.definition();if(t.orig[t.orig.length-1]!==e)return!1;var i=n;return t.references.forEach(function(e){e._eval=function(){return i},d.push(e)}),!0}}),e(qe,pt),e(gn,function(e,n,t,i){if(!e.option("templates"))return this;if(this.tag){if(!Qi(e,this.tag))return this;f=function(e){return e}}var r=p(this.expressions,e,n,t,i);if(!r)return this;for(var o=!1,a=f(this.strings[0]),s=0;s<r.length;s++)a+=r[s]+f(this.strings[s+1]);return o?(this._eval=pt,this):a;function f(e){return"string"!=typeof(e=Zi(e))&&(o=!0),e}})}(function(e,n){e.DEFMETHOD("_eval",n)}),function(e){function n(e){return st(En,e,{operator:"!",expression:e})}function t(e,t,i){var r=n(e);return i?Kt(r,st(We,t,{body:t}))===r?r:t:Kt(r,t)}e($e,function(){return n(this)}),e(Je,function(){throw new Error("Cannot negate a statement")}),e(m,function(e,i){var r=this.clone(),o=this.operator;if(e.option("unsafe_comps"))switch(o){case"<=":return r.operator=">",r;case"<":return r.operator=">=",r;case">=":return r.operator="<",r;case">":return r.operator="<=",r}switch(o){case"==":return r.operator="!=",r;case"!=":return r.operator="==",r;case"===":return r.operator="!==",r;case"!==":return r.operator="===",r;case"&&":return r.operator="||",r.left=r.left.negate(e,i),r.right=r.right.negate(e),t(this,r,i);case"||":return r.operator="&&",r.left=r.left.negate(e,i),r.right=r.right.negate(e),t(this,r,i)}return n(this)}),e(D,function(){return n(this)}),e(N,function(e,n){var i=this.clone();return i.consequent=i.consequent.negate(e),i.alternative=i.alternative.negate(e),t(this,i,n)}),e(Ae,function(){return n(this)}),e(Ge,function(e){var n=this.expressions.slice();return n.push(n.pop().negate(e)),ht(this,n)}),e(En,function(){return"!"==this.operator?this.expression:n(this)})}(function(e,n){e.DEFMETHOD("negate",function(e,t){return n.call(this,e,t)})});var ai=nt("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),si=nt("Map Set WeakMap WeakSet");function fi(e){return e&&e.aborts()}x.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var n=this.expression;if(Mt(n)){if(ai[n.name])return!0;if(this instanceof qe&&si[n.name])return!0}if(oi(n))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),gn.DEFMETHOD("is_expr_pure",function(e){var n=this.tag;if(!n)return!0;if(e.option("unsafe")){if(Mt(n)&&ai[n.name])return!0;if(n instanceof te&&Mt(n.expression)){var t=ri[n.expression.name];return t&&(t[n.property]||"Math"==n.expression.name&&"random"==n.property)}}return!e.pure_funcs(this)}),$e.DEFMETHOD("is_call_pure",ct),x.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var n=this.expression;if(!(n instanceof te))return!1;var t,i=n.expression,r=n.property;if(i instanceof a)t=ii.Array;else if(i.is_boolean(e))t=ii.Boolean;else if(i.is_number(e))t=ii.Number;else if(i instanceof Le)t=ii.RegExp;else if(i.is_string(e)){if(t=ii.String,"replace"==r){var o=this.args[1];if(o&&!o.is_string(e))return!1}}else n.may_throw_on_access(e)||(t=ii.Object);return t&&t[r]}),function(e){e($e,ct),e(a,lt),e(f,function(){switch(this.operator){case"=":return this.right.safe_to_spread();case"&&=":case"||=":case"??=":return this.left.safe_to_spread()&&this.right.safe_to_spread()}return!0}),e(m,function(){return!Wt[this.operator]||this.left.safe_to_spread()&&this.right.safe_to_spread()}),e(R,lt),e(ke,lt),e(je,function(){return Gn(this.properties,function(e){return!(e instanceof Me||e instanceof Ke)})}),e(Ge,function(){return this.tail_node().safe_to_spread()}),e(_n,function(){var e=this.fixed_value();return e&&e.safe_to_spread()}),e(Tn,lt)}(function(e,n){e.DEFMETHOD("safe_to_spread",n)}),function(e){function n(e,n,t){return!Gn(e,t?function(e){return e instanceof Ke?!t(e,n):!e.has_side_effects(n)}:function(e){return!e.has_side_effects(n)})}function t(e,n){var t=e.expression;return!t.is_string(n)||t.has_side_effects(n)}e($e,lt),e(a,function(e){return n(this.elements,e,t)}),e(f,function(e){var n=this.left;if(!(n instanceof Ye))return!0;var t=n.expression;return!(t instanceof Ie)||!t.scope.resolve().new||n instanceof Qe&&n.property.has_side_effects(e)||this.right.has_side_effects(e)}),e(m,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||!Ui(this.operator,this.right,e)}),e(g,function(e){return n(this.body,e)}),e(x,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||n(this.args,e,t)}),e(k,function(e){return this.expression.has_side_effects(e)||n(this.body,e)}),e(E,function(e){var t=this.extends;return!(!t||(t instanceof _n&&(t=t.fixed_value()),r(t)))||n(this.properties,e)}),e(P,function(e){return this.key instanceof $e&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),e(N,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(R,ct),e(G,function(e){return n(this.definitions,e)}),e(X,function(e){return n(this.elements,e)}),e(Q,function(e){return this.key instanceof $e&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(Z,function(e){return n(this.properties,e)}),e(te,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),e(re,ct),e(ge,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),e(xe,function(e){return this.body.has_side_effects(e)}),e(ke,ct),e(je,function(e){return n(this.properties,e,function(e,n){var t=e.expression;return!t.safe_to_spread()||t.has_side_effects(n)})}),e(Ie,ct),e(Ne,function(e){return this.key instanceof $e&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(Ge,function(e){return n(this.expressions,e)}),e(We,function(e){return this.body.has_side_effects(e)}),e(Qe,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),e(en,function(e){return this.expression.has_side_effects(e)||n(this.body,e)}),e(fn,ct),e(_n,function(e){return!this.is_declared(e)||!M(this,e)}),e(gn,function(e){return!this.is_expr_pure(e)||n(this.expressions,e)}),e(kn,function(e){return n(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),e(Tn,function(e){return xt[this.operator]||this.expression.has_side_effects(e)}),e(qn,function(){return this.value})}(function(e,n){e.DEFMETHOD("has_side_effects",n)}),function(e){function n(e,n){for(var t=e.length;--t>=0;)if(e[t].may_throw(n))return!0;return!1}function t(e,t){return!!e.may_throw(t)||(e instanceof _n&&(e=e.fixed_value()),!(e instanceof ke)||(!!n(e.argnames,t)||(!!n(e.body,t)||Bn(e)&&e.value&&e.value.may_throw(t))))}e($e,lt),e(R,ct),e(re,ct),e(ke,ct),e(Ie,ct),e(fn,ct),e(a,function(e){return n(this.elements,e)}),e(f,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof _n)&&this.left.may_throw(e)}),e(v,function(e){return this.expression.may_throw(e)}),e(m,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||!Ui(this.operator,this.right,e)}),e(g,function(e){return n(this.body,e)}),e(x,function(e){if(n(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=lt;var i=t(this.expression,e);return delete this.may_throw,i}),e(k,function(e){return this.expression.may_throw(e)||n(this.body,e)}),e(N,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),e(U,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),e(G,function(e){return n(this.definitions,e)}),e(te,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),e(de,function(e){if(this.init.may_throw(e))return!0;var n=this.object;return!!n.may_throw(e)||(!((n=n.tail_node())instanceof a||n.is_string(e))||this.body.may_throw(e))}),e(ge,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),e(xe,function(e){return this.body.may_throw(e)}),e(je,function(e){return n(this.properties,e)}),e(Ne,function(e){return this.value.may_throw(e)||this.key instanceof $e&&this.key.may_throw(e)}),e(Ue,function(e){return this.value&&this.value.may_throw(e)}),e(Ge,function(e){return n(this.expressions,e)}),e(We,function(e){return this.body.may_throw(e)}),e(Qe,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),e(en,function(e){return this.expression.may_throw(e)||n(this.body,e)}),e(_n,function(e){return!this.is_declared(e)||!M(this,e)}),e(gn,function(e){if(n(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=lt;var i=t(this.tag,e);return delete this.may_throw,i}),e(kn,function(e){return(this.bcatch?this.bcatch.may_throw(e):n(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),e(Tn,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof _n)}),e(qn,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)})}(function(e,n){e.DEFMETHOD("may_throw",n)}),function(e){function n(e,n){for(var t=e.length;--t>=0;)if(!e[t].is_constant_expression(n))return!1;return!0}e($e,ct),e(a,function(e){return n(this.elements,e)}),e(m,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&Ui(this.operator,this.right)}),e(E,function(e){var t=this.extends;return!(t&&!r(t))&&n(this.properties,e)}),e(P,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),e(R,lt),e(ke,function(e){var n=this,t=!0,i=[];return n.walk(new jn(function(r,o){if(!t)return!0;if(r instanceof b){if(r===n)return;return i.push(r),o(),i.pop(),!0}if(r instanceof _n){if(n.inlined||r.redef||r.in_arg)return t=!1,!0;if(n.variables.has(r.name))return!0;var a=r.definition();if(it(a.scope,i))return!0;if(e&&!a.redefined()){var s=e.find_variable(r.name);if(s?s===a:a.undeclared)return t="f",!0}return t=!1,!0}return r instanceof Ie?(Bn(n)&&Gn(i,function(e){return!(e instanceof Ve)||Bn(e)})&&(t=!1),!0):void 0})),t}),e(je,function(e){return n(this.properties,e)}),e(Ne,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),e(Tn,function(e){return this.expression.is_constant_expression(e)})}(function(e,n){e.DEFMETHOD("is_constant_expression",n)}),function(e){function n(){var e=this.body.length;return e>0&&fi(this.body[e-1])}e(Je,ut),e(Se,pt),e(y,n),e(nn,n),e(ge,function(){return this.alternative&&fi(this.body)&&fi(this.alternative)&&this})}(function(e,n){e.DEFMETHOD("aborts",n)});var ci=nt(["use asm","use strict"]);function ui(e,n,t){switch(e.body.length){case 0:return t?Zn.skip:st(re,e);case 1:var i=e.body[0];return qt(i)?n instanceof we&&i instanceof Te?e:i:e}return e}function li(e,n){n.option("rests")&&(e.uses_arguments||e.rest instanceof X&&n.drop_fargs(e,n.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest))}function pi(e,n){if(!n.option("arrows"))return e;li(e,n),e.value&&(e.body=[e.first_statement()]);var t=Ut(e.body,n);switch(t.length){case 1:var i=t[0];if(i instanceof Ue){e.body.length=0,e.value=i.value;break}default:e.body=t,e.value=null}return e}e(ee,function(e,n){return!n.option("directives")||ci[e.value]&&n.has_directive(e.value)===e?e:st(re,e)}),e(H,function(e,n){return n.option("drop_debugger")?st(re,e):e}),e(xe,function(e,n){if(e.body instanceof ge||e.body instanceof S){var t=Ut([e.body],n);switch(t.length){case 0:e.body=st(re,e);break;case 1:e.body=t[0];break;default:e.body=st(y,e,{body:t})}}return n.option("unused")&&0==e.label.references.length?e.body:e}),e(De,function(e,n){if(!n.option("dead_code"))return e;var t=e.label;if(t){var i=n.loopcontrol_target(e);e.label=null,n.loopcontrol_target(e)===i?ft(t.thedef.references,e):e.label=t}return e}),e(g,function(e,n){return e.body=Ut(e.body,n),e}),e(y,function(e,n){return e.body=Ut(e.body,n),ui(e,n.parent())}),e(ke,function(e,n){return li(e,n),e.body=Ut(e.body,n),e}),e(s,pi),e(c,pi),e(_e,function(e,n){li(e,n),e.body=Ut(e.body,n);var t=n.parent();if(n.option("inline"))for(var i=0;i<e.body.length;i++){var r=e.body[i];if(!(r instanceof ee)){if(r instanceof Ue){if(i!=e.body.length-1)break;var o=r.value;if(!o||"Call"!=o.TYPE)break;if(o.is_expr_pure(n))break;var a,s=o.expression;if(s instanceof _n){if(e.name&&e.name.definition()===s.definition())break;a=s.fixed_value()}else a=s;if(!(a instanceof W||a instanceof _e))break;if(a.rest)break;if(a.uses_arguments)break;if(a===s){if(a.parent_scope!==e)break;if(!Gn(a.enclosed,function(n){return n.scope!==e}))break}if((a!==s||a.name)&&(t instanceof F||t instanceof Re)&&t.value===n.self())break;if(a.contains_this())break;var f=a.argnames.length;if(f>0&&n.option("inline")<2)break;if(f>e.argnames.length)break;if(!Gn(e.argnames,function(e){return e instanceof ln}))break;if(!Gn(o.args,function(e){return!(e instanceof Ke)}))break;for(var c=0;c<f;c++){var u=o.args[c];if(!(u instanceof _n))break;if(u.definition()!==e.argnames[c].definition())break}if(c<f)break;for(;c<o.args.length&&!o.args[c].has_side_effects(n);c++);if(c<o.args.length)break;if(f<e.argnames.length&&!n.drop_fargs(e,t)){if(!n.drop_fargs(a,o))break;do{a.argnames.push(a.make_var(ln,a,"argument_"+f))}while(++f<e.argnames.length)}return s}break}}return e});var hi=nt("arguments await yield");function di(e,n){for(var t=n.length;--t>=0;)n[t]||(n[t]=st(me,e))}function vi(e,n){var t=st(D,e);return t.name&&(t.name=n?null:st(on,t.name)),t}function _i(e,n){var t;switch(e.CTOR){case u:t=l;break;case p:t=h;break;case W:t=_e;break;case AST_GeneratorDefun:t=AST_GeneratorFunction}var i=st(t,e);return i.name=n?null:st(hn,e.name),i}function mi(e,n){e.walk(new jn(function(t){return t instanceof Ue?(n(t),!0):t instanceof Ve&&t!==e||void 0}))}function gi(e){var n=Object.create(null);return mi(e,function(e){var t=e.value;if(t&&(t=t.tail_node()),t instanceof _n){var i=t.definition().id;n[i]=(n[i]||0)+1}}),n}function bi(e,n,t){if(t.exposed(e))return!1;switch(e.references.length-e.replaced-(n[e.id]||0)){case e.drop_return:return"d";case e.bool_return:return!0}}function yi(e,n){mi(e,function(e){e.in_bool=!0;var t=e.value;if(t){var i=Ti(n,t);i?i instanceof $e||(t=t.drop_side_effect_free(n),e.value=t?ht(e.value,[t,st(Pe,e.value,{value:1})]):st(Pe,e.value,{value:1})):(t=t.drop_side_effect_free(n),e.value=t?ht(e.value,[t,st(Pe,e.value,{value:0})]):null)}})}function wi(e,n){if(!e.name||!n.option("ie"))return!0;var t=e.name.definition();return!n.exposed(t)&&Gn(t.references,function(e){return!(e instanceof _n)})}function Si(e,n,t){if(n instanceof ke){var i=Bn(n),r=Ln(n),o=!1,a=!1;if(i&&e.option("arrows"))if(n.value){if(!r||Vi(e,n.value)){var f=n.value.drop_side_effect_free(e);f!==n.value&&(o=!0,n.value=f)}}else a=!0;else if(!Hn(n))if(!t&&n.name){var u=n.name.definition();a=u.references.length==u.replaced}else a=!0;if(a&&(n.process_expression(!1,function(n){var t=n.value;if(t){if(r&&!Vi(e,t))return n;t=t.drop_side_effect_free(e,!0)}return o=!0,t?st(We,n,{body:t}):st(re,n)}),mi(n,function(n){var t=n.value;if(t){if(r&&!Vi(e,t))return;var i=t.drop_side_effect_free(e);i!==t&&(o=!0,i&&r&&!Vi(e,i)&&(i=i.negate(e)),n.value=i)}})),r&&e.option("awaits")){a&&n.process_expression("awaits",function(n){var t=n.body;if(t instanceof v){if(Vi(e,t.expression)){if(o=!0,!(t=t.expression.drop_side_effect_free(e,!0)))return st(re,n);n.body=t}}else if(t instanceof Ge){for(var i=t.expressions,r=i.length;--r>=0;){var a=i[r];if(!(a instanceof v))break;var s=a.expression;if(!Vi(e,s))break;if(o=!0,i[r]=s.drop_side_effect_free(e))break}switch(r){case-1:return st(re,n);case 0:n.body=i[0];break;default:i.length=r+1}}return n});var p=!a&&n.name||i&&n.value&&!Vi(e,n.value),d=new jn(function(t){return!!p||(d.parent()===n&&t.may_throw(e)?p=!0:t instanceof v?p=!0:t instanceof AST_ForAwaitOf?p=!0:t instanceof Ue?t.value&&!Vi(e,t.value)?p=!0:void 0:t instanceof Ve&&t!==n||void 0)});if(n.walk(d),!p){var _;switch(n.CTOR){case c:_=s;break;case l:_=_e;break;case h:_=AST_GeneratorFunction}return st(_,n)}}return o&&n.clone()}}function xi(e,n,t){t||(t=De);var i=!1,r=new jn(function(n){return!!(i||n instanceof Ve)||(n instanceof t&&r.loopcontrol_target(n)===e?i=!0:void 0)});return n instanceof xe&&r.push(n),r.push(e),e.body.walk(r),i}function ki(e,n,t){if(e instanceof Ge&&(e=e.tail_node()),e instanceof m)if(e.left instanceof Xe){if(e.right instanceof En&&"typeof"==e.right.operator){var i=e.right.expression;if(Mt(i)){var r,o="undefined"==e.left.value;switch(e.operator){case"==":r=o?t:n;break;case"!=":r=o?n:t;break;default:return}if(r){var a,s=!1,c=i.definition(),u=[],l=[],p=new jn(function(e,n){if(s)return!0;if(e instanceof f){var t=e.left;if(!(t instanceof _n&&t.definition()===c))return;switch(e.right.walk(p),e.operator){case"=":case"&&=":s=!0}return!0}if(e instanceof x)return n(),(a=e.expression.tail_node())instanceof _n&&(a=a.fixed_value(),i=u.length),a instanceof ke?ot(l,a)&&a.walk(p):s=!0,i>=0&&(u.length=i),!0;if(e instanceof ie){var i=u.length;return n(),s&&(u.length=i),!0}if(e instanceof he){e.init&&e.init.walk(p);var i=u.length;return e.condition&&e.condition.walk(p),e.body.walk(p),e.step&&e.step.walk(p),s&&(u.length=i),!0}if(e instanceof de){e.object.walk(p);var i=u.length;return e.init.walk(p),e.body.walk(p),s&&(u.length=i),!0}if(e instanceof Ve){if(e===a)return;return!0}return e instanceof _n?(e.definition()===c&&u.push(e),!0):void 0});r.walk(p),u.forEach(function(e){e.defined=!0})}}}}else switch(e.operator){case"&&":ki(e.left,n),ki(e.right,n);break;case"||":ki(h(e.left),t),ki(h(e.right),t)}function h(e){if(e instanceof m)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function Ti(e,n,t){return!!n.truthy||(Gt(n)?void 0:!(n.falsy&&!t)&&(!!n.is_truthy()||n.evaluate(e,!0)))}function Ai(e,n){var t,i=0,r=!1,o=e.self();if(!Yn(o))for(;;){if(t=o,(o=e.parent(i++))instanceof m)switch(t){case o.left:if(Wt[o.operator])continue;break;case o.right:if(s(o.left))switch(o.operator){case"&&":n[r?"falsy":"truthy"]=!0;break;case"||":case"??":n[r?"truthy":"falsy"]=!0}}else if(o instanceof N){var a=o.condition;if(a===t)continue;if(s(a))switch(t){case o.consequent:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}}else{if(o instanceof oe)break;if(o instanceof ge)break;if(o instanceof Ge){if(o.expressions[0]===t)continue}else if(o instanceof We)break}return}for(;;){if(t=o,(o=e.parent(i++))instanceof y){if(o.body[0]===t)continue}else if(o instanceof ge&&s(o.condition))switch(t){case o.body:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}return}function s(e){return!!n.equals(e)||e instanceof En&&("!"==e.operator&&(!!n.equals(e.expression)&&(r=!0,!0)))}}function Ei(e){return function(n,t){var i=!1;return this.definitions.forEach(function(r){r.value&&(i=!0),r.name.match_symbol(function(i){i instanceof fn&&t.push(st(qn,i,{name:i,value:e(n,i)}))},!0)}),i}}function Di(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof hn?3:2)}function Oi(e,n){if(e.exposed(n))return!0;for(var t=n.scope.resolve(),i=n.scope;i!==t;)if((i=i.parent_scope).var_names().has(n.name))return!0}function qi(e,n){return st(On,e,{definitions:e.definitions.map(function(e){return st(qn,e,{name:e.name.convert_symbol(mn,function(e,t){var i=e.definition();i.orig[i.orig.indexOf(t)]=e,i.scope!==n&&(i.scope=n,n.variables.set(i.name,i),n.enclosed.push(i),n.var_names().set(i.name,!0))}),value:e.value})})})}function Ci(e,n){var t=n.definition();return(t.fixed||0===t.fixed)&&Di(t)&&Xi(t)&&!Oi(e,t)}function $i(e,n){return n.option("varify")&&Gn(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof fn)return!Ci(n,e)},!0)})?qi(e,n.find_parent(Ve)):e}function Fi(e,n){if(n.option("optional_chains")&&e.terminal)do{var t=e.expression;if(e.optional){var i=Ti(n,t,!0);if(null==i)return st(En,e,{operator:"void",expression:t}).optimize(n);i instanceof $e||(e.optional=!1)}e=t}while(("Call"==e.TYPE||e instanceof Ye)&&!e.terminal)}function Pi(e,n){var t=e.expression;if(!(t instanceof Ge))return e;var i=t.expressions.slice(),r=e.clone();return r.expression=i.pop(),i.push(r),ht(e,i)}function ji(e,n,t){var i=e.expression,r=i instanceof _n?i.fixed_value():i;if(r instanceof ke&&!r.uses_arguments&&!(r.pinned()||t&&t.indexOf(r)<0)){var o=e.args;if(Gn(o,function(e){return!(e instanceof Ke)})){var s=r.argnames,f=r===i&&!r.name;if(r.rest){if(!f||!n.option("rests"))return;var c=s.length;for(o=o.slice(0,c);o.length<c;)o.push(st(Dn,e).optimize(n));o.push(st(a,e,{elements:e.args.slice(c)})),s=s.concat(r.rest),r.rest=null}else o=o.slice(),s=s.slice();for(var u=0,l=0,p=f&&n.option("default_values"),h=f&&n.drop_fargs(r,e)?function(e,t){return!e||(e instanceof X?0==e.elements.length&&!e.rest&&t instanceof a:e instanceof Z?0==e.properties.length&&!e.rest&&t&&!t.may_throw_on_access(n):e.unused)}:ct,d=[],v=0;v<o.length;v++){var _=s[v];if(p&&_ instanceof U&&o[v].is_defined(n)&&(s[v]=_=_.name),_&&void 0===_.unused){if(h(_,o[v])){var m=o[v].drop_side_effect_free(n);s.splice(v,1),o.splice(v,1),m&&d.push(m),v--;continue}d.push(o[v]),o[u++]=ht(e,d),d=[]}else{var m=o[v].drop_side_effect_free(n);if(h(_)){_&&s.splice(v,1),o.splice(v,1),m&&d.push(m),v--;continue}if(m)d.push(m),o[u++]=ht(e,d),d=[];else if(_){if(!d.length){o[u++]=st(Pe,o[v],{value:0});continue}o[u++]=ht(e,d),d=[]}}l=u}for(;v<s.length;v++)h(s[v])&&s.splice(v--,1);if(r.argnames=s,o.length=l,e.args=o,d.length){var g=ht(e,d);o.push(o.length<s.length?st(En,e,{operator:"void",expression:g}):g)}}}}function zi(e,n){n||(n=e.find_parent(Ve));var t=[];return(Ln(n)||n instanceof Sn&&e.option("module"))&&t.push("await"),Hn(n)&&t.push("yield"),t.length&&nt(t)}function Mi(e,n){if(!n)return!0;var t=!0,i=new jn(function(r){if(!t)return!0;if(r instanceof Ve){if(r===e)return;if(Bn(r))for(var o=0;t&&o<r.argnames.length;o++)r.argnames[o].walk(i);else r instanceof Te&&n[r.name.name]&&(t=!1);return!0}r instanceof tn&&n[r.name]&&r!==e.name&&(t=!1)});return e.walk(i),t}function Ni(e,n){return e.in_strict_mode(n)||!n.has_directive("use strict")}function Ii(e,n,t,i){if(i instanceof m&&("&&"==i.operator||"||"==i.operator)&&i.right instanceof f&&"="==i.right.operator&&i.right.left instanceof _n&&i.right.left.definition()===n&&!t.has_side_effects(e)&&r(i.left)&&r(i.right.right))return n.replaced++,"&&"==i.operator?st(N,i,{condition:i.left,consequent:i.right.right,alternative:t}):st(N,i,{condition:i.left,consequent:t,alternative:i.right.right});function r(t){if(!t.has_side_effects(e)){var i=!1;return t.walk(new jn(function(e){return!!i||(e instanceof _n&&e.definition()===n?i=!0:void 0)})),!i}}}Ve.DEFMETHOD("merge_variables",function(e){if(e.option("merge_vars")){var n,t,i=[],r={},o=this,a=[],s=[],c=0,u=new Kn,l=Object.create(null),p=Object.create(null),h=new jn(function(a,s){if(a instanceof f){var c=a.left,p=a.right;return c instanceof J?(p.walk(h),O(_n,q,c),!0):Wt[a.operator.slice(0,-1)]?(c.walk(h),A(),p.walk(h),c instanceof _n&&q(c),D(),!0):c instanceof _n?("="!=a.operator&&q(c,!0),p.walk(h),q(c),!0):void 0}if(a instanceof m){if(!Wt[a.operator])return;return T(a),!0}if(a instanceof S){var d=h.loopcontrol_target(a);return d instanceof we||C(d),!0}if(a instanceof x){var v=a.expression;return v instanceof Ae?(a.args.forEach(function(e){e.walk(h)}),v.walk(h)):(s(),k(v)),!0}if(a instanceof E)return a.name&&a.name.walk(h),a.extends&&a.extends.walk(h),a.properties.filter(function(e){return e.key instanceof $e&&e.key.walk(h),e.value}).forEach(function(e){e.static?e.value.walk(h):(A(),r.block=a,e.value.walk(h),D())}),!0;if(a instanceof N)return T(a.condition,a.consequent,a.alternative),!0;if(a instanceof B){var d=h.loopcontrol_target(a);return d instanceof ne&&C(d),!0}if(a instanceof ne){A(),r.block=a,r.loop=!0;var _=r;return a.body.walk(h),r.inserted===a&&(r=_),a.condition.walk(h),D(),!0}if(a instanceof he)return a.init&&a.init.walk(h),A(),r.block=a,r.loop=!0,a.condition&&a.condition.walk(h),a.body.walk(h),a.step&&a.step.walk(h),D(),!0;if(a instanceof de)return a.object.walk(h),A(),r.block=a,r.loop=!0,a.init.walk(h),a.body.walk(h),D(),!0;if(a instanceof ge)return T(a.condition,a.body,a.alternative),!0;if(a instanceof xe){A(),r.block=a;var _=r;return a.body.walk(h),r.inserted===a&&(r=_),D(),!0}if(a instanceof Ve){if(A(),r.block=a,a===o&&(t=r),a instanceof ke){a.name&&(l[a.name.definition().id]=!1);var g=a.uses_arguments&&!h.has_directive("use strict")?function(e){l[e.definition().id]=!1}:function(e){q(e)};i.push(a),a.argnames.forEach(function(e){O(ln,g,e)}),a.rest&&O(ln,g,a.rest),i.pop()}return Vn(a,h),D(),!0}if(a instanceof Qe){var v=a.expression;return a.optional?(v.walk(h),A(),a.property.walk(h),D()):s(),k(v),!0}if(a instanceof en){a.expression.walk(h);var _=r;return a.body.forEach(function(e){e instanceof Y||(e.expression.walk(h),_===r&&A())}),r=_,a.body.forEach(function(e){A(),r.block=a;var n=r;Un(e,h),r.inserted===a&&(r=n),D()}),!0}if(a instanceof sn||a instanceof dn)return l[a.definition().id]=!1,!0;if(a instanceof _n)return q(a,!0),!0;if(a instanceof kn){var b=n;return n=a,Un(a,h),a.bcatch&&(a.bcatch.argname&&a.bcatch.argname.mark_symbol(function(e){if(e instanceof rn){var n=e.definition();l[n.id]=!1,(n=n.redefined())&&(l[n.id]=!1)}},h),a.bfinally||(n=b)?Un(a.bcatch,h):(A(),Un(a.bcatch,h),D())),n=b,a.bfinally&&a.bfinally.walk(h),!0}if(a instanceof Tn){if(!gt[a.operator])return;var y=a.expression;if(!(y instanceof _n))return;return q(y,!0),!0}if(a instanceof qn){var w=a.value;return w?w.walk(h):w=r.block instanceof de&&r.block.init===h.parent(),O(fn,w?function(e){e instanceof mn?q(e):e.walk(h)}:function(e){if(e instanceof mn){var n=e.definition().id,t=l[n];t?t.push(e):n in l||u.add(n,e)}else e.walk(h)},a.name),!0}if(a instanceof Cn)return A(),r.block=a,r.loop=!0,s(),D(),!0;function k(n){if(e.option("ie")){var t=Rn(n);t instanceof _n&&t.walk(h)}}function T(e,n,t){var i=r,o=[i,i];if(e instanceof m)switch(e.operator){case"&&":o[0]=T(e.left,e.right)[0];break;case"||":case"??":o[1]=T(e.left,null,e.right)[1];break;default:e.walk(h)}else e instanceof N?T(e.condition,e.consequent,e.alternative):e.walk(h);return r=o[0],n&&(A(),n.walk(h)),o[0]=r,r=o[1],t&&(A(),t.walk(h)),o[1]=r,r=i,o}});h.directives=Object.create(e.directives),o.walk(h);for(var d=!1,v=Object.create(null);a.length&&s.length;){var _=s.shift();if(_){var g=_.definition,b=l[g.id];if(b){for(b={end:b.end};g.id in v;)g=v[g.id];b.start=l[g.id].start;var y=[];do{var w=a.shift();if(!(_.index>w.index)){var k=w.definition;if(k.id in p){var T=l[k.id];if(T){if(T.start.block===b.start.block&&F(T,b)&&(!T.start.loop&&Xi(g)||F(b,T))&&(!e.option("webkit")||St(g)===St(k))&&!k.const_redefs&&Gn(T.scopes,function(e){return e.find_variable(g.name)===g})){T.forEach(function(e){e.thedef=g,e.name=g.name,e instanceof _n?(g.references.push(e),k.replaced++):(g.orig.push(e),k.eliminated++)}),k.fixed||(g.fixed=!1),v[k.id]=g,d=!0;break}y.push(w)}}}}while(a.length);y.length&&(a=y.concat(a))}}}return d}function A(){r=Object.create(r)}function D(){r=Object.getPrototypeOf(r)}function O(e,n,t){var i=new jn(function(t){if(!(t instanceof J))return t instanceof U?(A(),t.value.walk(h),D(),t.name.walk(i)):t instanceof Q?t.key instanceof $e?t.value instanceof Ye?(A(),r.block=t,t.key.walk(h),t.value.walk(i),D()):(t.key.walk(h),t.value.walk(i)):t.value.walk(i):t instanceof e?n(t):t.walk(h),!0});t.walk(i)}function q(f,d){var v,_=f.definition();if(d&&!Gn(i,function(e){return!(v=e.variables.get(f.name))||(!St(v)||v!==_&&!_.undeclared&&e.parent_scope.find_variable(f.name)!==_)}))return l[_.id]=l[v.id]=!1;var m=r;if(n&&(A(),m=r,D()),_.id in l){var g=l[_.id];if(!g)return;if(g.start.block!==m.block)return l[_.id]=!1;if(b(f),g.end=m,_.id in p)s[p[_.id]]=null;else if(!d)return}else{if((v=o.variables.get(_.name))!==_)return v&&t===m&&(l[v.id]=!1),l[_.id]=!1;if(e.exposed(_)||hi[f.name])return l[_.id]=!1;var g=u.get(_.id)||[];if(g.scopes=[],b(f),l[_.id]=g,!d)return g.start=m,a.push({index:c++,definition:_});if(m.block!==o)return l[_.id]=!1;g.start=t}function b(e){g.push(e),ot(g.scopes,e.scope);var n=Xn(h);n!==e.scope&&ot(g.scopes,n)}p[_.id]=s.length,s.push({index:c++,definition:_})}function C(e){for(var n=[];;){if(Qn(r,"block")){var t=r.block;if(t instanceof xe&&(t=t.body),t===e)break}n.push(r),D()}for(r.inserted=r.block,A();n.length;){var i=n.pop();A(),Qn(i,"block")&&(r.block=i.block),Qn(i,"loop")&&(r.loop=i.loop)}}function $(e,n){return e===n||e.isPrototypeOf(n)}function F(e,n){return $(e.start,e.end)||$(e.start,n.start)}}),Ve.DEFMETHOD("drop_unused",function(e){if(e.option("unused")){var n=this,t=!(n instanceof Sn)||e.toplevel.funcs,i=!(n instanceof Sn)||e.toplevel.vars,r=/keep_assign/.test(e.option("unused"))?ct:function(n,t){var i,r=!1;if(n instanceof f?(n.write_only||"="==n.operator)&&(i=a(n.left,t)):n instanceof Tn&&n.write_only&&(i=a(n.expression,t)),i instanceof _n){var o=i.definition();if(!c[o.id]&&!e.exposed(o)&&M(i,e,r))return i}function a(n,t){if(n instanceof Ye){var i=n.expression;if(!i.may_throw_on_access(e,!0))return r=!0,t&&n instanceof Qe&&t.unshift(n.property),a(i,t)}else if(n instanceof f&&"="==n.operator){n.write_only="p";var o=a(n.right);return t?(t.assign=n,o instanceof _n?o:n.left):o}return n}},s=Object.create(null),c=Object.create(null),d=function(t){return(d=function n(t,i,r){var o=e.parent(i);if(!o)return r;var a=o instanceof ke&&it(t,o.argnames);return n(o,i+1,a?function(e){var n=r(e);if(n)return n;if(n=o.variables.get(e)){var t=n.orig[0];if(t instanceof ln||t instanceof hn)return n}}:o.variables?function(e){return r(e)||o.variables.get(e)}:r)}(n,0,rt))(t)},v=Object.create(null),_=[],b=Object.create(null),w=Object.create(null),S=Object.create(null),k=Object.create(null),E=Object.create(null);n instanceof Sn&&e.top_retain&&n.variables.each(function(n){!e.top_retain(n)||n.id in b||($e.info("Retaining variable {name}",n),b[n.id]=!0,_.push(n))});var O=new Kn,q=new Kn,C=this,$=new jn(function(r,o){if(r instanceof ke&&r.uses_arguments&&!$.has_directive("use strict")&&r.each_argname(function(e){var n=e.definition();n.id in b||(b[n.id]=!0,_.push(n))}),r!==n){if(C===n){if(r instanceof V){var a=r.name.definition(),s=t&&!a.exported;s||a.id in b||(b[a.id]=!0,_.push(a));var f=$.parent()instanceof ce;f?c[a.id]=!0:!s||a.id in w||(w[a.id]=1),r.extends&&r.extends.walk($);var u=[];return r.properties.forEach(function(e){e.key instanceof $e&&e.key.walk($);var n=e.value;n&&(Rt(e)?(!f&&n.contains_this()&&(f=!0),l(n)):u.push(n))}),u.forEach(s&&f?l:function(e){q.add(a.id,e)}),!0}if(r instanceof Te){var a=r.name.definition(),s=t&&!a.exported;return s||a.id in b||(b[a.id]=!0,_.push(a)),q.add(a.id,r),$.parent()instanceof ce?(c[a.id]=!0,ye(r,o,!0)):(!s||a.id in w||(w[a.id]=1),!0)}if(r instanceof G)return r.definitions.forEach(function(n){var t=n.value,o=t&&(n.name instanceof J||t.has_side_effects(e)),a=o&&"="==t.tail_node().operator;n.name.mark_symbol(function(e){if(e instanceof fn){var s=e.definition();if(E[s.id]=(E[s.id]||0)+1,r instanceof On&&s.orig[0]instanceof rn){var f=s.redefined();f&&(E[f.id]=(E[f.id]||0)+1)}return s.id in b||i&&!s.exported&&(r instanceof I?!s.redefined():!s.const_redefs)&&(r instanceof On||Di(s))||(b[s.id]=!0,_.push(s)),t&&(o?a&&se(s,e,k[s.id]):q.add(s.id,t),O.add(s.id,n)),ae(s),!0}},$),o&&t.walk($)}),!0;if(r instanceof ln){var a=r.definition();return E[a.id]=(E[a.id]||0)+1,O.add(a.id,r),!0}if(r instanceof pn){var a=r.definition();return a.id in b||i&&Di(a)||(b[a.id]=!0,_.push(a)),!0}}return ye(r,o,!0)}function l(e){var n=C;C=r,e.walk($),C=n}});$.directives=Object.create(e.directives),n.walk($);var F=e.option("keep_fnames")?ct:e.option("ie")?function(n){return!e.exposed(n)&&n.references.length==n.replaced}:function(e){return!(e.id in b)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof ln||Gn(e.references,function(e){return!e.in_arg}))};e.option("ie")&&q.each(function(e,n){n in b||e.forEach(function(e){e.walk(new jn(function(e){return e instanceof _e&&e.name&&!F(e.name.definition())?(e.walk($),!0):e instanceof Ve||void 0}))})}),$=new jn(ye);for(var P=0;P<_.length;P++){var j=q.get(_[P].id);j&&j.forEach(function(e){e.walk($)})}Object.keys(s).forEach(function(e){var n=s[e];if(n){n=n.reduce(function(e,n){return n.forEach(function(n){ot(e,n)}),e},[]);var t=(O.get(e)||[]).filter(function(e){return Jn(e instanceof Tn?function(n){return n===e}:function(n){return n===e||!(n instanceof Tn)&&Q(n)===Q(e)},n)});n.length==t.length?s[e]=t:delete s[e]}else delete s[e]});var R=[],B=[],H=new Pn(function(n){if(n instanceof U)return Se(H,n);if(n instanceof J&&n.rest&&(n.rest=n.rest.transform(H)),n instanceof X){for(var t=!n.rest,i=n.elements.length;--i>=0;){var r=n.elements[i].transform(H);r?(n.elements[i]=r,t=!1):t?n.elements.pop():n.elements[i]=st(me,n.elements[i])}return n}if(n instanceof Z){var o=[];return n.properties.forEach(function(t){var i=!1;if(t.key instanceof $e&&(t.key=t.key.transform(Y),i=t.key.has_side_effects(e)),(i||n.rest)&&function(e){return(e instanceof U?e.name:e)instanceof fn}(t.value))t.value=t.value.transform(Y),o.push(t);else{var r=t.value.transform(H);!r&&n.rest&&(r=t.value instanceof X?st(X,t.value,{elements:[]}):st(Z,t.value,{properties:[]})),r&&(t.value=r,o.push(t))}}),n.properties=o,n}return n instanceof fn?we(n):void 0}),Y=new Pn(function(c,d,_){var w=Y.parent();if(i){var S=[],k=r(c,S);if(k){if(function(e,n){var t=e.definition(),i=b[t.id];return!i||n[n instanceof f?"left":"expression"]===e&&(i===e&&t.references.length-t.replaced==1||oe(t,n)<0)}(k,c)&&(c instanceof f&&($=ue(c),!0===c.write_only&&($=$.drop_side_effect_free(e))),$||($=st(Pe,c,{value:0}))),$){if(S.assign){var O=S.assign.drop_side_effect_free(e);O&&(O.write_only=!0,S.unshift(O))}switch(w instanceof Ge&&w.tail_node()!==c&&!$.has_side_effects(e)||S.push($),S.length){case 0:return Zn.skip;case 1:return At(w,c,S[0].transform(Y));default:return ht(c,S.map(function(e){return e.transform(Y)}))}}}else if(c instanceof An&&c.expression instanceof _n&&oe(c.expression.definition(),c)<0)return st(En,c,{operator:"+",expression:c.expression})}if(c instanceof m&&"instanceof"==c.operator){var k=c.right;if(!(k instanceof _n))return;if(k.definition().id in b)return;var q=c.left.drop_side_effect_free(e),$=st(le,c).optimize(e);return q?ht(c,[q,$]):$}if(c instanceof x)return R.push(c),c.args=c.args.map(function(e){return e.transform(Y)}),c.expression=c.expression.transform(Y),c;if(C===n){if(t&&c!==n&&c instanceof V){var P=c.name.definition();if(!(P.id in b)){L(c.name,"Dropping unused class {name}"),P.eliminated++,d(c,Y);var j=vi(c,!0);return w instanceof ce?j:(j=j.drop_side_effect_free(e,!0))?st(We,c,{body:j}):_?Zn.skip:st(re,c)}}if(c instanceof D&&c.name&&F(c.name.definition())&&(c.name=null),c instanceof ke){if(t&&c!==n&&c instanceof Te){var P=c.name.definition();if(!(P.id in b))return L(c.name,"Dropping unused function {name}"),P.eliminated++,w instanceof ce?(je(),_i(c,!0)):_?Zn.skip:st(re,c)}if(je(),c instanceof Ae&&c.name&&F(c.name.definition())&&(c.name=null),!(c instanceof o)){var z,N,U=e.drop_fargs(c,w);if(U&&w instanceof x&&w.expression===c)for(z=w.args,N=0;N<z.length&&!(z[N]instanceof Ke);N++);var Q=c.argnames,Z=c.rest,ee=!1,te=!1;if(Z){if(te=!0,!z||N<Q.length||Z instanceof ln)Z=Z.transform(H);else{var j=De(Z,st(a,w,{elements:z.slice(Q.length)}),we,!c.uses_arguments,Z);Z=j.name,z.length=Q.length,j.value.elements.length&&[].push.apply(z,j.value.elements)}Z instanceof J&&!Z.rest&&(Z instanceof X?0==Z.elements.length&&(Z=null):0==Z.properties.length&&(Z=null)),c.rest=Z,Z&&(U=!1,ee=!0)}for(var ie=U?-1:c.length(),ae=z&&!c.uses_arguments&&w!==e.parent(),se=Q.length;--se>=0;){var k=Q[se];if(k instanceof ln){var P=k.definition();P.id in b?(U=!1,oe(P,k)<0&&(k.unused=null)):U?(L(k,"Dropping unused function argument {name}"),Q.pop(),P.eliminated++,k.unused=!0):k.unused=!0}else{var pe;if(te=!0,!z||N<se)pe=k.transform(H);else{var j=De(k,z[se],we,ae,k);pe=j.name,j.value&&(z[se]=j.value)}pe?(U=!1,Q[se]=pe,ee||(ee=!(pe instanceof ln))):U?(K(k,"Dropping unused default argument {name}"),Q.pop()):se>ie?(K(k,"Dropping unused default argument assignment {name}"),k.name instanceof ln?k.name.unused=!0:ee=!0,Q[se]=k.name):(K(k,"Dropping unused default argument value {name}"),Q[se]=k=k.clone(),k.value=st(Pe,k,{value:0}),ee=!0)}}te&&!ee&&c.uses_arguments&&!Y.has_directive("use strict")&&(c.rest=st(X,c,{elements:[]})),B.push(c)}return c}if(c instanceof T&&c.argname instanceof J&&c.argname.transform(H),c instanceof G&&!(w instanceof de&&w.init===c)){var ve=[],me=[],be=[],ye=[],Se=0,Oe=c instanceof On;switch(c.definitions.forEach(function(n){n.value&&(n.value=n.value.transform(Y));var t=n.value;if(n.name instanceof J){var r=De(n.name,t,function(e){return i?e.definition().id in b?e:x(e)?e:Oe&&!M(e)?e:null:e},!0);r.name?(n=st(qn,n,{name:r.name,value:t=r.value}),k()):r.value&&ye.push(r.value)}else{var o,a,f,d,v=n.name.definition(),_=Oe?M(n.name):Di(v);if(!_||!i||v.id in b)if(t&&((o=oe(v,n))<0||(d=t.tail_node())instanceof _n&&d.definition()===v)&&(n=n.clone(),(t=t.drop_side_effect_free(e))&&$e.warn("Side effects in definition of variable {name} [{start}]",n.name),c instanceof I?n.value=t||st(Pe,n,{value:0}):(n.value=null,t&&ye.push(t)),t=null,o>=0&&(s[v.id][o]=n)),t||c instanceof Ee)if(e.option("functions")&&!e.option("ie")&&_&&t&&1==E[v.id]&&0==v.assignments&&(f=t.tail_node())instanceof Ae&&!A(v)&&!Bn(f)&&function(e,t){return 0==t.length?e===n.name.fixed_value():Gn(t,function(n){return e===n.fixed_value()})}(f,v.references)&&function(n){if(!Oe||e.has_directive("use strict")||!(n instanceof _e))return w instanceof Ve;return w instanceof g||w instanceof he&&w.init===c||w instanceof ge}(f)&&!1!==(a=function(n,t){if(!n.name)return null;var i,r=n.name.definition();if(r.orig.length>1)return null;if(r.assignments>0)return!1;if(r.name==t)return r;if(e.option("keep_fnames"))return!1;switch(t){case"await":i=Ln;break;case"yield":i=Hn}return Gn(r.references,function(e){var r=e.scope;if(r.find_variable(t)!==v)return!1;if(i)do{if(r=r.resolve(),i(r))return!1}while(r!==n&&(r=r.parent_scope));return!0})&&r}(f,n.name.name))){var m;switch($e.warn("Declaring {name} as function [{start}]",n.name),f.CTOR){case l:m=u;break;case h:m=p;break;case _e:m=W;break;case AST_GeneratorFunction:m=AST_GeneratorDefun}var y=st(m,f);y.name=st(cn,n.name);var S=n.name.scope.resolve().def_function(y.name);a&&a.forEach(function(e){e.name=S.name,e.thedef=S,e.reference()}),ve.push(y),t!==f&&[].push.apply(ye,t.expressions.slice(0,-1))}else _&&E[v.id]>1&&!(w instanceof fe)&&v.orig.indexOf(n.name)>v.eliminated&&(E[v.id]--,Se++),k();else w instanceof fe?k():_&&E[v.id]>1?($e.info("Dropping declaration of variable {name} [{start}]",n.name),E[v.id]--,v.eliminated++):me.push(n);else x(n.name)?((t=t&&t.drop_side_effect_free(e))&&ye.push(t),E[v.id]>1?($e.warn("Dropping duplicated declaration of variable {name} [{start}]",n.name),E[v.id]--,v.eliminated++):(n.value=null,me.push(n))):((t=t&&t.drop_side_effect_free(e))?($e.warn("Side effects in initialization of unused variable {name} [{start}]",n.name),ye.push(t)):L(n.name,"Dropping unused variable {name}"),v.eliminated++)}function x(e){var n=e.definition();return n.orig[0]instanceof rn&&n.scope.resolve()===e.scope.resolve()}function k(){ye.length>0&&(0==be.length?ve.push(st(We,c,{body:ht(c,ye)})):t?(ye.push(t),n.value=ht(t,ye)):n.value=st(En,n,{operator:"void",expression:ht(n,ye)}),ye=[]),be.push(n)}}),me.length){case 0:if(0==be.length)break;if(be.length==Se){[].unshift.apply(ye,be.map(function(e){$e.info("Dropping duplicated definition of variable {name} [{start}]",e.name);var n=e.name.definition(),t=st(_n,e.name);n.references.push(t);var i=st(f,e,{operator:"=",left:t,right:e.value}),r=oe(n,e);return r>=0&&(s[n.id][r]=i),n.assignments++,n.eliminated++,i}));break}case 1:if(0==be.length){var qe=me[0].name.definition().id;if(qe in v){c.definitions=me,v[qe].init=c;break}}default:var Ce;be.length>0&&(Ce=be[0].value)instanceof Ge&&(be[0].value=Ce.tail_node(),ve.push(st(We,c,{body:ht(Ce,Ce.expressions.slice(0,-1))}))),c.definitions=me.concat(be),ve.push(c)}return ye.length>0&&ve.push(st(We,c,{body:ht(c,ye)})),ne(ve,c,_)}if(c instanceof f){if(d(c,Y),!(c.left instanceof J))return c;var j=De(c.left,c.right,function(e){return e},!0===c.write_only);return j.name?st(f,c,{operator:c.operator,left:j.name,right:j.value}):j.value?j.value:w instanceof Ge&&w.tail_node()!==c?Zn.skip:st(Pe,c,{value:0})}if(c instanceof xe&&c.body instanceof he){if(d(c,Y),c.body instanceof y){var Fe=c.body;return c.body=Fe.body.pop(),Fe.body.push(c),_?Zn.splice(Fe.body):Fe}return c}if(c instanceof Ve)return je(),c;if(c instanceof pn)return!e.option("imports")||c.definition().id in b?c:_?Zn.skip:null}function je(){var e=C;C=c,d(c,Y),C=e}},function(n,t){if(n instanceof y)return ui(n,Y.parent(),t);if(n instanceof fe){var r=n.body;if(!(r instanceof y))return;return n.body=r.body.pop(),r.body.push(n),t?Zn.splice(r.body):r}if(n instanceof he)return Lt(n,t);if(n instanceof ve){if(!i||!e.option("loops"))return;if(!$t(n.body))return;var o=pe(n);if(!o)return;var a=o.definition();if(a.id in b)return;L(o,"Dropping unused loop variable {name}"),v[a.id]===n&&delete v[a.id];var s=[],f=n.object.drop_side_effect_free(e);return f&&($e.warn("Side effects in object of for-in loop [{start}]",f),s.push(st(We,n,{body:f}))),n.init instanceof G&&a.orig[0]instanceof rn&&s.push(n.init),ne(s,n,t)}if(n instanceof be)return n.properties&&0==n.properties.length&&(n.properties=null),n;if(n instanceof Ge){if(n.expressions.length>1)return;return At(Y.parent(),n,n.expressions[0])}});Y.push(e.parent()),Y.directives=Object.create(e.directives),n.transform(Y),n instanceof ke&&1==n.body.length&&n.body[0]instanceof ee&&"use strict"==n.body[0].value&&(n.body.length=0),R.forEach(function(n){ji(n,e,B)})}function L(e,n){$e[e.definition().references.length>0?"info":"warn"](n+" [{start}]",e)}function K(e,n){e.name instanceof ln?L(e.name,n):$e.info(n+" [{start}]",e)}function Q(e){return e[e instanceof f?"right":"value"]}function ne(e,n,t){switch(e.length){case 0:return t?Zn.skip:st(re,n);case 1:return e[0];default:return t?Zn.splice(e):st(y,n,{body:e})}}function te(e,t){return e.scope.resolve()===n&&(e.fixed&&t.fixed||(s[e.id]=!1),!1!==s[e.id])}function ie(e,n){s[e.id]||(s[e.id]=[]),n.fixed.assigns&&ot(s[e.id],n.fixed.assigns)}function oe(e,n){var t=s[e.id];return t&&t.indexOf(n)}function ae(e){w[e.id]>1&&!(e.id in b)&&(b[e.id]=!0,_.push(e)),w[e.id]=0}function se(e,n,t){e.id in b||(n&&t?(b[e.id]=n,_.push(e)):(S[e.id]=n,k[e.id]=t))}function ue(n){var t=n.right;if(!n.write_only)return t;if(!(t instanceof m&&Wt[t.operator]))return t;if(!(t.left instanceof _n))return t;if(!(n.left instanceof _n))return t;var i=n.left.definition();return t.left.definition()!==i?t:t.right.has_side_effects(e)?t:(te(i,t.left)&&ie(i,t.left),t.right)}function pe(e){var n=e.init;if(n instanceof G)return(n=n.definitions[0].name)instanceof fn&&n;for(;n instanceof Ye;)n=n.expression.tail_node();return n instanceof _n?n:void 0}function ye(t,o,a){if(t instanceof f&&t.left instanceof _n){var s=t.left.definition();s.scope.resolve()===n&&O.add(s.id,t)}if(t instanceof _n&&t.in_arg&&(E[t.definition().id]=0),t instanceof Tn&&t.expression instanceof _n){var s=t.expression.definition();s.scope.resolve()===n&&O.add(s.id,t)}var c=[],u=r(t,c);if(u){var l=u.definition();if(l.scope.resolve()!==n&&n.variables.get(u.name)!==l)return;if(A(l)&&!Gn(n.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof ln){var n=e.definition();return n.references.length>n.replaced}},!0)}))return;if("p"===t.write_only&&t.right.may_throw_on_access(e,!0))return;var p=c.assign;if(p&&(p.write_only=!0,p.walk($)),c.forEach(function(e){e.walk($)}),t instanceof f){var h=ue(t),g=!1;if(a&&!0===t.write_only&&!h.has_side_effects(e)?q.add(l.id,h):(h.walk($),g="="==h.tail_node().operator),t.left===u)t.write_only&&!g||se(l,u,k[l.id]);else{var y=u.fixed_value();y&&y.is_constant()||se(l,S[l.id],!0)}}return te(l,u)&&wt(u,t)!==u&&ie(l,u),ae(l),!0}if(t instanceof m){if("instanceof"!=t.operator)return;var u=t.right;if(!(u instanceof _n))return;var x=u.definition().id;if(!w[x])return;return t.left.walk($),w[x]++,!0}if(t instanceof ve){if(t.init instanceof _n&&C===n){var x=t.init.definition().id;x in v||(v[x]=t)}if(!i||!e.option("loops"))return;if(!$t(t.body))return;if(t.init.has_side_effects(e))return;var u=pe(t);if(!u)return;var s=u.definition();if(s.scope.resolve()!==n){var T=d(u.name);if(T===s||T&&T.redefined()===s)return}return t.object.walk($),!0}if(t instanceof _n){var l=t.definition();if(l.id in b||(b[l.id]=!0,_.push(l)),z(l.scope,t.scope)){var D=l.redefined();!D||D.id in b||(b[D.id]=!0,_.push(D))}return te(l,t)&&ie(l,t),!0}if(t instanceof Ve){var F=C;return C=t,o(),C=F,!0}}function we(e){return e.definition().id in b?e:(e instanceof ln&&(e.unused=!0),null)}function Se(n,t){t.value=t.value.transform(Y);var i=t.name.transform(n);if(!i){if(t.name instanceof J)return null;var r=t.value.drop_side_effect_free(e);if(!r)return null;L(t.name,"Side effects in default value of unused variable {name}"),(t=t.clone()).name.unused=null,t.value=r}return t}function De(n,t,i,r,s){var c=new Pn(function(n){if(n instanceof U){if(!(e.option("default_values")&&t&&t.is_defined(e))){var f=r;r=!1;var p=Se(c,n);return r=f,!p&&r&&t&&(t=t.drop_side_effect_free(e)),p}n===s?s=n=n.name:n=n.name}if(n instanceof X){var h,f=r,d=t;t instanceof _n&&(r=!1,t=t.fixed_value()),t instanceof a?(h=!0,S=t.elements):(h=t&&t.is_string(e),S=!1);var v=[],_=r&&[],m=0;if(n.elements.forEach(function(e,n){(t=S&&S[n])instanceof me?t=null:t instanceof Ke&&(r&&(_.length=m,di(d,_),[].push.apply(_,S.slice(n)),d.elements=_),t=S=!1),(e=e.transform(c))&&(v[m]=e),r&&t&&(_[m]=t),!e&&!t&&r&&S||m++}),t=S&&st(a,d,{elements:S.slice(n.elements.length)}),n.rest){var g=r;r=!1,n.rest=n.rest.transform(e.option("rests")?c:Y),r=g,n.rest&&(v.length=m)}if(r&&(t&&!n.rest&&(t=t.drop_side_effect_free(e)),t instanceof a?t=t.elements:t instanceof Ge?t=t.expressions:t&&(t=[t]),t&&t.length&&(_.length=m,[].push.apply(_,t))),t=d,r=f,S&&_&&(di(t,_),(t=t.clone()).elements=_),h){if(!n.rest)switch(v.length){case 0:if(n===s)break;return r&&(t=t.drop_side_effect_free(e)),null;case 1:if(!r)break;if(n===s)break;var b=v[0];if(b.has_side_effects(e))break;if(t.has_side_effects(e)&&b.match_symbol(function(e){return e instanceof Ye}))break;return t=st(Qe,n,{expression:t,property:st(Pe,n,{value:0})}),b}}else v.length=n.elements.length;return di(n,v),n.elements=v,n}if(n instanceof Z){var y,w,S,f=r,d=t;t instanceof _n&&(r=!1,t=t.fixed_value()),t instanceof je&&(y=[],w=new Kn,S=t.properties.map(function(n,t){if((n=n.clone())instanceof Ke)w=!1;else{var i=n.key;i instanceof $e&&(i=i.evaluate(e,!0)),i instanceof $e?w=!1:!w||n instanceof Be||w.set(i,n),y[t]=i}return n})),n.rest&&(t=!1,n.rest=n.rest.transform(e.option("rests")?c:Y));var x=new Kn,k=r&&new Kn,T=[];if(n.properties.map(function(n){var t=n.key;return t instanceof $e&&(n.key=t=t.transform(Y),t=t.evaluate(e,!0)),t instanceof $e?k=!1:x.set(t,!x.has(t)),t}).forEach(function(e,i){var a,s=n.properties[i];if(e instanceof $e)r=!1,t=!1,a=s.value.transform(c)||l(s.value);else{r=k&&x.get(e);var f=w&&w.get(e);f?(t=f.value)instanceof o&&(t=!1):t=!1,(a=s.value.transform(c))?k&&k.set(e,!1):((n.rest||u(s))&&(a=l(s.value)),k&&!k.has(e)&&(f?(k.set(e,f),null===t&&w.set(e,u(f)&&st(ze,f,{key:f.key,value:st(Pe,f,{value:0})}))):k.set(e,!0))),t&&(f.value=t)}a&&(s.value=a,T.push(s))}),t=d,r=f,k&&y&&((t=t.clone()).properties=Zn(S,function(t,i){if(t instanceof Ke)return t;var r=y[i];if(r instanceof $e)return t;if(k.has(r)){var o=k.get(r);if(!o)return t;if(o===t)return w.get(r)||Zn.skip}else if(n.rest)return t;var a=t.value.drop_side_effect_free(e);return a?(t.value=a,t):u(t)?st(ze,t,{key:t.key,value:st(Pe,t,{value:0})}):Zn.skip})),t&&!n.rest)switch(T.length){case 0:if(n===s)break;if(t.may_throw_on_access(e,!0))break;return r&&(t=t.drop_side_effect_free(e)),null;case 1:if(!r)break;if(n===s)break;var A=T[0];if(A.key instanceof $e)break;if(A.value.has_side_effects(e))break;if(t.has_side_effects(e)&&A.value.match_symbol(function(e){return e instanceof Ye}))break;return t=st(Qe,n,{expression:t,property:yt(A.key,A)}),A.value}return n.properties=T,n}return!(n=n instanceof me?null:i(n))&&r&&t&&(t=t.drop_side_effect_free(e)),n});return{name:n.transform(c),value:t};function u(n){return n.key instanceof $e&&n.key.has_side_effects(e)}function l(n){return n instanceof U?l(n.name):n instanceof J?(null===t?t=st(Pe,n,{value:0}):t&&(t.may_throw_on_access(e,!0)?t=st(a,n,{elements:t instanceof Ge?t.expressions:[t]}):function e(n){if(n instanceof f)n.write_only=!1,e(n.right);else if(n instanceof m){if(!Wt[n.operator])return;e(n.left),e(n.right)}else n instanceof N?(e(n.consequent),e(n.alternative)):n instanceof Ge?e(n.tail_node()):n instanceof Tn&&(n.write_only=!1)}(t)),st(Z,n,{properties:[]})):(n.unused=null,n)}}}),Ve.DEFMETHOD("hoist_declarations",function(e){if(!e.has_directive("use asm")){var n=e.option("hoist_funs"),t=e.option("hoist_vars"),i=this;if(t){var r=0;i.walk(new jn(function(e){return r>1||(e instanceof fe||(e instanceof Ve&&e!==i||(e instanceof On?(r++,!0):void 0)))})),r<=1&&(t=!1)}if(n||t){var o=new Kn,a=[],s=[],f=new Kn,c=new Pn(function(r,u,l){if(r!==i){if(r instanceof ee)return a.push(r),l?Zn.skip:st(re,r);if(r instanceof Te){if(!n)return r;var p=c.parent();return p instanceof fe?r:p instanceof ce?r:p!==i&&e.has_directive("use strict")?r:(s.push(r),l?Zn.skip:st(re,r))}if(r instanceof On){if(!t)return r;var p=c.parent();if(p instanceof fe)return r;if(!Gn(r.definitions,function(e){var n=e.name;return n instanceof mn&&!o.has(n.name)&&i.find_variable(n.name)===n.definition()}))return r;r.definitions.forEach(function(e){f.set(e.name.name,e)});var h=r.to_assignments();if(p instanceof de&&p.init===r){if(h)return h;var d=r.definitions[0].name;return st(_n,d)}return p instanceof he&&p.init===r?h:h?st(We,r,{body:h}):l?Zn.skip:st(re,r)}return r instanceof Ve?r:r instanceof sn?(o.set(r.name,!0),r):void 0}});if(i.transform(c),f.size()>0){var u=[];i instanceof ke&&i.each_argname(function(e){Gn(e.definition().references,function(e){return!e.in_arg})&&f.del(e.name)}),f.each(function(e,n){(e=e.clone()).name=e.name.clone(),e.value=null,u.push(e),f.set(n,e),e.name.definition().orig.unshift(e.name)}),u.length>0&&s.push(st(On,i,{definitions:u}))}i.body=a.concat(s,i.body)}}}),Ve.DEFMETHOD("process_returns",rt),W.DEFMETHOD("process_returns",function(e){if(e.option("booleans")&&!(e.parent()instanceof ce))switch(bi(this.name.definition(),gi(this),e)){case"d":Si(e,this,!0);break;case!0:yi(this,e)}}),_e.DEFMETHOD("process_returns",function(e){if(e.option("booleans")){var n=!0,t=gi(this);if(!this.name||l(this.name.definition())){var i=e.parent();if(i instanceof f){if("="!=i.operator)return;var r=i.left;if(!(r instanceof _n))return;if(!l(r.definition()))return}else if(i instanceof x&&i.expression!==this){var o=i.expression;if(o instanceof _n&&(o=o.fixed_value()),!(o instanceof ke))return;if(o.uses_arguments||o.pinned())return;for(var a=i.args,s=0;s<a.length;s++){var c=a[s];if(c===this){if(!(r=o.argnames[s])&&o.rest)return;break}if(c instanceof Ke)return}if(r instanceof U&&(r=r.name),r instanceof ln&&!l(r.definition()))return}else{if("Call"!=i.TYPE)return;e.pop();var u=e.in_boolean_context();switch(e.push(this),u){case!0:n=!1;case"d":break;default:return}}n?Si(e,this,!0):yi(this,e)}}function l(i){switch(bi(i,t,e)){case!0:n=!1;case"d":return!0}}}),b.DEFMETHOD("var_names",function(){var e=this._var_names;return e||(this._var_names=e=new Kn,this.enclosed.forEach(function(n){e.set(n.name,!0)}),this.variables.each(function(n,t){e.set(t,!0)})),e}),Ve.DEFMETHOD("make_var",function(e,n,t){var i=[this];n instanceof fn&&n.definition().references.forEach(function(e){var n=e.scope;do{if(!ot(i,n))return;n=n.parent_scope}while(n&&n!==this)});for(var r=t=t.replace(/^[^a-z_$]|[^a-z0-9_$]/gi,"_"),o=0;!Gn(i,function(e){return!e.var_names().has(r)});o++)r=t+"$"+o;var a=st(e,n,{name:r,scope:this}),s=this.def_variable(a);return i.forEach(function(e){e.enclosed.push(s),e.var_names().set(r,!0)}),a}),Ve.DEFMETHOD("hoist_properties",function(e){if(e.option("hoist_props")&&!e.has_directive("use asm")){var n=this;if(!Bn(n)||!n.value){var t=n instanceof Sn&&e.top_retain||ct,i=Object.create(null),r=new Pn(function(e,t){if(e instanceof f){if("="!=e.operator)return;if(!e.write_only)return;if(!o(e.left,e.right,1))return;t(e,r);var a=new Kn,s=[],c=[];return e.right.properties.forEach(function(t){var i=h(mn,e.left,t.key);c.push(st(qn,e,{name:i,value:null}));var r=st(_n,e,{name:i.name,scope:n,thedef:i.definition()});r.reference(),s.push(st(f,e,{operator:"=",left:r,right:t.value}))}),a.value=e.right,i[e.left.definition().id]=a,n.body.splice(n.body.indexOf(r.stack[1])+1,0,st(On,e,{definitions:c})),ht(e,s)}if(e instanceof Ve){if(e===n)return;var u=r.parent();if("Call"==u.TYPE&&u.expression===e)return;return e}if(e instanceof qn){if(!o(e.name,e.value,0))return;t(e,r);var a=new Kn,l=[],p=e.clone();return p.value=e.name instanceof sn?st(Pe,e,{value:0}):null,l.push(p),e.value.properties.forEach(function(n){l.push(st(qn,e,{name:h(e.name.CTOR,e.name,n.key),value:n.value}))}),a.value=e.value,i[e.name.definition().id]=a,Zn.splice(l)}function h(e,t,i){var r=n.make_var(e,t,t.name+"_"+i);return a.set(i,r.definition()),r}});n.transform(r),n.transform(new Pn(function(e,n){if(e instanceof Ye){if(!(e.expression instanceof _n))return;var t=i[e.expression.definition().id];if(!t)return;if(e.expression.fixed_value()!==t.value)return;var r=t.get(e.get_property()),o=st(_n,e,{name:r.name,scope:e.expression.scope,thedef:r});return o.reference(),o}if(e instanceof _n){var t=i[e.definition().id];if(!t)return;if(e.fixed_value()!==t.value)return;return st(je,e,{properties:[]})}}))}}function o(i,r,o){if(i instanceof tn){var a=i.definition();if(a.assignments==o&&a.references.length-a.replaced!=o&&!a.single_use&&n.find_variable(i.name)===a&&!t(a)&&i.fixed_value()===r){var s=i.fixed||a.fixed;if(!(s.direct_access||s.escaped&&1==s.escaped.depth))return r instanceof je&&r.properties.length>0&&M(i,e)&&Gn(r.properties,function(e){return or(e)&&"__proto__"!==e.key})}}}}),function(e){function n(e,n,t,i){for(var r=e.length,o=[],a=!1,s=0;s<r;s++){var f,c=e[s];(f=i&&c instanceof Ke?i(c,n,t):c.drop_side_effect_free(n,t))!==c&&(a=!0),f&&(o.push(f),t=!1)}return o.length?a?o:e:null}function t(e,n,t){var i=e.expression;return i.is_string(n)?i.drop_side_effect_free(n,t):e}function i(e){return e instanceof Ke?st(a,e,{elements:[e]}):e}e($e,pt),e(o,ut),e(a,function(e,r){var o=n(this.elements,e,r,t);return o?o===this.elements&&Gn(o,function(e){return e instanceof Ke})?this:ht(this,o.map(i)):null}),e(f,function(e){var n=this.left;if(n instanceof Ye){var t=n.expression;if(t.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&t.is_constant())return this}return n.has_side_effects(e)?this:Wt[this.operator.slice(0,-1)]?this:(this.write_only=!0,Rn(n).is_constant_expression(e.find_parent(Ve))?this.right.drop_side_effect_free(e):this)}),e(v,function(e){if(!e.option("awaits"))return this;var n=this.expression;if(!Vi(e,n))return this;n instanceof En&&"!"==n.operator&&(n=n.expression);var t=n.drop_side_effect_free(e);if(t===n)return this;t?Vi(e,t)||(t=t.negate(e)):t=st(Pe,n,{value:0});var i=this.clone();return i.expression=t,i}),e(m,function(e,n){var t=this.left,i=this.right,r=this.operator;if(!Ui(r,i,e)){var o=t.drop_side_effect_free(e,n);if(o===t)return this;var a=this.clone();return a.left=o||st(Pe,t,{value:0}),a}var s=i.drop_side_effect_free(e,n);if(!s)return t.drop_side_effect_free(e,n);if(Wt[r]&&s.has_side_effects(e)){var a=this;if(s!==i&&((a=a.clone()).right=s.drop_side_effect_free(e)),"??"==r)return a;var f=a.clone();f.operator="&&"==r?"||":"&&",f.left=t.negate(e,n);var c=f.right.tail_node();c instanceof m&&f.operator==c.operator&&Ki(f);var u=n?Jt:Kt;return"&&"==r?u(a,f):u(f,a)}var o=t.drop_side_effect_free(e,n);return o?(s=s.drop_side_effect_free(e))?ht(this,[o,s]):o:s}),e(x,function(e,r){var o=this;if(o.is_expr_pure(e)){o.pure&&$e.warn("Dropping __PURE__ call [{start}]",o);var a=n(o.args,e,r,t);return a&&ht(o,a.map(i))}var s=o.expression;if(o.is_call_pure(e)){var f=o.args.slice();return f.unshift(s.expression),(f=n(f,e,r,t))&&ht(o,f.map(i))}if(e.option("yields")&&Hn(s)){var c=o.clone();c.expression=st(_e,s),c.expression.body=[];var u=c.transform(e);if(u!==c)return u.drop_side_effect_free(e,r)}var l=Si(e,s);if(l&&((o=o.clone()).expression=l,s._squeezed&&(o.expression._squeezed=!0)),o instanceof qe){var p=s;if(p instanceof _n&&(p=p.fixed_value()),p instanceof ke){if(function(e,n){e.new=!0;var t=Gn(e.body,function(e){return!e.has_side_effects(n)})&&Gn(e.argnames,function(e){return!e.match_symbol(ct)})&&!(e.rest&&e.rest.match_symbol(ct));return e.new=!1,t}(p,e)){var f=o.args.slice();return f.unshift(s),(f=n(f,e,r,t))&&ht(o,f.map(i))}p.contains_this()||((o=st(x,o)).expression=o.expression.clone(),o.args=o.args.slice())}}return o.call_only=!0,o}),e(D,function(e,t){for(var i=this,o=[],a=[],f=0,c=i.properties,u=0;u<c.length;u++){var l=c[u];if(l.key instanceof $e&&o.push(l.key),Rt(l)){var p=l.value;if(p.has_side_effects(e)){if(p.contains_this())return i;l instanceof C?(f++,a.push(l)):a.push(p)}}}var h=i.extends;if(h&&(h instanceof _n&&(h=h.fixed_value()),(h=!r(h))||o.unshift(i.extends)),(o=n(o,e,t))&&(t=!1),a=n(a,e,t),!o){if(!h&&!a&&!i.name)return null;o=[]}if(h||i.name||!e.has_directive("use strict")){var d=vi(i);return h||(d.extends=null),d.properties=[],a?a.length==f?(o.length&&a.unshift(st(O,i,{key:ht(i,o),value:null})),d.properties=a):d.properties.push(st(O,i,{static:!0,key:o.length?ht(i,o):"c",value:v()})):o.length&&d.properties.push(st(F,i,{key:ht(i,o),value:st(_e,i,{argnames:[],body:[]}).init_vars(d)})),d}return a&&o.push(st(x,i,{expression:st(s,i,{argnames:[],body:[],value:v()}).init_vars(i.parent_scope),args:[]})),ht(i,o);function v(){return ht(i,a.map(function(e){if(!(e instanceof C))return e;var n=st(s,e.value);return n.argnames=[],st(x,e,{expression:n,args:[]})}))}}),e(N,function(e){var n,t,i=this.consequent.drop_side_effect_free(e),r=this.alternative.drop_side_effect_free(e);return i===this.consequent&&r===this.alternative?this:(e.option("ie")&&(n=[],i instanceof _e&&(n.push(i),i=null),r instanceof _e&&(n.push(r),r=null)),i?r?((t=this.clone()).consequent=i,t.alternative=r):t=st(m,this,{operator:"&&",left:this.condition,right:i}):t=r?st(m,this,{operator:"||",left:this.condition,right:r}):this.condition.drop_side_effect_free(e),n?(t&&n.push(t),0==n.length?null:ht(this,n)):t)}),e(R,ut),e(te,function(e,n){var t=this.expression;return t.may_throw_on_access(e)?this:t.drop_side_effect_free(e,n)}),e(_e,function(e){return wi(this,e)?null:this}),e(Ae,ut),e(je,function(e,t){var i=[];this.properties.forEach(function(e){e instanceof Ke?i.push(e):(e.key instanceof $e&&i.push(e.key),i.push(e.value))});var r=n(i,e,t,function(e,n,t){var i=e.expression;return i.safe_to_spread()?i.drop_side_effect_free(n,t):e});return r?r!==i||Gn(r,function(e){return!(e instanceof Ke)})?ht(this,r.map(function(e){return e instanceof Ke?st(je,e,{properties:[e]}):e})):this:null}),e(Ie,ut),e(Ge,function(e,t){var i=n(this.expressions,e,t);if(!i)return null;var r,o,a,s=i.length-1,c=i[s];if(e.option("awaits")&&s>0&&c instanceof v&&c.expression.is_constant()){var u=(i=i.slice(0,-1))[--s];c.expression=Vi(e,u)?u:u.negate(e),i[s]=c}return e.option("conditionals")&&s>0&&(r=i[s-1])instanceof f&&"="==r.operator&&(a=r.left)instanceof _n&&(o=Ii(e,a.definition(),r.right,c))&&((r=r.clone()).right=o,(i=i.slice(0,-2)).push(r.drop_side_effect_free(e,t))),i===this.expressions?this:ht(this,i)}),e(Qe,function(e,n){var t=this.expression;if(t.may_throw_on_access(e))return this;var i=this.property;return(t=t.drop_side_effect_free(e,n))?(i=i.drop_side_effect_free(e))?ht(this,[t,i]):t:i.drop_side_effect_free(e,n)}),e(_n,function(e){return this.is_declared(e)&&M(this,e)?null:this}),e(gn,function(e,n){var t=this;if(t.is_expr_pure(e)){var i=t.expressions;return 0==i.length?null:ht(t,i).drop_side_effect_free(e,n)}var r=t.tag,o=Si(e,r);return o&&((t=t.clone()).tag=o,r._squeezed&&(t.tag._squeezed=!0)),t}),e(Tn,function(e,n){var t=this.expression;if(xt[this.operator])return this.write_only=!t.has_side_effects(e),this;if("typeof"==this.operator&&t instanceof _n&&M(t,e))return null;var i=t.drop_side_effect_free(e,n);return n&&i&&jt(i)?i===t&&"!"==this.operator?this:i.negate(e,n):i})}(function(e,n){e.DEFMETHOD("drop_side_effect_free",n)}),e(We,function(e,n){if(n.option("side_effects")){var t=e.body,i=t.drop_side_effect_free(n,!0);if(!i)return $e.warn("Dropping side-effect-free statement [{start}]",e),st(re,e);if(i!==t)return st(We,e,{body:i})}return e}),e(Cn,function(e,n){return n.option("loops")?st(he,e).optimize(n):e}),e(ne,function(e,n){if(!n.option("loops"))return e;var t=Ti(n,e.condition);if(!(t instanceof $e)){if(t&&!xi(e,n.parent(),B))return st(he,e,{body:st(y,e.body,{body:[e.body,st(We,e.condition,{body:e.condition})]})}).optimize(n);if(!xi(e,n.parent()))return st(y,e.body,{body:[e.body,st(We,e.condition,{body:e.condition})]}).optimize(n)}if(e.body instanceof y&&!xi(e,n.parent(),B)){for(var i=e.body.body,r=i.length;--r>=0;){var o=i[r];if(o instanceof ge&&!o.alternative&&o.body instanceof S&&n.loopcontrol_target(o.body)===e){if(a(o.condition))break;e.condition=st(m,e,{operator:"&&",left:o.condition.negate(n),right:e.condition}),i.splice(r,1)}else if(o instanceof We){if(a(o.body))break;e.condition=ht(e,[o.body,e.condition]),i.splice(r,1)}else if(!Ht(o,!0))break}e.body=ui(e.body,n.parent())}return e.body instanceof re?st(he,e).optimize(n):e.body instanceof We?st(he,e,{condition:ht(e.condition,[e.body.body,e.condition]),body:st(re,e)}).optimize(n):e;function a(n){var t=!1;return n.walk(new jn(function(n){return!!t||(n instanceof _n?(it(n.definition(),e.enclosed)||(t=!0),!0):void 0)})),t}}),e(he,function(e,n){if(!n.option("loops"))return e;if(n.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(n)),e.step&&(e.step=e.step.drop_side_effect_free(n))),e.condition){var t=Ti(n,e.condition);if(t)t instanceof $e||(e.body=st(y,e.body,{body:[st(We,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(n.option("dead_code")){var i=[];return Yn(e.init)?i.push(e.init):e.init&&i.push(st(We,e.init,{body:e.init})),i.push(st(We,e.condition,{body:e.condition})),Vt(n,e.body,i),st(y,e,{body:i}).optimize(n)}}return function e(n,t){var i=s(n.body);if(t.option("dead_code")&&(i instanceof S||i instanceof B&&f(i)||i instanceof oe)){var r=[];Yn(n.init)?r.push(n.init):n.init&&r.push(st(We,n.init,{body:n.init}));var o=f(i)||i instanceof oe;return n.condition&&o?r.push(st(ge,n,{condition:n.condition,body:i,alternative:null})):n.condition?r.push(st(We,n.condition,{body:n.condition})):o&&r.push(i),Vt(t,n.body,r),st(y,n,{body:r})}if(i instanceof ge){var a=s(i.body);if(a instanceof S&&!f(a)){n.condition?n.condition=st(m,n.condition,{left:n.condition,operator:"&&",right:i.condition.negate(t)}):n.condition=i.condition.negate(t);var r=Ct(i.alternative);return Vt(t,i.body,r),c(r)}if((a=s(i.alternative))instanceof S&&!f(a)){n.condition?n.condition=st(m,n.condition,{left:n.condition,operator:"&&",right:i.condition}):n.condition=i.condition;var r=Ct(i.body);return Vt(t,i.alternative,r),c(r)}}return n;function s(e){return e instanceof y?e.body[0]:e}function f(e){return t.loopcontrol_target(e)!==t.self()}function c(i){return n.body instanceof y?(n.body=n.body.clone(),n.body.body=i.concat(n.body.body.slice(1)),n.body=n.body.transform(t)):n.body=st(y,n.body,{body:i}).transform(t),e(n,t)}}(e,n)}),e(de,function(e,n){if(n.option("varify")&&Ot(e.init)){var t=e.init.definitions[0].name;(t instanceof J||t instanceof dn)&&!t.match_symbol(function(e){if(e instanceof fn){var t=e.definition();return!Xi(t)||Oi(n,t)}},!0)&&(e.init=qi(e.init,e.resolve()))}return e}),e(ge,function(e,n){if($t(e.alternative)&&(e.alternative=null),!n.option("conditionals"))return e;if(n.option("booleans")&&!e.condition.has_side_effects(n)&&Ai(n,e.condition),n.option("dead_code")){var t=Ti(n,e.condition);if(!t){$e.warn("Condition always false [{start}]",e.condition);var i=[st(We,e.condition,{body:e.condition}).transform(n)];return Vt(n,e.body,i),e.alternative&&i.push(e.alternative),st(y,e,{body:i}).optimize(n)}if(!(t instanceof $e)){$e.warn("Condition always true [{start}]",e.condition);var i=[st(We,e.condition,{body:e.condition}).transform(n),e.body];return e.alternative&&Vt(n,e.alternative,i),st(y,e,{body:i}).optimize(n)}}var r=e.condition.negate(n),o=e.condition.print_to_string().length,a=r.print_to_string().length,s=a<o;if(e.alternative&&s){s=!1,e.condition=r;var c=e.body;e.body=e.alternative,e.alternative=$t(c)?null:c}var u=[],l=[],p=[],h=I(e.body,u,l,p),d=[],v=[],_=[],g=I(e.alternative,d,v,_);if(h instanceof y||g instanceof y){var i=[],b=[];if(h&&([].push.apply(i,u),[].push.apply(b,l),h instanceof y?e.body=h:0==h.length?e.body=st(re,e.body):e.body=st(We,e.body,{body:ht(e.body,h)}),p.forEach(bn)),g&&([].push.apply(i,d),[].push.apply(b,v),g instanceof y?e.alternative=g:0==g.length?e.alternative=null:e.alternative=st(We,e.alternative,{body:ht(e.alternative,g)}),_.forEach(bn)),b.length>0&&i.push(st(On,e,{definitions:b})),i.length>0)return i.push(e.transform(n)),st(y,e,{body:i}).optimize(n)}else if(h&&g){var i=u.concat(d);return(l.length>0||v.length>0)&&i.push(st(On,e,{definitions:l.concat(v)})),0==h.length?i.push(st(We,e.condition,{body:g.length>0?st(m,e,{operator:"||",left:e.condition,right:ht(e.alternative,g)}).transform(n):e.condition.clone()}).optimize(n)):0==g.length?(o===a&&!s&&e.condition instanceof m&&"||"==e.condition.operator&&(s=!0),i.push(st(We,e,{body:st(m,e,{operator:s?"||":"&&",left:s?r:e.condition,right:ht(e.body,h)}).transform(n)}).optimize(n))):i.push(st(We,e,{body:st(N,e,{condition:e.condition,consequent:ht(e.body,h),alternative:ht(e.alternative,g)})}).optimize(n)),p.forEach(bn),_.forEach(bn),st(y,e,{body:i}).optimize(n)}if($t(e.body)&&(e=st(ge,e,{condition:r,body:e.alternative,alternative:null})),e.alternative instanceof oe&&e.body.TYPE==e.alternative.TYPE){var w=e.body.value,S=e.alternative.value;if(!w&&!S)return st(y,e,{body:[st(We,e,{body:e.condition}),e.body]}).optimize(n);if(w&&S||!function(){var e=!1,t=0,i=n.self();do{if(i instanceof T)n.parent(t).bfinally&&(e=!0),t++;else if(i instanceof pe)t++;else{if(i instanceof Ve)return e&&Wn(i);i instanceof kn&&i.bfinally&&(e=!0)}}while(i=n.parent(t++))}()){var x=st(e.body.CTOR,e,{value:st(N,e,{condition:e.condition,consequent:w||st(Dn,e.body).transform(n),alternative:S||st(Dn,e.alternative).transform(n)})});return x instanceof Ue&&(x.in_bool=e.body.in_bool||e.alternative.in_bool),x}}if(e.body instanceof ge&&!e.body.alternative&&!e.alternative&&(e=st(ge,e,{condition:st(m,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null})),fi(e.body)&&e.alternative){var k=e.alternative;return e.alternative=null,st(y,e,{body:[e,k]}).optimize(n)}if(fi(e.alternative)){var i=e.body;return e.body=e.alternative,e.condition=s?r:e.condition.negate(n),e.alternative=null,st(y,e,{body:[e,i]}).optimize(n)}if(e.alternative){for(var A=j(e.body),E=z(A),D=j(e.alternative),O=z(D),q=[];E>=0&&O>=0;){var C=A[E],$=D[O];if(C.equals($))A.splice(E--,1),D.splice(O--,1),q.unshift(Et(C,$));else{if(!(C instanceof We))break;if(!($ instanceof We))break;var F=C.body.tail_node(),P=$.body.tail_node();if(!F.equals(P))break;E=M(A,C.body,E),O=M(D,$.body,O),q.unshift(st(We,F,{body:Et(F,P)}))}}if(q.length>0)return e.body=A.length>0?st(y,e,{body:A}):st(re,e),e.alternative=D.length>0?st(y,e,{body:D}):null,q.unshift(e),st(y,e,{body:q}).optimize(n)}return n.option("typeofs")&&ki(e.condition,e.body,e.alternative),e;function j(e){return e instanceof y?e.body:[e]}function z(e){for(var n=e.length;--n>=0&&Ht(e[n],!0););return n}function M(e,n,t){return n instanceof Ge?e[t]=st(We,n,{body:ht(n,n.expressions.slice(0,-1))}):e.splice(t--,1),t}function I(e,t,i,r){if(null==e)return[];if(e instanceof y){for(var o=[],a=0;a<e.body.length;a++){var s=e.body[a];if(!(s instanceof re)){if(s instanceof oe){if(0==a)return;o.length>0&&(s=s.clone(),o.push(s.value||st(Dn,s).transform(n)),s.value=ht(e,o));var c=e.clone();return c.body=c.body.slice(a+1),c.body.unshift(s),c}if(s instanceof Te)t.push(s);else if(s instanceof We){if(!n.option("sequences")&&o.length>0)return;o.push(s.body)}else{if(!(s instanceof On))return;if(!n.option("sequences")&&o.length>0)return;s.remove_initializers(n,i),s.definitions.forEach(u)}}}return o}if(e instanceof Te)return t.push(e),[];if(e instanceof re)return[];if(e instanceof We)return[e.body];if(e instanceof On){var o=[];return e.remove_initializers(n,i),e.definitions.forEach(u),o}function u(e){e.value&&o.push(st(f,e,{operator:"=",left:e.name.convert_symbol(_n,function(e){r.push(e)}),right:e.value}))}}}),e(en,function(e,n){if(!n.option("switches"))return e;if(!n.option("dead_code"))return e;for(var t,i,r,o=[],a=[],s=[],f=0,c=e.body.length;f<c;f++){if((t=e.body[f])instanceof Y){var u=o[o.length-1];if(i||T(t.body[0],n)&&(!u||fi(u))){E(t,u);continue}i=t}else{var l=t.expression,p=st(m,e,{operator:"===",left:e.expression,right:l}).evaluate(n,!0);if(!p){l.has_side_effects(n)&&s.push(l),E(t,o[o.length-1]);continue}if(!(p instanceof $e)){if(i){var h=o.indexOf(i);o.splice(h,1),E(i,o[h-1]),i=null}for(l.has_side_effects(n)?r=t:i=t=st(Y,t);++f<c;)E(e.body[f],t)}}if(f+1>=c||fi(t)){var u=o[o.length-1],d=t.body;if(fi(u))switch(u.body.length-d.length){case 1:var v=u.body[u.body.length-1];if(!T(v,n))break;d=d.concat(v);case 0:var _=st(y,u),g=st(y,t,{body:d});_.equals(g)&&(u.body=[])}}s.length&&(t instanceof Y?o.push(st(k,e,{expression:ht(e,s),body:[]})):(s.push(t.expression),t.expression=ht(e,s)),s=[]),o.push(t)}for(s.length&&!r&&o.push(st(k,e,{expression:ht(e,s),body:[]}));t=o[o.length-1];){var v=t.body[t.body.length-1];if(T(v,n)&&t.body.pop(),t===i){if(!Ft(t))break}else{if(t.expression.has_side_effects(n))break;if(i){if(!Ft(i))break;if(o[o.length-2]!==i)break;i.body=i.body.concat(t.body),t.body=[]}else if(!Ft(t))break}E(t),o.pop()===i&&(i=null)}if(!t)return a.push(st(We,e.expression,{body:e.expression})),s.length&&a.push(st(We,e,{body:ht(e,s)})),st(y,e,{body:a}).optimize(n);if(t===i)for(;(t=o[o.length-2])&&!(t instanceof Y)&&Ft(t);){var l=t.expression;if(l.has_side_effects(n)){var u=o[o.length-3];if(u&&!fi(u))break;i.body.unshift(st(We,e,{body:l}))}E(t),o.splice(-2,1)}if(o[0].body=a.concat(o[0].body),e.body=o,n.option("conditionals"))switch(o.length){case 1:if(!A(o[0]))break;var l=o[0].expression,d=o[0].body.slice();return o[0]!==i&&o[0]!==r?st(ge,e,{condition:st(m,e,{operator:"===",left:e.expression,right:l}),body:st(y,e,{body:d}),alternative:null}).optimize(n):(l&&d.unshift(st(We,l,{body:l})),d.unshift(st(We,e.expression,{body:e.expression})),st(y,e,{body:d}).optimize(n));case 2:if(!it(i,o)||!A(o[1]))break;var d=o[0].body.slice(),b=d.length&&T(d[d.length-1],n);if(b&&d.pop(),!Gn(d,A))break;var w=o[1].body.length&&st(y,o[1]),x=st(ge,e,{condition:st(m,e,o[0]===i?{operator:"!==",left:e.expression,right:o[1].expression}:{operator:"===",left:e.expression,right:o[0].expression}),body:st(y,o[0],{body:d}),alternative:b&&w||null});return!b&&w&&(x=st(y,e,{body:[x,w]})),x.optimize(n)}return e;function T(n,t){return n instanceof S&&t.loopcontrol_target(n)===e}function A(n){var t=!1,i=new jn(function(e){if(t||e instanceof ke||e instanceof We)return!0;T(e,i)&&(t=!0)});return i.push(e),n.walk(i),!t}function E(e,t){t&&!fi(t)?t.body=t.body.concat(e.body):Vt(n,e,a)}}),e(kn,function(e,n){if(e.body=Ut(e.body,n),n.option("dead_code")){if(Ft(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof rn&&!M(e)},!0))){var t=[];return e.bcatch&&(Vt(n,e.bcatch,t),t.forEach(function(e){e instanceof On&&e.definitions.forEach(function(e){var n=e.name.definition().redefined();n&&(e.name=e.name.clone(),e.name.thedef=n)})})),t.unshift(st(y,e).optimize(n)),e.bfinally&&t.push(st(y,e.bfinally).optimize(n)),st(y,e,{body:t}).optimize(n)}if(e.bfinally&&Ft(e.bfinally)){var t=st(y,e.bfinally).optimize(n);if(t=e.body.concat(t),!e.bcatch)return st(y,e,{body:t}).optimize(n);e.body=t,e.bfinally=null}}return e}),I.DEFMETHOD("remove_initializers",Ei(function(e,n){return st(Dn,n).optimize(e)})),Ee.DEFMETHOD("remove_initializers",Ei(ut)),On.DEFMETHOD("remove_initializers",Ei(ut)),G.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,n){var t=n.name.definition(),i=n.value;if(i){i instanceof Ge&&(i=i.clone());var r=st(_n,n.name),o=st(f,n,{operator:"=",left:r,right:i});e.push(o);var a=function(){return o.right};a.assigns=[o],a.direct_access=t.direct_access,a.escaped=t.escaped,r.fixed=a,t.references.forEach(function(e){if(e.fixed){var i=e.fixed.assigns;i&&i[0]===n&&(i.length>1||e.fixed.to_binary||e.fixed.to_prefix?i[0]=o:(e.fixed=a,t.fixed===e.fixed&&(t.fixed=a)))}}),t.references.push(r)}return t.assignments++,t.eliminated++,t.single_use=!1,e},[]);return 0==e.length?null:ht(this,e)}),e(I,$i),e(Ee,$i),e(x,function(e,n){var t=e.expression,i=Fi(e,n);if(i)return i;if(n.option("sequences"))if(t instanceof Ye){var r=Pi(t,n);if(r!==t){var o=e.clone();return o.expression=r.expressions.pop(),r.expressions.push(o),r.optimize(n)}}else if(!Tt(t.tail_node())){var r=Pi(e,n);if(r!==e)return r.optimize(n)}if(n.option("unused")&&ji(e,n),n.option("unsafe"))if(Mt(t))switch(t.name){case"Array":if(1==e.args.length){var s=e.args[0];if(s instanceof Pe)try{var c=s.value;if(c>6)break;for(var l=Array(c),p=0;p<c;p++)l[p]=st(me,e);return st(a,e,{elements:l})}catch(n){$e.warn("Invalid array length: {length} [{start}]",{length:c,start:e.start});break}if(!s.is_boolean(n)&&!s.is_string(n))break}return st(a,e,{elements:e.args});case"Object":if(0==e.args.length)return st(je,e,{properties:[]});break;case"String":if(0==e.args.length)return st(Xe,e,{value:""});if(1==e.args.length)return st(m,e,{operator:"+",left:st(Xe,e,{value:""}),right:e.args[0]}).optimize(n);break;case"Number":if(0==e.args.length)return st(Pe,e,{value:0});if(1==e.args.length)return st(En,e,{operator:"+",expression:st(m,e,{operator:"+",left:st(Xe,e,{value:""}),right:e.args[0]})}).optimize(n);break;case"Boolean":if(0==e.args.length)return st(le,e).optimize(n);if(1==e.args.length)return st(En,e,{operator:"!",expression:st(En,e,{operator:"!",expression:e.args[0]})}).optimize(n);break;case"RegExp":var h=[];if(Gn(e.args,function(e){var t=e.evaluate(n);return h.unshift(t),e!==t}))try{return Xt(n,e,st(Le,e,{value:RegExp.apply(RegExp,h)}))}catch(n){$e.warn("Error converting {this} [{start}]",e)}}else if(t instanceof te)switch(t.property){case"toString":var d=t.expression;if(0==e.args.length&&!(d.may_throw_on_access(n)||d instanceof Ze))return st(m,e,{operator:"+",left:st(Xe,e,{value:""}),right:d}).optimize(n);break;case"join":if(t.expression instanceof a&&e.args.length<2)e:{var _=e.args[0];if(0==t.expression.elements.length&&!(_ instanceof Ke))return _?ht(e,[_,st(Xe,e,{value:""})]).optimize(n):st(Xe,e,{value:""});if(!(_&&(_=_.evaluate(n))instanceof $e)){for(var l=[],g=[],p=0;p<t.expression.elements.length;p++){var b=t.expression.elements[p],w=b.evaluate(n);if(w!==b)g.push(w);else{if(b instanceof Ke)break e;g.length>0&&(l.push(st(Xe,e,{value:g.join(_)})),g.length=0),l.push(b)}}if(g.length>0&&l.push(st(Xe,e,{value:g.join(_)})),1==l.length)return l[0].is_string(n)?l[0]:st(m,l[0],{operator:"+",left:st(Xe,e,{value:""}),right:l[0]});if(""==_)return s=l[0].is_string(n)||l[1].is_string(n)?l.shift():st(Xe,e,{value:""}),l.reduce(function(e,n){return st(m,n,{operator:"+",left:e,right:n})},s).optimize(n);var S=e.clone();return S.expression=S.expression.clone(),S.expression.expression=S.expression.expression.clone(),S.expression.expression.elements=l,Xt(n,e,S)}}break;case"charAt":if(e.args.length<2){var S=st(m,e,{operator:"||",left:st(Qe,e,{expression:t.expression,property:e.args.length?st(m,e.args[0],{operator:"|",left:st(Pe,e,{value:0}),right:e.args[0]}):st(Pe,e,{value:0})}).optimize(n),right:st(Xe,e,{value:""})});return S.is_string=lt,S.optimize(n)}break;case"apply":if(2==e.args.length&&e.args[1]instanceof a){var k=e.args[1].elements.slice();return k.unshift(e.args[0]),st(x,e,{expression:st(te,t,{expression:t.expression,property:"call"}),args:k}).optimize(n)}break;case"call":var T=t.expression;if(T instanceof _n&&(T=T.fixed_value()),T instanceof ke&&!T.contains_this())return(e.args.length?ht(e,[e.args[0],st(x,e,{expression:t.expression,args:e.args.slice(1)})]):st(x,e,{expression:t.expression,args:[]})).optimize(n)}else if(n.option("side_effects")&&t instanceof x&&1==t.args.length&&Mt(t.expression)&&"Object"==t.expression.name){var o=e.clone();return o.expression=At(e,t,t.args[0]),o.optimize(n)}if(n.option("unsafe_Function")&&Mt(t)&&"Function"==t.name){if(0==e.args.length)return st(_e,e,{argnames:[],body:[]}).init_vars(t.scope);if(Gn(e.args,function(e){return e instanceof Xe}))try{var A="n(function("+e.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+e.args[e.args.length-1].value+"})",E=vt(A),D={ie:n.option("ie")};E.figure_out_scope(D);var q,C=new kt(n.options);(E=E.transform(C)).figure_out_scope(D),E.compute_char_frequency(D),E.mangle_names(D),E.walk(new jn(function(e){return!!q||(e instanceof ke?(q=e,!0):void 0)}));var A=bt();return y.prototype._codegen.call(q,A),e.args=[st(Xe,e,{value:q.argnames.map(function(e){return e.print_to_string()}).join()}),st(Xe,e.args[e.args.length-1],{value:A.get().replace(/^\{|\}$/g,"")})],e}catch(n){if(!(n instanceof dt))throw n;$e.warn("Error parsing code passed to new Function [{start}]",e.args[e.args.length-1]),$e.warn(n.toString())}}var $=t instanceof _n?t.fixed_value():t,F=n.parent(),P=n.self(),j=$ instanceof ke&&(!Ln($)||n.option("awaits")&&F instanceof v)&&(!Hn($)||n.option("yields")&&P instanceof Fn&&P.nested),z=j&&$.first_statement(),M=0,I=!1,R=!Gn(e.args,function(e){return!(e instanceof Ke)}),B=j&&Gn($.argnames,function(n,t){if(1==M&&e.args[t]instanceof Ke&&(M=2),n instanceof U){M||(M=1);var i=1==M&&e.args[t];if(Gt(i)||(M=2),sr($,n.value))return!1;n=n.name}return!(n instanceof J&&(I=!0,sr($,n)))})&&!($.rest instanceof J&&sr($,$.rest)),H=B&&n.option("inline")&&!e.is_expr_pure(n)&&(t===$||Ni($,n));if(H&&z instanceof Ue){var w=z.value;if(t===$&&!$.name&&(!w||w.is_constant_expression())&&Mi($,zi(n)))return ht(e,pe(w)).optimize(n)}if(j&&!$.contains_this()){var Y,L=!1;if(H&&!$.uses_arguments&&!$.pinned()&&!($.name&&$ instanceof Ae)&&(t===$||!Ji(n,Y=t.definition(),$)&&$.is_constant_expression(Xn(n)))&&(w=function(e){var t=$.body.length;if(t<2&&(e=ge(e)))return e;if(n.option("inline")<3)return!1;e=null;for(var i=0;i<t;i++){var r=$.body[i];if(r instanceof On){if(L){if(!e)continue;if(!(e instanceof We))return!1;Bt(r)||(e=null)}else if(!Bt(r)){if(e&&!(e instanceof We))return!1;e=null,L=!0}}else{if(r instanceof u||r instanceof W||r instanceof re)continue;if(e)return!1;e=r}}return ge(e)}(z))){var V,G,K,ee,ne=t===$||Y.single_use&&Y.references.length-Y.replaced==1;if(function(){if(M||I||R||L||$.rest)return;if(n.option("inline")<2&&$.argnames.length)return;if(!$.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof ln}))return;var t,i=n.find_parent(Ve),r=!1,o=zi(n,i),a=[],s=!1,c=new jn(function(e,i){if(r)return!0;if(e instanceof m&&Wt[e.operator]||e instanceof N)a=null;else{if(e instanceof Ve)return r=!0;if(o&&e instanceof tn&&o[e.name])return r=!0;if(e instanceof _n){var u=e.definition();if($.variables.get(e.name)!==u)return void(a=null);if(u.init instanceof Te)return r=!0;if(wt(e,c.parent()))return r=!0;var l=be(u);if(t<l||(t=l),!a)return;s?a=null:a.push($.argnames[l])}else if(!s)return e instanceof f&&e.left instanceof Ye?(e.left.expression.walk(c),e.left instanceof Qe&&e.left.property.walk(c),e.right.walk(c),s=!0,!0):e.has_side_effects(n)?(i(),s=!0,!0):void 0}});if(w.walk(c),r)return;var u=e.args.length;if(a&&$.argnames.length>=u){for(u=$.argnames.length;u-- >t&&$.argnames[u]===a.pop(););u++}return u<=t||Gn(e.args.slice(t,u),s&&!a?function(e){return e.is_constant_expression(i)}:function(e){return!e.has_side_effects(n)})}()){var k=e.args.slice(),oe=[],ae=w.clone(!0).transform(new Pn(function(n){if(n instanceof _n){var t=n.definition();if($.variables.get(n.name)!==t)return oe.push(n),n;var i=be(t),r=k[i];if(!r)return st(Dn,e);k[i]=null;var o=this.parent();return o?At(o,n,r):r}})),se=$.inlined;t!==$&&($.inlined=!0);var fe=[];k.forEach(function(e){e&&((e=e.clone(!0)).walk(new jn(function(e){e instanceof _n&&oe.push(e)})),fe.push(e))},[]),fe.push(ae);var S=ht(e,fe).optimize(n);if($.inlined=se,S=At(F,P,S),ne||Kt(S,e)===S)return oe.forEach(function(e){e.scope=t===$?$.parent_scope:t.scope,e.reference();var n=e.definition();ne&&n.replaced++,n.single_use=!1}),S;S.has_side_effects(n)||(e.drop_side_effect_free=function(e,n){var t=this.args.slice();return t.unshift(this.expression),ht(this,t).drop_side_effect_free(e,n)})}if(ne&&function(){var e,i=new Kn,r=0;ee=P;do{if(ee.variables&&ee.variables.each(function(e){i.set(e.name,!0)}),e=ee,(ee=n.parent(r++))instanceof O){if(!ee.static)return!1}else if(ee instanceof ie)K=[];else if(ee instanceof he){if(ee.init===e)continue;K=[]}else if(ee instanceof de){if(ee.init===e)continue;if(ee.object===e)continue;K=[]}}while(!(ee instanceof Ve));if(!(G=ee.body.indexOf(e)+1))return!1;if(!Mi($,zi(n,ee)))return!1;var o=(t!==$||$.parent_scope.resolve()===ee)&&!ee.pinned();ee instanceof Sn&&(n.toplevel.vars?i.set("arguments",!0):o=!1);V=new Kn;var a=n.option("inline");return!(!function(e,n){var t=!1;return $.each_argname(function(i){if(!t&&!i.unused){if(!n||ye(e,i.name))return t=!0;V.set(i.name,!0),K&&K.push(i.definition())}}),!t}(i,a>=2&&o)||!function(e,n){for(var t=0;t<$.body.length;t++){var i=$.body[t];if(i instanceof Te){var r=i.name;if(!n)return!1;if(V.has(r.name))return!1;if(ye(e,r.name))return!1;if(!Gn(i.enclosed,function(n){return n.scope===ee||n.scope===i||!e.has(n.name)}))return!1;K&&K.push(r.definition())}else if(i instanceof On){if(!n)return!1;for(var o=i.definitions.length;--o>=0;){var r=i.definitions[o].name;if(ye(e,r.name))return!1;K&&K.push(r.definition())}}}return!0}(i,a>=3&&o)||K&&0!=K.length&&nr($,K))}()){$._squeezed=!0,t!==$&&($.parent_scope=t.scope);var S=ht(e,function(){var t=[],i=[];M>1||I||R||$.rest?function(n,t){function i(e,i){if(i.unused)return ue(i);var r=i.definition();r.assignments++,r.references.push(e);var o=st(mn,i);r.orig.push(o),r.eliminated++,we(n,t,o)}t.push(st(f,e,{operator:"=",left:st(X,e,{elements:$.argnames.map(function(e){return e.unused?st(me,e):e.convert_symbol(_n,i)}),rest:$.rest&&$.rest.convert_symbol(_n,i)}),right:st(a,e,{elements:e.args.slice()})}))}(t,i):function(n,t){for(var i=$.argnames.length,r=e.args.length;--r>=i;)t.push(e.args[r]);var o=[];for(r=i;--r>=0;){var a,s=$.argnames[r];s instanceof U?(o.push(s),a=s.name):a=s;var c=e.args[r];if(a.unused||ee.var_names().has(a.name))c&&t.push(c);else{var u=st(mn,a),l=a.definition();l.orig.push(u),l.eliminated++,void 0!==a.unused?(we(n,t,u),c&&t.push(c)):(!c&&s===a&&(K||"arguments"==a.name&&!Bn($)&&Bn(ee))&&(c=st(Dn,e)),we(n,t,u,c))}}for(n.reverse(),t.reverse(),r=o.length;--r>=0;){var p=o[r];if(void 0!==p.name.unused)t.push(p.value);else{var h=st(_n,p.name);p.name.definition().references.push(h),t.push(st(f,p,{operator:"=",left:h,right:p.value}))}}}(t,i);var r=function(e,t){var i=[G,0],r=[],o=[],a=[],s=[],f=[];return $.body.filter(K?function(n){if(!(n instanceof Te))return!0;var t=st(mn,ar(n.name)),i=t.definition();return i.fixed=!1,i.orig.push(t),i.eliminated++,we(e,o,t,_i(n,!0)),!1}:function(e){if(!(e instanceof Te))return!0;var n=e.name.definition();return ee.functions.set(n.name,n),ee.variables.set(n.name,n),ee.enclosed.push(n),ee.var_names().set(n.name,!0),i.push(e),!1}).forEach(function(e){if(e instanceof On)for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t],o=ar(i.name),c=i.value;c&&f.length>0&&(f.push(c),c=ht(i,f),f=[]),we(r,a,o,c),K&&(V.has(o.name)||1==o.definition().orig.length&&$.functions.has(o.name)||s.push(cr(n,o)))}else e instanceof We&&f.push(e.body)}),[].push.apply(e,r),[].push.apply(t,s),[].push.apply(t,o),[].push.apply(t,a),i}(t,i);i.push(w),t.length&&r.push(st(On,$,{definitions:t}));return[].splice.apply(ee.body,r),$.enclosed.forEach(function(e){ee.var_names().has(e.name)||(ee.enclosed.push(e),ee.var_names().set(e.name,!0))}),i}()).optimize(n);return At(F,P,S)}}if(n.option("side_effects")&&B&&Gn($.body,$t)&&($===t?wi($,n):!M&&!I&&!$.rest)&&(!Bn($)||!$.value)&&Mi($,zi(n)))return ht(e,pe()).optimize(n)}if(n.option("drop_console")&&t instanceof Ye){for(var ce=t.expression;ce.expression;)ce=ce.expression;if(Mt(ce)&&"console"==ce.name)return st(Dn,e).optimize(n)}return n.option("negate_iife")&&F instanceof We&&jt(P)?e.negate(n,!0):ni(n,e);function ue(e){return st(Qe,e,{expression:st(a,e,{elements:[]}),property:st(Pe,e,{value:0})})}function pe(n){var t=e.args.slice(),i=M>1||I||$.rest;if((i||R)&&(t=[st(a,e,{elements:t})]),i){var r=new Pn(function(e,n){if(e instanceof U)return st(U,e,{name:e.name.transform(r)||ue(e),value:e.value});if(e instanceof X){var t=[];return e.elements.forEach(function(e,n){(e=e.transform(r))&&(t[n]=e)}),di(e,t),st(X,e,{elements:t})}if(e instanceof Z){var i=[],o=[];return e.properties.forEach(function(n){var t=n.key,a=n.value.transform(r);a?(o.length&&(t instanceof $e||(t=yt(t,n)),o.push(t),t=ht(e,o),o=[]),i.push(st(Q,n,{key:t,value:a}))):t instanceof $e&&o.push(t)}),o.length&&i.push(st(Q,e,{key:ht(e,o),value:ue(e)})),st(Z,e,{properties:i})}return e instanceof ln?null:void 0}),o=[];$.argnames.forEach(function(e,n){(e=e.transform(r))&&(o[n]=e)});var s=$.rest&&$.rest.transform(r);s&&(o.length=$.argnames.length),di($,o),t[0]=st(f,e,{operator:"=",left:st(X,$,{elements:o,rest:s}),right:t[0]})}else $.argnames.forEach(function(e){e instanceof U&&t.push(e.value)});return t.push(n||st(Dn,e)),t}function ve(){return e.call_only?st(Pe,e,{value:0}):st(Dn,e)}function ge(n){return n?n instanceof Ue?n.value||ve():n instanceof We?e.call_only?n.body:st(En,n,{operator:"void",expression:n.body}):void 0:ve()}function be(e){for(var n=$.argnames.length;--n>=0;)if($.argnames[n].definition()===e)return n}function ye(e,n){return e.has(n)||tt[n]||ee.var_names().has(n)}function we(n,t,i,r){var o=i.definition();if(ee.var_names().has(i.name)||(ee.var_names().set(i.name,!0),n.push(st(qn,i,{name:i,value:null}))),ee.variables.set(i.name,o),ee.enclosed.push(o),r){var a=st(_n,i);o.assignments++,o.references.push(a),t.push(st(f,e,{operator:"=",left:a,right:r}))}}}),e(qe,function(e,n){if(n.option("unsafe")){var t=e.expression;if(Mt(t))switch(t.name){case"Array":case"Error":case"Function":case"Object":case"RegExp":return st(x,e).transform(n)}}if(n.option("sequences")){var i=Pi(e,n);if(i!==e)return i.optimize(n)}return n.option("unused")&&ji(e,n),e}),e(Ge,function(e,n){var t=function(){if(!n.option("side_effects"))return e.expressions;var t=[],i=In(n),r=e.expressions.length-1;return e.expressions.forEach(function(e,o){o<r&&(e=e.drop_side_effect_free(n,i)),e&&(Dt(t,e),i=!1)}),t}(),i=t.length-1;return function(){for(var e=1;e<i;e++){var o=t[e-1],a=r(o);if(a){var s=t[e];if(n.option("conditionals")){var f=Ii(n,a,o.right,s);if(f){o.right=f,t.splice(e--,1),i--;continue}}n.option("dead_code")&&r(s)===a&&s.right.is_constant_expression(a.scope.resolve())&&(t[--e]=o.right)}}}(),function(){if(!n.option("side_effects"))return;for(;i>0&&Gt(t[i],n);)i--;i<t.length-1&&(t[i]=st(En,e,{operator:"void",expression:t[i]}),t.length=i+1)}(),0==i?((e=At(n.parent(),n.self(),t[0]))instanceof Ge||(e=e.optimize(n)),e):(e.expressions=t,e);function r(e){return e instanceof f&&"="==e.operator&&e.left instanceof _n&&e.left.definition()}}),e(An,function(e,n){if(n.option("sequences")){var t=Pi(e,n);if(t!==e)return t.optimize(n)}return ni(n,e)});var Ri=nt("+ -"),Bi=nt("* / %");e(En,function(e,n){var t=e.operator,i=e.expression;if(n.option("sequences")&&function(){switch(t){case"delete":return!f(i.tail_node());case"typeof":return!Mt(i.tail_node());default:return!0}}()){var r=Pi(e,n);if(r!==e)return r.optimize(n)}switch(t){case"+":if(!n.option("evaluate"))break;if(!i.is_number(n,!0))break;var o=n.parent();if(o instanceof En&&"delete"==o.operator)break;return i;case"-":if(i instanceof ye&&(i=i.transform(n)),i instanceof Pe||i instanceof ye)return e;break;case"!":if(!n.option("booleans"))break;if(i.is_truthy())return ht(e,[i,st(le,e)]).optimize(n);if(n.in_boolean_context()){if(i instanceof En&&"!"==i.operator)return i.expression;if(i instanceof m){var a=In(n);e=(a?Jt:Kt)(e,i.negate(n,a))}}break;case"delete":if(!n.option("evaluate"))break;if(f(i))break;return ht(e,[i,st(xn,e)]).optimize(n);case"typeof":if(!n.option("booleans"))break;if(!n.in_boolean_context())break;$e.warn("Boolean expression always true [{start}]",e);var s=[st(xn,e)];return i instanceof _n&&M(i,n)||s.unshift(i),ht(e,s).optimize(n);case"void":if(!n.option("side_effects"))break;return(i=i.drop_side_effect_free(n))?(e.expression=i,e):st(Dn,e).optimize(n)}return n.option("evaluate")&&i instanceof m&&Ri[t]&&Bi[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(n))?st(m,e,{operator:i.operator,left:st(En,i.left,{operator:t,expression:i.left}),right:i.right}):ni(n,e);function f(e){return e instanceof ye||e instanceof Oe||e instanceof Ce||e instanceof Ye||e instanceof _n||e instanceof Dn}}),e(v,function(e,n){if(!n.option("awaits"))return e;if(n.option("sequences")){var t=Pi(e,n);if(t!==e)return t.optimize(n)}if(n.option("side_effects")){var i=e.expression;if(i instanceof v)return i.optimize(n);if(i instanceof En&&i.expression instanceof v)return i.optimize(n);for(var r,o=0,a=e;r=n.parent(o++);a=r){if(Bn(r)){if(r.value===a)return i.optimize(n)}else if(r instanceof Ue){var s=!0;do{if(a=r,(r=n.parent(o++))instanceof kn&&(r.bfinally||r.bcatch)!==a){s=!1;break}}while(r&&!(r instanceof Ve));if(s)return i.optimize(n)}else if(r instanceof Ge&&r.tail_node()===a)continue;break}}return e}),e(Fn,function(e,n){if(!n.option("yields"))return e;if(n.option("sequences")){var t=Pi(e,n);if(t!==e)return t.optimize(n)}var i=e.expression;if(e.nested&&"Call"==i.TYPE){var r=i.clone().optimize(n);if("Call"!=r.TYPE)return r}return e}),m.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof Ye){if(!(this.left.expression instanceof Ge))return this;var n=this.left.expression.expressions.slice(),t=this.clone();return t.left=t.left.clone(),t.left.expression=n.pop(),n.push(t),ht(this,n)}if(this.left instanceof Ge){var n=this.left.expressions.slice(),t=this.clone();return t.left=n.pop(),n.push(t),ht(this,n)}if(this.right instanceof Ge){if(this.left.has_side_effects(e))return this;for(var i="="==this.operator&&this.left instanceof _n,n=this.right.expressions,r=n.length-1,o=0;o<r&&(i||!n[o].has_side_effects(e));o++);if(o==r){n=n.slice();var t=this.clone();return t.right=n.pop(),n.push(t),ht(this,n)}if(o>0){var t=this.clone();return t.right=ht(this.right,n.slice(o)),(n=n.slice(0,o)).push(t),ht(this,n)}}return this});var Hi=nt("indexOf lastIndexOf"),Yi=nt("== === != !== * & | ^");function Li(e,n){return e instanceof f?!n&&"="==e.operator&&Li(e.right):e instanceof qe?!n:e instanceof Ge?Li(e.tail_node(),n):e instanceof _n?!n&&Li(e.fixed_value()):e instanceof a||e instanceof E||e instanceof ke||e instanceof je}function Ui(e,n,t){switch(e){case"in":return Li(n)||t&&t.option("unsafe_comps");case"instanceof":return n instanceof _n&&(n=n.fixed_value()),i(n)||t&&t.option("unsafe_comps");default:return!0}}function Vi(e,n){if(n.is_constant())return!0;if(n instanceof f)return"="!=n.operator||Vi(e,n.right);if(n instanceof m)return!Wt[n.operator]||Vi(e,n.left)&&Vi(e,n.right);if(n instanceof x)return Ln(n.expression);if(n instanceof N)return Vi(e,n.consequent)&&Vi(e,n.alternative);if(n instanceof Ge)return Vi(e,n.tail_node());if(n instanceof _n){var t=n.fixed_value();return t&&Vi(e,t)}return n instanceof gn?!n.tag||Qi(e,n.tag):n instanceof Tn||void 0}function Gi(e,n){return e instanceof f?at(e.left,n)?e:e.left:e instanceof Ge?Gi(e.tail_node(),n):e instanceof En&&gt[e.operator]?at(e.expression,n)?e:e.expression:e}function Wi(e,n){return n instanceof te?Wi(e,n.expression):n instanceof Qe?Wi(e,n.expression)&&Wi(e,n.property):n instanceof tn||!n.has_side_effects(e)}function Ki(e,n){var t=e.right.tail_node();if(t!==e.right){var i=e.right.expressions.slice(0,-1);i.push(t.left),(t=t.clone()).left=ht(e.right,i),e.right=t}e.left=st(m,e,{operator:e.operator,left:e.left,right:t.left,start:e.left.start,end:t.left.end}),e.right=t.right,n?e.left=e.left.transform(n):e.operator==t.left.operator&&Ki(e.left)}function Ji(e,n,t){var r=0,o=e.self();do{if(o===t)return o;if(i(o)&&o.name&&o.name.definition()===n)return o}while(o=e.parent(r++))}function Xi(e){var n=e.scope.resolve();return Gn(e.references,function(e){return n===e.scope.resolve()})}function Qi(e,n){return e.option("unsafe")&&n instanceof te&&"raw"==n.property&&Mt(n.expression)&&"String"==n.expression.name}function Zi(e){var n=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,t){var i=decode_escape_sequence(t);if("string"==typeof i)return i;n=!0}),!n)return e}function er(e,n){return e instanceof _n||e.TYPE===n.TYPE}function nr(e,n){var t=!1,i=new jn(function(e){return!!t||(e instanceof _n&&it(e.definition(),n)?t=!0:void 0)}),r=new jn(function(n){if(t)return!0;if(n instanceof ke&&n!==e){if(!(n.name||Ln(n)||Hn(n))){var o=r.parent();if(o instanceof x&&o.expression===n)return}return n.walk(i),!0}});return e.walk(r),t}e(m,function(e,n){if(!Yi[e.operator]||!e.right.is_constant()||e.left.is_constant()||e.left instanceof m&&_t[e.left.operator]>=_t[e.operator]||P(),n.option("sequences")){var t=e.lift_sequences(n);if(t!==e)return t.optimize(n)}if(n.option("assignments")&&Wt[e.operator]){var r=Gi(e.left,n),o=e.right;if(r instanceof _n&&o instanceof f&&"="==o.operator&&r.equals(o.left)){r=r.clone();var a=st(f,e,{operator:"=",left:r,right:st(m,e,{operator:e.operator,left:e.left,right:o.right})});r.fixed&&(r.fixed=function(){return a.right},r.fixed.assigns=[a]);var s=r.definition();return s.references.push(r),s.replaced++,a.optimize(n)}}if(n.option("comparisons"))switch(e.operator){case"===":case"!==":if(Gt(e.left,n)&&e.right.is_defined(n))return $e.warn("Expression always defined [{start}]",e),ht(e,[e.right,st("==="==e.operator?le:xn,e)]).optimize(n);var c=!0;(e.left.is_string(n)&&e.right.is_string(n)||e.left.is_number(n)&&e.right.is_number(n)||e.left.is_boolean(n)&&e.right.is_boolean(n)||Wi(n,e.left)&&e.left.equals(e.right))&&(e.operator=e.operator.slice(0,2));case"==":case"!=":if(!c&&Gt(e.left,n))e.left=st(Fe,e.left);else if(n.option("typeofs")&&e.left instanceof Xe&&"undefined"==e.left.value&&e.right instanceof En&&"typeof"==e.right.operator){var u=e.right.expression;(u instanceof _n?!u.is_declared(n):u instanceof Ye&&n.option("ie"))||(e.right=u,e.left=st(Dn,e.left).optimize(n),2==e.operator.length&&(e.operator+="="))}else if(e.left instanceof _n&&e.right instanceof _n&&e.left.definition()===e.right.definition()&&Li(e.left))return st("="==e.operator[0]?xn:le,e).optimize(n);break;case"&&":case"||":var l=e.left;if(!(l instanceof m))break;if(l.operator!=("&&"==e.operator?"!==":"==="))break;if(!(e.right instanceof m))break;if(l.operator!=e.right.operator)break;if(Gt(l.left,n)&&e.right.left instanceof Fe||l.left instanceof Fe&&Gt(e.right.left,n)){var u=l.right;if(u instanceof f&&"="==u.operator&&(u=u.left),u.has_side_effects(n))break;if(!u.equals(e.right.right))break;return l.operator=l.operator.slice(0,-1),l.left=st(Fe,e),l}}var p=!1,h=n.parent();if(n.option("booleans")){var r=Gi(e.left,n);if(Wt[e.operator]&&!r.has_side_effects(n)){if(r.equals(e.right))return At(h,n.self(),e.left).optimize(n);Ai(n,r)}p=n.in_boolean_context()}if(p)switch(e.operator){case"+":var d=e.left.evaluate(n,!0);if(d&&"string"==typeof d||(d=e.right.evaluate(n,!0))&&"string"==typeof d){$e.warn("+ in boolean context always true [{start}]",e);var v=[];if(e.left.evaluate(n)instanceof $e&&v.push(e.left),e.right.evaluate(n)instanceof $e&&v.push(e.right),v.length<2)return v.push(st(xn,e)),ht(e,v).optimize(n);e.truthy=!0}break;case"==":if(e.left instanceof Xe&&""==e.left.value&&e.right.is_string(n))return st(En,e,{operator:"!",expression:e.right}).optimize(n);break;case"!=":if(e.left instanceof Xe&&""==e.left.value&&e.right.is_string(n))return e.right.optimize(n)}if(n.option("comparisons")&&e.is_boolean(n)){if("Binary"!=h.TYPE){var _=st(En,e,{operator:"!",expression:e.negate(n)});if(Xt(n,e,_)===_)return _}switch(e.operator){case">":P("<");break;case">=":P("<=")}}if(n.option("conditionals")&&Wt[e.operator]){if(e.left instanceof m&&e.operator==e.left.operator){var g=st(m,e,{operator:e.operator,left:e.left.right,right:e.right}),b=g.transform(n);g!==b&&(e.left=e.left.left,e.right=b)}var y=e.right.tail_node();y instanceof m&&e.operator==y.operator&&Ki(e,n)}if(n.option("strings")&&"+"==e.operator){if(e.right instanceof Xe&&""==e.right.value&&e.left.is_string(n))return e.left.optimize(n);if(e.left instanceof Xe&&""==e.left.value&&e.right.is_string(n))return e.right.optimize(n);if(e.left instanceof m&&"+"==e.left.operator&&e.left.left instanceof Xe&&""==e.left.left.value&&e.right.is_string(n)&&(e.left.right.is_constant()||!e.right.has_side_effects(n)))return e.left=e.left.right,e.optimize(n);var y=e.right.tail_node();y instanceof m&&e.operator==y.operator&&(e.left.is_string(n)&&y.is_string(n)||y.left.is_string(n)&&(e.left.is_constant()||!y.right.has_side_effects(n)))&&Ki(e,n)}if(n.option("evaluate")){var w=!0;switch(e.operator){case"&&":var S=Ti(n,e.left);if(!S)return $e.warn("Condition left of && always false [{start}]",e),At(h,n.self(),e.left).optimize(n);if(!(S instanceof $e))return $e.warn("Condition left of && always true [{start}]",e),ht(e,[e.left,e.right]).optimize(n);if(e.right.evaluate(n,!0)){if((p||"&&"==h.operator&&h.left===n.self())&&!(e.right.evaluate(n)instanceof $e))return $e.warn("Dropping side-effect-free && [{start}]",e),e.left.optimize(n)}else{if(p&&!(e.right.evaluate(n)instanceof $e))return $e.warn("Boolean && always false [{start}]",e),ht(e,[e.left,st(le,e)]).optimize(n);e.falsy=!0}if("||"==e.left.operator){var x=Ti(n,e.left.right);if(!x)return st(N,e,{condition:e.left.left,consequent:e.right,alternative:e.left.right}).optimize(n)}break;case"??":var k=!0;case"||":var T,S=Ti(n,e.left,k);if(k?null==S:!S)return $e.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:k?"nullish":"false",start:e.start}),ht(e,[e.left,e.right]).optimize(n);if(!(S instanceof $e))return $e.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:k?"defined":"true",start:e.start}),At(h,n.self(),e.left).optimize(n);if(k||!(T=e.right.evaluate(n,!0))||T instanceof $e){if((p||"||"==h.operator&&h.left===n.self())&&!e.right.evaluate(n))return $e.warn("Dropping side-effect-free {operator} [{start}]",e),e.left.optimize(n)}else{if(p&&!(e.right.evaluate(n)instanceof $e))return $e.warn("Boolean || always true [{start}]",e),ht(e,[e.left,st(xn,e)]).optimize(n);e.truthy=!0}if(!k&&"&&"==e.left.operator){var x=Ti(n,e.left.right);if(x&&!(x instanceof $e))return st(N,e,{condition:e.left.left,consequent:e.left.right,alternative:e.right}).optimize(n)}break;case"+":if(e.left instanceof R&&e.right instanceof m&&"+"==e.right.operator&&e.right.left instanceof R&&e.right.is_string(n)&&(e=st(m,e,{operator:"+",left:st(Xe,e.left,{value:""+e.left.value+e.right.left.value,start:e.left.start,end:e.right.left.end}),right:e.right.right})),e.right instanceof R&&e.left instanceof m&&"+"==e.left.operator&&e.left.right instanceof R&&e.left.is_string(n)&&(e=st(m,e,{operator:"+",left:e.left.left,right:st(Xe,e.right,{value:""+e.left.right.value+e.right.value,start:e.left.right.start,end:e.right.end})})),e.right instanceof En&&"-"==e.right.operator&&e.left.is_number(n)){e=st(m,e,{operator:"-",left:e.left,right:e.right.expression});break}if(e.left instanceof En&&"-"==e.left.operator&&F()&&e.right.is_number(n)){e=st(m,e,{operator:"-",left:e.right,right:e.left.expression});break}if(n.option("unsafe_math")&&e.left instanceof m&&_t[e.left.operator]==_t[e.operator]&&e.right.is_constant()&&(e.right.is_boolean(n)||e.right.is_number(n))&&e.left.is_number(n)&&!e.left.right.is_constant()&&(e.left.left.is_boolean(n)||e.left.left.is_number(n))){e=st(m,e,{operator:e.left.operator,left:st(m,e,{operator:e.operator,left:e.right,right:e.left.left}),right:e.left.right});break}case"-":if(e.right instanceof En&&"-"==e.right.operator&&e.left.is_number(n)&&e.right.expression.is_number(n)){e=st(m,e,{operator:"+",left:e.left,right:e.right.expression});break}case"*":case"/":w=n.option("unsafe_math"),"+"!=e.operator&&["left","right"].forEach(function(t){var i=e[t];if(i instanceof En&&"+"==i.operator){var r=i.expression;(r.is_boolean(n)||r.is_number(n)||r.is_string(n))&&(e[t]=r)}});case"&":case"|":case"^":if("-"==e.operator||"/"==e.operator||!e.left.is_boolean(n)&&!e.left.is_number(n)||!e.right.is_boolean(n)&&!e.right.is_number(n)||!F()||e.left instanceof m&&e.left.operator!=e.operator&&_t[e.left.operator]>=_t[e.operator]||(e=Xt(n,e,st(m,e,{operator:e.operator,left:e.right,right:e.left}),e.right instanceof R&&!(e.left instanceof R))),!w||!e.is_number(n))break;if(!(e.right instanceof m&&"%"!=e.right.operator&&_t[e.right.operator]==_t[e.operator]&&e.right.is_number(n)&&("+"!=e.operator||e.right.left.is_boolean(n)||e.right.left.is_number(n)))||"-"==e.operator&&e.left.is_negative_zero()||!e.right.left.is_constant_expression()&&e.right.right.has_side_effects(n)||function(e){var n=!1;return e.walk(new jn(function(e){if(n)return!0;if(e instanceof f){if(e.left instanceof Ye)return n=!0}else if(e instanceof Tn&&xt[e.operator]&&e.expression instanceof Ye)return n=!0})),n}(e.right.right)||"+"!=(e=st(m,e,{operator:q(e.operator,e.right.operator),left:st(m,e.left,{operator:e.operator,left:e.left,right:e.right.left,start:e.left.start,end:e.right.left.end}),right:e.right.right})).operator||e.right.is_boolean(n)||e.right.is_number(n)||(e.right=st(En,e.right,{operator:"+",expression:e.right})),e.right instanceof R&&e.left instanceof m&&"%"!=e.left.operator&&_t[e.left.operator]==_t[e.operator]&&e.left.is_number(n))if(e.left.left instanceof R){var r=C(e.operator,e.left.left,e.right,{start:e.left.left.start,end:e.right.end});e=C(e.left.operator,ni(n,r),e.left.right,e)}else if(e.left.right instanceof R){var A=q(e.left.operator,e.operator),y=ni(n,C(A,e.left.right,e.right,e.left));!y.is_constant()||"-"==e.left.operator&&0!=e.right.value&&0==+y.value&&e.left.left.is_negative_zero()||(e=C(e.left.operator,e.left.left,y,e))}break;case"instanceof":if(i(e.right))return ht(e,[e,st(le,e)]).optimize(n)}if(!(h instanceof En&&"delete"==h.operator)){if(e.left instanceof Pe&&!e.right.is_constant())switch(e.operator){case"+":if(0==e.left.value){if(e.right.is_boolean(n))return st(En,e,{operator:"+",expression:e.right}).optimize(n);if(e.right.is_number(n)&&!e.right.is_negative_zero())return e.right}break;case"*":if(1==e.left.value)return st(En,e,{operator:"+",expression:e.right}).optimize(n)}if(e.right instanceof Pe&&!e.left.is_constant())switch(e.operator){case"+":if(0==e.right.value){if(e.left.is_boolean(n))return st(En,e,{operator:"+",expression:e.left}).optimize(n);if(e.left.is_number(n)&&!e.left.is_negative_zero())return e.left}break;case"-":if(0==e.right.value)return st(En,e,{operator:"+",expression:e.left}).optimize(n);break;case"/":if(1==e.right.value)return st(En,e,{operator:"+",expression:e.left}).optimize(n)}}}if(n.option("typeofs"))switch(e.operator){case"&&":ki(e.left,e.right,null);break;case"||":ki(e.left,null,e.right)}if(n.option("unsafe")){var E=$(e.right);if(p&&E&&("=="==e.operator||"!="==e.operator)&&e.left instanceof Pe&&0==e.left.value)return("=="==e.operator?st(En,e,{operator:"!",expression:e.right}):e.right).optimize(n);var D=$(e.left);if(n.option("comparisons")&&function(){switch(e.operator){case"<=":return E&&e.left instanceof Pe&&0==e.left.value;case"<":if(D&&e.right instanceof Pe&&0==e.right.value)return!0;case"==":case"!=":return!!E&&(e.left instanceof Pe&&-1==e.left.value||e.left instanceof En&&"-"==e.left.operator&&e.left.expression instanceof Pe&&1==e.left.expression.value)}}()){var O=st(En,e,{operator:"!",expression:st(En,e,{operator:"~",expression:D?e.left:e.right})});switch(e.operator){case"<":if(D)break;case"<=":case"!=":O=st(En,e,{operator:"!",expression:O})}return O.optimize(n)}}return ni(n,e);function q(e,n){switch(e){case"-":return"+"==n?"-":"+";case"/":return"*"==n?"/":"*";default:return n}}function C(e,t,i,r){return"+"==e&&(t.is_boolean(n)||t.is_number(n)||(t=st(En,t,{operator:"+",expression:t})),i.is_boolean(n)||i.is_number(n)||(i=st(En,i,{operator:"+",expression:i}))),st(m,r,{operator:e,left:t,right:i})}function $(e){return"Call"==e.TYPE&&e.expression instanceof te&&Hi[e.expression.property]}function F(){return e.left.is_constant()||e.right.is_constant()||!e.left.has_side_effects(n)&&!e.right.has_side_effects(n)}function P(n){if(F()){n&&(e.operator=n);var t=e.left;e.left=e.right,e.right=t}}}),e(un,function(e){return e}),e(_n,function(e,n){if(!n.option("ie")&&Mt(e)&&(!e.scope.resolve().uses_with||!n.find_parent($n)))switch(e.name){case"undefined":return st(Dn,e).optimize(n);case"NaN":return st(Oe,e).optimize(n);case"Infinity":return st(ye,e).optimize(n)}var t=n.parent();if(n.option("reduce_vars")&&wt(n.self(),t)!==n.self()){var r,o,a,s=e.definition(),f=e.fixed_value(),c=s.single_use&&!(t instanceof x&&t.is_expr_pure(n));if(c)if(i(f)){if(s.scope===e.scope.resolve(!0)&&!s.in_loop||n.option("reduce_funcs")&&1!=s.escaped.depth&&!f.inlined)if(s.redefined())c=!1;else if(Ji(n,s,f))c=!1;else if(f.name&&f.name.definition()!==s)c=!1;else if(f.parent_scope!==e.scope||St(s))if(Ni(f,n)){if("f"==(c=f.is_constant_expression(e.scope))){var u=e.scope;do{(u instanceof Te||u instanceof Ae)&&(u.inlined=!0)}while(u=u.parent_scope)}}else c=!1;else f.name&&("await"==f.name.name&&Ln(f)||"yield"==f.name.name&&Hn(f))?c=!1:f.has_side_effects(n)?c=!1:n.option("ie")&&f instanceof E&&(c=!1);else c=!1;c&&(f.parent_scope=e.scope)}else(!f||s.recursive_refs>0||!f.is_constant_expression()||f.drop_side_effect_free(n))&&(c=!1);if(c){if(s.single_use=!1,f._squeezed=!0,f.single_use=!0,f instanceof V&&(f=vi(f)),f instanceof Te&&(f=_i(f)),i(f)){var l=[],u=e.scope;do{if(l.push(u),u===s.scope)break}while(u=u.parent_scope);f.enclosed.forEach(function(e){if(!f.variables.has(e.name))for(var n=0;n<l.length;n++){var t=l[n];if(!ot(t.enclosed,e))return;t.var_names().set(e.name,!0)}})}if(s.recursive_refs>0){var p,h,d=(y=f.clone(!0)).name.definition(),v=y.variables.get(y.name.name),_=v&&v.orig[0];y instanceof E?(p="def_function",h=on):(p="def_variable",h=hn),_ instanceof h||((_=st(h,y.name)).scope=y,y.name=_,(v=y[p](_)).recursive_refs=s.recursive_refs),y.walk(new jn(function(e){if(e instanceof fn){if(e!==_){var n=e.definition();n.orig.push(e),n.eliminated++}}else if(e instanceof _n){var n=e.definition();if(n===d)e.thedef=n=v;else{n.single_use=!1;var t=e.fixed_value();i(t)&&t.name&&t.name.definition()===n&&n.scope===t.name.scope&&f.variables.get(t.name.name)===n&&(t.name=t.name.clone(),e.thedef=n=y.variables.get(t.name.name)||y[p](t.name))}n.references.push(e)}}))}else f instanceof Ve?(n.push(f),y=f.optimize(n),n.pop()):y=f.optimize(n),y=y.transform(new Pn(function(e,n){return e instanceof Ve?e:(e=e.clone(),n(e,this),e)}));return s.replaced++,y}if(f&&!1!==(r=e.fixed||s.fixed).should_replace)if(f instanceof yn?St(s)||!Xi(s)||function(n){var t=e.scope;for(;t!==n.scope;){if(t instanceof E)return!0;t=t.parent_scope}}(s)||(a=f):(o=f.evaluate(n,!0))!==f&&"function"!=typeof o&&(null===o||"object"!=typeof o||n.option("unsafe_regexp")&&o instanceof RegExp&&!s.cross_loop&&Xi(s))&&(a=yt(o,f)),a){if(void 0===r.should_replace){var m=a.optimize(n).print_to_string().length;w(f)||(m=Math.min(m,f.print_to_string().length));var g=s.name.length;if(n.option("unused")&&!n.exposed(s)){var b=s.references.length-s.replaced-s.assignments;b=Math.min(b,s.references.filter(function(e){return e.fixed===r}).length),g+=(g+2+m)/Math.max(1,b)}r.should_replace=m-Math.floor(g)<n.eval_threshold}var y;if(r.should_replace)return w(f)?(y=a.optimize(n))===a&&(y=y.clone(!0)):(y=Kt(a.optimize(n),f))!==a&&y!==f||(y=y.clone(!0)),s.replaced++,y}}return e;function w(e){var n;return e.walk(new jn(function(e){if(e instanceof _n&&(n=!0),n)return!0})),n}}),e(gn,function(e,n){if(!n.option("templates"))return e;var t=e.tag;if(!t||Qi(n,t)){for(var i,r=[],o=[],a=0;a<e.strings.length;a++){var s=e.strings[a];if(!t){var f=Zi(s);f&&(s=v(f))}if(a>0){var c=e.expressions[a-1],u=_(c);if(u){var l,p=o[o.length-1],h=p+u+s;if(t||typeof(l=Zi(h))==i){o[o.length-1]=l?v(l):h;continue}}r.push(c)}o.push(s),t||(i=typeof f)}if(!t&&o.length>1){if(""==o[o.length-1])return st(m,e,{operator:"+",left:st(gn,e,{expressions:r.slice(0,-1),strings:o.slice(0,-1)}).transform(n),right:r[r.length-1]}).optimize(n);if(""==o[0]){for(var d=st(m,e,{operator:"+",left:st(Xe,e,{value:""}),right:r[0]}),a=1;""==o[a]&&a<r.length;a++)d=st(m,e,{operator:"+",left:d,right:r[a]});return Xt(n,e,st(m,e,{operator:"+",left:d.transform(n),right:st(gn,e,{expressions:r.slice(a),strings:o.slice(a)}).transform(n)}).optimize(n))}}e.expressions=r,e.strings=o}return ni(n,e);function v(e){return e.replace(/\r|\\|`|\${/g,function(e){return"\\"+("\r"==e?"r":e)})}function _(e){var i=e.evaluate(n);if(i!==e&&!(t&&/\r|\\|`/.test(i)||(i=v(""+i)).length>e.print_to_string().length+"${}".length))return i}}),e(Dn,function(e,n){if(n.option("unsafe_undefined")){var t=Xn(n).find_variable("undefined");if(t){var i=st(_n,e,{name:"undefined",scope:t.scope,thedef:t});return i.is_undefined=!0,i}}var r=wt(n.self(),n.parent());return r&&er(r,e)?e:st(En,e,{operator:"void",expression:st(Pe,e,{value:0})})}),e(ye,function(e,n){var t=wt(n.self(),n.parent());return t&&er(t,e)?e:!n.option("keep_infinity")||t||Xn(n).find_variable("Infinity")?st(m,e,{operator:"/",left:st(Pe,e,{value:1}),right:st(Pe,e,{value:0})}):e}),e(Oe,function(e,n){var t=wt(n.self(),n.parent());return t&&er(t,e)?e:t||Xn(n).find_variable("NaN")?st(m,e,{operator:"/",left:st(Pe,e,{value:0}),right:st(Pe,e,{value:0})}):e});var tr=nt("+ - * / % >> << >>> | ^ &"),ir=nt("* | ^ &");function rr(e,n){if(!e)return!1;var t=n.parent();return"Call"!=t.TYPE||(t.expression!==n.self()||!(e instanceof _n&&!(e=e.fixed_value()))&&(e instanceof ke&&!e.contains_this()))}function or(e){return e instanceof ze&&"string"==typeof e.key&&!(e instanceof Re&&e.value.contains_super())}function ar(e){var n=e.definition().redefined();return n&&((e=e.clone()).thedef=n),e}function sr(e,n){var t=!1;return n.walk(new jn(function(n){return!!t||(n instanceof _n&&e.variables.get(n.name)===n.definition()?t=!0:void 0)})),t}function fr(e,n){var t=[];e.references.forEach(function(e){var i=e.fixed;i&&ot(t,i)&&(i.assigns?i.assigns.unshift(n):i.assigns=[n])})}function cr(e,n){var t=st(_n,n),i=st(f,n,{operator:"=",left:t,right:st(Dn,n).transform(e)}),r=n.definition();return r.fixed&&(t.fixed=function(){return i.right},t.fixed.assigns=[i],fr(r,i)),r.assignments++,r.references.push(t),i}e(f,function(e,n){if(n.option("dead_code"))if(e.left instanceof Ye){if("="==e.operator){if(e.redundant){var t=[e.left.expression];return e.left instanceof Qe&&t.push(e.left.property),t.push(e.right),ht(e,t).optimize(n)}if(e.left.equals(e.right)&&!e.left.has_side_effects(n))return e.right;var i=e.left.expression;if(i instanceof ke||!n.has_directive("use strict")&&i instanceof R&&!i.may_throw_on_access(n))return e.left instanceof te?e.right:ht(e,[e.left.property,e.right]).optimize(n)}}else if(e.left instanceof _n&&M(e.left,n)){var r;if("="==e.operator&&e.left.equals(e.right)&&!((r=n.parent())instanceof En&&"delete"==r.operator))return e.right;if(e.left.is_immutable())return b();var o,a=e.left.definition(),s=a.scope.resolve(),c=s===n.find_parent(ke),u=0;if(r=n.self(),!s.uses_arguments||!St(a)||n.has_directive("use strict"))do{if(o=r,(r=n.parent(u++))instanceof f){if(r.left instanceof _n&&r.left.definition()===a){if(_(u,r,!c))break;return b(a)}if(r.left.match_symbol(function(e){if(e instanceof Ye)return!0}))break}else{if(r instanceof oe){if(!c)break;if(_(u,r))break;if(nr(s,[a]))break;return b(a)}if(r instanceof We){if(!c)break;if(nr(s,[a]))break;var l;do{if(l=r,(r=n.parent(u++))===s&&Yt(r.body,l))return b(a)}while(v(l,r));break}if(r instanceof qn){if(!(r.name instanceof fn))continue;if(r.name.definition()!==a)continue;if(_(u,r))break;return b(a)}}}while(d(o,r))}if(n.option("sequences")){var p=e.lift_sequences(n);if(p!==e)return p.optimize(n)}if(n.option("assignments")){if("="==e.operator&&e.left instanceof _n&&e.right instanceof m){if(e.right.left instanceof _n&&e.right.left.name==e.left.name&&tr[e.right.operator])return g(e.right.right);if(e.right.right instanceof _n&&e.right.right.name==e.left.name&&ir[e.right.operator]&&!e.right.left.has_side_effects(n))return g(e.right.left)}if(("-="==e.operator||"+="==e.operator&&(e.left.is_boolean(n)||e.left.is_number(n)))&&e.right instanceof Pe&&1==e.right.value){var h=e.operator.slice(0,-1);return st(En,e,{operator:h+h,expression:e.left})}}return ni(n,e);function d(e,n){if(n instanceof m)switch(e){case n.left:return n.right.is_constant_expression(s);case n.right:return!0;default:return!1}if(n instanceof N)switch(e){case n.condition:return n.consequent.is_constant_expression(s)&&n.alternative.is_constant_expression(s);case n.consequent:case n.alternative:return!0;default:return!1}if(n instanceof Ge){var t=n.expressions,i=t.indexOf(e);if(i<0)return!1;for(var r=t.length;--r>i;)if(!t[r].is_constant_expression(s))return!1;return!0}return n instanceof En}function v(e,n){return n instanceof y?Yt(n.body,e):n instanceof T?Yt(n.body,e):n instanceof pe?Yt(n.body,e):n instanceof ge?n.body===e||n.alternative===e:n instanceof kn?n.bfinally?n.bfinally===e:n.bcatch===e:void 0}function _(t,i,r){var o=e.right;e.right=st(Fe,o);var a=i.may_throw(n);return e.right=o,et(n,t,i,s,a,r)}function g(n){var t=e.left.fixed;return t&&(t.to_binary=ae(function(e){return e.left},t)),st(f,e,{operator:e.right.operator+"=",left:e.left,right:n})}function b(t){return t&&(t.fixed=!1),("="!=e.operator?st(m,e,{operator:e.operator.slice(0,-1),left:e.left,right:e.right}):At(n.parent(),e,e.right)).optimize(n)}}),e(N,function(e,n){if(n.option("sequences")&&e.condition instanceof Ge){var t=e.condition.expressions.slice(),i=e.clone();return i.condition=t.pop(),t.push(i),ht(e,t).optimize(n)}if(!n.option("conditionals"))return e;var r=e.condition;if(n.option("booleans")&&!r.has_side_effects(n)&&Ai(n,r),!(r=Ti(n,r)))return $e.warn("Condition always false [{start}]",e),ht(e,[e.condition,e.alternative]).optimize(n);if(!(r instanceof $e))return $e.warn("Condition always true [{start}]",e),ht(e,[e.condition,e.consequent]).optimize(n);var o=In(n),a=r.negate(n,o);(o?Jt:Kt)(r,a)===a&&(e=st(N,e,{condition:a,consequent:e.alternative,alternative:e.consequent}),a=r,r=e.condition);var s=e.consequent,c=e.alternative,u=Gi(r,n);if(Wi(n,u)){if(u.equals(s))return st(m,e,{operator:"||",left:r,right:c}).optimize(n);if(u.equals(c))return st(m,e,{operator:"&&",left:r,right:s}).optimize(n)}var l=s.tail_node();if(l instanceof f){var p="="==l.operator,h=p?c.tail_node():c;if((p||s===l)&&h instanceof f&&l.operator==h.operator&&l.left.equals(h.left)&&(p&&l.left instanceof _n||!r.has_side_effects(n)&&T(s)&&T(c)))return st(f,e,{operator:l.operator,left:l.left,right:st(N,e,{condition:r,consequent:A(s),alternative:A(c)})})}var h=c.tail_node();if(l.equals(h))return ht(e,s.equals(c)?[r,s]:[st(N,e,{condition:r,consequent:E(s),alternative:E(c)}),h]).optimize(n);var d,v=function n(t,i,o){var a=t.tail_node();var s=i.tail_node();if(!function e(n,t){if(n.TYPE!=t.TYPE)return;if(n.optional!=t.optional)return;if(n instanceof x){if(-1!=S(n,t))return;return"Call"!=n.TYPE||!(n.expression instanceof Ye||t.expression instanceof Ye)||e(n.expression,t.expression)}if(!(n instanceof Ye))return;var i=n.property;var r=t.property;return(i instanceof $e?i.equals(r):i==r)&&!(n.expression instanceof Ze||t.expression instanceof Ze)}(a,s))return!o&&st(N,e,{condition:r,consequent:t,alternative:i});var f=a.clone();var c=k(t,a,"expression");var u=k(i,s,"expression");var l=n(c,u);a.expression instanceof Ge&&(l=At(a,a.expression,l));f.expression=l;return f}(s,c,!0);if(v)return v;if(s instanceof x&&c.TYPE==s.TYPE&&(d=S(s,c))>=0&&s.expression.equals(c.expression)&&!r.has_side_effects(n)&&!s.expression.has_side_effects(n)){var i=s.clone(),_=s.args[d];return i.args[d]=_ instanceof Ke?st(Ke,e,{expression:st(N,e,{condition:r,consequent:_.expression,alternative:c.args[d].expression})}):st(N,e,{condition:r,consequent:_,alternative:c.args[d]}),i}if(l instanceof N&&l.alternative.equals(c))return st(N,e,{condition:st(m,e,{left:r,operator:"&&",right:k(s,l,"condition")}),consequent:l.consequent,alternative:Et(l.alternative,c)});if(l instanceof N&&l.consequent.equals(c))return st(N,e,{condition:st(m,e,{left:a,operator:"||",right:k(s,l,"condition")}),consequent:Et(l.consequent,c),alternative:l.alternative});if(h instanceof N&&s.equals(h.consequent))return st(N,e,{condition:st(m,e,{left:r,operator:"||",right:k(c,h,"condition")}),consequent:Et(s,h.consequent),alternative:h.alternative});if(h instanceof N&&s.equals(h.alternative))return st(N,e,{condition:st(m,e,{left:a,operator:"&&",right:k(c,h,"condition")}),consequent:h.consequent,alternative:Et(s,h.alternative)});if(l instanceof m&&"&&"==l.operator&&l.right.equals(c))return st(m,e,{operator:"&&",left:st(m,e,{operator:"||",left:a,right:k(s,l,"left")}),right:Et(l.right,c)}).optimize(n);if(l instanceof m&&"||"==l.operator&&l.right.equals(c))return st(m,e,{operator:"||",left:st(m,e,{operator:"&&",left:r,right:k(s,l,"left")}),right:Et(l.right,c)}).optimize(n);if(h instanceof m&&"&&"==h.operator&&h.right.equals(s))return st(m,e,{operator:"&&",left:st(m,e,{operator:"||",left:r,right:k(c,h,"left")}),right:Et(s,h.right)}).optimize(n);if(h instanceof m&&"||"==h.operator&&h.right.equals(s))return st(m,e,{operator:"||",left:st(m,e,{operator:"&&",left:a,right:k(c,h,"left")}),right:Et(s,h.right)}).optimize(n);var g=n.option("booleans")&&n.in_boolean_context();return y(s)?w(c)?b(r):st(m,e,{operator:"||",left:b(r),right:c}).optimize(n):w(s)?y(c)?b(r.negate(n)):st(m,e,{operator:"&&",left:b(r.negate(n)),right:c}).optimize(n):y(c)?st(m,e,{operator:"||",left:b(r.negate(n)),right:s}).optimize(n):w(c)?st(m,e,{operator:"&&",left:b(r),right:s}).optimize(n):(n.option("typeofs")&&ki(r,s,c),e);function b(e){return e.is_boolean(n)?e:st(En,e,{operator:"!",expression:e.negate(n)})}function y(e){return e instanceof xn||g&&e instanceof R&&e.value||e instanceof En&&"!"==e.operator&&e.expression instanceof R&&!e.expression.value}function w(e){return e instanceof le||g&&(e instanceof R&&!e.value||e instanceof En&&"void"==e.operator&&!e.expression.has_side_effects(n))||e instanceof En&&"!"==e.operator&&e.expression instanceof R&&e.expression.value}function S(e,n){var t=e.args,i=n.args,r=t.length;if(r!=i.length)return-2;for(var o=0;o<r;o++)if(!t[o].equals(i[o])){if(t[o]instanceof Ke!=i[o]instanceof Ke)return-3;for(var a=o+1;a<r;a++)if(!t[a].equals(i[a]))return-2;return o}return-1}function k(e,n,t){if(e===n)return n[t];var i=e.expressions.slice(0,-1);return i.push(n[t]),ht(e,i)}function T(e){return e===e.tail_node()||Gn(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(n)})}function A(e){if(!(e instanceof Ge))return e.right;var n=e.expressions.slice();return n.push(n.pop().right),ht(e,n)}function E(e){return e instanceof Ge?ht(e,e.expressions.slice(0,-1)):st(Pe,e,{value:0})}}),e(w,function(e,n){if(!n.option("booleans"))return e;if(n.in_boolean_context())return st(Pe,e,{value:+e.value});var t=n.parent();return t instanceof m&&("=="==t.operator||"!="==t.operator)?($e.warn("Non-strict equality against boolean: {operator} {value} [{start}]",{operator:t.operator,value:e.value,start:t.start}),st(Pe,e,{value:+e.value})):st(En,e,{operator:"!",expression:st(Pe,e,{value:1-e.value})})}),e(Ke,function(e,n){var t=e.expression;return n.option("spreads")&&t instanceof a&&!(n.parent()instanceof je)?Zn.splice(t.elements.map(function(e){return e instanceof me?st(Dn,e).optimize(n):e})):e}),e(Qe,function(e,n){var t=e.expression,i=e.property,r=Fi(e,n);if(r)return r;if(n.option("properties")){var s=i.evaluate(n);if(s!==i){if("string"==typeof s)if("undefined"==s)s=void 0;else{var f=parseFloat(s);f.toString()==s&&(s=f)}i=e.property=Kt(i,yt(s,i).transform(n));var c=""+s;if(mt(c)&&c.length<=i.print_to_string().length+1)return st(te,e,{optional:e.optional,expression:t,property:c,quoted:!0}).optimize(n)}}var u,l,p,h,d=n.parent(),v=wt(n.self(),d);if(n.option("arguments")&&t instanceof _n&&A(u=t.definition())&&!t.in_arg&&i instanceof Pe&&Math.floor(w=i.value)==w&&(l=u.scope)===function(){var e,t=0;for(;e=n.parent(t++);)if(e instanceof ke){if(e instanceof o)return;if(Bn(e))continue;return p=n.parent(t),e}}()&&l.uses_arguments<(v?2:3)){d instanceof En&&"delete"==d.operator&&(u.deleted||(u.deleted=[]),u.deleted[w]=!0);var _=l.argnames[w];if(u.deleted&&u.deleted[w])_=null;else if(_){var m;_ instanceof ln&&"await"!=_.name&&t.scope.find_variable(_.name)===(m=_.definition())?(n.has_directive("use strict")||l.name||l.rest||!(p instanceof x&&w<p.args.length&&Gn(p.args.slice(0,w+1),function(e){return!(e instanceof Ke)}))||!Gn(l.argnames,function(e){return e instanceof ln}))&&(O()||m.assignments||m.orig.length>1)&&(_=null):_=null}else if((v||!O())&&w<l.argnames.length+5&&n.drop_fargs(l,p)&&!l.rest)for(;w>=l.argnames.length;)_=l.make_var(ln,l,"argument_"+l.argnames.length),l.argnames.push(_);if(_&&Jn(function(e){return e.name===_.name},l.argnames)===_){v&&u.reassigned--;var g=st(_n,_);return g.reference(),_.unused=void 0,g}}if(v)return e;if(n.option("sequences")&&"Call"!=d.TYPE&&!(d instanceof de&&d.init===e)){var b=Pi(e,n);if(b!==e)return b.optimize(n)}if(s!==i){var y=e.flatten_object(c,n);y&&(t=e.expression=y.expression,i=e.property=y.property)}if(n.option("properties")&&n.option("side_effects")&&i instanceof Pe&&t instanceof a&&Gn(h=t.elements,function(e){return!(e instanceof Ke)})){var w=i.value,S=h[w];if(rr(S,n)){for(var k=S instanceof me,T=!k,E=[],D=h.length;--D>w;){var f=h[D].drop_side_effect_free(n);f&&(E.unshift(f),T&&f.has_side_effects(n)&&(T=!1))}for(T||E.unshift(S);--D>=0;){var f=h[D].drop_side_effect_free(n);f?E.unshift(f):k?E.unshift(st(me,h[D])):w--}return T?(E.push(S),ht(e,E).optimize(n)):st(Qe,e,{expression:st(a,t,{elements:E}),property:st(Pe,i,{value:w})})}}return ni(n,e);function O(){return!n.option("reduce_vars")||u.reassigned}}),Ae.DEFMETHOD("contains_super",function(){var e=!1,n=this;return n.walk(new jn(function(t){return!!e||(t instanceof Ze?e=!0:t!==n&&t instanceof Ve&&!Bn(t)||void 0)})),e}),function(e){e(s,ct),e(c,ct),e($e,function(){var e=!1,n=this;return n.walk(new jn(function(t){return!!e||(t instanceof yn?e=!0:t!==n&&t instanceof Ve&&!Bn(t)||void 0)})),e})}(function(e,n){e.DEFMETHOD("contains_this",n)}),Ye.DEFMETHOD("flatten_object",function(e,n){if(n.option("properties")&&"__proto__"!==e){var t=this.expression;if(t instanceof je)for(var i=t.properties,r=i.length;--r>=0;){var o=i[r];if(o.key===e){if(!Gn(i,or))return;if(!rr(o.value,n))return;for(var f,u,l=[],p=0;p<i.length;p++){var h=i[p].value;if(i[p]instanceof Re){var d,v=!(h.uses_arguments||Hn(h)||h.contains_this());if(v){u||(u=n.find_parent(Ve));var _=zi(n,u);h.each_argname(function(e){_[e.name]&&(v=!1)})}if(v)d=Ln(h)?c:s;else{if(!(r!=p||(f=n.parent())instanceof x&&f.expression===this))return;d=h.CTOR}h=st(d,h)}l.push(h)}return st(Qe,this,{expression:st(a,t,{elements:l}),property:st(Pe,this,{value:r})})}}}}),e(te,function(e,n){"arguments"!=e.property&&"caller"!=e.property||$e.warn("Function.prototype.{property} not supported [{start}]",e);var t=n.parent();if(wt(n.self(),t))return e;var i=Fi(e,n);if(i)return i;if(n.option("sequences")&&"Call"!=t.TYPE&&!(t instanceof de&&t.init===e)){var r=Pi(e,n);if(r!==e)return r.optimize(n)}if(n.option("unsafe_proto")&&e.expression instanceof te&&"prototype"==e.expression.property){var o=e.expression.expression;if(Mt(o))switch(o.name){case"Array":e.expression=st(a,e.expression,{elements:[]});break;case"Function":e.expression=st(_e,e.expression,{argnames:[],body:[]}).init_vars(o.scope);break;case"Number":e.expression=st(Pe,e.expression,{value:0});break;case"Object":e.expression=st(je,e.expression,{properties:[]});break;case"RegExp":e.expression=st(Le,e.expression,{value:/t/});break;case"String":e.expression=st(Xe,e.expression,{value:""})}}var s=e.flatten_object(e.property,n);return s?s.optimize(n):ni(n,e)}),e(X,function(e,n){return n.option("rests")&&e.rest instanceof X?st(X,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),e(Q,function(e,n){if(n.option("objects")){var t=e.key;t instanceof $e&&(t=t.evaluate(n))!==e.key&&(e.key=""+t)}return e}),e(je,function(e,n){if(!n.option("objects"))return e;var t=!1,i=!1,r=!1,o=n.has_directive("use strict"),a=[],s=new Kn,f=[];if(e.properties.forEach(function(e){if(!(e instanceof Ke))return l(e);i=!0;var o=e.expression;n.option("spreads")&&o instanceof je&&Gn(o.properties,function(e){return!(e instanceof Me)&&(!(e instanceof Ke)&&("__proto__"!==e.key||(e instanceof Be||!e.value.has_side_effects(n))))})?(t=!0,o.properties.forEach(function(e){var t=e.key,i=e instanceof Be;if("__proto__"===t){if(!i)return;t=yt(t,e)}l(i?st(ze,e,{key:t,value:st(Dn,e).optimize(n)}):e)})):(r=!0,u(),f.push(e))}),u(),!t)return e;if(i&&r&&1==f.length){var c=f[0];c instanceof Ne&&c.key instanceof Pe&&(c.key=""+c.key.value)}return st(je,e,{properties:f});function u(){a.forEach(function(n){var i=s.get(n);switch(i.length){case 0:return;case 1:return f.push(i[0])}t=!0;var a=o&&!r&&i.pop();f.push(1==i.length?i[0]:st(ze,e,{key:i[0].key,value:ht(e,i.map(function(e){return e.value}))})),a&&f.push(a),i.length=0}),a=[],s=new Kn}function l(e){var t=e.key;t instanceof $e&&(i=!0,(t=t.evaluate(n))===e.key||"__proto__"===t?r=!0:t=e.key=""+t),or(e)?(e.value.has_side_effects(n)&&u(),a.push(t),s.add(t,e)):(u(),f.push(e)),i&&!r&&"string"==typeof t&&se.test(t)&&(r=!0,s.has(t)&&(e=s.get(t)[0]),e.key=st(Pe,e,{value:+t}))}}),function(e){function n(e,n,t,i,r,o,a){for(var s=[],f=o.expressions,c=t,u=f.length-(a||0),l=u;--u>=0;c=!0,r=!1){var p=f[u].try_inline(e,n,c,i,r);p&&(h(),s.push(p))}if(0!=s.length)return h(),!t&&s[0]instanceof We&&(s[0]=st(Ue,o,{value:s[0].body})),st(y,o,{body:s.reverse()});function h(){l>u+1&&s.push(st(We,o,{body:ht(o,f.slice(u+1,l))})),l=u}}e($e,rt),e(f,rt),e(v,function(e,n,t,i){if(e.option("awaits")){var r=this,o=r.expression.try_inline(e,n,t,i,!0);if(o)return t||mi(o,function(n){n.in_bool=!1;var t=n.value;t instanceof v||(n.value=st(v,r,{expression:t||st(Dn,n).transform(e)}))}),fi(o)?o:st(y,r,{body:[o,st(We,r,{body:st(v,r,{expression:st(Pe,r,{value:0})})})]})}}),e(m,function(e,n,t,i,r){if(void 0!==t){var o=this,a=o.operator;if(Wt[a]){var s=o.right.try_inline(e,n,t,i,r);if(s)return st(ge,o,{condition:function(n){switch(a){case"&&":return n;case"||":return n.negate(e);case"??":return st(m,o,{operator:"==",left:st(Fe,o),right:n})}}(o.left),body:s,alternative:t?null:st(Ue,o,{value:st(Dn,o).transform(e)})})}}}),e(y,function(e,n,t,i){if(!t&&this.variables){var r=this.body,o=r.length-1;if(!(o<0)){var a=r[o].try_inline(e,this,t,i);if(a)return r[o]=a,this}}}),e(x,function(e,n,t,i,r){if(!(e.option("inline")<4)){var o=this;if(!o.is_expr_pure(e)){var s=o.expression;if(s instanceof Ae&&!(s.name||s.uses_arguments||s.pinned()||Hn(s))){var f=Bn(s);if(!(f&&s.value||s.body[0]instanceof ee||s.contains_this())){n||(n=Xn(e));var c=new Kn;for(c.set("NaN",!0);!(n instanceof Ve);)n.variables.each(function(e){c.set(e.name,!0)}),n=n.parent_scope;if(it(n,e.stack)&&!(n.pinned()&&s.variables.size()>(f?0:1))){if(n instanceof Sn){if(s.variables.size()>(f?0:1)){if(!e.toplevel.vars)return;if(s.functions.size()>0&&!e.toplevel.funcs)return}c.set("arguments",!0)}var u=!r&&Ln(s);if(u){if(!e.option("awaits"))return;if(!Ln(n))return;if(o.may_throw(e))return}var l=n.var_names();if(i&&(i=[]),s.variables.all(function(e,n){return i&&i.push(e),!c.has(n)&&!l.has(n)||!f&&"arguments"==n&&1==e.orig.length})&&!(i&&i.length>0&&nr(s,i))){var p=!0;if(Gn(s.argnames,function(e){var n=!1,t=new jn(function(e){return!!n||(e instanceof U?sr(s,e.value)?n=!0:(e.name.walk(t),!0):e instanceof Q?e.key instanceof $e&&sr(s,e.key)?n=!0:(e.value.walk(t),!0):e instanceof ln&&!Gn(e.definition().orig,function(e){return!(e instanceof cn)})?n=!0:void 0)});return e.walk(t),!n&&(e instanceof ln||(p=!1),!0)})){if(s.rest){if(sr(s,s.rest))return;p=!1}var h;if(t?h=function(e){var n=!1;return e.walk(new jn(function(e){return!!n||(u&&(e instanceof v||e instanceof AST_ForAwaitOf)||e instanceof Ue?n=!0:e instanceof Ve||void 0)})),!n}:(r||Ln(s)||Wn(n))&&(h=function(e){var n=!1,t=new jn(function(e){return!!n||(e instanceof Ue?n=!0:e instanceof Ve||void 0)});return e.walk(new jn(function(e){return!!n||(e instanceof kn?(e.bfinally&&Gn(e.body,function(e){return e.walk(t),!n})&&e.bcatch&&e.bcatch.walk(t),!0):e instanceof Ve||void 0)})),!n}),(!h||Gn(s.body,h))&&Mi(s,zi(e,n))){s.functions.each(function(e,t){n.functions.set(t,e)});var d=[];s.variables.each(function(t,r){if((f||"arguments"!=r||1!=t.orig.length)&&(l.set(r,!0),n.enclosed.push(t),n.variables.set(r,t),t.single_use=!1,i&&t.references.length!=t.replaced&&t.orig.length!=t.eliminated&&(1!=t.orig.length||!s.functions.has(r))&&Gn(t.orig,function(e){return!(e instanceof sn)&&(e instanceof ln?!e.unused&&t.scope.resolve()!==s:!(e instanceof dn))}))){var o=t.orig[0];o instanceof rn||d.push(st(We,o,{body:cr(e,ar(o))}))}});var _=Object.create(null),m=new Kn;if(p&&Gn(o.args,function(e){return!(e instanceof Ke)})){var g=o.args.slice();s.argnames.forEach(function(n){var t=g.shift();if(n.unused)t&&d.push(st(We,o,{body:t}));else{var i=st(qn,o,{name:n.convert_symbol(mn,w),value:t||st(Dn,o).transform(e)});n instanceof ln&&fr(n.definition(),i),d.push(st(On,o,{definitions:[i]}))}}),g.length&&d.push(st(We,o,{body:ht(o,g)}))}else d.push(st(On,o,{definitions:[st(qn,o,{name:st(X,o,{elements:s.argnames.map(function(e){return e.unused?st(me,e):e.convert_symbol(mn,w)}),rest:s.rest&&s.rest.convert_symbol(mn,w)}),value:st(a,o,{elements:o.args.slice()})})]}));m.each(function(e,n){var t=_[n];[].unshift.apply(t.orig,e),t.eliminated+=e.length}),[].push.apply(d,i?s.body.filter(function(e){if(!(e instanceof Te))return!0;var n=st(mn,ar(e.name)),t=n.definition();return t.fixed=!1,t.orig.push(n),t.eliminated++,d.push(st(On,e,{definitions:[st(qn,e,{name:n,value:_i(e,!0)})]})),!1}):s.body);var b=st(y,o,{body:d});return t||(u&&mi(b,function(e){var n=e.value;Gt(n)||(e.value=st(v,o,{expression:n}))}),d.push(st(Ue,o,{value:Wn(n)?st(Dn,o).transform(e):null}))),b}}}}}}}}function w(e,n){var t=n.definition();_[t.id]=t,m.add(t.id,e)}}),e(N,function(e,n,t,i,r){var o=this.consequent.try_inline(e,n,t,i,r),a=this.alternative.try_inline(e,n,t,i,r);if(o||a)return st(ge,this,{condition:this.condition,body:o||s(this.consequent),alternative:a||s(this.alternative)});function s(e){return t?st(We,e,{body:e}):st(Ue,e,{value:e})}}),e(he,function(e,n,t,i){var r=this.body.try_inline(e,n,!0,!0);r&&(this.body=r);var o=this.init;return o&&(o=o.try_inline(e,n,!0,i))?(this.init=null,o instanceof y?(o.body.push(this),o):st(y,o,{body:[o,this]})):r&&this}),e(de,function(e,t,i,r){var o=this.body.try_inline(e,t,!0,!0);o&&(this.body=o);var a=this.object;if(a instanceof Ge){var s=n(e,t,!0,r,!1,a,1);if(s)return this.object=a.tail_node(),s.body.push(this),s}return o&&this}),e(ge,function(e,t,i,r){var o=this.body.try_inline(e,t,i,r);o&&(this.body=o);var a=this.alternative;a&&(a=a.try_inline(e,t,i,r))&&(this.alternative=a);var s=this.condition;if(s instanceof Ge){var f=n(e,t,!0,r,!1,s,1);if(f)return this.condition=s.tail_node(),f.body.push(this),f}return(o||a)&&this}),e(we,function(e,n,t,i){var r=this.body.try_inline(e,n,!0,!0);if(r)return this.body=r,this}),e(xe,function(e,n,t,i){var r=this.body.try_inline(e,n,t,i);if(r){if(this.body instanceof we&&r instanceof y){var o=r.body.pop();return this.body=o,r.body.push(this),r}return this.body=r,this}}),e(qe,rt),e(Ue,function(e,n,t,i){var r=this.value;return r&&r.try_inline(e,n,void 0,"try"===i)}),e(Ge,function(e,t,i,r,o){return n(e,t,i,r,o,this)}),e(We,function(e,n,t,i){for(var r=this.body;r instanceof En;){var o=r.operator;if(xt[o])break;if("void"==o)break;r=r.expression}return t||Gt(r)||(r=st(En,this,{operator:"void",expression:r})),r.try_inline(e,n,t||!1,i)}),e(En,function(e,n,t,i,r){var o=this,a=o.operator;if(!xt[a]){t||"void"!=a||(t=!1);var s=o.expression.try_inline(e,n,t,i,r);if(s)return t||mi(s,function(n){n.in_bool=!1;var t=n.value;"void"==a&&Gt(t)||(n.value=st(En,o,{operator:a,expression:t||st(Dn,n).transform(e)}))}),s}}),e($n,function(e,t,i,r){var o=this.body.try_inline(e,t,i,r);o&&(this.body=o);var a=this.expression;if(a instanceof Ge){var s=n(e,t,!0,r,!1,a,1);if(s)return this.expression=a.tail_node(),s.body.push(this),s}return o&&this}),e(Fn,function(e,n,t,i){if(e.option("yields")&&this.nested){var r=this.expression;if("Call"==r.TYPE){var o=r.expression;switch(o.CTOR){case h:o=st(l,o);break;case AST_GeneratorFunction:o=st(_e,o);break;default:return}return(r=r.clone()).expression=o,r.try_inline(e,n,t,i)}}})}(function(e,n){e.DEFMETHOD("try_inline",n)}),e(Ue,function(e,n){var t=e.value;return t&&n.option("side_effects")&&Gt(t,n)&&!Wn(n.find_parent(Ve))&&(e.value=null),e})}(function(e,n){e.DEFMETHOD("optimize",function(e){if(this._optimized)return this;if(e.has_directive("use asm"))return this;var t=n(this,e);return t._optimized=!0,t})}),{Compressor:kt}}),e("skylark-uglifyjs/sourcemap",["./utils"],function(e){"use strict";const{characters:n,HOP:t,Dictionary:i}=e;var r=n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o=r.reduce(function(e,n,t){return e[n]=t,e},Object.create(null));function a(e){var n="";e=Math.abs(e)<<1|e>>>31;do{var t=31&e;(e>>>=5)&&(t|=32),n+=r[t]}while(e);return n}function s(){var e=new i,n=[];return n.index=function(t){var i=e.get(t);return i>=0||(i=n.length,n.push(t),e.set(t,i)),i},n}return{SourceMap:function(e){var n,t=s(),r=e.includeSources&&new i,f=s(),c="";e.orig&&Object.keys(e.orig).forEach(function(n){var t=e.orig[n],i=[0,0,1,0,0];if(e.orig[n]={names:t.names,mappings:t.mappings.split(/;/).map(function(e){return i[0]=0,e.split(/,/).map(function(e){return i.slice(0,function(e,n){for(var t=0,i=0,r=0,a=0;r<n.length;r++){var s=o[n[r]];t+=(31&s)<<i,32&s?i+=5:(e[a++]+=1&t?2147483648|-(t>>1):t>>1,t=i=0)}return a}(i,e))})}),sources:t.sources},r&&t.sourcesContent)for(var a=0;a<t.sources.length;a++){var s=t.sourcesContent[a];s&&r.set(t.sources[a],s)}});var u=1,l=0,p=0,h=1,d=0,v=0;return{add:e.orig?function(n,t,i,r,o,a){var s=e.orig[n];if(s){var f,c=s.mappings[r-1];if(!c)return;for(var u=0;u<c.length;u++){var l=c[u][0];if(o>=l&&(f=c[u]),o<=l)break}!f||f.length<4?n=null:(n=s.sources[f[1]],r=f[2],o=f[3],f.length>4&&(a=s.names[f[4]]))}_(n,t,i,r,o,a)}:_,setSourceContent:r?function(e,n){r.has(e)||r.set(e,n)}:noop,toString:function(){return JSON.stringify({version:3,file:e.filename||void 0,sourceRoot:e.root||void 0,sources:t,sourcesContent:r?t.map(function(e){return r.get(e)||null}):void 0,names:f,mappings:c})}};function _(i,r,o,s,_,m){if(null!=n||null!=i){if(n=i,u<r){l=0;do{c+=";"}while(++u<r)}else c&&(c+=",");if(c+=a(o-l),l=o,null!=i){var g=t.index(i);if(c+=a(g-p),p=g,c+=a(s-h),h=s,c+=a(_-d),d=_,e.names&&null!=m){var b=f.index(m);c+=a(b-v),v=b}}}}}}}),e("skylark-uglifyjs/propmangle",["./utils","./ast","./scope"],function(e,n,t){"use strict";const{defaults:i,push_uniq:r,Dictionary:o}=e,{base54:a}=t,{AST_Binary:s,AST_Call:f,AST_ClassPrivateProperty:c,AST_Conditional:u,AST_Dot:l,AST_DotHash:p,AST_ObjectKeyVal:h,AST_ObjectProperty:d,AST_PrivateMethod:v,AST_PrivateGetter:_,AST_PrivateSetter:m,AST_PrivateIn:g,AST_Sequence:b,AST_String:y,AST_Sub:w,TreeWalker:S,_KEY:x,_MANGLEPROP:k,walk:T}=n;function A(){var e=new o;["NaN","null","true","false","Infinity","-Infinity","undefined"].forEach(t),["encodeURI","encodeURIComponent","escape","eval","decodeURI","decodeURIComponent","isFinite","isNaN","parseFloat","parseInt","unescape"].forEach(t);var n=Function("return this")();return["Array","ArrayBuffer","Atomics","BigInt","Boolean","console","DataView","Date","Error","Function","Int8Array","Intl","JSON","Map","Math","Number","Object","Promise","Proxy","Reflect","RegExp","Set","String","Symbol","WebAssembly"].forEach(function(e){t(e);var i=n[e];if(i&&(Object.getOwnPropertyNames(i).map(t),"function"==typeof i)){i.__proto__&&Object.getOwnPropertyNames(i.__proto__).map(t),i.prototype&&Object.getOwnPropertyNames(i.prototype).map(t);try{Object.getOwnPropertyNames(new i).map(t)}catch(e){try{Object.getOwnPropertyNames(i()).map(t)}catch(e){}}}}),(A=function(){return e.clone()})();function t(n){e.set(n,!0)}}function E(e,n){e instanceof u?(E(e.consequent,n),E(e.alternative,n)):e instanceof b?E(e.tail_node(),n):e instanceof y&&n(e.value)}return{mangle_properties:function(e,n){var t=(n=i(n,{builtins:!1,cache:null,debug:!1,domprops:!1,keep_quoted:!1,regex:null,reserved:null},!0)).builtins?new o:A();n.domprops||"undefined"==typeof domprops||domprops.forEach(function(e){t.set(e,!0)});Array.isArray(n.reserved)&&n.reserved.forEach(function(e){t.set(e,!0)});var r,f=-1;n.cache?(r=n.cache.props).each(function(e){t.set(e,!0)}):r=new o;var c,p=n.regex,h=!1!==n.debug;h&&(c=!0===n.debug?"":n.debug);var v=new o,_=t.clone();function m(e){return!_.has(e)&&!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(e)}function g(e){return t.has(e)?(AST_Node.info("Preserving reserved property {this}",e),!1):p&&!p.test(e)?(AST_Node.info("Preserving excluded property {this}",e),!1):r.has(e)||v.has(e)}function x(e){m(e)&&v.set(e,!0),g(e)||_.set(e,!0)}function k(e){if(!g(e))return e;var n=r.get(e);if(!n){if(h){var t="_$"+e+"$"+c+"_";m(t)&&(n=t)}if(!n)do{n=a(++f)}while(!m(n));/^#/.test(e)&&(n="#"+n),r.set(e,n)}return AST_Node.info("Mapping property {name} to {mangled}",{mangled:n,name:e}),n}function T(e){e instanceof b?T(e.tail_node()):e instanceof y?e.value=k(e.value):e instanceof u&&(T(e.consequent),T(e.alternative))}e.walk(new S(function(e){if("Call"==e.TYPE){var n=e.expression;if(n instanceof l)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((n=n.expression)instanceof AST_SymbolRef))break;if("Object"!=n.name)break;if(!n.definition().undeclared)break;E(e.args[1],x);break;case"hasOwnProperty":if(e.args.length<1)break;E(e.args[0],x)}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?E(e.key,x):x(e.key):e instanceof l?is_lhs(e,this.parent())&&x(e.property):e instanceof w&&is_lhs(e,this.parent())&&E(e.property,x)})),e.walk(new S(function(e){if(e instanceof s)"in"==e.operator&&T(e.left);else if("Call"==e.TYPE){var t=e.expression;if(t instanceof l)switch(t.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((t=t.expression)instanceof AST_SymbolRef))break;if("Object"!=t.name)break;if(!t.definition().undeclared)break;T(e.args[1]);break;case"hasOwnProperty":if(e.args.length<1)break;T(e.args[0])}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?T(e.key):e.key=k(e.key):e instanceof l?e.property=k(e.property):e instanceof w&&(n.keep_quoted||T(e.property))}))},reserve_quoted_keys:function(e,n){function t(e){r(n,e)}e.walk(new S(function(e){e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?E(e.key,t):e.start&&e.start.quote&&t(e.key):e instanceof l?e.quoted&&t(e.property):e instanceof w&&E(e.property,t)}))}}}),e("skylark-uglifyjs/minify",["./utils","./ast","./parse","./output","./compress","./sourcemap","./propmangle"],function(e,n,t,i,r,o,a){"use strict";const{defaults:s,HOP:f}=e,{AST_Toplevel:c,AST_Node:u,walk:l,AST_Scope:p}=n,{parse:h}=t,{OutputStream:d}=i,{Compressor:v}=r,{SourceMap:_}=o,{mangle_properties:m,reserve_quoted_keys:g}=a;var b,y;function w(e,n){for(var t=n.end.comments_after,i=t.length;--i>=0;){var r=t[i];if("comment1"!=r.type)break;var o=/^# ([^\s=]+)=(\S+)\s*$/.exec(r.value);if(!o)break;if("sourceMappingURL"==o[1]){if(!(o=/^data:application\/json(;.*?)?;base64,([^,]+)$/.exec(o[2])))break;return b(o[2])}}u.warn("inline source map not found: {name}",{name:e})}function S(e){try{return JSON.parse(e)}catch(n){throw new Error("invalid input source map: "+e)}}function x(e,n,t){t.forEach(function(t){n[t]&&("object"!=typeof n[t]&&(n[t]={}),e in n[t]||(n[t][e]=n[e]))})}function k(e){e&&("props"in e?e.props instanceof Dictionary||(e.props=Dictionary.fromObject(e.props)):e.props=new Dictionary)}function T(e){return{props:e.props.toObject()}}return"undefined"==typeof Buffer?(b=atob,y=btoa):void 0===Buffer.alloc?(b=function(e){return new Buffer(e,"base64").toString()},y=function(e){return new Buffer(e).toString("base64")}):(b=function(e){return Buffer.from(e,"base64").toString()},y=function(e){return Buffer.from(e).toString("base64")}),{minify:function(e,n){try{(n=s(n,{annotations:void 0,compress:{},enclose:!1,expression:!1,ie:!1,ie8:!1,keep_fargs:!1,keep_fnames:!1,mangle:{},module:!1,nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:!(!n||!n.module),v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0)).validate&&u.enable_validation();var t,i=n.timings&&{start:Date.now()};void 0!==n.annotations&&x("annotations",n,["compress","output"]),n.expression&&x("expression",n,["compress","parse"]),n.ie8&&(n.ie=n.ie||n.ie8),n.ie&&x("ie",n,["compress","mangle","output","rename"]),n.keep_fargs&&x("keep_fargs",n,["compress","mangle","rename"]),n.keep_fnames&&x("keep_fnames",n,["compress","mangle","rename"]),n.module&&x("module",n,["compress","parse"]),n.toplevel&&x("toplevel",n,["compress","mangle","rename"]),n.v8&&x("v8",n,["mangle","output","rename"]),n.webkit&&x("webkit",n,["compress","mangle","output","rename"]),n.mangle&&(n.mangle=s(n.mangle,{cache:n.nameCache&&(n.nameCache.vars||{}),eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),n.mangle.properties&&("object"!=typeof n.mangle.properties&&(n.mangle.properties={}),n.mangle.properties.keep_quoted&&(t=n.mangle.properties.reserved,Array.isArray(t)||(t=[]),n.mangle.properties.reserved=t),!n.nameCache||"cache"in n.mangle.properties||(n.mangle.properties.cache=n.nameCache.props||{})),k(n.mangle.cache),k(n.mangle.properties.cache)),void 0===n.rename&&(n.rename=n.compress&&n.mangle),n.sourceMap&&(n.sourceMap=s(n.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0));var r,o=[];if(n.warnings&&u.log_function(function(e){o.push(e)},"verbose"==n.warnings),i&&(i.parse=Date.now()),n.parse=n.parse||{},e instanceof u)r=e;else{"string"==typeof e&&(e=[e]),n.parse.toplevel=null;var a=n.sourceMap&&n.sourceMap.content;for(var l in"string"==typeof a&&"inline"!=a&&(a=S(a)),a&&(n.sourceMap.orig=Object.create(null)),e)if(f(e,l))if(n.parse.filename=l,n.parse.toplevel=r=h(e[l],n.parse),"inline"==a){var p=w(l,r);p&&(n.sourceMap.orig[l]=S(p))}else a&&(n.sourceMap.orig[l]=a)}n.parse.expression&&(r=r.wrap_expression()),t&&g(r,t),["enclose","wrap"].forEach(function(t){var i=n[t];if(i){var o=r.print_to_string().slice(0,-1);r=r[t](i),e[r.start.file]=r.print_to_string().replace(o,"")}}),n.validate&&r.validate_ast(),i&&(i.rename=Date.now()),n.rename&&(r.figure_out_scope(n.rename),r.expand_names(n.rename)),i&&(i.compress=Date.now()),n.compress&&(r=new v(n.compress).compress(r),n.validate&&r.validate_ast()),i&&(i.scope=Date.now()),n.mangle&&r.figure_out_scope(n.mangle),i&&(i.mangle=Date.now()),n.mangle&&(r.compute_char_frequency(n.mangle),r.mangle_names(n.mangle)),i&&(i.properties=Date.now()),t&&g(r,t),n.mangle&&n.mangle.properties&&m(r,n.mangle.properties),n.parse.expression&&(r=r.unwrap_expression()),i&&(i.output=Date.now());var b={},A=s(n.output,{ast:!1,code:!0});if(A.ast&&(b.ast=r),A.code){if(n.sourceMap&&(A.source_map=_(n.sourceMap),n.sourceMap.includeSources)){if(e instanceof c)throw new Error("original source content unavailable");for(var l in e)f(e,l)&&A.source_map.setSourceContent(l,e[l])}delete A.ast,delete A.code;var E=d(A);if(r.print(E),b.code=E.get(),n.sourceMap){b.map=A.source_map.toString();var D=n.sourceMap.url;D&&(b.code=b.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),b.code+="inline"==D?"\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+y(b.map):"\n//# sourceMappingURL="+D)}}return n.nameCache&&n.mangle&&(n.mangle.cache&&(n.nameCache.vars=T(n.mangle.cache)),n.mangle.properties&&n.mangle.properties.cache&&(n.nameCache.props=T(n.mangle.properties.cache))),i&&(i.end=Date.now(),b.timings={parse:.001*(i.rename-i.parse),rename:.001*(i.compress-i.rename),compress:.001*(i.scope-i.compress),scope:.001*(i.mangle-i.scope),mangle:.001*(i.properties-i.mangle),properties:.001*(i.output-i.properties),output:.001*(i.end-i.output),total:.001*(i.end-i.start)}),o.length&&(b.warnings=o),b}finally{u.log_function(),u.disable_validation()}}}}),e("skylark-uglifyjs/main",["./minify"],function(e){return e}),e("skylark-uglifyjs",["skylark-uglifyjs/main"],function(e){return e})}(t),!i){var a=require("skylark-langx-ns");r?module.exports=a:n.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-uglifyjs-all.js.map
