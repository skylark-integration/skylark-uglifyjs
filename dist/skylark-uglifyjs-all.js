/**
 * skylark-uglifyjs - A version of uglifyjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,n){var t=n.define,require=n.require,i="function"==typeof t&&t.amd,r=!i&&"undefined"!=typeof exports;if(!i&&!t){var o={};t=n.define=function(e,n,t){"function"==typeof t?(o[e]={factory:t,deps:n.map(function(n){return function(e,n){if("."!==e[0])return e;var t=n.split("/"),i=e.split("/");t.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?t.pop():t.push(i[r]));return t.join("/")}(n,e)}),resolved:!1,exports:null},require(e)):o[e]={factory:null,resolved:!0,exports:t}},require=n.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=o[e];if(!module.resolved){var t=[];module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(n,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-uglifyjs/utils",[],function(){"use strict";function e(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(e){return e.stack}}})}function n(e,n){this.message=e,this.defs=n}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.name="DefaultsError",e(n);var t=function(){function e(e,i){for(var r=[],o=0;o<e.length;o++){var a=i(e[o],o);a!==n&&(a instanceof t?r.push.apply(r,a.v):r.push(a))}return r}e.is_op=function(e){return e===n||e instanceof t},e.splice=function(e){return new t(e)};var n=e.skip={};function t(e){this.v=e}return e}();function i(){this.values=Object.create(null)}function r(e,n){return Object.prototype.hasOwnProperty.call(e,n)}return i.prototype={set:function(e,n){return"__proto__"==e?this.proto_value=n:this.values[e]=n,this},add:function(e,n){var t=this.get(e);return t?t.push(n):this.set(e,[n]),this},get:function(e){return"__proto__"==e?this.proto_value:this.values[e]},del:function(e){return"__proto__"==e?delete this.proto_value:delete this.values[e],this},has:function(e){return"__proto__"==e?"proto_value"in this:e in this.values},all:function(e){for(var n in this.values)if(!e(this.values[n],n))return!1;return!("proto_value"in this&&!e(this.proto_value,"__proto__"))},each:function(e){for(var n in this.values)e(this.values[n],n);"proto_value"in this&&e(this.proto_value,"__proto__")},size:function(){return Object.keys(this.values).length+("proto_value"in this)},map:function(e){var n=[];for(var t in this.values)n.push(e(this.values[t],t));return"proto_value"in this&&n.push(e(this.proto_value,"__proto__")),n},clone:function(){var e=new i;return this.each(function(n,t){e.set(t,n)}),e},toObject:function(){var e={};return this.each(function(n,t){e["$"+t]=n}),e}},i.fromObject=function(e){var n=new i;for(var t in e)r(e,t)&&n.set(t.slice(1),e[t]);return n},{characters:function(e){return e.split("")},member:function(e,n){return n.indexOf(e)>=0},find_if:function(e,n){for(var t=n.length;--t>=0;)if(e(n[t]))return n[t]},configure_error_stack:e,defaults:function(e,t,i){if(i)for(var o in e)if(r(e,o)&&!r(t,o))throw new n("`"+o+"` is not a supported option",t);for(var o in e)r(e,o)&&(t[o]=e[o]);return t},DefaultsError:n,noop:function(){},return_false:function(){return!1},return_true:function(){return!0},return_this:function(){return this},return_null:function(){return null},List:t,push_uniq:function(e,n){if(e.indexOf(n)<0)return e.push(n)},string_template:function(e,n){return e.replace(/\{([^{}]+)\}/g,function(e,t){var i="this"==t?n:n[t];return i instanceof AST_Node?i.print_to_string():i instanceof AST_Token?i.file+":"+i.line+","+i.col:i})},remove:function(e,n){var t=e.indexOf(n);t>=0&&e.splice(t,1)},makePredicate:function(e){Array.isArray(e)||(e=e.split(" "));var n=Object.create(null);return e.forEach(function(e){n[e]=!0}),n},all:function(e,n){for(var t=e.length;--t>=0;)if(!n(e[t],t))return!1;return!0},Dictionary:i,HOP:r,DEF_BITPROPS:function(e,n){if(n.length>31)throw new Error("Too many properties: "+n.length+"\n"+n.join(", "));n.forEach(function(n,t){var i=1<<t;Object.defineProperty(e.prototype,n,{get:function(){return!!(this._bits&i)},set:function(e){e?this._bits|=i:this._bits&=~i}})})}}}),e("skylark-uglifyjs/ast",["./utils"],function(e){"use strict";const{HOP:n,List:t,MAP:i,noop:r,DEF_BITPROPS:o,return_true:a,return_this:s}=e;var f;function c(e,t,i,r){void 0===r&&(r=l);var o=t=t?t.split(/\s+/):[];r&&r.PROPS&&(t=t.concat(r.PROPS));var a=["return function AST_",e,"(props){","this._bits=0;","if(props){"];t.forEach(function(e){a.push("this.",e,"=props.",e,";")}),a.push("}");var s=Object.create(r&&r.prototype);(i.initialize||s.initialize)&&a.push("this.initialize();"),a.push("};");var f=new Function(a.join(""))();for(var c in f.prototype=s,f.prototype.CTOR=f,f.prototype.TYPE=f.TYPE=e,r&&(f.BASE=r,r.SUBCLASSES.push(f)),f.DEFMETHOD=function(e,n){this.prototype[e]=n},f.PROPS=t,f.SELF_PROPS=o,f.SUBCLASSES=[],i)n(i,c)&&(/^\$/.test(c)?f[c.substr(1)]=i[c]:f.DEFMETHOD(c,i[c]));return"undefined"!=typeof exports&&(exports["AST_"+e]=f),f}var u=c("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),l=c("Node","start end",{_clone:function(e){if(e){var n=this.clone();return n.transform(new Kn(function(e){if(e!==n)return e.clone(!0)}))}return new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},equals:function(e){return this.TYPE==e.TYPE&&this._equals(e)},walk:function(e){e.visit(this)},_validate:function(){if("Node"==this.TYPE)throw new Error("should not instantiate AST_Node")},validate:function(){var e=this.CTOR;do{e.prototype._validate.call(this)}while(e=e.BASE)},validate_ast:function(){var e={};this.walk(new Wn(function(n){if(n.validate_visited===e)throw new Error(string_template("cannot reuse AST_{TYPE} from [{start}]",n));n.validate_visited=e}))}},null);o(l,["_optimized","_squeezed","call_only","collapse_scanning","defined","evaluating","falsy","in_arg","in_bool","is_undefined","inlined","length_read","nested","new","optional","private","pure","redundant","single_use","static","terminal","truthy","uses_eval","uses_with"]),(l.log_function=function(e,n){if("function"==typeof e){var t=Object.create(null);l.info=n?function(e,n){i("INFO: "+string_template(e,n))}:r,l.warn=function(e,n){i("WARN: "+string_template(e,n))}}else l.info=l.warn=r;function i(n){t[n]||(t[n]=!0,e(n))}})();var p=[];function h(e,n){return e.length==n.length&&all(e,function(e,t){return e.equals(n[t])})}function d(e,n){return e===n||(null==e?null==n:e instanceof l&&n instanceof l&&e.equals(n))}l.enable_validation=function(){l.disable_validation(),function e(i){if(i.SUBCLASSES.forEach(e),n(i.prototype,"transform")){var r=i.prototype.transform;i.prototype.transform=function(e,n){var i=r.call(this,e,n);if(i instanceof l)i.validate();else if(!(null===i||n&&t.is_op(i)))throw new Error("invalid transformed value: "+i);return i},p.push(function(){i.prototype.transform=r})}}(this)},l.disable_validation=function(){for(var e;e=p.pop();)e()};var _=c("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if("Statement"==this.TYPE)throw new Error("should not instantiate AST_Statement")}}),v=c("Debugger",null,{$documentation:"Represents a debugger statement",_equals:a},_),m=c("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_equals:function(e){return this.value==e.value},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},_),g=c("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_equals:a},_);function b(e){return e instanceof _&&!(e instanceof oe)&&!(e instanceof L)}function y(e,n,t,i,r){if(t=t?"contain":"be",!(e instanceof l))throw new Error(n+" must "+t+" AST_Node");if(e instanceof Me)throw new Error(n+" cannot "+t+" AST_DefaultValue");if(e instanceof nn)throw new Error(n+" cannot "+t+" AST_Destructured");if(e instanceof Yn&&!r)throw new Error(n+" cannot "+t+" AST_Hole");if(e instanceof Ue&&!i)throw new Error(n+" cannot "+t+" AST_Spread");if(b(e))throw new Error(n+" cannot "+t+" AST_Statement");if(e instanceof dn)throw new Error(n+" cannot "+t+" AST_SymbolDeclaration")}function w(e,n){y(e[n],n)}var S=c("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){w(this,"body")}},_),x=c("BlockScope","_var_names enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any inner scopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---\x3e SymbolDef for all variables/functions defined in this scope"},clone:function(e){var n=this._clone(e);return this.enclosed&&(n.enclosed=this.enclosed.slice()),this.functions&&(n.functions=this.functions.clone()),this.variables&&(n.variables=this.variables.clone()),n},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if("BlockScope"==this.TYPE)throw new Error("should not instantiate AST_BlockScope");if(null!=this.parent_scope){if(!(this.parent_scope instanceof x))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof I))throw new Error("must be contained within AST_Scope")}}},_);function T(e,n){e.body.forEach(function(e){e.walk(n)})}var k=c("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},_equals:function(e){return h(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){T(n,e)})},_validate:function(){if("Block"==this.TYPE)throw new Error("should not instantiate AST_Block");this.body.forEach(function(e){if(!b(e))throw new Error("body must contain AST_Statement")})}},x),A=c("BlockStatement",null,{$documentation:"A block statement"},k),E=c("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if("StatementWithBody"==this.TYPE)throw new Error("should not instantiate AST_StatementWithBody");if(!b(this.body))throw new Error("body must be AST_Statement")}},x),D=c("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_equals:function(e){return this.label.equals(e.label)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.label.walk(e),n.body.walk(e)})},clone:function(e){var n=this._clone(e);if(e){var t=n.label,i=this.label;n.walk(new Wn(function(e){if(e instanceof ve){if(!e.label||e.label.thedef!==i)return;return e.label.thedef=t,t.references.push(e),!0}if(e instanceof I)return!0}))}return n},_validate:function(){if(!(this.label instanceof kn))throw new Error("label must be AST_Label")}},E),O=c("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if("IterationStatement"==this.TYPE)throw new Error("should not instantiate AST_IterationStatement")}},E),q=c("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)},_validate:function(){if("DWLoop"==this.TYPE)throw new Error("should not instantiate AST_DWLoop");w(this,"condition")}},O),C=c("Do",null,{$documentation:"A `do` statement",walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e),n.condition.walk(e)})}},q),F=c("While",null,{$documentation:"A `while` statement",walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e)})}},q),$=c("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_equals:function(e){return d(this.init,e.init)&&d(this.condition,e.condition)&&d(this.step,e.step)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.init&&n.init.walk(e),n.condition&&n.condition.walk(e),n.step&&n.step.walk(e),n.body.walk(e)})},_validate:function(){if(null!=this.init){if(!(this.init instanceof l))throw new Error("init must be AST_Node");if(b(this.init)&&!(this.init instanceof Ee))throw new Error("init cannot be AST_Statement")}null!=this.condition&&w(this,"condition"),null!=this.step&&w(this,"step")}},O),P=c("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},_equals:function(e){return this.init.equals(e.init)&&this.object.equals(e.object)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.init.walk(e),n.object.walk(e),n.body.walk(e)})},_validate:function(){if("ForEnumeration"==this.TYPE)throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof Ee){if(1!=this.init.definitions.length)throw new Error("init must have single declaration")}else tn(this.init,function(e){if(!(e instanceof He||e instanceof An))throw new Error("init must be assignable: "+e.TYPE)});w(this,"object")}},O),j=c("ForIn",null,{$documentation:"A `for ... in` statement"},P),z=c("ForOf",null,{$documentation:"A `for ... of` statement"},P),M=c("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},z),N=c("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_equals:function(e){return this.expression.equals(e.expression)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.body.walk(e)})},_validate:function(){w(this,"expression")}},E),I=c("Scope","fn_defs may_call_this uses_eval uses_with",{$documentation:"Base class for all statements introducing a lambda scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:s,_validate:function(){if("Scope"==this.TYPE)throw new Error("should not instantiate AST_Scope")}},k),R=c("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---\x3e SymbolDef for all undeclared names"},wrap:function(e){var n=this.body;return f.parse(["(function(exports){'$ORIG';})(typeof ",e,"=='undefined'?(",e,"={}):",e,");"].join(""),{filename:"wrap="+JSON.stringify(e)}).transform(new Kn(function(e){if(e instanceof m&&"$ORIG"==e.value)return t.splice(n)}))},enclose:function(e){"string"!=typeof e&&(e="");var n=e.indexOf(":");n<0&&(n=e.length);var i=this.body;return f.parse(["(function(",e.slice(0,n),'){"$ORIG"})(',e.slice(n+1),")"].join(""),{filename:"enclose="+JSON.stringify(e)}).transform(new Kn(function(e){if(e instanceof m&&"$ORIG"==e.value)return t.splice(i)}))}},I),B=c("ClassInitBlock",null,{$documentation:"Value for `class` static initialization blocks"},I),H=c("Lambda","argnames length_read rest safe_ids uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean|number/S] whether this function accesses the arguments array"},each_argname:function(e){var n=new Wn(function(t){return t instanceof Me?(t.name.walk(n),!0):t instanceof on?(t.value.walk(n),!0):void(t instanceof bn&&e(t))});this.argnames.forEach(function(e){e.walk(n)}),this.rest&&this.rest.walk(n)},_equals:function(e){return d(this.rest,e.rest)&&d(this.name,e.name)&&d(this.value,e.value)&&h(this.argnames,e.argnames)&&h(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.name&&n.name.walk(e),n.argnames.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e),T(n,e)})},_validate:function(){if("Lambda"==this.TYPE)throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(e){tn(e,function(e){if(!(e instanceof bn))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),null!=this.rest&&tn(this.rest,function(e){if(!(e instanceof bn))throw new Error("rest must be AST_SymbolFunarg")})}},I),Y=c("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(null!=this.name)throw new Error("name must be null")}},H),L=c("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if("LambdaExpression"==this.TYPE)throw new Error("should not instantiate AST_LambdaExpression")}},H);function U(e){return e instanceof G||e instanceof V}var G=c("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(e){var n=this;e.visit(n,function(){n.argnames.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e),n.value?n.value.walk(e):T(n,e)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(w(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},L),V=c("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(e){var n=this;e.visit(n,function(){n.argnames.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e),n.value?n.value.walk(e):T(n,e)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(w(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},L),W=c("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof wn))throw new Error("name must be AST_SymbolLambda")}},L),K=c("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof wn))throw new Error("name must be AST_SymbolLambda")}},L),J=c("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof wn))throw new Error("name must be AST_SymbolLambda")}},L),X=c("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof wn))throw new Error("name must be AST_SymbolLambda")}},L),Q=c("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if("LambdaDefinition"==this.TYPE)throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof yn))throw new Error("name must be AST_SymbolDefun")}},H),Z=c("AsyncDefun",null,{$documentation:"An asynchronous function definition"},Q),ee=c("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},Q),ne=c("Defun",null,{$documentation:"A function definition"},Q),te=c("GeneratorDefun",null,{$documentation:"A generator function definition"},Q),ie=c("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},_equals:function(e){return d(this.name,e.name)&&d(this.extends,e.extends)&&h(this.properties,e.properties)},resolve:function(e){return e?this:this.parent_scope.resolve()},walk:function(e){var n=this;e.visit(n,function(){n.name&&n.name.walk(e),n.extends&&n.extends.walk(e),n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){if("Class"==this.TYPE)throw new Error("should not instantiate AST_Class");null!=this.extends&&w(this,"extends"),this.properties.forEach(function(e){if(!(e instanceof ae))throw new Error("properties must contain AST_ClassProperty")})}},x),re=c("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof Sn))throw new Error("name must be AST_SymbolDefClass")}},ie),oe=c("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof xn))throw new Error("name must be AST_SymbolClass")}},ie),ae=c("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node?] property name (AST_Node for computed property, null for initialization block)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},_equals:function(e){return!this.private==!e.private&&!this.static==!e.static&&d(this.key,e.key)&&d(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof l&&n.key.walk(e),n.value&&n.value.walk(e)})},_validate:function(){if("ClassProperty"==this.TYPE)throw new Error("should not instantiate AST_ClassProperty");if(this instanceof le){if(null!=this.key)throw new Error("key must be null")}else if("string"!=typeof this.key){if(!(this.key instanceof l))throw new Error("key must be string or AST_Node");w(this,"key")}if(null!=this.value&&!(this.value instanceof l))throw new Error("value must be AST_Node")}}),se=c("ClassField",null,{$documentation:"A `class` field",_validate:function(){null!=this.value&&w(this,"value")}},ae),fe=c("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof Y))throw new Error("value must be AST_Accessor")}},ae),ce=c("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof Y))throw new Error("value must be AST_Accessor")}},ae),ue=c("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof L))throw new Error("value must be AST_LambdaExpression");if(U(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of class method's lambda must be null")}},ae),le=c("ClassInit",null,{$documentation:"A `class` static initialization block",_validate:function(){if(!this.static)throw new Error("static must be true");if(!(this.value instanceof B))throw new Error("value must be AST_ClassInitBlock")},initialize:function(){this.static=!0}},ae),pe=c("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if("Jump"==this.TYPE)throw new Error("should not instantiate AST_Jump")}},_),he=c("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_equals:function(e){return d(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.value&&n.value.walk(e)})},_validate:function(){if("Exit"==this.TYPE)throw new Error("should not instantiate AST_Exit")}},pe),de=c("Return",null,{$documentation:"A `return` statement",_validate:function(){null!=this.value&&w(this,"value")}},he),_e=c("Throw",null,{$documentation:"A `throw` statement",_validate:function(){w(this,"value")}},he),ve=c("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_equals:function(e){return d(this.label,e.label)},walk:function(e){var n=this;e.visit(n,function(){n.label&&n.label.walk(e)})},_validate:function(){if("LoopControl"==this.TYPE)throw new Error("should not instantiate AST_LoopControl");if(null!=this.label&&!(this.label instanceof Dn))throw new Error("label must be AST_LabelRef")}},pe),me=c("Break",null,{$documentation:"A `break` statement"},ve),ge=c("Continue",null,{$documentation:"A `continue` statement"},ve),be=c("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)&&d(this.alternative,e.alternative)},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e),n.alternative&&n.alternative.walk(e)})},_validate:function(){if(w(this,"condition"),null!=this.alternative&&!b(this.alternative))throw new Error("alternative must be AST_Statement")}},E),ye=c("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_equals:function(e){return this.expression.equals(e.expression)&&h(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),T(n,e)})},_validate:function(){w(this,"expression"),this.body.forEach(function(e){if(!(e instanceof we))throw new Error("body must be AST_SwitchBranch[]")})}},k),we=c("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if("SwitchBranch"==this.TYPE)throw new Error("should not instantiate AST_SwitchBranch")}},k),Se=c("Default",null,{$documentation:"A `default` switch branch"},we),xe=c("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_equals:function(e){return this.expression.equals(e.expression)&&h(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),T(n,e)})},_validate:function(){w(this,"expression")}},we),Te=c("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_equals:function(e){return h(this.body,e.body)&&d(this.bcatch,e.bcatch)&&d(this.bfinally,e.bfinally)},walk:function(e){var n=this;e.visit(n,function(){T(n,e),n.bcatch&&n.bcatch.walk(e),n.bfinally&&n.bfinally.walk(e)})},_validate:function(){if(null!=this.bcatch&&!(this.bcatch instanceof ke))throw new Error("bcatch must be AST_Catch");if(null!=this.bfinally&&!(this.bfinally instanceof Ae))throw new Error("bfinally must be AST_Finally")}},k),ke=c("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},_equals:function(e){return d(this.argname,e.argname)&&h(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.argname&&n.argname.walk(e),T(n,e)})},_validate:function(){null!=this.argname&&tn(this.argname,function(e){if(!(e instanceof Tn))throw new Error("argname must be AST_SymbolCatch")})}},k),Ae=c("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},k),Ee=c("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_equals:function(e){return h(this.definitions,e.definitions)},walk:function(e){var n=this;e.visit(n,function(){n.definitions.forEach(function(n){n.walk(e)})})},_validate:function(){if("Definitions"==this.TYPE)throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},_),De=c("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof Ce))throw new Error("definitions must be AST_VarDef[]");tn(e.name,function(e){if(!(e instanceof _n))throw new Error("name must be AST_SymbolConst")})})}},Ee),Oe=c("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof Ce))throw new Error("definitions must be AST_VarDef[]");tn(e.name,function(e){if(!(e instanceof mn))throw new Error("name must be AST_SymbolLet")})})}},Ee),qe=c("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof Ce))throw new Error("definitions must be AST_VarDef[]");tn(e.name,function(e){if(!(e instanceof gn))throw new Error("name must be AST_SymbolVar")})})}},Ee),Ce=c("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_equals:function(e){return this.name.equals(e.name)&&d(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value&&n.value.walk(e)})},_validate:function(){null!=this.value&&w(this,"value")}}),Fe=c("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){if(!(this.body instanceof re||this.body instanceof Ee||this.body instanceof Q))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},_),$e=c("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){this.body instanceof re||this.body instanceof Q||w(this,"body")}},_),Pe=c("ExportForeign","aliases keys path",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[AST_String*] array of aliases to export",keys:"[AST_String*] array of keys to import",path:"[AST_String] the path to import module"},_equals:function(e){return this.path.equals(e.path)&&h(this.aliases,e.aliases)&&h(this.keys,e.keys)},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(e){if(!(e instanceof jn))throw new Error("aliases must contain AST_String")}),this.keys.forEach(function(e){if(!(e instanceof jn))throw new Error("keys must contain AST_String")}),!(this.path instanceof jn))throw new Error("path must be AST_String")}},_),je=c("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},_equals:function(e){return h(this.properties,e.properties)},walk:function(e){var n=this;e.visit(n,function(){n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof En))throw new Error("properties must contain AST_SymbolExport")})}},_),ze=c("Import","all default path properties",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[AST_String] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified"},_equals:function(e){return this.path.equals(e.path)&&d(this.all,e.all)&&d(this.default,e.default)&&!this.properties==!e.properties&&(!this.properties||h(this.properties,e.properties))},walk:function(e){var n=this;e.visit(n,function(){n.all&&n.all.walk(e),n.default&&n.default.walk(e),n.properties&&n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){if(null!=this.all){if(!(this.all instanceof vn))throw new Error("all must be AST_SymbolImport");if(null!=this.properties)throw new Error("cannot import both * and {} in the same statement")}if(null!=this.default){if(!(this.default instanceof vn))throw new Error("default must be AST_SymbolImport");if(""!==this.default.key.value)throw new Error("invalid default key: "+this.default.key.value)}if(!(this.path instanceof jn))throw new Error("path must be AST_String");null!=this.properties&&this.properties.forEach(function(e){if(!(e instanceof vn))throw new Error("properties must contain AST_SymbolImport")})}},_),Me=c("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},_equals:function(e){return this.name.equals(e.name)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value.walk(e)})},_validate:function(){w(this,"value")}});function Ne(e,n,t,i){e[n].forEach(function(e){y(e,n,!0,t,i)})}var Ie=c("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[boolean/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&this.expression.equals(e.expression)&&h(this.args,e.args)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.args.forEach(function(n){n.walk(e)})})},_validate:function(){w(this,"expression"),Ne(this,"args",!0)}}),Re=c("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},Ie),Be=c("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_equals:function(e){return h(this.expressions,e.expressions)},walk:function(e){var n=this;e.visit(n,function(){n.expressions.forEach(function(n){n.walk(e)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");Ne(this,"expressions")}});var He=c("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&d(this.property,e.property)&&this.expression.equals(e.expression)},get_property:function(){var e=this.property;return e instanceof Pn?e.value:e instanceof Ve&&"void"==e.operator&&e.expression instanceof Pn?void 0:e},_validate:function(){if("PropAccess"==this.TYPE)throw new Error("should not instantiate AST_PropAccess");w(this,"expression")}}),Ye=c("Dot","quoted",{$documentation:"A dotted property access expression",$propdoc:{quoted:"[boolean] whether property is transformed from a quoted string"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("string"!=typeof this.property)throw new Error("property must be string")}},He),Le=c("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.property.walk(e)})},_validate:function(){w(this,"property")}},He),Ue=c("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){w(this,"expression")}}),Ge=c("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_equals:function(e){return this.operator==e.operator&&this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("Unary"==this.TYPE)throw new Error("should not instantiate AST_Unary");if("string"!=typeof this.operator)throw new Error("operator must be string");w(this,"expression")}}),Ve=c("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},Ge),We=c("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},Ge),Ke=c("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_equals:function(e){return this.operator==e.operator&&this.left.equals(e.left)&&this.right.equals(e.right)},walk:function(e){var n=this;e.visit(n,function(){n.left.walk(e),n.right.walk(e)})},_validate:function(){if(this instanceof Xe||w(this,"left"),"string"!=typeof this.operator)throw new Error("operator must be string");w(this,"right")}}),Je=c("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_equals:function(e){return this.condition.equals(e.condition)&&this.consequent.equals(e.consequent)&&this.alternative.equals(e.alternative)},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.consequent.walk(e),n.alternative.walk(e)})},_validate:function(){w(this,"condition"),w(this,"consequent"),w(this,"alternative")}}),Xe=c("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof nn){if("="!=this.operator)throw new Error("invalid destructuring operator: "+this.operator);tn(this.left,function(e){if(!(e instanceof He||e instanceof An))throw new Error("left must be assignable: "+e.TYPE)})}else if(!(this.left instanceof Ln||this.left instanceof Bn||this.left instanceof He&&!this.left.optional||this.left instanceof An||this.left instanceof Hn))throw new Error("left must be assignable")}},Ke),Qe=c("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){w(this,"expression")}}),Ze=c("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},_equals:function(e){return!this.nested==!e.nested&&d(this.expression,e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression&&n.expression.walk(e)})},_validate:function(){if(null!=this.expression)w(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),en=c("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_equals:function(e){return h(this.elements,e.elements)},walk:function(e){var n=this;e.visit(n,function(){n.elements.forEach(function(n){n.walk(e)})})},_validate:function(){Ne(this,"elements",!0,!0)}}),nn=c("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if("Destructured"==this.TYPE)throw new Error("should not instantiate AST_Destructured")}});function tn(e,n,t){if(e instanceof Me&&t)return tn(e.name,n);if(e instanceof nn){if(null!=e.rest&&tn(e.rest,n),e instanceof rn)return e.elements.forEach(function(e){e instanceof Yn||tn(e,n,!0)});if(e instanceof an)return e.properties.forEach(function(e){tn(e.value,n,!0)})}n(e)}var rn=c("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},_equals:function(e){return d(this.rest,e.rest)&&h(this.elements,e.elements)},walk:function(e){var n=this;e.visit(n,function(){n.elements.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e)})}},nn),on=c("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},_equals:function(e){return d(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof l&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("string"!=typeof this.key){if(!(this.key instanceof l))throw new Error("key must be string or AST_Node");w(this,"key")}if(!(this.value instanceof l))throw new Error("value must be AST_Node")}}),an=c("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},_equals:function(e){return d(this.rest,e.rest)&&h(this.properties,e.properties)},walk:function(e){var n=this;e.visit(n,function(){n.properties.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e)})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof on))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},nn),sn=c("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},_equals:function(e){return h(this.properties,e.properties)},walk:function(e){var n=this;e.visit(n,function(){n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof fn||e instanceof Ue))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),fn=c("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},_equals:function(e){return d(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof l&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("ObjectProperty"==this.TYPE)throw new Error("should not instantiate AST_ObjectProperty");if("string"!=typeof this.key){if(!(this.key instanceof l))throw new Error("key must be string or AST_Node");w(this,"key")}if(!(this.value instanceof l))throw new Error("value must be AST_Node")}}),cn=c("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){w(this,"value")}},fn),un=c("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof L))throw new Error("value must be AST_LambdaExpression");if(U(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of object method's lambda must be null")}},cn),ln=c("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof Y))throw new Error("value must be AST_Accessor")}},fn),pn=c("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof Y))throw new Error("value must be AST_Accessor")}},fn),hn=c("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_equals:function(e){return this.thedef?this.thedef===e.thedef:this.name==e.name},_validate:function(){if("Symbol"==this.TYPE)throw new Error("should not instantiate AST_Symbol");if("string"!=typeof this.name)throw new Error("name must be string")}}),dn=c("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},hn),_n=c("SymbolConst",null,{$documentation:"Symbol defining a constant"},dn),vn=c("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[AST_String] the original `export` name"},_equals:function(e){return this.name==e.name&&this.key.equals(e.key)},_validate:function(){if(!(this.key instanceof jn))throw new Error("key must be AST_String")}},_n),mn=c("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},dn),gn=c("SymbolVar",null,{$documentation:"Symbol defining a variable"},dn),bn=c("SymbolFunarg","unused",{$documentation:"Symbol naming a function argument"},gn),yn=c("SymbolDefun",null,{$documentation:"Symbol defining a function"},dn),wn=c("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},dn),Sn=c("SymbolDefClass",null,{$documentation:"Symbol defining a class"},_n),xn=c("SymbolClass",null,{$documentation:"Symbol naming a class expression"},_n),Tn=c("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},dn),kn=c("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},hn),An=c("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},hn),En=c("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[AST_String] the `export` alias"},_equals:function(e){return this.name==e.name&&this.alias.equals(e.alias)},_validate:function(){if(!(this.alias instanceof jn))throw new Error("alias must be AST_String")}},An),Dn=c("LabelRef",null,{$documentation:"Reference to a label symbol"},hn),On=c("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_equals:a,_validate:function(){if("ObjectIdentity"==this.TYPE)throw new Error("should not instantiate AST_ObjectIdentity")}},hn),qn=c("Super",null,{$documentation:"The `super` symbol",_validate:function(){if("super"!==this.name)throw new Error('name must be "super"')}},On),Cn=c("This",null,{$documentation:"The `this` symbol",_validate:function(){if("This"==this.TYPE&&"this"!==this.name)throw new Error('name must be "this"')}},On),Fn=c("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if("new.target"!==this.name)throw new Error('name must be "new.target": '+this.name)}},Cn),$n=c("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node?] tag function, or null if absent"},_equals:function(e){return d(this.tag,e.tag)&&(n=this.strings,t=e.strings,n.length==t.length&&all(n,function(e,n){return e==t[n]}))&&h(this.expressions,e.expressions);var n,t},walk:function(e){var n=this;e.visit(n,function(){n.tag&&n.tag.walk(e),n.expressions.forEach(function(n){n.walk(e)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");Ne(this,"expressions"),this.strings.forEach(function(e){if("string"!=typeof e)throw new Error("strings must contain string")}),null!=this.tag&&w(this,"tag")}}),Pn=c("Constant",null,{$documentation:"Base class for all constants",_equals:function(e){return this.value===e.value},_validate:function(){if("Constant"==this.TYPE)throw new Error("should not instantiate AST_Constant")}}),jn=c("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},Pn),zn=c("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if("number"!=typeof this.value)throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},Pn),Mn=c("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if("string"!=typeof this.value)throw new Error("value must be string");if("-"==this.value[0])throw new Error("value cannot be negative")}},Pn),Nn=c("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_equals:function(e){return""+this.value==""+e.value},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},Pn),In=c("Atom",null,{$documentation:"Base class for atoms",_equals:a,_validate:function(){if("Atom"==this.TYPE)throw new Error("should not instantiate AST_Atom")}},Pn),Rn=c("Null",null,{$documentation:"The `null` atom",value:null},In),Bn=c("NaN",null,{$documentation:"The impossible value",value:NaN},In),Hn=c("Undefined",null,{$documentation:"The `undefined` value",value:void 0},In),Yn=c("Hole",null,{$documentation:"A hole in an array",value:void 0},In),Ln=c("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},In),Un=c("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if("Boolean"==this.TYPE)throw new Error("should not instantiate AST_Boolean")}},In),Gn=c("False",null,{$documentation:"The `false` atom",value:!1},Un),Vn=c("True",null,{$documentation:"The `true` atom",value:!0},Un);function Wn(e){this.callback=e,this.directives=Object.create(null),this.stack=[]}function Kn(e,n){Wn.call(this),this.before=e,this.after=n}return Wn.prototype={visit:function(e,n){this.push(e);var t=this.callback(e,n||r);!t&&n&&n(),this.pop()},parent:function(e){return this.stack[this.stack.length-2-(e||0)]},push:function(e){var n;e instanceof ie?(this.directives=Object.create(this.directives),n="use strict"):e instanceof m?n=e.value:e instanceof H&&(this.directives=Object.create(this.directives)),n&&!this.directives[n]&&(this.directives[n]=e),this.stack.push(e)},pop:function(){var e=this.stack.pop();(e instanceof ie||e instanceof H)&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(e){for(var n=this.stack,t=n.length-1;--t>=0;){var i=n[t];if(i instanceof e)return i}},has_directive:function(e){var n=this.directives[e];if(n)return n;var t=this.stack[this.stack.length-1];if(t instanceof I)for(var i=0;i<t.body.length;++i){var r=t.body[i];if(!(r instanceof m))break;if(r.value==e)return r}},loopcontrol_target:function(e){var n=this.stack;if(e.label)for(var t=n.length;--t>=0;){var i=n[t];if(i instanceof D&&i.label.name==e.label.name)return i.body}else for(var t=n.length;--t>=0;){var i=n[t];if(i instanceof O||e instanceof me&&i instanceof ye)return i}},in_boolean_context:function(){for(var e,n=!0,t=0,i=this.self();e=this.parent(t++);i=e){if(e instanceof Ke)switch(e.operator){case"&&":case"||":e.left===i&&(n=!1);continue;default:return!1}if(!(e instanceof Je)){if(e instanceof q)return e.condition===i;if(e instanceof $)return e.condition===i;if(e instanceof be)return e.condition===i;if(e instanceof de){if(e.in_bool)return!0;for(;e=this.parent(t++);)if(e instanceof H){if(e.name)return!1;if("Call"!=(e=this.parent(t++)).TYPE)return!1;break}}if(e instanceof Be){if(e.tail_node()===i)continue;return!n||"d"}return e instanceof S?!n||"d":e instanceof Ve&&"!"==e.operator}if(e.condition===i)return!0}}},Kn.prototype=new Wn,function(e){function n(e,n){return t(e,function(e){return e.transform(n,!0)})}function i(e,t){e.argnames=n(e.argnames,t),e.rest&&(e.rest=e.rest.transform(t)),e.value?e.value=e.value.transform(t):e.body=n(e.body,t)}e(l,r),e(D,function(e,n){e.label=e.label.transform(n),e.body=e.body.transform(n)}),e(S,function(e,n){e.body=e.body.transform(n)}),e(k,function(e,t){e.body=n(e.body,t)}),e(C,function(e,n){e.body=e.body.transform(n),e.condition=e.condition.transform(n)}),e(F,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n)}),e($,function(e,n){e.init&&(e.init=e.init.transform(n)),e.condition&&(e.condition=e.condition.transform(n)),e.step&&(e.step=e.step.transform(n)),e.body=e.body.transform(n)}),e(P,function(e,n){e.init=e.init.transform(n),e.object=e.object.transform(n),e.body=e.body.transform(n)}),e(N,function(e,n){e.expression=e.expression.transform(n),e.body=e.body.transform(n)}),e(he,function(e,n){e.value&&(e.value=e.value.transform(n))}),e(ve,function(e,n){e.label&&(e.label=e.label.transform(n))}),e(be,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n),e.alternative&&(e.alternative=e.alternative.transform(n))}),e(ye,function(e,t){e.expression=e.expression.transform(t),e.body=n(e.body,t)}),e(xe,function(e,t){e.expression=e.expression.transform(t),e.body=n(e.body,t)}),e(Te,function(e,t){e.body=n(e.body,t),e.bcatch&&(e.bcatch=e.bcatch.transform(t)),e.bfinally&&(e.bfinally=e.bfinally.transform(t))}),e(ke,function(e,t){e.argname&&(e.argname=e.argname.transform(t)),e.body=n(e.body,t)}),e(Ee,function(e,t){e.definitions=n(e.definitions,t)}),e(Ce,function(e,n){e.name=e.name.transform(n),e.value&&(e.value=e.value.transform(n))}),e(Me,function(e,n){e.name=e.name.transform(n),e.value=e.value.transform(n)}),e(H,function(e,t){e.name&&(e.name=e.name.transform(t)),e.argnames=n(e.argnames,t),e.rest&&(e.rest=e.rest.transform(t)),e.body=n(e.body,t)}),e(G,i),e(V,i),e(ie,function(e,t){e.name&&(e.name=e.name.transform(t)),e.extends&&(e.extends=e.extends.transform(t)),e.properties=n(e.properties,t)}),e(ae,function(e,n){e.key instanceof l&&(e.key=e.key.transform(n)),e.value&&(e.value=e.value.transform(n))}),e(Ie,function(e,t){e.expression=e.expression.transform(t),e.args=n(e.args,t)}),e(Be,function(e,t){e.expressions=n(e.expressions,t)}),e(Qe,function(e,n){e.expression=e.expression.transform(n)}),e(Ze,function(e,n){e.expression&&(e.expression=e.expression.transform(n))}),e(Ye,function(e,n){e.expression=e.expression.transform(n)}),e(Le,function(e,n){e.expression=e.expression.transform(n),e.property=e.property.transform(n)}),e(Ue,function(e,n){e.expression=e.expression.transform(n)}),e(Ge,function(e,n){e.expression=e.expression.transform(n)}),e(Ke,function(e,n){e.left=e.left.transform(n),e.right=e.right.transform(n)}),e(Je,function(e,n){e.condition=e.condition.transform(n),e.consequent=e.consequent.transform(n),e.alternative=e.alternative.transform(n)}),e(en,function(e,t){e.elements=n(e.elements,t)}),e(rn,function(e,t){e.elements=n(e.elements,t),e.rest&&(e.rest=e.rest.transform(t))}),e(on,function(e,n){e.key instanceof l&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),e(an,function(e,t){e.properties=n(e.properties,t),e.rest&&(e.rest=e.rest.transform(t))}),e(sn,function(e,t){e.properties=n(e.properties,t)}),e(fn,function(e,n){e.key instanceof l&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),e(Fe,function(e,n){e.body=e.body.transform(n)}),e($e,function(e,n){e.body=e.body.transform(n)}),e(je,function(e,t){e.properties=n(e.properties,t)}),e(ze,function(e,t){e.all&&(e.all=e.all.transform(t)),e.default&&(e.default=e.default.transform(t)),e.properties&&(e.properties=n(e.properties,t))}),e($n,function(e,t){e.tag&&(e.tag=e.tag.transform(t)),e.expressions=n(e.expressions,t)})}(function(e,n){e.DEFMETHOD("transform",function(e,t){var i,r;return e.push(this),e.before&&(i=e.before(this,n,t)),void 0===i&&(n(i=this,e),e.after&&void 0!==(r=e.after(i,t))&&(i=r)),e.pop(),i})}),f={parse:null,DEFNODE:c,AST_Token:u,AST_Node:l,AST_Statement:_,AST_Debugger:v,AST_Directive:m,AST_EmptyStatement:g,AST_SimpleStatement:S,AST_BlockScope:x,AST_Block:k,AST_BlockStatement:A,AST_StatementWithBody:E,AST_LabeledStatement:D,AST_IterationStatement:O,AST_DWLoop:q,AST_Do:C,AST_While:F,AST_For:$,AST_ForEnumeration:P,AST_ForIn:j,AST_ForOf:z,AST_ForAwaitOf:M,AST_With:N,AST_Scope:I,AST_Toplevel:R,AST_ClassInitBlock:B,AST_Lambda:H,AST_Accessor:Y,AST_LambdaExpression:L,AST_Arrow:G,AST_AsyncArrow:V,AST_AsyncFunction:W,AST_Function:J,AST_GeneratorFunction:X,AST_AsyncGeneratorFunction:K,AST_LambdaDefinition:Q,AST_AsyncDefun:Z,AST_AsyncGeneratorDefun:ee,AST_Defun:ne,AST_GeneratorDefun:te,AST_Class:ie,AST_DefClass:re,AST_ClassExpression:oe,AST_ClassProperty:ae,AST_ClassField:se,AST_ClassGetter:fe,AST_ClassSetter:ce,AST_ClassMethod:ue,AST_ClassInit:le,AST_Jump:pe,AST_Exit:he,AST_Return:de,AST_Throw:_e,AST_LoopControl:ve,AST_Break:me,AST_Continue:ge,AST_If:be,AST_Switch:ye,AST_SwitchBranch:we,AST_Default:Se,AST_Case:xe,AST_Try:Te,AST_Catch:ke,AST_Finally:Ae,AST_Definitions:Ee,AST_Const:De,AST_Let:Oe,AST_Var:qe,AST_VarDef:Ce,AST_ExportDeclaration:Fe,AST_ExportDefault:$e,AST_ExportForeign:Pe,AST_ExportReferences:je,AST_Import:ze,AST_DefaultValue:Me,AST_Call:Ie,AST_New:Re,AST_Sequence:Be,AST_PropAccess:He,AST_Dot:Ye,AST_Sub:Le,AST_Spread:Ue,AST_Unary:Ge,AST_UnaryPrefix:Ve,AST_UnaryPostfix:We,AST_Binary:Ke,AST_Conditional:Je,AST_Assign:Xe,AST_Await:Qe,AST_Yield:Ze,AST_Array:en,AST_Destructured:nn,AST_DestructuredArray:rn,AST_DestructuredKeyVal:on,AST_DestructuredObject:an,AST_Object:sn,AST_ObjectProperty:fn,AST_ObjectKeyVal:cn,AST_ObjectMethod:un,AST_ObjectSetter:ln,AST_ObjectGetter:pn,AST_Symbol:hn,AST_SymbolDeclaration:dn,AST_SymbolConst:_n,AST_SymbolImport:vn,AST_SymbolLet:mn,AST_SymbolVar:gn,AST_SymbolFunarg:bn,AST_SymbolDefun:yn,AST_SymbolLambda:wn,AST_SymbolDefClass:Sn,AST_SymbolClass:xn,AST_SymbolCatch:Tn,AST_Label:kn,AST_SymbolRef:An,AST_SymbolExport:En,AST_LabelRef:Dn,AST_ObjectIdentity:On,AST_Super:qn,AST_This:Cn,AST_NewTarget:Fn,AST_Template:$n,AST_Constant:Pn,AST_String:jn,AST_Number:zn,AST_BigInt:Mn,AST_RegExp:Nn,AST_Atom:In,AST_Null:Rn,AST_NaN:Bn,AST_Undefined:Hn,AST_Hole:Yn,AST_Infinity:Ln,AST_Boolean:Un,AST_False:Gn,AST_True:Vn,first_in_statement:function(e,n,t){for(var i,r=e.parent(-1),o=0;i=e.parent(o++);r=i){if(U(i))return n&&i.value===r;if(i instanceof Ke){if(i.left===r)continue}else if("Call"==i.TYPE){if(i.expression===r)continue}else if(i instanceof Je){if(i.condition===r)continue}else{if(i instanceof $e)return t;if(i instanceof He){if(i.expression===r)continue}else if(i instanceof Be){if(i.expressions[0]===r)continue}else{if(i instanceof S)return!0;if(i instanceof $n){if(i.tag===r)continue}else if(i instanceof We&&i.expression===r)continue}}return!1}},is_arrow:U,is_generator:function(e){return e instanceof ee||e instanceof K||e instanceof te||e instanceof X},walk_lambda:function(e,n){U(e)&&e.value?e.value.walk(n):T(e,n)},walk_body:T,is_statement:b,TreeWalker:Wn,TreeTransformer:Kn}}),e("skylark-uglifyjs/parse",["./utils","./ast"],function(e,n){"use strict";const{characters:t,defaults:i,makePredicate:r,set_annotation:o,configure_error_stack:a,HOP:s,all:f}=e,{AST_Accessor:c,AST_Array:u,AST_Arrow:l,AST_Assign:p,AST_Await:h,AST_BigInt:d,AST_Binary:_,AST_BlockStatement:v,AST_Break:m,AST_Call:g,AST_Case:b,AST_Catch:y,AST_Chain:w,AST_ClassExpression:S,AST_ClassPrivateProperty:x,AST_ClassProperty:T,AST_ClassStaticBlock:k,AST_ConciseMethod:A,AST_PrivateIn:E,AST_PrivateGetter:D,AST_PrivateMethod:O,AST_PrivateSetter:q,AST_Conditional:C,AST_Const:F,AST_Continue:$,AST_Debugger:P,AST_Default:j,AST_DefaultAssign:z,AST_DefClass:M,AST_Definitions:N,AST_Defun:I,AST_Destructured:R,AST_DestructuredArray:B,AST_DestructuredKeyVal:H,AST_DestructuredObject:Y,AST_Destructuring:L,AST_Directive:U,AST_Do:G,AST_Dot:V,AST_DotHash:W,AST_EmptyStatement:K,AST_Expansion:J,AST_Export:X,AST_ExportDeclaration:Q,AST_False:Z,AST_Finally:ee,AST_For:ne,AST_ForIn:te,AST_ForOf:ie,AST_Function:re,AST_Hole:oe,AST_If:ae,AST_Import:se,AST_ImportMeta:fe,AST_IterationStatement:ce,AST_Label:ue,AST_LabeledStatement:le,AST_LabelRef:pe,AST_Let:he,AST_NameMapping:de,AST_New:_e,AST_NewTarget:ve,AST_Node:me,AST_Null:ge,AST_Number:be,AST_Object:ye,AST_ObjectGetter:we,AST_ObjectKeyVal:Se,AST_ObjectProperty:xe,AST_ObjectSetter:Te,AST_PrefixedTemplateString:ke,AST_PropAccess:Ae,AST_RegExp:Ee,AST_Return:De,AST_Sequence:Oe,AST_SimpleStatement:qe,AST_String:Ce,AST_Sub:Fe,AST_Super:$e,AST_Switch:Pe,AST_SymbolCatch:je,AST_SymbolClass:ze,AST_SymbolClassProperty:Me,AST_SymbolConst:Ne,AST_SymbolDeclaration:Ie,AST_SymbolDefClass:Re,AST_SymbolDefun:Be,AST_SymbolExport:He,AST_SymbolExportForeign:Ye,AST_SymbolFunarg:Le,AST_SymbolImport:Ue,AST_SymbolImportForeign:Ge,AST_SymbolLambda:Ve,AST_SymbolLet:We,AST_SymbolMethod:Ke,AST_SymbolRef:Je,AST_SymbolVar:Xe,AST_TemplateSegment:Qe,AST_TemplateString:Ze,AST_This:en,AST_SymbolPrivateProperty:nn,AST_Throw:tn,AST_Token:rn,AST_Toplevel:on,AST_True:an,AST_Try:sn,AST_TryBlock:fn,AST_UnaryPostfix:cn,AST_UnaryPrefix:un,AST_Var:ln,AST_VarDef:pn,AST_While:hn,AST_With:dn,AST_Yield:_n,_INLINE:vn,_NOINLINE:mn,_PURE:gn,_KEY:bn,_MANGLEPROP:yn}=n;var wn="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with",Sn="false null true",xn=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",Sn,wn].join(" "),Tn="return new delete throw else case";wn=r(wn),xn=r(xn),Tn=r(Tn),Sn=r(Sn);var kn=/^0b([01]+)$/i,An=/^0x([0-9a-f]+)$/i,En=/^0o?([0-7]+)$/i,Dn=r(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),On="\n\r\u2028\u2029",qn="+-*&%=<>!?|~^",Cn=",;:)}]",Fn="[{(,;:",$n=Fn+"`)}]",Pn=On+"  \t\f\v​             　\ufeff",jn=r(t("./'\"#"+qn+$n+Pn));function zn(e){return e>=48&&e<=57}function Mn(e){return!jn[e]}function Nn(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function In(e,n,t,i,r){this.message=e,this.filename=n,this.line=t,this.col=i,this.pos=r}function Rn(e,n,t,i,r){throw new In(e,n,t,i,r)}function Bn(e,n,t){return e.type==n&&(null==t||e.value==t)}On=r(t(On)),qn=r(t(qn)),Cn=r(t(Cn)),Fn=r(t(Fn)),$n=r(t($n)),Pn=r(t(Pn)),In.prototype=Object.create(Error.prototype),In.prototype.constructor=In,In.prototype.name="SyntaxError",a(In);var Hn={};function Yn(e,n,t,i){var r={text:e,filename:n,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:Object.create(null),read_template:A("Unterminated template literal",function(e){for(var n="";;){var t=i();switch(t){case"\\":t+=i();break;case"`":return void e.push(n);case"$":if("{"==a())return s(),e.push(n),r.regex_allowed=!0,!0}n+=t}function i(){var e=s(!0,!0);return"\r"==e?"\n":e}})},o=!1;function a(){return r.text.charAt(r.pos)}function s(e,n){var t=r.text.charAt(r.pos++);if(e&&!t)throw Hn;return On[t]?(r.col=0,r.line++,n||(r.newline_before=!0),"\r"==t&&"\n"==a()&&(r.pos++,t="\n")):r.col++,t}function f(e){for(;e-- >0;)s()}function c(e){return r.text.substr(r.pos,e.length)==e}function u(){r.tokline=r.line,r.tokcol=r.col,r.tokpos=r.pos}function l(t,i,a){r.regex_allowed="operator"==t&&!Un[i]||"keyword"==t&&Tn[i]||"punc"==t&&Fn[i],"punc"==t&&"."==i?o=!0:a||(o=!1);var s={type:t,value:i,line:r.tokline,col:r.tokcol,pos:r.tokpos,endline:r.line,endcol:r.col,endpos:r.pos,nlb:r.newline_before,file:n};return/^(?:num|string|regexp)$/i.test(t)&&(s.raw=e.substring(s.pos,s.endpos)),a||(s.comments_before=r.comments_before,s.comments_after=r.comments_before=[]),r.newline_before=!1,new rn(s)}function p(){for(;Pn[a()];)s()}function h(e){Rn(e,n,r.tokline,r.tokcol,r.tokpos)}function d(e){return/^0[0-7_]+$/.test(e)}function _(e){var n=!1,t=!1,i=!1,r="."==e,o=function(e){var n,t="";for(;(n=a())&&e(n,t);)t+=s();return t}(function(e,o){switch(e){case"x":case"X":return!i&&(i=!0);case"e":case"E":return!!i||!n&&(n=t=!0);case"+":case"-":return t;case t=!1,".":return!(r||n||i||d(o))&&(r=!0)}return/[_0-9a-dfo]/i.test(e)});e&&(o=e+o),d(o)?E.has_directive("use strict")&&h("Legacy octal literals are not allowed in strict mode"):o=o.replace(i?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1");var f=function(e){var n;if(n=kn.exec(e))return parseInt(n[1],2);if(n=An.exec(e))return parseInt(n[1],16);if(n=En.exec(e))return parseInt(n[1],8);var t=parseFloat(e);if(t==e)return t}(o);return isNaN(f)&&h("Invalid syntax: "+o),r||n||"n"!=a()?l("num",f):l("bigint",o.toLowerCase()+s())}function v(e){var n=s(!0,e);if(n>="0"&&n<="7")return function(e){var n=a();n>="0"&&n<="7"&&(e+=s(!0))[0]<="3"&&(n=a())>="0"&&n<="7"&&(e+=s(!0));if("0"===e)return"\0";e.length>0&&E.has_directive("use strict")&&h("Legacy octal escape sequences are not allowed in strict mode");return String.fromCharCode(parseInt(e,8))}(n);if("u"==n){var t=s(!0,e);if(n+=t,"{"!=t)n+=s(!0,e)+s(!0,e)+s(!0,e);else do{t=s(!0,e),n+=t}while("}"!=t)}else"x"==n&&(n+=s(!0,e)+s(!0,e));var i=function(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":var n;if("{"==e[1]&&"}"==e.slice(-1))n=e.slice(2,-1);else{if(5!=e.length)return;n=e.slice(1)}var t=parseInt(n,16);if(t<0||isNaN(t))return;if(t<65536)return String.fromCharCode(t);if(t>1114111)return;return String.fromCharCode(55232+(t>>10))+String.fromCharCode(56320+(1023&t));case"v":return"\v";case"x":if(3!=e.length)return;var t=parseInt(e.slice(1),16);if(t<0||isNaN(t))return;return String.fromCharCode(t);case"\r":case"\n":return"";default:if("0"==e)return"\0";if(e[0]>="0"&&e[0]<="9")return;return e}}(n);return"string"!=typeof i&&h("Invalid escape sequence: \\"+n),i}var m=A("Unterminated string constant",function(e){for(var n=s(),t="";;){var i=s(!0,!0);if("\\"==i)i=v(!0);else if(On[i])h("Unterminated string constant");else if(i==n)break;t+=i}var r=l("string",t);return r.quote=e,r});function g(e){var n,t=r.regex_allowed,i=function(){for(var e=r.text,n=r.pos;n<r.text.length;++n)if(On[e[n]])return n;return-1}();return-1==i?(n=r.text.substr(r.pos),r.pos=r.text.length):(n=r.text.substring(r.pos,i),r.pos=i),r.col=r.tokcol+(r.pos-r.tokpos),r.comments_before.push(l(e,n,!0)),r.regex_allowed=t,E}var b=A("Unterminated multiline comment",function(){var e=r.regex_allowed,n=function(e,n){var t=r.text.indexOf(e,r.pos);if(n&&-1==t)throw Hn;return t}("*/",!0),t=r.text.substring(r.pos,n).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return f(t.length+2),r.comments_before.push(l("comment2",t,!0)),r.regex_allowed=e,E});function y(){for(var e,n=!1,t=!1,i="#"==a()?s():"";e=a();)if(n)"u"!=e&&h("Expecting UnicodeEscapeSequence -- uXXXX"),Mn(e=v())||h("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),i+=e,n=!1;else if("\\"==e)t=n=!0,s();else{if(!Mn(e))break;i+=s()}if(wn[i]&&t){var r=i.charCodeAt(0).toString(16).toUpperCase();i="\\u"+"0000".substr(r.length)+r+i.slice(1)}return i}var w=A("Unterminated regular expression",function(e){for(var n,t=!1,i=!1;n=s(!0);)if(On[n])h("Unexpected line terminator");else if(t)e+="\\"+n,t=!1;else if("["==n)i=!0,e+=n;else if("]"==n&&i)i=!1,e+=n;else{if("/"==n&&!i)break;"\\"==n?t=!0:e+=n}var r=y();try{var o=new RegExp(e,r);return o.raw_source=e,l("regexp",o)}catch(e){h(e.message)}});function S(e){return l("operator",function e(n){if(!a())return n;var t=n+a();return Dn[t]?(s(),e(t)):n}(e||s()))}function x(){switch(s(),a()){case"/":return s(),g("comment1");case"*":return s(),b()}return r.regex_allowed?w(""):S("/")}function T(){return s(),c("..")?l("operator","."+s()+s()):zn(a().charCodeAt(0))?_("."):l("punc",".")}function k(){var e=y();return o?l("name",e):Sn[e]?l("atom",e):wn[e]?Dn[e]?l("operator",e):l("keyword",e):l("name",e)}function A(e,n){return function(t){try{return n(t)}catch(n){if(n!==Hn)throw n;h(e)}}}function E(e){if(null!=e)return w(e);for(i&&0==r.pos&&c("#!")&&(u(),f(2),g("comment5"));;){if(p(),u(),t){if(c("\x3c!--")){f(4),g("comment3");continue}if(c("--\x3e")&&r.newline_before){f(3),g("comment4");continue}}var n=a();if(!n)return l("eof");var o=n.charCodeAt(0);switch(o){case 34:case 39:return m(n);case 46:return T();case 47:var d=x();if(d===E)continue;return d}if(zn(o))return _();if($n[n])return l("punc",s());if(c("=>"))return l("punc",s()+s());if(qn[n])return S();if(35==o||92==o||!jn[n])return k();break}h("Unexpected character '"+n+"'")}return E.context=function(e){return e&&(r=e),r},E.add_directive=function(e){r.directives[e]=!0},E.push_directives_stack=function(){r.directives=Object.create(r.directives)},E.pop_directives_stack=function(){r.directives=Object.getPrototypeOf(r.directives)},E.has_directive=function(e){return!!r.directives[e]},E}var Ln=r("typeof void delete -- ++ ! ~ - +"),Un=r("-- ++"),Gn=r("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),Vn=function(e,n){for(var t=0;t<e.length;)for(var i=e[t++],r=0;r<i.length;r++)n[i[r]]=t;return n}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),Wn=r("atom bigint num regexp string");function Kn(e,n){n=i(n,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var t={input:"string"==typeof e?Yn(e,n.filename,n.html5_comments,n.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function r(e,n){return Bn(t.token,e,n)}function o(){return t.peeked||(t.peeked=t.input())}function a(){return t.prev=t.token,t.peeked?(t.token=t.peeked,t.peeked=null):t.token=t.input(),t.in_directives=t.in_directives&&("string"==t.token.type||r("punc",";")),t.token}function w(){return t.prev}function x(e,n,i,r){var o=t.input.context();Rn(e,o.filename,null!=n?n:o.tokline,null!=i?i:o.tokcol,null!=r?r:o.tokpos)}function T(e,n){x(n,e.line,e.col)}function k(e,n){return e+(void 0===n?"":" «"+n+"»")}function A(e){null==e&&(e=t.token),T(e,"Unexpected token: "+k(e.type,e.value))}function E(e,n){if(r(e,n))return a();T(t.token,"Unexpected token: "+k(t.token.type,t.token.value)+", expected: "+k(e,n))}function D(e){return E("punc",e)}function O(e){return e.nlb||!f(e.comments_before,function(e){return!e.nlb})}function q(){return!n.strict&&(r("eof")||r("punc","}")||O(t.token))}function z(e){r("punc",";")?a():e||q()||D(";")}function L(){D("(");var e=Zn();return D(")"),e}function W(e){return function(){var n=t.token,i=e.apply(null,arguments),r=w();return i.start=n,i.end=r,i}}function J(){(r("operator","/")||r("operator","/="))&&(t.peeked=null,t.token=t.input(t.token.value.substr(1)))}t.token=a();var X=W(function(e){switch(J(),t.token.type){case"string":var i=t.in_directives,s=Zn();if(i)if(s instanceof Ce){var c=s.start.raw.slice(1,-1);t.input.add_directive(c),s.value=c}else t.in_directives=i=!1;return z(),i?new U(s):new qe({body:s});case"num":case"bigint":case"regexp":case"operator":case"atom":return fe();case"name":switch(t.token.value){case"async":if(Bn(o(),"keyword","function"))return a(),a(),r("operator","*")?(a(),Ye(AST_AsyncGeneratorDefun)):Ye(AST_AsyncDefun);break;case"await":if(t.in_async)return fe();break;case"export":return e||""===n.module||A(),a(),function(){if(r("operator","*")){var e=t.token,n=e;return a(),r("name","as")&&(a(),Ge()||E("name"),n=t.token,a()),E("name","from"),new AST_ExportForeign({aliases:[Ke(n)],keys:[Ke(e)],path:Qe()})}if(r("punc","{")){a();for(var i=[],s=[];Ge();){var e=t.token;a(),s.push(e),r("name","as")?(a(),Ge()||E("name"),i.push(t.token),a()):i.push(e),r("punc","}")||D(",")}return D("}"),r("name","from")?(a(),new AST_ExportForeign({aliases:i.map(Ke),keys:s.map(Ke),path:Qe()})):(z(),new AST_ExportReferences({properties:s.map(function(e,n){Bn(e,"name")||T(e,"Name expected");var t=On(He,e);return t.alias=Ke(i[n]),t})}))}if(r("keyword","default")){a();var f=t.token,c=function(){if(r("name","async")){if(!Bn(o(),"keyword","function"))return;return a(),a(),r("operator","*")?(a(),Ze(AST_AsyncGeneratorDefun,Ye(AST_AsyncGeneratorFunction))):Ze(AST_AsyncDefun,Ye(AST_AsyncFunction))}if(r("keyword"))switch(t.token.value){case"class":return a(),Ze(M,xe(S));case"function":return a(),r("operator","*")?(a(),Ze(AST_GeneratorDefun,Ye(AST_GeneratorFunction))):Ze(I,Ye(re))}}();return c?(c.start=f,c.end=w()):(J(),c=Zn(),z()),new AST_ExportDefault({body:c})}return new Q({body:nn()})}();case"import":var u=o();if("punc"==u.type&&/^[(.]$/.test(u.value))break;return e||""===n.module||A(),a(),function(){var e,n=null,i=Fn(Ue,!0),s=null;i?(i.key=new Ce({start:i.start,value:"",end:i.end}),(e=r("punc",","))&&a()):e=!r("string");if(e)if(r("operator","*")){var f=t.token;a(),E("name","as"),(n=Fn(Ue)).key=Ke(f)}else{for(D("{"),s=[];Ge();){var c;if(Bn(o(),"name","as")){var f=t.token;a(),a(),(c=Fn(Ue)).key=Ke(f)}else(c=Fn(Ue)).key=new Ce({start:c.start,value:c.name,end:c.end});s.push(c),r("punc","}")||D(",")}D("}")}(n||i||s)&&E("name","from");return new se({all:n,default:i,path:Qe(),properties:s})}();case"let":if(mn()){a();var l=bn();return z(),l}break;case"yield":if(t.in_generator)return fe()}return Bn(o(),"punc",":")?function(){var e=Fn(ue);f(t.labels,function(n){return n.name!=e.name})||x("Label "+e.name+" defined twice");D(":"),t.labels.push(e);var n=X();t.labels.pop(),n instanceof ce||e.references.forEach(function(n){n instanceof $&&T(n.label.start,"Continue label `"+e.name+"` must refer to IterationStatement")});return new le({body:n,label:e})}():fe();case"punc":switch(t.token.value){case"{":return new v({start:t.token,body:rn(),end:w()});case"[":case"(":case"`":return fe();case";":return t.in_directives=!1,a(),new K;default:A()}case"keyword":switch(t.token.value){case"break":return a(),de(m);case"class":return a(),xe(M);case"const":a();var l=gn();return z(),l;case"continue":return a(),de($);case"debugger":return a(),z(),new P;case"do":a();var s=et(X);E("keyword","while");var p=L();return z(!0),new G({body:s,condition:p});case"while":return a(),new hn({condition:L(),body:et(X)});case"for":return a(),function(){var e=r("name","await")&&a();D("(");var n=null;if(e||!r("punc",";")){var t;if(n=r("keyword","const")?(a(),gn(!0)):r("name","let")&&mn()?(a(),bn(!0)):r("keyword","var")?(a(),yn(!0)):Zn(!0),e?(E("name","of"),t=AST_ForAwaitOf):r("operator","in")?(a(),t=te):r("name","of")&&(a(),t=ie),t)return n instanceof N?(n.definitions.length>1&&T(n.start,"Only one variable declaration allowed in for..in/of loop"),t!==te&&n.definitions[0].value&&T(n.definitions[0].value.start,"No initializers allowed in for..of loop")):Jn(n)||(n=Xn(n))instanceof R||T(n.start,"Invalid left-hand side in for..in/of loop"),function(e,n){J();var t=Zn();return D(")"),new e({init:n,object:t,body:et(X)})}(t,n)}return function(e){D(";");var n=r("punc",";")?null:Zn();D(";");var t=r("punc",")")?null:Zn();return D(")"),new ne({init:e,condition:n,step:t,body:et(X)})}(n)}();case"function":return a(),r("operator","*")?(a(),Ye(AST_GeneratorDefun)):Ye(I);case"if":return a(),function(){var e=L(),n=X(),t=null;r("keyword","else")&&(a(),t=X());return new ae({condition:e,body:n,alternative:t})}();case"return":0!=t.in_function||n.bare_returns||x("'return' outside of function"),a();var c=null;return r("punc",";")?a():q()||(c=Zn(),z()),new De({value:c});case"switch":return a(),new Pe({expression:L(),body:et(fn)});case"throw":a(),O(t.token)&&x("Illegal newline after 'throw'");var c=Zn();return z(),new tn({value:c});case"try":return a(),function(){var e=rn(),n=null,i=null;if(r("keyword","catch")){var o=t.token;a();var s=null;r("punc","(")&&(a(),s=$n(je),D(")")),n=new y({start:o,argname:s,body:rn(),end:w()})}if(r("keyword","finally")){var o=t.token;a(),i=new ee({start:o,body:rn(),end:w()})}n||i||x("Missing catch/finally blocks");return new sn({body:e,bcatch:n,bfinally:i})}();case"var":a();var l=yn();return z(),l;case"with":return t.input.has_directive("use strict")&&x("Strict mode may not include a with statement"),a(),new dn({expression:L(),body:X()})}}A()});function fe(){var e=Zn();return z(),new qe({body:e})}function de(e){var n,i=null;q()||(i=Fn(pe,!0)),null!=i?((n=find_if(function(e){return e.name==i.name},t.labels))||T(i.start,"Undefined label "+i.name),i.thedef=n):0==t.in_loop&&x(e.TYPE+" not inside a loop or switch"),z();var r=new e({label:i});return n&&n.references.push(r),r}function me(e,n){if(r("name",e)){var t=o();if(t&&!Bn(t,"operator","=")&&!("punc"==t.type&&/^[(;}]$/.test(t.value)||n&&O(t)))return a()}}function xe(e){var n,i=t.in_async,o=t.in_generator;t.input.push_directives_stack(),t.input.add_directive("use strict"),n=e===M?Fn(Re):Fn(ze,!0);var s=null;r("keyword","extends")&&(a(),J(),s=Sn(!0)),D("{");for(var f=[];!r("punc","}");)if(r("punc",";"))a();else{var c=t.token,u=!!me("static"),l=me("async",!0);if(r("operator","*")){a();var p=r("name")&&/^#/.test(t.token.value),h=En(),d=t.token,_=Ye(l?AST_AsyncGeneratorFunction:AST_GeneratorFunction);_.start=d,_.end=w(),f.push(new AST_ClassMethod({start:c,static:u,private:p,key:h,value:_,end:w()}))}else if(u&&r("punc","{"))f.push(new AST_ClassInit({start:c,value:new AST_ClassInitBlock({start:c,body:rn(),end:w()}),end:w()}));else{var p=r("name")&&/^#/.test(t.token.value),h=En();if(r("punc","(")){var v=t.token,m=Ye(l?AST_AsyncFunction:re);m.start=v,m.end=w(),f.push(new AST_ClassMethod({start:c,static:u,private:p,key:h,value:m,end:w()}))}else{l&&A(l);var g=null;if(r("operator","="))a(),t.in_async=!1,t.in_generator=!1,g=Qn(),t.in_generator=o,t.in_async=i;else if(!r("punc",";")&&!r("punc","}")){var b=null;switch(h){case"get":b=AST_ClassGetter;break;case"set":b=AST_ClassSetter}if(b){f.push(new b({start:c,static:u,private:r("name")&&/^#/.test(t.token.value),key:En(),value:kn(),end:w()}));continue}}z(),f.push(new AST_ClassField({start:c,static:u,private:p,key:h,value:g,end:w()}))}}}return a(),t.input.pop_directives_stack(),t.in_generator=o,t.in_async=i,new e({extends:s,name:n,properties:f})}function ke(e){if(e instanceof u){var n=null;return e.elements[e.elements.length-1]instanceof AST_Spread&&(n=ke(e.elements.pop().expression)),new B({start:e.start,elements:e.elements.map(ke),rest:n,end:e.end})}if(e instanceof p)return new AST_DefaultValue({start:e.start,name:ke(e.left),value:e.right,end:e.end});if(e instanceof AST_DefaultValue)return e.name=ke(e.name),e;if(e instanceof B)return e.elements=e.elements.map(ke),e.rest&&(e.rest=ke(e.rest)),e;if(e instanceof Y)return e.properties.forEach(function(e){e.value=ke(e.value)}),e.rest&&(e.rest=ke(e.rest)),e;if(e instanceof oe)return e;if(e instanceof ye){var n=null;return e.properties[e.properties.length-1]instanceof AST_Spread&&(n=ke(e.properties.pop().expression)),new Y({start:e.start,properties:e.properties.map(function(e){return e instanceof Se||T(e.start,"Invalid destructuring assignment"),new H({start:e.start,key:e.key,value:ke(e.value),end:e.end})}),rest:n,end:e.end})}return e instanceof Le?e:e instanceof Je?new Le(e):e instanceof _n?new Le({start:e.start,name:"yield",end:e.end}):void T(e.start,"Invalid arrow parameter")}function Me(e,n,i){var o=t.in_async,a=t.in_generator;t.in_async=i,t.in_generator=!1;var s=t.in_funarg;t.in_funarg=t.in_function;var f,c,u=e.map(ke),p=e.rest||null;p&&(p=ke(p)),t.in_funarg=s,D("=>");var h=t.in_loop,d=t.labels;++t.in_function,t.input.push_directives_stack(),t.in_loop=0,t.labels=[],r("punc","{")?(t.in_directives=!0,f=rn(),c=null):(f=[],J(),c=Qn());var _=t.input.has_directive("use strict");t.input.pop_directives_stack(),--t.in_function,t.in_loop=h,t.labels=d,t.in_generator=a,t.in_async=o;var v=new(i?AST_AsyncArrow:l)({start:n,argnames:u,rest:p,body:f,value:c,end:w()});return _&&v.each_argname(qn),v}var Ye=function(e){var i,r=t.in_async,o=t.in_generator;/Defun$/.test(e.TYPE)?(i=Fn(Be),t.in_async=/^Async/.test(e.TYPE),t.in_generator=/Generator/.test(e.TYPE)):(t.in_async=/^Async/.test(e.TYPE),t.in_generator=/Generator/.test(e.TYPE),i=Fn(Ve,!0)),!i||e===c||i instanceof Ie||A(w()),D("(");var a=t.in_funarg;t.in_funarg=t.in_function;var s=xn(")",!n.strict,!1,function(){return Pn(Le)});t.in_funarg=a;var f=t.in_loop,u=t.labels;++t.in_function,t.in_directives=!0,t.input.push_directives_stack(),t.in_loop=0,t.labels=[];var l=rn(),p=t.input.has_directive("use strict");t.input.pop_directives_stack(),--t.in_function,t.in_loop=f,t.labels=u,t.in_generator=o,t.in_async=r;var h=new e({name:i,argnames:s,rest:s.rest||null,body:l});return p&&(i&&qn(i),h.each_argname(qn)),h};function Ge(){return r("name")||r("string")||Nn(t.token.value)}function Ke(e){return new Ce({start:e,quote:e.quote,value:e.value,end:e})}function Qe(){var e=t.token;return E("string"),z(),Ke(e)}function Ze(e,n){return n.name&&((n=new e(n)).name=new(e===M?Re:Be)(n.name)),n}var nn=W(function(){if(r("name"))switch(t.token.value){case"async":return a(),E("keyword","function"),r("operator","*")?(a(),Ye(AST_AsyncGeneratorDefun)):Ye(AST_AsyncDefun);case"let":a();var e=bn();return z(),e}else if(r("keyword"))switch(t.token.value){case"class":return a(),xe(M);case"const":a();var e=gn();return z(),e;case"function":return a(),r("operator","*")?(a(),Ye(AST_GeneratorDefun)):Ye(I);case"var":a();var e=yn();return z(),e}A()});function rn(){D("{");for(var e=[];!r("punc","}");)r("eof")&&D("}"),e.push(X());return a(),e}function fn(){D("{");for(var e,n,i,o,s=[];!r("punc","}");)r("eof")&&D("}"),r("keyword","case")?(e&&(e.end=w()),n=[],e=new b({start:(o=t.token,a(),o),expression:Zn(),body:n}),s.push(e),D(":")):r("keyword","default")?(e&&(e.end=w()),i&&x("More than one default clause in switch statement"),n=[],e=new j({start:(o=t.token,a(),D(":"),o),body:n}),s.push(e),i=e):(n||A(),n.push(X()));return e&&(e.end=w()),a(),s}function vn(e,n){for(var i=[];;){var o=t.token,s=$n(e),f=null;if(r("operator","=")?(a(),f=Qn(n)):!n&&(e===Ne||s instanceof R)&&x("Missing initializer in declaration"),i.push(new pn({start:o,name:s,value:f,end:w()})),!r("punc",","))break;a()}return i}function mn(){var e=o();return Bn(e,"name")||Bn(e,"punc","[")||Bn(e,"punc","{")}var gn=function(e){return new F({start:w(),definitions:vn(Ne,e),end:w()})},bn=function(e){return new he({start:w(),definitions:vn(We,e),end:w()})},yn=function(e){return new ln({start:w(),definitions:vn(Xe,e),end:w()})};var Sn=function(e){if(r("operator","new"))return function(e){var i,s=t.token;if(E("operator","new"),r("punc",".")&&Bn(o(),"name","target"))a(),a(),i=new ve;else{var f,c=Sn(!1);r("punc","(")?(a(),f=xn(")",!n.strict)):f=[],i=new _e({expression:c,args:f})}return i.start=s,i.end=w(),zn(i,e)}(e);var i=t.token;if(r("punc")){switch(i.value){case"`":return zn(jn(null),e);case"(":if(a(),r("punc",")"))return a(),Me([],i);var s=Zn(!1,!0),f=i.comments_before.length;if([].unshift.apply(s.start.comments_before,i.comments_before),i.comments_before.length=0,i.comments_before=s.start.comments_before,i.comments_before_length=f,0==f&&i.comments_before.length>0){var c=i.comments_before[0];c.nlb||(c.nlb=i.nlb,i.nlb=!1)}i.comments_after=s.start.comments_after,s.start=i,D(")");var u=w();return u.comments_before=s.end.comments_before,u.comments_after.forEach(function(e){s.end.comments_after.push(e),e.nlb&&(t.token.nlb=!0)}),u.comments_after.length=0,u.comments_after=s.end.comments_after,s.end=u,r("punc","=>")?Me(s instanceof Oe?s.expressions:[s],i):zn(s,e);case"[":return zn(Tn(),e);case"{":return zn(An(),e)}A()}if(r("keyword"))switch(i.value){case"class":a();var l=xe(S);return l.start=i,l.end=w(),zn(l,e);case"function":return a(),r("operator","*")?(a(),h=Ye(AST_GeneratorFunction)):h=Ye(re),h.start=i,h.end=w(),zn(h,e)}if(r("name")){var p=On(Je,i);if(a(),"async"==p.name){var h;if(r("keyword","function"))return a(),r("operator","*")?(a(),h=Ye(AST_AsyncGeneratorFunction)):h=Ye(AST_AsyncFunction),h.start=i,h.end=w(),zn(h,e);if(r("name")&&Bn(o(),"punc","=>"))return i=t.token,p=On(Je,i),a(),Me([p],i,!0);if(r("punc","(")){var _=zn(p,e);if(!r("punc","=>"))return _;var v=_.args;return v[v.length-1]instanceof AST_Spread&&(v.rest=v.pop().expression),Me(v,i,!0)}}return r("punc","=>")?Me([p],i):zn(p,e)}if(Wn[t.token.type])return zn(function(){var e,n=t.token,i=n.value;switch(n.type){case"num":isFinite(i)?e=new be({value:i}):(e=new AST_Infinity,i<0&&(e=new un({operator:"-",expression:e})));break;case"bigint":e=new d({value:i});break;case"string":e=new Ce({value:i,quote:n.quote});break;case"regexp":e=new Ee({value:i});break;case"atom":switch(i){case"false":e=new Z;break;case"true":e=new an;break;case"null":e=new ge;break;default:A()}break;default:A()}return a(),e.start=e.end=n,e}(),e);A()};function xn(e,n,i,o){o||(o=Qn);for(var s=!0,f=[];!r("punc",e)&&(s?s=!1:D(","),!n||!r("punc",e));)if(i&&r("punc",","))f.push(new oe({start:t.token,end:t.token}));else if(r("operator","...")){if(o!==Qn){a(),f.rest=o(),f.rest instanceof AST_DefaultValue&&T(f.rest.start,"Invalid rest parameter");break}f.push(new AST_Spread({start:t.token,expression:(a(),o()),end:w()}))}else f.push(o());return D(e),f}var Tn=W(function(){return D("["),new u({elements:xn("]",!n.strict,!0)})}),kn=W(function(){return Ye(c)}),An=W(function(){D("{");for(var e=!0,i=[];!r("punc","}")&&(e?e=!1:D(","),n.strict||!r("punc","}"));){var s=t.token;if(r("operator","*")){a();var f=En(),c=t.token,u=Ye(AST_GeneratorFunction);u.start=c,u.end=w(),i.push(new AST_ObjectMethod({start:s,key:f,value:u,end:w()}))}else if(r("operator","..."))a(),i.push(new AST_Spread({start:s,expression:Qn(),end:w()}));else if(Bn(o(),"operator","=")){var l=Fn(Je);a(),i.push(new Se({start:s,key:s.value,value:new p({start:s,left:l,operator:"=",right:Qn(),end:w()}),end:w()}))}else if(Bn(o(),"punc",",")||Bn(o(),"punc","}"))i.push(new Se({start:s,key:s.value,value:Fn(Je),end:w()}));else{var f=En();if(r("punc","(")){var h=t.token,d=Ye(re);d.start=h,d.end=w(),i.push(new AST_ObjectMethod({start:s,key:f,value:d,end:w()}))}else if(r("punc",":"))a(),i.push(new Se({start:s,key:f,value:Qn(),end:w()}));else{if("name"==s.type)switch(f){case"async":var _=r("operator","*")&&a();f=En();var h=t.token,d=Ye(_?AST_AsyncGeneratorFunction:AST_AsyncFunction);d.start=h,d.end=w(),i.push(new AST_ObjectMethod({start:s,key:f,value:d,end:w()}));continue;case"get":i.push(new we({start:s,key:En(),value:kn(),end:w()}));continue;case"set":i.push(new Te({start:s,key:En(),value:kn(),end:w()}));continue}A()}}}return a(),new ye({properties:i})});function En(){var e=t.token;switch(e.type){case"operator":wn[e.value]||A();case"num":case"string":case"name":case"keyword":case"atom":return a(),""+e.value;case"punc":D("[");var n=Qn();return D("]"),n;default:A()}}function Dn(){var e=t.token.value;return E("name"),e}function On(e,n){var i=n.value;switch(i){case"await":t.in_async&&A(n);break;case"super":e=$e;break;case"this":e=en;break;case"yield":t.in_generator&&A(n)}return new e({name:""+i,start:n,end:n})}function qn(e){"arguments"!=e.name&&"eval"!=e.name&&"let"!=e.name||T(e.start,"Unexpected "+e.name+" in strict mode")}function Fn(e,n){if(!r("name"))return n||x("Name expected"),null;var i=On(e,t.token);return t.input.has_directive("use strict")&&i instanceof Ie&&qn(i),a(),i}function $n(e){var i=t.token;if(r("punc","[")){a();var s=xn("]",!n.strict,!0,function(){return Pn(e)});return new B({start:i,elements:s,rest:s.rest||null,end:w()})}if(r("punc","{")){a();for(var f=!0,c=[],u=null;!r("punc","}")&&(f?f=!1:D(","),n.strict||!r("punc","}"));){var l=t.token;if(r("punc","[")||Bn(o(),"punc",":")){var p=En();D(":"),c.push(new H({start:l,key:p,value:Pn(e),end:w()}))}else{if(r("operator","...")){a(),u=$n(e);break}var h=Fn(e);r("operator","=")&&(a(),h=new AST_DefaultValue({start:h.start,name:h,value:Qn(),end:w()})),c.push(new H({start:l,key:l.value,value:h,end:w()}))}}return D("}"),new Y({start:i,properties:c,rest:u,end:w()})}return Fn(e)}function Pn(e){var n=t.token,i=$n(e);return r("operator","=")?(a(),new AST_DefaultValue({start:n,name:i,value:Qn(),end:w()})):i}function jn(e){for(var n=e?e.start:t.token,i=t.input.context().read_template,o=[],s=[];i(o);)a(),s.push(Zn()),r("punc","}")||A();return a(),new AST_Template({start:n,expressions:s,strings:o,tag:e,end:w()})}function zn(e,t){for(var i=e.start,f=null;;)if(r("operator","?")&&Bn(o(),"punc",".")&&(a(),a(),f=e),r("punc","[")){a();var c=Zn();D("]"),e=new Fe({start:i,optional:f===e,expression:e,property:c,end:w()})}else if(t&&r("punc","("))a(),e=new g({start:i,optional:f===e,expression:e,args:xn(")",!n.strict),end:w()});else if(f===e||r("punc","."))f!==e&&a(),e=new V({start:i,optional:f===e,expression:e,property:Dn(),end:w()});else{if(!r("punc","`"))break;f&&x("Invalid template on optional chain"),e=jn(e)}if(f&&(e.terminal=!0),e instanceof g&&!e.pure)for(var i=e.start,u=i.comments_before,l=s(i,"comments_before_length")?i.comments_before_length:u.length;--l>=0;)if(/[@#]__PURE__/.test(u[l].value)){e.pure=!0;break}return e}function Mn(e){var n=t.token;if(t.in_async&&r("name","await"))return t.in_funarg===t.in_function&&x("Invalid use of await in function argument"),t.input.context().regex_allowed=!0,a(),new h({start:n,expression:Mn(e),end:w()});if(t.in_generator&&r("name","yield")){t.in_funarg===t.in_function&&x("Invalid use of yield in function argument"),t.input.context().regex_allowed=!0,a();var i=null,o=!1;return r("operator","*")?(a(),i=Qn(e),o=!0):(r("punc")?Cn[t.token.value]:q())||(i=Qn(e)),new _n({start:n,expression:i,nested:o,end:w()})}if(r("operator")&&Ln[n.value]){a(),J();var s=In(un,n,Mn(e));return s.start=n,s.end=w(),s}for(var f=Sn(!0);r("operator")&&Un[t.token.value]&&!O(t.token);)(f=In(cn,t.token,f)).start=n,f.end=t.token,a();return f}function In(e,n,i){var r=n.value;switch(r){case"++":case"--":Jn(i)||T(n,"Invalid use of "+r+" operator");break;case"delete":i instanceof Je&&t.input.has_directive("use strict")&&T(i.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:r,expression:i})}var Hn=function(e,n,i){var o=r("operator")?t.token.value:null;"in"==o&&i&&(o=null);var s=null!=o?Vn[o]:null;if(null!=s&&s>n){a();var f=Hn(Mn(i),"**"==o?s-1:s,i);return Hn(new _({start:e.start,left:e,operator:o,right:f,end:f.end}),n,i)}return e};var Kn=function(e){var n=t.token,i=function(e){return Hn(Mn(e),0,e)}(e);if(r("operator","?")){a();var o=Qn();return D(":"),new C({start:n,condition:i,consequent:o,alternative:Qn(e),end:w()})}return i};function Jn(e){return e instanceof Ae&&!e.optional||e instanceof Je}function Xn(e){if(e instanceof u){var n=null;if(e.elements[e.elements.length-1]instanceof AST_Spread&&!((n=Xn(e.elements.pop().expression))instanceof R||Jn(n)))return e;var t=e.elements.map(Xn);return f(t,function(e){return e instanceof AST_DefaultValue||e instanceof R||e instanceof oe||Jn(e)})?new B({start:e.start,elements:t,rest:n,end:e.end}):e}if(e instanceof p){var i=Xn(e.left);return i instanceof R||Jn(i)?new AST_DefaultValue({start:e.start,name:i,value:e.right,end:e.end}):e}if(!(e instanceof ye))return e;var n=null;if(e.properties[e.properties.length-1]instanceof AST_Spread&&!((n=Xn(e.properties.pop().expression))instanceof R||Jn(n)))return e;for(var r=[],o=0;o<e.properties.length;o++){var a=e.properties[o];if(!(a instanceof Se))return e;var s=Xn(a.value);if(!(s instanceof AST_DefaultValue||s instanceof R||Jn(s)))return e;r.push(new H({start:a.start,key:a.key,value:s,end:a.end}))}return new Y({start:e.start,properties:r,rest:n,end:e.end})}function Qn(e){var n=t.token,i=Kn(e),o=t.token.value;if(r("operator")&&Gn[o]){if(Jn(i)||"="==o&&(i=Xn(i))instanceof R)return a(),new p({start:n,left:i,operator:o,right:Qn(e),end:w()});x("Invalid assignment")}return i}function Zn(e,n){for(var i=t.token,s=[];;){if(n&&r("operator","...")){a(),s.rest=$n(Le);break}if(s.push(Qn(e)),!r("punc",","))break;if(a(),n&&r("punc",")")&&Bn(o(),"punc","=>"))break}return 1!=s.length||s.rest?new Oe({start:i,expressions:s,end:w()}):s[0]}function et(e){++t.in_loop;var n=e();return--t.in_loop,n}if(n.expression){J();var nt=Zn();return E("eof"),nt}return function(){var e=t.token,i=[];for(n.module&&(t.in_async=!0,t.input.add_directive("use strict")),t.input.push_directives_stack();!r("eof");)i.push(X(!0));t.input.pop_directives_stack();var o=w()||e,a=n.toplevel;return a?(a.body=a.body.concat(i),a.end=o):a=new on({start:e,body:i,end:o}),a}()}return n.parse=Kn,{is_identifier_string:Nn,is_identifier_char:Mn,is_surrogate_pair_head:function(e){return e>=55296&&e<=56319},is_surrogate_pair_tail:function(e){return e>=56320&&e<=57343},tokenizer:Yn,parse:Kn,KEYWORDS:wn,RESERVED_WORDS:xn,KEYWORDS_BEFORE_EXPRESSION:Tn,KEYWORDS_ATOM:Sn}}),e("skylark-uglifyjs/output",["./utils","./ast","./parse"],function(e,n,t){"use strict";const{defaults:i,makePredicate:r,noop:o,return_false:a,return_true:s}=e,{AST_Array:f,AST_Arrow:c,AST_AsyncArrow:u,AST_AsyncDefun:l,AST_AsyncFunction:p,AST_AsyncGeneratorDefun:h,AST_AsyncGeneratorFunction:d,AST_Assign:_,AST_Await:v,AST_BigInt:m,AST_Binary:g,AST_BlockStatement:b,AST_Break:y,AST_Call:w,AST_Case:S,AST_Catch:x,AST_Chain:T,AST_Class:k,AST_ClassExpression:A,AST_ClassField:E,AST_ClassGetter:D,AST_ClassInit:O,AST_ClassMethod:q,AST_ClassPrivateProperty:C,AST_ClassProperty:F,AST_ClassSetter:$,AST_ClassStaticBlock:P,AST_ConciseMethod:j,AST_Conditional:z,AST_Const:M,AST_Constant:N,AST_Continue:I,AST_Debugger:R,AST_Default:B,AST_DefaultAssign:H,AST_DefaultValue:Y,AST_Definitions:L,AST_Defun:U,AST_Destructuring:G,AST_DestructuredArray:V,AST_DestructuredKeyVal:W,AST_DestructuredObject:K,AST_Destructured:J,AST_Directive:X,AST_Do:Q,AST_Dot:Z,AST_DotHash:ee,AST_EmptyStatement:ne,AST_Exit:te,AST_Expansion:ie,AST_Export:re,AST_ExportDeclaration:oe,AST_ExportDefault:ae,AST_ExportForeign:se,AST_ExportReferences:fe,AST_Finally:ce,AST_For:ue,AST_ForAwaitOf:le,AST_ForIn:pe,AST_ForOf:he,AST_Function:de,AST_GeneratorDefun:_e,AST_GeneratorFunction:ve,AST_Hole:me,AST_If:ge,AST_Import:be,AST_ImportMeta:ye,AST_Jump:we,AST_LabeledStatement:Se,AST_Lambda:xe,AST_Let:Te,AST_LoopControl:ke,AST_NameMapping:Ae,AST_New:Ee,AST_NewTarget:De,AST_Node:Oe,AST_Number:qe,AST_Object:Ce,AST_ObjectGetter:Fe,AST_ObjectKeyVal:$e,AST_ObjectMethod:Pe,AST_ObjectProperty:je,AST_ObjectSetter:ze,AST_PrefixedTemplateString:Me,AST_PropAccess:Ne,AST_PrivateGetter:Ie,AST_PrivateMethod:Re,AST_PrivateSetter:Be,AST_PrivateIn:He,AST_RegExp:Ye,AST_Return:Le,AST_Scope:Ue,AST_Sequence:Ge,AST_SimpleStatement:Ve,AST_Spread:We,AST_Statement:Ke,AST_StatementWithBody:Je,AST_String:Xe,AST_Sub:Qe,AST_Super:Ze,AST_Switch:en,AST_SwitchBranch:nn,AST_Symbol:tn,AST_SymbolClassProperty:rn,AST_SymbolExport:on,AST_SymbolImport:an,AST_SymbolMethod:sn,AST_SymbolPrivateProperty:fn,AST_SymbolRef:cn,AST_Template:un,AST_TemplateSegment:ln,AST_TemplateString:pn,AST_This:hn,AST_Throw:dn,AST_Toplevel:_n,AST_Try:vn,AST_TryBlock:mn,AST_Unary:gn,AST_UnaryPostfix:bn,AST_UnaryPrefix:yn,AST_Var:wn,AST_VarDef:Sn,AST_While:xn,AST_With:Tn,AST_Yield:kn,TreeWalker:An,is_arrow:En,is_generator:Dn,walk:On,walk_abort:qn,first_in_statement:Cn}=n,{is_identifier_char:Fn,is_identifier_string:$n,is_surrogate_pair_head:Pn,is_surrogate_pair_tail:jn,PRECEDENCE:zn,RESERVED_WORDS:Mn}=t;function Nn(e){return"comment2"==e.type&&/@preserve|@license|@cc_on/i.test(e.value)}function In(e){e=i(e,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,extendscript:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var n=a;if(e.comments){var t=e.comments;if("string"==typeof e.comments&&/^\/.*\/[a-zA-Z]*$/.test(e.comments)){var f=e.comments.lastIndexOf("/");t=new RegExp(e.comments.substr(1,f-1),e.comments.substr(f+1))}n=t instanceof RegExp?function(e){return"comment5"!=e.type&&t.test(e.value)}:"function"==typeof t?function(e){return"comment5"!=e.type&&t(this,e)}:"some"===t?Nn:s}function c(e){if("number"==typeof e)return new Array(e+1).join(" ");if(!e)return"";if(!/^\s*$/.test(e))throw new Error("unsupported indentation: "+JSON.stringify(""+e));return e}var u,l,p,h,d,_,v,m=0,b=1,y=c(e.indent_start),w=c(e.indent_level),S=w.length+1>>1,x=0,T=!0,k=e.source_map&&[],A=!1,E=!1,D="";function O(){u="",h=!1,d=!1,v=[];var e=_;return _="",e}O();var q=e.ascii_only?function(e,n){return n&&(e=e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return"\\u{"+(e.charCodeAt(0)-55232<<10|e.charCodeAt(1)-56320).toString(16)+"}"})),e.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var t=e.charCodeAt(0).toString(16);if(t.length<=2&&!n){for(;t.length<2;)t="0"+t;return"\\x"+t}for(;t.length<4;)t="0"+t;return"\\u"+t})}:function(e){for(var n="",t=0,i=0;t<e.length;t++){var r=e.charCodeAt(t);if(Pn(r)){if(jn(e.charCodeAt(t+1))){t++;continue}}else if(!jn(r))continue;n+=e.slice(i,t)+"\\u"+r.toString(16),i=t+1}return 0==i?e:n+e.slice(i)};function C(e){return"'"+e.replace(/\x27/g,"\\'")+"'"}function F(e){return'"'+e.replace(/\x22/g,'\\"')+'"'}var $=[null,C,F,function(e,n){return"'"==n?C(e):F(e)}][e.quote_style]||function(e,n,t,i){return t>i?C(e):F(e)};function P(n,t){var i=0,r=0;return n=n.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(t,o){switch(t){case'"':return++i,'"';case"'":return++r,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return e.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(n.charAt(o+1))?"\\x00":"\\0"}return t}),$(q(n),t,i,r)}var j=k?function(e,n){k.forEach(function(t){t.line+=e,t.col+=n})}:o,M=k?function(){k.forEach(function(n){e.source_map.add(n.token.file,n.line,n.col,n.token.line,n.token.col,n.name||"name"!=n.token.type?n.name:n.token.value)}),k=[]}:o;function N(e){D+=_.slice(0,x);var n=(_=_.slice(x)).length;for(j(e,n-m),b+=e,m=n;e--;)D+="\n"}var I=e.max_line_len?function(n){T?m>e.max_line_len&&Oe.warn("Output exceeds {max_line_len} characters",e):(m>e.max_line_len&&(N(1),T=!0),(T||n)&&M())}:o,R=r("( [ + * / - , .");function B(e,n,t){return Fn(e)&&(Fn(n)||"\\"==n)||"/"==n&&n==e||("+"==n||"-"==n)&&n==u||"--"==u&&">"==n||"!"==u&&"--"==t||"/"==e&&("in"==t||"instanceof"==t)}var H=e.beautify||e.comments||e.max_line_len||e.preserve_line||e.shebang||!e.semicolons||e.source_map||e.width?function(n){var t=n.charAt(0);A&&t&&(A=!1,"\n"!=t&&(H("\n"),L())),E&&t&&(E=!1,/[\s;})]/.test(t)||Y());var i=u.slice(-1);if(d&&(d=!1,":"==i&&"}"==t||";"!=i&&(!t||";}".indexOf(t)<0))){var r=R[t];r||e.semicolons?(_+=";",m++,T||(I(),T&&!r&&";"==_&&(_="",m=0)),x==_.length-1&&x++):(I(),_+="\n",b++,m=0,/^\s+$/.test(n)&&(d=!0)),e.beautify||(h=!1)}h&&(B(i,t,n)&&(_+=" ",m++),"<"==i&&"!"==n||(h=!1)),p&&(k.push({token:p,name:l,line:b,col:m}),p=!1,T&&M()),_+=n;var o=n.split(/\r?\n/),a=o.length-1;b+=a,m+=o[0].length,a>0&&(I(),m=o[a].length),u=n}:function(e){var n=e.charAt(0),t=u.slice(-1);d&&(d=!1,(":"==t&&"}"==n||(!n||";}".indexOf(n)<0)&&";"!=t)&&(_+=";",h=!1)),h&&(B(t,n,e)&&(_+=" "),"<"==t&&"!"==e||(h=!1)),_+=e,u=e},Y=e.beautify?function(){H(" ")}:function(){h=!0},L=e.beautify?function(e){A&&H("\n"),H(e?y.slice(0,-S):y)}:o,U=e.beautify?function(e){var n=y;y+=w,e(),y=n}:function(e){e()},G=e.max_line_len||e.preserve_line?function(){I(),x=_.length,T=!1}:o,V=e.beautify?function(){H("\n"),x=_.length}:G,W=e.beautify?function(){H(";")}:function(){d=!0};var K=k?function(e,n){p=e,l=n}:o;function J(e,n){A||(!e.nlb||!n&&/(^|\n) *$/.test(_)?n&&(E=!0):A=!0)}function X(e){var n=e.value.replace(/[@#]__PURE__/g," ");return!(/^\s*$/.test(n)&&!/^\s*$/.test(e.value))&&(/comment[134]/.test(e.type)?(H("//"+n),A=!0):"comment2"==e.type&&H("/*"+n+"*/"),!0)}return{get:function(){T||I(!0);return D+_},reset:O,indent:L,should_break:e.beautify&&e.width?function(){return m>=e.width}:a,has_parens:function(){return"("==u.slice(-1)},newline:V,print:H,space:Y,comma:function(){G(),H(","),G(),Y()},colon:function(){H(":"),Y()},last:function(){return u},semicolon:W,force_semicolon:function(){d&&H(";");H(";")},to_utf8:q,print_name:function(e){H(q(e.toString(),!0))},print_string:e.inline_script?function(e,n){e=P(e,n).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),H(e.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(e,n){H(P(e,n))},with_indent:U,with_block:function(e,n){H("{"),V(),U(e),K(n),L(),H("}")},with_parens:function(e){H("("),G(),e(),G(),H(")")},with_square:function(e){H("["),G(),e(),G(),H("]")},add_mapping:K,option:function(n){return e[n]},prepend_comments:e.comments||e.shebang?function(t){var i,r=this;t instanceof te?i=t.value:t instanceof kn&&(i=t.expression);var o=c(t);o||(o=[]);if(i){var a=new An(function(e){if(!function(e,n){if(n instanceof g)return n.left===e;if("Call"==n.TYPE)return n.expression===e;if(n instanceof z)return n.condition===e;if(n instanceof Z)return n.expression===e;if(n instanceof te)return!0;if(n instanceof Ge)return n.expressions[0]===e;if(n instanceof Qe)return n.expression===e;if(n instanceof bn)return!0;if(n instanceof kn)return!0}(e,a.parent()))return!0;var n=c(e);n&&(o=o.concat(n))});a.push(t),i.walk(a)}if(1==b&&0==m){o.length>0&&e.shebang&&"comment5"==o[0].type&&(H("#!"+o.shift().value+"\n"),L());var s=e.preamble;s&&H(s.replace(/\r\n?|\u2028|\u2029|(^|\S)\s*$/g,"$1\n"))}var f=!1;(o=o.filter(n,t)).forEach(function(e,n){J(e,n),X(e)&&(f=!0)}),f&&J(t.start,!0);function c(e){var n=e.start;if(!n){if(!i)return;e.start=n=new AST_Token}var t=n.comments_before;if(!t){if(!i)return;n.comments_before=t=[]}if(t._dumped!==r)return t._dumped=r,t}}:o,append_comments:e.comments?function(e,t){var i=e.end;if(!i)return;var r=i[t?"comments_before":"comments_after"];if(!r||r._dumped===this)return;if(!(e instanceof Ke||all(r,function(e){return!/comment[134]/.test(e.type)})))return;r._dumped=this,r.filter(n,e).forEach(function(e,n){J(e,n||!t),X(e)})}:o,push_node:function(e){v.push(e)},pop_node:e.preserve_line?function(){var e=v.pop();e.start&&e.start.line>b&&N(e.start.line-b)}:function(){v.pop()},parent:function(e){return v[v.length-2-(e||0)]}}}return function(){function e(e,n){e.DEFMETHOD("_codegen",n)}var n=!1;Oe.DEFMETHOD("print",function(e,n){var t=this;function i(){e.prepend_comments(t),t.add_source_map(e),t._codegen(e),e.append_comments(t)}e.push_node(t),n||t.needs_parens(e)?e.with_parens(i):i(),e.pop_node()});var t=In({inline_script:!1,shebang:!1,width:!1});function i(e,n){e.DEFMETHOD("needs_parens",n)}function r(e){var n=e.parent();return!e.has_parens()&&Cn(e,!1,!0)?this.name||!(n instanceof ae):!!(e.option("webkit")&&n instanceof Ne&&n.expression===this)||(!!(e.option("wrap_iife")&&n instanceof w&&n.expression===this)||void 0)}function s(e){return!e.has_parens()&&Cn(e,!0)}function m(e){var n=e.parent();return n instanceof g?"**"==n.operator&&n.left===this:n instanceof w?n.expression===this:n instanceof k||(n instanceof Ne?n.expression===this:n instanceof un?n.tag===this:void 0)}function T(e,n){return!!e.terminal&&((n instanceof w||n instanceof Ne)&&n.expression===e)}function C(e,n){var t=n.parent();return t instanceof v||(t instanceof g?!(t instanceof _):t instanceof w?t.expression===e:t instanceof k||(t instanceof z?t.condition===e:t instanceof Ne?t.expression===e:t instanceof un?t.tag===e:t instanceof gn||void 0))}function P(e,t,i,r){var o=e.length-1,a=r,s=n;e.forEach(function(e,r){a&&(e instanceof X?"use asm"==e.value&&(n=!0):e instanceof ne||(e instanceof Ve&&e.body instanceof Xe&&i.force_semicolon(),a=!1)),e instanceof ne||(i.indent(),e.print(i),r==o&&t||(i.newline(),t&&i.newline()))}),n=s}function j(e,n){n.print("{"),n.with_indent(function(){n.append_comments(e,!0)}),n.print("}")}function H(e,n,t){e.body.length>0?n.with_block(function(){P(e.body,!1,n,t)},e.end):j(e,n)}function U(e,n){return function(t){var i=this;t.print(e),t.space(),t.with_parens(function(){i.init.print(t),t.space(),t.print(n),t.space(),i.object.print(t)}),fn(i.body,t)}}function G(e,n){var t=e.value;"*"==t||$n(t)?n.print_name(t):n.print_string(t,e.quote)}function ee(e,n){n.with_parens(function(){e.argnames.forEach(function(e,t){t&&n.comma(),e.print(n)}),e.rest&&(e.argnames.length&&n.comma(),n.print("..."),e.rest.print(n))})}function te(e,n){var t=1==e.argnames.length&&!e.rest&&e.argnames[0];t instanceof AST_SymbolFunarg&&"yield"!=t.name?t.print(n):ee(e,n),n.space(),n.print("=>"),n.space(),e.value?e.value.print(n):H(e,n,!0)}function ie(e,n){e.name&&(n.space(),e.name.print(n)),ee(e,n),n.space(),H(e,n,!0)}function re(e){e.print("async"),e.space(),e.print("function"),ie(this,e)}function ye(e){e.print("async"),e.space(),e.print("function*"),ie(this,e)}function ke(e){e.print("function*"),ie(this,e)}function Ae(e,n){var t=e.value;is_async(t)&&(n.print("async"),n.space()),Dn(t)&&n.print("*"),Ze(e,n),ie(e.value,n)}function De(e,n){return function(t){t.print(e);var i=this[n];i&&(t.space(),i.print(t)),t.semicolon()}}function Me(e,n){n.newline(),e.body.forEach(function(e){n.indent(),e.print(n),n.newline()})}function Ie(e){return function(n){n.print(e),n.space(),this.definitions.forEach(function(e,t){t&&n.comma(),e.print(n)});var t=n.parent();t instanceof AST_IterationStatement&&t.init===this||n.semicolon()}}function Re(e,n,t){var i=!1;t&&e.walk(new An(function(e){return!!i||(e instanceof g&&"in"==e.operator?i=!0:e instanceof Ue&&(!En(e)||!e.value)||void 0)})),e.print(n,i)}function Be(e,n){if(n.option("annotations")&&e.pure){var t,i=0,r=e;do{if(t=r,(r=n.parent(i++))instanceof w&&r.expression===t)return}while(r instanceof Ne&&r.expression===t);n.print("/*@__PURE__*/")}}function He(e,n){n.with_parens(function(){e.args.forEach(function(e,t){t&&n.comma(),e.print(n)}),n.add_mapping(e.end)})}function Ke(e,n,t){var i=e.properties;i.length>0?n.with_block(function(){i.forEach(function(e,i){i&&(t||n.print(","),n.newline()),n.indent(),e.print(n)}),n.newline()},e.end):j(e,n)}function Ze(e,n){var t=e.key;if(t instanceof Oe)return n.with_square(function(){t.print(n)});var i=e.start&&e.start.quote;if(n.option("quote_keys")||i&&n.option("keep_quoted_props"))n.print_string(t,i);else if(""+ +t==t&&t>=0)n.print(ln(t));else if(e.private)n.print_name(t);else{if(Mn[t]?!n.option("ie"):$n(t))return n.print_name(t),t;n.print_string(t,i)}}function rn(e){return function(n){this.static&&(n.print("static"),n.space()),n.print(e),n.space(),Ze(this,n),ie(this.value,n)}}function sn(e){var n=e.definition();return n&&n.mangled_name||e.name}function fn(e,n){n.option("braces")&&!(e instanceof M||e instanceof Te)?pn(e,n):e instanceof ne?n.force_semicolon():(n.space(),e.print(n))}function cn(e,n){return e.args.length>0||n.option("beautify")}function ln(e){var n,t,i,r=e.toString(10).replace(/^0\./,".").replace("e+","e"),o=[r];return Math.floor(e)===e&&(e<0?o.push("-0x"+(-e).toString(16).toLowerCase()):o.push("0x"+e.toString(16).toLowerCase())),(n=/^\.0+/.exec(r))?(t=n[0].length,i=r.slice(t),o.push(i+"e-"+(i.length+t-1))):(n=/[^0]0+$/.exec(r))?(t=n[0].length-1,o.push(r.slice(0,-t)+"e"+t)):(n=/^(\d)\.(\d+)e(-?\d+)$/.exec(r))&&o.push(n[1]+n[2]+"e"+(n[3]-n[2].length)),function(e){for(var n=e[0],t=n.length,i=1;i<e.length;++i)e[i].length<t&&(n=e[i],t=n.length);return n}(o)}function pn(e,n){n.space(),e instanceof ne?j(e,n):e instanceof b?e.print(n):n.with_block(function(){n.indent(),e.print(n),n.newline()},e.end)}function hn(e,n){e.forEach(function(e){e.DEFMETHOD("add_source_map",n)})}Oe.DEFMETHOD("print_to_string",function(e){if(e){var n=In(e);return this.print(n),n.get()}return this.print(t),t.reset()}),i(Oe,a),i(p,r),i(d,r),i(A,r),i(de,r),i(ve,r),i(Ce,s),i(v,m),i(gn,m),i(Ge,function(e){var n=e.parent();return n instanceof f||En(n)&&n.value===this||n instanceof v||n instanceof g||n instanceof w||n instanceof k||n instanceof F||n instanceof z||n instanceof Y||n instanceof W||n instanceof ae||n instanceof he||n instanceof je||n instanceof Ne&&n.expression===this||n instanceof We||n instanceof un&&n.tag===this||n instanceof gn||n instanceof Sn||n instanceof kn}),i(g,function(e){var n=e.parent();if(n instanceof v)return!0;if(n instanceof g){var t=n.operator,i=zn[t],r=this.operator,o=zn[r];return i>o||"??"==t&&("&&"==r||"||"==r)||i==o&&this===n["**"==t?"left":"right"]}return n instanceof w?n.expression===this:n instanceof k||(n instanceof Ne?n.expression===this:n instanceof un?n.tag===this:n instanceof gn||void 0)}),i(Ne,function(e){var n=e.parent();return n instanceof Ee&&n.expression===this&&"Call"==root_expr(this).TYPE||T(this,n)}),i(w,function(e){var n=e.parent();if(n instanceof Ee)return n.expression===this;if(e.option("webkit")&&this.expression instanceof de&&n instanceof Ne&&n.expression===this){var t=e.parent(1);if(t instanceof _&&t.left===n)return!0}return T(this,n)}),i(Ee,function(e){if(cn(this,e))return!1;var n=e.parent();return n instanceof w?n.expression===this:n instanceof Ne||(n instanceof un?n.tag===this:void 0)}),i(qe,function(e){if(!e.option("galio"))return!1;var n=e.parent();return n instanceof Ne&&n.expression===this&&/^0/.test(ln(this.value))}),i(c,function(e){return C(this,e)}),i(_,function(e){return!!C(this,e)||(e.option("v8")?this.left instanceof J:this.left instanceof K?s(e):void 0)}),i(u,function(e){return C(this,e)}),i(z,function(e){return C(this,e)||e.option("extendscript")&&e.parent()instanceof z}),i(kn,function(e){return C(this,e)}),e(X,function(e){var n=this.quote,t=this.value;switch(e.option("quote_style")){case 0:case 2:-1==t.indexOf('"')&&(n='"');break;case 1:-1==t.indexOf("'")&&(n="'")}e.print(n+t+n),e.semicolon()}),e(R,function(e){e.print("debugger"),e.semicolon()}),e(_n,function(e){P(this.body,!0,e,!0),e.print("")}),e(Se,function(e){this.label.print(e),e.colon(),this.body.print(e)}),e(Ve,function(e){this.body.print(e),e.semicolon()}),e(b,function(e){H(this,e)}),e(ne,function(e){e.semicolon()}),e(Q,function(e){var n=this;e.print("do"),pn(n.body,e),e.space(),e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),e.semicolon()}),e(xn,function(e){var n=this;e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),fn(n.body,e)}),e(ue,function(e){var n=this;e.print("for"),e.space(),e.with_parens(function(){n.init?(n.init instanceof L?n.init.print(e):Re(n.init,e,!0),e.print(";"),e.space()):e.print(";"),n.condition?(n.condition.print(e),e.print(";"),e.space()):e.print(";"),n.step&&n.step.print(e)}),fn(n.body,e)}),e(le,U("for await","of")),e(pe,U("for","in")),e(he,U("for","of")),e(Tn,function(e){var n=this;e.print("with"),e.space(),e.with_parens(function(){n.expression.print(e)}),fn(n.body,e)}),e(oe,function(e){e.print("export"),e.space(),this.body.print(e)}),e(ae,function(e){e.print("export"),e.space(),e.print("default"),e.space();var n=this.body;n.print(e),n instanceof A&&!n.name||n instanceof AST_DefClass||n instanceof AST_LambdaDefinition||n instanceof AST_LambdaExpression&&!n.name&&!En(n)||e.semicolon()}),e(se,function(e){var n=this;e.print("export"),e.space();var t=n.keys.length;function i(t){var i=n.aliases[t],r=n.keys[t];G(r,e),i.value!=r.value&&(e.space(),e.print("as"),e.space(),G(i,e))}0==t?j(n,e):"*"==n.keys[0].value?i(0):e.with_block(function(){e.indent(),i(0);for(var n=1;n<t;n++)e.print(","),e.newline(),e.indent(),i(n);e.newline()},n.end),e.space(),e.print("from"),e.space(),n.path.print(e),e.semicolon()}),e(fe,function(e){e.print("export"),e.space(),Ke(this,e),e.semicolon()}),e(be,function(e){e.print("import"),e.space(),this.default&&this.default.print(e),this.all&&(this.default&&e.comma(),this.all.print(e)),this.properties&&(this.default&&e.comma(),Ke(this,e)),(this.all||this.default||this.properties)&&(e.space(),e.print("from"),e.space()),this.path.print(e),e.semicolon()}),e(c,function(e){te(this,e)}),e(u,function(e){e.print("async"),e.space(),te(this,e)}),e(xe,function(e){e.print("function"),ie(this,e)}),e(l,re),e(p,re),e(h,ye),e(d,ye),e(_e,ke),e(ve,ke),e(k,function(e){e.print("class"),this.name&&(e.space(),this.name.print(e)),this.extends&&(e.space(),e.print("extends"),e.space(),this.extends.print(e)),e.space(),Ke(this,e,!0)}),e(E,function(e){this.static&&(e.print("static"),e.space()),Ze(this,e),this.value&&(e.space(),e.print("="),e.space(),this.value.print(e)),e.semicolon()}),e(D,rn("get")),e($,rn("set")),e(q,function(e){this.static&&(e.print("static"),e.space()),Ae(this,e)}),e(O,function(e){e.print("static"),e.space(),H(this.value,e)}),e(Le,De("return","value")),e(dn,De("throw","value")),e(y,De("break","label")),e(I,De("continue","label")),e(ge,function(e){var n=this;e.print("if"),e.space(),e.with_parens(function(){n.condition.print(e)}),n.alternative?(!function(e,n){var t=e.body;if(n.option("braces")&&!(t instanceof M||t instanceof Te)||n.option("ie")&&t instanceof Q)return pn(t,n);if(!t)return n.force_semicolon();for(;;)if(t instanceof ge){if(!t.alternative)return void pn(e.body,n);t=t.alternative}else{if(!(t instanceof Je))break;t=t.body}fn(e.body,n)}(n,e),e.space(),e.print("else"),n.alternative instanceof ge?(e.space(),n.alternative.print(e)):fn(n.alternative,e)):fn(n.body,e)}),e(en,function(e){var n=this;e.print("switch"),e.space(),e.with_parens(function(){n.expression.print(e)}),e.space();var t=n.body.length-1;t<0?j(n,e):e.with_block(function(){n.body.forEach(function(n,i){e.indent(!0),n.print(e),i<t&&n.body.length>0&&e.newline()})},n.end)}),e(B,function(e){e.print("default:"),Me(this,e)}),e(S,function(e){e.print("case"),e.space(),this.expression.print(e),e.print(":"),Me(this,e)}),e(vn,function(e){e.print("try"),e.space(),H(this,e),this.bcatch&&(e.space(),this.bcatch.print(e)),this.bfinally&&(e.space(),this.bfinally.print(e))}),e(x,function(e){var n=this;e.print("catch"),n.argname&&(e.space(),e.with_parens(function(){n.argname.print(e)})),e.space(),H(n,e)}),e(ce,function(e){e.print("finally"),e.space(),H(this,e)}),e(M,Ie("const")),e(Te,Ie("let")),e(wn,Ie("var")),e(Sn,function(e){if(this.name.print(e),this.value){e.space(),e.print("="),e.space();var n=e.parent(1),t=n instanceof ue||n instanceof AST_ForEnumeration;Re(this.value,e,t)}}),e(Y,function(e){this.name.print(e),e.space(),e.print("="),e.space(),this.value.print(e)}),e(w,function(e){Be(this,e),this.expression.print(e),this.optional&&e.print("?."),He(this,e)}),e(Ee,function(e){Be(this,e),e.print("new"),e.space(),this.expression.print(e),cn(this,e)&&He(this,e)}),e(Ge,function(e){this.expressions.forEach(function(n,t){t>0&&(e.comma(),e.should_break()&&(e.newline(),e.indent())),n.print(e)})}),e(Z,function(e){var n=this,t=n.expression;t.print(e);var i=n.property;e.option("ie")&&Mn[i]||n.quoted&&e.option("keep_quoted_props")?(n.optional&&e.print("?."),e.with_square(function(){e.add_mapping(n.end),e.print_string(i)})):(t instanceof qe&&!/[ex.)]/i.test(e.last())&&e.print("."),e.print(n.optional?"?.":"."),e.add_mapping(n.end),e.print_name(i))}),e(Qe,function(e){var n=this;n.expression.print(e),n.optional&&e.print("?."),e.with_square(function(){n.property.print(e)})}),e(We,function(e){e.print("..."),this.expression.print(e)}),e(yn,function(e){var n=this.operator,t=this.expression;e.print(n),(/^[a-z]/i.test(n)||/[+-]$/.test(n)&&t instanceof yn&&/^[+-]/.test(t.operator))&&e.space(),t.print(e)}),e(bn,function(e){this.expression.print(e),e.add_mapping(this.end),e.print(this.operator)}),e(g,function(e){this.left.print(e),e.space(),e.print(this.operator),e.space(),this.right.print(e)}),e(z,function(e){this.condition.print(e),e.space(),e.print("?"),e.space(),this.consequent.print(e),e.space(),e.colon(),this.alternative.print(e)}),e(v,function(e){e.print("await"),e.space(),this.expression.print(e)}),e(kn,function(e){e.print(this.nested?"yield*":"yield"),this.expression&&(e.space(),this.expression.print(e))}),e(f,function(e){var n=this.elements,t=n.length;e.with_square(t>0?function(){e.space(),n.forEach(function(n,i){i&&e.comma(),n.print(e),i===t-1&&n instanceof me&&e.comma()}),e.space()}:o)}),e(V,function(e){var n=this.elements,t=n.length,i=this.rest;e.with_square(t||i?function(){e.space(),n.forEach(function(n,t){t&&e.comma(),n.print(e)}),i?(t&&e.comma(),e.print("..."),i.print(e)):n[t-1]instanceof me&&e.comma(),e.space()}:o)}),e(W,function(e){var n=Ze(this,e),t=this.value;if(n)if(t instanceof Y){if(t.name instanceof tn&&n==sn(t.name))return e.space(),e.print("="),e.space(),void t.value.print(e)}else if(t instanceof tn&&n==sn(t))return;e.colon(),t.print(e)}),e(K,function(e){var n=this.properties,t=n.length,i=this.rest;t||i?e.with_block(function(){n.forEach(function(n,t){t&&(e.print(","),e.newline()),e.indent(),n.print(e)}),i&&(t&&(e.print(","),e.newline()),e.indent(),e.print("..."),i.print(e)),e.newline()},this.end):j(this,e)}),e(Ce,function(e){Ke(this,e)}),e($e,function(e){Ze(this,e),e.colon(),this.value.print(e)}),e(Pe,function(e){Ae(this,e)}),e(Fe,rn("get")),e(ze,rn("set")),e(tn,function(e){e.print_name(sn(this))}),e(on,function(e){var n=sn(this);e.print_name(n);var t=this.alias;t.value!=n&&(e.space(),e.print("as"),e.space(),G(t,e))}),e(an,function(e){var n=sn(this),t=this.key;t.value&&t.value!=n&&(G(t,e),e.space(),e.print("as"),e.space()),e.print_name(n)}),e(me,o),e(un,function(e){this.tag&&this.tag.print(e),e.print("`");for(var n=0;n<this.expressions.length;n++)e.print(this.strings[n]),e.print("${"),this.expressions[n].print(e),e.print("}");e.print(this.strings[n]),e.print("`")}),e(N,function(e){e.print(""+this.value)}),e(Xe,function(e){e.print_string(this.value,this.quote)}),e(qe,function(e){var t=this.start;n&&t&&null!=t.raw?e.print(t.raw):e.print(ln(this.value))}),e(Ye,function(e){var n=this.value,t=n.toString(),i=t.lastIndexOf("/");n.raw_source?t="/"+n.raw_source+t.slice(i):1==i?t="/(?:)"+t.slice(i):t.indexOf("/",1)<i&&(t="/"+t.slice(1,i).replace(/\\\\|[^/]?\//g,function(e){return"\\"==e[0]?e:e.slice(0,-1)+"\\/"})+t.slice(i)),e.print(e.to_utf8(t).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(e){switch(e[1]){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\t";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}).replace(/[\n\r\u2028\u2029]/g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}),hn([Oe,Se],o),hn([f,v,b,x,N,R,L,J,X,ce,we,xe,Ee,Ce,We,Je,tn,en,nn,vn,yn,kn],function(e){e.add_mapping(this.start)}),hn([F,W,je],function(e){"string"==typeof this.key&&e.add_mapping(this.start,this.key)})}(),{OutputStream:In}}),e("skylark-uglifyjs/scope",["./utils","./ast","./parse"],function(e,n,t){"use strict";const{defaults:i,keep_name:r,mergeSort:o,member:a,push_uniq:s,make_node:f,return_false:c,return_this:u,return_true:l,string_template:p,DEF_BITPROPS:h,makePredicate:d,Dictionary:_}=e,{AST_Arrow:v,AST_Assign:m,AST_AsyncArrow:g,AST_Block:b,AST_Call:y,AST_Catch:w,AST_Class:S,AST_Conditional:x,AST_DefClass:T,AST_Definitions:k,AST_DefaultValue:A,AST_Defun:E,AST_Destructuring:D,AST_Destructured:O,AST_DestructuredKeyVal:q,AST_Dot:C,AST_DotHash:F,AST_Export:$,AST_ExportDeclaration:P,AST_For:j,AST_ForIn:z,AST_ForOf:M,AST_ForEnumeration:N,AST_Function:I,AST_Import:R,AST_IterationStatement:B,AST_Label:H,AST_LabeledStatement:Y,AST_LabelRef:L,AST_Lambda:U,AST_LambdaDefinition:G,AST_LoopControl:V,AST_NameMapping:W,AST_Node:K,AST_Scope:J,AST_Sequence:X,AST_String:Q,AST_Sub:Z,AST_Switch:ee,AST_SwitchBranch:ne,AST_Symbol:te,AST_SymbolBlockDeclaration:ie,AST_SymbolCatch:re,AST_SymbolClass:oe,AST_SymbolConst:ae,AST_SymbolDeclaration:se,AST_SymbolDefClass:fe,AST_SymbolDefun:ce,AST_SymbolExport:ue,AST_SymbolFunarg:le,AST_SymbolImport:pe,AST_SymbolLambda:he,AST_SymbolLet:de,AST_SymbolMethod:_e,AST_SymbolRef:ve,AST_SymbolVar:me,AST_Toplevel:ge,AST_Try:be,AST_VarDef:ye,AST_With:we,TreeWalker:Se,walk_body:xe,walk_lambda:Te,AST_BlockScope:ke,AST_Unary:Ae}=n,{RESERVED_WORDS:Ee}=t;function De(e,n,t,i){this._bits=0,this.defun=void 0,this.eliminated=0,this.id=e,this.init=i,this.mangled_name=null,this.name=t.name,this.orig=[t],this.references=[],this.replaced=0,this.safe_ids=void 0,this.scope=n}function Oe(e){return e.orig[0]instanceof le||e.orig[1]instanceof le}De.prototype={forEach:function(e){this.orig.forEach(e),this.references.forEach(e)},mangle:function(e){if(!this.mangled_name){var n=this.global&&e.cache&&e.cache.props;if(n&&n.has(this.name))this.mangled_name=n.get(this.name);else if(this.unmangleable(e))Pe(this.scope,e).set(this.name,!0);else{var t=this.redefined();this.mangled_name=t?t.mangled_name||t.name:function(e,n){var t,i=e.scope,r=Pe(i,n),o=i.cname_holes,s=new _,f=[i];e.forEach(function(e){var t=e.scope;do{if(a(t,f))break;Pe(t,n).each(function(e,n){s.set(n,e)}),f.push(t)}while(t=t.parent_scope)});for(var c=0;c<o.length;c++)if(t=ze(o[c]),!s.has(t))return o.splice(c,1),r.set(t,!0),t;for(;;)if(t=ze(++i.cname),!(r.has(t)||Ee[t]||n.reserved.has[t])){if(!s.has(t))break;o.push(i.cname)}return r.set(t,!0),t}(this,e),n&&n.set(this.name,this.mangled_name)}}},redefined:function(){var e=this.defun;if(e){var n=this.name,t=e.variables.get(n)||e instanceof ge&&e.globals.get(n)||this.orig[0]instanceof ae&&find_if(function(e){return e.name==n},e.enclosed);return t&&t!==this?t.redefined()||t:void 0}},unmangleable:function(e){if(this.exported)return!0;if(this.undeclared)return!0;if(!e.eval&&this.scope.pinned())return!0;if(e.keep_fargs&&Oe(this))return!0;if(e.keep_fnames){var n=this.orig[0];if(n instanceof oe)return!0;if(n instanceof fe)return!0;if(n instanceof ce)return!0;if(n instanceof he)return!0}return!(e.toplevel||!this.global)}},h(De,["const_redefs","cross_loop","direct_access","exported","global","undeclared"]);var qe=d("delete ++ --");function Ce(e,n){return n instanceof m?n.left===e&&e:n instanceof A?n.name===e&&e:n instanceof O?e:n instanceof q?e:n instanceof N?n.init===e&&e:n instanceof Ae?qe[n.operator]&&n.expression:void 0}function Fe(e,n){e.enclosed=[],e.parent_scope=n,e.functions=new _,e.variables=new _,n&&(e.make_def=n.make_def)}function $e(e,n){Fe(e,n),e.uses_eval=!1,e.uses_with=!1}function Pe(e,n){var t=e.names_in_use;if(!t){e.cname=-1,e.cname_holes=[],e.names_in_use=t=new _;var i=n.cache&&n.cache.props;e.enclosed.forEach(function(e){e.unmangleable(n)&&t.set(e.name,!0),e.global&&i&&i.has(e.name)&&t.set(i.get(e.name),!0)})}return t}function je(e){return e=i(e,{eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(e.reserved)||(e.reserved=[]),s(e.reserved,"arguments"),e.reserved.has=d(e.reserved),e}ge.DEFMETHOD("figure_out_scope",function(e){e=i(e,{cache:null,ie:!1});var n=this,t=null,r=!1,o=0,a=n.parent_scope=null,f=new Se(function(n,i){if(n instanceof T){var o=r;return r=f.parent()instanceof P,n.name.walk(f),r=o,u(function(){n.extends&&n.extends.walk(f),n.properties.forEach(function(e){e.walk(f)})}),!0}if(n instanceof k){var o=r;return r=f.parent()instanceof P,i(),r=o,!0}if(n instanceof G){var o=r;return r=f.parent()instanceof P,n.name.walk(f),r=o,u(function(){n.argnames.forEach(function(e){e.walk(f)}),n.rest&&n.rest.walk(f),xe(n,f)}),!0}if(n instanceof ne)return n.init_vars(a),i(),!0;if(n instanceof be)return u(function(){xe(n,f)}),n.bcatch&&n.bcatch.walk(f),n.bfinally&&n.bfinally.walk(f),!0;if(n instanceof we){var s=a;do{if((s=s.resolve()).uses_with)break;s.uses_with=!0}while(s=s.parent_scope);return u(i),!0}if(n instanceof ke)return u(i),!0;if(n instanceof te&&(n.scope=a),n instanceof H&&(n.thedef=n,n.references=[]),n instanceof re)a.def_variable(n).defun=t;else if(n instanceof ae){var c=a.def_variable(n);c.defun=t,r&&(c.exported=!0)}else if(n instanceof ce){var c=t.def_function(n,f.parent());r&&(c.exported=!0)}else if(n instanceof le)t.def_variable(n);else if(n instanceof he){var c=t.def_function(n,"arguments"==n.name?void 0:t);e.ie&&"arguments"!=n.name&&(c.defun=t.parent_scope.resolve())}else if(n instanceof de){var c=a.def_variable(n);r&&(c.exported=!0)}else if(n instanceof me){var c=t.def_variable(n,n instanceof pe?void 0:null);r&&(c.exported=!0)}function u(e){n.init_vars(a);var i=t,r=a;n instanceof J&&(t=n),a=n,e(),a=r,t=i}});n.make_def=function(e,n){return new De(++o,this,e,n)},n.walk(f),n.globals=new _;var c=[],f=new Se(function(t){if(t instanceof w){if(!(t.argname instanceof O))return;return c.push(t),t.argname.walk(f),c.pop(),xe(t,f),!0}if(t instanceof U)return c.push(t),t.name&&t.name.walk(f),t.argnames.forEach(function(e){e.walk(f)}),t.rest&&t.rest.walk(f),c.pop(),Te(t,f),!0;if(t instanceof V)return t.label&&t.label.thedef.references.push(t),!0;if(t instanceof se){var i=t.definition();if(i.preinit=i.references.length,t instanceof re){var r=i.redefined();if(r)for(var o=t.scope;o&&s(o.enclosed,r)&&o!==r.scope;o=o.parent_scope);}else if(t instanceof ae){var r=i.redefined();r&&(r.const_redefs=!0)}else if(i.scope!==t.scope&&(t instanceof ce||t instanceof le||t instanceof me)){t.mark_enclosed(e);var r=t.scope.find_variable(t.name);t.thedef!==r&&(t.thedef=r,r.orig.push(t),t.mark_enclosed(e))}if("arguments"!=t.name)return!0;var a=t instanceof me&&f.parent();if(a instanceof ye&&!a.value)return!0;var l=t.scope.resolve().find_variable("arguments");return l&&u(l)&&(l.scope.uses_arguments=3),!0}if(t instanceof ve){for(var p=t.name,l=t.scope.find_variable(p),h=c.length;h>0&&l&&!((h=c.lastIndexOf(l.scope,h-1))<0);){var d=l.orig[0];if(d instanceof re||d instanceof le||d instanceof he){t.in_arg=!0;break}l=l.scope.parent_scope.find_variable(p)}if(l){if("arguments"==p&&u(l)){var a=f.parent();Ce(t,a)?l.scope.uses_arguments=3:l.scope.uses_arguments<2&&!(a instanceof AST_PropAccess&&a.expression===t)?l.scope.uses_arguments=2:l.scope.uses_arguments||(l.scope.uses_arguments=!0)}}else l=n.def_global(t);if("eval"==p){var a=f.parent();if("Call"==a.TYPE&&a.expression===t){var o=t.scope;do{if((o=o.resolve()).uses_eval)break;o.uses_eval=!0}while(o=o.parent_scope)}else l.undeclared&&(n.uses_eval=!0)}if(l.init instanceof G&&l.scope!==l.init.name.scope){var _=t.scope;do{if(_===l.init.name.scope)break}while(_=_.parent_scope);_||(l.init=void 0)}return t.thedef=l,t.reference(e),!0}});function u(e){return e.orig[0]instanceof le&&!(e.orig[1]instanceof le||e.orig[2]instanceof le)&&!is_arrow(e.scope)}function l(t,i){var r=t.name,o=t.thedef;if(!all(o.orig,function(e){return!(e instanceof ae||e instanceof de)}))return!1;var a=i.find_variable(r);if(a){var s=a.redefined();s&&(a=s)}else a=n.globals.get(r);return a?a.orig.push(t):a=i.def_variable(t),a.undeclared&&n.variables.set(r,a),!!("arguments"==r&&u(o)&&t instanceof he)||(o.defun=a.scope,o.forEach(function(n){n.redef=o,n.thedef=a,n.reference(e)}),!0)}n.walk(f),e.ie&&n.walk(new Se(function(e){if(e instanceof re){var n=e.thedef,t=n.defun;return"arguments"!=n.name&&t.name instanceof he&&t.name.name==n.name&&(t=t.parent_scope.resolve()),l(e,t),!0}if(e instanceof he){var n=e.thedef;return l(e,e.scope.parent_scope.resolve())?void 0!==e.thedef.init?e.thedef.init=!1:n.init&&(e.thedef.init=n.init):n.defun=void 0,!0}}))}),ge.DEFMETHOD("def_global",function(e){var n=this.globals,t=e.name;if(n.has(t))return n.get(t);var i=this.make_def(e);return i.undeclared=!0,i.global=!0,n.set(t,i),i}),ke.DEFMETHOD("init_vars",function(e){Fe(this,e)}),J.DEFMETHOD("init_vars",function(e){$e(this,e)}),v.DEFMETHOD("init_vars",function(e){return $e(this,e),this}),g.DEFMETHOD("init_vars",function(e){$e(this,e)}),U.DEFMETHOD("init_vars",function(e){return $e(this,e),this.uses_arguments=!1,this.def_variable(new le({name:"arguments",scope:this,start:this.start,end:this.end})),this}),te.DEFMETHOD("mark_enclosed",function(e){for(var n=this.definition(),t=this.scope;t&&s(t.enclosed,n)&&(e?(e.keep_fargs&&t instanceof U&&t.each_argname(function(e){s(n.scope.enclosed,e.definition())}),e.keep_fnames&&t.functions.each(function(e){s(n.scope.enclosed,e)})):t._var_names=void 0,t!==n.scope);t=t.parent_scope);}),te.DEFMETHOD("reference",function(e){this.definition().references.push(this),this.mark_enclosed(e)}),ke.DEFMETHOD("find_variable",function(e){return this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),ke.DEFMETHOD("def_function",function(e,n){var t=this.def_variable(e,n);return(!t.init||t.init instanceof G)&&(t.init=n),this.functions.set(e.name,t),t}),ke.DEFMETHOD("def_variable",function(e,n){var t=this.variables.get(e.name);return t?(t.orig.push(e),t.init instanceof AST_LambdaExpression&&(t.init=n)):(t=this.make_def(e,n),this.variables.set(e.name,t),t.global=!this.parent_scope),e.thedef=t}),te.DEFMETHOD("unmangleable",function(e){var n=this.definition();return!n||n.unmangleable(e)}),H.DEFMETHOD("unmangleable",c),te.DEFMETHOD("definition",function(){return this.thedef}),ge.DEFMETHOD("mangle_names",function(e){if((e=je(e)).cache&&e.cache.props){var n=Pe(this,e);e.cache.props.each(function(e){n.set(e,!0)})}var t=-1,i=[],r=new Se(function(n,a){var s;if(n instanceof ke){n instanceof Y&&(s=t),e.webkit&&n instanceof B&&n.init instanceof AST_Let&&n.init.definitions.forEach(function(e){e.name.match_symbol(function(e){if(e instanceof de){var n=e.definition(),t=e.scope.parent_scope,i=t.def_variable(e);e.thedef=n,t.to_mangle.push(i),n.redefined=function(){return i}}})},!0);var f=n.to_mangle=[];if(n.variables.each(function(n){(function(n){var t=n.orig[0],r=n.redefined();if(!r){if(!(t instanceof ae))return!1;var o=n.scope.resolve();if(n.scope===o)return!1;if(n.scope.parent_scope.find_variable(t.name))return!1;r=o.def_variable(t),o.to_mangle.push(r)}i.push(n),n.references.forEach(a),(t instanceof re||t instanceof ae)&&(a(t),n.redefined=function(){return r});return!0;function a(t){t.thedef=r,t.reference(e),t.thedef=n}})(n)||f.push(n)}),a(),e.cache&&n instanceof ge&&n.globals.each(o),n instanceof E&&r.has_directive("use asm")){var c=new ve(n.name);c.scope=n,c.reference(e)}if(f.length>36){var u=f.map(function(e,n){return n}).sort(function(e,n){return f[n].references.length-f[e].references.length||e-n});f=u.slice(0,36).sort(function(e,n){return e-n}).map(function(e){return f[e]}).concat(u.slice(36).sort(function(e,n){return e-n}).map(function(e){return f[e]}))}return f.forEach(o),!(n instanceof Y)||e.v8&&function(n){var t,i=0;for(;t=n.parent(i++);){if(t instanceof b)return t instanceof ge&&!e.toplevel;if(t instanceof Y)return!0}}(r)||(t=s),!0}if(n instanceof H){var l;do{l=ze(++t)}while(Ee[l]);return n.mangled_name=l,!0}});function o(n){e.reserved.has[n.name]||n.mangle(e)}this.walk(r),i.forEach(o)}),ge.DEFMETHOD("find_colliding_names",function(e){var n=e.cache&&e.cache.props,t=Object.create(Ee);return e.reserved.forEach(i),this.globals.each(r),this.walk(new Se(function(e){e instanceof ke&&e.variables.each(r)})),t;function i(e){t[e]=!0}function r(t){var r=t.name;if(t.global&&n&&n.has(r))r=n.get(r);else if(!t.unmangleable(e))return;i(r)}}),ge.DEFMETHOD("expand_names",function(e){ze.reset(),ze.sort(),e=je(e);var n=this.find_colliding_names(e),t=0;function i(i){if(!(i.global&&e.cache||i.unmangleable(e)||e.reserved.has[i.name])){var r=i.redefined(),o=r?r.rename||r.name:function(){var e;do{e=ze(t++)}while(n[e]);return e}();i.rename=o,i.forEach(function(e){e.definition()===i&&(e.name=o)})}}this.globals.each(i),this.walk(new Se(function(e){e instanceof ke&&e.variables.each(i)}))}),K.DEFMETHOD("tail_node",u),X.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),ge.DEFMETHOD("compute_char_frequency",function(e){e=je(e),ze.reset();var n=te.prototype.add_source_map;try{te.prototype.add_source_map=function(){this.unmangleable(e)||ze.consider(this.name,-1)},e.properties&&(C.prototype.add_source_map=function(){ze.consider(this.property,-1)},Z.prototype.add_source_map=function(){!function e(n){n instanceof Q?ze.consider(n.value,-1):n instanceof x?(e(n.consequent),e(n.alternative)):n instanceof X&&e(n.tail_node())}(this.property)}),ze.consider(this.print_to_string(),1)}finally{te.prototype.add_source_map=n,delete C.prototype.add_source_map,delete Z.prototype.add_source_map}ze.sort()});var ze=function(){var e=Object.create(null);function n(n){for(var t=[],i=0;i<n.length;i++){var r=n[i];t.push(r),e[r]=-.01*i}return t}var t,i,r=n("0123456789"),o=n("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_");function a(){t=null,i=Object.create(e)}function s(e,n){return i[n]-i[e]}function f(e){var n=o[e%54];for(e=Math.floor(e/54);--e>=0;e>>=6)n+=t[63&e];return n}return f.consider=function(e,n){for(var t=e.length;--t>=0;)i[e[t]]+=n},f.sort=function(){t=o.sort(s).concat(r).sort(s)},f.reset=a,a(),f}();return{base54:ze,is_lhs:Ce,is_funarg:Oe}}),e("skylark-uglifyjs/compress",["./utils","./ast","./output","./parse","./scope"],function(e,n,t,i,r){"use strict";const{AST_Accessor:o,AST_Array:a,AST_Arrow:s,AST_Assign:f,AST_AsyncArrow:c,AST_Await:u,AST_BigInt:l,AST_Binary:p,AST_Block:h,AST_BlockScope:d,AST_BlockStatement:_,AST_Boolean:v,AST_Break:m,AST_Call:g,AST_Case:b,AST_Catch:y,AST_Chain:w,AST_Class:S,AST_ClassExpression:x,AST_ClassField:T,AST_ClassInitBlock:k,AST_ClassProperty:A,AST_ClassStaticBlock:E,AST_ConciseMethod:D,AST_Conditional:O,AST_Const:q,AST_Constant:C,AST_Continue:F,AST_Debugger:$,AST_Default:P,AST_DefaultAssign:j,AST_DefaultValue:z,AST_DefClass:M,AST_Definitions:N,AST_Defun:I,AST_Destructuring:R,AST_Destructured:B,AST_DestructuredArray:H,AST_DestructuredKeyVal:Y,AST_DestructuredObject:L,AST_Directive:U,AST_Do:G,AST_Dot:V,AST_DWLoop:W,AST_EmptyStatement:K,AST_Exit:J,AST_Expansion:X,AST_Export:Q,AST_ExportDeclaration:Z,AST_ExportDefault:ee,AST_ExportReferences:ne,AST_False:te,AST_Finally:ie,AST_For:re,AST_ForEnumeration:oe,AST_ForIn:ae,AST_Function:se,AST_Hole:fe,AST_If:ce,AST_Import:ue,AST_Infinity:le,AST_IterationStatement:pe,AST_Jump:he,AST_LabeledStatement:de,AST_Lambda:_e,AST_LambdaDefinition:ve,AST_LambdaExpression:me,AST_Let:ge,AST_LoopControl:be,AST_NaN:ye,AST_New:we,AST_Node:Se,AST_Null:xe,AST_Number:Te,AST_Object:ke,AST_ObjectKeyVal:Ae,AST_ObjectProperty:Ee,AST_ObjectIdentity:De,AST_ObjectMethod:Oe,AST_PrefixedTemplateString:qe,AST_PropAccess:Ce,AST_RegExp:Fe,AST_Return:$e,AST_Scope:Pe,AST_Sequence:je,AST_SimpleStatement:ze,AST_Spread:Me,AST_Statement:Ne,AST_String:Ie,AST_Sub:Re,AST_Switch:Be,AST_SwitchBranch:He,AST_Symbol:Ye,AST_SymbolCatch:Le,AST_SymbolClassProperty:Ue,AST_SymbolConst:Ge,AST_SymbolDeclaration:Ve,AST_SymbolDefun:We,AST_SymbolExport:Ke,AST_SymbolFunarg:Je,AST_SymbolImport:Xe,AST_SymbolLambda:Qe,AST_SymbolLet:Ze,AST_SymbolMethod:en,AST_SymbolRef:nn,AST_SymbolVar:tn,AST_Template:rn,AST_TemplateString:on,AST_This:an,AST_Toplevel:sn,AST_True:fn,AST_Try:cn,AST_Unary:un,AST_UnaryPostfix:ln,AST_UnaryPrefix:pn,AST_Undefined:hn,AST_Var:dn,AST_VarDef:_n,AST_While:vn,AST_With:mn,AST_Yield:gn,TreeTransformer:bn,TreeWalker:yn,_INLINE:wn,_NOINLINE:Sn,_PURE:xn,first_in_statement:Tn,is_arrow:kn,is_generator:An,is_statement:En,walk_body:Dn,walk_lambda:On}=n,{all:qn,defaults:Cn,Dictionary:Fn,has_annotation:$n,HOP:Pn,List:jn,make_node:zn,makePredicate:Mn,MAP:Nn,member:In,noop:Rn,push_uniq:Bn,regexp_source_fix:Hn,regexp_is_safe:Yn,remove:Ln,return_false:Un,return_null:Gn,return_true:Vn,return_this:Wn}=e,{is_basic_identifier_string:Kn,JS_Parse_Error:Jn,parse:Xn,PRECEDENCE:Qn,is_identifier_string:Zn}=i,{OutputStream:et}=t,{base54:nt,is_lhs:tt,is_funarg:it}=r;function rt(e,n){if(!(this instanceof rt))return new rt(e,n);bn.call(this,this.before,this.after),this.options=Cn(e,{annotations:!n,arguments:!n,arrows:!n,assignments:!n,awaits:!n,booleans:!n,collapse_vars:!n,comparisons:!n,conditionals:!n,dead_code:!n,default_values:!n,directives:!n,drop_console:!1,drop_debugger:!n,evaluate:!n,expression:!1,functions:!n,global_defs:!1,hoist_exports:!n,hoist_funs:!1,hoist_props:!n,hoist_vars:!1,ie:!1,if_return:!n,imports:!n,inline:!n,join_vars:!n,keep_fargs:n,keep_fnames:!1,keep_infinity:!1,loops:!n,merge_vars:!n,module:!1,negate_iife:!n,objects:!n,optional_chains:!n,passes:1,properties:!n,pure_funcs:null,pure_getters:!n&&"strict",reduce_funcs:!n,reduce_vars:!n,rests:!n,sequences:!n,side_effects:!n,spreads:!n,strings:!n,switches:!n,templates:!n,top_retain:null,toplevel:!(!e||!e.module&&!e.top_retain),typeofs:!n,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!n,varify:!n,webkit:!1,yields:!n},!0);var t=this.options.evaluate;this.eval_threshold=/eager/.test(t)?1/0:+t;var i=this.options.global_defs;if("object"==typeof i)for(var r in i)/^@/.test(r)&&Pn(i,r)&&(i[r.slice(1)]=Xn(i[r],{expression:!0}));!0===this.options.inline&&(this.options.inline=4),this.drop_fargs=this.options.keep_fargs?Un:function(e,n){if(e.length_read)return!1;var t=e.name;if(!t)return n&&"Call"==n.TYPE&&n.expression===e;if(t.fixed_value()!==e)return!1;var i=t.definition();if(i.direct_access)return!1;var r=i.escaped;return r&&1!=r.depth},this.options.module&&(this.directives["use strict"]=!0);var o=this.options.pure_funcs;"function"==typeof o?this.pure_funcs=o:"string"==typeof o?this.pure_funcs=function(e){var n;return e instanceof g?n=e.expression:e instanceof rn&&(n=e.tag),!(n&&o===n.print_to_string())}:Array.isArray(o)?this.pure_funcs=function(e){var n;return e instanceof g?n=e.expression:e instanceof rn&&(n=e.tag),!(n&&In(n.print_to_string(),o))}:this.pure_funcs=Vn;var a=this.options.sequences;this.sequences_limit=1==a?800:0|a;var s=this.options.top_retain;s instanceof RegExp?this.top_retain=function(e){return s.test(e.name)}:"function"==typeof s?this.top_retain=s:s&&("string"==typeof s&&(s=s.split(/,/)),this.top_retain=function(e){return In(e.name,s)});var f=this.options.toplevel;this.toplevel="string"==typeof f?{funcs:/funcs/.test(f),vars:/vars/.test(f)}:{funcs:f,vars:f}}return rt.prototype=new bn(function(e,n,t){if(e._squeezed)return e;var i=e instanceof Pe;i&&(this.option("arrows")&&kn(e)&&e.value&&(e.body=[e.first_statement()],e.value=null),e.hoist_properties(this),e.hoist_declarations(this),e.process_returns(this)),n(e,this),n(e,this);var r=e.optimize(this);return!i||r!==e||this.has_directive("use asm")||r.pinned()||(r.drop_unused(this),r.merge_variables(this)&&r.drop_unused(this),n(r,this)),r===e&&(r._squeezed=!0),r}),rt.prototype.option=function(e){return this.options[e]},rt.prototype.exposed=function(e){if(e.exported)return!0;if(e.undeclared)return!0;if(!(e.global||e.scope.resolve()instanceof sn))return!1;var n=this.toplevel;return!qn(e.orig,function(e){return n[e instanceof We?"funcs":"vars"]})},rt.prototype.compress=function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var n=this.options.merge_vars,t=+this.options.passes||1,i=1/0,r=!1,o={ie:this.option("ie")},a=0;a<t;a++)if(e.figure_out_scope(o),(a>0||this.option("reduce_vars"))&&e.reset_opt_flags(this),this.options.merge_vars=n&&(r||a==t-1),e=e.transform(this),t>1){var s=0;if(e.walk(new yn(function(){s++})),Se.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:a,min_count:i,count:s}),s<i)i=s,r=!1;else{if(r)break;r=!0}}return this.option("expression")&&e.process_expression(!1),e},function(e){function n(e,n){var t=n.get_property();if(!(t instanceof Se)){var i;if(e instanceof a){var r=e.elements;if("length"==t)return nt(r.length,e);"number"==typeof t&&t in r&&(i=r[t])}else if(e instanceof _e){if("length"==t)return e.length_read=!0,nt(e.argnames.length,e)}else if(e instanceof ke){t=""+t;for(var o=e.properties,s=o.length;--s>=0;){var f=o[s];if(!Ii(f))return;i||o[s].key!==t||(i=o[s].value)}}return i instanceof nn&&i.fixed_value()||i}}function t(e,i,r,o,s,c,u){var l=i.parent(s);if(!(e.option("unsafe")&&l instanceof V&&function(e,n){if(e instanceof v)return Mt.Boolean[n];if(e instanceof Te)return Mt.Number[n];if(e instanceof Ie)return Mt.String[n];if("valueOf"==n)return!1;if(e instanceof a)return Mt.Array[n];if(e instanceof _e)return Mt.Function[n];if(e instanceof ke)return Mt.Object[n];if(e instanceof Fe)return Mt.RegExp[n]&&!e.value.global}(o,l.property))){var h=tt(r,l);if(h)return h;if(0!=s||!o||!o.is_constant()){if(l instanceof a)return t(e,i,l,l,s+1);if(l instanceof f)switch(l.operator){case"=":return t(e,i,l,o,s+1,c,u);case"&&=":case"||=":case"??=":return t(e,i,l,l,s+1);default:return}if(l instanceof p){if(!Dt[l.operator])return;return t(e,i,l,l,s+1)}if(l instanceof g)return!c&&l.expression===r&&!l.is_expr_pure(e)&&(!(o instanceof me)||!(l instanceof we)&&o.contains_this());if(l instanceof O){if(l.condition===r)return;return t(e,i,l,l,s+1)}if(l instanceof oe)return l.init===r;if(l instanceof Ae){if(l.value!==r)return;var d=i.parent(s+1);return t(e,i,d,d,s+2)}if(l instanceof Ce){if(l.expression!==r)return;var _=n(o,l);return(!c||u)&&t(e,i,l,_,s+1)}if(l instanceof je){if(l.tail_node()!==r)return;return t(e,i,l,o,s+1,c,u)}}}}function i(e){return e instanceof S||e instanceof _e}function r(e){return e instanceof S||e instanceof I||e instanceof se}function w(e){return"arguments"==e.name&&e.scope.uses_arguments}function E(e,n){do{if(e===n)return!1;if(n instanceof Pe)return!0}while(n=n.parent_scope)}function D(e,n,t){var i=e.redef||e.definition();return(!e.in_arg||!it(i))&&qn(i.orig,function(e){return e instanceof Ge||e instanceof Ze?e instanceof Xe||n&&li(n,e):!(t&&e instanceof Qe)})}function j(e,n,t,i){return i instanceof f?"="==i.operator&&i.right===t:i instanceof g?i.expression!==t||i instanceof we:i instanceof T?i.value===t&&!i.static:i instanceof J?i.value===t&&n.resolve()!==e.scope.resolve():i instanceof _n?i.value===t:void 0}function R(e,n){var t=Yn(nn,e);return t.fixed=n||Yn(hn,e),t}function X(e,n){return function(t){var i=e(t),t=R(i,n),r=i.definition();return r.references.push(t),r.replaced++,t}}e(Se,function(e,n){return e}),sn.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var n=this.body,t=[],i=0;i<n.length;i++){var r=n[i];r instanceof Z?(n[i]=r=r.body,r instanceof N?r.definitions.forEach(function(e){e.name.match_symbol(o,!0)}):o(r.name)):r instanceof ne&&(n.splice(i--,1),[].push.apply(t,r.properties))}t.length&&n.push(Yn(ne,this,{properties:t}))}function o(e){if(e instanceof Ve){var n=Yn(Ke,e);n.alias=Yn(Ie,n,{value:n.name}),t.push(n)}}}),Pe.DEFMETHOD("process_expression",function(e,n){var t=this,i=new bn(function(r){if(e){if(r instanceof U&&(r=Yn(ze,r,{body:Yn(Ie,r)})),r instanceof ze)return n?n(r):Yn($e,r,{value:r.body})}else if(r instanceof $e){if(n)return n(r);var o=r.value;return o instanceof Ie?Yn(U,o):Yn(ze,r,{body:o||Yn(pn,r,{operator:"void",expression:Yn(Te,r,{value:0})})})}if(r instanceof h){if(r instanceof _e){if(r!==t)return r}else if("awaits"===e&&r instanceof cn&&r.bfinally)return r;for(var a=r.body.length;--a>=0;){var s=r.body[a];if(!St(s,!0)){r.body[a]=s.transform(i);break}}}else r instanceof ce?(r.body=r.body.transform(i),r.alternative&&(r.alternative=r.alternative.transform(i))):r instanceof mn&&(r.body=r.body.transform(i));return r});t.transform(i)}),sn.DEFMETHOD("unwrap_expression",function(){switch(this.body.length){case 0:return Yn(pn,this,{operator:"void",expression:Yn(Te,this,{value:0})});case 1:var e=this.body[0];if(e instanceof U)return Yn(Ie,e);if(e instanceof ze)return e.body;default:return Yn(g,this,{expression:Yn(se,this,{argnames:[],body:this.body}).init_vars(this),args:[]})}}),Se.DEFMETHOD("wrap_expression",function(){var e=this;return En(e)||(e=Yn(ze,e,{body:e})),e instanceof sn||(e=Yn(sn,e,{body:[e]})),e});var Q=/^(0|[1-9][0-9]*)$/;function qe(e){e._squeezed=!1,e._optimized=!1,e instanceof d&&(e._var_names=void 0),e instanceof nn&&(e.fixed=void 0)}function Ue(e,n){return this.transform(new bn(function(t,i){return t instanceof z?((t=t.clone()).name=t.name.transform(this),t):t instanceof B?(t=t.clone(),i(t,this),t):t instanceof Y?((t=t.clone()).value=t.value.transform(this),t):t.convert_symbol(e,n)}))}function en(e,n){var t=Yn(e,this);return n(t,this)||t}function on(e){var n=e.definition();n.assignments++,n.references.push(e)}function wn(e,n){var t=new yn(function(i){return i instanceof z?(i.value.walk(n),i.name.walk(t),!0):i instanceof Y?(i.key instanceof Se&&i.key.walk(n),i.value.walk(t),!0):e(i)});this.walk(t)}function Sn(e){return e(this)}function xn(e,n){var t=!1,i=new yn(function(r){return!!t||(r instanceof z?n?(r.name.walk(i),!0):t=!0:r instanceof Y?!n&&r.key instanceof Se?t=!0:(r.value.walk(i),!0):e(r)?t=!0:void 0)});return this.walk(i),t}function Cn(e){return e instanceof AST_AsyncGeneratorDefun||e instanceof AST_AsyncGeneratorFunction}function $n(e){var n=0,t=e.self();do{if(t.variables)return t}while(t=e.parent(n++))}function zn(e,n,t,i,r,o){for(var a;a=e.parent(n++);t=a){if(a===i)return!1;if(o&&a instanceof _e){if(a.name||is_async(a)||An(a))return!0}else if(a instanceof cn){if(a.bfinally&&a.bfinally!==t)return!0;if(r&&a.bcatch&&a.bcatch!==t)return!0}}return!1}!function(e){function r(e,n,t){t.assignments=0,t.bool_return=0,t.drop_return=0,t.cross_loop=!1,t.direct_access=!1,t.escaped=[],t.fixed=!t.const_redefs&&!t.scope.pinned()&&!n.exposed(t)&&!(t.init instanceof me&&t.init!==t.scope)&&t.init,t.reassigned=0,t.recursive_refs=0,t.references=[],t.single_use=void 0}function o(e,n,t){t.variables.each(function(t){r(e,n,t)})}function s(e,n,t){t.fn_defs=[],t.variables.each(function(i){r(e,n,i);var o=i.init;o instanceof ve&&(t.fn_defs.push(o),o.safe_ids=null),null===i.fixed?(i.safe_ids=e.safe_ids,b(e,i)):i.fixed&&(e.loop_ids[i.id]=e.in_loop,b(e,i))}),t.may_call_this=function(){t.may_call_this=t.contains_this()?Vn:Un},t.uses_arguments&&t.each_argname(function(e){e.definition().last_ref=!1}),n.option("ie")&&t.variables.each(function(e){var n=e.orig[0].definition();n!==e&&(n.fixed=!1)})}function c(e,n){var t=n.safe_ids;return void 0===t||t===e.safe_ids}function u(e,n){var t=e.fn_scanning;e.fn_scanning=n,n.walk(e),e.fn_scanning=t}function l(e,n){n.enclosed.forEach(function(t){if(n.variables.get(t.name)!==t&&!x(e,t)){t.single_use=!1;var i=t.fixed;"function"==typeof i&&(i=i()),i instanceof _e&&void 0!==i.safe_ids||(t.fixed=!1)}})}function h(e,n,t){var i=t.safe_ids;if(void 0!==i&&!1!==i)if(t.parent_scope.resolve().may_call_this===Vn)In(t,e.fn_visited)&&l(e,t);else if(i){var r=In(t,e.fn_visited);i===e.safe_ids?r||u(e,t):r?l(e,t):t.safe_ids=!1}else e.fn_scanning&&e.fn_scanning!==n.scope.resolve()?t.safe_ids=!1:(t.safe_ids=e.safe_ids,u(e,t))}function _(e,n){var t=n.fn_defs,i=n.may_call_this===Vn?t:t.filter(function(n){return!1===n.safe_ids||(n.safe_ids=e.safe_ids,u(e,n),!1)});m(e),i.forEach(function(n){n.safe_ids=e.safe_ids,u(e,n)}),t.forEach(function(e){e.safe_ids=void 0}),n.fn_defs=void 0,n.may_call_this=void 0}function v(e,n){var t=Object.create(e.safe_ids);n||(t.seq={}),e.safe_ids=t}function m(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function b(e,n){e.safe_ids[n.id]={}}function y(e,n){e.references.push(n),!1!==e.last_ref&&(e.last_ref=n)}function x(e,n){if("m"==n.single_use)return!1;var t=e.safe_ids[n.id];if(t){var i=Pn(e.safe_ids,n.id);if(!i){var r=e.safe_ids.seq;t.read?t.read!==r&&(t.read=!0):t.read=r}return null==n.fixed?!w(n)&&((!n.global||"arguments"!=n.name)&&(e.loop_ids[n.id]=null,n.fixed=Yn(hn,n.orig[0]),i&&(n.safe_ids=void 0),!0)):!t.assign||t.assign===e.safe_ids}return n.fixed instanceof ve}function T(e,n,t){if(!t){if(it(n)&&n.scope.uses_arguments&&!e.has_directive("use strict"))return!1;if(!qn(n.orig,function(e){return!(e instanceof Ge)}))return!1}if(void 0===n.fixed)return t||qn(n.orig,function(e){return!(e instanceof Ze)});if(!1===n.fixed||0===n.fixed)return!1;var i=e.safe_ids[n.id];if(n.safe_ids)return n.safe_ids[n.id]=!1,n.safe_ids=void 0,null===n.fixed||Pn(e.safe_ids,n.id)&&!i.read;if(!Pn(e.safe_ids,n.id)){if(!i)return!1;if(i.read||e.in_loop){var r=e.find_parent(d);if(r instanceof S)return!1;if(n.scope.resolve()!==r.resolve())return!1}i.assign=!(!i.assign||i.assign===e.safe_ids)||e.safe_ids}if(null!=n.fixed&&i.read){if(i.read!==e.safe_ids.seq)return!1;if(e.loop_ids[n.id]!==e.in_loop)return!1}return x(e,n)&&qn(n.orig,function(e){return!(e instanceof Qe)})}function A(e){if(!e)return!1;if(e instanceof f){var n=e.operator;return"="==n?A(e.right):!Dt[n.slice(0,-1)]}return e instanceof je?A(e.tail_node()):e.is_constant()||i(e)||e instanceof De}function q(e,t,i,r,o,s,f){var c=e.parent(s);if(!o||!o.is_constant()){if(j(t,i,r,c))return t.escaped.push(c),!(f>1)||o&&o.is_constant_expression(i)||(f=1),(!t.escaped.depth||t.escaped.depth>f)&&(t.escaped.depth=f),t.scope.resolve()!==i.resolve()&&(t.escaped.cross_scope=!0),void(t.fixed&&(t.fixed.escaped=t.escaped));if(function(e,n){if(n instanceof a)return!0;if(n instanceof p)return Dt[n.operator];if(n instanceof O)return n.condition!==e;if(n instanceof je)return n.tail_node()===e;if(n instanceof Me)return!0}(r,c))q(e,t,i,c,c,s+1,f);else if(c instanceof Ae&&c.value===r){var u=e.parent(s+1);q(e,t,i,u,u,s+2,f)}else if(c instanceof Ce&&c.expression===r&&(o=n(o,c),q(e,t,i,c,o,s+1,f+1),o))return;s>0||c instanceof g&&c.expression===r||c instanceof je&&c.tail_node()!==r||c instanceof ze||c instanceof un&&!unary_side_effects[c.operator]||(t.direct_access=!0,t.fixed&&(t.fixed.direct_access=!0))}}function C(e){if(e instanceof Re){var n=e.expression;if(n instanceof nn){var t=n.definition();if(w(t)){var i=e.property;i.is_constant()&&(i=i.value),(i instanceof Se||Q.test(i))&&(t.reassigned++,(i instanceof Se?t.scope.argnames:[t.scope.argnames[i]]).forEach(function(e){e instanceof Je&&(e.definition().fixed=!1)}))}}}}function F(e,n){var t,i;return function(){var r=e();return t!==r&&(t=r,i=n(r)),i}}function $(e,n,t,i,r){var o=new yn(function(t){if(t instanceof z){qe(t),v(e,!0),t.value.walk(e),m(e);var s=i;return s&&(i=function(e,n,t){var i,r;return function(){if(r===n)return n;var o=t(),a=oi(e,o,!0);return a instanceof Se?r=n:i!==o&&(i=o,r=void 0===a?Kn(n,[o,n.value]):o),r}}(n,t,s)),t.name.walk(o),i=s,!0}if(t instanceof H){qe(t);var f,s=i;if(t.elements.forEach(function(e,n){if(e instanceof fe)return qe(e);s&&(i=F(s,function(t){return Yn(Re,e,{expression:t,property:Yn(Te,e,{value:n})})})),e.walk(o)}),t.rest)s&&(i=n.option("rests")&&F(s,function(e){if(!(e instanceof a))return t;for(var n=0,i=t.elements.length;n<i;n++)if(e.elements[n]instanceof Me)return t;return f||(f=Yn(a,t,{})),f.elements=e.elements.slice(i),f})),t.rest.walk(o);return i=s,!0}if(t instanceof L){qe(t);var s=i;return t.properties.forEach(function(n){qe(n),n.key instanceof Se&&(v(e),n.key.walk(e),m(e)),s&&(i=F(s,function(e){var t=n.key,i=Re;return"string"==typeof t&&(Zn(t)?i=V:t=nt(t,n)),Yn(i,n,{expression:e,property:t})})),n.value.walk(o)}),t.rest&&(i=!1,t.rest.walk(o)),i=s,!0}return r(t,i,function(){for(var n=e.stack.length,i=0,r=o.stack.length-1;i<r;i++)e.stack.push(o.stack[i]);t.walk(e),e.stack.length=n}),!0});t.walk(o)}function M(e,n,t){var i=this;i.inlined=!1;var r=e.parent(),o=!is_async(i)&&!An(i),f=!o,c=!1;i.walk(new yn(function(e){return f?c=!0:e instanceof $e?f=!0:e instanceof Pe&&e!==i||void 0})),c&&v(e,o),s(e,t,i);var u=!i.uses_arguments||e.has_directive("use strict");i.argnames.forEach(function(n,o){var a=r.args[o];$(e,t,n,function(){var e=i.argnames.indexOf(n),t=e<0?a:r.args[e];return t instanceof je&&t.expressions.length<2&&(t=t.expressions[0]),t||Yn(hn,r)},d)});var l,p=i.rest;p&&$(e,t,p,t.option("rests")&&function(){return i.rest!==p?p:(l||(l=Yn(a,i,{})),l.elements=r.args.slice(i.argnames.length),l)},d),On(i,e);var h=e.safe_ids;return _(e,i),c||(e.safe_ids=h),!0;function d(n,t){var i=n.definition();t&&u&&void 0===i.fixed?(b(e,i),e.loop_ids[i.id]=e.in_loop,i.fixed=t,i.fixed.assigns=[n]):i.fixed=!1}}e(Se,Rn),e(f,function(e,n,i){var r=this,o=r.left,a=r.right,s=o instanceof nn&&o.definition(),f=s||o instanceof B;switch(r.operator){case"=":return o.equals(a)&&!o.has_side_effects(i)?(a.walk(e),function n(t){qe(t);if(t instanceof V)n(t.expression);else if(t instanceof Re)n(t.expression),t.property.walk(e);else if(t instanceof nn){var i=t.definition();y(i,t),i.fixed&&(t.fixed=i.fixed,t.fixed.assigns?t.fixed.assigns.push(r):t.fixed.assigns=[r])}else t.walk(e)}(o),r.redundant=!0,!0):s&&a instanceof me?(d(),a.parent_scope.resolve().fn_defs.push(a),a.safe_ids=null,s.fixed&&r.write_only||h(e,s,a),!0):f?(a.walk(e),d(),!0):void C(o);case"&&=":case"||=":case"??=":var c=!0;default:if(!f)return C(o),_();s.assignments++;var u=s.fixed;if(t(i,e,r,r,0))return s.fixed=!1,_();var l=x(e,s);return c&&v(e,!0),a.walk(e),c&&m(e),l&&!o.in_arg&&T(e,s)?(y(s,o),b(e,s),s.single_use&&(s.single_use=!1),o.fixed=s.fixed=function(){return Yn(p,r,{operator:r.operator.slice(0,-1),left:R(o,u),right:r.right})},o.fixed.assigns=u&&u.assigns?u.assigns.slice():[s.orig[0]],o.fixed.assigns.push(r),o.fixed.to_binary=X(function(e){return e.left},u)):(o.walk(e),s.fixed=!1),!0}function d(){var n=s&&qi(e,s),f=t(i,e,r,a,0,A(a),n);$(e,i,o,function(){return r.right},function(n,t,i){if(!(n instanceof nn))return C(n),void i();var s=n.definition();s.assignments++,t&&!n.in_arg&&T(e,s)?(y(s,n),b(e,s),(o instanceof B||1==s.orig.length&&s.orig[0]instanceof We)&&(s.single_use=!1),e.loop_ids[s.id]=e.in_loop,s.fixed=f?0:t,n.fixed=t,n.fixed.assigns=[r],q(e,s,n.scope,r,a,0,1)):(i(),s.fixed=!1)})}function _(){if(c)return o.walk(e),v(e,!0),a.walk(e),m(e),!0}}),e(p,function(e){if(Dt[this.operator])return this.left.walk(e),v(e,!0),this.right.walk(e),m(e),!0}),e(d,function(e,n,t){o(e,t,this)}),e(g,function(e,n){var t=this.expression;if(t instanceof me){var i=vt(this);return this.args.forEach(function(n){n.walk(e),n instanceof Me&&(i=!1)}),i&&(t.reduce_vars=M),t.walk(e),i&&delete t.reduce_vars,!0}if("Call"==this.TYPE)switch(e.in_boolean_context()){case"d":var r=!0;case!0:!function e(n,t){if(n instanceof f){if("="!=n.operator)return;e(n.left,t),e(n.right,t)}else if(n instanceof p){if(!Dt[n.operator])return;e(n.left,t),e(n.right,t)}else if(n instanceof O)e(n.consequent,t),e(n.alternative,t);else if(n instanceof nn){var i=n.definition();i.bool_return++,t&&i.drop_return++}}(t,r)}t.walk(e);var o=this.optional;o&&v(e,!0),this.args.forEach(function(n){n.walk(e)}),o&&m(e);var a=t instanceof nn&&t.fixed_value();return a instanceof _e?h(e,t.definition(),a):e.find_parent(Pe).may_call_this(),!0}),e(S,function(e,n,t){var i=this;o(e,t,i),i.extends&&i.extends.walk(e);var r=i.properties.filter(function(n){return qe(n),n.key instanceof Se&&(e.push(n),n.key.walk(e),e.pop()),n.value});if(i.name){var a=i.name.definition(),s=e.parent();(s instanceof Z||s instanceof ee)&&(a.single_use=!1),T(e,a,!0)?(b(e,a),e.loop_ids[a.id]=e.in_loop,a.fixed=function(){return i},a.fixed.assigns=[i],fi(a)||(a.single_use=!1)):a.fixed=!1}return r.forEach(function(n){e.push(n),!n.static||yt(n)&&n.value.contains_this()?(v(e),n.value.walk(e),m(e)):n.value.walk(e),e.pop()}),!0}),e(k,function(e,n,t){return v(e,!0),s(e,t,this),n(),_(e,this),!0}),e(O,function(e){return this.condition.walk(e),v(e,!0),this.consequent.walk(e),m(e),v(e,!0),this.alternative.walk(e),m(e),!0}),e(z,function(e){return v(e,!0),this.value.walk(e),m(e),this.name.walk(e),!0}),e(G,function(e){var n=e.in_loop;return e.in_loop=this,v(e),this.body.walk(e),ii(this,e.parent())&&(m(e),v(e)),this.condition.walk(e),m(e),e.in_loop=n,!0}),e(re,function(e,n,t){o(e,t,this),this.init&&this.init.walk(e);var i=e.in_loop;return e.in_loop=this,v(e),this.condition&&this.condition.walk(e),this.body.walk(e),this.step&&(ii(this,e.parent())&&(m(e),v(e)),this.step.walk(e)),m(e),e.in_loop=i,!0}),e(oe,function(e,n,t){o(e,t,this),this.object.walk(e);var i=e.in_loop;e.in_loop=this,v(e);var r=this.init;return r instanceof N?r.definitions[0].name.mark_symbol(function(e){if(e instanceof Ve){var n=e.definition();n.assignments++,n.fixed=!1}},e):r instanceof B||r instanceof nn?r.mark_symbol(function(e){if(e instanceof nn){var n=e.definition();y(n,e),n.assignments++,e.is_immutable()||(n.fixed=!1)}},e):r.walk(e),this.body.walk(e),m(e),e.in_loop=i,!0}),e(ce,function(e){return this.condition.walk(e),v(e,!0),this.body.walk(e),m(e),this.alternative&&(v(e,!0),this.alternative.walk(e),m(e)),!0}),e(de,function(e){return v(e,!0),this.body.walk(e),m(e),!0}),e(_e,function(e,n,t){var i=this;return!c(e,i)||(!Bn(e.fn_visited,i)||(i.inlined=!1,v(e),s(e,t,i),n(),_(e,i),i.name&&q(e,i.name.definition(),i,i.name,i,0,1),!0))}),e(ve,function(e,n,t){var i=this,r=i.name.definition(),o=e.parent();return(o instanceof Z||o instanceof ee)&&(r.single_use=!1),!c(e,i)||(!Bn(e.fn_visited,i)||(i.inlined=!1,v(e),s(e,t,i),n(),_(e,i),!0))}),e(Re,function(e){if(this.optional)return this.expression.walk(e),v(e,!0),this.property.walk(e),m(e),!0}),e(Be,function(e,n,t){o(e,t,this),this.expression.walk(e);var i=!0;return this.body.forEach(function(n){n instanceof P||(n.expression.walk(e),i&&(i=!1,v(e,!0)))}),i||m(e),Dn(this,e),!0}),e(He,function(e){return v(e,!0),Dn(this,e),m(e),!0}),e(Le,function(){this.definition().fixed=!1}),e(Xe,function(){this.definition().fixed=!1}),e(nn,function(e,n,r){var o=this,a=o.definition(),s=a.fixed||a.last_ref&&a.last_ref.fixed;y(a,o),1==a.references.length&&!a.fixed&&a.orig[0]instanceof We&&(e.loop_ids[a.id]=e.in_loop);var f,c=qi(e,a);switch(c&&c.enclosed.forEach(function(n){if(a!==n&&n.scope.resolve()!==c){var t=n.fixed&&n.fixed.assigns;if(t&&!(t[t.length-1]instanceof _n)){var i=e.safe_ids[n.id];i&&(i.assign=!0)}}}),"m"==a.single_use&&a.fixed&&(a.fixed=0,a.single_use=!1),a.fixed){case 0:x(e,a)||(a.fixed=!1);case!1:var u=a.redefined();u&&E(a.scope,o.scope)&&(u.single_use=!1);break;case void 0:a.fixed=!1;break;default:if(!x(e,a)){a.fixed=!1;break}o.in_arg&&a.orig[0]instanceof Qe&&(o.fixed=a.scope);var l=o.fixed_value();c?a.recursive_refs++:l&&function(e,n){return e.option("unused")&&!n.scope.pinned()&&!1!==n.single_use&&n.references.length-n.recursive_refs==1&&!(it(n)&&n.scope.uses_arguments)}(r,a)?(a.in_loop=e.loop_ids[a.id]!==e.in_loop,a.single_use=i(l)&&!l.pinned()&&(!a.in_loop||e.parent()instanceof g)||!a.in_loop&&a.scope===o.scope.resolve()&&l.is_constant_expression()):a.single_use=!1,t(r,e,o,l,0,A(l),c)&&(a.single_use?a.single_use="m":a.fixed=0),a.fixed&&e.loop_ids[a.id]!==e.in_loop&&(a.cross_loop=!0),q(e,a,o.scope,o,l,0,1)}o.fixed||(o.fixed=0===a.fixed?s:a.fixed),l instanceof _e&&!((f=e.parent())instanceof g&&f.expression===o)&&h(e,a,l)}),e(rn,function(e,n){var t=this.tag;if(t){if(t instanceof me)return this.expressions.forEach(function(n){n.walk(e)}),t.walk(e),!0;t.walk(e),this.expressions.forEach(function(n){n.walk(e)});var i=t instanceof nn&&t.fixed_value();return i instanceof _e?h(e,t.definition(),i):e.find_parent(Pe).may_call_this(),!0}}),e(sn,function(e,n,t){return this.globals.each(function(n){r(e,t,n)}),v(e,!0),s(e,t,this),n(),_(e,this),!0}),e(cn,function(e,n,t){return o(e,t,this),v(e,!0),Dn(this,e),m(e),this.bcatch&&(v(e,!0),this.bcatch.walk(e),m(e)),this.bfinally&&this.bfinally.walk(e),!0}),e(un,function(e,n){var t=this;if(UNARY_POSTFIX[t.operator]){var i=t.expression;if(i instanceof nn){var r=i.definition();r.assignments++;var o=r.fixed;return x(e,r)&&!i.in_arg&&T(e,r)?(y(r,i),b(e,r),r.single_use&&(r.single_use=!1),r.fixed=function(){return Yn(p,t,{operator:t.operator.slice(0,-1),left:Yn(pn,t,{operator:"+",expression:R(i,o)}),right:Yn(Te,t,{value:1})})},r.fixed.assigns=o&&o.assigns?o.assigns.slice():[],r.fixed.assigns.push(t),t instanceof pn?i.fixed=r.fixed:(i.fixed=function(){return Yn(pn,t,{operator:"+",expression:R(i,o)})},i.fixed.assigns=o&&o.assigns,i.fixed.to_prefix=X(function(e){return e.expression},r.fixed))):(i.walk(e),r.fixed=!1),!0}C(i)}}),e(_n,function(e,n,t){var i=this,r=i.value;if(r instanceof me&&i.name instanceof Ve){a(),r.parent_scope.resolve().fn_defs.push(r),r.safe_ids=null;var o=i.name.definition();o.fixed||h(e,o,r)}else r?(r.walk(e),a()):e.parent()instanceof ge&&a();return!0;function a(){$(e,t,i.name,function(){return i.value||Yn(hn,i)},function(n,t){var r=n.definition();t&&T(e,r,!0)?(b(e,r),e.loop_ids[r.id]=e.in_loop,r.fixed=t,r.fixed.assigns=[i],(n instanceof Ge&&r.redefined()||!D(n)&&!fi(r))&&(r.single_use=!1)):r.fixed=!1})}}),e(vn,function(e,n){var t=e.in_loop;return e.in_loop=this,v(e),n(),m(e),e.in_loop=t,!0})}(function(e,n){e.DEFMETHOD("reduce_vars",n)}),sn.DEFMETHOD("reset_opt_flags",function(e){var n=new yn(e.option("reduce_vars")?function(t,i){return qe(t),t.reduce_vars(n,i,e)}:qe);n.fn_scanning=null,n.fn_visited=[],n.in_loop=null,n.loop_ids=Object.create(null),n.safe_ids=Object.create(null),n.safe_ids.seq={},this.walk(n)}),Ye.DEFMETHOD("fixed_value",function(e){var n=this.definition(),t=n.fixed;if(t)return this.fixed&&(t=this.fixed),(t instanceof Se?t:t()).tail_node();if(!(t=0===t&&this.fixed))return t;var i=(t instanceof Se?t:t()).tail_node();return e&&1!=n.escaped.depth&&Ti(i,!0)?i:i.is_constant()?i:void 0}),nn.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return e.orig[0]instanceof Qe&&(1==e.orig.length||!!this.in_arg&&!(e.orig[1]instanceof Je))}),Se.DEFMETHOD("convert_symbol",Rn),z.DEFMETHOD("convert_symbol",Ue),B.DEFMETHOD("convert_symbol",Ue),Ve.DEFMETHOD("convert_symbol",en),nn.DEFMETHOD("convert_symbol",en),z.DEFMETHOD("mark_symbol",wn),B.DEFMETHOD("mark_symbol",wn),Ve.DEFMETHOD("mark_symbol",Sn),nn.DEFMETHOD("mark_symbol",Sn),Se.DEFMETHOD("match_symbol",function(e){return e(this)}),z.DEFMETHOD("match_symbol",xn),B.DEFMETHOD("match_symbol",xn);var Nn=Mn("Infinity NaN undefined");function Hn(e,n){if(e instanceof AST_Atom)return!0;if(e instanceof De)return!0;if(e instanceof Ce){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof nn){if(e.is_immutable())return!1;e=e.fixed_value()}return!e||(!!e.tail_node().is_constant()||Hn(e,n))}if(e instanceof nn){if(e.is_immutable())return!0;var t=e.definition();return n.exposed(t)&&Nn[t.name]}return!1}function Yn(e,n,t){return t?(t.start=n.start,t.end=n.end):t=n,new e(t)}function Kn(e,n){return 1==n.length?n[0]:Yn(je,e,{expressions:n.reduce(ft,[])})}function nt(e,n){switch(typeof e){case"string":return Yn(Ie,n,{value:e});case"number":return isNaN(e)?Yn(ye,n):isFinite(e)?1/e<0?Yn(pn,n,{operator:"-",expression:Yn(Te,n,{value:-e})}):Yn(Te,n,{value:e}):e<0?Yn(pn,n,{operator:"-",expression:Yn(le,n)}):Yn(le,n);case"boolean":return Yn(e?fn:te,n);case"undefined":return Yn(hn,n);default:if(null===e)return Yn(xe,n);if(e instanceof RegExp)return Yn(Fe,n,{value:e});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof e}))}}function ot(e){return e instanceof Ce||mt(e)&&"eval"==e.name}function at(e,n,t){var i=!1;return"Call"==e.TYPE?i=e.expression===n&&ot(t):e instanceof rn?i=e.tag===n&&ot(t):e instanceof pn&&(i="delete"==e.operator||"typeof"==e.operator&&mt(t)),i?Kn(n,[Yn(Te,n,{value:0}),t]):t}function st(e,n){var t=new Fn;return e.walk(new yn(function(e){if(e instanceof nn){var n=e.definition(),i=e.fixed;i&&t.has(n.id)?t.get(n.id)!==i&&t.set(n.id,!1):t.set(n.id,i)}})),t.size()>0&&n.walk(new yn(function(e){if(e instanceof nn){var n=e.definition(),i=e.fixed;i&&t.has(n.id)&&t.get(n.id)!==i&&(e.fixed=!1)}})),n}function ft(e,n){return n instanceof je?[].push.apply(e,n.expressions):e.push(n),e}function ct(e){return e instanceof q||e instanceof M||e instanceof ge}function ut(e){if(e instanceof ve){var n=e.name.definition(),t=e.name.scope;return n.scope===t||qn(n.references,function(e){var n=e.scope;do{if(n===t)return!0}while(n=n.parent_scope)})}return!ct(e)}function lt(e){if(null===e)return[];if(e instanceof _)return qn(e.body,ut)?e.body:[e];if(e instanceof K)return[];if(En(e))return[e];throw new Error("Can't convert thing to statement array")}function pt(e){return null===e||(e instanceof K||e instanceof _&&0==e.body.length)}function ht(e){return qn(e.body,function(e){return pt(e)||e instanceof I||e instanceof dn&&wt(e)})}function dt(e){return e instanceof pe&&e.body instanceof _?e.body:e}function _t(e){if("Call"!=e.TYPE)return!1;do{e=e.expression}while(e instanceof Ce);return e instanceof me?!kn(e):_t(e)}function vt(e){var n=e.expression;if(n.name)return!1;if(!(e instanceof we))return!0;var t=!1;return n.walk(new yn(function(e){return!!t||(e instanceof AST_NewTarget?t=!0:e instanceof Pe&&e!==n||void 0)})),!t}function mt(e){return e instanceof nn&&e.definition().undeclared}var gt,bt=Mn("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet");function yt(e){return e.static&&e.value&&(e instanceof T||e instanceof AST_ClassInit)}function wt(e){return qn(e.definitions,function(e){return!e.value})}function St(e,n){return e instanceof M?n&&!e.extends&&qn(e.properties,function(e){return!(e.key instanceof Se)&&!yt(e)}):e instanceof N?(n||e instanceof dn)&&wt(e):e instanceof Z?St(e.body,n):e instanceof ee?St(e.body,n):e instanceof ve}function xt(e,n){var t=e.lastIndexOf(n);if(t<0)return!1;for(;++t<e.length;)if(!St(e[t],!0))return!1;return!0}function Tt(e,n){var t;if(e.init instanceof _&&(t=e.init,e.init=t.body.pop(),t.body.push(e)),e.init instanceof I?(t||(t=Yn(_,e,{body:[e]})),t.body.splice(-1,0,e.init),e.init=null):e.init instanceof ze?e.init=e.init.body:pt(e.init)&&(e.init=null),t)return n?jn.splice(t.body):t}function kt(e,n){var i,s,c,l,v,x,k=R(n,function(e){return e instanceof _e});!function(){var e=n.self(),t=0;do{if(!i&&e.variables&&(i=e),e instanceof y)n.parent(t).bfinally&&(v||(v={}),v.bfinally=!0),t++;else if(e instanceof ie)t++;else if(e instanceof pe)l=!0;else{if(e instanceof Pe){x=e;break}e instanceof cn&&(v||(v={}),e.bcatch&&(v.bcatch=!0),e.bfinally&&(v.bfinally=!0))}}while(e=n.parent(t++))}();var A,E,C=10;do{if(E=A,A=0,Q(e)&&(A=1),!A&&1==E)break;if(n.option("dead_code")&&(ne(e,n)&&(A=2),!A&&2==E))break;if(n.option("if_return")&&(ee(e,n)&&(A=3),!A&&3==E))break;if(n.option("awaits")&&n.option("side_effects")&&(te(e,n)&&(A=4),!A&&4==E))break;if(n.option("inline")>=4&&(fe(e,n)&&(A=5),!A&&5==E))break;if(n.sequences_limit>0){if(ue(e,n)&&(A=6),!A&&6==E)break;if(ye(e,n)&&(A=7),!A&&7==E)break}if(n.option("join_vars")&&(Ie(e)&&(A=8),!A&&8==E))break;n.option("collapse_vars")&&X(e,n)&&(A=9)}while(A&&C-- >0);return e;function R(e,n){var t,i=e.self(),r=0;do{if(i instanceof y)i=e.parent(r++);else if(i instanceof de)i=i.body;else if(i instanceof He){var o=e.parent(r);(o.body[o.body.length-1]===i||a(i.body))&&(r++,i=o)}do{if(n(t=i))return t;i=e.parent(r++)}while(i instanceof ce)}while(t&&(i instanceof _||i instanceof y||i instanceof Pe||i instanceof He||i instanceof cn)&&xt(i.body,t));function a(e){for(var n=e.length;--n>=0;)if(e[n]instanceof m)return!0;return!1}}function X(e,n){if(!x.pinned()){for(var m,y,k=new Fn,A=[],E=!1,q=new Fn,C=e.length,F=new bn(function(e,t){if(Ge)return e;if(!Ue)return e!==R[K]?e:++K<R.length?an(e,F):(Ue=!0,(te=(ne?function e(n,t){var i=F.parent(t);if(i instanceof a)return e(i,t+1);if(i instanceof f){return ve(i)?n:i.left.match_symbol(function(e){return e instanceof nn&&(ae.name==e.name||ne.name==e.name)})?n:i.left!==n&&Dt[r=i.operator.slice(0,-1)]?Dn(i,r,t):e(i,t+1)}if(i instanceof u)return e(i,t+1);if(i instanceof p){var r;return i.left!==n&&Dt[r=i.operator]?Dn(i,r,t):e(i,t+1)}if(i instanceof g)return i;if(i instanceof b)return i.expression!==n?n:e(i,t+1);if(i instanceof O)return i.condition!==n?n:e(i,t+1);if(i instanceof N)return Cn(i,t+1);if(i instanceof G)return n;if(i instanceof J)return Cn(i,t+1);if(i instanceof re)return i.init!==n&&i.condition!==n?n:e(i,t+1);if(i instanceof oe)return i.init!==n?n:e(i,t+1);if(i instanceof ce)return i.condition!==n?n:e(i,t+1);if(i instanceof Ee){var o=F.parent(t+1);return qn(o.properties,function(e){return e instanceof Ae})?e(o,t+2):o}if(i instanceof Ce){var s=i.expression;return s===n?e(i,t+1):n}if(i instanceof je)return(i.tail_node()===n?e:Cn)(i,t+1);if(i instanceof ze)return Cn(i,t+1);if(i instanceof Me)return e(i,t+1);if(i instanceof Be)return i.expression!==n?n:e(i,t+1);if(i instanceof un)return"delete"==i.operator?n:e(i,t+1);if(i instanceof _n)return i.name.match_symbol(function(e){return e instanceof Ve&&(ae.name==e.name||ne.name==e.name)})?n:e(i,t+1);if(i instanceof vn)return i.condition!==n?n:e(i,t+1);if(i instanceof gn)return e(i,t+1);return null}:function e(n,t){var i=F.parent(t);if(i instanceof a)return n;if(i instanceof f)return n;if(i instanceof u)return n;if(i instanceof p)return n;if(i instanceof g)return n;if(i instanceof b)return n;if(i instanceof O)return n;if(i instanceof N)return Cn(i,t+1);if(i instanceof J)return n;if(i instanceof ce)return n;if(i instanceof pe)return n;if(i instanceof Ee)return n;if(i instanceof Ce)return n;if(i instanceof je)return(i.tail_node()===n?e:Cn)(i,t+1);if(i instanceof ze)return Cn(i,t+1);if(i instanceof Me)return n;if(i instanceof Be)return n;if(i instanceof un)return n;if(i instanceof _n)return n;if(i instanceof gn)return n;return null})(e,0))===e&&(Ge=!0),e);var i,r,s=F.parent();if(!ie&&dn(e,s)&&(ie=s),he&&ue&&Xe&&!ie&&e instanceof f&&"="!=e.operator&&e.left.equals(ae))return Ke++,E=!0,Se.info("Cascading {this} [{start}]",e),Xe=!1,qe=Wn(ae),e.right.transform(F),Gn(X),Ge?i=X:(Ge=!0,i=Yn(p,X,{operator:he,left:ae.fixed&&ae.definition().fixed?ae.fixed.to_binary(X):ae,right:Ie})),Yn(f,e,{operator:"=",left:e.left,right:Yn(p,e,{operator:e.operator.slice(0,-1),left:i,right:e.right})});if(function(e,t){if(e===Ie)return!0;if(t instanceof re&&e!==t.init)return!0;if(e instanceof f)return"="!=e.operator&&ae.equals(e.left);if(e instanceof g)return ae instanceof Ce&&(!!ae.equals(e.expression)&&!(Ie instanceof me&&!Ie.contains_this()));return e instanceof S?!n.has_directive("use strict"):e instanceof $||(e instanceof I?de&&ae.name===e.name.name:e instanceof Y?e.key instanceof Se:e instanceof W||e instanceof be||e instanceof cn||e instanceof mn)}(e,s))return Ge=!0,e;if(e.single_use)return e;if(!(e instanceof Ve)&&(ue&&ae.equals(e)||le&&(r=le(e,this)))){if(!Xe||ie&&(r||!Fe||!Le))return r||ne||(Ge=!0),e;if(tt(e,s))return ne&&!r&&(Z=!0),e;if(!r&&ee&&e.fixed!==ae.fixed)return Ge=!0,e;if(ne)return ie&&0==Q&&(Q=U-Ke),r||Ke++,e;if(Ke++,E=Ge=!0,Se.info("Collapsing {this} [{start}]",e),"Binary"==X.TYPE)return Vn(X,e),Yn(f,X,{operator:"=",left:X.right.left,right:"&&"==X.operator?Yn(O,X,{condition:X.left,consequent:X.right.right,alternative:e}):Yn(O,X,{condition:X.left,consequent:e,alternative:X.right.right})});if(X instanceof ln)return Yn(pn,X,{operator:X.operator,expression:ae.fixed&&ae.definition().fixed?ae.fixed.to_prefix(X):ae});if(X instanceof pn)return Gn(X),X;if(Vn(Ie,e),X instanceof _n){var c=X.name.definition();return c.references.length-c.replaced!=1||n.exposed(c)?Yn(f,X,{operator:"=",left:e,right:Ie}):(c.replaced++,at(s,e,Ie))}Gn(Ie);var l=X.clone();return l.right=Ie,l}if(function(e,t){if(!(e instanceof nn))return!1;if(e.is_declared(n)){if(e.fixed_value())return!1;if(D(e))return!(t instanceof Ce&&t.expression===e)&&w(e.definition())}else if(fn(e,t))return!1;return!Le||(le=!1,!1)}(e,s))return Ge=!0,e;if((wn(e,s)||ve(e))&&(te=e,e instanceof Pe&&(Ge=!0)),e instanceof o){var h=Xe;return Xe=!1,t(e,F),Xe=h,on(e)}if(e instanceof B){var h=Xe;return Xe=!1,t(e,F),Xe=h,on(e)}if(e instanceof z){e.name=e.name.transform(F);var h=Xe;return Xe=!1,e.value=e.value.transform(F),Xe=h,on(e)}if(!(!(e instanceof d)||e instanceof Pe||e.variables&&e.variables.all(function(e){return!xe.has(e.name)&&!qe.has(e.name)}))){var h=Xe;return Xe=!1,an(e,F)||t(e,F),Xe=h,on(e)}return an(e,F)?on(e):void 0},on),M=new bn(function(e){if(Ge)return e;if(!Ue){if(e!==R[K])return e;switch(K++,R.length-K){case 0:if(Ue=!0,Z)return e;if(e!==X)return e;if(e instanceof _n)return e;en.replaced++;var n=M.parent();return n instanceof je&&n.tail_node()!==e?(ne.replaced++,Ie===Ne?jn.skip:Kn(Ne,Ne.expressions.slice(0,-1))):Ie;case 1:if(!Z&&e.body===X)return Ue=!0,en.replaced++,ne.replaced++,null;default:return an(e,M)}}if(e instanceof nn&&e.definition()===en){if(tt(e,M.parent()))return e;--Ke||(Ge=!0),Se.info("Replacing {this} [{start}]",e);var t=Ie.clone();return t.scope=e.scope,t.reference(),Ke==Q?(Ge=!0,Yn(f,X,{operator:"=",left:e,right:t})):(en.replaced++,t)}return e instanceof P||e instanceof Pe?e:void 0},function(e){return Xn(e,M)});--C>=0;){0==C&&n.option("unused")&&xn();var R=[];for(Tn(e[C]);A.length>0;){var U,K=0,X=(R=A.pop())[R.length-1],Q=-1,Z=!1,ee=!1,ne=null,te=null,ie=null,ae=Nn(X),fe=ae&&ae.has_side_effects(n),ue=ae&&(!fe||ae instanceof nn)&&!Hn(ae,n),le=Bn(X);if(ue||le){var he=X instanceof f&&X.operator.slice(0,-1),de=X.name instanceof Je,ve=Un;if(X.may_throw(n)){if(de&&is_async(x))continue;ve=v?function(e){return e.has_side_effects(n)}:ot}var ye=!1,we=!1,xe=new Fn,Oe=!0,qe=Wn(X),Fe=Qn(ae),Ne=Rn(X),Ie=Ne;fe||(!he&&Ie instanceof je&&(Ie=Ie.tail_node()),fe=Zn());var He=v||!Fe?function(e){return e instanceof B}:Un,Le=et(X),Ue=de,Ge=!1,Ke=0,Xe=!m||!Ue;if(!Xe){for(var Qe=X.arg_index+1;!Ge&&Qe<m.length;Qe++)m[Qe]&&m[Qe].transform(F);Xe=!0}for(var Ze=C;!Ge&&Ze<e.length;Ze++)e[Ze].transform(F);if(ne){if(!Ke||U>Ke+Z){A.push(R),y=!0;continue}Ke==Q&&(Z=!0);var en=ae.definition();Ge=!1,K=0,Ue=de;for(var Ze=C;!Ge&&Ze<e.length;Ze++)e[Ze].transform(M)||e.splice(Ze--,1);Ke=X instanceof _n&&X===R[R.length-1]&&en.references.length==en.replaced&&!n.exposed(en),ne.last_ref=!1,ne.single_use=!1,E=!0}Ke&&Jn(X)}}}return E}function on(e){return Ge?e:(te===e&&(Ge=!0),ie===e&&(ie=null),e)}function an(e,n){if(e instanceof d){if(e instanceof Pe)return e;if(e instanceof S){e.name&&(e.name=e.name.transform(n)),!Ge&&e.extends&&(e.extends=e.extends.transform(n));for(var t=[],i=[],r=0;!Ge&&r<e.properties.length;r++){var o=e.properties[r];o.key instanceof Se&&(o.key=o.key.transform(n)),o.static&&(o instanceof T?o.value&&t.push(o):o instanceof AST_ClassInit&&[].push.apply(i,o.value.body))}for(var r=0;!Ge&&r<i.length;r++)i[r].transform(n);for(var r=0;!Ge&&r<t.length;r++){var o=t[r];o.value=o.value.transform(n)}return e}if(e instanceof oe)return e.object=e.object.transform(n),Ge=!0,e;if(e instanceof Be){e.expression=e.expression.transform(n);for(var r=0;!Ge&&r<e.body.length;r++){var a=e.body[r];if(a instanceof b){if(!Ue){if(a!==R[K])continue;K++}if(a.expression=a.expression.transform(n),!Le)break;le=!1}}return Ge=!0,e}}}function fn(e,n){return n instanceof f?"="==n.operator&&n.left===e:n instanceof z?n.name===e:n instanceof H||(n instanceof Y?n.value===e:void 0)}function dn(e,n){return n instanceof f?n.left!==e&&Dt[n.operator.slice(0,-1)]:n instanceof p?n.left!==e&&Dt[n.operator]:n instanceof g?n.optional&&n.expression!==e:n instanceof b?n.expression!==e:n instanceof O?n.condition!==e:n instanceof ce?n.condition!==e:n instanceof Re?n.optional&&n.expression!==e:void 0}function wn(e,t){if(e instanceof u)return!0;if("Binary"==e.TYPE)return!ki(e.operator,e.right,n);if(e instanceof g){var i=e.expression;if(i instanceof nn&&(d=i.definition(),i=i.fixed_value()),!(i instanceof _e))return!e.is_expr_pure(n);if(d&&qi(n,d,i))return!0;if(i.collapse_scanning)return!1;i.collapse_scanning=!0;var o=Xe;Xe=!1;for(var s=te,f=ie,c=0;!Ge&&c<i.argnames.length;c++)Sn(m,i.argnames[c],e.args[c])&&(Ge=!0);if(!Ge)if(i.rest&&Sn(m,i.rest,Yn(a,e,{elements:e.args.slice(c)})))Ge=!0;else if(kn(i)&&i.value)i.value.transform(F);else for(var c=0;!Ge&&c<i.body.length;c++){var l=i.body[c];if(l instanceof $e){l.value&&l.value.transform(F);break}l.transform(F)}return ie=f,te=s,Xe=o,i.collapse_scanning=!1,Ge?(Ge=!1,!0):!1}if(e instanceof S){if(!v)return!1;var p=e.extends;return!!p&&(p instanceof nn&&(p=p.fixed_value()),!r(p))}if(e instanceof J){if(v){if(v.bfinally)return!0;if(v.bcatch&&e instanceof AST_Throw)return!0}return fe||ae instanceof Ce||rt(ae)}if(e instanceof se)return n.option("ie")&&e.name&&qe.has(e.name.name);if(e instanceof De)return nt(e,t);if(e instanceof Ce){if(fe)return!0;var h=e.expression;if(h instanceof nn&&w(h.definition()))return!0;if(n.option("unsafe")){if(mt(h)&&bt[h.name])return!1;if(It(h))return!1}return!Oe||!ne&&(!(!v&&Fe)&&(!e.optional&&h.may_throw_on_access(n)))}if(e instanceof Me)return!0;if(e instanceof nn){if(nt(e,t))return!fn(e,t);if(fe&&rt(e))return!0;var d=e.definition();return(v||d.scope.resolve()!==x)&&!D(e)}if(e instanceof rn)return!e.is_expr_pure(n);if(e instanceof _n)return!!He(e.name)||(e.value||t instanceof ge)&&e.name.match_symbol(function(e){return e instanceof Ve&&(qe.has(e.name)||fe&&rt(e))},!0);if(e instanceof gn)return!0;var _=tt(e.left,e);return!!_&&(_ instanceof Ce||(!!He(_)||_.match_symbol(function(e){return e instanceof nn&&(qe.has(e.name)||ye&&n.exposed(e.definition()))},!0)));function m(e){return e.transform(F),Ge}}function Sn(e,t,i){if(t instanceof z)return e(t.value)||Sn(e,t.name,t.value)||!Et(i)&&Sn(e,t.name,i);if(!i)return!(t instanceof Ye);if(t instanceof B){if(t.rest&&Sn(e,t.rest))return!0;if(t instanceof H)return i instanceof a?!qn(t.elements,function(n,t){return!Sn(e,n,i[t])}):!i.is_string(n)||!qn(t.elements,function(n){return!Sn(e,n)});if(t instanceof L)return!!i.may_throw_on_access(n)||!qn(t.properties,function(n){return!(n.key instanceof Se&&e(n.key))&&!Sn(e,n.value)})}}function xn(){if(!1!==c){var e=n.parent(),t=n.self();if(void 0===c){if(!(t instanceof me)||An(t)||t.uses_arguments||t.pinned()||!(e instanceof g)||e.expression!==t||!qn(e.args,function(e){return!(e instanceof Me)}))return void(c=!1);if(!vt(e))return;c=!0}var i,r=t.in_strict_mode(n)&&!t.parent_scope.resolve(!0).in_strict_mode(n);is_async(t)?(i=function(e){return e instanceof Ye&&"await"==e.name},s=!0):(i=function(e){return e instanceof u&&!a.find_parent(Pe)},void 0===s&&(s=zn(n,1,e,null,!0,!0)));for(var o=null,a=new yn(function(e,n){if(!d)return!0;if(i(e)||e instanceof gn)return d=null,!0;if(e instanceof De)return!r&&o||(d=null),!0;var a;if(e instanceof nn)return(e.in_arg&&!fi(e.definition())||(a=t.variables.get(e.name))&&a!==e.definition())&&(d=null),!0;if(e instanceof Pe&&!kn(e)){var s=o;return o=e,n(),o=s,!0}}),f=(m=e.args.slice()).length,l=new Fn,p=t.argnames.length;--p>=0;){var h=t.argnames[p],d=m[p],_=null;if(h instanceof z&&(_=h.value,h=h.name,m[f+p]=_),h instanceof B){if(s&&Sn(function(e){return e.has_side_effects(n)},h,d)){A.length=0;break}m[f+p]=t.argnames[p]}else if(!l.has(h.name)&&(l.set(h.name,!0),_&&(d=Et(d)?_:null),d||_?d instanceof _e&&d.pinned()?d=null:d&&d.walk(a):d=Yn(hn,h).transform(n),d)){var v=Yn(_n,h,{name:h,value:d});v.name_index=p,v.arg_index=_?f+p:p,A.unshift([v])}}t.rest&&m.push(t.rest)}}function Tn(e,n){if(R.push(e),e instanceof a)e.elements.forEach(function(e){Tn(e,n)});else if(e instanceof f){var t=e.left;t instanceof B||A.push(R.slice()),Tn(t),Tn(e.right),t instanceof nn&&"="==e.operator&&k.set(t.name,(k.get(t.name)||0)+1)}else if(e instanceof u)Tn(e.expression,n);else if(e instanceof p){var i=Dt[e.operator];n&&i&&"??"!=e.operator&&e.right instanceof f&&"="==e.right.operator&&!(e.right.left instanceof B)&&A.push(R.slice()),Tn(e.left,!i&&n),Tn(e.right,n)}else if(e instanceof g)Tn(e.expression),e.args.forEach(Tn);else if(e instanceof b)Tn(e.expression);else if(e instanceof O)Tn(e.condition),Tn(e.consequent,n),Tn(e.alternative,n);else if(e instanceof N)e.definitions.forEach(Tn);else if(e instanceof V)Tn(e.expression);else if(e instanceof W)Tn(e.condition),e.body instanceof h||Tn(e.body);else if(e instanceof J)e.value&&Tn(e.value);else if(e instanceof re)e.init&&Tn(e.init,!0),e.condition&&Tn(e.condition),e.step&&Tn(e.step,!0),e.body instanceof h||Tn(e.body);else if(e instanceof oe)Tn(e.object),e.body instanceof h||Tn(e.body);else if(e instanceof ce)Tn(e.condition),e.body instanceof h||Tn(e.body),!e.alternative||e.alternative instanceof h||Tn(e.alternative);else if(e instanceof ke)e.properties.forEach(function(e){R.push(e),e.key instanceof Se&&Tn(e.key),e instanceof Ae&&Tn(e.value,n),R.pop()});else if(e instanceof je){var r=e.expressions.length-(n?0:1);e.expressions.forEach(function(e,n){Tn(e,n<r)})}else if(e instanceof ze)Tn(e.body,!0);else if(e instanceof Me)Tn(e.expression);else if(e instanceof Re)Tn(e.expression),Tn(e.property);else if(e instanceof Be)Tn(e.expression),e.body.forEach(Tn);else if(e instanceof un)UNARY_POSTFIX[e.operator]?A.push(R.slice()):Tn(e.expression);else if(e instanceof _n){if(e.name instanceof tn)if(e.value){var o=e.name.definition();o.references.length>o.replaced&&A.push(R.slice())}else q.set(e.name.name,(q.get(e.name.name)||0)+1);e.value&&Tn(e.value)}else e instanceof gn&&e.expression&&Tn(e.expression);R.pop()}function Dn(e,n,t){var i;do{i=e,e=F.parent(++t)}while(e instanceof f&&e.operator.slice(0,-1)==n||e instanceof p&&e.operator==n);return i}function On(e,n,t,i,r){var o=Xe;Xe=!1;var a=te,s=ie,f=F.stack;return F.stack=[i],e.transform(F),F.stack=f,ie=s,te=a,Xe=o,Ge?(Ge=!1,t):n(i,r+1)}function Cn(e,n){var t=F.parent(n);if(wn(e,t))return e;if(dn(e,t))return e;if(t instanceof a)return Cn(t,n+1);if(t instanceof f)return o(t.left);if(t instanceof u)return e;if(t instanceof p)return Cn(t,n+1);if(t instanceof g)return Cn(t,n+1);if(t instanceof b)return Cn(t,n+1);if(t instanceof O)return Cn(t,n+1);if(t instanceof N)return Cn(t,n+1);if(t instanceof J)return Cn(t,n+1);if(t instanceof ce)return Cn(t,n+1);if(t instanceof pe)return e;if(t instanceof Ee){var i=F.parent(n+1);return qn(i.properties,function(e){return e instanceof Ae})?Cn(i,n+2):i}if(t instanceof Ce){var r=t.expression;return r===e?Cn(t,n+1):On(r,Cn,e,t,n)}return t instanceof je?Cn(t,n+1):t instanceof ze?Cn(t,n+1):t instanceof Me?e:t instanceof Be?Cn(t,n+1):t instanceof un?Cn(t,n+1):t instanceof _n?o(t.name):t instanceof gn?e:null;function o(i){return ve(t)?e:i!==e&&i instanceof B?On(i,Cn,e,t,n):Cn(t,n+1)}}function Pn(e){if(y)y=!1;else if(!(U<1)){var t=(e=e.tail_node())instanceof f&&"="==e.operator?e.left:e;if(t instanceof nn){var i=t.definition();if(!i.undeclared&&!w(i)){if(t!==e){if(Hn(t,n))return;var r=i.references.length-i.replaced;if(r<2)return;var o=X.clone();o[o instanceof f?"right":"value"]=t,X.name_index>=0&&(o.name_index=X.name_index,o.arg_index=X.arg_index),X=o}return ne=i}}}}function Mn(e){return e.references.length-e.replaced-(k.get(e.name)||0)}function Nn(e){if(e instanceof f){var t=e.left;if(!(t instanceof nn))return t;var i=t.definition();if(x.uses_arguments&&it(i))return t;if(n.exposed(i))return t;if(U=Mn(i),i.fixed&&t.fixed){var r=i.references.filter(function(e){return e.fixed===t.fixed}).length-1;r<U&&(U=r,Q=0,ee=!0)}return"="==e.operator&&Pn(e.right),t}if(e instanceof p)return e.right.left;if(e instanceof un)return e.expression;if(e instanceof _n){var t=e.name,i=t.definition();if(i.const_redefs)return;if(!In(t,i.orig))return;if(x.uses_arguments&&it(i))return;var o=i.orig.length-i.eliminated-(q.get(i.name)||0);return U=Mn(i),i.fixed&&(U=Math.min(U,i.references.filter(function(n){if(!n.fixed)return!0;if(!n.fixed.assigns)return!0;var i=n.fixed.assigns[0];return i===t||Rn(i)===e.value}).length)),o>1&&!(t instanceof Je)?(Pn(e.value),Yn(nn,t)):Pn(e.value)||1==U&&!n.exposed(i)?Yn(nn,t):void 0}}function Rn(e){if(e instanceof f)return e.right;if(e instanceof p){var n=e.clone();return n.right=e.right.right,n}return e instanceof _n?e.value:void 0}function Bn(e){if(!(e instanceof f&&e.right.single_use)){for(var t,i=Object.create(null),r=new yn(function(e){e instanceof nn&&(i[e.definition().id]=!0)});e instanceof f&&"="==e.operator;)e.left.walk(r),e=e.right;if(e instanceof De)return c;if(e instanceof nn){var o=e.evaluate(n);return o===e?c:Ln(o,c)}if(e.is_truthy())return Ln(!0,Un);if(e.is_constant()){var s=e.evaluate(n);if(!(s instanceof Se))return Ln(s,c)}return ae instanceof nn&&(!!function e(t){if(t instanceof a)return!1;if(t instanceof p&&Dt[t.operator])return e(t.left)&&e(t.right);if(t instanceof g)return!1;if(t instanceof O)return e(t.consequent)&&e(t.alternative);if(t instanceof ke)return!1;return!t.has_side_effects(n)}(e)&&(e.walk(new yn(function(e){if(t)return!0;e instanceof nn&&i[e.definition().id]&&(t=!0)})),!t&&c))}function c(n){return e.equals(n)}}function Ln(e,t){return function(i,r){if(r.in_boolean_context()){if(e&&i.is_truthy()&&!i.has_side_effects(n))return!0;if(i.is_constant()){var o=i.evaluate(n);if(!(o instanceof Se))return!o==!e}}return t(i)}}function Gn(e){for(;e.write_only&&(e.write_only=!1,e instanceof f);)e=e.right}function Vn(e,n){var t=n.scope||$n(F)||i;e.walk(new yn(function(e){if(e instanceof d)return!0;e instanceof Ye&&(e.scope=t)}))}function Wn(e){var i=new Fn;e instanceof _n&&(e.name.definition().fixed||(Oe=!1),i.add(e.name.name,ae));var r=x.uses_arguments&&!n.has_directive("use strict"),o=x instanceof sn,a=new yn(function(s){var c;if(s instanceof nn){if(!(c=s.fixed_value())){c=s;var u=s.definition(),l=s.fixed&&s.fixed.escaped||u.escaped;u.undeclared||!u.assignments&&l&&!l.cross_scope||!j(u,s.scope,s,a.parent())&&Ci(u)||(Oe=!1)}}else s instanceof De&&(c=s);if(c)i.add(s.name,t(n,a,s,c,0));else{if(s instanceof _e){for(var h,d=0,_=s;h=a.parent(d++);_=h){if(h instanceof f){if(h.left===_)break;if("="==h.operator)continue;if(Dt[h.operator.slice(0,-1)])continue;break}if(h instanceof p){if(Dt[h.operator])continue;break}if(h instanceof g)return;if(h instanceof Pe)return;if(h instanceof je){if(h.tail_node()===_)continue;break}if(h instanceof rn){if(h.tag)return;break}}return s.enclosed.forEach(function(e){e.scope!==s&&xe.set(e.name,!0)}),!0}r&&s instanceof Re&&(x.each_argname(function(e){n.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||(Oe=!1),i.add(e.name,!0))}),r=!1)}if(o)if("Call"==s.TYPE){if(we)return;var v=s.expression;if(v instanceof Ce)return;if(v instanceof me&&!v.contains_this())return;we=!0}else s instanceof Ce&&function e(n){if(n instanceof nn&&!(n=n.fixed_value()))return!0;if(n instanceof f)return"="==n.operator&&e(n.right);return n instanceof Ce||n instanceof De}(s.expression)&&(s!==ae||e instanceof un?ye=!0:we=!0)});return e.walk(a),i}function Jn(t){var i=Ie===Ne?null:Kn(Ne,Ne.expressions.slice(0,-1)),r=t.name_index;if(r>=0){var o,a=x.argnames[r];a instanceof z?(x.argnames[r]=a=a.clone(),a.value=i||Yn(Te,a,{value:0})):(o=n.parent().args)[r]&&(x.argnames[r]=a.clone(),o[r]=i||Yn(Te,o[r],{value:0}))}else{var s=R.length-1,f=R[s];(f instanceof _n||R[s-1].body===f)&&s--;var c=new bn(function(e,n,t){if(Ue)return e;if(e!==R[K])return e;if(++K<=s)return an(e,c);if(Ue=!0,e instanceof N){q.set(f.name.name,(q.get(f.name.name)||0)+1),ne&&ne.replaced++;var r=e.definitions,o=r.indexOf(f),a=f.clone();if(a.value=null,!i)return e.definitions[o]=a,e;var u=[Yn(ze,i,{body:i})];if(o>0){var l=e.clone();l.definitions=r.slice(0,o),u.unshift(l),(e=e.clone()).definitions=r.slice(o)}return u.push(e),e.definitions[0]=a,t?jn.splice(u):Yn(_,e,{body:u})}return i?En(e)?Yn(ze,i,{body:i}):i:t?jn.skip:null},function(e,n){return e instanceof re?Tt(e,n):Xn(e,c)});Ge=!1,Ue=!1,K=0,(e[C]=e[C].transform(c))||e.splice(C,1)}}function Xn(e,n){if(e instanceof je)switch(e.expressions.length){case 0:return null;case 1:return at(n.parent(),e,e.expressions[0])}}function Qn(e){var n=root_expr(e);if(!(n instanceof nn))return!1;if(n.definition().scope.resolve()!==x)return!1;if(!l)return!0;if(he)return!1;if(X instanceof un)return!1;var t=qe.get(n.name);return!t||t[0]===e}function Zn(){return!(X instanceof un)&&Ie.has_side_effects(n)}function et(e){if(e instanceof un)return!1;if(fe)return!1;if(ne)return!0;if(!(ae instanceof nn))return!1;var n;if(e instanceof _n)n=1;else{if("="!=e.operator)return!1;n=2}var t=ae.definition();if(t.references.length-t.replaced==n)return!0;if(!t.fixed)return!1;if(!ae.fixed)return!1;var i=ae.fixed.assigns,r=0;return!!qn(t.references,function(e,n){var t=e.fixed;return!!t&&(!t.to_binary&&!t.to_prefix&&(t===ae.fixed?(r++,!0):i&&t.assigns&&i[0]!==t.assigns[0]))})&&(r==n&&(ee=!0,!0))}function nt(e,n){var t=qe.get(e.name);if(t&&!qn(t,function(e){return!e}))return t[0]!==ae||void(le=!1)}function rt(e){var t=e.definition();return!(1==t.orig.length&&t.orig[0]instanceof We)&&(t.scope.resolve()!==x||(!(!we||!n.exposed(t))||!qn(t.references,function(e){return e.scope.resolve(!0)===x})))}function ot(e,n){if(e instanceof f)return ot(e.left,!0);if(e instanceof un)return ot(e.expression,!0);if(e instanceof _n)return e.value&&ot(e.value);if(n){if(e instanceof V)return ot(e.expression,!0);if(e instanceof Re)return ot(e.expression,!0);if(e instanceof nn)return e.definition().scope.resolve()!==x}return!1}}function Q(e){for(var n=!1,t=[],i=0;i<e.length;){var r=e[i];if(r instanceof _&&qn(r.body,ut))n=!0,Q(r.body),[].splice.apply(e,[i,1].concat(r.body)),i+=r.body.length;else{if(r instanceof U){if(In(r.value,t)){n=!0,e.splice(i,1);continue}t.push(r.value)}r instanceof K?(n=!0,e.splice(i,1)):i++}}return n}function ee(e,n){for(var t,i,r,o=!1,a=n.parent(),s=n.self(),f=k&&a&&"Call"==a.TYPE&&a.expression===s,c=k&&n.option("conditionals")&&n.option("sequences"),u=!(v&&v.bfinally&&Cn(x)),l=function(e){for(var n=0,t=e.length;--t>=0;){var i=e[t];if(i instanceof ce&&i.body instanceof $e&&++n>1)return!0}return!1}(e),p=e.length;--p>=0;){var d=e[p],g=G(p),b=e[g];if(k&&t&&!b&&d instanceof $e&&u&&!(s instanceof He)){var y=d.value;if(!y){o=!0,e.splice(p,1);continue}var w=y.tail_node();if(Et(w)){o=!0,y instanceof pn?y=y.expression:w instanceof pn&&((y=y.clone()).expressions[y.expressions.length-1]=w.expression),e[p]=Yn(ze,d,{body:y});continue}}if(d instanceof ce){var S=Ht(d.body);if(B(S)){S.label&&Ln(S.label.thedef.references,S),o=!0,(d=d.clone()).body=Yn(_,d,{body:L(d.body,S)}),d.alternative=Yn(_,d,{body:lt(d.alternative).concat(H(r,i))}),U(S.value,r),e[p]=d,e[p]=d.transform(n);continue}if(S&&!d.alternative&&b instanceof he){var T=d.condition,A=p+1==g&&d.body instanceof _;if((T=Ot(T,T.negate(n),A))!==d.condition){o=!0,(d=d.clone()).condition=T;var y=d.body;d.body=Yn(_,b,{body:H(!0,null,g+1)}),e.splice(p,1,d,y),(!k||s instanceof h&&s.body===e)&&(e[p]=d.transform(n));continue}}var E=Ht(d.alternative);if(B(E)){E.label&&Ln(E.label.thedef.references,E),o=!0,(d=d.clone()).body=Yn(_,d.body,{body:lt(d.body).concat(H(r,i))}),d.alternative=Yn(_,d.alternative,{body:L(d.alternative,E)}),U(E.value,r),e[p]=d,e[p]=d.transform(n);continue}if(n.option("typeofs")){if(S&&!E){var D=Yn(_,s,{body:e.slice(p+1)});ri(d.condition,null,D)}if(!S&&E){var D=Yn(_,s,{body:e.slice(p+1)});ri(d.condition,D)}}}if(d instanceof ce&&d.body instanceof $e){var C,$,P=d.body.value,j=d.body.in_bool||b instanceof $e&&b.in_bool;if(!d.alternative&&b instanceof $e&&(u||!P==!b.value)){o=!0,(d=d.clone()).alternative=Yn(_,b,{body:H(!0,null,g+1)}),e[p]=d,e[p]=d.transform(n);continue}if(k&&t&&!b&&!d.alternative&&(j||P&&l||P instanceof O&&(Et(P.consequent,n)||Et(P.alternative,n)))){o=!0,(d=d.clone()).alternative=Yn($e,d,{value:null}),e[p]=d,e[p]=d.transform(n);continue}if(c&&!d.alternative&&(!($=e[C=V(p)])&&f||$ instanceof ce&&$.body instanceof $e)&&(b?b instanceof ze&&G(g)==e.length:!t)){o=!0;var z=[];d=d.clone(),z.push(d.condition),d.condition=Kn(d,z),d.alternative=Yn(_,s,{body:H().concat(Yn($e,s,{value:null}))}),e[p]=d.transform(n),p=C+1;continue}}d instanceof m||d instanceof J?i=d:t&&i&&i===b&&W(d)}return o;function N(e){return R(n,function(n){return n===e})}function I(e,n){if(!i)return!1;if(i.TYPE!=e.TYPE)return!1;var t=e.value;if(!t)return!1;var r=i.equals(e);return!r&&t instanceof je&&(t=t.tail_node(),i.value&&i.value.equals(t)&&(r=2)),!r&&!n&&i.value instanceof je&&i.value.tail_node().equals(t)&&(r=3),r}function B(t){if(r=!1,!function(e){if(e instanceof J){if(r=I(e))return!0;if(!k)return!1;if(!(e instanceof $e))return!1;var t=e.value;return!(t&&!Et(t.tail_node()))&&(!(s instanceof He)||!!i&&(!(i instanceof J&&i.value)&&(r=4,!0)))}if(!(e instanceof be))return!1;if(s instanceof He)if(i instanceof J){if(!k)return!1;if(i.value)return!1;r=!0}else if(i){if(n.loopcontrol_target(i)!==a)return!1;r=!0}else if(!1===i)return!1;var o=n.loopcontrol_target(e);return e instanceof F?N(dt(o)):!(o instanceof pe)&&N(o)}(t))return!1;for(var o=e.length;--o>p;){var f=e[o];if(f instanceof M){if(f.name.definition().preinit)return!1}else if((f instanceof q||f instanceof ge)&&!qn(f.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof Ve&&e.definition().preinit})}))return!1}return!0}function H(n,t,r){var o=[],a=!1,s=p+1;n?t?r=e.lastIndexOf(t):(t=e[r])!==i&&(i=!1):(r=e.length,i=null);var f=e.splice(s,r-s).filter(function(e){return e instanceof ve?(o.push(e),!1):(ct(e)&&(a=!0),!0)});return 3===n&&(f.push(Yn(ze,t.value,{body:Kn(t.value,t.value.expressions.slice(0,-1))})),t.value=t.value.tail_node()),[].push.apply(a?f:e,o),f}function Y(e,n){if(e)switch(n){case 4:return e;case 3:if(!(e instanceof je))break;case 2:return Kn(e,e.expressions.slice(0,-1))}}function L(e,n){for(var t,i=lt(e),o=i;(t=o[o.length-1])!==n;)o=t.body;o.pop();var a=n.value;return r&&(a=Y(a,r)),a&&o.push(Yn(ze,a,{body:a})),i}function U(e,n){if(n&&e){switch(n){case 4:return;case 3:case 2:e=e.tail_node()}st(e,i.value)}}function G(n){t=!0;for(var i=n;++i<e.length;){var r=e[i];if(!St(r)){if(!(r instanceof dn))break;t=!1}}return i}function V(n){for(var t=n;--t>=0;){var i=e[t];if(!(i instanceof dn)&&!St(i))break}return t}function W(e,n,t){if(e instanceof J){var r=!(n&&e instanceof AST_Throw)&&I(e,!0);if(r){o=!0;var a=Y(e.value,r);return a?Yn(ze,a,{body:a}):t?null:Yn(K,e)}}else if(e instanceof ce)e.body=W(e.body,n),e.alternative&&(e.alternative=W(e.alternative,n));else if(e instanceof de)e.body=W(e.body,n);else if(e instanceof cn){if(!e.bfinally||!i.value||i.value.is_constant()){e.bcatch&&W(e.bcatch,n);var s=W(e.body.pop(),!0,!0);s&&e.body.push(s)}}else if(e instanceof h&&!(e instanceof Pe||e instanceof Be)){var s=W(e.body.pop(),n,!0);s&&e.body.push(s)}return e}}function ne(e,n){var t,i=n.self();i instanceof y?i=n.parent():i instanceof de&&(i=i.body);for(var r=0,o=0,a=e.length;r<a;r++){var s=e[r];if(s instanceof be){var f=n.loopcontrol_target(s);dt(f)!==i||s instanceof m&&f instanceof pe?e[o++]=s:s.label&&Ln(s.label.thedef.references,s)}else e[o++]=s;if(Ht(s)){t=e.slice(r+1);break}}return e.length=o,t&&t.forEach(function(t){At(n,t,e)}),e.length!=a}function te(e,n){if(!(!k||v&&v.bfinally)){for(var t=!1,i=e.length;--i>=0;){var r=e[i];if(!(r instanceof ze))break;var o=r.body;if(!(o instanceof u))break;var a=o.expression;if(!Ai(n,a))break;if(t=!0,a=a.drop_side_effect_free(n,!0)){r.body=a;break}}return e.length=i+1,t}}function fe(e,n){var t=!1,r=e.length-1;if(k&&r>=0){var o=v&&v.bfinally&&Cn(x),a=e[r].try_inline(n,i,o);a&&(e[r--]=a,t=!0)}for(var s=l&&v&&v.bfinally?"try":l;r>=0;r--){var a=e[r].try_inline(n,i,!0,s);a&&(e[r]=a,t=!0)}return t}function ue(e,n){if(!(e.length<2)){for(var t=[],i=0,r=0,o=e.length;r<o;r++){var a=e[r];a instanceof ze?(t.length>=n.sequences_limit&&s(),ft(t,a.body)):St(a)?e[i++]=a:(s(),e[i++]=a)}return s(),e.length=i,i!=o}function s(){if(t.length){var n=Kn(t[0],t);e[i++]=Yn(ze,n,{body:n}),t=[]}}}function le(e,n){if(!(e instanceof _))return e;for(var t=null,i=0;i<e.body.length;i++){var r=e.body[i];if(r instanceof dn&&wt(r))n.push(r);else{if(t||ct(r))return!1;t=r}}return t}function ye(e,n){for(var t,i=!1,r=0,o=0;o<e.length;o++){var a=e[o];if(t)if(a instanceof J)!a.value&&Cn(x)||(a.value=h(a.value||Yn(hn,a)).optimize(n));else if(a instanceof re){if(!(a.init instanceof N)){var s=!1;t.body.walk(new yn(function(e){return!!(s||e instanceof Pe)||(e instanceof p&&"in"==e.operator?(s=!0,!0):void 0)})),s||(a.init?a.init=h(a.init):(a.init=t.body,r--,i=!0))}}else a instanceof ae?ct(a.init)||(a.object=h(a.object)):a instanceof ce?a.condition=h(a.condition):a instanceof Be?a.expression=h(a.expression):a instanceof mn&&(a.expression=h(a.expression));if(n.option("conditionals")&&a instanceof ce){var f=[],c=le(a.body,f),u=le(a.alternative,f);if(!1!==c&&!1!==u&&f.length>0){var l=f.length;f.push(Yn(ce,a,{condition:a.condition,body:c||Yn(K,a.body),alternative:u})),f.unshift(r,1),[].splice.apply(e,f),o+=l,r+=l+1,t=null,i=!0;continue}}e[r++]=a,t=a instanceof ze?a:null}return e.length=r,i;function h(e){r--,i=!0;var n=t.body;return Kn(n,[n,e])}}function we(e){return e instanceof f?[e]:e instanceof je?e.expressions.slice():void 0}function xe(e,n,t){var i=we(n);if(i){t=t||0;for(var r=!1,o=i.length-t;--o>=0;){var a=i[o];if(l(a)){var s;if(a.left instanceof nn)s=i.slice(o+1);else{if(!(a.left instanceof Ce&&l(a.left.expression)))continue;s=i.slice(o+1);var c=a.clone();a=a.left.expression,c.left=c.left.clone(),c.left.expression=a.left.clone(),s.unshift(c)}0!=s.length&&Ne(a.left,a.right,s)&&(r=!0,i=i.slice(0,o).concat(a,s))}}if(e instanceof N){for(var o=e.definitions.length;--o>=0;){var u=e.definitions[o];if(u.value){Ne(u.name,u.value,i)&&(r=!0),qe(u,i,t)&&(r=!0);break}}e instanceof dn&&Fe(e.definitions,i,t)&&(r=!0)}return r&&i}function l(e){return e instanceof f&&"="==e.operator}}function Oe(e,n){if(e instanceof ze&&!wt(n)){var t=we(e.body);if(t){var i=[];if(Fe(i,t.reverse(),0))return n.definitions=i.reverse().concat(n.definitions),t.reverse()}}}function qe(e,t,i){if(n.option("conditionals")&&!(e.name instanceof B)){for(var r=!1,o=e.name.definition();t.length>i;){var a=bi(n,o,e.value,t[0]);if(!a)break;e.value=a,t.shift(),r=!0}return r}}function Fe(e,n,t){for(var i=!1;n.length>t;){var r=n[0];if(!(r instanceof f))break;if("="!=r.operator)break;var o=r.left;if(!(o instanceof nn))break;if(mt(o))break;if(o.scope.resolve()!==x)break;var a=o.definition();if(a.scope!==x)break;if(a.orig.length>a.eliminated+1)break;if("SymbolVar"!=a.orig[0].TYPE)break;var s=Yn(tn,o);e.push(Yn(_n,r,{name:s,value:r.right})),a.orig.push(s),a.replaced++,n.shift(),i=!0}return i}function Ne(e,t,i){var r=new Fn;for(r.set(e.name,!0);t instanceof f&&"="==t.operator;)t.left instanceof nn&&r.set(t.left.name,!0),t=t.right;if(t instanceof ke){var o=!1;do{if(!a(i[0]))break;i.shift(),o=!0}while(i.length);return o}function a(e){if(e instanceof f&&"="==e.operator&&e.left instanceof Ce){var i=e.left.expression;if(i instanceof nn&&r.has(i.name)&&e.right.is_constant_expression(x)){var o=e.left.property;if(o instanceof Se&&(a(o)&&(o=e.left.property=o.right.clone()),o=o.evaluate(n)),!(o instanceof Se)){var s="__proto__"==(o=""+o)||n.has_directive("use strict")?function(e){var n=e.key;return"string"==typeof n&&n!=o&&"__proto__"!=n}:function(e){var n=e.key;return e instanceof AST_ObjectGetter||e instanceof AST_ObjectSetter?"string"==typeof n&&n!=o:"__proto__"!==n};if(qn(t.properties,s))return t.properties.push(Yn(Ae,e,{key:o,value:e.right})),!0}}}}}function Ie(e){for(var n,t=!1,i=0,r=-1;i<e.length;i++){var o=e[i],a=e[r];if(o instanceof N)if(a&&a.TYPE==o.TYPE)a.definitions=a.definitions.concat(o.definitions),t=!0;else if(n&&n.TYPE==o.TYPE&&wt(o))n.definitions=n.definitions.concat(o.definitions),t=!0;else if(o instanceof dn){var s=Oe(a,o);s?(s.length&&(a.body=Kn(a,s),r++),t=!0):r++,e[r]=n=o}else e[++r]=o;else{if(o instanceof J)o.value=u(o.value);else if(o instanceof re){var s=xe(a,o.init);if(s)t=!0,o.init=s.length?Kn(o.init,s):null;else{if(a instanceof dn&&(!o.init||o.init.TYPE==a.TYPE)){o.init&&(a.definitions=a.definitions.concat(o.init.definitions)),o=o.clone(),n=o.init=a,e[r]=l(o),t=!0;continue}if(n&&o.init&&n.TYPE==o.init.TYPE&&wt(o.init))n.definitions=n.definitions.concat(o.init.definitions),o.init=null,t=!0;else if(o.init instanceof dn&&(n=o.init,s=Oe(a,o.init))){if(t=!0,0==s.length){e[r]=l(o);continue}a.body=Kn(a,s)}}}else if(o instanceof oe){if(n&&n.TYPE==o.init.TYPE){var f=n.definitions.slice();o.init=o.init.definitions[0].name.convert_symbol(nn,function(e,n){f.push(Yn(_n,n,{name:n,value:null})),n.definition().references.push(e)}),n.definitions=f,t=!0}o.object=u(o.object)}else if(o instanceof ce)o.condition=u(o.condition);else if(o instanceof ze){var c,s=xe(a,o.body);if(s){if(t=!0,!s.length)continue;o.body=Kn(o.body,s)}else if(a instanceof N&&(c=e[i+1])&&a.TYPE==c.TYPE&&(c=c.definitions[0]).value){t=!0,c.value=Kn(o,[o.body,c.value]);continue}}else o instanceof Be?o.expression=u(o.expression):o instanceof mn&&(o.expression=u(o.expression));e[++r]=n?l(o):o}}return e.length=r+1,t;function u(e){var n=xe(a,e,1);if(!n)return e;t=!0;var i=e.tail_node();return n[n.length-1]!==i&&n.push(i.left),Kn(e,n)}function l(e){return e.transform(new bn(function(e,i,r){if(e instanceof N){if(n===e)return e;if(n.TYPE!=e.TYPE)return e;var o=this.parent();return o instanceof oe&&o.init===e?e:wt(e)?(n.definitions=n.definitions.concat(e.definitions),t=!0,o instanceof re&&o.init===e?null:r?jn.skip:Yn(K,e)):e}return e instanceof Z?e:e instanceof Pe?e:En(e)?void 0:e}))}}}function At(e,n,t){var i,r=!1;function o(e){i?(i.push(e),ut(e)||(i.required=!0)):t.push(e)}n.walk(new yn(function(a,s){if(a instanceof M)return a.extends=null,a.properties=[],o(a),!0;if(a instanceof N){var f=[];return a.remove_initializers(e,f)&&Se.warn("Dropping initialization in unreachable code [{start}]",a),f.length>0&&(a.definitions=f,o(a)),!0}if(a instanceof ve)return o(a),!0;if(a instanceof Pe)return!0;if(a instanceof d){var c=i;return i=[],s(),i.required?t.push(Yn(_,n,{body:i})):i.length&&[].push.apply(t,i),i=c,!0}a instanceof be||(r=!0)})),r&&Se.warn("Dropping unreachable code [{start}]",n)}function Et(e,n){return null==e||e.is_undefined||e instanceof hn||e instanceof pn&&"void"==e.operator&&!(n&&e.expression.has_side_effects(n))}nn.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&bt[this.name]}),(gt=function(e,n){e.DEFMETHOD("in_strict_mode",n)})(S,Vn),gt(Pe,function(e){for(var n=this.body,t=0;t<n.length;t++){var i=n[t];if(!(i instanceof U))break;if("use strict"==i.value)return!0}var r=this.parent_scope;return r?r.resolve(!0).in_strict_mode(e):e.option("module")}),function(e){e(Se,Un),e(a,Vn),e(f,function(){return"="==this.operator&&this.right.is_truthy()}),e(_e,Vn),e(ke,Vn),e(Fe,Vn),e(je,function(){return this.tail_node().is_truthy()}),e(nn,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=Un;var n=e.is_truthy();return delete this.is_truthy,n})}(function(e,n){e.DEFMETHOD("is_truthy",n)}),function(e){function n(e,n,t){switch(e){case"-":return n.is_negative_zero()&&(!(t instanceof C)||0==t.value);case"&&":case"||":return n.is_negative_zero()||t.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}e(Se,Vn),e(a,Un),e(f,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():n(e.slice(0,-1),this.left,this.right)}),e(p,function(){return n(this.operator,this.left,this.right)}),e(C,function(){return 0==this.value&&1/this.value<0}),e(_e,Un),e(ke,Un),e(Fe,Un),e(je,function(){return this.tail_node().is_negative_zero()}),e(nn,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=Vn;var n=e.is_negative_zero();return delete this.is_negative_zero,n}),e(pn,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator})}(function(e,n){e.DEFMETHOD("is_negative_zero",n)}),function(e){function n(e,n){return n||/strict/.test(e.option("pure_getters"))}Se.DEFMETHOD("may_throw_on_access",function(e,n){return!e.option("pure_getters")||this._dot_throw(e,n)}),e(Se,n),e(a,Un),e(f,function(e){var n=this.operator,t=this.left,i=this.right;return"="!=n?Dt[n.slice(0,-1)]&&(t._dot_throw(e)||i._dot_throw(e)):!!i._dot_throw(e)&&(!(t instanceof nn)||(!(i instanceof p&&"||"==i.operator&&t.name==i.left.name)||i.right._dot_throw(e)))}),e(p,function(e){return Dt[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),e(S,function(e,t){return n(e,t)&&!qn(this.properties,function(e){return!!e.private||(!e.static||!(e instanceof AST_ClassGetter||e instanceof AST_ClassSetter))})}),e(O,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),e(C,Un),e(V,function(e,t){if(!n(e,t))return!1;var r=this.expression;return r instanceof nn&&(r=r.fixed_value()),!("prototype"==this.property&&i(r))}),e(_e,Un),e(xe,Vn),e(ke,function(e,t){return n(e,t)&&!qn(this.properties,function(n){return!(n instanceof AST_ObjectGetter||n instanceof AST_ObjectSetter)&&!("__proto__"===n.key&&n.value._dot_throw(e,t))})}),e(De,function(e,t){return n(e,t)&&!this.scope.resolve().new}),e(je,function(e){return this.tail_node()._dot_throw(e)}),e(nn,function(e,t){if(this.is_undefined)return!0;if(!n(e,t))return!1;if(mt(this)&&this.is_declared(e))return!1;if(this.is_immutable())return!1;var i=this.definition();if(w(i)&&!i.scope.rest&&qn(i.scope.argnames,function(e){return e instanceof Je}))return i.scope.uses_arguments>2;var r=this.fixed_value(!0);return!r||(this._dot_throw=Vn,r._dot_throw(e)?(delete this._dot_throw,!0):(this._dot_throw=Un,!1))}),e(pn,function(){return"void"==this.operator}),e(ln,Un),e(hn,Vn)}(function(e,n){e.DEFMETHOD("_dot_throw",n)}),function(e){function n(e,n,t){switch(n){case"&&":return t.left.is_defined(e)&&t.right.is_defined(e);case"||":return t.left.is_truthy()||t.right.is_defined(e);case"??":return t.left.is_defined(e)||t.right.is_defined(e);default:return!0}}e(Se,Un),e(a,Vn),e(f,function(e){var t=this.operator;return"="==t?this.right.is_defined(e):n(e,t.slice(0,-1),this)}),e(p,function(e){return n(e,this.operator,this)}),e(O,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),e(C,Vn),e(fe,Un),e(_e,Vn),e(ke,Vn),e(je,function(e){return this.tail_node().is_defined(e)}),e(nn,function(e){if(this.is_undefined)return!1;if(mt(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var n=this.fixed_value();if(!n)return!1;this.is_defined=Un;var t=n.is_defined(e);return delete this.is_defined,t}),e(pn,function(){return"void"!=this.operator}),e(ln,Vn),e(hn,Un)}(function(e,n){e.DEFMETHOD("is_defined",n)}),function(e){e(Se,Un),e(f,function(e){return"="==this.operator&&this.right.is_boolean(e)});var n=Mn("in instanceof == != === !== < <= >= >");e(p,function(e){return n[this.operator]||Dt[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(v,Vn);var t=Mn("every hasOwnProperty isPrototypeOf propertyIsEnumerable some");e(g,function(e){if(!e.option("unsafe"))return!1;var n=this.expression;return n instanceof V&&(t[n.property]||"test"==n.property&&n.expression instanceof Fe)}),e(O,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(we,Un),e(je,function(e){return this.tail_node().is_boolean(e)}),e(nn,function(e){var n=this.fixed_value();if(!n)return!1;this.is_boolean=Un;var t=n.is_boolean(e);return delete this.is_boolean,t});var i=Mn("! delete");e(pn,function(){return i[this.operator]})}(function(e,n){e.DEFMETHOD("is_boolean",n)}),function(e){e(Se,Un);var n=Mn("- * / % ** & | ^ << >> >>>");e(f,function(e){return n[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(p,function(e){return!!n[this.operator]||"+"==this.operator&&((this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e)))});var t=Mn(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);e(g,function(e){if(!e.option("unsafe"))return!1;var n=this.expression;return n instanceof V&&(t[n.property]||mt(n.expression)&&"Math"==n.expression.name)}),e(O,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(we,Un),e(Te,Vn),e(je,function(e){return this.tail_node().is_number(e)}),e(nn,function(e,n){var t=this.fixed_value();if(!t)return!1;if(n&&t instanceof pn&&"+"==t.operator&&t.expression.equals(this))return!1;this.is_number=Un;var i=t.is_number(e);return delete this.is_number,i});var i=Mn("+ - ~ ++ --");e(un,function(){return i[this.operator]})}(function(e,n){e.DEFMETHOD("is_number",n)}),function(e){e(Se,Un),e(f,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(p,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))});var n=Mn(["charAt","substr","substring","toExponential","toFixed","toLowerCase","toPrecision","toString","toUpperCase","trim"]);e(g,function(e){if(!e.option("unsafe"))return!1;var t=this.expression;return t instanceof V&&n[t.property]}),e(O,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(je,function(e){return this.tail_node().is_string(e)}),e(Ie,Vn),e(nn,function(e){var n=this.fixed_value();if(!n)return!1;this.is_string=Un;var t=n.is_string(e);return delete this.is_string,t}),e(rn,function(e){return!this.tag||Fi(e,this.tag)}),e(pn,function(){return"typeof"==this.operator})}(function(e,n){e.DEFMETHOD("is_string",n)});var Dt=Mn("&& || ??");function Ot(e,n,t){var i=n.print_to_string().length-e.print_to_string().length;return i<(t||0)?n:e}function qt(e,n,t){return Ot(Yn(ze,e,{body:e}),Yn(ze,n,{body:n}),t).body}function Ct(e,n,t,i){return(Tn(e)?qt:Ot)(n,t,i)}function Ft(e){var n=Object.create(null);return Object.keys(e).forEach(function(t){n[t]=Mn(e[t])}),n}function $t(e){for(var n=0;n<e.length;n++){var t=e[n];if(!(t instanceof U))return t}}function Pt(){return this.value?Yn($e,this.value,{value:this.value}):$t(this.body)}function jt(e,n){var t=n.evaluate(e);return t===n?n:(t=nt(t,n).optimize(e),Ct(e,n,t,e.eval_threshold))}!function(e){function n(e){Se.warn("global_defs {this} redefined [{start}]",e)}sn.DEFMETHOD("resolve_defines",function(e){return e.option("global_defs")?(this.figure_out_scope({ie:e.option("ie")}),this.transform(new bn(function(t){var i=t._find_defs(e,"");if(i){for(var r,o=0,a=t;(r=this.parent(o++))&&r instanceof Ce&&r.expression===a;)a=r;if(!tt(a,r))return i;n(t)}}))):this}),e(Se,Rn),e(V,function(e,n){return this.expression._find_defs(e,"."+this.property+n)}),e(Ve,function(e){this.definition().global&&Pn(e.option("global_defs"),this.name)&&n(this)}),e(nn,function(e,n){if(this.definition().global){var t=e.option("global_defs"),i=this.name+n;return Pn(t,i)?function e(n,t){if(n instanceof Se)return n.clone(!0);if(Array.isArray(n))return Yn(a,t,{elements:n.map(function(n){return e(n,t)})});if(n&&"object"==typeof n){var i=[];for(var r in n)Pn(n,r)&&i.push(Yn(Ae,t,{key:r,value:e(n[r],t)}));return Yn(ke,t,{properties:i})}return nt(n,t)}(t[i],this):void 0}})}(function(e,n){e.DEFMETHOD("_find_defs",n)}),s.DEFMETHOD("first_statement",Pt),c.DEFMETHOD("first_statement",Pt),_e.DEFMETHOD("first_statement",function(){return $t(this.body)}),_e.DEFMETHOD("length",function(){for(var e=this.argnames,n=0;n<e.length&&!(e[n]instanceof z);n++);return n});var zt=["constructor","toString","valueOf"],Mt=Ft({Array:["indexOf","join","lastIndexOf","slice"].concat(zt),Boolean:zt,Function:zt,Number:["toExponential","toFixed","toPrecision"].concat(zt),Object:zt,RegExp:["exec","test"].concat(zt),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(zt)}),Nt=Ft({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]});function It(e){if(!(e instanceof V))return!1;var n=e.expression;if(!mt(n))return!1;var t=Nt[n.name];return t&&(t[e.property]||"Math"==n.name&&"random"==e.property)}!function(e){e(Se,Un),e(C,Vn),e(Fe,Un);var n=Mn("! ~ - + void");e(pn,function(){return n[this.operator]&&this.expression instanceof C})}(function(e,n){e.DEFMETHOD("is_constant",n)}),function(e){Se.DEFMETHOD("evaluate",function(e,n){if(!e.option("evaluate"))return this;var t=[],i=this._eval(e,n,t,1);return t.forEach(function(e){delete e._eval}),n?i:!i||i instanceof RegExp?i:"function"==typeof i||"object"==typeof i?this:i});var n=new yn(function(e){e instanceof f&&t(e.left),e instanceof oe&&t(e.init),e instanceof un&&UNARY_POSTFIX[e.operator]&&t(e.expression)});function t(e){e instanceof H?e.elements.forEach(t):e instanceof L?e.properties.forEach(function(e){t(e.value)}):e instanceof Ce?t(e.expression):e instanceof nn&&e.definition().references.forEach(function(e){delete e._eval})}e(Ne,function(){throw new Error(string_template("Cannot evaluate a statement [{start}]",this))}),e(o,Wn),e(l,Wn),e(S,Wn),e(Se,Wn),e(C,function(){return this.value}),e(f,function(e,i,r,o){var a=this.left;if(!i){if(!(a instanceof nn))return this;if(!Pn(a,"_eval")){if(!a.fixed)return this;var s=a.definition();if(!s.fixed)return this;if(s.undeclared)return this;if(s.last_ref!==a)return this;if("m"==s.single_use)return this;if(this.right.has_side_effects(e))return this}}var f,c=this.operator;f=!Pn(a,"_eval")&&a instanceof nn&&a.fixed&&a.definition().fixed?a:"="==c?this.right:Yn(p,this,{operator:c.slice(0,-1),left:a,right:this.right}),a.walk(n);var u=f._eval(e,i,r,o);return"object"==typeof u?this:(t(a),u)}),e(je,function(e,t,i,r){if(!t)return this;for(var o=this.expressions,a=0,s=o.length-1;a<s;a++)o[a].walk(n);var f=o[s],c=f._eval(e,t,i,r);return c===f?this:c}),e(_e,function(e){if(e.option("unsafe")){var n=function(){};return n.node=this,n.toString=function(){return"function(){}"},n}return this}),e(a,function(e,n,t,i){if(e.option("unsafe")){for(var r=[],o=0;o<this.elements.length;o++){var a=this.elements[o];if(a instanceof fe)return this;var s=a._eval(e,n,t,i);if(a===s)return this;r.push(s)}return r}return this}),e(ke,function(e,n,t,i){if(e.option("unsafe")){for(var r={},o=0;o<this.properties.length;o++){var a=this.properties[o];if(!(a instanceof Ae))return this;var s=a.key;if(s instanceof Se&&(s=s._eval(e,n,t,i))===a.key)return this;switch(s){case"__proto__":case"toString":case"valueOf":return this}if(r[s]=a.value._eval(e,n,t,i),r[s]===a.value)return this}return r}return this});var i=Mn("! typeof void");e(pn,function(e,r,o,a){var s=this.expression,f=this.operator;if(e.option("typeofs")&&"typeof"==f&&(s instanceof _e||s instanceof nn&&s.fixed_value()instanceof _e))return"function";var c=s instanceof nn&&s.definition();i[f]||c&&c.fixed||a++,s.walk(n);var u=s._eval(e,r,o,a);if(u===s){if(r&&"void"==f)return;return this}switch(f){case"!":return!u;case"typeof":return u instanceof RegExp?this:typeof u;case"void":return;case"~":return~u;case"-":return-u;case"+":return+u;case"++":case"--":if(!c)return this;if(!r){if(c.undeclared)return this;if(c.last_ref!==s)return this}return Pn(s,"_eval")&&(u=+(f[0]+1)+ +u),t(s),u}return this}),e(ln,function(e,i,r,o){var a=this.expression;if(a instanceof nn){if(!Pn(a,"_eval")){if(!a.fixed)return this;if(!i){var s=a.definition();if(!s.fixed)return this;if(s.undeclared)return this;if(s.last_ref!==a)return this}}}else if(!i)return this;a instanceof nn&&a.definition().fixed||o++,a.walk(n);var f=a._eval(e,i,r,o);return f===a?this:(t(a),+f)});var r=Mn("&& || === !==");e(p,function(e,n,t,i){r[this.operator]||i++;var o=this.left._eval(e,n,t,i);if(o===this.left)return this;if(this.operator==(o?"||":"&&"))return o;var a,s=n&&!(o&&"object"==typeof o),f=this.right._eval(e,s,t,i);if(f===this.right)return this;switch(this.operator){case"&&":a=o&&f;break;case"||":a=o||f;break;case"??":a=null==o?f:o;break;case"|":a=o|f;break;case"&":a=o&f;break;case"^":a=o^f;break;case"+":a=o+f;break;case"-":a=o-f;break;case"*":a=o*f;break;case"/":a=o/f;break;case"%":a=o%f;break;case"<<":a=o<<f;break;case">>":a=o>>f;break;case">>>":a=o>>>f;break;case"==":a=o==f;break;case"===":a=o===f;break;case"!=":a=o!=f;break;case"!==":a=o!==f;break;case"<":a=o<f;break;case"<=":a=o<=f;break;case">":a=o>f;break;case">=":a=o>=f;break;case"**":a=Math.pow(o,f);break;case"in":if(f&&"object"==typeof f&&Pn(f,o)){a=!0;break}default:return this}if(isNaN(a))return e.find_parent(mn)?this:a;if(e.option("unsafe_math")&&!n&&a&&"number"==typeof a&&("+"==this.operator||"-"==this.operator)){var c=Math.max(0,u(o),u(f));if(c<16)return+a.toFixed(c)}return a;function u(e){var n=/(\.[0-9]*)?(e[^e]+)?$/.exec(+e);return(n[1]||".").length-1-(n[2]||"").slice(1)}}),e(O,function(e,n,t,i){var r=this.condition._eval(e,n,t,i);if(r===this.condition)return this;var o=r?this.consequent:this.alternative,a=o._eval(e,n,t,i);return a===o?this:a}),e(nn,function(e,n,t,i){var r,o=this.fixed_value();if(!o)return this;if(Pn(o,"_eval"))r=o._eval();else{if(this._eval=Wn,r=o._eval(e,n,t,i),delete this._eval,r===o)return this;o._eval=function(){return r},t.push(o)}return r&&"object"==typeof r&&!function(e,n){var t=e.definition().escaped;switch(t.length){case 0:return!0;case 1:var i=!1;return t[0].walk(new yn(function(n){return!!i||(n===e?i=!0:n instanceof Pe||void 0)})),i;default:return n<=t.depth}}(this,i)?this:r});var c={Array:Array,Math:Math,Number:Number,Object:Object,String:String},u=Ft({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),h=Mn("global ignoreCase multiline source");function d(e,n,t,i,r){for(var o=[],a=0;a<e.length;a++){var s=e[a],f=s._eval(n,t,i,r);if(s===f)return;o.push(f)}return o}e(Ce,function(e,n,t,i){if(e.option("unsafe")){var r,o=this.expression;if(!mt(o)&&(null==(r=o._eval(e,n,t,i+1))||r===o))return this;var a=this.property;if(a instanceof Se&&(a=a._eval(e,n,t,i))===this.property)return this;if(void 0===r){var s=u[o.name];if(!s||!s[a])return this;r=c[o.name]}else if(r instanceof RegExp){if(!h[a])return this}else if("object"==typeof r){if(!Pn(r,a))return this}else if("function"==typeof r)switch(a){case"name":return r.node.name?r.node.name.name:"";case"length":return r.node.length();default:return this}return r[a]}return this}),e(g,function(e,t,i,r){var o=this.expression,a=o instanceof nn?o.fixed_value():o;if(a instanceof s||a instanceof I||a instanceof se){if(a.evaluating)return this;if(a.name&&a.name.definition().recursive_refs>0)return this;if(this.is_expr_pure(e))return this;var f=d(this.args,e,t,i,r);if(!qn(a.argnames,function(n,o){if(n instanceof z){if(!f)return!1;if(void 0===f[o]){var a=n.value._eval(e,t,i,r);if(a===n.value)return!1;f[o]=a}n=n.name}return!(n instanceof B)}))return this;if(a.rest instanceof B)return this;if(!f&&!t)return this;var u=a.first_statement();if(!(u instanceof $e)){if(t){a.walk(n);var l=!1;if(a.evaluating=!0,Dn(a,new yn(function(n){return!!l||(n instanceof $e?(n.value&&void 0!==n.value._eval(e,!0,i,r)&&(l=!0),!0):n instanceof Pe&&n!==a||void 0)})),a.evaluating=!1,!l)return}return this}var p=u.value;if(!p)return;var h=[];return(!f||qn(a.argnames,function(e,n){return b(e,f[n])})&&(!a.rest||b(a.rest,f.slice(a.argnames.length)))||t)&&(t&&a.argnames.forEach(function(e){e instanceof z&&e.value.walk(n)}),a.evaluating=!0,p=p._eval(e,t,i,r),a.evaluating=!1),h.forEach(function(e){delete e._eval}),p===u.value?this:p}if(e.option("unsafe")&&o instanceof Ce){var _=o.property;if(_ instanceof Se&&(_=_._eval(e,t,i,r))===o.property)return this;var v=o.expression;if(mt(v)){var m=Nt[v.name];if(!m||!m[_])return this;p=c[v.name]}else{if(null==(p=v._eval(e,t,i,r+1))||p===v)return this;var g=Mt[p.constructor.name];if(!g||!g[_])return this;if(p instanceof RegExp&&p.global&&!(v instanceof Fe))return this}var f=d(this.args,e,t,i,r);if(!f)return this;if("replace"==_&&"function"==typeof f[1])return this;try{return p[_].apply(p,f)}catch(e){Se.warn("Error evaluating {this} [{start}]",this)}finally{p instanceof RegExp&&(p.lastIndex=0)}}return this;function b(e,n){e instanceof z&&(e=e.name);var t=e.definition();if(t.orig[t.orig.length-1]!==e)return!1;var i=n;return t.references.forEach(function(e){e._eval=function(){return i},h.push(e)}),!0}}),e(we,Wn),e(rn,function(e,n,t,i){if(!e.option("templates"))return this;if(this.tag){if(!Fi(e,this.tag))return this;f=function(e){return e}}var r=d(this.expressions,e,n,t,i);if(!r)return this;for(var o=!1,a=f(this.strings[0]),s=0;s<r.length;s++)a+=r[s]+f(this.strings[s+1]);return o?(this._eval=Wn,this):a;function f(e){return"string"!=typeof(e=$i(e))&&(o=!0),e}})}(function(e,n){e.DEFMETHOD("_eval",n)}),function(e){function n(e){return Yn(pn,e,{operator:"!",expression:e})}function t(e,t,i){var r=n(e);return i?Ot(r,Yn(ze,t,{body:t}))===r?r:t:Ot(r,t)}e(Se,function(){return n(this)}),e(Ne,function(){throw new Error("Cannot negate a statement")}),e(p,function(e,i){var r=this.clone(),o=this.operator;if(e.option("unsafe_comps"))switch(o){case"<=":return r.operator=">",r;case"<":return r.operator=">=",r;case">=":return r.operator="<",r;case">":return r.operator="<=",r}switch(o){case"==":return r.operator="!=",r;case"!=":return r.operator="==",r;case"===":return r.operator="!==",r;case"!==":return r.operator="===",r;case"&&":return r.operator="||",r.left=r.left.negate(e,i),r.right=r.right.negate(e),t(this,r,i);case"||":return r.operator="&&",r.left=r.left.negate(e,i),r.right=r.right.negate(e),t(this,r,i)}return n(this)}),e(x,function(){return n(this)}),e(O,function(e,n){var i=this.clone();return i.consequent=i.consequent.negate(e),i.alternative=i.alternative.negate(e),t(this,i,n)}),e(me,function(){return n(this)}),e(je,function(e){var n=this.expressions.slice();return n.push(n.pop().negate(e)),Kn(this,n)}),e(pn,function(){return"!"==this.operator?this.expression:n(this)})}(function(e,n){e.DEFMETHOD("negate",function(e,t){return n.call(this,e,t)})});var Rt=Mn("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),Bt=Mn("Map Set WeakMap WeakSet");function Ht(e){return e&&e.aborts()}g.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var n=this.expression;if(mt(n)){if(Rt[n.name])return!0;if(this instanceof we&&Bt[n.name])return!0}if(It(n))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),rn.DEFMETHOD("is_expr_pure",function(e){var n=this.tag;if(!n)return!0;if(e.option("unsafe")){if(mt(n)&&Rt[n.name])return!0;if(n instanceof V&&mt(n.expression)){var t=Nt[n.expression.name];return t&&(t[n.property]||"Math"==n.expression.name&&"random"==n.property)}}return!e.pure_funcs(this)}),Se.DEFMETHOD("is_call_pure",Un),g.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var n=this.expression;if(!(n instanceof V))return!1;var t,i=n.expression,r=n.property;if(i instanceof a)t=Mt.Array;else if(i.is_boolean(e))t=Mt.Boolean;else if(i.is_number(e))t=Mt.Number;else if(i instanceof Fe)t=Mt.RegExp;else if(i.is_string(e)){if(t=Mt.String,"replace"==r){var o=this.args[1];if(o&&!o.is_string(e))return!1}}else n.may_throw_on_access(e)||(t=Mt.Object);return t&&t[r]}),function(e){e(Se,Un),e(a,Vn),e(f,function(){switch(this.operator){case"=":return this.right.safe_to_spread();case"&&=":case"||=":case"??=":return this.left.safe_to_spread()&&this.right.safe_to_spread()}return!0}),e(p,function(){return!Dt[this.operator]||this.left.safe_to_spread()&&this.right.safe_to_spread()}),e(C,Vn),e(_e,Vn),e(ke,function(){return qn(this.properties,function(e){return!(e instanceof AST_ObjectGetter||e instanceof Me)})}),e(je,function(){return this.tail_node().safe_to_spread()}),e(nn,function(){var e=this.fixed_value();return e&&e.safe_to_spread()}),e(un,Vn)}(function(e,n){e.DEFMETHOD("safe_to_spread",n)}),function(e){function n(e,n,t){return!qn(e,t?function(e){return e instanceof Me?!t(e,n):!e.has_side_effects(n)}:function(e){return!e.has_side_effects(n)})}function t(e,n){var t=e.expression;return!t.is_string(n)||t.has_side_effects(n)}e(Se,Vn),e(a,function(e){return n(this.elements,e,t)}),e(f,function(e){var n=this.left;if(!(n instanceof Ce))return!0;var t=n.expression;return!(t instanceof De)||!t.scope.resolve().new||n instanceof Re&&n.property.has_side_effects(e)||this.right.has_side_effects(e)}),e(p,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||!ki(this.operator,this.right,e)}),e(h,function(e){return n(this.body,e)}),e(g,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||n(this.args,e,t)}),e(b,function(e){return this.expression.has_side_effects(e)||n(this.body,e)}),e(S,function(e){var t=this.extends;return!(!t||(t instanceof nn&&(t=t.fixed_value()),r(t)))||n(this.properties,e)}),e(A,function(e){return this.key instanceof Se&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),e(O,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(C,Un),e(N,function(e){return n(this.definitions,e)}),e(H,function(e){return n(this.elements,e)}),e(Y,function(e){return this.key instanceof Se&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(L,function(e){return n(this.properties,e)}),e(V,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),e(K,Un),e(ce,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),e(de,function(e){return this.body.has_side_effects(e)}),e(_e,Un),e(ke,function(e){return n(this.properties,e,function(e,n){var t=e.expression;return!t.safe_to_spread()||t.has_side_effects(n)})}),e(De,Un),e(Ee,function(e){return this.key instanceof Se&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(je,function(e){return n(this.expressions,e)}),e(ze,function(e){return this.body.has_side_effects(e)}),e(Re,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),e(Be,function(e){return this.expression.has_side_effects(e)||n(this.body,e)}),e(Ve,Un),e(nn,function(e){return!this.is_declared(e)||!D(this,e)}),e(rn,function(e){return!this.is_expr_pure(e)||n(this.expressions,e)}),e(cn,function(e){return n(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),e(un,function(e){return unary_side_effects[this.operator]||this.expression.has_side_effects(e)}),e(_n,function(){return this.value})}(function(e,n){e.DEFMETHOD("has_side_effects",n)}),function(e){function n(e,n){for(var t=e.length;--t>=0;)if(e[t].may_throw(n))return!0;return!1}function t(e,t){return!!e.may_throw(t)||(e instanceof nn&&(e=e.fixed_value()),!(e instanceof _e)||(!!n(e.argnames,t)||(!!n(e.body,t)||kn(e)&&e.value&&e.value.may_throw(t))))}e(Se,Vn),e(C,Un),e(K,Un),e(_e,Un),e(De,Un),e(Ve,Un),e(a,function(e){return n(this.elements,e)}),e(f,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof nn)&&this.left.may_throw(e)}),e(u,function(e){return this.expression.may_throw(e)}),e(p,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||!ki(this.operator,this.right,e)}),e(h,function(e){return n(this.body,e)}),e(g,function(e){if(n(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=Vn;var i=t(this.expression,e);return delete this.may_throw,i}),e(b,function(e){return this.expression.may_throw(e)||n(this.body,e)}),e(O,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),e(z,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),e(N,function(e){return n(this.definitions,e)}),e(V,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),e(oe,function(e){if(this.init.may_throw(e))return!0;var n=this.object;return!!n.may_throw(e)||(!((n=n.tail_node())instanceof a||n.is_string(e))||this.body.may_throw(e))}),e(ce,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),e(de,function(e){return this.body.may_throw(e)}),e(ke,function(e){return n(this.properties,e)}),e(Ee,function(e){return this.value.may_throw(e)||this.key instanceof Se&&this.key.may_throw(e)}),e($e,function(e){return this.value&&this.value.may_throw(e)}),e(je,function(e){return n(this.expressions,e)}),e(ze,function(e){return this.body.may_throw(e)}),e(Re,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),e(Be,function(e){return this.expression.may_throw(e)||n(this.body,e)}),e(nn,function(e){return!this.is_declared(e)||!D(this,e)}),e(rn,function(e){if(n(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=Vn;var i=t(this.tag,e);return delete this.may_throw,i}),e(cn,function(e){return(this.bcatch?this.bcatch.may_throw(e):n(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),e(un,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof nn)}),e(_n,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)})}(function(e,n){e.DEFMETHOD("may_throw",n)}),function(e){function n(e,n){for(var t=e.length;--t>=0;)if(!e[t].is_constant_expression(n))return!1;return!0}e(Se,Un),e(a,function(e){return n(this.elements,e)}),e(p,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&ki(this.operator,this.right)}),e(S,function(e){var t=this.extends;return!(t&&!r(t))&&n(this.properties,e)}),e(A,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),e(C,Vn),e(_e,function(e){var n=this,t=!0,i=[];return n.walk(new yn(function(r,o){if(!t)return!0;if(r instanceof d){if(r===n)return;return i.push(r),o(),i.pop(),!0}if(r instanceof nn){if(n.inlined||r.redef||r.in_arg)return t=!1,!0;if(n.variables.has(r.name))return!0;var a=r.definition();if(In(a.scope,i))return!0;if(e&&!a.redefined()){var s=e.find_variable(r.name);if(s?s===a:a.undeclared)return t="f",!0}return t=!1,!0}return r instanceof De?(kn(n)&&qn(i,function(e){return!(e instanceof Pe)||kn(e)})&&(t=!1),!0):void 0})),t}),e(ke,function(e){return n(this.properties,e)}),e(Ee,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),e(un,function(e){return this.expression.is_constant_expression(e)})}(function(e,n){e.DEFMETHOD("is_constant_expression",n)}),function(e){function n(){var e=this.body.length;return e>0&&Ht(this.body[e-1])}e(Ne,Gn),e(he,Wn),e(_,n),e(He,n),e(ce,function(){return this.alternative&&Ht(this.body)&&Ht(this.alternative)&&this})}(function(e,n){e.DEFMETHOD("aborts",n)});var Yt=Mn(["use asm","use strict"]);function Lt(e,n,t){switch(e.body.length){case 0:return t?jn.skip:Yn(K,e);case 1:var i=e.body[0];return ut(i)?n instanceof pe&&i instanceof ve?e:i:e}return e}function Ut(e,n){n.option("rests")&&(e.uses_arguments||e.rest instanceof H&&n.drop_fargs(e,n.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest))}function Gt(e,n){if(!n.option("arrows"))return e;Ut(e,n),e.value&&(e.body=[e.first_statement()]);var t=kt(e.body,n);switch(t.length){case 1:var i=t[0];if(i instanceof $e){e.body.length=0,e.value=i.value;break}default:e.body=t,e.value=null}return e}e(U,function(e,n){return!n.option("directives")||Yt[e.value]&&n.has_directive(e.value)===e?e:Yn(K,e)}),e($,function(e,n){return n.option("drop_debugger")?Yn(K,e):e}),e(de,function(e,n){if(e.body instanceof ce||e.body instanceof m){var t=kt([e.body],n);switch(t.length){case 0:e.body=Yn(K,e);break;case 1:e.body=t[0];break;default:e.body=Yn(_,e,{body:t})}}return n.option("unused")&&0==e.label.references.length?e.body:e}),e(be,function(e,n){if(!n.option("dead_code"))return e;var t=e.label;if(t){var i=n.loopcontrol_target(e);e.label=null,n.loopcontrol_target(e)===i?Ln(t.thedef.references,e):e.label=t}return e}),e(h,function(e,n){return e.body=kt(e.body,n),e}),e(_,function(e,n){return e.body=kt(e.body,n),Lt(e,n.parent())}),e(_e,function(e,n){return Ut(e,n),e.body=kt(e.body,n),e}),e(s,Gt),e(c,Gt),e(se,function(e,n){Ut(e,n),e.body=kt(e.body,n);var t=n.parent();if(n.option("inline"))for(var i=0;i<e.body.length;i++){var r=e.body[i];if(!(r instanceof U)){if(r instanceof $e){if(i!=e.body.length-1)break;var o=r.value;if(!o||"Call"!=o.TYPE)break;if(o.is_expr_pure(n))break;var a,s=o.expression;if(s instanceof nn){if(e.name&&e.name.definition()===s.definition())break;a=s.fixed_value()}else a=s;if(!(a instanceof I||a instanceof se))break;if(a.rest)break;if(a.uses_arguments)break;if(a===s){if(a.parent_scope!==e)break;if(!qn(a.enclosed,function(n){return n.scope!==e}))break}if((a!==s||a.name)&&(t instanceof AST_ClassMethod||t instanceof Oe)&&t.value===n.self())break;if(a.contains_this())break;var f=a.argnames.length;if(f>0&&n.option("inline")<2)break;if(f>e.argnames.length)break;if(!qn(e.argnames,function(e){return e instanceof Je}))break;if(!qn(o.args,function(e){return!(e instanceof Me)}))break;for(var c=0;c<f;c++){var u=o.args[c];if(!(u instanceof nn))break;if(u.definition()!==e.argnames[c].definition())break}if(c<f)break;for(;c<o.args.length&&!o.args[c].has_side_effects(n);c++);if(c<o.args.length)break;if(f<e.argnames.length&&!n.drop_fargs(e,t)){if(!n.drop_fargs(a,o))break;do{a.argnames.push(a.make_var(Je,a,"argument_"+f))}while(++f<e.argnames.length)}return s}break}}return e});var Vt=Mn("arguments await yield");function Wt(e,n){for(var t=n.length;--t>=0;)n[t]||(n[t]=Yn(fe,e))}function Kt(e,n){var t=Yn(x,e);return t.name&&(t.name=n?null:Yn(AST_SymbolClass,t.name)),t}function Jt(e,n){var t;switch(e.CTOR){case AST_AsyncDefun:t=AST_AsyncFunction;break;case AST_AsyncGeneratorDefun:t=AST_AsyncGeneratorFunction;break;case I:t=se;break;case AST_GeneratorDefun:t=AST_GeneratorFunction}var i=Yn(t,e);return i.name=n?null:Yn(Qe,e.name),i}function Xt(e,n){e.walk(new yn(function(t){return t instanceof $e?(n(t),!0):t instanceof Pe&&t!==e||void 0}))}function Qt(e){var n=Object.create(null);return Xt(e,function(e){var t=e.value;if(t&&(t=t.tail_node()),t instanceof nn){var i=t.definition().id;n[i]=(n[i]||0)+1}}),n}function Zt(e,n,t){if(t.exposed(e))return!1;switch(e.references.length-e.replaced-(n[e.id]||0)){case e.drop_return:return"d";case e.bool_return:return!0}}function ei(e,n){Xt(e,function(e){e.in_bool=!0;var t=e.value;if(t){var i=oi(n,t);i?i instanceof Se||(t=t.drop_side_effect_free(n),e.value=t?Kn(e.value,[t,Yn(Te,e.value,{value:1})]):Yn(Te,e.value,{value:1})):(t=t.drop_side_effect_free(n),e.value=t?Kn(e.value,[t,Yn(Te,e.value,{value:0})]):null)}})}function ni(e,n){if(!e.name||!n.option("ie"))return!0;var t=e.name.definition();return!n.exposed(t)&&qn(t.references,function(e){return!(e instanceof nn)})}function ti(e,n,t){if(n instanceof _e){var i=kn(n),r=is_async(n),o=!1,a=!1;if(i&&e.option("arrows"))if(n.value){if(!r||Ai(e,n.value)){var f=n.value.drop_side_effect_free(e);f!==n.value&&(o=!0,n.value=f)}}else a=!0;else if(!An(n))if(!t&&n.name){var l=n.name.definition();a=l.references.length==l.replaced}else a=!0;if(a&&(n.process_expression(!1,function(n){var t=n.value;if(t){if(r&&!Ai(e,t))return n;t=t.drop_side_effect_free(e,!0)}return o=!0,t?Yn(ze,n,{body:t}):Yn(K,n)}),Xt(n,function(n){var t=n.value;if(t){if(r&&!Ai(e,t))return;var i=t.drop_side_effect_free(e);i!==t&&(o=!0,i&&r&&!Ai(e,i)&&(i=i.negate(e)),n.value=i)}})),r&&e.option("awaits")){a&&n.process_expression("awaits",function(n){var t=n.body;if(t instanceof u){if(Ai(e,t.expression)){if(o=!0,!(t=t.expression.drop_side_effect_free(e,!0)))return Yn(K,n);n.body=t}}else if(t instanceof je){for(var i=t.expressions,r=i.length;--r>=0;){var a=i[r];if(!(a instanceof u))break;var s=a.expression;if(!Ai(e,s))break;if(o=!0,i[r]=s.drop_side_effect_free(e))break}switch(r){case-1:return Yn(K,n);case 0:n.body=i[0];break;default:i.length=r+1}}return n});var p=!a&&n.name||i&&n.value&&!Ai(e,n.value),h=new yn(function(t){return!!p||(h.parent()===n&&t.may_throw(e)?p=!0:t instanceof u?p=!0:t instanceof AST_ForAwaitOf?p=!0:t instanceof $e?t.value&&!Ai(e,t.value)?p=!0:void 0:t instanceof Pe&&t!==n||void 0)});if(n.walk(h),!p){var d;switch(n.CTOR){case c:d=s;break;case AST_AsyncFunction:d=se;break;case AST_AsyncGeneratorFunction:d=AST_GeneratorFunction}return Yn(d,n)}}return o&&n.clone()}}function ii(e,n,t){t||(t=be);var i=!1,r=new yn(function(n){return!!(i||n instanceof Pe)||(n instanceof t&&r.loopcontrol_target(n)===e?i=!0:void 0)});return n instanceof de&&r.push(n),r.push(e),e.body.walk(r),i}function ri(e,n,t){if(e instanceof je&&(e=e.tail_node()),e instanceof p)if(e.left instanceof Ie){if(e.right instanceof pn&&"typeof"==e.right.operator){var i=e.right.expression;if(mt(i)){var r,o="undefined"==e.left.value;switch(e.operator){case"==":r=o?t:n;break;case"!=":r=o?n:t;break;default:return}if(r){var a,s=!1,c=i.definition(),u=[],l=[],h=new yn(function(e,n){if(s)return!0;if(e instanceof f){var t=e.left;if(!(t instanceof nn&&t.definition()===c))return;switch(e.right.walk(h),e.operator){case"=":case"&&=":s=!0}return!0}if(e instanceof g)return n(),(a=e.expression.tail_node())instanceof nn&&(a=a.fixed_value(),i=u.length),a instanceof _e?Bn(l,a)&&a.walk(h):s=!0,i>=0&&(u.length=i),!0;if(e instanceof W){var i=u.length;return n(),s&&(u.length=i),!0}if(e instanceof re){e.init&&e.init.walk(h);var i=u.length;return e.condition&&e.condition.walk(h),e.body.walk(h),e.step&&e.step.walk(h),s&&(u.length=i),!0}if(e instanceof oe){e.object.walk(h);var i=u.length;return e.init.walk(h),e.body.walk(h),s&&(u.length=i),!0}if(e instanceof Pe){if(e===a)return;return!0}return e instanceof nn?(e.definition()===c&&u.push(e),!0):void 0});r.walk(h),u.forEach(function(e){e.defined=!0})}}}}else switch(e.operator){case"&&":ri(e.left,n),ri(e.right,n);break;case"||":ri(d(e.left),t),ri(d(e.right),t)}function d(e){if(e instanceof p)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function oi(e,n,t){return!!n.truthy||(Et(n)?void 0:!(n.falsy&&!t)&&(!!n.is_truthy()||n.evaluate(e,!0)))}function ai(e,n){var t,i=0,r=!1,o=e.self();if(!En(o))for(;;){if(t=o,(o=e.parent(i++))instanceof p)switch(t){case o.left:if(Dt[o.operator])continue;break;case o.right:if(s(o.left))switch(o.operator){case"&&":n[r?"falsy":"truthy"]=!0;break;case"||":case"??":n[r?"truthy":"falsy"]=!0}}else if(o instanceof O){var a=o.condition;if(a===t)continue;if(s(a))switch(t){case o.consequent:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}}else{if(o instanceof J)break;if(o instanceof ce)break;if(o instanceof je){if(o.expressions[0]===t)continue}else if(o instanceof ze)break}return}for(;;){if(t=o,(o=e.parent(i++))instanceof _){if(o.body[0]===t)continue}else if(o instanceof ce&&s(o.condition))switch(t){case o.body:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}return}function s(e){return!!n.equals(e)||e instanceof pn&&("!"==e.operator&&(!!n.equals(e.expression)&&(r=!0,!0)))}}function si(e){return function(n,t){var i=!1;return this.definitions.forEach(function(r){r.value&&(i=!0),r.name.match_symbol(function(i){i instanceof Ve&&t.push(Yn(_n,i,{name:i,value:e(n,i)}))},!0)}),i}}function fi(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof Qe?3:2)}function ci(e,n){if(e.exposed(n))return!0;for(var t=n.scope.resolve(),i=n.scope;i!==t;)if((i=i.parent_scope).var_names().has(n.name))return!0}function ui(e,n){return Yn(dn,e,{definitions:e.definitions.map(function(e){return Yn(_n,e,{name:e.name.convert_symbol(tn,function(e,t){var i=e.definition();i.orig[i.orig.indexOf(t)]=e,i.scope!==n&&(i.scope=n,n.variables.set(i.name,i),n.enclosed.push(i),n.var_names().set(i.name,!0))}),value:e.value})})})}function li(e,n){var t=n.definition();return(t.fixed||0===t.fixed)&&fi(t)&&Ci(t)&&!ci(e,t)}function pi(e,n){return n.option("varify")&&qn(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof Ve)return!li(n,e)},!0)})?ui(e,n.find_parent(Pe)):e}function hi(e,n){if(n.option("optional_chains")&&e.terminal)do{var t=e.expression;if(e.optional){var i=oi(n,t,!0);if(null==i)return Yn(pn,e,{operator:"void",expression:t}).optimize(n);i instanceof Se||(e.optional=!1)}e=t}while(("Call"==e.TYPE||e instanceof Ce)&&!e.terminal)}function di(e,n){var t=e.expression;if(!(t instanceof je))return e;var i=t.expressions.slice(),r=e.clone();return r.expression=i.pop(),i.push(r),Kn(e,i)}function _i(e,n,t){var i=e.expression,r=i instanceof nn?i.fixed_value():i;if(r instanceof _e&&!r.uses_arguments&&!(r.pinned()||t&&t.indexOf(r)<0)){var o=e.args;if(qn(o,function(e){return!(e instanceof Me)})){var s=r.argnames,f=r===i&&!r.name;if(r.rest){if(!f||!n.option("rests"))return;var c=s.length;for(o=o.slice(0,c);o.length<c;)o.push(Yn(hn,e).optimize(n));o.push(Yn(a,e,{elements:e.args.slice(c)})),s=s.concat(r.rest),r.rest=null}else o=o.slice(),s=s.slice();for(var u=0,l=0,p=f&&n.option("default_values"),h=f&&n.drop_fargs(r,e)?function(e,t){return!e||(e instanceof H?0==e.elements.length&&!e.rest&&t instanceof a:e instanceof L?0==e.properties.length&&!e.rest&&t&&!t.may_throw_on_access(n):e.unused)}:Un,d=[],_=0;_<o.length;_++){var v=s[_];if(p&&v instanceof z&&o[_].is_defined(n)&&(s[_]=v=v.name),v&&void 0===v.unused){if(h(v,o[_])){var m=o[_].drop_side_effect_free(n);s.splice(_,1),o.splice(_,1),m&&d.push(m),_--;continue}d.push(o[_]),o[u++]=Kn(e,d),d=[]}else{var m=o[_].drop_side_effect_free(n);if(h(v)){v&&s.splice(_,1),o.splice(_,1),m&&d.push(m),_--;continue}if(m)d.push(m),o[u++]=Kn(e,d),d=[];else if(v){if(!d.length){o[u++]=Yn(Te,o[_],{value:0});continue}o[u++]=Kn(e,d),d=[]}}l=u}for(;_<s.length;_++)h(s[_])&&s.splice(_--,1);if(r.argnames=s,o.length=l,e.args=o,d.length){var g=Kn(e,d);o.push(o.length<s.length?Yn(pn,e,{operator:"void",expression:g}):g)}}}}function vi(e,n){n||(n=e.find_parent(Pe));var t=[];return(is_async(n)||n instanceof sn&&e.option("module"))&&t.push("await"),An(n)&&t.push("yield"),t.length&&Mn(t)}function mi(e,n){if(!n)return!0;var t=!0,i=new yn(function(r){if(!t)return!0;if(r instanceof Pe){if(r===e)return;if(kn(r))for(var o=0;t&&o<r.argnames.length;o++)r.argnames[o].walk(i);else r instanceof ve&&n[r.name.name]&&(t=!1);return!0}r instanceof Ye&&n[r.name]&&r!==e.name&&(t=!1)});return e.walk(i),t}function gi(e,n){return e.in_strict_mode(n)||!n.has_directive("use strict")}function bi(e,n,t,i){if(i instanceof p&&("&&"==i.operator||"||"==i.operator)&&i.right instanceof f&&"="==i.right.operator&&i.right.left instanceof nn&&i.right.left.definition()===n&&!t.has_side_effects(e)&&r(i.left)&&r(i.right.right))return n.replaced++,"&&"==i.operator?Yn(O,i,{condition:i.left,consequent:i.right.right,alternative:t}):Yn(O,i,{condition:i.left,consequent:t,alternative:i.right.right});function r(t){if(!t.has_side_effects(e)){var i=!1;return t.walk(new yn(function(e){return!!i||(e instanceof nn&&e.definition()===n?i=!0:void 0)})),!i}}}Pe.DEFMETHOD("merge_variables",function(e){if(e.option("merge_vars")){var n,t,i=[],r={},o=this,a=[],s=[],c=0,u=new Fn,l=Object.create(null),h=Object.create(null),d=new yn(function(a,s){if(a instanceof f){var c=a.left,h=a.right;return c instanceof B?(h.walk(d),q(nn,C,c),!0):Dt[a.operator.slice(0,-1)]?(c.walk(d),E(),h.walk(d),c instanceof nn&&C(c),D(),!0):c instanceof nn?("="!=a.operator&&C(c,!0),h.walk(d),C(c),!0):void 0}if(a instanceof p){if(!Dt[a.operator])return;return A(a),!0}if(a instanceof m){var _=d.loopcontrol_target(a);return _ instanceof pe||$(_),!0}if(a instanceof g){var v=a.expression;return v instanceof me?(a.args.forEach(function(e){e.walk(d)}),v.walk(d)):(s(),k(v)),!0}if(a instanceof S)return a.name&&a.name.walk(d),a.extends&&a.extends.walk(d),a.properties.filter(function(e){return e.key instanceof Se&&e.key.walk(d),e.value}).forEach(function(e){e.static?e.value.walk(d):(E(),r.block=a,e.value.walk(d),D())}),!0;if(a instanceof O)return A(a.condition,a.consequent,a.alternative),!0;if(a instanceof F){var _=d.loopcontrol_target(a);return _ instanceof G&&$(_),!0}if(a instanceof G){E(),r.block=a,r.loop=!0;var b=r;return a.body.walk(d),r.inserted===a&&(r=b),a.condition.walk(d),D(),!0}if(a instanceof re)return a.init&&a.init.walk(d),E(),r.block=a,r.loop=!0,a.condition&&a.condition.walk(d),a.body.walk(d),a.step&&a.step.walk(d),D(),!0;if(a instanceof oe)return a.object.walk(d),E(),r.block=a,r.loop=!0,a.init.walk(d),a.body.walk(d),D(),!0;if(a instanceof ce)return A(a.condition,a.body,a.alternative),!0;if(a instanceof de){E(),r.block=a;var b=r;return a.body.walk(d),r.inserted===a&&(r=b),D(),!0}if(a instanceof Pe){if(E(),r.block=a,a===o&&(t=r),a instanceof _e){a.name&&(l[a.name.definition().id]=!1);var y=a.uses_arguments&&!d.has_directive("use strict")?function(e){l[e.definition().id]=!1}:function(e){C(e)};i.push(a),a.argnames.forEach(function(e){q(Je,y,e)}),a.rest&&q(Je,y,a.rest),i.pop()}return On(a,d),D(),!0}if(a instanceof Re){var v=a.expression;return a.optional?(v.walk(d),E(),a.property.walk(d),D()):s(),k(v),!0}if(a instanceof Be){a.expression.walk(d);var b=r;return a.body.forEach(function(e){e instanceof P||(e.expression.walk(d),b===r&&E())}),r=b,a.body.forEach(function(e){E(),r.block=a;var n=r;Dn(e,d),r.inserted===a&&(r=n),D()}),!0}if(a instanceof Ge||a instanceof Ze)return l[a.definition().id]=!1,!0;if(a instanceof nn)return C(a,!0),!0;if(a instanceof cn){var w=n;return n=a,Dn(a,d),a.bcatch&&(a.bcatch.argname&&a.bcatch.argname.mark_symbol(function(e){if(e instanceof Le){var n=e.definition();l[n.id]=!1,(n=n.redefined())&&(l[n.id]=!1)}},d),a.bfinally||(n=w)?Dn(a.bcatch,d):(E(),Dn(a.bcatch,d),D())),n=w,a.bfinally&&a.bfinally.walk(d),!0}if(a instanceof un){if(!UNARY_POSTFIX[a.operator])return;var x=a.expression;if(!(x instanceof nn))return;return C(x,!0),!0}if(a instanceof _n){var T=a.value;return T?T.walk(d):T=r.block instanceof oe&&r.block.init===d.parent(),q(Ve,T?function(e){e instanceof tn?C(e):e.walk(d)}:function(e){if(e instanceof tn){var n=e.definition().id,t=l[n];t?t.push(e):n in l||u.add(n,e)}else e.walk(d)},a.name),!0}if(a instanceof vn)return E(),r.block=a,r.loop=!0,s(),D(),!0;function k(n){if(e.option("ie")){var t=root_expr(n);t instanceof nn&&t.walk(d)}}function A(e,n,t){var i=r,o=[i,i];if(e instanceof p)switch(e.operator){case"&&":o[0]=A(e.left,e.right)[0];break;case"||":case"??":o[1]=A(e.left,null,e.right)[1];break;default:e.walk(d)}else e instanceof O?A(e.condition,e.consequent,e.alternative):e.walk(d);return r=o[0],n&&(E(),n.walk(d)),o[0]=r,r=o[1],t&&(E(),t.walk(d)),o[1]=r,r=i,o}});d.directives=Object.create(e.directives),o.walk(d);for(var _=!1,v=Object.create(null);a.length&&s.length;){var b=s.shift();if(b){var y=b.definition,w=l[y.id];if(w){for(w={end:w.end};y.id in v;)y=v[y.id];w.start=l[y.id].start;var x=[];do{var T=a.shift();if(!(b.index>T.index)){var k=T.definition;if(k.id in h){var A=l[k.id];if(A){if(A.start.block===w.start.block&&M(A,w)&&(!A.start.loop&&Ci(y)||M(w,A))&&(!e.option("webkit")||it(y)===it(k))&&!k.const_redefs&&qn(A.scopes,function(e){return e.find_variable(y.name)===y})){A.forEach(function(e){e.thedef=y,e.name=y.name,e instanceof nn?(y.references.push(e),k.replaced++):(y.orig.push(e),k.eliminated++)}),k.fixed||(y.fixed=!1),v[k.id]=y,_=!0;break}x.push(T)}}}}while(a.length);x.length&&(a=x.concat(a))}}}return _}function E(){r=Object.create(r)}function D(){r=Object.getPrototypeOf(r)}function q(e,n,t){var i=new yn(function(t){if(!(t instanceof B))return t instanceof z?(E(),t.value.walk(d),D(),t.name.walk(i)):t instanceof Y?t.key instanceof Se?t.value instanceof Ce?(E(),r.block=t,t.key.walk(d),t.value.walk(i),D()):(t.key.walk(d),t.value.walk(i)):t.value.walk(i):t instanceof e?n(t):t.walk(d),!0});t.walk(i)}function C(f,p){var _,v=f.definition();if(p&&!qn(i,function(e){return!(_=e.variables.get(f.name))||(!it(_)||_!==v&&!v.undeclared&&e.parent_scope.find_variable(f.name)!==v)}))return l[v.id]=l[_.id]=!1;var m=r;if(n&&(E(),m=r,D()),v.id in l){var g=l[v.id];if(!g)return;if(g.start.block!==m.block)return l[v.id]=!1;if(b(f),g.end=m,v.id in h)s[h[v.id]]=null;else if(!p)return}else{if((_=o.variables.get(v.name))!==v)return _&&t===m&&(l[_.id]=!1),l[v.id]=!1;if(e.exposed(v)||Vt[f.name])return l[v.id]=!1;var g=u.get(v.id)||[];if(g.scopes=[],b(f),l[v.id]=g,!p)return g.start=m,a.push({index:c++,definition:v});if(m.block!==o)return l[v.id]=!1;g.start=t}function b(e){g.push(e),Bn(g.scopes,e.scope);var n=$n(d);n!==e.scope&&Bn(g.scopes,n)}h[v.id]=s.length,s.push({index:c++,definition:v})}function $(e){for(var n=[];;){if(Pn(r,"block")){var t=r.block;if(t instanceof de&&(t=t.body),t===e)break}n.push(r),D()}for(r.inserted=r.block,E();n.length;){var i=n.pop();E(),Pn(i,"block")&&(r.block=i.block),Pn(i,"loop")&&(r.loop=i.loop)}}function j(e,n){return e===n||e.isPrototypeOf(n)}function M(e,n){return j(e.start,e.end)||j(e.start,n.start)}}),Pe.DEFMETHOD("drop_unused",function(e){if(e.option("unused")){var n=this,t=!(n instanceof sn)||e.toplevel.funcs,i=!(n instanceof sn)||e.toplevel.vars,r=/keep_assign/.test(e.option("unused"))?Un:function(n,t){var i,r=!1;if(n instanceof f?(n.write_only||"="==n.operator)&&(i=a(n.left,t)):n instanceof un&&n.write_only&&(i=a(n.expression,t)),i instanceof nn){var o=i.definition();if(!c[o.id]&&!e.exposed(o)&&D(i,e,r))return i}function a(n,t){if(n instanceof Ce){var i=n.expression;if(!i.may_throw_on_access(e,!0))return r=!0,t&&n instanceof Re&&t.unshift(n.property),a(i,t)}else if(n instanceof f&&"="==n.operator){n.write_only="p";var o=a(n.right);return t?(t.assign=n,o instanceof nn?o:n.left):o}return n}},s=Object.create(null),c=Object.create(null),u=function(t){return(u=function n(t,i,r){var o=e.parent(i);if(!o)return r;var a=o instanceof _e&&In(t,o.argnames);return n(o,i+1,a?function(e){var n=r(e);if(n)return n;if(n=o.variables.get(e)){var t=n.orig[0];if(t instanceof Je||t instanceof Qe)return n}}:o.variables?function(e){return r(e)||o.variables.get(e)}:r)}(n,0,Rn))(t)},l=Object.create(null),d=[],v=Object.create(null),m=Object.create(null),b=Object.create(null),S=Object.create(null),T=Object.create(null);n instanceof sn&&e.top_retain&&n.variables.each(function(n){!e.top_retain(n)||n.id in v||(Se.info("Retaining variable {name}",n),v[n.id]=!0,d.push(n))});var k=new Fn,A=new Fn,C=this,F=new yn(function(r,o){if(r instanceof _e&&r.uses_arguments&&!F.has_directive("use strict")&&r.each_argname(function(e){var n=e.definition();n.id in v||(v[n.id]=!0,d.push(n))}),r!==n){if(C===n){if(r instanceof M){var a=r.name.definition(),s=t&&!a.exported;s||a.id in v||(v[a.id]=!0,d.push(a));var f=F.parent()instanceof ee;f?c[a.id]=!0:!s||a.id in m||(m[a.id]=1),r.extends&&r.extends.walk(F);var u=[];return r.properties.forEach(function(e){e.key instanceof Se&&e.key.walk(F);var n=e.value;n&&(yt(e)?(!f&&n.contains_this()&&(f=!0),l(n)):u.push(n))}),u.forEach(s&&f?l:function(e){A.add(a.id,e)}),!0}if(r instanceof ve){var a=r.name.definition(),s=t&&!a.exported;return s||a.id in v||(v[a.id]=!0,d.push(a)),A.add(a.id,r),F.parent()instanceof ee?(c[a.id]=!0,we(r,o,!0)):(!s||a.id in m||(m[a.id]=1),!0)}if(r instanceof N)return r.definitions.forEach(function(n){var t=n.value,o=t&&(n.name instanceof B||t.has_side_effects(e)),a=o&&"="==t.tail_node().operator;n.name.mark_symbol(function(e){if(e instanceof Ve){var s=e.definition();if(T[s.id]=(T[s.id]||0)+1,r instanceof dn&&s.orig[0]instanceof Le){var f=s.redefined();f&&(T[f.id]=(T[f.id]||0)+1)}return s.id in v||i&&!s.exported&&(r instanceof q?!s.redefined():!s.const_redefs)&&(r instanceof dn||fi(s))||(v[s.id]=!0,d.push(s)),t&&(o?a&&he(s,e,S[s.id]):A.add(s.id,t),k.add(s.id,n)),pe(s),!0}},F),o&&t.walk(F)}),!0;if(r instanceof Je){var a=r.definition();return T[a.id]=(T[a.id]||0)+1,k.add(a.id,r),!0}if(r instanceof Xe){var a=r.definition();return a.id in v||i&&fi(a)||(v[a.id]=!0,d.push(a)),!0}}return we(r,o,!0)}function l(e){var n=C;C=r,e.walk(F),C=n}});F.directives=Object.create(e.directives),n.walk(F);var $=e.option("keep_fnames")?Un:e.option("ie")?function(n){return!e.exposed(n)&&n.references.length==n.replaced}:function(e){return!(e.id in v)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof Je||qn(e.references,function(e){return!e.in_arg}))};e.option("ie")&&A.each(function(e,n){n in v||e.forEach(function(e){e.walk(new yn(function(e){return e instanceof se&&e.name&&!$(e.name.definition())?(e.walk(F),!0):e instanceof Pe||void 0}))})}),F=new yn(we);for(var P=0;P<d.length;P++){var j=A.get(d[P].id);j&&j.forEach(function(e){e.walk(F)})}Object.keys(s).forEach(function(e){var n=s[e];if(n){n=n.reduce(function(e,n){return n.forEach(function(n){Bn(e,n)}),e},[]);var t=(k.get(e)||[]).filter(function(e){return find_if(e instanceof un?function(n){return n===e}:function(n){return n===e||!(n instanceof un)&&X(n)===X(e)},n)});n.length==t.length?s[e]=t:delete s[e]}else delete s[e]});var R=[],Y=[],G=new bn(function(n){if(n instanceof z)return Ee(G,n);if(n instanceof B&&n.rest&&(n.rest=n.rest.transform(G)),n instanceof H){for(var t=!n.rest,i=n.elements.length;--i>=0;){var r=n.elements[i].transform(G);r?(n.elements[i]=r,t=!1):t?n.elements.pop():n.elements[i]=Yn(fe,n.elements[i])}return n}if(n instanceof L){var o=[];return n.properties.forEach(function(t){var i=!1;if(t.key instanceof Se&&(t.key=t.key.transform(V),i=t.key.has_side_effects(e)),(i||n.rest)&&function(e){return(e instanceof z?e.name:e)instanceof Ve}(t.value))t.value=t.value.transform(V),o.push(t);else{var r=t.value.transform(G);!r&&n.rest&&(r=t.value instanceof H?Yn(H,t.value,{elements:[]}):Yn(L,t.value,{properties:[]})),r&&(t.value=r,o.push(t))}}),n.properties=o,n}return n instanceof Ve?xe(n):void 0}),V=new bn(function(c,u,d){var m=V.parent();if(i){var b=[],S=r(c,b);if(S){if(function(e,n){var t=e.definition(),i=v[t.id];return!i||n[n instanceof f?"left":"expression"]===e&&(i===e&&t.references.length-t.replaced==1||le(t,n)<0)}(S,c)&&(c instanceof f&&(E=be(c),!0===c.write_only&&(E=E.drop_side_effect_free(e))),E||(E=Yn(Te,c,{value:0}))),E){if(b.assign){var k=b.assign.drop_side_effect_free(e);k&&(k.write_only=!0,b.unshift(k))}switch(m instanceof je&&m.tail_node()!==c&&!E.has_side_effects(e)||b.push(E),b.length){case 0:return jn.skip;case 1:return at(m,c,b[0].transform(V));default:return Kn(c,b.map(function(e){return e.transform(V)}))}}}else if(c instanceof ln&&c.expression instanceof nn&&le(c.expression.definition(),c)<0)return Yn(pn,c,{operator:"+",expression:c.expression})}if(c instanceof p&&"instanceof"==c.operator){var S=c.right;if(!(S instanceof nn))return;if(S.definition().id in v)return;var A=c.left.drop_side_effect_free(e),E=Yn(te,c).optimize(e);return A?Kn(c,[A,E]):E}if(c instanceof g)return R.push(c),c.args=c.args.map(function(e){return e.transform(V)}),c.expression=c.expression.transform(V),c;if(C===n){if(t&&c!==n&&c instanceof M){var O=c.name.definition();if(!(O.id in v)){W(c.name,"Dropping unused class {name}"),O.eliminated++,u(c,V);var F=Kt(c,!0);return m instanceof ee?F:(F=F.drop_side_effect_free(e,!0))?Yn(ze,c,{body:F}):d?jn.skip:Yn(K,c)}}if(c instanceof x&&c.name&&$(c.name.definition())&&(c.name=null),c instanceof _e){if(t&&c!==n&&c instanceof ve){var O=c.name.definition();if(!(O.id in v))return W(c.name,"Dropping unused function {name}"),O.eliminated++,m instanceof ee?(Ce(),Jt(c,!0)):d?jn.skip:Yn(K,c)}if(Ce(),c instanceof me&&c.name&&$(c.name.definition())&&(c.name=null),!(c instanceof o)){var P,j,z=e.drop_fargs(c,m);if(z&&m instanceof g&&m.expression===c)for(P=m.args,j=0;j<P.length&&!(P[j]instanceof Me);j++);var L=c.argnames,U=c.rest,X=!1,ne=!1;if(U){if(ne=!0,!P||j<L.length||U instanceof Je)U=U.transform(G);else{var F=De(U,Yn(a,m,{elements:P.slice(L.length)}),xe,!c.uses_arguments,U);U=F.name,P.length=L.length,F.value.elements.length&&[].push.apply(P,F.value.elements)}U instanceof B&&!U.rest&&(U instanceof H?0==U.elements.length&&(U=null):0==U.properties.length&&(U=null)),c.rest=U,U&&(z=!1,X=!0)}for(var ie=z?-1:c.length(),ae=P&&!c.uses_arguments&&m!==e.parent(),fe=L.length;--fe>=0;){var S=L[fe];if(S instanceof Je){var O=S.definition();O.id in v?(z=!1,le(O,S)<0&&(S.unused=null)):z?(W(S,"Dropping unused function argument {name}"),L.pop(),O.eliminated++,S.unused=!0):S.unused=!0}else{var ue;if(ne=!0,!P||j<fe)ue=S.transform(G);else{var F=De(S,P[fe],xe,ae,S);ue=F.name,F.value&&(P[fe]=F.value)}ue?(z=!1,L[fe]=ue,X||(X=!(ue instanceof Je))):z?(J(S,"Dropping unused default argument {name}"),L.pop()):fe>ie?(J(S,"Dropping unused default argument assignment {name}"),S.name instanceof Je?S.name.unused=!0:X=!0,L[fe]=S.name):(J(S,"Dropping unused default argument value {name}"),L[fe]=S=S.clone(),S.value=Yn(Te,S,{value:0}),X=!0)}}ne&&!X&&c.uses_arguments&&!V.has_directive("use strict")&&(c.rest=Yn(H,c,{elements:[]})),Y.push(c)}return c}if(c instanceof y&&c.argname instanceof B&&c.argname.transform(G),c instanceof N&&!(m instanceof oe&&m.init===c)){var pe=[],he=[],ye=[],we=[],ke=0,Ae=c instanceof dn;switch(c.definitions.forEach(function(n){n.value&&(n.value=n.value.transform(V));var t=n.value;if(n.name instanceof B){var r=De(n.name,t,function(e){return i?e.definition().id in v?e:b(e)?e:Ae&&!D(e)?e:null:e},!0);r.name?(n=Yn(_n,n,{name:r.name,value:t=r.value}),y()):r.value&&we.push(r.value)}else{var o,a,f,u,l=n.name.definition(),p=Ae?D(n.name):fi(l);if(!p||!i||l.id in v)if(t&&((o=le(l,n))<0||(u=t.tail_node())instanceof nn&&u.definition()===l)&&(n=n.clone(),(t=t.drop_side_effect_free(e))&&Se.warn("Side effects in definition of variable {name} [{start}]",n.name),c instanceof q?n.value=t||Yn(Te,n,{value:0}):(n.value=null,t&&we.push(t)),t=null,o>=0&&(s[l.id][o]=n)),t||c instanceof ge)if(e.option("functions")&&!e.option("ie")&&p&&t&&1==T[l.id]&&0==l.assignments&&(f=t.tail_node())instanceof me&&!w(l)&&!kn(f)&&function(e,t){return 0==t.length?e===n.name.fixed_value():qn(t,function(n){return e===n.fixed_value()})}(f,l.references)&&function(n){if(!Ae||e.has_directive("use strict")||!(n instanceof se))return m instanceof Pe;return m instanceof h||m instanceof re&&m.init===c||m instanceof ce}(f)&&!1!==(a=function(n,t){if(!n.name)return null;var i,r=n.name.definition();if(r.orig.length>1)return null;if(r.assignments>0)return!1;if(r.name==t)return r;if(e.option("keep_fnames"))return!1;switch(t){case"await":i=is_async;break;case"yield":i=An}return qn(r.references,function(e){var r=e.scope;if(r.find_variable(t)!==l)return!1;if(i)do{if(r=r.resolve(),i(r))return!1}while(r!==n&&(r=r.parent_scope));return!0})&&r}(f,n.name.name))){var d;switch(Se.warn("Declaring {name} as function [{start}]",n.name),f.CTOR){case AST_AsyncFunction:d=AST_AsyncDefun;break;case AST_AsyncGeneratorFunction:d=AST_AsyncGeneratorDefun;break;case se:d=I;break;case AST_GeneratorFunction:d=AST_GeneratorDefun}var _=Yn(d,f);_.name=Yn(We,n.name);var g=n.name.scope.resolve().def_function(_.name);a&&a.forEach(function(e){e.name=g.name,e.thedef=g,e.reference()}),pe.push(_),t!==f&&[].push.apply(we,t.expressions.slice(0,-1))}else p&&T[l.id]>1&&!(m instanceof Z)&&l.orig.indexOf(n.name)>l.eliminated&&(T[l.id]--,ke++),y();else m instanceof Z?y():p&&T[l.id]>1?(Se.info("Dropping declaration of variable {name} [{start}]",n.name),T[l.id]--,l.eliminated++):he.push(n);else b(n.name)?((t=t&&t.drop_side_effect_free(e))&&we.push(t),T[l.id]>1?(Se.warn("Dropping duplicated declaration of variable {name} [{start}]",n.name),T[l.id]--,l.eliminated++):(n.value=null,he.push(n))):((t=t&&t.drop_side_effect_free(e))?(Se.warn("Side effects in initialization of unused variable {name} [{start}]",n.name),we.push(t)):W(n.name,"Dropping unused variable {name}"),l.eliminated++)}function b(e){var n=e.definition();return n.orig[0]instanceof Le&&n.scope.resolve()===e.scope.resolve()}function y(){we.length>0&&(0==ye.length?pe.push(Yn(ze,c,{body:Kn(c,we)})):t?(we.push(t),n.value=Kn(t,we)):n.value=Yn(pn,n,{operator:"void",expression:Kn(n,we)}),we=[]),ye.push(n)}}),he.length){case 0:if(0==ye.length)break;if(ye.length==ke){[].unshift.apply(we,ye.map(function(e){Se.info("Dropping duplicated definition of variable {name} [{start}]",e.name);var n=e.name.definition(),t=Yn(nn,e.name);n.references.push(t);var i=Yn(f,e,{operator:"=",left:t,right:e.value}),r=le(n,e);return r>=0&&(s[n.id][r]=i),n.assignments++,n.eliminated++,i}));break}case 1:if(0==ye.length){var Ee=he[0].name.definition().id;if(Ee in l){c.definitions=he,l[Ee].init=c;break}}default:var Oe;ye.length>0&&(Oe=ye[0].value)instanceof je&&(ye[0].value=Oe.tail_node(),pe.push(Yn(ze,c,{body:Kn(Oe,Oe.expressions.slice(0,-1))}))),c.definitions=he.concat(ye),pe.push(c)}return we.length>0&&pe.push(Yn(ze,c,{body:Kn(c,we)})),Q(pe,c,d)}if(c instanceof f){if(u(c,V),!(c.left instanceof B))return c;var F=De(c.left,c.right,function(e){return e},!0===c.write_only);return F.name?Yn(f,c,{operator:c.operator,left:F.name,right:F.value}):F.value?F.value:m instanceof je&&m.tail_node()!==c?jn.skip:Yn(Te,c,{value:0})}if(c instanceof de&&c.body instanceof re){if(u(c,V),c.body instanceof _){var qe=c.body;return c.body=qe.body.pop(),qe.body.push(c),d?jn.splice(qe.body):qe}return c}if(c instanceof Pe)return Ce(),c;if(c instanceof Xe)return!e.option("imports")||c.definition().id in v?c:d?jn.skip:null}function Ce(){var e=C;C=c,u(c,V),C=e}},function(n,t){if(n instanceof _)return Lt(n,V.parent(),t);if(n instanceof Z){var r=n.body;if(!(r instanceof _))return;return n.body=r.body.pop(),r.body.push(n),t?jn.splice(r.body):r}if(n instanceof re)return Tt(n,t);if(n instanceof ae){if(!i||!e.option("loops"))return;if(!pt(n.body))return;var o=ye(n);if(!o)return;var a=o.definition();if(a.id in v)return;W(o,"Dropping unused loop variable {name}"),l[a.id]===n&&delete l[a.id];var s=[],f=n.object.drop_side_effect_free(e);return f&&(Se.warn("Side effects in object of for-in loop [{start}]",f),s.push(Yn(ze,n,{body:f}))),n.init instanceof N&&a.orig[0]instanceof Le&&s.push(n.init),Q(s,n,t)}if(n instanceof ue)return n.properties&&0==n.properties.length&&(n.properties=null),n;if(n instanceof je){if(n.expressions.length>1)return;return at(V.parent(),n,n.expressions[0])}});V.push(e.parent()),V.directives=Object.create(e.directives),n.transform(V),n instanceof _e&&1==n.body.length&&n.body[0]instanceof U&&"use strict"==n.body[0].value&&(n.body.length=0),R.forEach(function(n){_i(n,e,Y)})}function W(e,n){Se[e.definition().references.length>0?"info":"warn"](n+" [{start}]",e)}function J(e,n){e.name instanceof Je?W(e.name,n):Se.info(n+" [{start}]",e)}function X(e){return e[e instanceof f?"right":"value"]}function Q(e,n,t){switch(e.length){case 0:return t?jn.skip:Yn(K,n);case 1:return e[0];default:return t?jn.splice(e):Yn(_,n,{body:e})}}function ne(e,t){return e.scope.resolve()===n&&(e.fixed&&t.fixed||(s[e.id]=!1),!1!==s[e.id])}function ie(e,n){s[e.id]||(s[e.id]=[]),n.fixed.assigns&&Bn(s[e.id],n.fixed.assigns)}function le(e,n){var t=s[e.id];return t&&t.indexOf(n)}function pe(e){m[e.id]>1&&!(e.id in v)&&(v[e.id]=!0,d.push(e)),m[e.id]=0}function he(e,n,t){e.id in v||(n&&t?(v[e.id]=n,d.push(e)):(b[e.id]=n,S[e.id]=t))}function be(n){var t=n.right;if(!n.write_only)return t;if(!(t instanceof p&&Dt[t.operator]))return t;if(!(t.left instanceof nn))return t;if(!(n.left instanceof nn))return t;var i=n.left.definition();return t.left.definition()!==i?t:t.right.has_side_effects(e)?t:(ne(i,t.left)&&ie(i,t.left),t.right)}function ye(e){var n=e.init;if(n instanceof N)return(n=n.definitions[0].name)instanceof Ve&&n;for(;n instanceof Ce;)n=n.expression.tail_node();return n instanceof nn?n:void 0}function we(t,o,a){if(t instanceof f&&t.left instanceof nn){var s=t.left.definition();s.scope.resolve()===n&&k.add(s.id,t)}if(t instanceof nn&&t.in_arg&&(T[t.definition().id]=0),t instanceof un&&t.expression instanceof nn){var s=t.expression.definition();s.scope.resolve()===n&&k.add(s.id,t)}var c=[],h=r(t,c);if(h){var _=h.definition();if(_.scope.resolve()!==n&&n.variables.get(h.name)!==_)return;if(w(_)&&!qn(n.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof Je){var n=e.definition();return n.references.length>n.replaced}},!0)}))return;if("p"===t.write_only&&t.right.may_throw_on_access(e,!0))return;var g=c.assign;if(g&&(g.write_only=!0,g.walk(F)),c.forEach(function(e){e.walk(F)}),t instanceof f){var y=be(t),x=!1;if(a&&!0===t.write_only&&!y.has_side_effects(e)?A.add(_.id,y):(y.walk(F),x="="==y.tail_node().operator),t.left===h)t.write_only&&!x||he(_,h,S[_.id]);else{var D=h.fixed_value();D&&D.is_constant()||he(_,b[_.id],!0)}}return ne(_,h)&&tt(h,t)!==h&&ie(_,h),pe(_),!0}if(t instanceof p){if("instanceof"!=t.operator)return;var h=t.right;if(!(h instanceof nn))return;var O=h.definition().id;if(!m[O])return;return t.left.walk(F),m[O]++,!0}if(t instanceof ae){if(t.init instanceof nn&&C===n){var O=t.init.definition().id;O in l||(l[O]=t)}if(!i||!e.option("loops"))return;if(!pt(t.body))return;if(t.init.has_side_effects(e))return;var h=ye(t);if(!h)return;var s=h.definition();if(s.scope.resolve()!==n){var q=u(h.name);if(q===s||q&&q.redefined()===s)return}return t.object.walk(F),!0}if(t instanceof nn){var _=t.definition();if(_.id in v||(v[_.id]=!0,d.push(_)),E(_.scope,t.scope)){var $=_.redefined();!$||$.id in v||(v[$.id]=!0,d.push($))}return ne(_,t)&&ie(_,t),!0}if(t instanceof Pe){var P=C;return C=t,o(),C=P,!0}}function xe(e){return e.definition().id in v?e:(e instanceof Je&&(e.unused=!0),null)}function Ee(n,t){t.value=t.value.transform(V);var i=t.name.transform(n);if(!i){if(t.name instanceof B)return null;var r=t.value.drop_side_effect_free(e);if(!r)return null;W(t.name,"Side effects in default value of unused variable {name}"),(t=t.clone()).name.unused=null,t.value=r}return t}function De(n,t,i,r,s){var c=new bn(function(n){if(n instanceof z){if(!(e.option("default_values")&&t&&t.is_defined(e))){var f=r;r=!1;var p=Ee(c,n);return r=f,!p&&r&&t&&(t=t.drop_side_effect_free(e)),p}n===s?s=n=n.name:n=n.name}if(n instanceof H){var h,f=r,d=t;t instanceof nn&&(r=!1,t=t.fixed_value()),t instanceof a?(h=!0,S=t.elements):(h=t&&t.is_string(e),S=!1);var _=[],v=r&&[],m=0;if(n.elements.forEach(function(e,n){(t=S&&S[n])instanceof fe?t=null:t instanceof Me&&(r&&(v.length=m,Wt(d,v),[].push.apply(v,S.slice(n)),d.elements=v),t=S=!1),(e=e.transform(c))&&(_[m]=e),r&&t&&(v[m]=t),!e&&!t&&r&&S||m++}),t=S&&Yn(a,d,{elements:S.slice(n.elements.length)}),n.rest){var g=r;r=!1,n.rest=n.rest.transform(e.option("rests")?c:V),r=g,n.rest&&(_.length=m)}if(r&&(t&&!n.rest&&(t=t.drop_side_effect_free(e)),t instanceof a?t=t.elements:t instanceof je?t=t.expressions:t&&(t=[t]),t&&t.length&&(v.length=m,[].push.apply(v,t))),t=d,r=f,S&&v&&(Wt(t,v),(t=t.clone()).elements=v),h){if(!n.rest)switch(_.length){case 0:if(n===s)break;return r&&(t=t.drop_side_effect_free(e)),null;case 1:if(!r)break;if(n===s)break;var b=_[0];if(b.has_side_effects(e))break;if(t.has_side_effects(e)&&b.match_symbol(function(e){return e instanceof Ce}))break;return t=Yn(Re,n,{expression:t,property:Yn(Te,n,{value:0})}),b}}else _.length=n.elements.length;return Wt(n,_),n.elements=_,n}if(n instanceof L){var y,w,S,f=r,d=t;t instanceof nn&&(r=!1,t=t.fixed_value()),t instanceof ke&&(y=[],w=new Fn,S=t.properties.map(function(n,t){if((n=n.clone())instanceof Me)w=!1;else{var i=n.key;i instanceof Se&&(i=i.evaluate(e,!0)),i instanceof Se?w=!1:!w||n instanceof AST_ObjectSetter||w.set(i,n),y[t]=i}return n})),n.rest&&(t=!1,n.rest=n.rest.transform(e.option("rests")?c:V));var x=new Fn,T=r&&new Fn,k=[];if(n.properties.map(function(n){var t=n.key;return t instanceof Se&&(n.key=t=t.transform(V),t=t.evaluate(e,!0)),t instanceof Se?T=!1:x.set(t,!x.has(t)),t}).forEach(function(e,i){var a,s=n.properties[i];if(e instanceof Se)r=!1,t=!1,a=s.value.transform(c)||l(s.value);else{r=T&&x.get(e);var f=w&&w.get(e);f?(t=f.value)instanceof o&&(t=!1):t=!1,(a=s.value.transform(c))?T&&T.set(e,!1):((n.rest||u(s))&&(a=l(s.value)),T&&!T.has(e)&&(f?(T.set(e,f),null===t&&w.set(e,u(f)&&Yn(Ae,f,{key:f.key,value:Yn(Te,f,{value:0})}))):T.set(e,!0))),t&&(f.value=t)}a&&(s.value=a,k.push(s))}),t=d,r=f,T&&y&&((t=t.clone()).properties=jn(S,function(t,i){if(t instanceof Me)return t;var r=y[i];if(r instanceof Se)return t;if(T.has(r)){var o=T.get(r);if(!o)return t;if(o===t)return w.get(r)||jn.skip}else if(n.rest)return t;var a=t.value.drop_side_effect_free(e);return a?(t.value=a,t):u(t)?Yn(Ae,t,{key:t.key,value:Yn(Te,t,{value:0})}):jn.skip})),t&&!n.rest)switch(k.length){case 0:if(n===s)break;if(t.may_throw_on_access(e,!0))break;return r&&(t=t.drop_side_effect_free(e)),null;case 1:if(!r)break;if(n===s)break;var A=k[0];if(A.key instanceof Se)break;if(A.value.has_side_effects(e))break;if(t.has_side_effects(e)&&A.value.match_symbol(function(e){return e instanceof Ce}))break;return t=Yn(Re,n,{expression:t,property:nt(A.key,A)}),A.value}return n.properties=k,n}return!(n=n instanceof fe?null:i(n))&&r&&t&&(t=t.drop_side_effect_free(e)),n});return{name:n.transform(c),value:t};function u(n){return n.key instanceof Se&&n.key.has_side_effects(e)}function l(n){return n instanceof z?l(n.name):n instanceof B?(null===t?t=Yn(Te,n,{value:0}):t&&(t.may_throw_on_access(e,!0)?t=Yn(a,n,{elements:t instanceof je?t.expressions:[t]}):function e(n){if(n instanceof f)n.write_only=!1,e(n.right);else if(n instanceof p){if(!Dt[n.operator])return;e(n.left),e(n.right)}else n instanceof O?(e(n.consequent),e(n.alternative)):n instanceof je?e(n.tail_node()):n instanceof un&&(n.write_only=!1)}(t)),Yn(L,n,{properties:[]})):(n.unused=null,n)}}}),Pe.DEFMETHOD("hoist_declarations",function(e){if(!e.has_directive("use asm")){var n=e.option("hoist_funs"),t=e.option("hoist_vars"),i=this;if(t){var r=0;i.walk(new yn(function(e){return r>1||(e instanceof Z||(e instanceof Pe&&e!==i||(e instanceof dn?(r++,!0):void 0)))})),r<=1&&(t=!1)}if(n||t){var o=new Fn,a=[],s=[],f=new Fn,c=new bn(function(r,u,l){if(r!==i){if(r instanceof U)return a.push(r),l?jn.skip:Yn(K,r);if(r instanceof ve){if(!n)return r;var p=c.parent();return p instanceof Z?r:p instanceof ee?r:p!==i&&e.has_directive("use strict")?r:(s.push(r),l?jn.skip:Yn(K,r))}if(r instanceof dn){if(!t)return r;var p=c.parent();if(p instanceof Z)return r;if(!qn(r.definitions,function(e){var n=e.name;return n instanceof tn&&!o.has(n.name)&&i.find_variable(n.name)===n.definition()}))return r;r.definitions.forEach(function(e){f.set(e.name.name,e)});var h=r.to_assignments();if(p instanceof oe&&p.init===r){if(h)return h;var d=r.definitions[0].name;return Yn(nn,d)}return p instanceof re&&p.init===r?h:h?Yn(ze,r,{body:h}):l?jn.skip:Yn(K,r)}return r instanceof Pe?r:r instanceof Ge?(o.set(r.name,!0),r):void 0}});if(i.transform(c),f.size()>0){var u=[];i instanceof _e&&i.each_argname(function(e){qn(e.definition().references,function(e){return!e.in_arg})&&f.del(e.name)}),f.each(function(e,n){(e=e.clone()).name=e.name.clone(),e.value=null,u.push(e),f.set(n,e),e.name.definition().orig.unshift(e.name)}),u.length>0&&s.push(Yn(dn,i,{definitions:u}))}i.body=a.concat(s,i.body)}}}),Pe.DEFMETHOD("process_returns",Rn),I.DEFMETHOD("process_returns",function(e){if(e.option("booleans")&&!(e.parent()instanceof ee))switch(Zt(this.name.definition(),Qt(this),e)){case"d":ti(e,this,!0);break;case!0:ei(this,e)}}),se.DEFMETHOD("process_returns",function(e){if(e.option("booleans")){var n=!0,t=Qt(this);if(!this.name||l(this.name.definition())){var i=e.parent();if(i instanceof f){if("="!=i.operator)return;var r=i.left;if(!(r instanceof nn))return;if(!l(r.definition()))return}else if(i instanceof g&&i.expression!==this){var o=i.expression;if(o instanceof nn&&(o=o.fixed_value()),!(o instanceof _e))return;if(o.uses_arguments||o.pinned())return;for(var a=i.args,s=0;s<a.length;s++){var c=a[s];if(c===this){if(!(r=o.argnames[s])&&o.rest)return;break}if(c instanceof Me)return}if(r instanceof z&&(r=r.name),r instanceof Je&&!l(r.definition()))return}else{if("Call"!=i.TYPE)return;e.pop();var u=e.in_boolean_context();switch(e.push(this),u){case!0:n=!1;case"d":break;default:return}}n?ti(e,this,!0):ei(this,e)}}function l(i){switch(Zt(i,t,e)){case!0:n=!1;case"d":return!0}}}),d.DEFMETHOD("var_names",function(){var e=this._var_names;return e||(this._var_names=e=new Fn,this.enclosed.forEach(function(n){e.set(n.name,!0)}),this.variables.each(function(n,t){e.set(t,!0)})),e}),Pe.DEFMETHOD("make_var",function(e,n,t){var i=[this];n instanceof Ve&&n.definition().references.forEach(function(e){var n=e.scope;do{if(!Bn(i,n))return;n=n.parent_scope}while(n&&n!==this)});for(var r=t=t.replace(/^[^a-z_$]|[^a-z0-9_$]/gi,"_"),o=0;!qn(i,function(e){return!e.var_names().has(r)});o++)r=t+"$"+o;var a=Yn(e,n,{name:r,scope:this}),s=this.def_variable(a);return i.forEach(function(e){e.enclosed.push(s),e.var_names().set(r,!0)}),a}),Pe.DEFMETHOD("hoist_properties",function(e){if(e.option("hoist_props")&&!e.has_directive("use asm")){var n=this;if(!kn(n)||!n.value){var t=n instanceof sn&&e.top_retain||Un,i=Object.create(null),r=new bn(function(e,t){if(e instanceof f){if("="!=e.operator)return;if(!e.write_only)return;if(!o(e.left,e.right,1))return;t(e,r);var a=new Fn,s=[],c=[];return e.right.properties.forEach(function(t){var i=h(tn,e.left,t.key);c.push(Yn(_n,e,{name:i,value:null}));var r=Yn(nn,e,{name:i.name,scope:n,thedef:i.definition()});r.reference(),s.push(Yn(f,e,{operator:"=",left:r,right:t.value}))}),a.value=e.right,i[e.left.definition().id]=a,n.body.splice(n.body.indexOf(r.stack[1])+1,0,Yn(dn,e,{definitions:c})),Kn(e,s)}if(e instanceof Pe){if(e===n)return;var u=r.parent();if("Call"==u.TYPE&&u.expression===e)return;return e}if(e instanceof _n){if(!o(e.name,e.value,0))return;t(e,r);var a=new Fn,l=[],p=e.clone();return p.value=e.name instanceof Ge?Yn(Te,e,{value:0}):null,l.push(p),e.value.properties.forEach(function(n){l.push(Yn(_n,e,{name:h(e.name.CTOR,e.name,n.key),value:n.value}))}),a.value=e.value,i[e.name.definition().id]=a,jn.splice(l)}function h(e,t,i){var r=n.make_var(e,t,t.name+"_"+i);return a.set(i,r.definition()),r}});n.transform(r),n.transform(new bn(function(e,n){if(e instanceof Ce){if(!(e.expression instanceof nn))return;var t=i[e.expression.definition().id];if(!t)return;if(e.expression.fixed_value()!==t.value)return;var r=t.get(e.get_property()),o=Yn(nn,e,{name:r.name,scope:e.expression.scope,thedef:r});return o.reference(),o}if(e instanceof nn){var t=i[e.definition().id];if(!t)return;if(e.fixed_value()!==t.value)return;return Yn(ke,e,{properties:[]})}}))}}function o(i,r,o){if(i instanceof Ye){var a=i.definition();if(a.assignments==o&&a.references.length-a.replaced!=o&&!a.single_use&&n.find_variable(i.name)===a&&!t(a)&&i.fixed_value()===r){var s=i.fixed||a.fixed;if(!(s.direct_access||s.escaped&&1==s.escaped.depth))return r instanceof ke&&r.properties.length>0&&D(i,e)&&qn(r.properties,function(e){return Ii(e)&&"__proto__"!==e.key})}}}}),function(e){function n(e,n,t,i){for(var r=e.length,o=[],a=!1,s=0;s<r;s++){var f,c=e[s];(f=i&&c instanceof Me?i(c,n,t):c.drop_side_effect_free(n,t))!==c&&(a=!0),f&&(o.push(f),t=!1)}return o.length?a?o:e:null}function t(e,n,t){var i=e.expression;return i.is_string(n)?i.drop_side_effect_free(n,t):e}function i(e){return e instanceof Me?Yn(a,e,{elements:[e]}):e}e(Se,Wn),e(o,Gn),e(a,function(e,r){var o=n(this.elements,e,r,t);return o?o===this.elements&&qn(o,function(e){return e instanceof Me})?this:Kn(this,o.map(i)):null}),e(f,function(e){var n=this.left;if(n instanceof Ce){var t=n.expression;if(t.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&t.is_constant())return this}return n.has_side_effects(e)?this:Dt[this.operator.slice(0,-1)]?this:(this.write_only=!0,root_expr(n).is_constant_expression(e.find_parent(Pe))?this.right.drop_side_effect_free(e):this)}),e(u,function(e){if(!e.option("awaits"))return this;var n=this.expression;if(!Ai(e,n))return this;n instanceof pn&&"!"==n.operator&&(n=n.expression);var t=n.drop_side_effect_free(e);if(t===n)return this;t?Ai(e,t)||(t=t.negate(e)):t=Yn(Te,n,{value:0});var i=this.clone();return i.expression=t,i}),e(p,function(e,n){var t=this.left,i=this.right,r=this.operator;if(!ki(r,i,e)){var o=t.drop_side_effect_free(e,n);if(o===t)return this;var a=this.clone();return a.left=o||Yn(Te,t,{value:0}),a}var s=i.drop_side_effect_free(e,n);if(!s)return t.drop_side_effect_free(e,n);if(Dt[r]&&s.has_side_effects(e)){var a=this;if(s!==i&&((a=a.clone()).right=s.drop_side_effect_free(e)),"??"==r)return a;var f=a.clone();f.operator="&&"==r?"||":"&&",f.left=t.negate(e,n);var c=f.right.tail_node();c instanceof p&&f.operator==c.operator&&Oi(f);var u=n?qt:Ot;return"&&"==r?u(a,f):u(f,a)}var o=t.drop_side_effect_free(e,n);return o?(s=s.drop_side_effect_free(e))?Kn(this,[o,s]):o:s}),e(g,function(e,r){var o=this;if(o.is_expr_pure(e)){o.pure&&Se.warn("Dropping __PURE__ call [{start}]",o);var a=n(o.args,e,r,t);return a&&Kn(o,a.map(i))}var s=o.expression;if(o.is_call_pure(e)){var f=o.args.slice();return f.unshift(s.expression),(f=n(f,e,r,t))&&Kn(o,f.map(i))}if(e.option("yields")&&An(s)){var c=o.clone();c.expression=Yn(se,s),c.expression.body=[];var u=c.transform(e);if(u!==c)return u.drop_side_effect_free(e,r)}var l=ti(e,s);if(l&&((o=o.clone()).expression=l,s._squeezed&&(o.expression._squeezed=!0)),o instanceof we){var p=s;if(p instanceof nn&&(p=p.fixed_value()),p instanceof _e){if(function(e,n){e.new=!0;var t=qn(e.body,function(e){return!e.has_side_effects(n)})&&qn(e.argnames,function(e){return!e.match_symbol(Un)})&&!(e.rest&&e.rest.match_symbol(Un));return e.new=!1,t}(p,e)){var f=o.args.slice();return f.unshift(s),(f=n(f,e,r,t))&&Kn(o,f.map(i))}p.contains_this()||((o=Yn(g,o)).expression=o.expression.clone(),o.args=o.args.slice())}}return o.call_only=!0,o}),e(x,function(e,t){for(var i=this,o=[],a=[],f=0,c=i.properties,u=0;u<c.length;u++){var l=c[u];if(l.key instanceof Se&&o.push(l.key),yt(l)){var p=l.value;if(p.has_side_effects(e)){if(p.contains_this())return i;l instanceof AST_ClassInit?(f++,a.push(l)):a.push(p)}}}var h=i.extends;if(h&&(h instanceof nn&&(h=h.fixed_value()),(h=!r(h))||o.unshift(i.extends)),(o=n(o,e,t))&&(t=!1),a=n(a,e,t),!o){if(!h&&!a&&!i.name)return null;o=[]}if(h||i.name||!e.has_directive("use strict")){var d=Kt(i);return h||(d.extends=null),d.properties=[],a?a.length==f?(o.length&&a.unshift(Yn(T,i,{key:Kn(i,o),value:null})),d.properties=a):d.properties.push(Yn(T,i,{static:!0,key:o.length?Kn(i,o):"c",value:_()})):o.length&&d.properties.push(Yn(AST_ClassMethod,i,{key:Kn(i,o),value:Yn(se,i,{argnames:[],body:[]}).init_vars(d)})),d}return a&&o.push(Yn(g,i,{expression:Yn(s,i,{argnames:[],body:[],value:_()}).init_vars(i.parent_scope),args:[]})),Kn(i,o);function _(){return Kn(i,a.map(function(e){if(!(e instanceof AST_ClassInit))return e;var n=Yn(s,e.value);return n.argnames=[],Yn(g,e,{expression:n,args:[]})}))}}),e(O,function(e){var n,t,i=this.consequent.drop_side_effect_free(e),r=this.alternative.drop_side_effect_free(e);return i===this.consequent&&r===this.alternative?this:(e.option("ie")&&(n=[],i instanceof se&&(n.push(i),i=null),r instanceof se&&(n.push(r),r=null)),i?r?((t=this.clone()).consequent=i,t.alternative=r):t=Yn(p,this,{operator:"&&",left:this.condition,right:i}):t=r?Yn(p,this,{operator:"||",left:this.condition,right:r}):this.condition.drop_side_effect_free(e),n?(t&&n.push(t),0==n.length?null:Kn(this,n)):t)}),e(C,Gn),e(V,function(e,n){var t=this.expression;return t.may_throw_on_access(e)?this:t.drop_side_effect_free(e,n)}),e(se,function(e){return ni(this,e)?null:this}),e(me,Gn),e(ke,function(e,t){var i=[];this.properties.forEach(function(e){e instanceof Me?i.push(e):(e.key instanceof Se&&i.push(e.key),i.push(e.value))});var r=n(i,e,t,function(e,n,t){var i=e.expression;return i.safe_to_spread()?i.drop_side_effect_free(n,t):e});return r?r!==i||qn(r,function(e){return!(e instanceof Me)})?Kn(this,r.map(function(e){return e instanceof Me?Yn(ke,e,{properties:[e]}):e})):this:null}),e(De,Gn),e(je,function(e,t){var i=n(this.expressions,e,t);if(!i)return null;var r,o,a,s=i.length-1,c=i[s];if(e.option("awaits")&&s>0&&c instanceof u&&c.expression.is_constant()){var l=(i=i.slice(0,-1))[--s];c.expression=Ai(e,l)?l:l.negate(e),i[s]=c}return e.option("conditionals")&&s>0&&(r=i[s-1])instanceof f&&"="==r.operator&&(a=r.left)instanceof nn&&(o=bi(e,a.definition(),r.right,c))&&((r=r.clone()).right=o,(i=i.slice(0,-2)).push(r.drop_side_effect_free(e,t))),i===this.expressions?this:Kn(this,i)}),e(Re,function(e,n){var t=this.expression;if(t.may_throw_on_access(e))return this;var i=this.property;return(t=t.drop_side_effect_free(e,n))?(i=i.drop_side_effect_free(e))?Kn(this,[t,i]):t:i.drop_side_effect_free(e,n)}),e(nn,function(e){return this.is_declared(e)&&D(this,e)?null:this}),e(rn,function(e,n){var t=this;if(t.is_expr_pure(e)){var i=t.expressions;return 0==i.length?null:Kn(t,i).drop_side_effect_free(e,n)}var r=t.tag,o=ti(e,r);return o&&((t=t.clone()).tag=o,r._squeezed&&(t.tag._squeezed=!0)),t}),e(un,function(e,n){var t=this.expression;if(unary_side_effects[this.operator])return this.write_only=!t.has_side_effects(e),this;if("typeof"==this.operator&&t instanceof nn&&D(t,e))return null;var i=t.drop_side_effect_free(e,n);return n&&i&&_t(i)?i===t&&"!"==this.operator?this:i.negate(e,n):i})}(function(e,n){e.DEFMETHOD("drop_side_effect_free",n)}),e(ze,function(e,n){if(n.option("side_effects")){var t=e.body,i=t.drop_side_effect_free(n,!0);if(!i)return Se.warn("Dropping side-effect-free statement [{start}]",e),Yn(K,e);if(i!==t)return Yn(ze,e,{body:i})}return e}),e(vn,function(e,n){return n.option("loops")?Yn(re,e).optimize(n):e}),e(G,function(e,n){if(!n.option("loops"))return e;var t=oi(n,e.condition);if(!(t instanceof Se)){if(t&&!ii(e,n.parent(),F))return Yn(re,e,{body:Yn(_,e.body,{body:[e.body,Yn(ze,e.condition,{body:e.condition})]})}).optimize(n);if(!ii(e,n.parent()))return Yn(_,e.body,{body:[e.body,Yn(ze,e.condition,{body:e.condition})]}).optimize(n)}if(e.body instanceof _&&!ii(e,n.parent(),F)){for(var i=e.body.body,r=i.length;--r>=0;){var o=i[r];if(o instanceof ce&&!o.alternative&&o.body instanceof m&&n.loopcontrol_target(o.body)===e){if(a(o.condition))break;e.condition=Yn(p,e,{operator:"&&",left:o.condition.negate(n),right:e.condition}),i.splice(r,1)}else if(o instanceof ze){if(a(o.body))break;e.condition=Kn(e,[o.body,e.condition]),i.splice(r,1)}else if(!St(o,!0))break}e.body=Lt(e.body,n.parent())}return e.body instanceof K?Yn(re,e).optimize(n):e.body instanceof ze?Yn(re,e,{condition:Kn(e.condition,[e.body.body,e.condition]),body:Yn(K,e)}).optimize(n):e;function a(n){var t=!1;return n.walk(new yn(function(n){return!!t||(n instanceof nn?(In(n.definition(),e.enclosed)||(t=!0),!0):void 0)})),t}}),e(re,function(e,n){if(!n.option("loops"))return e;if(n.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(n)),e.step&&(e.step=e.step.drop_side_effect_free(n))),e.condition){var t=oi(n,e.condition);if(t)t instanceof Se||(e.body=Yn(_,e.body,{body:[Yn(ze,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(n.option("dead_code")){var i=[];return En(e.init)?i.push(e.init):e.init&&i.push(Yn(ze,e.init,{body:e.init})),i.push(Yn(ze,e.condition,{body:e.condition})),At(n,e.body,i),Yn(_,e,{body:i}).optimize(n)}}return function e(n,t){var i=s(n.body);if(t.option("dead_code")&&(i instanceof m||i instanceof F&&f(i)||i instanceof J)){var r=[];En(n.init)?r.push(n.init):n.init&&r.push(Yn(ze,n.init,{body:n.init}));var o=f(i)||i instanceof J;return n.condition&&o?r.push(Yn(ce,n,{condition:n.condition,body:i,alternative:null})):n.condition?r.push(Yn(ze,n.condition,{body:n.condition})):o&&r.push(i),At(t,n.body,r),Yn(_,n,{body:r})}if(i instanceof ce){var a=s(i.body);if(a instanceof m&&!f(a)){n.condition?n.condition=Yn(p,n.condition,{left:n.condition,operator:"&&",right:i.condition.negate(t)}):n.condition=i.condition.negate(t);var r=lt(i.alternative);return At(t,i.body,r),c(r)}if((a=s(i.alternative))instanceof m&&!f(a)){n.condition?n.condition=Yn(p,n.condition,{left:n.condition,operator:"&&",right:i.condition}):n.condition=i.condition;var r=lt(i.body);return At(t,i.alternative,r),c(r)}}return n;function s(e){return e instanceof _?e.body[0]:e}function f(e){return t.loopcontrol_target(e)!==t.self()}function c(i){return n.body instanceof _?(n.body=n.body.clone(),n.body.body=i.concat(n.body.body.slice(1)),n.body=n.body.transform(t)):n.body=Yn(_,n.body,{body:i}).transform(t),e(n,t)}}(e,n)}),e(oe,function(e,n){if(n.option("varify")&&ct(e.init)){var t=e.init.definitions[0].name;(t instanceof B||t instanceof Ze)&&!t.match_symbol(function(e){if(e instanceof Ve){var t=e.definition();return!Ci(t)||ci(n,t)}},!0)&&(e.init=ui(e.init,e.resolve()))}return e}),e(ce,function(e,n){if(pt(e.alternative)&&(e.alternative=null),!n.option("conditionals"))return e;if(n.option("booleans")&&!e.condition.has_side_effects(n)&&ai(n,e.condition),n.option("dead_code")){var t=oi(n,e.condition);if(!t){Se.warn("Condition always false [{start}]",e.condition);var i=[Yn(ze,e.condition,{body:e.condition}).transform(n)];return At(n,e.body,i),e.alternative&&i.push(e.alternative),Yn(_,e,{body:i}).optimize(n)}if(!(t instanceof Se)){Se.warn("Condition always true [{start}]",e.condition);var i=[Yn(ze,e.condition,{body:e.condition}).transform(n),e.body];return e.alternative&&At(n,e.alternative,i),Yn(_,e,{body:i}).optimize(n)}}var r=e.condition.negate(n),o=e.condition.print_to_string().length,a=r.print_to_string().length,s=a<o;if(e.alternative&&s){s=!1,e.condition=r;var c=e.body;e.body=e.alternative,e.alternative=pt(c)?null:c}var u=[],l=[],h=[],d=I(e.body,u,l,h),v=[],m=[],g=[],b=I(e.alternative,v,m,g);if(d instanceof _||b instanceof _){var i=[],w=[];if(d&&([].push.apply(i,u),[].push.apply(w,l),d instanceof _?e.body=d:0==d.length?e.body=Yn(K,e.body):e.body=Yn(ze,e.body,{body:Kn(e.body,d)}),h.forEach(on)),b&&([].push.apply(i,v),[].push.apply(w,m),b instanceof _?e.alternative=b:0==b.length?e.alternative=null:e.alternative=Yn(ze,e.alternative,{body:Kn(e.alternative,b)}),g.forEach(on)),w.length>0&&i.push(Yn(dn,e,{definitions:w})),i.length>0)return i.push(e.transform(n)),Yn(_,e,{body:i}).optimize(n)}else if(d&&b){var i=u.concat(v);return(l.length>0||m.length>0)&&i.push(Yn(dn,e,{definitions:l.concat(m)})),0==d.length?i.push(Yn(ze,e.condition,{body:b.length>0?Yn(p,e,{operator:"||",left:e.condition,right:Kn(e.alternative,b)}).transform(n):e.condition.clone()}).optimize(n)):0==b.length?(o===a&&!s&&e.condition instanceof p&&"||"==e.condition.operator&&(s=!0),i.push(Yn(ze,e,{body:Yn(p,e,{operator:s?"||":"&&",left:s?r:e.condition,right:Kn(e.body,d)}).transform(n)}).optimize(n))):i.push(Yn(ze,e,{body:Yn(O,e,{condition:e.condition,consequent:Kn(e.body,d),alternative:Kn(e.alternative,b)})}).optimize(n)),h.forEach(on),g.forEach(on),Yn(_,e,{body:i}).optimize(n)}if(pt(e.body)&&(e=Yn(ce,e,{condition:r,body:e.alternative,alternative:null})),e.alternative instanceof J&&e.body.TYPE==e.alternative.TYPE){var S=e.body.value,x=e.alternative.value;if(!S&&!x)return Yn(_,e,{body:[Yn(ze,e,{body:e.condition}),e.body]}).optimize(n);if(S&&x||!function(){var e=!1,t=0,i=n.self();do{if(i instanceof y)n.parent(t).bfinally&&(e=!0),t++;else if(i instanceof ie)t++;else{if(i instanceof Pe)return e&&Cn(i);i instanceof cn&&i.bfinally&&(e=!0)}}while(i=n.parent(t++))}()){var T=Yn(e.body.CTOR,e,{value:Yn(O,e,{condition:e.condition,consequent:S||Yn(hn,e.body).transform(n),alternative:x||Yn(hn,e.alternative).transform(n)})});return T instanceof $e&&(T.in_bool=e.body.in_bool||e.alternative.in_bool),T}}if(e.body instanceof ce&&!e.body.alternative&&!e.alternative&&(e=Yn(ce,e,{condition:Yn(p,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null})),Ht(e.body)&&e.alternative){var k=e.alternative;return e.alternative=null,Yn(_,e,{body:[e,k]}).optimize(n)}if(Ht(e.alternative)){var i=e.body;return e.body=e.alternative,e.condition=s?r:e.condition.negate(n),e.alternative=null,Yn(_,e,{body:[e,i]}).optimize(n)}if(e.alternative){for(var A=z(e.body),E=M(A),D=z(e.alternative),q=M(D),C=[];E>=0&&q>=0;){var F=A[E],$=D[q];if(F.equals($))A.splice(E--,1),D.splice(q--,1),C.unshift(st(F,$));else{if(!(F instanceof ze))break;if(!($ instanceof ze))break;var P=F.body.tail_node(),j=$.body.tail_node();if(!P.equals(j))break;E=N(A,F.body,E),q=N(D,$.body,q),C.unshift(Yn(ze,P,{body:st(P,j)}))}}if(C.length>0)return e.body=A.length>0?Yn(_,e,{body:A}):Yn(K,e),e.alternative=D.length>0?Yn(_,e,{body:D}):null,C.unshift(e),Yn(_,e,{body:C}).optimize(n)}return n.option("typeofs")&&ri(e.condition,e.body,e.alternative),e;function z(e){return e instanceof _?e.body:[e]}function M(e){for(var n=e.length;--n>=0&&St(e[n],!0););return n}function N(e,n,t){return n instanceof je?e[t]=Yn(ze,n,{body:Kn(n,n.expressions.slice(0,-1))}):e.splice(t--,1),t}function I(e,t,i,r){if(null==e)return[];if(e instanceof _){for(var o=[],a=0;a<e.body.length;a++){var s=e.body[a];if(!(s instanceof K)){if(s instanceof J){if(0==a)return;o.length>0&&(s=s.clone(),o.push(s.value||Yn(hn,s).transform(n)),s.value=Kn(e,o));var c=e.clone();return c.body=c.body.slice(a+1),c.body.unshift(s),c}if(s instanceof ve)t.push(s);else if(s instanceof ze){if(!n.option("sequences")&&o.length>0)return;o.push(s.body)}else{if(!(s instanceof dn))return;if(!n.option("sequences")&&o.length>0)return;s.remove_initializers(n,i),s.definitions.forEach(u)}}}return o}if(e instanceof ve)return t.push(e),[];if(e instanceof K)return[];if(e instanceof ze)return[e.body];if(e instanceof dn){var o=[];return e.remove_initializers(n,i),e.definitions.forEach(u),o}function u(e){e.value&&o.push(Yn(f,e,{operator:"=",left:e.name.convert_symbol(nn,function(e){r.push(e)}),right:e.value}))}}}),e(Be,function(e,n){if(!n.option("switches"))return e;if(!n.option("dead_code"))return e;for(var t,i,r,o=[],a=[],s=[],f=0,c=e.body.length;f<c;f++){if((t=e.body[f])instanceof P){var u=o[o.length-1];if(i||k(t.body[0],n)&&(!u||Ht(u))){E(t,u);continue}i=t}else{var l=t.expression,h=Yn(p,e,{operator:"===",left:e.expression,right:l}).evaluate(n,!0);if(!h){l.has_side_effects(n)&&s.push(l),E(t,o[o.length-1]);continue}if(!(h instanceof Se)){if(i){var d=o.indexOf(i);o.splice(d,1),E(i,o[d-1]),i=null}for(l.has_side_effects(n)?r=t:i=t=Yn(P,t);++f<c;)E(e.body[f],t)}}if(f+1>=c||Ht(t)){var u=o[o.length-1],v=t.body;if(Ht(u))switch(u.body.length-v.length){case 1:var g=u.body[u.body.length-1];if(!k(g,n))break;v=v.concat(g);case 0:var y=Yn(_,u),w=Yn(_,t,{body:v});y.equals(w)&&(u.body=[])}}s.length&&(t instanceof P?o.push(Yn(b,e,{expression:Kn(e,s),body:[]})):(s.push(t.expression),t.expression=Kn(e,s)),s=[]),o.push(t)}for(s.length&&!r&&o.push(Yn(b,e,{expression:Kn(e,s),body:[]}));t=o[o.length-1];){var g=t.body[t.body.length-1];if(k(g,n)&&t.body.pop(),t===i){if(!ht(t))break}else{if(t.expression.has_side_effects(n))break;if(i){if(!ht(i))break;if(o[o.length-2]!==i)break;i.body=i.body.concat(t.body),t.body=[]}else if(!ht(t))break}E(t),o.pop()===i&&(i=null)}if(!t)return a.push(Yn(ze,e.expression,{body:e.expression})),s.length&&a.push(Yn(ze,e,{body:Kn(e,s)})),Yn(_,e,{body:a}).optimize(n);if(t===i)for(;(t=o[o.length-2])&&!(t instanceof P)&&ht(t);){var l=t.expression;if(l.has_side_effects(n)){var u=o[o.length-3];if(u&&!Ht(u))break;i.body.unshift(Yn(ze,e,{body:l}))}E(t),o.splice(-2,1)}if(o[0].body=a.concat(o[0].body),e.body=o,n.option("conditionals"))switch(o.length){case 1:if(!A(o[0]))break;var l=o[0].expression,v=o[0].body.slice();return o[0]!==i&&o[0]!==r?Yn(ce,e,{condition:Yn(p,e,{operator:"===",left:e.expression,right:l}),body:Yn(_,e,{body:v}),alternative:null}).optimize(n):(l&&v.unshift(Yn(ze,l,{body:l})),v.unshift(Yn(ze,e.expression,{body:e.expression})),Yn(_,e,{body:v}).optimize(n));case 2:if(!In(i,o)||!A(o[1]))break;var v=o[0].body.slice(),S=v.length&&k(v[v.length-1],n);if(S&&v.pop(),!qn(v,A))break;var x=o[1].body.length&&Yn(_,o[1]),T=Yn(ce,e,{condition:Yn(p,e,o[0]===i?{operator:"!==",left:e.expression,right:o[1].expression}:{operator:"===",left:e.expression,right:o[0].expression}),body:Yn(_,o[0],{body:v}),alternative:S&&x||null});return!S&&x&&(T=Yn(_,e,{body:[T,x]})),T.optimize(n)}return e;function k(n,t){return n instanceof m&&t.loopcontrol_target(n)===e}function A(n){var t=!1,i=new yn(function(e){if(t||e instanceof _e||e instanceof ze)return!0;k(e,i)&&(t=!0)});return i.push(e),n.walk(i),!t}function E(e,t){t&&!Ht(t)?t.body=t.body.concat(e.body):At(n,e,a)}}),e(cn,function(e,n){if(e.body=kt(e.body,n),n.option("dead_code")){if(ht(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof Le&&!D(e)},!0))){var t=[];return e.bcatch&&(At(n,e.bcatch,t),t.forEach(function(e){e instanceof dn&&e.definitions.forEach(function(e){var n=e.name.definition().redefined();n&&(e.name=e.name.clone(),e.name.thedef=n)})})),t.unshift(Yn(_,e).optimize(n)),e.bfinally&&t.push(Yn(_,e.bfinally).optimize(n)),Yn(_,e,{body:t}).optimize(n)}if(e.bfinally&&ht(e.bfinally)){var t=Yn(_,e.bfinally).optimize(n);if(t=e.body.concat(t),!e.bcatch)return Yn(_,e,{body:t}).optimize(n);e.body=t,e.bfinally=null}}return e}),q.DEFMETHOD("remove_initializers",si(function(e,n){return Yn(hn,n).optimize(e)})),ge.DEFMETHOD("remove_initializers",si(Gn)),dn.DEFMETHOD("remove_initializers",si(Gn)),N.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,n){var t=n.name.definition(),i=n.value;if(i){i instanceof je&&(i=i.clone());var r=Yn(nn,n.name),o=Yn(f,n,{operator:"=",left:r,right:i});e.push(o);var a=function(){return o.right};a.assigns=[o],a.direct_access=t.direct_access,a.escaped=t.escaped,r.fixed=a,t.references.forEach(function(e){if(e.fixed){var i=e.fixed.assigns;i&&i[0]===n&&(i.length>1||e.fixed.to_binary||e.fixed.to_prefix?i[0]=o:(e.fixed=a,t.fixed===e.fixed&&(t.fixed=a)))}}),t.references.push(r)}return t.assignments++,t.eliminated++,t.single_use=!1,e},[]);return 0==e.length?null:Kn(this,e)}),e(q,pi),e(ge,pi),e(g,function(e,n){var t=e.expression,i=hi(e,n);if(i)return i;if(n.option("sequences"))if(t instanceof Ce){var r=di(t,n);if(r!==t){var o=e.clone();return o.expression=r.expressions.pop(),r.expressions.push(o),r.optimize(n)}}else if(!ot(t.tail_node())){var r=di(e,n);if(r!==e)return r.optimize(n)}if(n.option("unused")&&_i(e,n),n.option("unsafe"))if(mt(t))switch(t.name){case"Array":if(1==e.args.length){var s=e.args[0];if(s instanceof Te)try{var c=s.value;if(c>6)break;for(var l=Array(c),h=0;h<c;h++)l[h]=Yn(fe,e);return Yn(a,e,{elements:l})}catch(n){Se.warn("Invalid array length: {length} [{start}]",{length:c,start:e.start});break}if(!s.is_boolean(n)&&!s.is_string(n))break}return Yn(a,e,{elements:e.args});case"Object":if(0==e.args.length)return Yn(ke,e,{properties:[]});break;case"String":if(0==e.args.length)return Yn(Ie,e,{value:""});if(1==e.args.length)return Yn(p,e,{operator:"+",left:Yn(Ie,e,{value:""}),right:e.args[0]}).optimize(n);break;case"Number":if(0==e.args.length)return Yn(Te,e,{value:0});if(1==e.args.length)return Yn(pn,e,{operator:"+",expression:Yn(p,e,{operator:"+",left:Yn(Ie,e,{value:""}),right:e.args[0]})}).optimize(n);break;case"Boolean":if(0==e.args.length)return Yn(te,e).optimize(n);if(1==e.args.length)return Yn(pn,e,{operator:"!",expression:Yn(pn,e,{operator:"!",expression:e.args[0]})}).optimize(n);break;case"RegExp":var d=[];if(qn(e.args,function(e){var t=e.evaluate(n);return d.unshift(t),e!==t}))try{return Ct(n,e,Yn(Fe,e,{value:RegExp.apply(RegExp,d)}))}catch(n){Se.warn("Error converting {this} [{start}]",e)}}else if(t instanceof V)switch(t.property){case"toString":var v=t.expression;if(0==e.args.length&&!(v.may_throw_on_access(n)||v instanceof AST_Super))return Yn(p,e,{operator:"+",left:Yn(Ie,e,{value:""}),right:v}).optimize(n);break;case"join":if(t.expression instanceof a&&e.args.length<2)e:{var m=e.args[0];if(0==t.expression.elements.length&&!(m instanceof Me))return m?Kn(e,[m,Yn(Ie,e,{value:""})]).optimize(n):Yn(Ie,e,{value:""});if(!(m&&(m=m.evaluate(n))instanceof Se)){for(var l=[],b=[],h=0;h<t.expression.elements.length;h++){var y=t.expression.elements[h],w=y.evaluate(n);if(w!==y)b.push(w);else{if(y instanceof Me)break e;b.length>0&&(l.push(Yn(Ie,e,{value:b.join(m)})),b.length=0),l.push(y)}}if(b.length>0&&l.push(Yn(Ie,e,{value:b.join(m)})),1==l.length)return l[0].is_string(n)?l[0]:Yn(p,l[0],{operator:"+",left:Yn(Ie,e,{value:""}),right:l[0]});if(""==m)return s=l[0].is_string(n)||l[1].is_string(n)?l.shift():Yn(Ie,e,{value:""}),l.reduce(function(e,n){return Yn(p,n,{operator:"+",left:e,right:n})},s).optimize(n);var S=e.clone();return S.expression=S.expression.clone(),S.expression.expression=S.expression.expression.clone(),S.expression.expression.elements=l,Ct(n,e,S)}}break;case"charAt":if(e.args.length<2){var S=Yn(p,e,{operator:"||",left:Yn(Re,e,{expression:t.expression,property:e.args.length?Yn(p,e.args[0],{operator:"|",left:Yn(Te,e,{value:0}),right:e.args[0]}):Yn(Te,e,{value:0})}).optimize(n),right:Yn(Ie,e,{value:""})});return S.is_string=Vn,S.optimize(n)}break;case"apply":if(2==e.args.length&&e.args[1]instanceof a){var x=e.args[1].elements.slice();return x.unshift(e.args[0]),Yn(g,e,{expression:Yn(V,t,{expression:t.expression,property:"call"}),args:x}).optimize(n)}break;case"call":var k=t.expression;if(k instanceof nn&&(k=k.fixed_value()),k instanceof _e&&!k.contains_this())return(e.args.length?Kn(e,[e.args[0],Yn(g,e,{expression:t.expression,args:e.args.slice(1)})]):Yn(g,e,{expression:t.expression,args:[]})).optimize(n)}else if(n.option("side_effects")&&t instanceof g&&1==t.args.length&&mt(t.expression)&&"Object"==t.expression.name){var o=e.clone();return o.expression=at(e,t,t.args[0]),o.optimize(n)}if(n.option("unsafe_Function")&&mt(t)&&"Function"==t.name){if(0==e.args.length)return Yn(se,e,{argnames:[],body:[]}).init_vars(t.scope);if(qn(e.args,function(e){return e instanceof Ie}))try{var A="n(function("+e.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+e.args[e.args.length-1].value+"})",E=Xn(A),D={ie:n.option("ie")};E.figure_out_scope(D);var q,C=new rt(n.options);(E=E.transform(C)).figure_out_scope(D),E.compute_char_frequency(D),E.mangle_names(D),E.walk(new yn(function(e){return!!q||(e instanceof _e?(q=e,!0):void 0)}));var A=et();return _.prototype._codegen.call(q,A),e.args=[Yn(Ie,e,{value:q.argnames.map(function(e){return e.print_to_string()}).join()}),Yn(Ie,e.args[e.args.length-1],{value:A.get().replace(/^\{|\}$/g,"")})],e}catch(n){if(!(n instanceof Jn))throw n;Se.warn("Error parsing code passed to new Function [{start}]",e.args[e.args.length-1]),Se.warn(n.toString())}}var F=t instanceof nn?t.fixed_value():t,$=n.parent(),P=n.self(),j=F instanceof _e&&(!is_async(F)||n.option("awaits")&&$ instanceof u)&&(!An(F)||n.option("yields")&&P instanceof gn&&P.nested),M=j&&F.first_statement(),N=0,R=!1,U=!qn(e.args,function(e){return!(e instanceof Me)}),G=j&&qn(F.argnames,function(n,t){if(1==N&&e.args[t]instanceof Me&&(N=2),n instanceof z){N||(N=1);var i=1==N&&e.args[t];if(Et(i)||(N=2),Bi(F,n.value))return!1;n=n.name}return!(n instanceof B&&(R=!0,Bi(F,n)))})&&!(F.rest instanceof B&&Bi(F,F.rest)),J=G&&n.option("inline")&&!e.is_expr_pure(n)&&(t===F||gi(F,n));if(J&&M instanceof $e){var w=M.value;if(t===F&&!F.name&&(!w||w.is_constant_expression())&&mi(F,vi(n)))return Kn(e,ge(w)).optimize(n)}if(j&&!F.contains_this()){var X,Q=!1;if(J&&!F.uses_arguments&&!F.pinned()&&!(F.name&&F instanceof me)&&(t===F||!qi(n,X=t.definition(),F)&&F.is_constant_expression($n(n)))&&(w=function(e){var t=F.body.length;if(t<2&&(e=ye(e)))return e;if(n.option("inline")<3)return!1;e=null;for(var i=0;i<t;i++){var r=F.body[i];if(r instanceof dn){if(Q){if(!e)continue;if(!(e instanceof ze))return!1;wt(r)||(e=null)}else if(!wt(r)){if(e&&!(e instanceof ze))return!1;e=null,Q=!0}}else{if(r instanceof AST_AsyncDefun||r instanceof I||r instanceof K)continue;if(e)return!1;e=r}}return ye(e)}(M))){var Z,ee,ne,ie,ae=t===F||X.single_use&&X.references.length-X.replaced==1;if(function(){if(N||R||U||Q||F.rest)return;if(n.option("inline")<2&&F.argnames.length)return;if(!F.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof Je}))return;var t,i=n.find_parent(Pe),r=!1,o=vi(n,i),a=[],s=!1,c=new yn(function(e,i){if(r)return!0;if(e instanceof p&&Dt[e.operator]||e instanceof O)a=null;else{if(e instanceof Pe)return r=!0;if(o&&e instanceof Ye&&o[e.name])return r=!0;if(e instanceof nn){var u=e.definition();if(F.variables.get(e.name)!==u)return void(a=null);if(u.init instanceof ve)return r=!0;if(tt(e,c.parent()))return r=!0;var l=we(u);if(t<l||(t=l),!a)return;s?a=null:a.push(F.argnames[l])}else if(!s)return e instanceof f&&e.left instanceof Ce?(e.left.expression.walk(c),e.left instanceof Re&&e.left.property.walk(c),e.right.walk(c),s=!0,!0):e.has_side_effects(n)?(i(),s=!0,!0):void 0}});if(w.walk(c),r)return;var u=e.args.length;if(a&&F.argnames.length>=u){for(u=F.argnames.length;u-- >t&&F.argnames[u]===a.pop(););u++}return u<=t||qn(e.args.slice(t,u),s&&!a?function(e){return e.is_constant_expression(i)}:function(e){return!e.has_side_effects(n)})}()){var x=e.args.slice(),ce=[],ue=w.clone(!0).transform(new bn(function(n){if(n instanceof nn){var t=n.definition();if(F.variables.get(n.name)!==t)return ce.push(n),n;var i=we(t),r=x[i];if(!r)return Yn(hn,e);x[i]=null;var o=this.parent();return o?at(o,n,r):r}})),le=F.inlined;t!==F&&(F.inlined=!0);var pe=[];x.forEach(function(e){e&&((e=e.clone(!0)).walk(new yn(function(e){e instanceof nn&&ce.push(e)})),pe.push(e))},[]),pe.push(ue);var S=Kn(e,pe).optimize(n);if(F.inlined=le,S=at($,P,S),ae||Ot(S,e)===S)return ce.forEach(function(e){e.scope=t===F?F.parent_scope:t.scope,e.reference();var n=e.definition();ae&&n.replaced++,n.single_use=!1}),S;S.has_side_effects(n)||(e.drop_side_effect_free=function(e,n){var t=this.args.slice();return t.unshift(this.expression),Kn(this,t).drop_side_effect_free(e,n)})}if(ae&&function(){var e,i=new Fn,r=0;ie=P;do{if(ie.variables&&ie.variables.each(function(e){i.set(e.name,!0)}),e=ie,(ie=n.parent(r++))instanceof T){if(!ie.static)return!1}else if(ie instanceof W)ne=[];else if(ie instanceof re){if(ie.init===e)continue;ne=[]}else if(ie instanceof oe){if(ie.init===e)continue;if(ie.object===e)continue;ne=[]}}while(!(ie instanceof Pe));if(!(ee=ie.body.indexOf(e)+1))return!1;if(!mi(F,vi(n,ie)))return!1;var o=(t!==F||F.parent_scope.resolve()===ie)&&!ie.pinned();ie instanceof sn&&(n.toplevel.vars?i.set("arguments",!0):o=!1);Z=new Fn;var a=n.option("inline");return!(!function(e,n){var t=!1;return F.each_argname(function(i){if(!t&&!i.unused){if(!n||xe(e,i.name))return t=!0;Z.set(i.name,!0),ne&&ne.push(i.definition())}}),!t}(i,a>=2&&o)||!function(e,n){for(var t=0;t<F.body.length;t++){var i=F.body[t];if(i instanceof ve){var r=i.name;if(!n)return!1;if(Z.has(r.name))return!1;if(xe(e,r.name))return!1;if(!qn(i.enclosed,function(n){return n.scope===ie||n.scope===i||!e.has(n.name)}))return!1;ne&&ne.push(r.definition())}else if(i instanceof dn){if(!n)return!1;for(var o=i.definitions.length;--o>=0;){var r=i.definitions[o].name;if(xe(e,r.name))return!1;ne&&ne.push(r.definition())}}}return!0}(i,a>=3&&o)||ne&&0!=ne.length&&ji(F,ne))}()){F._squeezed=!0,t!==F&&(F.parent_scope=t.scope);var S=Kn(e,function(){var t=[],i=[];N>1||R||U||F.rest?function(n,t){function i(e,i){if(i.unused)return de(i);var r=i.definition();r.assignments++,r.references.push(e);var o=Yn(tn,i);r.orig.push(o),r.eliminated++,Ae(n,t,o)}t.push(Yn(f,e,{operator:"=",left:Yn(H,e,{elements:F.argnames.map(function(e){return e.unused?Yn(fe,e):e.convert_symbol(nn,i)}),rest:F.rest&&F.rest.convert_symbol(nn,i)}),right:Yn(a,e,{elements:e.args.slice()})}))}(t,i):function(n,t){for(var i=F.argnames.length,r=e.args.length;--r>=i;)t.push(e.args[r]);var o=[];for(r=i;--r>=0;){var a,s=F.argnames[r];s instanceof z?(o.push(s),a=s.name):a=s;var c=e.args[r];if(a.unused||ie.var_names().has(a.name))c&&t.push(c);else{var u=Yn(tn,a),l=a.definition();l.orig.push(u),l.eliminated++,void 0!==a.unused?(Ae(n,t,u),c&&t.push(c)):(!c&&s===a&&(ne||"arguments"==a.name&&!kn(F)&&kn(ie))&&(c=Yn(hn,e)),Ae(n,t,u,c))}}for(n.reverse(),t.reverse(),r=o.length;--r>=0;){var p=o[r];if(void 0!==p.name.unused)t.push(p.value);else{var h=Yn(nn,p.name);p.name.definition().references.push(h),t.push(Yn(f,p,{operator:"=",left:h,right:p.value}))}}}(t,i);var r=function(e,t){var i=[ee,0],r=[],o=[],a=[],s=[],f=[];return F.body.filter(ne?function(n){if(!(n instanceof ve))return!0;var t=Yn(tn,Ri(n.name)),i=t.definition();return i.fixed=!1,i.orig.push(t),i.eliminated++,Ae(e,o,t,Jt(n,!0)),!1}:function(e){if(!(e instanceof ve))return!0;var n=e.name.definition();return ie.functions.set(n.name,n),ie.variables.set(n.name,n),ie.enclosed.push(n),ie.var_names().set(n.name,!0),i.push(e),!1}).forEach(function(e){if(e instanceof dn)for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t],o=Ri(i.name),c=i.value;c&&f.length>0&&(f.push(c),c=Kn(i,f),f=[]),Ae(r,a,o,c),ne&&(Z.has(o.name)||1==o.definition().orig.length&&F.functions.has(o.name)||s.push(Yi(n,o)))}else e instanceof ze&&f.push(e.body)}),[].push.apply(e,r),[].push.apply(t,s),[].push.apply(t,o),[].push.apply(t,a),i}(t,i);i.push(w),t.length&&r.push(Yn(dn,F,{definitions:t}));return[].splice.apply(ie.body,r),F.enclosed.forEach(function(e){ie.var_names().has(e.name)||(ie.enclosed.push(e),ie.var_names().set(e.name,!0))}),i}()).optimize(n);return at($,P,S)}}if(n.option("side_effects")&&G&&qn(F.body,pt)&&(F===t?ni(F,n):!N&&!R&&!F.rest)&&(!kn(F)||!F.value)&&mi(F,vi(n)))return Kn(e,ge()).optimize(n)}if(n.option("drop_console")&&t instanceof Ce){for(var he=t.expression;he.expression;)he=he.expression;if(mt(he)&&"console"==he.name)return Yn(hn,e).optimize(n)}return n.option("negate_iife")&&$ instanceof ze&&_t(P)?e.negate(n,!0):jt(n,e);function de(e){return Yn(Re,e,{expression:Yn(a,e,{elements:[]}),property:Yn(Te,e,{value:0})})}function ge(n){var t=e.args.slice(),i=N>1||R||F.rest;if((i||U)&&(t=[Yn(a,e,{elements:t})]),i){var r=new bn(function(e,n){if(e instanceof z)return Yn(z,e,{name:e.name.transform(r)||de(e),value:e.value});if(e instanceof H){var t=[];return e.elements.forEach(function(e,n){(e=e.transform(r))&&(t[n]=e)}),Wt(e,t),Yn(H,e,{elements:t})}if(e instanceof L){var i=[],o=[];return e.properties.forEach(function(n){var t=n.key,a=n.value.transform(r);a?(o.length&&(t instanceof Se||(t=nt(t,n)),o.push(t),t=Kn(e,o),o=[]),i.push(Yn(Y,n,{key:t,value:a}))):t instanceof Se&&o.push(t)}),o.length&&i.push(Yn(Y,e,{key:Kn(e,o),value:de(e)})),Yn(L,e,{properties:i})}return e instanceof Je?null:void 0}),o=[];F.argnames.forEach(function(e,n){(e=e.transform(r))&&(o[n]=e)});var s=F.rest&&F.rest.transform(r);s&&(o.length=F.argnames.length),Wt(F,o),t[0]=Yn(f,e,{operator:"=",left:Yn(H,F,{elements:o,rest:s}),right:t[0]})}else F.argnames.forEach(function(e){e instanceof z&&t.push(e.value)});return t.push(n||Yn(hn,e)),t}function be(){return e.call_only?Yn(Te,e,{value:0}):Yn(hn,e)}function ye(n){return n?n instanceof $e?n.value||be():n instanceof ze?e.call_only?n.body:Yn(pn,n,{operator:"void",expression:n.body}):void 0:be()}function we(e){for(var n=F.argnames.length;--n>=0;)if(F.argnames[n].definition()===e)return n}function xe(e,n){return e.has(n)||Nn[n]||ie.var_names().has(n)}function Ae(n,t,i,r){var o=i.definition();if(ie.var_names().has(i.name)||(ie.var_names().set(i.name,!0),n.push(Yn(_n,i,{name:i,value:null}))),ie.variables.set(i.name,o),ie.enclosed.push(o),r){var a=Yn(nn,i);o.assignments++,o.references.push(a),t.push(Yn(f,e,{operator:"=",left:a,right:r}))}}}),e(we,function(e,n){if(n.option("unsafe")){var t=e.expression;if(mt(t))switch(t.name){case"Array":case"Error":case"Function":case"Object":case"RegExp":return Yn(g,e).transform(n)}}if(n.option("sequences")){var i=di(e,n);if(i!==e)return i.optimize(n)}return n.option("unused")&&_i(e,n),e}),e(je,function(e,n){var t=function(){if(!n.option("side_effects"))return e.expressions;var t=[],i=Tn(n),r=e.expressions.length-1;return e.expressions.forEach(function(e,o){o<r&&(e=e.drop_side_effect_free(n,i)),e&&(ft(t,e),i=!1)}),t}(),i=t.length-1;return function(){for(var e=1;e<i;e++){var o=t[e-1],a=r(o);if(a){var s=t[e];if(n.option("conditionals")){var f=bi(n,a,o.right,s);if(f){o.right=f,t.splice(e--,1),i--;continue}}n.option("dead_code")&&r(s)===a&&s.right.is_constant_expression(a.scope.resolve())&&(t[--e]=o.right)}}}(),function(){if(!n.option("side_effects"))return;for(;i>0&&Et(t[i],n);)i--;i<t.length-1&&(t[i]=Yn(pn,e,{operator:"void",expression:t[i]}),t.length=i+1)}(),0==i?((e=at(n.parent(),n.self(),t[0]))instanceof je||(e=e.optimize(n)),e):(e.expressions=t,e);function r(e){return e instanceof f&&"="==e.operator&&e.left instanceof nn&&e.left.definition()}}),e(ln,function(e,n){if(n.option("sequences")){var t=di(e,n);if(t!==e)return t.optimize(n)}return jt(n,e)});var yi=Mn("+ -"),wi=Mn("* / %");e(pn,function(e,n){var t=e.operator,i=e.expression;if(n.option("sequences")&&function(){switch(t){case"delete":return!f(i.tail_node());case"typeof":return!mt(i.tail_node());default:return!0}}()){var r=di(e,n);if(r!==e)return r.optimize(n)}switch(t){case"+":if(!n.option("evaluate"))break;if(!i.is_number(n,!0))break;var o=n.parent();if(o instanceof pn&&"delete"==o.operator)break;return i;case"-":if(i instanceof le&&(i=i.transform(n)),i instanceof Te||i instanceof le)return e;break;case"!":if(!n.option("booleans"))break;if(i.is_truthy())return Kn(e,[i,Yn(te,e)]).optimize(n);if(n.in_boolean_context()){if(i instanceof pn&&"!"==i.operator)return i.expression;if(i instanceof p){var a=Tn(n);e=(a?qt:Ot)(e,i.negate(n,a))}}break;case"delete":if(!n.option("evaluate"))break;if(f(i))break;return Kn(e,[i,Yn(fn,e)]).optimize(n);case"typeof":if(!n.option("booleans"))break;if(!n.in_boolean_context())break;Se.warn("Boolean expression always true [{start}]",e);var s=[Yn(fn,e)];return i instanceof nn&&D(i,n)||s.unshift(i),Kn(e,s).optimize(n);case"void":if(!n.option("side_effects"))break;return(i=i.drop_side_effect_free(n))?(e.expression=i,e):Yn(hn,e).optimize(n)}return n.option("evaluate")&&i instanceof p&&yi[t]&&wi[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(n))?Yn(p,e,{operator:i.operator,left:Yn(pn,i.left,{operator:t,expression:i.left}),right:i.right}):jt(n,e);function f(e){return e instanceof le||e instanceof ye||e instanceof AST_NewTarget||e instanceof Ce||e instanceof nn||e instanceof hn}}),e(u,function(e,n){if(!n.option("awaits"))return e;if(n.option("sequences")){var t=di(e,n);if(t!==e)return t.optimize(n)}if(n.option("side_effects")){var i=e.expression;if(i instanceof u)return i.optimize(n);if(i instanceof pn&&i.expression instanceof u)return i.optimize(n);for(var r,o=0,a=e;r=n.parent(o++);a=r){if(kn(r)){if(r.value===a)return i.optimize(n)}else if(r instanceof $e){var s=!0;do{if(a=r,(r=n.parent(o++))instanceof cn&&(r.bfinally||r.bcatch)!==a){s=!1;break}}while(r&&!(r instanceof Pe));if(s)return i.optimize(n)}else if(r instanceof je&&r.tail_node()===a)continue;break}}return e}),e(gn,function(e,n){if(!n.option("yields"))return e;if(n.option("sequences")){var t=di(e,n);if(t!==e)return t.optimize(n)}var i=e.expression;if(e.nested&&"Call"==i.TYPE){var r=i.clone().optimize(n);if("Call"!=r.TYPE)return r}return e}),p.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof Ce){if(!(this.left.expression instanceof je))return this;var n=this.left.expression.expressions.slice(),t=this.clone();return t.left=t.left.clone(),t.left.expression=n.pop(),n.push(t),Kn(this,n)}if(this.left instanceof je){var n=this.left.expressions.slice(),t=this.clone();return t.left=n.pop(),n.push(t),Kn(this,n)}if(this.right instanceof je){if(this.left.has_side_effects(e))return this;for(var i="="==this.operator&&this.left instanceof nn,n=this.right.expressions,r=n.length-1,o=0;o<r&&(i||!n[o].has_side_effects(e));o++);if(o==r){n=n.slice();var t=this.clone();return t.right=n.pop(),n.push(t),Kn(this,n)}if(o>0){var t=this.clone();return t.right=Kn(this.right,n.slice(o)),(n=n.slice(0,o)).push(t),Kn(this,n)}}return this});var Si=Mn("indexOf lastIndexOf"),xi=Mn("== === != !== * & | ^");function Ti(e,n){return e instanceof f?!n&&"="==e.operator&&Ti(e.right):e instanceof we?!n:e instanceof je?Ti(e.tail_node(),n):e instanceof nn?!n&&Ti(e.fixed_value()):e instanceof a||e instanceof S||e instanceof _e||e instanceof ke}function ki(e,n,t){switch(e){case"in":return Ti(n)||t&&t.option("unsafe_comps");case"instanceof":return n instanceof nn&&(n=n.fixed_value()),i(n)||t&&t.option("unsafe_comps");default:return!0}}function Ai(e,n){if(n.is_constant())return!0;if(n instanceof f)return"="!=n.operator||Ai(e,n.right);if(n instanceof p)return!Dt[n.operator]||Ai(e,n.left)&&Ai(e,n.right);if(n instanceof g)return is_async(n.expression);if(n instanceof O)return Ai(e,n.consequent)&&Ai(e,n.alternative);if(n instanceof je)return Ai(e,n.tail_node());if(n instanceof nn){var t=n.fixed_value();return t&&Ai(e,t)}return n instanceof rn?!n.tag||Fi(e,n.tag):n instanceof un||void 0}function Ei(e,n){return e instanceof f?Hn(e.left,n)?e:e.left:e instanceof je?Ei(e.tail_node(),n):e instanceof pn&&UNARY_POSTFIX[e.operator]?Hn(e.expression,n)?e:e.expression:e}function Di(e,n){return n instanceof V?Di(e,n.expression):n instanceof Re?Di(e,n.expression)&&Di(e,n.property):n instanceof Ye||!n.has_side_effects(e)}function Oi(e,n){var t=e.right.tail_node();if(t!==e.right){var i=e.right.expressions.slice(0,-1);i.push(t.left),(t=t.clone()).left=Kn(e.right,i),e.right=t}e.left=Yn(p,e,{operator:e.operator,left:e.left,right:t.left,start:e.left.start,end:t.left.end}),e.right=t.right,n?e.left=e.left.transform(n):e.operator==t.left.operator&&Oi(e.left)}function qi(e,n,t){var r=0,o=e.self();do{if(o===t)return o;if(i(o)&&o.name&&o.name.definition()===n)return o}while(o=e.parent(r++))}function Ci(e){var n=e.scope.resolve();return qn(e.references,function(e){return n===e.scope.resolve()})}function Fi(e,n){return e.option("unsafe")&&n instanceof V&&"raw"==n.property&&mt(n.expression)&&"String"==n.expression.name}function $i(e){var n=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,t){var i=decode_escape_sequence(t);if("string"==typeof i)return i;n=!0}),!n)return e}function Pi(e,n){return e instanceof nn||e.TYPE===n.TYPE}function ji(e,n){var t=!1,i=new yn(function(e){return!!t||(e instanceof nn&&In(e.definition(),n)?t=!0:void 0)}),r=new yn(function(n){if(t)return!0;if(n instanceof _e&&n!==e){if(!(n.name||is_async(n)||An(n))){var o=r.parent();if(o instanceof g&&o.expression===n)return}return n.walk(i),!0}});return e.walk(r),t}e(p,function(e,n){if(!xi[e.operator]||!e.right.is_constant()||e.left.is_constant()||e.left instanceof p&&Qn[e.left.operator]>=Qn[e.operator]||z(),n.option("sequences")){var t=e.lift_sequences(n);if(t!==e)return t.optimize(n)}if(n.option("assignments")&&Dt[e.operator]){var r=Ei(e.left,n),o=e.right;if(r instanceof nn&&o instanceof f&&"="==o.operator&&r.equals(o.left)){r=r.clone();var a=Yn(f,e,{operator:"=",left:r,right:Yn(p,e,{operator:e.operator,left:e.left,right:o.right})});r.fixed&&(r.fixed=function(){return a.right},r.fixed.assigns=[a]);var s=r.definition();return s.references.push(r),s.replaced++,a.optimize(n)}}if(n.option("comparisons"))switch(e.operator){case"===":case"!==":if(Et(e.left,n)&&e.right.is_defined(n))return Se.warn("Expression always defined [{start}]",e),Kn(e,[e.right,Yn("==="==e.operator?te:fn,e)]).optimize(n);var c=!0;(e.left.is_string(n)&&e.right.is_string(n)||e.left.is_number(n)&&e.right.is_number(n)||e.left.is_boolean(n)&&e.right.is_boolean(n)||Di(n,e.left)&&e.left.equals(e.right))&&(e.operator=e.operator.slice(0,2));case"==":case"!=":if(!c&&Et(e.left,n))e.left=Yn(xe,e.left);else if(n.option("typeofs")&&e.left instanceof Ie&&"undefined"==e.left.value&&e.right instanceof pn&&"typeof"==e.right.operator){var u=e.right.expression;(u instanceof nn?!u.is_declared(n):u instanceof Ce&&n.option("ie"))||(e.right=u,e.left=Yn(hn,e.left).optimize(n),2==e.operator.length&&(e.operator+="="))}else if(e.left instanceof nn&&e.right instanceof nn&&e.left.definition()===e.right.definition()&&Ti(e.left))return Yn("="==e.operator[0]?fn:te,e).optimize(n);break;case"&&":case"||":var l=e.left;if(!(l instanceof p))break;if(l.operator!=("&&"==e.operator?"!==":"==="))break;if(!(e.right instanceof p))break;if(l.operator!=e.right.operator)break;if(Et(l.left,n)&&e.right.left instanceof xe||l.left instanceof xe&&Et(e.right.left,n)){var u=l.right;if(u instanceof f&&"="==u.operator&&(u=u.left),u.has_side_effects(n))break;if(!u.equals(e.right.right))break;return l.operator=l.operator.slice(0,-1),l.left=Yn(xe,e),l}}var h=!1,d=n.parent();if(n.option("booleans")){var r=Ei(e.left,n);if(Dt[e.operator]&&!r.has_side_effects(n)){if(r.equals(e.right))return at(d,n.self(),e.left).optimize(n);ai(n,r)}h=n.in_boolean_context()}if(h)switch(e.operator){case"+":var _=e.left.evaluate(n,!0);if(_&&"string"==typeof _||(_=e.right.evaluate(n,!0))&&"string"==typeof _){Se.warn("+ in boolean context always true [{start}]",e);var v=[];if(e.left.evaluate(n)instanceof Se&&v.push(e.left),e.right.evaluate(n)instanceof Se&&v.push(e.right),v.length<2)return v.push(Yn(fn,e)),Kn(e,v).optimize(n);e.truthy=!0}break;case"==":if(e.left instanceof Ie&&""==e.left.value&&e.right.is_string(n))return Yn(pn,e,{operator:"!",expression:e.right}).optimize(n);break;case"!=":if(e.left instanceof Ie&&""==e.left.value&&e.right.is_string(n))return e.right.optimize(n)}if(n.option("comparisons")&&e.is_boolean(n)){if("Binary"!=d.TYPE){var m=Yn(pn,e,{operator:"!",expression:e.negate(n)});if(Ct(n,e,m)===m)return m}switch(e.operator){case">":z("<");break;case">=":z("<=")}}if(n.option("conditionals")&&Dt[e.operator]){if(e.left instanceof p&&e.operator==e.left.operator){var g=Yn(p,e,{operator:e.operator,left:e.left.right,right:e.right}),b=g.transform(n);g!==b&&(e.left=e.left.left,e.right=b)}var y=e.right.tail_node();y instanceof p&&e.operator==y.operator&&Oi(e,n)}if(n.option("strings")&&"+"==e.operator){if(e.right instanceof Ie&&""==e.right.value&&e.left.is_string(n))return e.left.optimize(n);if(e.left instanceof Ie&&""==e.left.value&&e.right.is_string(n))return e.right.optimize(n);if(e.left instanceof p&&"+"==e.left.operator&&e.left.left instanceof Ie&&""==e.left.left.value&&e.right.is_string(n)&&(e.left.right.is_constant()||!e.right.has_side_effects(n)))return e.left=e.left.right,e.optimize(n);var y=e.right.tail_node();y instanceof p&&e.operator==y.operator&&(e.left.is_string(n)&&y.is_string(n)||y.left.is_string(n)&&(e.left.is_constant()||!y.right.has_side_effects(n)))&&Oi(e,n)}if(n.option("evaluate")){var w=!0;switch(e.operator){case"&&":var S=oi(n,e.left);if(!S)return Se.warn("Condition left of && always false [{start}]",e),at(d,n.self(),e.left).optimize(n);if(!(S instanceof Se))return Se.warn("Condition left of && always true [{start}]",e),Kn(e,[e.left,e.right]).optimize(n);if(e.right.evaluate(n,!0)){if((h||"&&"==d.operator&&d.left===n.self())&&!(e.right.evaluate(n)instanceof Se))return Se.warn("Dropping side-effect-free && [{start}]",e),e.left.optimize(n)}else{if(h&&!(e.right.evaluate(n)instanceof Se))return Se.warn("Boolean && always false [{start}]",e),Kn(e,[e.left,Yn(te,e)]).optimize(n);e.falsy=!0}if("||"==e.left.operator){var x=oi(n,e.left.right);if(!x)return Yn(O,e,{condition:e.left.left,consequent:e.right,alternative:e.left.right}).optimize(n)}break;case"??":var T=!0;case"||":var k,S=oi(n,e.left,T);if(T?null==S:!S)return Se.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:T?"nullish":"false",start:e.start}),Kn(e,[e.left,e.right]).optimize(n);if(!(S instanceof Se))return Se.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:T?"defined":"true",start:e.start}),at(d,n.self(),e.left).optimize(n);if(T||!(k=e.right.evaluate(n,!0))||k instanceof Se){if((h||"||"==d.operator&&d.left===n.self())&&!e.right.evaluate(n))return Se.warn("Dropping side-effect-free {operator} [{start}]",e),e.left.optimize(n)}else{if(h&&!(e.right.evaluate(n)instanceof Se))return Se.warn("Boolean || always true [{start}]",e),Kn(e,[e.left,Yn(fn,e)]).optimize(n);e.truthy=!0}if(!T&&"&&"==e.left.operator){var x=oi(n,e.left.right);if(x&&!(x instanceof Se))return Yn(O,e,{condition:e.left.left,consequent:e.left.right,alternative:e.right}).optimize(n)}break;case"+":if(e.left instanceof C&&e.right instanceof p&&"+"==e.right.operator&&e.right.left instanceof C&&e.right.is_string(n)&&(e=Yn(p,e,{operator:"+",left:Yn(Ie,e.left,{value:""+e.left.value+e.right.left.value,start:e.left.start,end:e.right.left.end}),right:e.right.right})),e.right instanceof C&&e.left instanceof p&&"+"==e.left.operator&&e.left.right instanceof C&&e.left.is_string(n)&&(e=Yn(p,e,{operator:"+",left:e.left.left,right:Yn(Ie,e.right,{value:""+e.left.right.value+e.right.value,start:e.left.right.start,end:e.right.end})})),e.right instanceof pn&&"-"==e.right.operator&&e.left.is_number(n)){e=Yn(p,e,{operator:"-",left:e.left,right:e.right.expression});break}if(e.left instanceof pn&&"-"==e.left.operator&&j()&&e.right.is_number(n)){e=Yn(p,e,{operator:"-",left:e.right,right:e.left.expression});break}if(n.option("unsafe_math")&&e.left instanceof p&&Qn[e.left.operator]==Qn[e.operator]&&e.right.is_constant()&&(e.right.is_boolean(n)||e.right.is_number(n))&&e.left.is_number(n)&&!e.left.right.is_constant()&&(e.left.left.is_boolean(n)||e.left.left.is_number(n))){e=Yn(p,e,{operator:e.left.operator,left:Yn(p,e,{operator:e.operator,left:e.right,right:e.left.left}),right:e.left.right});break}case"-":if(e.right instanceof pn&&"-"==e.right.operator&&e.left.is_number(n)&&e.right.expression.is_number(n)){e=Yn(p,e,{operator:"+",left:e.left,right:e.right.expression});break}case"*":case"/":w=n.option("unsafe_math"),"+"!=e.operator&&["left","right"].forEach(function(t){var i=e[t];if(i instanceof pn&&"+"==i.operator){var r=i.expression;(r.is_boolean(n)||r.is_number(n)||r.is_string(n))&&(e[t]=r)}});case"&":case"|":case"^":if("-"==e.operator||"/"==e.operator||!e.left.is_boolean(n)&&!e.left.is_number(n)||!e.right.is_boolean(n)&&!e.right.is_number(n)||!j()||e.left instanceof p&&e.left.operator!=e.operator&&Qn[e.left.operator]>=Qn[e.operator]||(e=Ct(n,e,Yn(p,e,{operator:e.operator,left:e.right,right:e.left}),e.right instanceof C&&!(e.left instanceof C))),!w||!e.is_number(n))break;if(!(e.right instanceof p&&"%"!=e.right.operator&&Qn[e.right.operator]==Qn[e.operator]&&e.right.is_number(n)&&("+"!=e.operator||e.right.left.is_boolean(n)||e.right.left.is_number(n)))||"-"==e.operator&&e.left.is_negative_zero()||!e.right.left.is_constant_expression()&&e.right.right.has_side_effects(n)||function(e){var n=!1;return e.walk(new yn(function(e){if(n)return!0;if(e instanceof f){if(e.left instanceof Ce)return n=!0}else if(e instanceof un&&unary_side_effects[e.operator]&&e.expression instanceof Ce)return n=!0})),n}(e.right.right)||"+"!=(e=Yn(p,e,{operator:F(e.operator,e.right.operator),left:Yn(p,e.left,{operator:e.operator,left:e.left,right:e.right.left,start:e.left.start,end:e.right.left.end}),right:e.right.right})).operator||e.right.is_boolean(n)||e.right.is_number(n)||(e.right=Yn(pn,e.right,{operator:"+",expression:e.right})),e.right instanceof C&&e.left instanceof p&&"%"!=e.left.operator&&Qn[e.left.operator]==Qn[e.operator]&&e.left.is_number(n))if(e.left.left instanceof C){var r=$(e.operator,e.left.left,e.right,{start:e.left.left.start,end:e.right.end});e=$(e.left.operator,jt(n,r),e.left.right,e)}else if(e.left.right instanceof C){var A=F(e.left.operator,e.operator),y=jt(n,$(A,e.left.right,e.right,e.left));!y.is_constant()||"-"==e.left.operator&&0!=e.right.value&&0==+y.value&&e.left.left.is_negative_zero()||(e=$(e.left.operator,e.left.left,y,e))}break;case"instanceof":if(i(e.right))return Kn(e,[e,Yn(te,e)]).optimize(n)}if(!(d instanceof pn&&"delete"==d.operator)){if(e.left instanceof Te&&!e.right.is_constant())switch(e.operator){case"+":if(0==e.left.value){if(e.right.is_boolean(n))return Yn(pn,e,{operator:"+",expression:e.right}).optimize(n);if(e.right.is_number(n)&&!e.right.is_negative_zero())return e.right}break;case"*":if(1==e.left.value)return Yn(pn,e,{operator:"+",expression:e.right}).optimize(n)}if(e.right instanceof Te&&!e.left.is_constant())switch(e.operator){case"+":if(0==e.right.value){if(e.left.is_boolean(n))return Yn(pn,e,{operator:"+",expression:e.left}).optimize(n);if(e.left.is_number(n)&&!e.left.is_negative_zero())return e.left}break;case"-":if(0==e.right.value)return Yn(pn,e,{operator:"+",expression:e.left}).optimize(n);break;case"/":if(1==e.right.value)return Yn(pn,e,{operator:"+",expression:e.left}).optimize(n)}}}if(n.option("typeofs"))switch(e.operator){case"&&":ri(e.left,e.right,null);break;case"||":ri(e.left,null,e.right)}if(n.option("unsafe")){var E=P(e.right);if(h&&E&&("=="==e.operator||"!="==e.operator)&&e.left instanceof Te&&0==e.left.value)return("=="==e.operator?Yn(pn,e,{operator:"!",expression:e.right}):e.right).optimize(n);var D=P(e.left);if(n.option("comparisons")&&function(){switch(e.operator){case"<=":return E&&e.left instanceof Te&&0==e.left.value;case"<":if(D&&e.right instanceof Te&&0==e.right.value)return!0;case"==":case"!=":return!!E&&(e.left instanceof Te&&-1==e.left.value||e.left instanceof pn&&"-"==e.left.operator&&e.left.expression instanceof Te&&1==e.left.expression.value)}}()){var q=Yn(pn,e,{operator:"!",expression:Yn(pn,e,{operator:"~",expression:D?e.left:e.right})});switch(e.operator){case"<":if(D)break;case"<=":case"!=":q=Yn(pn,e,{operator:"!",expression:q})}return q.optimize(n)}}return jt(n,e);function F(e,n){switch(e){case"-":return"+"==n?"-":"+";case"/":return"*"==n?"/":"*";default:return n}}function $(e,t,i,r){return"+"==e&&(t.is_boolean(n)||t.is_number(n)||(t=Yn(pn,t,{operator:"+",expression:t})),i.is_boolean(n)||i.is_number(n)||(i=Yn(pn,i,{operator:"+",expression:i}))),Yn(p,r,{operator:e,left:t,right:i})}function P(e){return"Call"==e.TYPE&&e.expression instanceof V&&Si[e.expression.property]}function j(){return e.left.is_constant()||e.right.is_constant()||!e.left.has_side_effects(n)&&!e.right.has_side_effects(n)}function z(n){if(j()){n&&(e.operator=n);var t=e.left;e.left=e.right,e.right=t}}}),e(Ke,function(e){return e}),e(nn,function(e,n){if(!n.option("ie")&&mt(e)&&(!e.scope.resolve().uses_with||!n.find_parent(mn)))switch(e.name){case"undefined":return Yn(hn,e).optimize(n);case"NaN":return Yn(ye,e).optimize(n);case"Infinity":return Yn(le,e).optimize(n)}var t=n.parent();if(n.option("reduce_vars")&&tt(n.self(),t)!==n.self()){var r,o,a,s=e.definition(),f=e.fixed_value(),c=s.single_use&&!(t instanceof g&&t.is_expr_pure(n));if(c)if(i(f)){if(s.scope===e.scope.resolve(!0)&&!s.in_loop||n.option("reduce_funcs")&&1!=s.escaped.depth&&!f.inlined)if(s.redefined())c=!1;else if(qi(n,s,f))c=!1;else if(f.name&&f.name.definition()!==s)c=!1;else if(f.parent_scope!==e.scope||it(s))if(gi(f,n)){if("f"==(c=f.is_constant_expression(e.scope))){var u=e.scope;do{(u instanceof ve||u instanceof me)&&(u.inlined=!0)}while(u=u.parent_scope)}}else c=!1;else f.name&&("await"==f.name.name&&is_async(f)||"yield"==f.name.name&&An(f))?c=!1:f.has_side_effects(n)?c=!1:n.option("ie")&&f instanceof S&&(c=!1);else c=!1;c&&(f.parent_scope=e.scope)}else(!f||s.recursive_refs>0||!f.is_constant_expression()||f.drop_side_effect_free(n))&&(c=!1);if(c){if(s.single_use=!1,f._squeezed=!0,f.single_use=!0,f instanceof M&&(f=Kt(f)),f instanceof ve&&(f=Jt(f)),i(f)){var l=[],u=e.scope;do{if(l.push(u),u===s.scope)break}while(u=u.parent_scope);f.enclosed.forEach(function(e){if(!f.variables.has(e.name))for(var n=0;n<l.length;n++){var t=l[n];if(!Bn(t.enclosed,e))return;t.var_names().set(e.name,!0)}})}if(s.recursive_refs>0){var p,h,d=(w=f.clone(!0)).name.definition(),_=w.variables.get(w.name.name),v=_&&_.orig[0];w instanceof S?(p="def_function",h=AST_SymbolClass):(p="def_variable",h=Qe),v instanceof h||((v=Yn(h,w.name)).scope=w,w.name=v,(_=w[p](v)).recursive_refs=s.recursive_refs),w.walk(new yn(function(e){if(e instanceof Ve){if(e!==v){var n=e.definition();n.orig.push(e),n.eliminated++}}else if(e instanceof nn){var n=e.definition();if(n===d)e.thedef=n=_;else{n.single_use=!1;var t=e.fixed_value();i(t)&&t.name&&t.name.definition()===n&&n.scope===t.name.scope&&f.variables.get(t.name.name)===n&&(t.name=t.name.clone(),e.thedef=n=w.variables.get(t.name.name)||w[p](t.name))}n.references.push(e)}}))}else f instanceof Pe?(n.push(f),w=f.optimize(n),n.pop()):w=f.optimize(n),w=w.transform(new bn(function(e,n){return e instanceof Pe?e:(e=e.clone(),n(e,this),e)}));return s.replaced++,w}if(f&&!1!==(r=e.fixed||s.fixed).should_replace)if(f instanceof an?it(s)||!Ci(s)||function(n){var t=e.scope;for(;t!==n.scope;){if(t instanceof S)return!0;t=t.parent_scope}}(s)||(a=f):(o=f.evaluate(n,!0))!==f&&"function"!=typeof o&&(null===o||"object"!=typeof o||n.option("unsafe_regexp")&&o instanceof RegExp&&!s.cross_loop&&Ci(s))&&(a=nt(o,f)),a){if(void 0===r.should_replace){var m=a.optimize(n).print_to_string().length;x(f)||(m=Math.min(m,f.print_to_string().length));var b=s.name.length;if(n.option("unused")&&!n.exposed(s)){var y=s.references.length-s.replaced-s.assignments;y=Math.min(y,s.references.filter(function(e){return e.fixed===r}).length),b+=(b+2+m)/Math.max(1,y)}r.should_replace=m-Math.floor(b)<n.eval_threshold}var w;if(r.should_replace)return x(f)?(w=a.optimize(n))===a&&(w=w.clone(!0)):(w=Ot(a.optimize(n),f))!==a&&w!==f||(w=w.clone(!0)),s.replaced++,w}}return e;function x(e){var n;return e.walk(new yn(function(e){if(e instanceof nn&&(n=!0),n)return!0})),n}}),e(rn,function(e,n){if(!n.option("templates"))return e;var t=e.tag;if(!t||Fi(n,t)){for(var i,r=[],o=[],a=0;a<e.strings.length;a++){var s=e.strings[a];if(!t){var f=$i(s);f&&(s=v(f))}if(a>0){var c=e.expressions[a-1],u=m(c);if(u){var l,h=o[o.length-1],d=h+u+s;if(t||typeof(l=$i(d))==i){o[o.length-1]=l?v(l):d;continue}}r.push(c)}o.push(s),t||(i=typeof f)}if(!t&&o.length>1){if(""==o[o.length-1])return Yn(p,e,{operator:"+",left:Yn(rn,e,{expressions:r.slice(0,-1),strings:o.slice(0,-1)}).transform(n),right:r[r.length-1]}).optimize(n);if(""==o[0]){for(var _=Yn(p,e,{operator:"+",left:Yn(Ie,e,{value:""}),right:r[0]}),a=1;""==o[a]&&a<r.length;a++)_=Yn(p,e,{operator:"+",left:_,right:r[a]});return Ct(n,e,Yn(p,e,{operator:"+",left:_.transform(n),right:Yn(rn,e,{expressions:r.slice(a),strings:o.slice(a)}).transform(n)}).optimize(n))}}e.expressions=r,e.strings=o}return jt(n,e);function v(e){return e.replace(/\r|\\|`|\${/g,function(e){return"\\"+("\r"==e?"r":e)})}function m(e){var i=e.evaluate(n);if(i!==e&&!(t&&/\r|\\|`/.test(i)||(i=v(""+i)).length>e.print_to_string().length+"${}".length))return i}}),e(hn,function(e,n){if(n.option("unsafe_undefined")){var t=$n(n).find_variable("undefined");if(t){var i=Yn(nn,e,{name:"undefined",scope:t.scope,thedef:t});return i.is_undefined=!0,i}}var r=tt(n.self(),n.parent());return r&&Pi(r,e)?e:Yn(pn,e,{operator:"void",expression:Yn(Te,e,{value:0})})}),e(le,function(e,n){var t=tt(n.self(),n.parent());return t&&Pi(t,e)?e:!n.option("keep_infinity")||t||$n(n).find_variable("Infinity")?Yn(p,e,{operator:"/",left:Yn(Te,e,{value:1}),right:Yn(Te,e,{value:0})}):e}),e(ye,function(e,n){var t=tt(n.self(),n.parent());return t&&Pi(t,e)?e:t||$n(n).find_variable("NaN")?Yn(p,e,{operator:"/",left:Yn(Te,e,{value:0}),right:Yn(Te,e,{value:0})}):e});var zi=Mn("+ - * / % >> << >>> | ^ &"),Mi=Mn("* | ^ &");function Ni(e,n){if(!e)return!1;var t=n.parent();return"Call"!=t.TYPE||(t.expression!==n.self()||!(e instanceof nn&&!(e=e.fixed_value()))&&(e instanceof _e&&!e.contains_this()))}function Ii(e){return e instanceof Ae&&"string"==typeof e.key&&!(e instanceof Oe&&e.value.contains_super())}function Ri(e){var n=e.definition().redefined();return n&&((e=e.clone()).thedef=n),e}function Bi(e,n){var t=!1;return n.walk(new yn(function(n){return!!t||(n instanceof nn&&e.variables.get(n.name)===n.definition()?t=!0:void 0)})),t}function Hi(e,n){var t=[];e.references.forEach(function(e){var i=e.fixed;i&&Bn(t,i)&&(i.assigns?i.assigns.unshift(n):i.assigns=[n])})}function Yi(e,n){var t=Yn(nn,n),i=Yn(f,n,{operator:"=",left:t,right:Yn(hn,n).transform(e)}),r=n.definition();return r.fixed&&(t.fixed=function(){return i.right},t.fixed.assigns=[i],Hi(r,i)),r.assignments++,r.references.push(t),i}e(f,function(e,n){if(n.option("dead_code"))if(e.left instanceof Ce){if("="==e.operator){if(e.redundant){var t=[e.left.expression];return e.left instanceof Re&&t.push(e.left.property),t.push(e.right),Kn(e,t).optimize(n)}if(e.left.equals(e.right)&&!e.left.has_side_effects(n))return e.right;var i=e.left.expression;if(i instanceof _e||!n.has_directive("use strict")&&i instanceof C&&!i.may_throw_on_access(n))return e.left instanceof V?e.right:Kn(e,[e.left.property,e.right]).optimize(n)}}else if(e.left instanceof nn&&D(e.left,n)){var r;if("="==e.operator&&e.left.equals(e.right)&&!((r=n.parent())instanceof pn&&"delete"==r.operator))return e.right;if(e.left.is_immutable())return w();var o,a=e.left.definition(),s=a.scope.resolve(),c=s===n.find_parent(_e),u=0;if(r=n.self(),!s.uses_arguments||!it(a)||n.has_directive("use strict"))do{if(o=r,(r=n.parent(u++))instanceof f){if(r.left instanceof nn&&r.left.definition()===a){if(g(u,r,!c))break;return w(a)}if(r.left.match_symbol(function(e){if(e instanceof Ce)return!0}))break}else{if(r instanceof J){if(!c)break;if(g(u,r))break;if(ji(s,[a]))break;return w(a)}if(r instanceof ze){if(!c)break;if(ji(s,[a]))break;var l;do{if(l=r,(r=n.parent(u++))===s&&xt(r.body,l))return w(a)}while(m(l,r));break}if(r instanceof _n){if(!(r.name instanceof Ve))continue;if(r.name.definition()!==a)continue;if(g(u,r))break;return w(a)}}}while(v(o,r))}if(n.option("sequences")){var h=e.lift_sequences(n);if(h!==e)return h.optimize(n)}if(n.option("assignments")){if("="==e.operator&&e.left instanceof nn&&e.right instanceof p){if(e.right.left instanceof nn&&e.right.left.name==e.left.name&&zi[e.right.operator])return b(e.right.right);if(e.right.right instanceof nn&&e.right.right.name==e.left.name&&Mi[e.right.operator]&&!e.right.left.has_side_effects(n))return b(e.right.left)}if(("-="==e.operator||"+="==e.operator&&(e.left.is_boolean(n)||e.left.is_number(n)))&&e.right instanceof Te&&1==e.right.value){var d=e.operator.slice(0,-1);return Yn(pn,e,{operator:d+d,expression:e.left})}}return jt(n,e);function v(e,n){if(n instanceof p)switch(e){case n.left:return n.right.is_constant_expression(s);case n.right:return!0;default:return!1}if(n instanceof O)switch(e){case n.condition:return n.consequent.is_constant_expression(s)&&n.alternative.is_constant_expression(s);case n.consequent:case n.alternative:return!0;default:return!1}if(n instanceof je){var t=n.expressions,i=t.indexOf(e);if(i<0)return!1;for(var r=t.length;--r>i;)if(!t[r].is_constant_expression(s))return!1;return!0}return n instanceof pn}function m(e,n){return n instanceof _?xt(n.body,e):n instanceof y?xt(n.body,e):n instanceof ie?xt(n.body,e):n instanceof ce?n.body===e||n.alternative===e:n instanceof cn?n.bfinally?n.bfinally===e:n.bcatch===e:void 0}function g(t,i,r){var o=e.right;e.right=Yn(xe,o);var a=i.may_throw(n);return e.right=o,zn(n,t,i,s,a,r)}function b(n){var t=e.left.fixed;return t&&(t.to_binary=X(function(e){return e.left},t)),Yn(f,e,{operator:e.right.operator+"=",left:e.left,right:n})}function w(t){return t&&(t.fixed=!1),("="!=e.operator?Yn(p,e,{operator:e.operator.slice(0,-1),left:e.left,right:e.right}):at(n.parent(),e,e.right)).optimize(n)}}),e(O,function(e,n){if(n.option("sequences")&&e.condition instanceof je){var t=e.condition.expressions.slice(),i=e.clone();return i.condition=t.pop(),t.push(i),Kn(e,t).optimize(n)}if(!n.option("conditionals"))return e;var r=e.condition;if(n.option("booleans")&&!r.has_side_effects(n)&&ai(n,r),!(r=oi(n,r)))return Se.warn("Condition always false [{start}]",e),Kn(e,[e.condition,e.alternative]).optimize(n);if(!(r instanceof Se))return Se.warn("Condition always true [{start}]",e),Kn(e,[e.condition,e.consequent]).optimize(n);var o=Tn(n),a=r.negate(n,o);(o?qt:Ot)(r,a)===a&&(e=Yn(O,e,{condition:a,consequent:e.alternative,alternative:e.consequent}),a=r,r=e.condition);var s=e.consequent,c=e.alternative,u=Ei(r,n);if(Di(n,u)){if(u.equals(s))return Yn(p,e,{operator:"||",left:r,right:c}).optimize(n);if(u.equals(c))return Yn(p,e,{operator:"&&",left:r,right:s}).optimize(n)}var l=s.tail_node();if(l instanceof f){var h="="==l.operator,d=h?c.tail_node():c;if((h||s===l)&&d instanceof f&&l.operator==d.operator&&l.left.equals(d.left)&&(h&&l.left instanceof nn||!r.has_side_effects(n)&&k(s)&&k(c)))return Yn(f,e,{operator:l.operator,left:l.left,right:Yn(O,e,{condition:r,consequent:A(s),alternative:A(c)})})}var d=c.tail_node();if(l.equals(d))return Kn(e,s.equals(c)?[r,s]:[Yn(O,e,{condition:r,consequent:E(s),alternative:E(c)}),d]).optimize(n);var _,v=function n(t,i,o){var a=t.tail_node();var s=i.tail_node();if(!function e(n,t){if(n.TYPE!=t.TYPE)return;if(n.optional!=t.optional)return;if(n instanceof g){if(-1!=x(n,t))return;return"Call"!=n.TYPE||!(n.expression instanceof Ce||t.expression instanceof Ce)||e(n.expression,t.expression)}if(!(n instanceof Ce))return;var i=n.property;var r=t.property;return(i instanceof Se?i.equals(r):i==r)&&!(n.expression instanceof AST_Super||t.expression instanceof AST_Super)}(a,s))return!o&&Yn(O,e,{condition:r,consequent:t,alternative:i});var f=a.clone();var c=T(t,a,"expression");var u=T(i,s,"expression");var l=n(c,u);a.expression instanceof je&&(l=at(a,a.expression,l));f.expression=l;return f}(s,c,!0);if(v)return v;if(s instanceof g&&c.TYPE==s.TYPE&&(_=x(s,c))>=0&&s.expression.equals(c.expression)&&!r.has_side_effects(n)&&!s.expression.has_side_effects(n)){var i=s.clone(),m=s.args[_];return i.args[_]=m instanceof Me?Yn(Me,e,{expression:Yn(O,e,{condition:r,consequent:m.expression,alternative:c.args[_].expression})}):Yn(O,e,{condition:r,consequent:m,alternative:c.args[_]}),i}if(l instanceof O&&l.alternative.equals(c))return Yn(O,e,{condition:Yn(p,e,{left:r,operator:"&&",right:T(s,l,"condition")}),consequent:l.consequent,alternative:st(l.alternative,c)});if(l instanceof O&&l.consequent.equals(c))return Yn(O,e,{condition:Yn(p,e,{left:a,operator:"||",right:T(s,l,"condition")}),consequent:st(l.consequent,c),alternative:l.alternative});if(d instanceof O&&s.equals(d.consequent))return Yn(O,e,{condition:Yn(p,e,{left:r,operator:"||",right:T(c,d,"condition")}),consequent:st(s,d.consequent),alternative:d.alternative});if(d instanceof O&&s.equals(d.alternative))return Yn(O,e,{condition:Yn(p,e,{left:a,operator:"&&",right:T(c,d,"condition")}),consequent:d.consequent,alternative:st(s,d.alternative)});if(l instanceof p&&"&&"==l.operator&&l.right.equals(c))return Yn(p,e,{operator:"&&",left:Yn(p,e,{operator:"||",left:a,right:T(s,l,"left")}),right:st(l.right,c)}).optimize(n);if(l instanceof p&&"||"==l.operator&&l.right.equals(c))return Yn(p,e,{operator:"||",left:Yn(p,e,{operator:"&&",left:r,right:T(s,l,"left")}),right:st(l.right,c)}).optimize(n);if(d instanceof p&&"&&"==d.operator&&d.right.equals(s))return Yn(p,e,{operator:"&&",left:Yn(p,e,{operator:"||",left:r,right:T(c,d,"left")}),right:st(s,d.right)}).optimize(n);if(d instanceof p&&"||"==d.operator&&d.right.equals(s))return Yn(p,e,{operator:"||",left:Yn(p,e,{operator:"&&",left:a,right:T(c,d,"left")}),right:st(s,d.right)}).optimize(n);var b=n.option("booleans")&&n.in_boolean_context();return w(s)?S(c)?y(r):Yn(p,e,{operator:"||",left:y(r),right:c}).optimize(n):S(s)?w(c)?y(r.negate(n)):Yn(p,e,{operator:"&&",left:y(r.negate(n)),right:c}).optimize(n):w(c)?Yn(p,e,{operator:"||",left:y(r.negate(n)),right:s}).optimize(n):S(c)?Yn(p,e,{operator:"&&",left:y(r),right:s}).optimize(n):(n.option("typeofs")&&ri(r,s,c),e);function y(e){return e.is_boolean(n)?e:Yn(pn,e,{operator:"!",expression:e.negate(n)})}function w(e){return e instanceof fn||b&&e instanceof C&&e.value||e instanceof pn&&"!"==e.operator&&e.expression instanceof C&&!e.expression.value}function S(e){return e instanceof te||b&&(e instanceof C&&!e.value||e instanceof pn&&"void"==e.operator&&!e.expression.has_side_effects(n))||e instanceof pn&&"!"==e.operator&&e.expression instanceof C&&e.expression.value}function x(e,n){var t=e.args,i=n.args,r=t.length;if(r!=i.length)return-2;for(var o=0;o<r;o++)if(!t[o].equals(i[o])){if(t[o]instanceof Me!=i[o]instanceof Me)return-3;for(var a=o+1;a<r;a++)if(!t[a].equals(i[a]))return-2;return o}return-1}function T(e,n,t){if(e===n)return n[t];var i=e.expressions.slice(0,-1);return i.push(n[t]),Kn(e,i)}function k(e){return e===e.tail_node()||qn(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(n)})}function A(e){if(!(e instanceof je))return e.right;var n=e.expressions.slice();return n.push(n.pop().right),Kn(e,n)}function E(e){return e instanceof je?Kn(e,e.expressions.slice(0,-1)):Yn(Te,e,{value:0})}}),e(v,function(e,n){if(!n.option("booleans"))return e;if(n.in_boolean_context())return Yn(Te,e,{value:+e.value});var t=n.parent();return t instanceof p&&("=="==t.operator||"!="==t.operator)?(Se.warn("Non-strict equality against boolean: {operator} {value} [{start}]",{operator:t.operator,value:e.value,start:t.start}),Yn(Te,e,{value:+e.value})):Yn(pn,e,{operator:"!",expression:Yn(Te,e,{value:1-e.value})})}),e(Me,function(e,n){var t=e.expression;return n.option("spreads")&&t instanceof a&&!(n.parent()instanceof ke)?jn.splice(t.elements.map(function(e){return e instanceof fe?Yn(hn,e).optimize(n):e})):e}),e(Re,function(e,n){var t=e.expression,i=e.property,r=hi(e,n);if(r)return r;if(n.option("properties")){var s=i.evaluate(n);if(s!==i){if("string"==typeof s)if("undefined"==s)s=void 0;else{var f=parseFloat(s);f.toString()==s&&(s=f)}i=e.property=Ot(i,nt(s,i).transform(n));var c=""+s;if(Zn(c)&&c.length<=i.print_to_string().length+1)return Yn(V,e,{optional:e.optional,expression:t,property:c,quoted:!0}).optimize(n)}}var u,l,p,h,d=n.parent(),_=tt(n.self(),d);if(n.option("arguments")&&t instanceof nn&&w(u=t.definition())&&!t.in_arg&&i instanceof Te&&Math.floor(x=i.value)==x&&(l=u.scope)===function(){var e,t=0;for(;e=n.parent(t++);)if(e instanceof _e){if(e instanceof o)return;if(kn(e))continue;return p=n.parent(t),e}}()&&l.uses_arguments<(_?2:3)){d instanceof pn&&"delete"==d.operator&&(u.deleted||(u.deleted=[]),u.deleted[x]=!0);var v=l.argnames[x];if(u.deleted&&u.deleted[x])v=null;else if(v){var m;v instanceof Je&&"await"!=v.name&&t.scope.find_variable(v.name)===(m=v.definition())?(n.has_directive("use strict")||l.name||l.rest||!(p instanceof g&&x<p.args.length&&qn(p.args.slice(0,x+1),function(e){return!(e instanceof Me)}))||!qn(l.argnames,function(e){return e instanceof Je}))&&(O()||m.assignments||m.orig.length>1)&&(v=null):v=null}else if((_||!O())&&x<l.argnames.length+5&&n.drop_fargs(l,p)&&!l.rest)for(;x>=l.argnames.length;)v=l.make_var(Je,l,"argument_"+l.argnames.length),l.argnames.push(v);if(v&&find_if(function(e){return e.name===v.name},l.argnames)===v){_&&u.reassigned--;var b=Yn(nn,v);return b.reference(),v.unused=void 0,b}}if(_)return e;if(n.option("sequences")&&"Call"!=d.TYPE&&!(d instanceof oe&&d.init===e)){var y=di(e,n);if(y!==e)return y.optimize(n)}if(s!==i){var S=e.flatten_object(c,n);S&&(t=e.expression=S.expression,i=e.property=S.property)}if(n.option("properties")&&n.option("side_effects")&&i instanceof Te&&t instanceof a&&qn(h=t.elements,function(e){return!(e instanceof Me)})){var x=i.value,T=h[x];if(Ni(T,n)){for(var k=T instanceof fe,A=!k,E=[],D=h.length;--D>x;){var f=h[D].drop_side_effect_free(n);f&&(E.unshift(f),A&&f.has_side_effects(n)&&(A=!1))}for(A||E.unshift(T);--D>=0;){var f=h[D].drop_side_effect_free(n);f?E.unshift(f):k?E.unshift(Yn(fe,h[D])):x--}return A?(E.push(T),Kn(e,E).optimize(n)):Yn(Re,e,{expression:Yn(a,t,{elements:E}),property:Yn(Te,i,{value:x})})}}return jt(n,e);function O(){return!n.option("reduce_vars")||u.reassigned}}),me.DEFMETHOD("contains_super",function(){var e=!1,n=this;return n.walk(new yn(function(t){return!!e||(t instanceof AST_Super?e=!0:t!==n&&t instanceof Pe&&!kn(t)||void 0)})),e}),function(e){e(s,Un),e(c,Un),e(Se,function(){var e=!1,n=this;return n.walk(new yn(function(t){return!!e||(t instanceof an?e=!0:t!==n&&t instanceof Pe&&!kn(t)||void 0)})),e})}(function(e,n){e.DEFMETHOD("contains_this",n)}),Ce.DEFMETHOD("flatten_object",function(e,n){if(n.option("properties")&&"__proto__"!==e){var t=this.expression;if(t instanceof ke)for(var i=t.properties,r=i.length;--r>=0;){var o=i[r];if(o.key===e){if(!qn(i,Ii))return;if(!Ni(o.value,n))return;for(var f,u,l=[],p=0;p<i.length;p++){var h=i[p].value;if(i[p]instanceof Oe){var d,_=!(h.uses_arguments||An(h)||h.contains_this());if(_){u||(u=n.find_parent(Pe));var v=vi(n,u);h.each_argname(function(e){v[e.name]&&(_=!1)})}if(_)d=is_async(h)?c:s;else{if(!(r!=p||(f=n.parent())instanceof g&&f.expression===this))return;d=h.CTOR}h=Yn(d,h)}l.push(h)}return Yn(Re,this,{expression:Yn(a,t,{elements:l}),property:Yn(Te,this,{value:r})})}}}}),e(V,function(e,n){"arguments"!=e.property&&"caller"!=e.property||Se.warn("Function.prototype.{property} not supported [{start}]",e);var t=n.parent();if(tt(n.self(),t))return e;var i=hi(e,n);if(i)return i;if(n.option("sequences")&&"Call"!=t.TYPE&&!(t instanceof oe&&t.init===e)){var r=di(e,n);if(r!==e)return r.optimize(n)}if(n.option("unsafe_proto")&&e.expression instanceof V&&"prototype"==e.expression.property){var o=e.expression.expression;if(mt(o))switch(o.name){case"Array":e.expression=Yn(a,e.expression,{elements:[]});break;case"Function":e.expression=Yn(se,e.expression,{argnames:[],body:[]}).init_vars(o.scope);break;case"Number":e.expression=Yn(Te,e.expression,{value:0});break;case"Object":e.expression=Yn(ke,e.expression,{properties:[]});break;case"RegExp":e.expression=Yn(Fe,e.expression,{value:/t/});break;case"String":e.expression=Yn(Ie,e.expression,{value:""})}}var s=e.flatten_object(e.property,n);return s?s.optimize(n):jt(n,e)}),e(H,function(e,n){return n.option("rests")&&e.rest instanceof H?Yn(H,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),e(Y,function(e,n){if(n.option("objects")){var t=e.key;t instanceof Se&&(t=t.evaluate(n))!==e.key&&(e.key=""+t)}return e}),e(ke,function(e,n){if(!n.option("objects"))return e;var t=!1,i=!1,r=!1,o=n.has_directive("use strict"),a=[],s=new Fn,f=[];if(e.properties.forEach(function(e){if(!(e instanceof Me))return l(e);i=!0;var o=e.expression;n.option("spreads")&&o instanceof ke&&qn(o.properties,function(e){return!(e instanceof AST_ObjectGetter)&&(!(e instanceof Me)&&("__proto__"!==e.key||(e instanceof AST_ObjectSetter||!e.value.has_side_effects(n))))})?(t=!0,o.properties.forEach(function(e){var t=e.key,i=e instanceof AST_ObjectSetter;if("__proto__"===t){if(!i)return;t=nt(t,e)}l(i?Yn(Ae,e,{key:t,value:Yn(hn,e).optimize(n)}):e)})):(r=!0,u(),f.push(e))}),u(),!t)return e;if(i&&r&&1==f.length){var c=f[0];c instanceof Ee&&c.key instanceof Te&&(c.key=""+c.key.value)}return Yn(ke,e,{properties:f});function u(){a.forEach(function(n){var i=s.get(n);switch(i.length){case 0:return;case 1:return f.push(i[0])}t=!0;var a=o&&!r&&i.pop();f.push(1==i.length?i[0]:Yn(Ae,e,{key:i[0].key,value:Kn(e,i.map(function(e){return e.value}))})),a&&f.push(a),i.length=0}),a=[],s=new Fn}function l(e){var t=e.key;t instanceof Se&&(i=!0,(t=t.evaluate(n))===e.key||"__proto__"===t?r=!0:t=e.key=""+t),Ii(e)?(e.value.has_side_effects(n)&&u(),a.push(t),s.add(t,e)):(u(),f.push(e)),i&&!r&&"string"==typeof t&&Q.test(t)&&(r=!0,s.has(t)&&(e=s.get(t)[0]),e.key=Yn(Te,e,{value:+t}))}}),function(e){function n(e,n,t,i,r,o,a){for(var s=[],f=o.expressions,c=t,u=f.length-(a||0),l=u;--u>=0;c=!0,r=!1){var p=f[u].try_inline(e,n,c,i,r);p&&(h(),s.push(p))}if(0!=s.length)return h(),!t&&s[0]instanceof ze&&(s[0]=Yn($e,o,{value:s[0].body})),Yn(_,o,{body:s.reverse()});function h(){l>u+1&&s.push(Yn(ze,o,{body:Kn(o,f.slice(u+1,l))})),l=u}}e(Se,Rn),e(f,Rn),e(u,function(e,n,t,i){if(e.option("awaits")){var r=this,o=r.expression.try_inline(e,n,t,i,!0);if(o)return t||Xt(o,function(n){n.in_bool=!1;var t=n.value;t instanceof u||(n.value=Yn(u,r,{expression:t||Yn(hn,n).transform(e)}))}),Ht(o)?o:Yn(_,r,{body:[o,Yn(ze,r,{body:Yn(u,r,{expression:Yn(Te,r,{value:0})})})]})}}),e(p,function(e,n,t,i,r){if(void 0!==t){var o=this,a=o.operator;if(Dt[a]){var s=o.right.try_inline(e,n,t,i,r);if(s)return Yn(ce,o,{condition:function(n){switch(a){case"&&":return n;case"||":return n.negate(e);case"??":return Yn(p,o,{operator:"==",left:Yn(xe,o),right:n})}}(o.left),body:s,alternative:t?null:Yn($e,o,{value:Yn(hn,o).transform(e)})})}}}),e(_,function(e,n,t,i){if(!t&&this.variables){var r=this.body,o=r.length-1;if(!(o<0)){var a=r[o].try_inline(e,this,t,i);if(a)return r[o]=a,this}}}),e(g,function(e,n,t,i,r){if(!(e.option("inline")<4)){var o=this;if(!o.is_expr_pure(e)){var s=o.expression;if(s instanceof me&&!(s.name||s.uses_arguments||s.pinned()||An(s))){var f=kn(s);if(!(f&&s.value||s.body[0]instanceof U||s.contains_this())){n||(n=$n(e));var c=new Fn;for(c.set("NaN",!0);!(n instanceof Pe);)n.variables.each(function(e){c.set(e.name,!0)}),n=n.parent_scope;if(In(n,e.stack)&&!(n.pinned()&&s.variables.size()>(f?0:1))){if(n instanceof sn){if(s.variables.size()>(f?0:1)){if(!e.toplevel.vars)return;if(s.functions.size()>0&&!e.toplevel.funcs)return}c.set("arguments",!0)}var l=!r&&is_async(s);if(l){if(!e.option("awaits"))return;if(!is_async(n))return;if(o.may_throw(e))return}var p=n.var_names();if(i&&(i=[]),s.variables.all(function(e,n){return i&&i.push(e),!c.has(n)&&!p.has(n)||!f&&"arguments"==n&&1==e.orig.length})&&!(i&&i.length>0&&ji(s,i))){var h=!0;if(qn(s.argnames,function(e){var n=!1,t=new yn(function(e){return!!n||(e instanceof z?Bi(s,e.value)?n=!0:(e.name.walk(t),!0):e instanceof Y?e.key instanceof Se&&Bi(s,e.key)?n=!0:(e.value.walk(t),!0):e instanceof Je&&!qn(e.definition().orig,function(e){return!(e instanceof We)})?n=!0:void 0)});return e.walk(t),!n&&(e instanceof Je||(h=!1),!0)})){if(s.rest){if(Bi(s,s.rest))return;h=!1}var d;if(t?d=function(e){var n=!1;return e.walk(new yn(function(e){return!!n||(l&&(e instanceof u||e instanceof AST_ForAwaitOf)||e instanceof $e?n=!0:e instanceof Pe||void 0)})),!n}:(r||is_async(s)||Cn(n))&&(d=function(e){var n=!1,t=new yn(function(e){return!!n||(e instanceof $e?n=!0:e instanceof Pe||void 0)});return e.walk(new yn(function(e){return!!n||(e instanceof cn?(e.bfinally&&qn(e.body,function(e){return e.walk(t),!n})&&e.bcatch&&e.bcatch.walk(t),!0):e instanceof Pe||void 0)})),!n}),(!d||qn(s.body,d))&&mi(s,vi(e,n))){s.functions.each(function(e,t){n.functions.set(t,e)});var v=[];s.variables.each(function(t,r){if((f||"arguments"!=r||1!=t.orig.length)&&(p.set(r,!0),n.enclosed.push(t),n.variables.set(r,t),t.single_use=!1,i&&t.references.length!=t.replaced&&t.orig.length!=t.eliminated&&(1!=t.orig.length||!s.functions.has(r))&&qn(t.orig,function(e){return!(e instanceof Ge)&&(e instanceof Je?!e.unused&&t.scope.resolve()!==s:!(e instanceof Ze))}))){var o=t.orig[0];o instanceof Le||v.push(Yn(ze,o,{body:Yi(e,Ri(o))}))}});var m=Object.create(null),g=new Fn;if(h&&qn(o.args,function(e){return!(e instanceof Me)})){var b=o.args.slice();s.argnames.forEach(function(n){var t=b.shift();if(n.unused)t&&v.push(Yn(ze,o,{body:t}));else{var i=Yn(_n,o,{name:n.convert_symbol(tn,w),value:t||Yn(hn,o).transform(e)});n instanceof Je&&Hi(n.definition(),i),v.push(Yn(dn,o,{definitions:[i]}))}}),b.length&&v.push(Yn(ze,o,{body:Kn(o,b)}))}else v.push(Yn(dn,o,{definitions:[Yn(_n,o,{name:Yn(H,o,{elements:s.argnames.map(function(e){return e.unused?Yn(fe,e):e.convert_symbol(tn,w)}),rest:s.rest&&s.rest.convert_symbol(tn,w)}),value:Yn(a,o,{elements:o.args.slice()})})]}));g.each(function(e,n){var t=m[n];[].unshift.apply(t.orig,e),t.eliminated+=e.length}),[].push.apply(v,i?s.body.filter(function(e){if(!(e instanceof ve))return!0;var n=Yn(tn,Ri(e.name)),t=n.definition();return t.fixed=!1,t.orig.push(n),t.eliminated++,v.push(Yn(dn,e,{definitions:[Yn(_n,e,{name:n,value:Jt(e,!0)})]})),!1}):s.body);var y=Yn(_,o,{body:v});return t||(l&&Xt(y,function(e){var n=e.value;Et(n)||(e.value=Yn(u,o,{expression:n}))}),v.push(Yn($e,o,{value:Cn(n)?Yn(hn,o).transform(e):null}))),y}}}}}}}}function w(e,n){var t=n.definition();m[t.id]=t,g.add(t.id,e)}}),e(O,function(e,n,t,i,r){var o=this.consequent.try_inline(e,n,t,i,r),a=this.alternative.try_inline(e,n,t,i,r);if(o||a)return Yn(ce,this,{condition:this.condition,body:o||s(this.consequent),alternative:a||s(this.alternative)});function s(e){return t?Yn(ze,e,{body:e}):Yn($e,e,{value:e})}}),e(re,function(e,n,t,i){var r=this.body.try_inline(e,n,!0,!0);r&&(this.body=r);var o=this.init;return o&&(o=o.try_inline(e,n,!0,i))?(this.init=null,o instanceof _?(o.body.push(this),o):Yn(_,o,{body:[o,this]})):r&&this}),e(oe,function(e,t,i,r){var o=this.body.try_inline(e,t,!0,!0);o&&(this.body=o);var a=this.object;if(a instanceof je){var s=n(e,t,!0,r,!1,a,1);if(s)return this.object=a.tail_node(),s.body.push(this),s}return o&&this}),e(ce,function(e,t,i,r){var o=this.body.try_inline(e,t,i,r);o&&(this.body=o);var a=this.alternative;a&&(a=a.try_inline(e,t,i,r))&&(this.alternative=a);var s=this.condition;if(s instanceof je){var f=n(e,t,!0,r,!1,s,1);if(f)return this.condition=s.tail_node(),f.body.push(this),f}return(o||a)&&this}),e(pe,function(e,n,t,i){var r=this.body.try_inline(e,n,!0,!0);if(r)return this.body=r,this}),e(de,function(e,n,t,i){var r=this.body.try_inline(e,n,t,i);if(r){if(this.body instanceof pe&&r instanceof _){var o=r.body.pop();return this.body=o,r.body.push(this),r}return this.body=r,this}}),e(we,Rn),e($e,function(e,n,t,i){var r=this.value;return r&&r.try_inline(e,n,void 0,"try"===i)}),e(je,function(e,t,i,r,o){return n(e,t,i,r,o,this)}),e(ze,function(e,n,t,i){for(var r=this.body;r instanceof pn;){var o=r.operator;if(unary_side_effects[o])break;if("void"==o)break;r=r.expression}return t||Et(r)||(r=Yn(pn,this,{operator:"void",expression:r})),r.try_inline(e,n,t||!1,i)}),e(pn,function(e,n,t,i,r){var o=this,a=o.operator;if(!unary_side_effects[a]){t||"void"!=a||(t=!1);var s=o.expression.try_inline(e,n,t,i,r);if(s)return t||Xt(s,function(n){n.in_bool=!1;var t=n.value;"void"==a&&Et(t)||(n.value=Yn(pn,o,{operator:a,expression:t||Yn(hn,n).transform(e)}))}),s}}),e(mn,function(e,t,i,r){var o=this.body.try_inline(e,t,i,r);o&&(this.body=o);var a=this.expression;if(a instanceof je){var s=n(e,t,!0,r,!1,a,1);if(s)return this.expression=a.tail_node(),s.body.push(this),s}return o&&this}),e(gn,function(e,n,t,i){if(e.option("yields")&&this.nested){var r=this.expression;if("Call"==r.TYPE){var o=r.expression;switch(o.CTOR){case AST_AsyncGeneratorFunction:o=Yn(AST_AsyncFunction,o);break;case AST_GeneratorFunction:o=Yn(se,o);break;default:return}return(r=r.clone()).expression=o,r.try_inline(e,n,t,i)}}})}(function(e,n){e.DEFMETHOD("try_inline",n)}),e($e,function(e,n){var t=e.value;return t&&n.option("side_effects")&&Et(t,n)&&!Cn(n.find_parent(Pe))&&(e.value=null),e})}(function(e,n){e.DEFMETHOD("optimize",function(e){if(this._optimized)return this;if(e.has_directive("use asm"))return this;var t=n(this,e);return t._optimized=!0,t})}),{Compressor:rt}}),e("skylark-uglifyjs/sourcemap",["./utils"],function(e){"use strict";const{characters:n,HOP:t,Dictionary:i}=e;var r=n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o=r.reduce(function(e,n,t){return e[n]=t,e},Object.create(null));function a(e){var n="";e=Math.abs(e)<<1|e>>>31;do{var t=31&e;(e>>>=5)&&(t|=32),n+=r[t]}while(e);return n}function s(){var e=new i,n=[];return n.index=function(t){var i=e.get(t);return i>=0||(i=n.length,n.push(t),e.set(t,i)),i},n}return{SourceMap:function(e){var n,t=s(),r=e.includeSources&&new i,f=s(),c="";e.orig&&Object.keys(e.orig).forEach(function(n){var t=e.orig[n],i=[0,0,1,0,0];if(e.orig[n]={names:t.names,mappings:t.mappings.split(/;/).map(function(e){return i[0]=0,e.split(/,/).map(function(e){return i.slice(0,function(e,n){for(var t=0,i=0,r=0,a=0;r<n.length;r++){var s=o[n[r]];t+=(31&s)<<i,32&s?i+=5:(e[a++]+=1&t?2147483648|-(t>>1):t>>1,t=i=0)}return a}(i,e))})}),sources:t.sources},r&&t.sourcesContent)for(var a=0;a<t.sources.length;a++){var s=t.sourcesContent[a];s&&r.set(t.sources[a],s)}});var u=1,l=0,p=0,h=1,d=0,_=0;return{add:e.orig?function(n,t,i,r,o,a){var s=e.orig[n];if(s){var f,c=s.mappings[r-1];if(!c)return;for(var u=0;u<c.length;u++){var l=c[u][0];if(o>=l&&(f=c[u]),o<=l)break}!f||f.length<4?n=null:(n=s.sources[f[1]],r=f[2],o=f[3],f.length>4&&(a=s.names[f[4]]))}v(n,t,i,r,o,a)}:v,setSourceContent:r?function(e,n){r.has(e)||r.set(e,n)}:noop,toString:function(){return JSON.stringify({version:3,file:e.filename||void 0,sourceRoot:e.root||void 0,sources:t,sourcesContent:r?t.map(function(e){return r.get(e)||null}):void 0,names:f,mappings:c})}};function v(i,r,o,s,v,m){if(null!=n||null!=i){if(n=i,u<r){l=0;do{c+=";"}while(++u<r)}else c&&(c+=",");if(c+=a(o-l),l=o,null!=i){var g=t.index(i);if(c+=a(g-p),p=g,c+=a(s-h),h=s,c+=a(v-d),d=v,e.names&&null!=m){var b=f.index(m);c+=a(b-_),_=b}}}}}}}),e("skylark-uglifyjs/propmangle",["./utils","./ast","./scope"],function(e,n,t){"use strict";const{defaults:i,push_uniq:r,Dictionary:o}=e,{base54:a}=t,{AST_Binary:s,AST_Call:f,AST_ClassPrivateProperty:c,AST_Conditional:u,AST_Dot:l,AST_DotHash:p,AST_ObjectKeyVal:h,AST_ObjectProperty:d,AST_PrivateMethod:_,AST_PrivateGetter:v,AST_PrivateSetter:m,AST_PrivateIn:g,AST_Sequence:b,AST_String:y,AST_Sub:w,TreeWalker:S,_KEY:x,_MANGLEPROP:T,walk:k}=n;function A(){var e=new o;["NaN","null","true","false","Infinity","-Infinity","undefined"].forEach(t),["encodeURI","encodeURIComponent","escape","eval","decodeURI","decodeURIComponent","isFinite","isNaN","parseFloat","parseInt","unescape"].forEach(t);var n=Function("return this")();return["Array","ArrayBuffer","Atomics","BigInt","Boolean","console","DataView","Date","Error","Function","Int8Array","Intl","JSON","Map","Math","Number","Object","Promise","Proxy","Reflect","RegExp","Set","String","Symbol","WebAssembly"].forEach(function(e){t(e);var i=n[e];if(i&&(Object.getOwnPropertyNames(i).map(t),"function"==typeof i)){i.__proto__&&Object.getOwnPropertyNames(i.__proto__).map(t),i.prototype&&Object.getOwnPropertyNames(i.prototype).map(t);try{Object.getOwnPropertyNames(new i).map(t)}catch(e){try{Object.getOwnPropertyNames(i()).map(t)}catch(e){}}}}),(A=function(){return e.clone()})();function t(n){e.set(n,!0)}}function E(e,n){e instanceof u?(E(e.consequent,n),E(e.alternative,n)):e instanceof b?E(e.tail_node(),n):e instanceof y&&n(e.value)}return{mangle_properties:function(e,n){var t=(n=i(n,{builtins:!1,cache:null,debug:!1,domprops:!1,keep_quoted:!1,regex:null,reserved:null},!0)).builtins?new o:A();n.domprops||"undefined"==typeof domprops||domprops.forEach(function(e){t.set(e,!0)});Array.isArray(n.reserved)&&n.reserved.forEach(function(e){t.set(e,!0)});var r,f=-1;n.cache?(r=n.cache.props).each(function(e){t.set(e,!0)}):r=new o;var c,p=n.regex,h=!1!==n.debug;h&&(c=!0===n.debug?"":n.debug);var _=new o,v=t.clone();function m(e){return!v.has(e)&&!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(e)}function g(e){return t.has(e)?(AST_Node.info("Preserving reserved property {this}",e),!1):p&&!p.test(e)?(AST_Node.info("Preserving excluded property {this}",e),!1):r.has(e)||_.has(e)}function x(e){m(e)&&_.set(e,!0),g(e)||v.set(e,!0)}function T(e){if(!g(e))return e;var n=r.get(e);if(!n){if(h){var t="_$"+e+"$"+c+"_";m(t)&&(n=t)}if(!n)do{n=a(++f)}while(!m(n));/^#/.test(e)&&(n="#"+n),r.set(e,n)}return AST_Node.info("Mapping property {name} to {mangled}",{mangled:n,name:e}),n}function k(e){e instanceof b?k(e.tail_node()):e instanceof y?e.value=T(e.value):e instanceof u&&(k(e.consequent),k(e.alternative))}e.walk(new S(function(e){if("Call"==e.TYPE){var n=e.expression;if(n instanceof l)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((n=n.expression)instanceof AST_SymbolRef))break;if("Object"!=n.name)break;if(!n.definition().undeclared)break;E(e.args[1],x);break;case"hasOwnProperty":if(e.args.length<1)break;E(e.args[0],x)}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?E(e.key,x):x(e.key):e instanceof l?is_lhs(e,this.parent())&&x(e.property):e instanceof w&&is_lhs(e,this.parent())&&E(e.property,x)})),e.walk(new S(function(e){if(e instanceof s)"in"==e.operator&&k(e.left);else if("Call"==e.TYPE){var t=e.expression;if(t instanceof l)switch(t.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((t=t.expression)instanceof AST_SymbolRef))break;if("Object"!=t.name)break;if(!t.definition().undeclared)break;k(e.args[1]);break;case"hasOwnProperty":if(e.args.length<1)break;k(e.args[0])}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?k(e.key):e.key=T(e.key):e instanceof l?e.property=T(e.property):e instanceof w&&(n.keep_quoted||k(e.property))}))},reserve_quoted_keys:function(e,n){function t(e){r(n,e)}e.walk(new S(function(e){e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof d?e.key instanceof AST_Node?E(e.key,t):e.start&&e.start.quote&&t(e.key):e instanceof l?e.quoted&&t(e.property):e instanceof w&&E(e.property,t)}))}}}),e("skylark-uglifyjs/minify",["./utils","./ast","./parse","./output","./compress","./sourcemap","./propmangle"],function(e,n,t,i,r,o,a){"use strict";const{defaults:s,HOP:f}=e,{AST_Toplevel:c,AST_Node:u,walk:l,AST_Scope:p}=n,{parse:h}=t,{OutputStream:d}=i,{Compressor:_}=r,{SourceMap:v}=o,{mangle_properties:m,reserve_quoted_keys:g}=a;var b,y;function w(e,n){for(var t=n.end.comments_after,i=t.length;--i>=0;){var r=t[i];if("comment1"!=r.type)break;var o=/^# ([^\s=]+)=(\S+)\s*$/.exec(r.value);if(!o)break;if("sourceMappingURL"==o[1]){if(!(o=/^data:application\/json(;.*?)?;base64,([^,]+)$/.exec(o[2])))break;return b(o[2])}}u.warn("inline source map not found: {name}",{name:e})}function S(e){try{return JSON.parse(e)}catch(n){throw new Error("invalid input source map: "+e)}}function x(e,n,t){t.forEach(function(t){n[t]&&("object"!=typeof n[t]&&(n[t]={}),e in n[t]||(n[t][e]=n[e]))})}function T(e){e&&("props"in e?e.props instanceof Dictionary||(e.props=Dictionary.fromObject(e.props)):e.props=new Dictionary)}function k(e){return{props:e.props.toObject()}}return"undefined"==typeof Buffer?(b=atob,y=btoa):void 0===Buffer.alloc?(b=function(e){return new Buffer(e,"base64").toString()},y=function(e){return new Buffer(e).toString("base64")}):(b=function(e){return Buffer.from(e,"base64").toString()},y=function(e){return Buffer.from(e).toString("base64")}),{minify:function(e,n){try{(n=s(n,{annotations:void 0,compress:{},enclose:!1,expression:!1,ie:!1,ie8:!1,keep_fargs:!1,keep_fnames:!1,mangle:{},module:!1,nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:!(!n||!n.module),v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0)).validate&&u.enable_validation();var t,i=n.timings&&{start:Date.now()};void 0!==n.annotations&&x("annotations",n,["compress","output"]),n.expression&&x("expression",n,["compress","parse"]),n.ie8&&(n.ie=n.ie||n.ie8),n.ie&&x("ie",n,["compress","mangle","output","rename"]),n.keep_fargs&&x("keep_fargs",n,["compress","mangle","rename"]),n.keep_fnames&&x("keep_fnames",n,["compress","mangle","rename"]),n.module&&x("module",n,["compress","parse"]),n.toplevel&&x("toplevel",n,["compress","mangle","rename"]),n.v8&&x("v8",n,["mangle","output","rename"]),n.webkit&&x("webkit",n,["compress","mangle","output","rename"]),n.mangle&&(n.mangle=s(n.mangle,{cache:n.nameCache&&(n.nameCache.vars||{}),eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),n.mangle.properties&&("object"!=typeof n.mangle.properties&&(n.mangle.properties={}),n.mangle.properties.keep_quoted&&(t=n.mangle.properties.reserved,Array.isArray(t)||(t=[]),n.mangle.properties.reserved=t),!n.nameCache||"cache"in n.mangle.properties||(n.mangle.properties.cache=n.nameCache.props||{})),T(n.mangle.cache),T(n.mangle.properties.cache)),void 0===n.rename&&(n.rename=n.compress&&n.mangle),n.sourceMap&&(n.sourceMap=s(n.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0));var r,o=[];if(n.warnings&&u.log_function(function(e){o.push(e)},"verbose"==n.warnings),i&&(i.parse=Date.now()),n.parse=n.parse||{},e instanceof u)r=e;else{"string"==typeof e&&(e=[e]),n.parse.toplevel=null;var a=n.sourceMap&&n.sourceMap.content;for(var l in"string"==typeof a&&"inline"!=a&&(a=S(a)),a&&(n.sourceMap.orig=Object.create(null)),e)if(f(e,l))if(n.parse.filename=l,n.parse.toplevel=r=h(e[l],n.parse),"inline"==a){var p=w(l,r);p&&(n.sourceMap.orig[l]=S(p))}else a&&(n.sourceMap.orig[l]=a)}n.parse.expression&&(r=r.wrap_expression()),t&&g(r,t),["enclose","wrap"].forEach(function(t){var i=n[t];if(i){var o=r.print_to_string().slice(0,-1);r=r[t](i),e[r.start.file]=r.print_to_string().replace(o,"")}}),n.validate&&r.validate_ast(),i&&(i.rename=Date.now()),n.rename&&(r.figure_out_scope(n.rename),r.expand_names(n.rename)),i&&(i.compress=Date.now()),n.compress&&(r=new _(n.compress).compress(r),n.validate&&r.validate_ast()),i&&(i.scope=Date.now()),n.mangle&&r.figure_out_scope(n.mangle),i&&(i.mangle=Date.now()),n.mangle&&(r.compute_char_frequency(n.mangle),r.mangle_names(n.mangle)),i&&(i.properties=Date.now()),t&&g(r,t),n.mangle&&n.mangle.properties&&m(r,n.mangle.properties),n.parse.expression&&(r=r.unwrap_expression()),i&&(i.output=Date.now());var b={},A=s(n.output,{ast:!1,code:!0});if(A.ast&&(b.ast=r),A.code){if(n.sourceMap&&(A.source_map=v(n.sourceMap),n.sourceMap.includeSources)){if(e instanceof c)throw new Error("original source content unavailable");for(var l in e)f(e,l)&&A.source_map.setSourceContent(l,e[l])}delete A.ast,delete A.code;var E=d(A);if(r.print(E),b.code=E.get(),n.sourceMap){b.map=A.source_map.toString();var D=n.sourceMap.url;D&&(b.code=b.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),b.code+="inline"==D?"\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+y(b.map):"\n//# sourceMappingURL="+D)}}return n.nameCache&&n.mangle&&(n.mangle.cache&&(n.nameCache.vars=k(n.mangle.cache)),n.mangle.properties&&n.mangle.properties.cache&&(n.nameCache.props=k(n.mangle.properties.cache))),i&&(i.end=Date.now(),b.timings={parse:.001*(i.rename-i.parse),rename:.001*(i.compress-i.rename),compress:.001*(i.scope-i.compress),scope:.001*(i.mangle-i.scope),mangle:.001*(i.properties-i.mangle),properties:.001*(i.output-i.properties),output:.001*(i.end-i.output),total:.001*(i.end-i.start)}),o.length&&(b.warnings=o),b}catch(e){return{error:e}}finally{u.log_function(),u.disable_validation()}}}}),e("skylark-uglifyjs/main",["./minify"],function(e){return e}),e("skylark-uglifyjs",["skylark-uglifyjs/main"],function(e){return e})}(t),!i){var a=require("skylark-langx-ns");r?module.exports=a:n.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-uglifyjs-all.js.map
