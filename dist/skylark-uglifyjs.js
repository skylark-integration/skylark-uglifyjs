/**
 * skylark-uglifyjs - A version of uglifyjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,n){var t=n.define,require=n.require,i="function"==typeof t&&t.amd,r=!i&&"undefined"!=typeof exports;if(!i&&!t){var o={};t=n.define=function(e,n,t){"function"==typeof t?(o[e]={factory:t,deps:n.map(function(n){return function(e,n){if("."!==e[0])return e;var t=n.split("/"),i=e.split("/");t.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?t.pop():t.push(i[r]));return t.join("/")}(n,e)}),resolved:!1,exports:null},require(e)):o[e]={factory:null,resolved:!0,exports:t}},require=n.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=o[e];if(!module.resolved){var t=[];module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(n,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-uglifyjs/utils",[],function(){"use strict";function e(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(e){return e.stack}}})}function n(e,n){this.message=e,this.defs=n}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.name="DefaultsError",e(n);var t=function(){function e(e,i){for(var r=[],o=0;o<e.length;o++){var a=i(e[o],o);a!==n&&(a instanceof t?r.push.apply(r,a.v):r.push(a))}return r}e.is_op=function(e){return e===n||e instanceof t},e.splice=function(e){return new t(e)};var n=e.skip={};function t(e){this.v=e}return e}();function i(){this.values=Object.create(null)}function r(e,n){return Object.prototype.hasOwnProperty.call(e,n)}return i.prototype={set:function(e,n){return"__proto__"==e?this.proto_value=n:this.values[e]=n,this},add:function(e,n){var t=this.get(e);return t?t.push(n):this.set(e,[n]),this},get:function(e){return"__proto__"==e?this.proto_value:this.values[e]},del:function(e){return"__proto__"==e?delete this.proto_value:delete this.values[e],this},has:function(e){return"__proto__"==e?"proto_value"in this:e in this.values},all:function(e){for(var n in this.values)if(!e(this.values[n],n))return!1;return!("proto_value"in this&&!e(this.proto_value,"__proto__"))},each:function(e){for(var n in this.values)e(this.values[n],n);"proto_value"in this&&e(this.proto_value,"__proto__")},size:function(){return Object.keys(this.values).length+("proto_value"in this)},map:function(e){var n=[];for(var t in this.values)n.push(e(this.values[t],t));return"proto_value"in this&&n.push(e(this.proto_value,"__proto__")),n},clone:function(){var e=new i;return this.each(function(n,t){e.set(t,n)}),e},toObject:function(){var e={};return this.each(function(n,t){e["$"+t]=n}),e}},i.fromObject=function(e){var n=new i;for(var t in e)r(e,t)&&n.set(t.slice(1),e[t]);return n},{characters:function(e){return e.split("")},member:function(e,n){return n.indexOf(e)>=0},find_if:function(e,n){for(var t=n.length;--t>=0;)if(e(n[t]))return n[t]},configure_error_stack:e,defaults:function(e,t,i){if(i)for(var o in e)if(r(e,o)&&!r(t,o))throw new n("`"+o+"` is not a supported option",t);for(var o in e)r(e,o)&&(t[o]=e[o]);return t},DefaultsError:n,noop:function(){},return_false:function(){return!1},return_true:function(){return!0},return_this:function(){return this},return_null:function(){return null},List:t,push_uniq:function(e,n){if(e.indexOf(n)<0)return e.push(n)},string_template:function(e,n){return e.replace(/\{([^{}]+)\}/g,function(e,t){var i="this"==t?n:n[t];return i instanceof AST_Node?i.print_to_string():i instanceof AST_Token?i.file+":"+i.line+","+i.col:i})},remove:function(e,n){var t=e.indexOf(n);t>=0&&e.splice(t,1)},makePredicate:function(e){Array.isArray(e)||(e=e.split(" "));var n=Object.create(null);return e.forEach(function(e){n[e]=!0}),n},all:function(e,n){for(var t=e.length;--t>=0;)if(!n(e[t],t))return!1;return!0},Dictionary:i,HOP:r,DEF_BITPROPS:function(e,n){if(n.length>31)throw new Error("Too many properties: "+n.length+"\n"+n.join(", "));n.forEach(function(n,t){var i=1<<t;Object.defineProperty(e.prototype,n,{get:function(){return!!(this._bits&i)},set:function(e){e?this._bits|=i:this._bits&=~i}})})}}}),e("skylark-uglifyjs/ast",["./utils"],function(e){"use strict";const{HOP:n,List:t,MAP:i,noop:r,DEF_BITPROPS:o,return_true:a,return_this:s}=e;var f;function c(e,t,i,r){void 0===r&&(r=l);var o=t=t?t.split(/\s+/):[];r&&r.PROPS&&(t=t.concat(r.PROPS));var a=["return function AST_",e,"(props){","this._bits=0;","if(props){"];t.forEach(function(e){a.push("this.",e,"=props.",e,";")}),a.push("}");var s=Object.create(r&&r.prototype);(i.initialize||s.initialize)&&a.push("this.initialize();"),a.push("};");var f=new Function(a.join(""))();for(var c in f.prototype=s,f.prototype.CTOR=f,f.prototype.TYPE=f.TYPE=e,r&&(f.BASE=r,r.SUBCLASSES.push(f)),f.DEFMETHOD=function(e,n){this.prototype[e]=n},f.PROPS=t,f.SELF_PROPS=o,f.SUBCLASSES=[],i)n(i,c)&&(/^\$/.test(c)?f[c.substr(1)]=i[c]:f.DEFMETHOD(c,i[c]));return"undefined"!=typeof exports&&(exports["AST_"+e]=f),f}var u=c("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),l=c("Node","start end",{_clone:function(e){if(e){var n=this.clone();return n.transform(new Kn(function(e){if(e!==n)return e.clone(!0)}))}return new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},equals:function(e){return this.TYPE==e.TYPE&&this._equals(e)},walk:function(e){e.visit(this)},_validate:function(){if("Node"==this.TYPE)throw new Error("should not instantiate AST_Node")},validate:function(){var e=this.CTOR;do{e.prototype._validate.call(this)}while(e=e.BASE)},validate_ast:function(){var e={};this.walk(new Wn(function(n){if(n.validate_visited===e)throw new Error(string_template("cannot reuse AST_{TYPE} from [{start}]",n));n.validate_visited=e}))}},null);o(l,["_optimized","_squeezed","call_only","collapse_scanning","defined","evaluating","falsy","in_arg","in_bool","is_undefined","inlined","length_read","nested","new","optional","private","pure","redundant","single_use","static","terminal","truthy","uses_eval","uses_with"]),(l.log_function=function(e,n){if("function"==typeof e){var t=Object.create(null);l.info=n?function(e,n){i("INFO: "+string_template(e,n))}:r,l.warn=function(e,n){i("WARN: "+string_template(e,n))}}else l.info=l.warn=r;function i(n){t[n]||(t[n]=!0,e(n))}})();var p=[];function d(e,n){return e.length==n.length&&all(e,function(e,t){return e.equals(n[t])})}function h(e,n){return e===n||(null==e?null==n:e instanceof l&&n instanceof l&&e.equals(n))}l.enable_validation=function(){l.disable_validation(),function e(i){if(i.SUBCLASSES.forEach(e),n(i.prototype,"transform")){var r=i.prototype.transform;i.prototype.transform=function(e,n){var i=r.call(this,e,n);if(i instanceof l)i.validate();else if(!(null===i||n&&t.is_op(i)))throw new Error("invalid transformed value: "+i);return i},p.push(function(){i.prototype.transform=r})}}(this)},l.disable_validation=function(){for(var e;e=p.pop();)e()};var _=c("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if("Statement"==this.TYPE)throw new Error("should not instantiate AST_Statement")}}),v=c("Debugger",null,{$documentation:"Represents a debugger statement",_equals:a},_),m=c("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_equals:function(e){return this.value==e.value},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},_),g=c("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_equals:a},_);function b(e){return e instanceof _&&!(e instanceof oe)&&!(e instanceof Y)}function y(e,n,t,i,r){if(t=t?"contain":"be",!(e instanceof l))throw new Error(n+" must "+t+" AST_Node");if(e instanceof Me)throw new Error(n+" cannot "+t+" AST_DefaultValue");if(e instanceof nn)throw new Error(n+" cannot "+t+" AST_Destructured");if(e instanceof Hn&&!r)throw new Error(n+" cannot "+t+" AST_Hole");if(e instanceof Ue&&!i)throw new Error(n+" cannot "+t+" AST_Spread");if(b(e))throw new Error(n+" cannot "+t+" AST_Statement");if(e instanceof hn)throw new Error(n+" cannot "+t+" AST_SymbolDeclaration")}function w(e,n){y(e[n],n)}var S=c("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){w(this,"body")}},_),x=c("BlockScope","_var_names enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any inner scopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---\x3e SymbolDef for all variables/functions defined in this scope"},clone:function(e){var n=this._clone(e);return this.enclosed&&(n.enclosed=this.enclosed.slice()),this.functions&&(n.functions=this.functions.clone()),this.variables&&(n.variables=this.variables.clone()),n},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if("BlockScope"==this.TYPE)throw new Error("should not instantiate AST_BlockScope");if(null!=this.parent_scope){if(!(this.parent_scope instanceof x))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof I))throw new Error("must be contained within AST_Scope")}}},_);function T(e,n){e.body.forEach(function(e){e.walk(n)})}var A=c("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},_equals:function(e){return d(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){T(n,e)})},_validate:function(){if("Block"==this.TYPE)throw new Error("should not instantiate AST_Block");this.body.forEach(function(e){if(!b(e))throw new Error("body must contain AST_Statement")})}},x),k=c("BlockStatement",null,{$documentation:"A block statement"},A),E=c("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if("StatementWithBody"==this.TYPE)throw new Error("should not instantiate AST_StatementWithBody");if(!b(this.body))throw new Error("body must be AST_Statement")}},x),D=c("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_equals:function(e){return this.label.equals(e.label)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.label.walk(e),n.body.walk(e)})},clone:function(e){var n=this._clone(e);if(e){var t=n.label,i=this.label;n.walk(new Wn(function(e){if(e instanceof ve){if(!e.label||e.label.thedef!==i)return;return e.label.thedef=t,t.references.push(e),!0}if(e instanceof I)return!0}))}return n},_validate:function(){if(!(this.label instanceof An))throw new Error("label must be AST_Label")}},E),O=c("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if("IterationStatement"==this.TYPE)throw new Error("should not instantiate AST_IterationStatement")}},E),q=c("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)},_validate:function(){if("DWLoop"==this.TYPE)throw new Error("should not instantiate AST_DWLoop");w(this,"condition")}},O),C=c("Do",null,{$documentation:"A `do` statement",walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e),n.condition.walk(e)})}},q),F=c("While",null,{$documentation:"A `while` statement",walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e)})}},q),$=c("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_equals:function(e){return h(this.init,e.init)&&h(this.condition,e.condition)&&h(this.step,e.step)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.init&&n.init.walk(e),n.condition&&n.condition.walk(e),n.step&&n.step.walk(e),n.body.walk(e)})},_validate:function(){if(null!=this.init){if(!(this.init instanceof l))throw new Error("init must be AST_Node");if(b(this.init)&&!(this.init instanceof Ee))throw new Error("init cannot be AST_Statement")}null!=this.condition&&w(this,"condition"),null!=this.step&&w(this,"step")}},O),P=c("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},_equals:function(e){return this.init.equals(e.init)&&this.object.equals(e.object)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.init.walk(e),n.object.walk(e),n.body.walk(e)})},_validate:function(){if("ForEnumeration"==this.TYPE)throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof Ee){if(1!=this.init.definitions.length)throw new Error("init must have single declaration")}else tn(this.init,function(e){if(!(e instanceof Be||e instanceof kn))throw new Error("init must be assignable: "+e.TYPE)});w(this,"object")}},O),j=c("ForIn",null,{$documentation:"A `for ... in` statement"},P),z=c("ForOf",null,{$documentation:"A `for ... of` statement"},P),M=c("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},z),N=c("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_equals:function(e){return this.expression.equals(e.expression)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.body.walk(e)})},_validate:function(){w(this,"expression")}},E),I=c("Scope","fn_defs may_call_this uses_eval uses_with",{$documentation:"Base class for all statements introducing a lambda scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:s,_validate:function(){if("Scope"==this.TYPE)throw new Error("should not instantiate AST_Scope")}},A),R=c("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---\x3e SymbolDef for all undeclared names"},wrap:function(e){var n=this.body;return f.parse(["(function(exports){'$ORIG';})(typeof ",e,"=='undefined'?(",e,"={}):",e,");"].join(""),{filename:"wrap="+JSON.stringify(e)}).transform(new Kn(function(e){if(e instanceof m&&"$ORIG"==e.value)return t.splice(n)}))},enclose:function(e){"string"!=typeof e&&(e="");var n=e.indexOf(":");n<0&&(n=e.length);var i=this.body;return f.parse(["(function(",e.slice(0,n),'){"$ORIG"})(',e.slice(n+1),")"].join(""),{filename:"enclose="+JSON.stringify(e)}).transform(new Kn(function(e){if(e instanceof m&&"$ORIG"==e.value)return t.splice(i)}))}},I),L=c("ClassInitBlock",null,{$documentation:"Value for `class` static initialization blocks"},I),B=c("Lambda","argnames length_read rest safe_ids uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean|number/S] whether this function accesses the arguments array"},each_argname:function(e){var n=new Wn(function(t){return t instanceof Me?(t.name.walk(n),!0):t instanceof on?(t.value.walk(n),!0):void(t instanceof bn&&e(t))});this.argnames.forEach(function(e){e.walk(n)}),this.rest&&this.rest.walk(n)},_equals:function(e){return h(this.rest,e.rest)&&h(this.name,e.name)&&h(this.value,e.value)&&d(this.argnames,e.argnames)&&d(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.name&&n.name.walk(e),n.argnames.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e),T(n,e)})},_validate:function(){if("Lambda"==this.TYPE)throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(e){tn(e,function(e){if(!(e instanceof bn))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),null!=this.rest&&tn(this.rest,function(e){if(!(e instanceof bn))throw new Error("rest must be AST_SymbolFunarg")})}},I),H=c("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(null!=this.name)throw new Error("name must be null")}},B),Y=c("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if("LambdaExpression"==this.TYPE)throw new Error("should not instantiate AST_LambdaExpression")}},B);function U(e){return e instanceof V||e instanceof G}var V=c("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(e){var n=this;e.visit(n,function(){n.argnames.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e),n.value?n.value.walk(e):T(n,e)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(w(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},Y),G=c("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(e){var n=this;e.visit(n,function(){n.argnames.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e),n.value?n.value.walk(e):T(n,e)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(w(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},Y),W=c("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof wn))throw new Error("name must be AST_SymbolLambda")}},Y),K=c("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof wn))throw new Error("name must be AST_SymbolLambda")}},Y),J=c("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof wn))throw new Error("name must be AST_SymbolLambda")}},Y),X=c("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof wn))throw new Error("name must be AST_SymbolLambda")}},Y),Q=c("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if("LambdaDefinition"==this.TYPE)throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof yn))throw new Error("name must be AST_SymbolDefun")}},B),Z=c("AsyncDefun",null,{$documentation:"An asynchronous function definition"},Q),ee=c("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},Q),ne=c("Defun",null,{$documentation:"A function definition"},Q),te=c("GeneratorDefun",null,{$documentation:"A generator function definition"},Q),ie=c("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},_equals:function(e){return h(this.name,e.name)&&h(this.extends,e.extends)&&d(this.properties,e.properties)},resolve:function(e){return e?this:this.parent_scope.resolve()},walk:function(e){var n=this;e.visit(n,function(){n.name&&n.name.walk(e),n.extends&&n.extends.walk(e),n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){if("Class"==this.TYPE)throw new Error("should not instantiate AST_Class");null!=this.extends&&w(this,"extends"),this.properties.forEach(function(e){if(!(e instanceof ae))throw new Error("properties must contain AST_ClassProperty")})}},x),re=c("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof Sn))throw new Error("name must be AST_SymbolDefClass")}},ie),oe=c("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof xn))throw new Error("name must be AST_SymbolClass")}},ie),ae=c("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node?] property name (AST_Node for computed property, null for initialization block)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},_equals:function(e){return!this.private==!e.private&&!this.static==!e.static&&h(this.key,e.key)&&h(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof l&&n.key.walk(e),n.value&&n.value.walk(e)})},_validate:function(){if("ClassProperty"==this.TYPE)throw new Error("should not instantiate AST_ClassProperty");if(this instanceof le){if(null!=this.key)throw new Error("key must be null")}else if("string"!=typeof this.key){if(!(this.key instanceof l))throw new Error("key must be string or AST_Node");w(this,"key")}if(null!=this.value&&!(this.value instanceof l))throw new Error("value must be AST_Node")}}),se=c("ClassField",null,{$documentation:"A `class` field",_validate:function(){null!=this.value&&w(this,"value")}},ae),fe=c("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof H))throw new Error("value must be AST_Accessor")}},ae),ce=c("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof H))throw new Error("value must be AST_Accessor")}},ae),ue=c("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof Y))throw new Error("value must be AST_LambdaExpression");if(U(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of class method's lambda must be null")}},ae),le=c("ClassInit",null,{$documentation:"A `class` static initialization block",_validate:function(){if(!this.static)throw new Error("static must be true");if(!(this.value instanceof L))throw new Error("value must be AST_ClassInitBlock")},initialize:function(){this.static=!0}},ae),pe=c("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if("Jump"==this.TYPE)throw new Error("should not instantiate AST_Jump")}},_),de=c("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_equals:function(e){return h(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.value&&n.value.walk(e)})},_validate:function(){if("Exit"==this.TYPE)throw new Error("should not instantiate AST_Exit")}},pe),he=c("Return",null,{$documentation:"A `return` statement",_validate:function(){null!=this.value&&w(this,"value")}},de),_e=c("Throw",null,{$documentation:"A `throw` statement",_validate:function(){w(this,"value")}},de),ve=c("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_equals:function(e){return h(this.label,e.label)},walk:function(e){var n=this;e.visit(n,function(){n.label&&n.label.walk(e)})},_validate:function(){if("LoopControl"==this.TYPE)throw new Error("should not instantiate AST_LoopControl");if(null!=this.label&&!(this.label instanceof Dn))throw new Error("label must be AST_LabelRef")}},pe),me=c("Break",null,{$documentation:"A `break` statement"},ve),ge=c("Continue",null,{$documentation:"A `continue` statement"},ve),be=c("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)&&h(this.alternative,e.alternative)},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e),n.alternative&&n.alternative.walk(e)})},_validate:function(){if(w(this,"condition"),null!=this.alternative&&!b(this.alternative))throw new Error("alternative must be AST_Statement")}},E),ye=c("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_equals:function(e){return this.expression.equals(e.expression)&&d(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),T(n,e)})},_validate:function(){w(this,"expression"),this.body.forEach(function(e){if(!(e instanceof we))throw new Error("body must be AST_SwitchBranch[]")})}},A),we=c("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if("SwitchBranch"==this.TYPE)throw new Error("should not instantiate AST_SwitchBranch")}},A),Se=c("Default",null,{$documentation:"A `default` switch branch"},we),xe=c("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_equals:function(e){return this.expression.equals(e.expression)&&d(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),T(n,e)})},_validate:function(){w(this,"expression")}},we),Te=c("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_equals:function(e){return d(this.body,e.body)&&h(this.bcatch,e.bcatch)&&h(this.bfinally,e.bfinally)},walk:function(e){var n=this;e.visit(n,function(){T(n,e),n.bcatch&&n.bcatch.walk(e),n.bfinally&&n.bfinally.walk(e)})},_validate:function(){if(null!=this.bcatch&&!(this.bcatch instanceof Ae))throw new Error("bcatch must be AST_Catch");if(null!=this.bfinally&&!(this.bfinally instanceof ke))throw new Error("bfinally must be AST_Finally")}},A),Ae=c("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},_equals:function(e){return h(this.argname,e.argname)&&d(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.argname&&n.argname.walk(e),T(n,e)})},_validate:function(){null!=this.argname&&tn(this.argname,function(e){if(!(e instanceof Tn))throw new Error("argname must be AST_SymbolCatch")})}},A),ke=c("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},A),Ee=c("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_equals:function(e){return d(this.definitions,e.definitions)},walk:function(e){var n=this;e.visit(n,function(){n.definitions.forEach(function(n){n.walk(e)})})},_validate:function(){if("Definitions"==this.TYPE)throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},_),De=c("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof Ce))throw new Error("definitions must be AST_VarDef[]");tn(e.name,function(e){if(!(e instanceof _n))throw new Error("name must be AST_SymbolConst")})})}},Ee),Oe=c("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof Ce))throw new Error("definitions must be AST_VarDef[]");tn(e.name,function(e){if(!(e instanceof mn))throw new Error("name must be AST_SymbolLet")})})}},Ee),qe=c("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof Ce))throw new Error("definitions must be AST_VarDef[]");tn(e.name,function(e){if(!(e instanceof gn))throw new Error("name must be AST_SymbolVar")})})}},Ee),Ce=c("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_equals:function(e){return this.name.equals(e.name)&&h(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value&&n.value.walk(e)})},_validate:function(){null!=this.value&&w(this,"value")}}),Fe=c("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){if(!(this.body instanceof re||this.body instanceof Ee||this.body instanceof Q))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},_),$e=c("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){this.body instanceof re||this.body instanceof Q||w(this,"body")}},_),Pe=c("ExportForeign","aliases keys path",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[AST_String*] array of aliases to export",keys:"[AST_String*] array of keys to import",path:"[AST_String] the path to import module"},_equals:function(e){return this.path.equals(e.path)&&d(this.aliases,e.aliases)&&d(this.keys,e.keys)},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(e){if(!(e instanceof jn))throw new Error("aliases must contain AST_String")}),this.keys.forEach(function(e){if(!(e instanceof jn))throw new Error("keys must contain AST_String")}),!(this.path instanceof jn))throw new Error("path must be AST_String")}},_),je=c("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},_equals:function(e){return d(this.properties,e.properties)},walk:function(e){var n=this;e.visit(n,function(){n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof En))throw new Error("properties must contain AST_SymbolExport")})}},_),ze=c("Import","all default path properties",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[AST_String] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified"},_equals:function(e){return this.path.equals(e.path)&&h(this.all,e.all)&&h(this.default,e.default)&&!this.properties==!e.properties&&(!this.properties||d(this.properties,e.properties))},walk:function(e){var n=this;e.visit(n,function(){n.all&&n.all.walk(e),n.default&&n.default.walk(e),n.properties&&n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){if(null!=this.all){if(!(this.all instanceof vn))throw new Error("all must be AST_SymbolImport");if(null!=this.properties)throw new Error("cannot import both * and {} in the same statement")}if(null!=this.default){if(!(this.default instanceof vn))throw new Error("default must be AST_SymbolImport");if(""!==this.default.key.value)throw new Error("invalid default key: "+this.default.key.value)}if(!(this.path instanceof jn))throw new Error("path must be AST_String");null!=this.properties&&this.properties.forEach(function(e){if(!(e instanceof vn))throw new Error("properties must contain AST_SymbolImport")})}},_),Me=c("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},_equals:function(e){return this.name.equals(e.name)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value.walk(e)})},_validate:function(){w(this,"value")}});function Ne(e,n,t,i){e[n].forEach(function(e){y(e,n,!0,t,i)})}var Ie=c("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[boolean/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&this.expression.equals(e.expression)&&d(this.args,e.args)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.args.forEach(function(n){n.walk(e)})})},_validate:function(){w(this,"expression"),Ne(this,"args",!0)}}),Re=c("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},Ie),Le=c("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_equals:function(e){return d(this.expressions,e.expressions)},walk:function(e){var n=this;e.visit(n,function(){n.expressions.forEach(function(n){n.walk(e)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");Ne(this,"expressions")}});var Be=c("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&h(this.property,e.property)&&this.expression.equals(e.expression)},get_property:function(){var e=this.property;return e instanceof Pn?e.value:e instanceof Ge&&"void"==e.operator&&e.expression instanceof Pn?void 0:e},_validate:function(){if("PropAccess"==this.TYPE)throw new Error("should not instantiate AST_PropAccess");w(this,"expression")}}),He=c("Dot","quoted",{$documentation:"A dotted property access expression",$propdoc:{quoted:"[boolean] whether property is transformed from a quoted string"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("string"!=typeof this.property)throw new Error("property must be string")}},Be),Ye=c("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.property.walk(e)})},_validate:function(){w(this,"property")}},Be),Ue=c("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){w(this,"expression")}}),Ve=c("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_equals:function(e){return this.operator==e.operator&&this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("Unary"==this.TYPE)throw new Error("should not instantiate AST_Unary");if("string"!=typeof this.operator)throw new Error("operator must be string");w(this,"expression")}}),Ge=c("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},Ve),We=c("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},Ve),Ke=c("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_equals:function(e){return this.operator==e.operator&&this.left.equals(e.left)&&this.right.equals(e.right)},walk:function(e){var n=this;e.visit(n,function(){n.left.walk(e),n.right.walk(e)})},_validate:function(){if(this instanceof Xe||w(this,"left"),"string"!=typeof this.operator)throw new Error("operator must be string");w(this,"right")}}),Je=c("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_equals:function(e){return this.condition.equals(e.condition)&&this.consequent.equals(e.consequent)&&this.alternative.equals(e.alternative)},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.consequent.walk(e),n.alternative.walk(e)})},_validate:function(){w(this,"condition"),w(this,"consequent"),w(this,"alternative")}}),Xe=c("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof nn){if("="!=this.operator)throw new Error("invalid destructuring operator: "+this.operator);tn(this.left,function(e){if(!(e instanceof Be||e instanceof kn))throw new Error("left must be assignable: "+e.TYPE)})}else if(!(this.left instanceof Yn||this.left instanceof Ln||this.left instanceof Be&&!this.left.optional||this.left instanceof kn||this.left instanceof Bn))throw new Error("left must be assignable")}},Ke),Qe=c("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){w(this,"expression")}}),Ze=c("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},_equals:function(e){return!this.nested==!e.nested&&h(this.expression,e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression&&n.expression.walk(e)})},_validate:function(){if(null!=this.expression)w(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),en=c("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_equals:function(e){return d(this.elements,e.elements)},walk:function(e){var n=this;e.visit(n,function(){n.elements.forEach(function(n){n.walk(e)})})},_validate:function(){Ne(this,"elements",!0,!0)}}),nn=c("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if("Destructured"==this.TYPE)throw new Error("should not instantiate AST_Destructured")}});function tn(e,n,t){if(e instanceof Me&&t)return tn(e.name,n);if(e instanceof nn){if(null!=e.rest&&tn(e.rest,n),e instanceof rn)return e.elements.forEach(function(e){e instanceof Hn||tn(e,n,!0)});if(e instanceof an)return e.properties.forEach(function(e){tn(e.value,n,!0)})}n(e)}var rn=c("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},_equals:function(e){return h(this.rest,e.rest)&&d(this.elements,e.elements)},walk:function(e){var n=this;e.visit(n,function(){n.elements.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e)})}},nn),on=c("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},_equals:function(e){return h(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof l&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("string"!=typeof this.key){if(!(this.key instanceof l))throw new Error("key must be string or AST_Node");w(this,"key")}if(!(this.value instanceof l))throw new Error("value must be AST_Node")}}),an=c("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},_equals:function(e){return h(this.rest,e.rest)&&d(this.properties,e.properties)},walk:function(e){var n=this;e.visit(n,function(){n.properties.forEach(function(n){n.walk(e)}),n.rest&&n.rest.walk(e)})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof on))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},nn),sn=c("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},_equals:function(e){return d(this.properties,e.properties)},walk:function(e){var n=this;e.visit(n,function(){n.properties.forEach(function(n){n.walk(e)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof fn||e instanceof Ue))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),fn=c("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},_equals:function(e){return h(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof l&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("ObjectProperty"==this.TYPE)throw new Error("should not instantiate AST_ObjectProperty");if("string"!=typeof this.key){if(!(this.key instanceof l))throw new Error("key must be string or AST_Node");w(this,"key")}if(!(this.value instanceof l))throw new Error("value must be AST_Node")}}),cn=c("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){w(this,"value")}},fn),un=c("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof Y))throw new Error("value must be AST_LambdaExpression");if(U(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of object method's lambda must be null")}},cn),ln=c("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof H))throw new Error("value must be AST_Accessor")}},fn),pn=c("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof H))throw new Error("value must be AST_Accessor")}},fn),dn=c("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_equals:function(e){return this.thedef?this.thedef===e.thedef:this.name==e.name},_validate:function(){if("Symbol"==this.TYPE)throw new Error("should not instantiate AST_Symbol");if("string"!=typeof this.name)throw new Error("name must be string")}}),hn=c("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},dn),_n=c("SymbolConst",null,{$documentation:"Symbol defining a constant"},hn),vn=c("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[AST_String] the original `export` name"},_equals:function(e){return this.name==e.name&&this.key.equals(e.key)},_validate:function(){if(!(this.key instanceof jn))throw new Error("key must be AST_String")}},_n),mn=c("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},hn),gn=c("SymbolVar",null,{$documentation:"Symbol defining a variable"},hn),bn=c("SymbolFunarg","unused",{$documentation:"Symbol naming a function argument"},gn),yn=c("SymbolDefun",null,{$documentation:"Symbol defining a function"},hn),wn=c("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},hn),Sn=c("SymbolDefClass",null,{$documentation:"Symbol defining a class"},_n),xn=c("SymbolClass",null,{$documentation:"Symbol naming a class expression"},_n),Tn=c("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},hn),An=c("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},dn),kn=c("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},dn),En=c("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[AST_String] the `export` alias"},_equals:function(e){return this.name==e.name&&this.alias.equals(e.alias)},_validate:function(){if(!(this.alias instanceof jn))throw new Error("alias must be AST_String")}},kn),Dn=c("LabelRef",null,{$documentation:"Reference to a label symbol"},dn),On=c("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_equals:a,_validate:function(){if("ObjectIdentity"==this.TYPE)throw new Error("should not instantiate AST_ObjectIdentity")}},dn),qn=c("Super",null,{$documentation:"The `super` symbol",_validate:function(){if("super"!==this.name)throw new Error('name must be "super"')}},On),Cn=c("This",null,{$documentation:"The `this` symbol",_validate:function(){if("This"==this.TYPE&&"this"!==this.name)throw new Error('name must be "this"')}},On),Fn=c("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if("new.target"!==this.name)throw new Error('name must be "new.target": '+this.name)}},Cn),$n=c("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node?] tag function, or null if absent"},_equals:function(e){return h(this.tag,e.tag)&&(n=this.strings,t=e.strings,n.length==t.length&&all(n,function(e,n){return e==t[n]}))&&d(this.expressions,e.expressions);var n,t},walk:function(e){var n=this;e.visit(n,function(){n.tag&&n.tag.walk(e),n.expressions.forEach(function(n){n.walk(e)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");Ne(this,"expressions"),this.strings.forEach(function(e){if("string"!=typeof e)throw new Error("strings must contain string")}),null!=this.tag&&w(this,"tag")}}),Pn=c("Constant",null,{$documentation:"Base class for all constants",_equals:function(e){return this.value===e.value},_validate:function(){if("Constant"==this.TYPE)throw new Error("should not instantiate AST_Constant")}}),jn=c("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},Pn),zn=c("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if("number"!=typeof this.value)throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},Pn),Mn=c("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if("string"!=typeof this.value)throw new Error("value must be string");if("-"==this.value[0])throw new Error("value cannot be negative")}},Pn),Nn=c("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_equals:function(e){return""+this.value==""+e.value},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},Pn),In=c("Atom",null,{$documentation:"Base class for atoms",_equals:a,_validate:function(){if("Atom"==this.TYPE)throw new Error("should not instantiate AST_Atom")}},Pn),Rn=c("Null",null,{$documentation:"The `null` atom",value:null},In),Ln=c("NaN",null,{$documentation:"The impossible value",value:NaN},In),Bn=c("Undefined",null,{$documentation:"The `undefined` value",value:void 0},In),Hn=c("Hole",null,{$documentation:"A hole in an array",value:void 0},In),Yn=c("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},In),Un=c("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if("Boolean"==this.TYPE)throw new Error("should not instantiate AST_Boolean")}},In),Vn=c("False",null,{$documentation:"The `false` atom",value:!1},Un),Gn=c("True",null,{$documentation:"The `true` atom",value:!0},Un);function Wn(e){this.callback=e,this.directives=Object.create(null),this.stack=[]}function Kn(e,n){Wn.call(this),this.before=e,this.after=n}return Wn.prototype={visit:function(e,n){this.push(e);var t=this.callback(e,n||r);!t&&n&&n(),this.pop()},parent:function(e){return this.stack[this.stack.length-2-(e||0)]},push:function(e){var n;e instanceof ie?(this.directives=Object.create(this.directives),n="use strict"):e instanceof m?n=e.value:e instanceof B&&(this.directives=Object.create(this.directives)),n&&!this.directives[n]&&(this.directives[n]=e),this.stack.push(e)},pop:function(){var e=this.stack.pop();(e instanceof ie||e instanceof B)&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(e){for(var n=this.stack,t=n.length-1;--t>=0;){var i=n[t];if(i instanceof e)return i}},has_directive:function(e){var n=this.directives[e];if(n)return n;var t=this.stack[this.stack.length-1];if(t instanceof I)for(var i=0;i<t.body.length;++i){var r=t.body[i];if(!(r instanceof m))break;if(r.value==e)return r}},loopcontrol_target:function(e){var n=this.stack;if(e.label)for(var t=n.length;--t>=0;){var i=n[t];if(i instanceof D&&i.label.name==e.label.name)return i.body}else for(var t=n.length;--t>=0;){var i=n[t];if(i instanceof O||e instanceof me&&i instanceof ye)return i}},in_boolean_context:function(){for(var e,n=!0,t=0,i=this.self();e=this.parent(t++);i=e){if(e instanceof Ke)switch(e.operator){case"&&":case"||":e.left===i&&(n=!1);continue;default:return!1}if(!(e instanceof Je)){if(e instanceof q)return e.condition===i;if(e instanceof $)return e.condition===i;if(e instanceof be)return e.condition===i;if(e instanceof he){if(e.in_bool)return!0;for(;e=this.parent(t++);)if(e instanceof B){if(e.name)return!1;if("Call"!=(e=this.parent(t++)).TYPE)return!1;break}}if(e instanceof Le){if(e.tail_node()===i)continue;return!n||"d"}return e instanceof S?!n||"d":e instanceof Ge&&"!"==e.operator}if(e.condition===i)return!0}}},Kn.prototype=new Wn,function(e){function n(e,n){return t(e,function(e){return e.transform(n,!0)})}function i(e,t){e.argnames=n(e.argnames,t),e.rest&&(e.rest=e.rest.transform(t)),e.value?e.value=e.value.transform(t):e.body=n(e.body,t)}e(l,r),e(D,function(e,n){e.label=e.label.transform(n),e.body=e.body.transform(n)}),e(S,function(e,n){e.body=e.body.transform(n)}),e(A,function(e,t){e.body=n(e.body,t)}),e(C,function(e,n){e.body=e.body.transform(n),e.condition=e.condition.transform(n)}),e(F,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n)}),e($,function(e,n){e.init&&(e.init=e.init.transform(n)),e.condition&&(e.condition=e.condition.transform(n)),e.step&&(e.step=e.step.transform(n)),e.body=e.body.transform(n)}),e(P,function(e,n){e.init=e.init.transform(n),e.object=e.object.transform(n),e.body=e.body.transform(n)}),e(N,function(e,n){e.expression=e.expression.transform(n),e.body=e.body.transform(n)}),e(de,function(e,n){e.value&&(e.value=e.value.transform(n))}),e(ve,function(e,n){e.label&&(e.label=e.label.transform(n))}),e(be,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n),e.alternative&&(e.alternative=e.alternative.transform(n))}),e(ye,function(e,t){e.expression=e.expression.transform(t),e.body=n(e.body,t)}),e(xe,function(e,t){e.expression=e.expression.transform(t),e.body=n(e.body,t)}),e(Te,function(e,t){e.body=n(e.body,t),e.bcatch&&(e.bcatch=e.bcatch.transform(t)),e.bfinally&&(e.bfinally=e.bfinally.transform(t))}),e(Ae,function(e,t){e.argname&&(e.argname=e.argname.transform(t)),e.body=n(e.body,t)}),e(Ee,function(e,t){e.definitions=n(e.definitions,t)}),e(Ce,function(e,n){e.name=e.name.transform(n),e.value&&(e.value=e.value.transform(n))}),e(Me,function(e,n){e.name=e.name.transform(n),e.value=e.value.transform(n)}),e(B,function(e,t){e.name&&(e.name=e.name.transform(t)),e.argnames=n(e.argnames,t),e.rest&&(e.rest=e.rest.transform(t)),e.body=n(e.body,t)}),e(V,i),e(G,i),e(ie,function(e,t){e.name&&(e.name=e.name.transform(t)),e.extends&&(e.extends=e.extends.transform(t)),e.properties=n(e.properties,t)}),e(ae,function(e,n){e.key instanceof l&&(e.key=e.key.transform(n)),e.value&&(e.value=e.value.transform(n))}),e(Ie,function(e,t){e.expression=e.expression.transform(t),e.args=n(e.args,t)}),e(Le,function(e,t){e.expressions=n(e.expressions,t)}),e(Qe,function(e,n){e.expression=e.expression.transform(n)}),e(Ze,function(e,n){e.expression&&(e.expression=e.expression.transform(n))}),e(He,function(e,n){e.expression=e.expression.transform(n)}),e(Ye,function(e,n){e.expression=e.expression.transform(n),e.property=e.property.transform(n)}),e(Ue,function(e,n){e.expression=e.expression.transform(n)}),e(Ve,function(e,n){e.expression=e.expression.transform(n)}),e(Ke,function(e,n){e.left=e.left.transform(n),e.right=e.right.transform(n)}),e(Je,function(e,n){e.condition=e.condition.transform(n),e.consequent=e.consequent.transform(n),e.alternative=e.alternative.transform(n)}),e(en,function(e,t){e.elements=n(e.elements,t)}),e(rn,function(e,t){e.elements=n(e.elements,t),e.rest&&(e.rest=e.rest.transform(t))}),e(on,function(e,n){e.key instanceof l&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),e(an,function(e,t){e.properties=n(e.properties,t),e.rest&&(e.rest=e.rest.transform(t))}),e(sn,function(e,t){e.properties=n(e.properties,t)}),e(fn,function(e,n){e.key instanceof l&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),e(Fe,function(e,n){e.body=e.body.transform(n)}),e($e,function(e,n){e.body=e.body.transform(n)}),e(je,function(e,t){e.properties=n(e.properties,t)}),e(ze,function(e,t){e.all&&(e.all=e.all.transform(t)),e.default&&(e.default=e.default.transform(t)),e.properties&&(e.properties=n(e.properties,t))}),e($n,function(e,t){e.tag&&(e.tag=e.tag.transform(t)),e.expressions=n(e.expressions,t)})}(function(e,n){e.DEFMETHOD("transform",function(e,t){var i,r;return e.push(this),e.before&&(i=e.before(this,n,t)),void 0===i&&(n(i=this,e),e.after&&void 0!==(r=e.after(i,t))&&(i=r)),e.pop(),i})}),f={parse:null,DEFNODE:c,AST_Token:u,AST_Node:l,AST_Statement:_,AST_Debugger:v,AST_Directive:m,AST_EmptyStatement:g,AST_SimpleStatement:S,AST_BlockScope:x,AST_Block:A,AST_BlockStatement:k,AST_StatementWithBody:E,AST_LabeledStatement:D,AST_IterationStatement:O,AST_DWLoop:q,AST_Do:C,AST_While:F,AST_For:$,AST_ForEnumeration:P,AST_ForIn:j,AST_ForOf:z,AST_ForAwaitOf:M,AST_With:N,AST_Scope:I,AST_Toplevel:R,AST_ClassInitBlock:L,AST_Lambda:B,AST_Accessor:H,AST_LambdaExpression:Y,AST_Arrow:V,AST_AsyncArrow:G,AST_AsyncFunction:W,AST_Function:J,AST_GeneratorFunction:X,AST_AsyncGeneratorFunction:K,AST_LambdaDefinition:Q,AST_AsyncDefun:Z,AST_AsyncGeneratorDefun:ee,AST_Defun:ne,AST_GeneratorDefun:te,AST_Class:ie,AST_DefClass:re,AST_ClassExpression:oe,AST_ClassProperty:ae,AST_ClassField:se,AST_ClassGetter:fe,AST_ClassSetter:ce,AST_ClassMethod:ue,AST_ClassInit:le,AST_Jump:pe,AST_Exit:de,AST_Return:he,AST_Throw:_e,AST_LoopControl:ve,AST_Break:me,AST_Continue:ge,AST_If:be,AST_Switch:ye,AST_SwitchBranch:we,AST_Default:Se,AST_Case:xe,AST_Try:Te,AST_Catch:Ae,AST_Finally:ke,AST_Definitions:Ee,AST_Const:De,AST_Let:Oe,AST_Var:qe,AST_VarDef:Ce,AST_ExportDeclaration:Fe,AST_ExportDefault:$e,AST_ExportForeign:Pe,AST_ExportReferences:je,AST_Import:ze,AST_DefaultValue:Me,AST_Call:Ie,AST_New:Re,AST_Sequence:Le,AST_PropAccess:Be,AST_Dot:He,AST_Sub:Ye,AST_Spread:Ue,AST_Unary:Ve,AST_UnaryPrefix:Ge,AST_UnaryPostfix:We,AST_Binary:Ke,AST_Conditional:Je,AST_Assign:Xe,AST_Await:Qe,AST_Yield:Ze,AST_Array:en,AST_Destructured:nn,AST_DestructuredArray:rn,AST_DestructuredKeyVal:on,AST_DestructuredObject:an,AST_Object:sn,AST_ObjectProperty:fn,AST_ObjectKeyVal:cn,AST_ObjectMethod:un,AST_ObjectSetter:ln,AST_ObjectGetter:pn,AST_Symbol:dn,AST_SymbolDeclaration:hn,AST_SymbolConst:_n,AST_SymbolImport:vn,AST_SymbolLet:mn,AST_SymbolVar:gn,AST_SymbolFunarg:bn,AST_SymbolDefun:yn,AST_SymbolLambda:wn,AST_SymbolDefClass:Sn,AST_SymbolClass:xn,AST_SymbolCatch:Tn,AST_Label:An,AST_SymbolRef:kn,AST_SymbolExport:En,AST_LabelRef:Dn,AST_ObjectIdentity:On,AST_Super:qn,AST_This:Cn,AST_NewTarget:Fn,AST_Template:$n,AST_Constant:Pn,AST_String:jn,AST_Number:zn,AST_BigInt:Mn,AST_RegExp:Nn,AST_Atom:In,AST_Null:Rn,AST_NaN:Ln,AST_Undefined:Bn,AST_Hole:Hn,AST_Infinity:Yn,AST_Boolean:Un,AST_False:Vn,AST_True:Gn,first_in_statement:function(e,n,t){for(var i,r=e.parent(-1),o=0;i=e.parent(o++);r=i){if(U(i))return n&&i.value===r;if(i instanceof Ke){if(i.left===r)continue}else if("Call"==i.TYPE){if(i.expression===r)continue}else if(i instanceof Je){if(i.condition===r)continue}else{if(i instanceof $e)return t;if(i instanceof Be){if(i.expression===r)continue}else if(i instanceof Le){if(i.expressions[0]===r)continue}else{if(i instanceof S)return!0;if(i instanceof $n){if(i.tag===r)continue}else if(i instanceof We&&i.expression===r)continue}}return!1}},is_arrow:U,is_generator:function(e){return e instanceof ee||e instanceof K||e instanceof te||e instanceof X},walk_lambda:function(e,n){U(e)&&e.value?e.value.walk(n):T(e,n)},walk_body:T,TreeWalker:Wn,TreeTransformer:Kn}}),e("skylark-uglifyjs/parse",["./utils","./ast"],function(e,n){"use strict";const{characters:t,defaults:i,makePredicate:r,set_annotation:o,configure_error_stack:a,HOP:s,all:f}=e,{AST_Accessor:c,AST_Array:u,AST_Arrow:l,AST_Assign:p,AST_Await:d,AST_BigInt:h,AST_Binary:_,AST_BlockStatement:v,AST_Break:m,AST_Call:g,AST_Case:b,AST_Catch:y,AST_Chain:w,AST_ClassExpression:S,AST_ClassPrivateProperty:x,AST_ClassProperty:T,AST_ClassStaticBlock:A,AST_ConciseMethod:k,AST_PrivateIn:E,AST_PrivateGetter:D,AST_PrivateMethod:O,AST_PrivateSetter:q,AST_Conditional:C,AST_Const:F,AST_Continue:$,AST_Debugger:P,AST_Default:j,AST_DefaultAssign:z,AST_DefClass:M,AST_Definitions:N,AST_Defun:I,AST_Destructuring:R,AST_Directive:L,AST_Do:B,AST_Dot:H,AST_DotHash:Y,AST_EmptyStatement:U,AST_Expansion:V,AST_Export:G,AST_False:W,AST_Finally:K,AST_For:J,AST_ForIn:X,AST_ForOf:Q,AST_Function:Z,AST_Hole:ee,AST_If:ne,AST_Import:te,AST_ImportMeta:ie,AST_IterationStatement:re,AST_Label:oe,AST_LabeledStatement:ae,AST_LabelRef:se,AST_Let:fe,AST_NameMapping:ce,AST_New:ue,AST_NewTarget:le,AST_Node:pe,AST_Null:de,AST_Number:he,AST_Object:_e,AST_ObjectGetter:ve,AST_ObjectKeyVal:me,AST_ObjectProperty:ge,AST_ObjectSetter:be,AST_PrefixedTemplateString:ye,AST_PropAccess:we,AST_RegExp:Se,AST_Return:xe,AST_Sequence:Te,AST_SimpleStatement:Ae,AST_String:ke,AST_Sub:Ee,AST_Super:De,AST_Switch:Oe,AST_SymbolCatch:qe,AST_SymbolClass:Ce,AST_SymbolClassProperty:Fe,AST_SymbolConst:$e,AST_SymbolDeclaration:Pe,AST_SymbolDefClass:je,AST_SymbolDefun:ze,AST_SymbolExport:Me,AST_SymbolExportForeign:Ne,AST_SymbolFunarg:Ie,AST_SymbolImport:Re,AST_SymbolImportForeign:Le,AST_SymbolLambda:Be,AST_SymbolLet:He,AST_SymbolMethod:Ye,AST_SymbolRef:Ue,AST_SymbolVar:Ve,AST_TemplateSegment:Ge,AST_TemplateString:We,AST_This:Ke,AST_SymbolPrivateProperty:Je,AST_Throw:Xe,AST_Token:Qe,AST_Toplevel:Ze,AST_True:en,AST_Try:nn,AST_TryBlock:tn,AST_UnaryPostfix:rn,AST_UnaryPrefix:on,AST_Var:an,AST_VarDef:sn,AST_While:fn,AST_With:cn,AST_Yield:un,_INLINE:ln,_NOINLINE:pn,_PURE:dn,_KEY:hn,_MANGLEPROP:_n}=n;var vn="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with",mn="false null true",gn=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",mn,vn].join(" "),bn="return new delete throw else case";vn=r(vn),gn=r(gn),bn=r(bn),mn=r(mn);var yn=/^0b([01]+)$/i,wn=/^0x([0-9a-f]+)$/i,Sn=/^0o?([0-7]+)$/i,xn=r(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),Tn="\n\r\u2028\u2029",An="+-*&%=<>!?|~^",kn=",;:)}]",En="[{(,;:",Dn=En+"`)}]",On=Tn+"  \t\f\v​             　\ufeff",qn=r(t("./'\"#"+An+Dn+On));function Cn(e){return e>=48&&e<=57}function Fn(e){return!qn[e]}function $n(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function Pn(e,n,t,i,r){this.message=e,this.filename=n,this.line=t,this.col=i,this.pos=r}function jn(e,n,t,i,r){throw new Pn(e,n,t,i,r)}function zn(e,n,t){return e.type==n&&(null==t||e.value==t)}Tn=r(t(Tn)),An=r(t(An)),kn=r(t(kn)),En=r(t(En)),Dn=r(t(Dn)),On=r(t(On)),Pn.prototype=Object.create(Error.prototype),Pn.prototype.constructor=Pn,Pn.prototype.name="SyntaxError",a(Pn);var Mn={};function Nn(e,n,t,i){var r={text:e,filename:n,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:Object.create(null),read_template:k("Unterminated template literal",function(e){for(var n="";;){var t=i();switch(t){case"\\":t+=i();break;case"`":return void e.push(n);case"$":if("{"==a())return s(),e.push(n),r.regex_allowed=!0,!0}n+=t}function i(){var e=s(!0,!0);return"\r"==e?"\n":e}})},o=!1;function a(){return r.text.charAt(r.pos)}function s(e,n){var t=r.text.charAt(r.pos++);if(e&&!t)throw Mn;return Tn[t]?(r.col=0,r.line++,n||(r.newline_before=!0),"\r"==t&&"\n"==a()&&(r.pos++,t="\n")):r.col++,t}function f(e){for(;e-- >0;)s()}function c(e){return r.text.substr(r.pos,e.length)==e}function u(){r.tokline=r.line,r.tokcol=r.col,r.tokpos=r.pos}function l(t,i,a){r.regex_allowed="operator"==t&&!Rn[i]||"keyword"==t&&bn[i]||"punc"==t&&En[i],"punc"==t&&"."==i?o=!0:a||(o=!1);var s={type:t,value:i,line:r.tokline,col:r.tokcol,pos:r.tokpos,endline:r.line,endcol:r.col,endpos:r.pos,nlb:r.newline_before,file:n};return/^(?:num|string|regexp)$/i.test(t)&&(s.raw=e.substring(s.pos,s.endpos)),a||(s.comments_before=r.comments_before,s.comments_after=r.comments_before=[]),r.newline_before=!1,new Qe(s)}function p(){for(;On[a()];)s()}function d(e){jn(e,n,r.tokline,r.tokcol,r.tokpos)}function h(e){return/^0[0-7_]+$/.test(e)}function _(e){var n=!1,t=!1,i=!1,r="."==e,o=function(e){var n,t="";for(;(n=a())&&e(n,t);)t+=s();return t}(function(e,o){switch(e){case"x":case"X":return!i&&(i=!0);case"e":case"E":return!!i||!n&&(n=t=!0);case"+":case"-":return t;case t=!1,".":return!(r||n||i||h(o))&&(r=!0)}return/[_0-9a-dfo]/i.test(e)});e&&(o=e+o),h(o)?E.has_directive("use strict")&&d("Legacy octal literals are not allowed in strict mode"):o=o.replace(i?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1");var f=function(e){var n;if(n=yn.exec(e))return parseInt(n[1],2);if(n=wn.exec(e))return parseInt(n[1],16);if(n=Sn.exec(e))return parseInt(n[1],8);var t=parseFloat(e);if(t==e)return t}(o);return isNaN(f)&&d("Invalid syntax: "+o),r||n||"n"!=a()?l("num",f):l("bigint",o.toLowerCase()+s())}function v(e){var n=s(!0,e);if(n>="0"&&n<="7")return function(e){var n=a();n>="0"&&n<="7"&&(e+=s(!0))[0]<="3"&&(n=a())>="0"&&n<="7"&&(e+=s(!0));if("0"===e)return"\0";e.length>0&&E.has_directive("use strict")&&d("Legacy octal escape sequences are not allowed in strict mode");return String.fromCharCode(parseInt(e,8))}(n);if("u"==n){var t=s(!0,e);if(n+=t,"{"!=t)n+=s(!0,e)+s(!0,e)+s(!0,e);else do{t=s(!0,e),n+=t}while("}"!=t)}else"x"==n&&(n+=s(!0,e)+s(!0,e));var i=function(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":var n;if("{"==e[1]&&"}"==e.slice(-1))n=e.slice(2,-1);else{if(5!=e.length)return;n=e.slice(1)}var t=parseInt(n,16);if(t<0||isNaN(t))return;if(t<65536)return String.fromCharCode(t);if(t>1114111)return;return String.fromCharCode(55232+(t>>10))+String.fromCharCode(56320+(1023&t));case"v":return"\v";case"x":if(3!=e.length)return;var t=parseInt(e.slice(1),16);if(t<0||isNaN(t))return;return String.fromCharCode(t);case"\r":case"\n":return"";default:if("0"==e)return"\0";if(e[0]>="0"&&e[0]<="9")return;return e}}(n);return"string"!=typeof i&&d("Invalid escape sequence: \\"+n),i}var m=k("Unterminated string constant",function(e){for(var n=s(),t="";;){var i=s(!0,!0);if("\\"==i)i=v(!0);else if(Tn[i])d("Unterminated string constant");else if(i==n)break;t+=i}var r=l("string",t);return r.quote=e,r});function g(e){var n,t=r.regex_allowed,i=function(){for(var e=r.text,n=r.pos;n<r.text.length;++n)if(Tn[e[n]])return n;return-1}();return-1==i?(n=r.text.substr(r.pos),r.pos=r.text.length):(n=r.text.substring(r.pos,i),r.pos=i),r.col=r.tokcol+(r.pos-r.tokpos),r.comments_before.push(l(e,n,!0)),r.regex_allowed=t,E}var b=k("Unterminated multiline comment",function(){var e=r.regex_allowed,n=function(e,n){var t=r.text.indexOf(e,r.pos);if(n&&-1==t)throw Mn;return t}("*/",!0),t=r.text.substring(r.pos,n).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return f(t.length+2),r.comments_before.push(l("comment2",t,!0)),r.regex_allowed=e,E});function y(){for(var e,n=!1,t=!1,i="#"==a()?s():"";e=a();)if(n)"u"!=e&&d("Expecting UnicodeEscapeSequence -- uXXXX"),Fn(e=v())||d("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),i+=e,n=!1;else if("\\"==e)t=n=!0,s();else{if(!Fn(e))break;i+=s()}if(vn[i]&&t){var r=i.charCodeAt(0).toString(16).toUpperCase();i="\\u"+"0000".substr(r.length)+r+i.slice(1)}return i}var w=k("Unterminated regular expression",function(e){for(var n,t=!1,i=!1;n=s(!0);)if(Tn[n])d("Unexpected line terminator");else if(t)e+="\\"+n,t=!1;else if("["==n)i=!0,e+=n;else if("]"==n&&i)i=!1,e+=n;else{if("/"==n&&!i)break;"\\"==n?t=!0:e+=n}var r=y();try{var o=new RegExp(e,r);return o.raw_source=e,l("regexp",o)}catch(e){d(e.message)}});function S(e){return l("operator",function e(n){if(!a())return n;var t=n+a();return xn[t]?(s(),e(t)):n}(e||s()))}function x(){switch(s(),a()){case"/":return s(),g("comment1");case"*":return s(),b()}return r.regex_allowed?w(""):S("/")}function T(){return s(),c("..")?l("operator","."+s()+s()):Cn(a().charCodeAt(0))?_("."):l("punc",".")}function A(){var e=y();return o?l("name",e):mn[e]?l("atom",e):vn[e]?xn[e]?l("operator",e):l("keyword",e):l("name",e)}function k(e,n){return function(t){try{return n(t)}catch(n){if(n!==Mn)throw n;d(e)}}}function E(e){if(null!=e)return w(e);for(i&&0==r.pos&&c("#!")&&(u(),f(2),g("comment5"));;){if(p(),u(),t){if(c("\x3c!--")){f(4),g("comment3");continue}if(c("--\x3e")&&r.newline_before){f(3),g("comment4");continue}}var n=a();if(!n)return l("eof");var o=n.charCodeAt(0);switch(o){case 34:case 39:return m(n);case 46:return T();case 47:var h=x();if(h===E)continue;return h}if(Cn(o))return _();if(Dn[n])return l("punc",s());if(c("=>"))return l("punc",s()+s());if(An[n])return S();if(35==o||92==o||!qn[n])return A();break}d("Unexpected character '"+n+"'")}return E.context=function(e){return e&&(r=e),r},E.add_directive=function(e){r.directives[e]=!0},E.push_directives_stack=function(){r.directives=Object.create(r.directives)},E.pop_directives_stack=function(){r.directives=Object.getPrototypeOf(r.directives)},E.has_directive=function(e){return!!r.directives[e]},E}var In=r("typeof void delete -- ++ ! ~ - +"),Rn=r("-- ++"),Ln=r("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),Bn=function(e,n){for(var t=0;t<e.length;)for(var i=e[t++],r=0;r<i.length;r++)n[i[r]]=t;return n}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),Hn=r("atom bigint num regexp string");function Yn(e,n){n=i(n,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var t={input:"string"==typeof e?Nn(e,n.filename,n.html5_comments,n.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function r(e,n){return zn(t.token,e,n)}function o(){return t.peeked||(t.peeked=t.input())}function a(){return t.prev=t.token,t.peeked?(t.token=t.peeked,t.peeked=null):t.token=t.input(),t.in_directives=t.in_directives&&("string"==t.token.type||r("punc",";")),t.token}function w(){return t.prev}function x(e,n,i,r){var o=t.input.context();jn(e,o.filename,null!=n?n:o.tokline,null!=i?i:o.tokcol,null!=r?r:o.tokpos)}function T(e,n){x(n,e.line,e.col)}function A(e,n){return e+(void 0===n?"":" «"+n+"»")}function k(e){null==e&&(e=t.token),T(e,"Unexpected token: "+A(e.type,e.value))}function E(e,n){if(r(e,n))return a();T(t.token,"Unexpected token: "+A(t.token.type,t.token.value)+", expected: "+A(e,n))}function D(e){return E("punc",e)}function O(e){return e.nlb||!f(e.comments_before,function(e){return!e.nlb})}function q(){return!n.strict&&(r("eof")||r("punc","}")||O(t.token))}function z(e){r("punc",";")?a():e||q()||D(";")}function R(){D("(");var e=Wn();return D(")"),e}function Y(e){return function(){var n=t.token,i=e.apply(null,arguments),r=w();return i.start=n,i.end=r,i}}function V(){(r("operator","/")||r("operator","/="))&&(t.peeked=null,t.token=t.input(t.token.value.substr(1)))}t.token=a();var G=Y(function(e){switch(V(),t.token.type){case"string":var i=t.in_directives,s=Wn();if(i)if(s instanceof ke){var c=s.start.raw.slice(1,-1);t.input.add_directive(c),s.value=c}else t.in_directives=i=!1;return z(),i?new L(s):new Ae({body:s});case"num":case"bigint":case"regexp":case"operator":case"atom":return ie();case"name":switch(t.token.value){case"async":if(zn(o(),"keyword","function"))return a(),a(),r("operator","*")?(a(),Ne(AST_AsyncGeneratorDefun)):Ne(AST_AsyncDefun);break;case"await":if(t.in_async)return ie();break;case"export":return e||""===n.module||k(),a(),function(){if(r("operator","*")){var e=t.token,n=e;return a(),r("name","as")&&(a(),Le()||E("name"),n=t.token,a()),E("name","from"),new AST_ExportForeign({aliases:[Ye(n)],keys:[Ye(e)],path:Ge()})}if(r("punc","{")){a();for(var i=[],s=[];Le();){var e=t.token;a(),s.push(e),r("name","as")?(a(),Le()||E("name"),i.push(t.token),a()):i.push(e),r("punc","}")||D(",")}return D("}"),r("name","from")?(a(),new AST_ExportForeign({aliases:i.map(Ye),keys:s.map(Ye),path:Ge()})):(z(),new AST_ExportReferences({properties:s.map(function(e,n){zn(e,"name")||T(e,"Name expected");var t=Tn(Me,e);return t.alias=Ye(i[n]),t})}))}if(r("keyword","default")){a();var f=t.token,c=function(){if(r("name","async")){if(!zn(o(),"keyword","function"))return;return a(),a(),r("operator","*")?(a(),We(AST_AsyncGeneratorDefun,Ne(AST_AsyncGeneratorFunction))):We(AST_AsyncDefun,Ne(AST_AsyncFunction))}if(r("keyword"))switch(t.token.value){case"class":return a(),We(M,ge(S));case"function":return a(),r("operator","*")?(a(),We(AST_GeneratorDefun,Ne(AST_GeneratorFunction))):We(I,Ne(Z))}}();return c?(c.start=f,c.end=w()):(V(),c=Wn(),z()),new AST_ExportDefault({body:c})}return new AST_ExportDeclaration({body:Je()})}();case"import":var u=o();if("punc"==u.type&&/^[(.]$/.test(u.value))break;return e||""===n.module||k(),a(),function(){var e,n=null,i=En(Re,!0),s=null;i?(i.key=new ke({start:i.start,value:"",end:i.end}),(e=r("punc",","))&&a()):e=!r("string");if(e)if(r("operator","*")){var f=t.token;a(),E("name","as"),(n=En(Re)).key=Ye(f)}else{for(D("{"),s=[];Le();){var c;if(zn(o(),"name","as")){var f=t.token;a(),a(),(c=En(Re)).key=Ye(f)}else(c=En(Re)).key=new ke({start:c.start,value:c.name,end:c.end});s.push(c),r("punc","}")||D(",")}D("}")}(n||i||s)&&E("name","from");return new te({all:n,default:i,path:Ge(),properties:s})}();case"let":if(pn()){a();var l=hn();return z(),l}break;case"yield":if(t.in_generator)return ie()}return zn(o(),"punc",":")?function(){var e=En(oe);f(t.labels,function(n){return n.name!=e.name})||x("Label "+e.name+" defined twice");D(":"),t.labels.push(e);var n=G();t.labels.pop(),n instanceof re||e.references.forEach(function(n){n instanceof $&&T(n.label.start,"Continue label `"+e.name+"` must refer to IterationStatement")});return new ae({body:n,label:e})}():ie();case"punc":switch(t.token.value){case"{":return new v({start:t.token,body:Qe(),end:w()});case"[":case"(":case"`":return ie();case";":return t.in_directives=!1,a(),new U;default:k()}case"keyword":switch(t.token.value){case"break":return a(),ce(m);case"class":return a(),ge(M);case"const":a();var l=dn();return z(),l;case"continue":return a(),ce($);case"debugger":return a(),z(),new P;case"do":a();var s=Kn(G);E("keyword","while");var p=R();return z(!0),new B({body:s,condition:p});case"while":return a(),new fn({condition:R(),body:Kn(G)});case"for":return a(),function(){var e=r("name","await")&&a();D("(");var n=null;if(e||!r("punc",";")){var t;if(n=r("keyword","const")?(a(),dn(!0)):r("name","let")&&pn()?(a(),hn(!0)):r("keyword","var")?(a(),_n(!0)):Wn(!0),e?(E("name","of"),t=AST_ForAwaitOf):r("operator","in")?(a(),t=X):r("name","of")&&(a(),t=Q),t)return n instanceof N?(n.definitions.length>1&&T(n.start,"Only one variable declaration allowed in for..in/of loop"),t!==X&&n.definitions[0].value&&T(n.definitions[0].value.start,"No initializers allowed in for..of loop")):Un(n)||(n=Vn(n))instanceof AST_Destructured||T(n.start,"Invalid left-hand side in for..in/of loop"),function(e,n){V();var t=Wn();return D(")"),new e({init:n,object:t,body:Kn(G)})}(t,n)}return function(e){D(";");var n=r("punc",";")?null:Wn();D(";");var t=r("punc",")")?null:Wn();return D(")"),new J({init:e,condition:n,step:t,body:Kn(G)})}(n)}();case"function":return a(),r("operator","*")?(a(),Ne(AST_GeneratorDefun)):Ne(I);case"if":return a(),function(){var e=R(),n=G(),t=null;r("keyword","else")&&(a(),t=G());return new ne({condition:e,body:n,alternative:t})}();case"return":0!=t.in_function||n.bare_returns||x("'return' outside of function"),a();var c=null;return r("punc",";")?a():q()||(c=Wn(),z()),new xe({value:c});case"switch":return a(),new Oe({expression:R(),body:Kn(tn)});case"throw":a(),O(t.token)&&x("Illegal newline after 'throw'");var c=Wn();return z(),new Xe({value:c});case"try":return a(),function(){var e=Qe(),n=null,i=null;if(r("keyword","catch")){var o=t.token;a();var s=null;r("punc","(")&&(a(),s=Dn(qe),D(")")),n=new y({start:o,argname:s,body:Qe(),end:w()})}if(r("keyword","finally")){var o=t.token;a(),i=new K({start:o,body:Qe(),end:w()})}n||i||x("Missing catch/finally blocks");return new nn({body:e,bcatch:n,bfinally:i})}();case"var":a();var l=_n();return z(),l;case"with":return t.input.has_directive("use strict")&&x("Strict mode may not include a with statement"),a(),new cn({expression:R(),body:G()})}}k()});function ie(){var e=Wn();return z(),new Ae({body:e})}function ce(e){var n,i=null;q()||(i=En(se,!0)),null!=i?((n=find_if(function(e){return e.name==i.name},t.labels))||T(i.start,"Undefined label "+i.name),i.thedef=n):0==t.in_loop&&x(e.TYPE+" not inside a loop or switch"),z();var r=new e({label:i});return n&&n.references.push(r),r}function pe(e,n){if(r("name",e)){var t=o();if(t&&!zn(t,"operator","=")&&!("punc"==t.type&&/^[(;}]$/.test(t.value)||n&&O(t)))return a()}}function ge(e){var n,i=t.in_async,o=t.in_generator;t.input.push_directives_stack(),t.input.add_directive("use strict"),n=e===M?En(je):En(Ce,!0);var s=null;r("keyword","extends")&&(a(),V(),s=mn(!0)),D("{");for(var f=[];!r("punc","}");)if(r("punc",";"))a();else{var c=t.token,u=!!pe("static"),l=pe("async",!0);if(r("operator","*")){a();var p=r("name")&&/^#/.test(t.token.value),d=Sn(),h=t.token,_=Ne(l?AST_AsyncGeneratorFunction:AST_GeneratorFunction);_.start=h,_.end=w(),f.push(new AST_ClassMethod({start:c,static:u,private:p,key:d,value:_,end:w()}))}else if(u&&r("punc","{"))f.push(new AST_ClassInit({start:c,value:new AST_ClassInitBlock({start:c,body:Qe(),end:w()}),end:w()}));else{var p=r("name")&&/^#/.test(t.token.value),d=Sn();if(r("punc","(")){var v=t.token,m=Ne(l?AST_AsyncFunction:Z);m.start=v,m.end=w(),f.push(new AST_ClassMethod({start:c,static:u,private:p,key:d,value:m,end:w()}))}else{l&&k(l);var g=null;if(r("operator","="))a(),t.in_async=!1,t.in_generator=!1,g=Gn(),t.in_generator=o,t.in_async=i;else if(!r("punc",";")&&!r("punc","}")){var b=null;switch(d){case"get":b=AST_ClassGetter;break;case"set":b=AST_ClassSetter}if(b){f.push(new b({start:c,static:u,private:r("name")&&/^#/.test(t.token.value),key:Sn(),value:yn(),end:w()}));continue}}z(),f.push(new AST_ClassField({start:c,static:u,private:p,key:d,value:g,end:w()}))}}}return a(),t.input.pop_directives_stack(),t.in_generator=o,t.in_async=i,new e({extends:s,name:n,properties:f})}function ye(e){if(e instanceof u){var n=null;return e.elements[e.elements.length-1]instanceof AST_Spread&&(n=ye(e.elements.pop().expression)),new AST_DestructuredArray({start:e.start,elements:e.elements.map(ye),rest:n,end:e.end})}if(e instanceof p)return new AST_DefaultValue({start:e.start,name:ye(e.left),value:e.right,end:e.end});if(e instanceof AST_DefaultValue)return e.name=ye(e.name),e;if(e instanceof AST_DestructuredArray)return e.elements=e.elements.map(ye),e.rest&&(e.rest=ye(e.rest)),e;if(e instanceof AST_DestructuredObject)return e.properties.forEach(function(e){e.value=ye(e.value)}),e.rest&&(e.rest=ye(e.rest)),e;if(e instanceof ee)return e;if(e instanceof _e){var n=null;return e.properties[e.properties.length-1]instanceof AST_Spread&&(n=ye(e.properties.pop().expression)),new AST_DestructuredObject({start:e.start,properties:e.properties.map(function(e){return e instanceof me||T(e.start,"Invalid destructuring assignment"),new AST_DestructuredKeyVal({start:e.start,key:e.key,value:ye(e.value),end:e.end})}),rest:n,end:e.end})}return e instanceof Ie?e:e instanceof Ue?new Ie(e):e instanceof un?new Ie({start:e.start,name:"yield",end:e.end}):void T(e.start,"Invalid arrow parameter")}function Fe(e,n,i){var o=t.in_async,a=t.in_generator;t.in_async=i,t.in_generator=!1;var s=t.in_funarg;t.in_funarg=t.in_function;var f,c,u=e.map(ye),p=e.rest||null;p&&(p=ye(p)),t.in_funarg=s,D("=>");var d=t.in_loop,h=t.labels;++t.in_function,t.input.push_directives_stack(),t.in_loop=0,t.labels=[],r("punc","{")?(t.in_directives=!0,f=Qe(),c=null):(f=[],V(),c=Gn());var _=t.input.has_directive("use strict");t.input.pop_directives_stack(),--t.in_function,t.in_loop=d,t.labels=h,t.in_generator=a,t.in_async=o;var v=new(i?AST_AsyncArrow:l)({start:n,argnames:u,rest:p,body:f,value:c,end:w()});return _&&v.each_argname(An),v}var Ne=function(e){var i,r=t.in_async,o=t.in_generator;/Defun$/.test(e.TYPE)?(i=En(ze),t.in_async=/^Async/.test(e.TYPE),t.in_generator=/Generator/.test(e.TYPE)):(t.in_async=/^Async/.test(e.TYPE),t.in_generator=/Generator/.test(e.TYPE),i=En(Be,!0)),!i||e===c||i instanceof Pe||k(w()),D("(");var a=t.in_funarg;t.in_funarg=t.in_function;var s=gn(")",!n.strict,!1,function(){return On(Ie)});t.in_funarg=a;var f=t.in_loop,u=t.labels;++t.in_function,t.in_directives=!0,t.input.push_directives_stack(),t.in_loop=0,t.labels=[];var l=Qe(),p=t.input.has_directive("use strict");t.input.pop_directives_stack(),--t.in_function,t.in_loop=f,t.labels=u,t.in_generator=o,t.in_async=r;var d=new e({name:i,argnames:s,rest:s.rest||null,body:l});return p&&(i&&An(i),d.each_argname(An)),d};function Le(){return r("name")||r("string")||$n(t.token.value)}function Ye(e){return new ke({start:e,quote:e.quote,value:e.value,end:e})}function Ge(){var e=t.token;return E("string"),z(),Ye(e)}function We(e,n){return n.name&&((n=new e(n)).name=new(e===M?je:ze)(n.name)),n}var Je=Y(function(){if(r("name"))switch(t.token.value){case"async":return a(),E("keyword","function"),r("operator","*")?(a(),Ne(AST_AsyncGeneratorDefun)):Ne(AST_AsyncDefun);case"let":a();var e=hn();return z(),e}else if(r("keyword"))switch(t.token.value){case"class":return a(),ge(M);case"const":a();var e=dn();return z(),e;case"function":return a(),r("operator","*")?(a(),Ne(AST_GeneratorDefun)):Ne(I);case"var":a();var e=_n();return z(),e}k()});function Qe(){D("{");for(var e=[];!r("punc","}");)r("eof")&&D("}"),e.push(G());return a(),e}function tn(){D("{");for(var e,n,i,o,s=[];!r("punc","}");)r("eof")&&D("}"),r("keyword","case")?(e&&(e.end=w()),n=[],e=new b({start:(o=t.token,a(),o),expression:Wn(),body:n}),s.push(e),D(":")):r("keyword","default")?(e&&(e.end=w()),i&&x("More than one default clause in switch statement"),n=[],e=new j({start:(o=t.token,a(),D(":"),o),body:n}),s.push(e),i=e):(n||k(),n.push(G()));return e&&(e.end=w()),a(),s}function ln(e,n){for(var i=[];;){var o=t.token,s=Dn(e),f=null;if(r("operator","=")?(a(),f=Gn(n)):!n&&(e===$e||s instanceof AST_Destructured)&&x("Missing initializer in declaration"),i.push(new sn({start:o,name:s,value:f,end:w()})),!r("punc",","))break;a()}return i}function pn(){var e=o();return zn(e,"name")||zn(e,"punc","[")||zn(e,"punc","{")}var dn=function(e){return new F({start:w(),definitions:ln($e,e),end:w()})},hn=function(e){return new fe({start:w(),definitions:ln(He,e),end:w()})},_n=function(e){return new an({start:w(),definitions:ln(Ve,e),end:w()})};var mn=function(e){if(r("operator","new"))return function(e){var i,s=t.token;if(E("operator","new"),r("punc",".")&&zn(o(),"name","target"))a(),a(),i=new le;else{var f,c=mn(!1);r("punc","(")?(a(),f=gn(")",!n.strict)):f=[],i=new ue({expression:c,args:f})}return i.start=s,i.end=w(),Cn(i,e)}(e);var i=t.token;if(r("punc")){switch(i.value){case"`":return Cn(qn(null),e);case"(":if(a(),r("punc",")"))return a(),Fe([],i);var s=Wn(!1,!0),f=i.comments_before.length;if([].unshift.apply(s.start.comments_before,i.comments_before),i.comments_before.length=0,i.comments_before=s.start.comments_before,i.comments_before_length=f,0==f&&i.comments_before.length>0){var c=i.comments_before[0];c.nlb||(c.nlb=i.nlb,i.nlb=!1)}i.comments_after=s.start.comments_after,s.start=i,D(")");var u=w();return u.comments_before=s.end.comments_before,u.comments_after.forEach(function(e){s.end.comments_after.push(e),e.nlb&&(t.token.nlb=!0)}),u.comments_after.length=0,u.comments_after=s.end.comments_after,s.end=u,r("punc","=>")?Fe(s instanceof Te?s.expressions:[s],i):Cn(s,e);case"[":return Cn(bn(),e);case"{":return Cn(wn(),e)}k()}if(r("keyword"))switch(i.value){case"class":a();var l=ge(S);return l.start=i,l.end=w(),Cn(l,e);case"function":return a(),r("operator","*")?(a(),d=Ne(AST_GeneratorFunction)):d=Ne(Z),d.start=i,d.end=w(),Cn(d,e)}if(r("name")){var p=Tn(Ue,i);if(a(),"async"==p.name){var d;if(r("keyword","function"))return a(),r("operator","*")?(a(),d=Ne(AST_AsyncGeneratorFunction)):d=Ne(AST_AsyncFunction),d.start=i,d.end=w(),Cn(d,e);if(r("name")&&zn(o(),"punc","=>"))return i=t.token,p=Tn(Ue,i),a(),Fe([p],i,!0);if(r("punc","(")){var _=Cn(p,e);if(!r("punc","=>"))return _;var v=_.args;return v[v.length-1]instanceof AST_Spread&&(v.rest=v.pop().expression),Fe(v,i,!0)}}return r("punc","=>")?Fe([p],i):Cn(p,e)}if(Hn[t.token.type])return Cn(function(){var e,n=t.token,i=n.value;switch(n.type){case"num":isFinite(i)?e=new he({value:i}):(e=new AST_Infinity,i<0&&(e=new on({operator:"-",expression:e})));break;case"bigint":e=new h({value:i});break;case"string":e=new ke({value:i,quote:n.quote});break;case"regexp":e=new Se({value:i});break;case"atom":switch(i){case"false":e=new W;break;case"true":e=new en;break;case"null":e=new de;break;default:k()}break;default:k()}return a(),e.start=e.end=n,e}(),e);k()};function gn(e,n,i,o){o||(o=Gn);for(var s=!0,f=[];!r("punc",e)&&(s?s=!1:D(","),!n||!r("punc",e));)if(i&&r("punc",","))f.push(new ee({start:t.token,end:t.token}));else if(r("operator","...")){if(o!==Gn){a(),f.rest=o(),f.rest instanceof AST_DefaultValue&&T(f.rest.start,"Invalid rest parameter");break}f.push(new AST_Spread({start:t.token,expression:(a(),o()),end:w()}))}else f.push(o());return D(e),f}var bn=Y(function(){return D("["),new u({elements:gn("]",!n.strict,!0)})}),yn=Y(function(){return Ne(c)}),wn=Y(function(){D("{");for(var e=!0,i=[];!r("punc","}")&&(e?e=!1:D(","),n.strict||!r("punc","}"));){var s=t.token;if(r("operator","*")){a();var f=Sn(),c=t.token,u=Ne(AST_GeneratorFunction);u.start=c,u.end=w(),i.push(new AST_ObjectMethod({start:s,key:f,value:u,end:w()}))}else if(r("operator","..."))a(),i.push(new AST_Spread({start:s,expression:Gn(),end:w()}));else if(zn(o(),"operator","=")){var l=En(Ue);a(),i.push(new me({start:s,key:s.value,value:new p({start:s,left:l,operator:"=",right:Gn(),end:w()}),end:w()}))}else if(zn(o(),"punc",",")||zn(o(),"punc","}"))i.push(new me({start:s,key:s.value,value:En(Ue),end:w()}));else{var f=Sn();if(r("punc","(")){var d=t.token,h=Ne(Z);h.start=d,h.end=w(),i.push(new AST_ObjectMethod({start:s,key:f,value:h,end:w()}))}else if(r("punc",":"))a(),i.push(new me({start:s,key:f,value:Gn(),end:w()}));else{if("name"==s.type)switch(f){case"async":var _=r("operator","*")&&a();f=Sn();var d=t.token,h=Ne(_?AST_AsyncGeneratorFunction:AST_AsyncFunction);h.start=d,h.end=w(),i.push(new AST_ObjectMethod({start:s,key:f,value:h,end:w()}));continue;case"get":i.push(new ve({start:s,key:Sn(),value:yn(),end:w()}));continue;case"set":i.push(new be({start:s,key:Sn(),value:yn(),end:w()}));continue}k()}}}return a(),new _e({properties:i})});function Sn(){var e=t.token;switch(e.type){case"operator":vn[e.value]||k();case"num":case"string":case"name":case"keyword":case"atom":return a(),""+e.value;case"punc":D("[");var n=Gn();return D("]"),n;default:k()}}function xn(){var e=t.token.value;return E("name"),e}function Tn(e,n){var i=n.value;switch(i){case"await":t.in_async&&k(n);break;case"super":e=De;break;case"this":e=Ke;break;case"yield":t.in_generator&&k(n)}return new e({name:""+i,start:n,end:n})}function An(e){"arguments"!=e.name&&"eval"!=e.name&&"let"!=e.name||T(e.start,"Unexpected "+e.name+" in strict mode")}function En(e,n){if(!r("name"))return n||x("Name expected"),null;var i=Tn(e,t.token);return t.input.has_directive("use strict")&&i instanceof Pe&&An(i),a(),i}function Dn(e){var i=t.token;if(r("punc","[")){a();var s=gn("]",!n.strict,!0,function(){return On(e)});return new AST_DestructuredArray({start:i,elements:s,rest:s.rest||null,end:w()})}if(r("punc","{")){a();for(var f=!0,c=[],u=null;!r("punc","}")&&(f?f=!1:D(","),n.strict||!r("punc","}"));){var l=t.token;if(r("punc","[")||zn(o(),"punc",":")){var p=Sn();D(":"),c.push(new AST_DestructuredKeyVal({start:l,key:p,value:On(e),end:w()}))}else{if(r("operator","...")){a(),u=Dn(e);break}var d=En(e);r("operator","=")&&(a(),d=new AST_DefaultValue({start:d.start,name:d,value:Gn(),end:w()})),c.push(new AST_DestructuredKeyVal({start:l,key:l.value,value:d,end:w()}))}}return D("}"),new AST_DestructuredObject({start:i,properties:c,rest:u,end:w()})}return En(e)}function On(e){var n=t.token,i=Dn(e);return r("operator","=")?(a(),new AST_DefaultValue({start:n,name:i,value:Gn(),end:w()})):i}function qn(e){for(var n=e?e.start:t.token,i=t.input.context().read_template,o=[],s=[];i(o);)a(),s.push(Wn()),r("punc","}")||k();return a(),new AST_Template({start:n,expressions:s,strings:o,tag:e,end:w()})}function Cn(e,t){for(var i=e.start,f=null;;)if(r("operator","?")&&zn(o(),"punc",".")&&(a(),a(),f=e),r("punc","[")){a();var c=Wn();D("]"),e=new Ee({start:i,optional:f===e,expression:e,property:c,end:w()})}else if(t&&r("punc","("))a(),e=new g({start:i,optional:f===e,expression:e,args:gn(")",!n.strict),end:w()});else if(f===e||r("punc","."))f!==e&&a(),e=new H({start:i,optional:f===e,expression:e,property:xn(),end:w()});else{if(!r("punc","`"))break;f&&x("Invalid template on optional chain"),e=qn(e)}if(f&&(e.terminal=!0),e instanceof g&&!e.pure)for(var i=e.start,u=i.comments_before,l=s(i,"comments_before_length")?i.comments_before_length:u.length;--l>=0;)if(/[@#]__PURE__/.test(u[l].value)){e.pure=!0;break}return e}function Fn(e){var n=t.token;if(t.in_async&&r("name","await"))return t.in_funarg===t.in_function&&x("Invalid use of await in function argument"),t.input.context().regex_allowed=!0,a(),new d({start:n,expression:Fn(e),end:w()});if(t.in_generator&&r("name","yield")){t.in_funarg===t.in_function&&x("Invalid use of yield in function argument"),t.input.context().regex_allowed=!0,a();var i=null,o=!1;return r("operator","*")?(a(),i=Gn(e),o=!0):(r("punc")?kn[t.token.value]:q())||(i=Gn(e)),new un({start:n,expression:i,nested:o,end:w()})}if(r("operator")&&In[n.value]){a(),V();var s=Pn(on,n,Fn(e));return s.start=n,s.end=w(),s}for(var f=mn(!0);r("operator")&&Rn[t.token.value]&&!O(t.token);)(f=Pn(rn,t.token,f)).start=n,f.end=t.token,a();return f}function Pn(e,n,i){var r=n.value;switch(r){case"++":case"--":Un(i)||T(n,"Invalid use of "+r+" operator");break;case"delete":i instanceof Ue&&t.input.has_directive("use strict")&&T(i.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:r,expression:i})}var Mn=function(e,n,i){var o=r("operator")?t.token.value:null;"in"==o&&i&&(o=null);var s=null!=o?Bn[o]:null;if(null!=s&&s>n){a();var f=Mn(Fn(i),"**"==o?s-1:s,i);return Mn(new _({start:e.start,left:e,operator:o,right:f,end:f.end}),n,i)}return e};var Yn=function(e){var n=t.token,i=function(e){return Mn(Fn(e),0,e)}(e);if(r("operator","?")){a();var o=Gn();return D(":"),new C({start:n,condition:i,consequent:o,alternative:Gn(e),end:w()})}return i};function Un(e){return e instanceof we&&!e.optional||e instanceof Ue}function Vn(e){if(e instanceof u){var n=null;if(e.elements[e.elements.length-1]instanceof AST_Spread&&!((n=Vn(e.elements.pop().expression))instanceof AST_Destructured||Un(n)))return e;var t=e.elements.map(Vn);return f(t,function(e){return e instanceof AST_DefaultValue||e instanceof AST_Destructured||e instanceof ee||Un(e)})?new AST_DestructuredArray({start:e.start,elements:t,rest:n,end:e.end}):e}if(e instanceof p){var i=Vn(e.left);return i instanceof AST_Destructured||Un(i)?new AST_DefaultValue({start:e.start,name:i,value:e.right,end:e.end}):e}if(!(e instanceof _e))return e;var n=null;if(e.properties[e.properties.length-1]instanceof AST_Spread&&!((n=Vn(e.properties.pop().expression))instanceof AST_Destructured||Un(n)))return e;for(var r=[],o=0;o<e.properties.length;o++){var a=e.properties[o];if(!(a instanceof me))return e;var s=Vn(a.value);if(!(s instanceof AST_DefaultValue||s instanceof AST_Destructured||Un(s)))return e;r.push(new AST_DestructuredKeyVal({start:a.start,key:a.key,value:s,end:a.end}))}return new AST_DestructuredObject({start:e.start,properties:r,rest:n,end:e.end})}function Gn(e){var n=t.token,i=Yn(e),o=t.token.value;if(r("operator")&&Ln[o]){if(Un(i)||"="==o&&(i=Vn(i))instanceof AST_Destructured)return a(),new p({start:n,left:i,operator:o,right:Gn(e),end:w()});x("Invalid assignment")}return i}function Wn(e,n){for(var i=t.token,s=[];;){if(n&&r("operator","...")){a(),s.rest=Dn(Ie);break}if(s.push(Gn(e)),!r("punc",","))break;if(a(),n&&r("punc",")")&&zn(o(),"punc","=>"))break}return 1!=s.length||s.rest?new Te({start:i,expressions:s,end:w()}):s[0]}function Kn(e){++t.in_loop;var n=e();return--t.in_loop,n}if(n.expression){V();var Jn=Wn();return E("eof"),Jn}return function(){var e=t.token,i=[];for(n.module&&(t.in_async=!0,t.input.add_directive("use strict")),t.input.push_directives_stack();!r("eof");)i.push(G(!0));t.input.pop_directives_stack();var o=w()||e,a=n.toplevel;return a?(a.body=a.body.concat(i),a.end=o):a=new Ze({start:e,body:i,end:o}),a}()}return n.parse=Yn,{is_identifier_string:$n,is_identifier_char:Fn,is_surrogate_pair_head:function(e){return e>=55296&&e<=56319},is_surrogate_pair_tail:function(e){return e>=56320&&e<=57343},tokenizer:Nn,parse:Yn,KEYWORDS:vn,RESERVED_WORDS:gn,KEYWORDS_BEFORE_EXPRESSION:bn,KEYWORDS_ATOM:mn}}),e("skylark-uglifyjs/output",["./utils","./ast","./parse"],function(e,n,t){"use strict";const{defaults:i,makePredicate:r,noop:o,return_false:a,return_true:s}=e,{AST_Array:f,AST_Arrow:c,AST_AsyncArrow:u,AST_AsyncDefun:l,AST_AsyncFunction:p,AST_AsyncGeneratorDefun:d,AST_AsyncGeneratorFunction:h,AST_Assign:_,AST_Await:v,AST_BigInt:m,AST_Binary:g,AST_BlockStatement:b,AST_Break:y,AST_Call:w,AST_Case:S,AST_Catch:x,AST_Chain:T,AST_Class:A,AST_ClassExpression:k,AST_ClassField:E,AST_ClassGetter:D,AST_ClassInit:O,AST_ClassMethod:q,AST_ClassPrivateProperty:C,AST_ClassProperty:F,AST_ClassSetter:$,AST_ClassStaticBlock:P,AST_ConciseMethod:j,AST_Conditional:z,AST_Const:M,AST_Constant:N,AST_Continue:I,AST_Debugger:R,AST_Default:L,AST_DefaultAssign:B,AST_DefaultValue:H,AST_Definitions:Y,AST_Defun:U,AST_Destructuring:V,AST_DestructuredArray:G,AST_DestructuredKeyVal:W,AST_DestructuredObject:K,AST_Destructured:J,AST_Directive:X,AST_Do:Q,AST_Dot:Z,AST_DotHash:ee,AST_EmptyStatement:ne,AST_Exit:te,AST_Expansion:ie,AST_Export:re,AST_ExportDeclaration:oe,AST_ExportDefault:ae,AST_ExportForeign:se,AST_ExportReferences:fe,AST_Finally:ce,AST_For:ue,AST_ForAwaitOf:le,AST_ForIn:pe,AST_ForOf:de,AST_Function:he,AST_GeneratorDefun:_e,AST_GeneratorFunction:ve,AST_Hole:me,AST_If:ge,AST_Import:be,AST_ImportMeta:ye,AST_Jump:we,AST_LabeledStatement:Se,AST_Lambda:xe,AST_Let:Te,AST_LoopControl:Ae,AST_NameMapping:ke,AST_New:Ee,AST_NewTarget:De,AST_Node:Oe,AST_Number:qe,AST_Object:Ce,AST_ObjectGetter:Fe,AST_ObjectKeyVal:$e,AST_ObjectMethod:Pe,AST_ObjectProperty:je,AST_ObjectSetter:ze,AST_PrefixedTemplateString:Me,AST_PropAccess:Ne,AST_PrivateGetter:Ie,AST_PrivateMethod:Re,AST_PrivateSetter:Le,AST_PrivateIn:Be,AST_RegExp:He,AST_Return:Ye,AST_Scope:Ue,AST_Sequence:Ve,AST_SimpleStatement:Ge,AST_Spread:We,AST_Statement:Ke,AST_StatementWithBody:Je,AST_String:Xe,AST_Sub:Qe,AST_Super:Ze,AST_Switch:en,AST_SwitchBranch:nn,AST_Symbol:tn,AST_SymbolClassProperty:rn,AST_SymbolExport:on,AST_SymbolImport:an,AST_SymbolMethod:sn,AST_SymbolPrivateProperty:fn,AST_SymbolRef:cn,AST_Template:un,AST_TemplateSegment:ln,AST_TemplateString:pn,AST_This:dn,AST_Throw:hn,AST_Toplevel:_n,AST_Try:vn,AST_TryBlock:mn,AST_Unary:gn,AST_UnaryPostfix:bn,AST_UnaryPrefix:yn,AST_Var:wn,AST_VarDef:Sn,AST_While:xn,AST_With:Tn,AST_Yield:An,TreeWalker:kn,is_arrow:En,is_generator:Dn,walk:On,walk_abort:qn,first_in_statement:Cn}=n,{is_identifier_char:Fn,is_identifier_string:$n,is_surrogate_pair_head:Pn,is_surrogate_pair_tail:jn,PRECEDENCE:zn,RESERVED_WORDS:Mn}=t;function Nn(e){return"comment2"==e.type&&/@preserve|@license|@cc_on/i.test(e.value)}function In(e){e=i(e,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,extendscript:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var n=a;if(e.comments){var t=e.comments;if("string"==typeof e.comments&&/^\/.*\/[a-zA-Z]*$/.test(e.comments)){var f=e.comments.lastIndexOf("/");t=new RegExp(e.comments.substr(1,f-1),e.comments.substr(f+1))}n=t instanceof RegExp?function(e){return"comment5"!=e.type&&t.test(e.value)}:"function"==typeof t?function(e){return"comment5"!=e.type&&t(this,e)}:"some"===t?Nn:s}function c(e){if("number"==typeof e)return new Array(e+1).join(" ");if(!e)return"";if(!/^\s*$/.test(e))throw new Error("unsupported indentation: "+JSON.stringify(""+e));return e}var u,l,p,d,h,_,v,m=0,b=1,y=c(e.indent_start),w=c(e.indent_level),S=w.length+1>>1,x=0,T=!0,A=e.source_map&&[],k=!1,E=!1,D="";function O(){u="",d=!1,h=!1,v=[];var e=_;return _="",e}O();var q=e.ascii_only?function(e,n){return n&&(e=e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return"\\u{"+(e.charCodeAt(0)-55232<<10|e.charCodeAt(1)-56320).toString(16)+"}"})),e.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var t=e.charCodeAt(0).toString(16);if(t.length<=2&&!n){for(;t.length<2;)t="0"+t;return"\\x"+t}for(;t.length<4;)t="0"+t;return"\\u"+t})}:function(e){for(var n="",t=0,i=0;t<e.length;t++){var r=e.charCodeAt(t);if(Pn(r)){if(jn(e.charCodeAt(t+1))){t++;continue}}else if(!jn(r))continue;n+=e.slice(i,t)+"\\u"+r.toString(16),i=t+1}return 0==i?e:n+e.slice(i)};function C(e){return"'"+e.replace(/\x27/g,"\\'")+"'"}function F(e){return'"'+e.replace(/\x22/g,'\\"')+'"'}var $=[null,C,F,function(e,n){return"'"==n?C(e):F(e)}][e.quote_style]||function(e,n,t,i){return t>i?C(e):F(e)};function P(n,t){var i=0,r=0;return n=n.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(t,o){switch(t){case'"':return++i,'"';case"'":return++r,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return e.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(n.charAt(o+1))?"\\x00":"\\0"}return t}),$(q(n),t,i,r)}var j=A?function(e,n){A.forEach(function(t){t.line+=e,t.col+=n})}:o,M=A?function(){A.forEach(function(n){e.source_map.add(n.token.file,n.line,n.col,n.token.line,n.token.col,n.name||"name"!=n.token.type?n.name:n.token.value)}),A=[]}:o;function N(e){D+=_.slice(0,x);var n=(_=_.slice(x)).length;for(j(e,n-m),b+=e,m=n;e--;)D+="\n"}var I=e.max_line_len?function(n){T?m>e.max_line_len&&Oe.warn("Output exceeds {max_line_len} characters",e):(m>e.max_line_len&&(N(1),T=!0),(T||n)&&M())}:o,R=r("( [ + * / - , .");function L(e,n,t){return Fn(e)&&(Fn(n)||"\\"==n)||"/"==n&&n==e||("+"==n||"-"==n)&&n==u||"--"==u&&">"==n||"!"==u&&"--"==t||"/"==e&&("in"==t||"instanceof"==t)}var B=e.beautify||e.comments||e.max_line_len||e.preserve_line||e.shebang||!e.semicolons||e.source_map||e.width?function(n){var t=n.charAt(0);k&&t&&(k=!1,"\n"!=t&&(B("\n"),Y())),E&&t&&(E=!1,/[\s;})]/.test(t)||H());var i=u.slice(-1);if(h&&(h=!1,":"==i&&"}"==t||";"!=i&&(!t||";}".indexOf(t)<0))){var r=R[t];r||e.semicolons?(_+=";",m++,T||(I(),T&&!r&&";"==_&&(_="",m=0)),x==_.length-1&&x++):(I(),_+="\n",b++,m=0,/^\s+$/.test(n)&&(h=!0)),e.beautify||(d=!1)}d&&(L(i,t,n)&&(_+=" ",m++),"<"==i&&"!"==n||(d=!1)),p&&(A.push({token:p,name:l,line:b,col:m}),p=!1,T&&M()),_+=n;var o=n.split(/\r?\n/),a=o.length-1;b+=a,m+=o[0].length,a>0&&(I(),m=o[a].length),u=n}:function(e){var n=e.charAt(0),t=u.slice(-1);h&&(h=!1,(":"==t&&"}"==n||(!n||";}".indexOf(n)<0)&&";"!=t)&&(_+=";",d=!1)),d&&(L(t,n,e)&&(_+=" "),"<"==t&&"!"==e||(d=!1)),_+=e,u=e},H=e.beautify?function(){B(" ")}:function(){d=!0},Y=e.beautify?function(e){k&&B("\n"),B(e?y.slice(0,-S):y)}:o,U=e.beautify?function(e){var n=y;y+=w,e(),y=n}:function(e){e()},V=e.max_line_len||e.preserve_line?function(){I(),x=_.length,T=!1}:o,G=e.beautify?function(){B("\n"),x=_.length}:V,W=e.beautify?function(){B(";")}:function(){h=!0};var K=A?function(e,n){p=e,l=n}:o;function J(e,n){k||(!e.nlb||!n&&/(^|\n) *$/.test(_)?n&&(E=!0):k=!0)}function X(e){var n=e.value.replace(/[@#]__PURE__/g," ");return!(/^\s*$/.test(n)&&!/^\s*$/.test(e.value))&&(/comment[134]/.test(e.type)?(B("//"+n),k=!0):"comment2"==e.type&&B("/*"+n+"*/"),!0)}return{get:function(){T||I(!0);return D+_},reset:O,indent:Y,should_break:e.beautify&&e.width?function(){return m>=e.width}:a,has_parens:function(){return"("==u.slice(-1)},newline:G,print:B,space:H,comma:function(){V(),B(","),V(),H()},colon:function(){B(":"),H()},last:function(){return u},semicolon:W,force_semicolon:function(){h&&B(";");B(";")},to_utf8:q,print_name:function(e){B(q(e.toString(),!0))},print_string:e.inline_script?function(e,n){e=P(e,n).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),B(e.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(e,n){B(P(e,n))},with_indent:U,with_block:function(e,n){B("{"),G(),U(e),K(n),Y(),B("}")},with_parens:function(e){B("("),V(),e(),V(),B(")")},with_square:function(e){B("["),V(),e(),V(),B("]")},add_mapping:K,option:function(n){return e[n]},prepend_comments:e.comments||e.shebang?function(t){var i,r=this;t instanceof te?i=t.value:t instanceof An&&(i=t.expression);var o=c(t);o||(o=[]);if(i){var a=new kn(function(e){if(!function(e,n){if(n instanceof g)return n.left===e;if("Call"==n.TYPE)return n.expression===e;if(n instanceof z)return n.condition===e;if(n instanceof Z)return n.expression===e;if(n instanceof te)return!0;if(n instanceof Ve)return n.expressions[0]===e;if(n instanceof Qe)return n.expression===e;if(n instanceof bn)return!0;if(n instanceof An)return!0}(e,a.parent()))return!0;var n=c(e);n&&(o=o.concat(n))});a.push(t),i.walk(a)}if(1==b&&0==m){o.length>0&&e.shebang&&"comment5"==o[0].type&&(B("#!"+o.shift().value+"\n"),Y());var s=e.preamble;s&&B(s.replace(/\r\n?|\u2028|\u2029|(^|\S)\s*$/g,"$1\n"))}var f=!1;(o=o.filter(n,t)).forEach(function(e,n){J(e,n),X(e)&&(f=!0)}),f&&J(t.start,!0);function c(e){var n=e.start;if(!n){if(!i)return;e.start=n=new AST_Token}var t=n.comments_before;if(!t){if(!i)return;n.comments_before=t=[]}if(t._dumped!==r)return t._dumped=r,t}}:o,append_comments:e.comments?function(e,t){var i=e.end;if(!i)return;var r=i[t?"comments_before":"comments_after"];if(!r||r._dumped===this)return;if(!(e instanceof Ke||all(r,function(e){return!/comment[134]/.test(e.type)})))return;r._dumped=this,r.filter(n,e).forEach(function(e,n){J(e,n||!t),X(e)})}:o,push_node:function(e){v.push(e)},pop_node:e.preserve_line?function(){var e=v.pop();e.start&&e.start.line>b&&N(e.start.line-b)}:function(){v.pop()},parent:function(e){return v[v.length-2-(e||0)]}}}return function(){function e(e,n){e.DEFMETHOD("_codegen",n)}var n=!1;Oe.DEFMETHOD("print",function(e,n){var t=this;function i(){e.prepend_comments(t),t.add_source_map(e),t._codegen(e),e.append_comments(t)}e.push_node(t),n||t.needs_parens(e)?e.with_parens(i):i(),e.pop_node()});var t=In({inline_script:!1,shebang:!1,width:!1});function i(e,n){e.DEFMETHOD("needs_parens",n)}function r(e){var n=e.parent();return!e.has_parens()&&Cn(e,!1,!0)?this.name||!(n instanceof ae):!!(e.option("webkit")&&n instanceof Ne&&n.expression===this)||(!!(e.option("wrap_iife")&&n instanceof w&&n.expression===this)||void 0)}function s(e){return!e.has_parens()&&Cn(e,!0)}function m(e){var n=e.parent();return n instanceof g?"**"==n.operator&&n.left===this:n instanceof w?n.expression===this:n instanceof A||(n instanceof Ne?n.expression===this:n instanceof un?n.tag===this:void 0)}function T(e,n){return!!e.terminal&&((n instanceof w||n instanceof Ne)&&n.expression===e)}function C(e,n){var t=n.parent();return t instanceof v||(t instanceof g?!(t instanceof _):t instanceof w?t.expression===e:t instanceof A||(t instanceof z?t.condition===e:t instanceof Ne?t.expression===e:t instanceof un?t.tag===e:t instanceof gn||void 0))}function P(e,t,i,r){var o=e.length-1,a=r,s=n;e.forEach(function(e,r){a&&(e instanceof X?"use asm"==e.value&&(n=!0):e instanceof ne||(e instanceof Ge&&e.body instanceof Xe&&i.force_semicolon(),a=!1)),e instanceof ne||(i.indent(),e.print(i),r==o&&t||(i.newline(),t&&i.newline()))}),n=s}function j(e,n){n.print("{"),n.with_indent(function(){n.append_comments(e,!0)}),n.print("}")}function B(e,n,t){e.body.length>0?n.with_block(function(){P(e.body,!1,n,t)},e.end):j(e,n)}function U(e,n){return function(t){var i=this;t.print(e),t.space(),t.with_parens(function(){i.init.print(t),t.space(),t.print(n),t.space(),i.object.print(t)}),fn(i.body,t)}}function V(e,n){var t=e.value;"*"==t||$n(t)?n.print_name(t):n.print_string(t,e.quote)}function ee(e,n){n.with_parens(function(){e.argnames.forEach(function(e,t){t&&n.comma(),e.print(n)}),e.rest&&(e.argnames.length&&n.comma(),n.print("..."),e.rest.print(n))})}function te(e,n){var t=1==e.argnames.length&&!e.rest&&e.argnames[0];t instanceof AST_SymbolFunarg&&"yield"!=t.name?t.print(n):ee(e,n),n.space(),n.print("=>"),n.space(),e.value?e.value.print(n):B(e,n,!0)}function ie(e,n){e.name&&(n.space(),e.name.print(n)),ee(e,n),n.space(),B(e,n,!0)}function re(e){e.print("async"),e.space(),e.print("function"),ie(this,e)}function ye(e){e.print("async"),e.space(),e.print("function*"),ie(this,e)}function Ae(e){e.print("function*"),ie(this,e)}function ke(e,n){var t=e.value;is_async(t)&&(n.print("async"),n.space()),Dn(t)&&n.print("*"),Ze(e,n),ie(e.value,n)}function De(e,n){return function(t){t.print(e);var i=this[n];i&&(t.space(),i.print(t)),t.semicolon()}}function Me(e,n){n.newline(),e.body.forEach(function(e){n.indent(),e.print(n),n.newline()})}function Ie(e){return function(n){n.print(e),n.space(),this.definitions.forEach(function(e,t){t&&n.comma(),e.print(n)});var t=n.parent();t instanceof AST_IterationStatement&&t.init===this||n.semicolon()}}function Re(e,n,t){var i=!1;t&&e.walk(new kn(function(e){return!!i||(e instanceof g&&"in"==e.operator?i=!0:e instanceof Ue&&(!En(e)||!e.value)||void 0)})),e.print(n,i)}function Le(e,n){if(n.option("annotations")&&e.pure){var t,i=0,r=e;do{if(t=r,(r=n.parent(i++))instanceof w&&r.expression===t)return}while(r instanceof Ne&&r.expression===t);n.print("/*@__PURE__*/")}}function Be(e,n){n.with_parens(function(){e.args.forEach(function(e,t){t&&n.comma(),e.print(n)}),n.add_mapping(e.end)})}function Ke(e,n,t){var i=e.properties;i.length>0?n.with_block(function(){i.forEach(function(e,i){i&&(t||n.print(","),n.newline()),n.indent(),e.print(n)}),n.newline()},e.end):j(e,n)}function Ze(e,n){var t=e.key;if(t instanceof Oe)return n.with_square(function(){t.print(n)});var i=e.start&&e.start.quote;if(n.option("quote_keys")||i&&n.option("keep_quoted_props"))n.print_string(t,i);else if(""+ +t==t&&t>=0)n.print(ln(t));else if(e.private)n.print_name(t);else{if(Mn[t]?!n.option("ie"):$n(t))return n.print_name(t),t;n.print_string(t,i)}}function rn(e){return function(n){this.static&&(n.print("static"),n.space()),n.print(e),n.space(),Ze(this,n),ie(this.value,n)}}function sn(e){var n=e.definition();return n&&n.mangled_name||e.name}function fn(e,n){n.option("braces")&&!(e instanceof M||e instanceof Te)?pn(e,n):e instanceof ne?n.force_semicolon():(n.space(),e.print(n))}function cn(e,n){return e.args.length>0||n.option("beautify")}function ln(e){var n,t,i,r=e.toString(10).replace(/^0\./,".").replace("e+","e"),o=[r];return Math.floor(e)===e&&(e<0?o.push("-0x"+(-e).toString(16).toLowerCase()):o.push("0x"+e.toString(16).toLowerCase())),(n=/^\.0+/.exec(r))?(t=n[0].length,i=r.slice(t),o.push(i+"e-"+(i.length+t-1))):(n=/[^0]0+$/.exec(r))?(t=n[0].length-1,o.push(r.slice(0,-t)+"e"+t)):(n=/^(\d)\.(\d+)e(-?\d+)$/.exec(r))&&o.push(n[1]+n[2]+"e"+(n[3]-n[2].length)),function(e){for(var n=e[0],t=n.length,i=1;i<e.length;++i)e[i].length<t&&(n=e[i],t=n.length);return n}(o)}function pn(e,n){n.space(),e instanceof ne?j(e,n):e instanceof b?e.print(n):n.with_block(function(){n.indent(),e.print(n),n.newline()},e.end)}function dn(e,n){e.forEach(function(e){e.DEFMETHOD("add_source_map",n)})}Oe.DEFMETHOD("print_to_string",function(e){if(e){var n=In(e);return this.print(n),n.get()}return this.print(t),t.reset()}),i(Oe,a),i(p,r),i(h,r),i(k,r),i(he,r),i(ve,r),i(Ce,s),i(v,m),i(gn,m),i(Ve,function(e){var n=e.parent();return n instanceof f||En(n)&&n.value===this||n instanceof v||n instanceof g||n instanceof w||n instanceof A||n instanceof F||n instanceof z||n instanceof H||n instanceof W||n instanceof ae||n instanceof de||n instanceof je||n instanceof Ne&&n.expression===this||n instanceof We||n instanceof un&&n.tag===this||n instanceof gn||n instanceof Sn||n instanceof An}),i(g,function(e){var n=e.parent();if(n instanceof v)return!0;if(n instanceof g){var t=n.operator,i=zn[t],r=this.operator,o=zn[r];return i>o||"??"==t&&("&&"==r||"||"==r)||i==o&&this===n["**"==t?"left":"right"]}return n instanceof w?n.expression===this:n instanceof A||(n instanceof Ne?n.expression===this:n instanceof un?n.tag===this:n instanceof gn||void 0)}),i(Ne,function(e){var n=e.parent();return n instanceof Ee&&n.expression===this&&"Call"==root_expr(this).TYPE||T(this,n)}),i(w,function(e){var n=e.parent();if(n instanceof Ee)return n.expression===this;if(e.option("webkit")&&this.expression instanceof he&&n instanceof Ne&&n.expression===this){var t=e.parent(1);if(t instanceof _&&t.left===n)return!0}return T(this,n)}),i(Ee,function(e){if(cn(this,e))return!1;var n=e.parent();return n instanceof w?n.expression===this:n instanceof Ne||(n instanceof un?n.tag===this:void 0)}),i(qe,function(e){if(!e.option("galio"))return!1;var n=e.parent();return n instanceof Ne&&n.expression===this&&/^0/.test(ln(this.value))}),i(c,function(e){return C(this,e)}),i(_,function(e){return!!C(this,e)||(e.option("v8")?this.left instanceof J:this.left instanceof K?s(e):void 0)}),i(u,function(e){return C(this,e)}),i(z,function(e){return C(this,e)||e.option("extendscript")&&e.parent()instanceof z}),i(An,function(e){return C(this,e)}),e(X,function(e){var n=this.quote,t=this.value;switch(e.option("quote_style")){case 0:case 2:-1==t.indexOf('"')&&(n='"');break;case 1:-1==t.indexOf("'")&&(n="'")}e.print(n+t+n),e.semicolon()}),e(R,function(e){e.print("debugger"),e.semicolon()}),e(_n,function(e){P(this.body,!0,e,!0),e.print("")}),e(Se,function(e){this.label.print(e),e.colon(),this.body.print(e)}),e(Ge,function(e){this.body.print(e),e.semicolon()}),e(b,function(e){B(this,e)}),e(ne,function(e){e.semicolon()}),e(Q,function(e){var n=this;e.print("do"),pn(n.body,e),e.space(),e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),e.semicolon()}),e(xn,function(e){var n=this;e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),fn(n.body,e)}),e(ue,function(e){var n=this;e.print("for"),e.space(),e.with_parens(function(){n.init?(n.init instanceof Y?n.init.print(e):Re(n.init,e,!0),e.print(";"),e.space()):e.print(";"),n.condition?(n.condition.print(e),e.print(";"),e.space()):e.print(";"),n.step&&n.step.print(e)}),fn(n.body,e)}),e(le,U("for await","of")),e(pe,U("for","in")),e(de,U("for","of")),e(Tn,function(e){var n=this;e.print("with"),e.space(),e.with_parens(function(){n.expression.print(e)}),fn(n.body,e)}),e(oe,function(e){e.print("export"),e.space(),this.body.print(e)}),e(ae,function(e){e.print("export"),e.space(),e.print("default"),e.space();var n=this.body;n.print(e),n instanceof k&&!n.name||n instanceof AST_DefClass||n instanceof AST_LambdaDefinition||n instanceof AST_LambdaExpression&&!n.name&&!En(n)||e.semicolon()}),e(se,function(e){var n=this;e.print("export"),e.space();var t=n.keys.length;function i(t){var i=n.aliases[t],r=n.keys[t];V(r,e),i.value!=r.value&&(e.space(),e.print("as"),e.space(),V(i,e))}0==t?j(n,e):"*"==n.keys[0].value?i(0):e.with_block(function(){e.indent(),i(0);for(var n=1;n<t;n++)e.print(","),e.newline(),e.indent(),i(n);e.newline()},n.end),e.space(),e.print("from"),e.space(),n.path.print(e),e.semicolon()}),e(fe,function(e){e.print("export"),e.space(),Ke(this,e),e.semicolon()}),e(be,function(e){e.print("import"),e.space(),this.default&&this.default.print(e),this.all&&(this.default&&e.comma(),this.all.print(e)),this.properties&&(this.default&&e.comma(),Ke(this,e)),(this.all||this.default||this.properties)&&(e.space(),e.print("from"),e.space()),this.path.print(e),e.semicolon()}),e(c,function(e){te(this,e)}),e(u,function(e){e.print("async"),e.space(),te(this,e)}),e(xe,function(e){e.print("function"),ie(this,e)}),e(l,re),e(p,re),e(d,ye),e(h,ye),e(_e,Ae),e(ve,Ae),e(A,function(e){e.print("class"),this.name&&(e.space(),this.name.print(e)),this.extends&&(e.space(),e.print("extends"),e.space(),this.extends.print(e)),e.space(),Ke(this,e,!0)}),e(E,function(e){this.static&&(e.print("static"),e.space()),Ze(this,e),this.value&&(e.space(),e.print("="),e.space(),this.value.print(e)),e.semicolon()}),e(D,rn("get")),e($,rn("set")),e(q,function(e){this.static&&(e.print("static"),e.space()),ke(this,e)}),e(O,function(e){e.print("static"),e.space(),B(this.value,e)}),e(Ye,De("return","value")),e(hn,De("throw","value")),e(y,De("break","label")),e(I,De("continue","label")),e(ge,function(e){var n=this;e.print("if"),e.space(),e.with_parens(function(){n.condition.print(e)}),n.alternative?(!function(e,n){var t=e.body;if(n.option("braces")&&!(t instanceof M||t instanceof Te)||n.option("ie")&&t instanceof Q)return pn(t,n);if(!t)return n.force_semicolon();for(;;)if(t instanceof ge){if(!t.alternative)return void pn(e.body,n);t=t.alternative}else{if(!(t instanceof Je))break;t=t.body}fn(e.body,n)}(n,e),e.space(),e.print("else"),n.alternative instanceof ge?(e.space(),n.alternative.print(e)):fn(n.alternative,e)):fn(n.body,e)}),e(en,function(e){var n=this;e.print("switch"),e.space(),e.with_parens(function(){n.expression.print(e)}),e.space();var t=n.body.length-1;t<0?j(n,e):e.with_block(function(){n.body.forEach(function(n,i){e.indent(!0),n.print(e),i<t&&n.body.length>0&&e.newline()})},n.end)}),e(L,function(e){e.print("default:"),Me(this,e)}),e(S,function(e){e.print("case"),e.space(),this.expression.print(e),e.print(":"),Me(this,e)}),e(vn,function(e){e.print("try"),e.space(),B(this,e),this.bcatch&&(e.space(),this.bcatch.print(e)),this.bfinally&&(e.space(),this.bfinally.print(e))}),e(x,function(e){var n=this;e.print("catch"),n.argname&&(e.space(),e.with_parens(function(){n.argname.print(e)})),e.space(),B(n,e)}),e(ce,function(e){e.print("finally"),e.space(),B(this,e)}),e(M,Ie("const")),e(Te,Ie("let")),e(wn,Ie("var")),e(Sn,function(e){if(this.name.print(e),this.value){e.space(),e.print("="),e.space();var n=e.parent(1),t=n instanceof ue||n instanceof AST_ForEnumeration;Re(this.value,e,t)}}),e(H,function(e){this.name.print(e),e.space(),e.print("="),e.space(),this.value.print(e)}),e(w,function(e){Le(this,e),this.expression.print(e),this.optional&&e.print("?."),Be(this,e)}),e(Ee,function(e){Le(this,e),e.print("new"),e.space(),this.expression.print(e),cn(this,e)&&Be(this,e)}),e(Ve,function(e){this.expressions.forEach(function(n,t){t>0&&(e.comma(),e.should_break()&&(e.newline(),e.indent())),n.print(e)})}),e(Z,function(e){var n=this,t=n.expression;t.print(e);var i=n.property;e.option("ie")&&Mn[i]||n.quoted&&e.option("keep_quoted_props")?(n.optional&&e.print("?."),e.with_square(function(){e.add_mapping(n.end),e.print_string(i)})):(t instanceof qe&&!/[ex.)]/i.test(e.last())&&e.print("."),e.print(n.optional?"?.":"."),e.add_mapping(n.end),e.print_name(i))}),e(Qe,function(e){var n=this;n.expression.print(e),n.optional&&e.print("?."),e.with_square(function(){n.property.print(e)})}),e(We,function(e){e.print("..."),this.expression.print(e)}),e(yn,function(e){var n=this.operator,t=this.expression;e.print(n),(/^[a-z]/i.test(n)||/[+-]$/.test(n)&&t instanceof yn&&/^[+-]/.test(t.operator))&&e.space(),t.print(e)}),e(bn,function(e){this.expression.print(e),e.add_mapping(this.end),e.print(this.operator)}),e(g,function(e){this.left.print(e),e.space(),e.print(this.operator),e.space(),this.right.print(e)}),e(z,function(e){this.condition.print(e),e.space(),e.print("?"),e.space(),this.consequent.print(e),e.space(),e.colon(),this.alternative.print(e)}),e(v,function(e){e.print("await"),e.space(),this.expression.print(e)}),e(An,function(e){e.print(this.nested?"yield*":"yield"),this.expression&&(e.space(),this.expression.print(e))}),e(f,function(e){var n=this.elements,t=n.length;e.with_square(t>0?function(){e.space(),n.forEach(function(n,i){i&&e.comma(),n.print(e),i===t-1&&n instanceof me&&e.comma()}),e.space()}:o)}),e(G,function(e){var n=this.elements,t=n.length,i=this.rest;e.with_square(t||i?function(){e.space(),n.forEach(function(n,t){t&&e.comma(),n.print(e)}),i?(t&&e.comma(),e.print("..."),i.print(e)):n[t-1]instanceof me&&e.comma(),e.space()}:o)}),e(W,function(e){var n=Ze(this,e),t=this.value;if(n)if(t instanceof H){if(t.name instanceof tn&&n==sn(t.name))return e.space(),e.print("="),e.space(),void t.value.print(e)}else if(t instanceof tn&&n==sn(t))return;e.colon(),t.print(e)}),e(K,function(e){var n=this.properties,t=n.length,i=this.rest;t||i?e.with_block(function(){n.forEach(function(n,t){t&&(e.print(","),e.newline()),e.indent(),n.print(e)}),i&&(t&&(e.print(","),e.newline()),e.indent(),e.print("..."),i.print(e)),e.newline()},this.end):j(this,e)}),e(Ce,function(e){Ke(this,e)}),e($e,function(e){Ze(this,e),e.colon(),this.value.print(e)}),e(Pe,function(e){ke(this,e)}),e(Fe,rn("get")),e(ze,rn("set")),e(tn,function(e){e.print_name(sn(this))}),e(on,function(e){var n=sn(this);e.print_name(n);var t=this.alias;t.value!=n&&(e.space(),e.print("as"),e.space(),V(t,e))}),e(an,function(e){var n=sn(this),t=this.key;t.value&&t.value!=n&&(V(t,e),e.space(),e.print("as"),e.space()),e.print_name(n)}),e(me,o),e(un,function(e){this.tag&&this.tag.print(e),e.print("`");for(var n=0;n<this.expressions.length;n++)e.print(this.strings[n]),e.print("${"),this.expressions[n].print(e),e.print("}");e.print(this.strings[n]),e.print("`")}),e(N,function(e){e.print(""+this.value)}),e(Xe,function(e){e.print_string(this.value,this.quote)}),e(qe,function(e){var t=this.start;n&&t&&null!=t.raw?e.print(t.raw):e.print(ln(this.value))}),e(He,function(e){var n=this.value,t=n.toString(),i=t.lastIndexOf("/");n.raw_source?t="/"+n.raw_source+t.slice(i):1==i?t="/(?:)"+t.slice(i):t.indexOf("/",1)<i&&(t="/"+t.slice(1,i).replace(/\\\\|[^/]?\//g,function(e){return"\\"==e[0]?e:e.slice(0,-1)+"\\/"})+t.slice(i)),e.print(e.to_utf8(t).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(e){switch(e[1]){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\t";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}).replace(/[\n\r\u2028\u2029]/g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}),dn([Oe,Se],o),dn([f,v,b,x,N,R,Y,J,X,ce,we,xe,Ee,Ce,We,Je,tn,en,nn,vn,yn,An],function(e){e.add_mapping(this.start)}),dn([F,W,je],function(e){"string"==typeof this.key&&e.add_mapping(this.start,this.key)})}(),{OutputStream:In}}),e("skylark-uglifyjs/scope",["./utils","./ast","./parse"],function(e,n,t){"use strict";const{defaults:i,keep_name:r,mergeSort:o,member:a,push_uniq:s,make_node:f,return_false:c,return_this:u,return_true:l,string_template:p,DEF_BITPROPS:d,makePredicate:h,Dictionary:_}=e,{AST_Arrow:v,AST_Assign:m,AST_AsyncArrow:g,AST_Block:b,AST_Call:y,AST_Catch:w,AST_Class:S,AST_Conditional:x,AST_DefClass:T,AST_Definitions:A,AST_DefaultValue:k,AST_Defun:E,AST_Destructuring:D,AST_Destructured:O,AST_DestructuredKeyVal:q,AST_Dot:C,AST_DotHash:F,AST_Export:$,AST_For:P,AST_ForIn:j,AST_ForOf:z,AST_ForEnumeration:M,AST_Function:N,AST_Import:I,AST_IterationStatement:R,AST_Label:L,AST_LabeledStatement:B,AST_LabelRef:H,AST_Lambda:Y,AST_LambdaDefinition:U,AST_LoopControl:V,AST_NameMapping:G,AST_Node:W,AST_Scope:K,AST_Sequence:J,AST_String:X,AST_Sub:Q,AST_Switch:Z,AST_SwitchBranch:ee,AST_Symbol:ne,AST_SymbolBlockDeclaration:te,AST_SymbolCatch:ie,AST_SymbolClass:re,AST_SymbolConst:oe,AST_SymbolDeclaration:ae,AST_SymbolDefClass:se,AST_SymbolDefun:fe,AST_SymbolExport:ce,AST_SymbolFunarg:ue,AST_SymbolImport:le,AST_SymbolLambda:pe,AST_SymbolLet:de,AST_SymbolMethod:he,AST_SymbolRef:_e,AST_SymbolVar:ve,AST_Toplevel:me,AST_Try:ge,AST_VarDef:be,AST_With:ye,TreeWalker:we,walk_body:Se,walk_lambda:xe,AST_BlockScope:Te,AST_Unary:Ae}=n,{RESERVED_WORDS:ke}=t;function Ee(e,n,t,i){this._bits=0,this.defun=void 0,this.eliminated=0,this.id=e,this.init=i,this.mangled_name=null,this.name=t.name,this.orig=[t],this.references=[],this.replaced=0,this.safe_ids=void 0,this.scope=n}Ee.prototype={forEach:function(e){this.orig.forEach(e),this.references.forEach(e)},mangle:function(e){if(!this.mangled_name){var n=this.global&&e.cache&&e.cache.props;if(n&&n.has(this.name))this.mangled_name=n.get(this.name);else if(this.unmangleable(e))Fe(this.scope,e).set(this.name,!0);else{var t=this.redefined();this.mangled_name=t?t.mangled_name||t.name:function(e,n){var t,i=e.scope,r=Fe(i,n),o=i.cname_holes,s=new _,f=[i];e.forEach(function(e){var t=e.scope;do{if(a(t,f))break;Fe(t,n).each(function(e,n){s.set(n,e)}),f.push(t)}while(t=t.parent_scope)});for(var c=0;c<o.length;c++)if(t=Pe(o[c]),!s.has(t))return o.splice(c,1),r.set(t,!0),t;for(;;)if(t=Pe(++i.cname),!(r.has(t)||ke[t]||n.reserved.has[t])){if(!s.has(t))break;o.push(i.cname)}return r.set(t,!0),t}(this,e),n&&n.set(this.name,this.mangled_name)}}},redefined:function(){var e=this.defun;if(e){var n=this.name,t=e.variables.get(n)||e instanceof me&&e.globals.get(n)||this.orig[0]instanceof oe&&find_if(function(e){return e.name==n},e.enclosed);return t&&t!==this?t.redefined()||t:void 0}},unmangleable:function(e){if(this.exported)return!0;if(this.undeclared)return!0;if(!e.eval&&this.scope.pinned())return!0;if(e.keep_fargs&&((n=this).orig[0]instanceof ue||n.orig[1]instanceof ue))return!0;var n;if(e.keep_fnames){var t=this.orig[0];if(t instanceof re)return!0;if(t instanceof se)return!0;if(t instanceof fe)return!0;if(t instanceof pe)return!0}return!(e.toplevel||!this.global)}},d(Ee,["const_redefs","cross_loop","direct_access","exported","global","undeclared"]);var De=h("delete ++ --");function Oe(e,n){return n instanceof m?n.left===e&&e:n instanceof k?n.name===e&&e:n instanceof O?e:n instanceof q?e:n instanceof M?n.init===e&&e:n instanceof Ae?De[n.operator]&&n.expression:void 0}function qe(e,n){e.enclosed=[],e.parent_scope=n,e.functions=new _,e.variables=new _,n&&(e.make_def=n.make_def)}function Ce(e,n){qe(e,n),e.uses_eval=!1,e.uses_with=!1}function Fe(e,n){var t=e.names_in_use;if(!t){e.cname=-1,e.cname_holes=[],e.names_in_use=t=new _;var i=n.cache&&n.cache.props;e.enclosed.forEach(function(e){e.unmangleable(n)&&t.set(e.name,!0),e.global&&i&&i.has(e.name)&&t.set(i.get(e.name),!0)})}return t}function $e(e){return e=i(e,{eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(e.reserved)||(e.reserved=[]),s(e.reserved,"arguments"),e.reserved.has=h(e.reserved),e}me.DEFMETHOD("figure_out_scope",function(e){e=i(e,{cache:null,ie:!1});var n=this,t=null,r=!1,o=0,a=n.parent_scope=null,f=new we(function(n,i){if(n instanceof T){var o=r;return r=f.parent()instanceof AST_ExportDeclaration,n.name.walk(f),r=o,u(function(){n.extends&&n.extends.walk(f),n.properties.forEach(function(e){e.walk(f)})}),!0}if(n instanceof A){var o=r;return r=f.parent()instanceof AST_ExportDeclaration,i(),r=o,!0}if(n instanceof U){var o=r;return r=f.parent()instanceof AST_ExportDeclaration,n.name.walk(f),r=o,u(function(){n.argnames.forEach(function(e){e.walk(f)}),n.rest&&n.rest.walk(f),Se(n,f)}),!0}if(n instanceof ee)return n.init_vars(a),i(),!0;if(n instanceof ge)return u(function(){Se(n,f)}),n.bcatch&&n.bcatch.walk(f),n.bfinally&&n.bfinally.walk(f),!0;if(n instanceof ye){var s=a;do{if((s=s.resolve()).uses_with)break;s.uses_with=!0}while(s=s.parent_scope);return u(i),!0}if(n instanceof Te)return u(i),!0;if(n instanceof ne&&(n.scope=a),n instanceof L&&(n.thedef=n,n.references=[]),n instanceof ie)a.def_variable(n).defun=t;else if(n instanceof oe){var c=a.def_variable(n);c.defun=t,r&&(c.exported=!0)}else if(n instanceof fe){var c=t.def_function(n,f.parent());r&&(c.exported=!0)}else if(n instanceof ue)t.def_variable(n);else if(n instanceof pe){var c=t.def_function(n,"arguments"==n.name?void 0:t);e.ie&&"arguments"!=n.name&&(c.defun=t.parent_scope.resolve())}else if(n instanceof de){var c=a.def_variable(n);r&&(c.exported=!0)}else if(n instanceof ve){var c=t.def_variable(n,n instanceof le?void 0:null);r&&(c.exported=!0)}function u(e){n.init_vars(a);var i=t,r=a;n instanceof K&&(t=n),a=n,e(),a=r,t=i}});n.make_def=function(e,n){return new Ee(++o,this,e,n)},n.walk(f),n.globals=new _;var c=[],f=new we(function(t){if(t instanceof w){if(!(t.argname instanceof O))return;return c.push(t),t.argname.walk(f),c.pop(),Se(t,f),!0}if(t instanceof Y)return c.push(t),t.name&&t.name.walk(f),t.argnames.forEach(function(e){e.walk(f)}),t.rest&&t.rest.walk(f),c.pop(),xe(t,f),!0;if(t instanceof V)return t.label&&t.label.thedef.references.push(t),!0;if(t instanceof ae){var i=t.definition();if(i.preinit=i.references.length,t instanceof ie){var r=i.redefined();if(r)for(var o=t.scope;o&&s(o.enclosed,r)&&o!==r.scope;o=o.parent_scope);}else if(t instanceof oe){var r=i.redefined();r&&(r.const_redefs=!0)}else if(i.scope!==t.scope&&(t instanceof fe||t instanceof ue||t instanceof ve)){t.mark_enclosed(e);var r=t.scope.find_variable(t.name);t.thedef!==r&&(t.thedef=r,r.orig.push(t),t.mark_enclosed(e))}if("arguments"!=t.name)return!0;var a=t instanceof ve&&f.parent();if(a instanceof be&&!a.value)return!0;var l=t.scope.resolve().find_variable("arguments");return l&&u(l)&&(l.scope.uses_arguments=3),!0}if(t instanceof _e){for(var p=t.name,l=t.scope.find_variable(p),d=c.length;d>0&&l&&!((d=c.lastIndexOf(l.scope,d-1))<0);){var h=l.orig[0];if(h instanceof ie||h instanceof ue||h instanceof pe){t.in_arg=!0;break}l=l.scope.parent_scope.find_variable(p)}if(l){if("arguments"==p&&u(l)){var a=f.parent();Oe(t,a)?l.scope.uses_arguments=3:l.scope.uses_arguments<2&&!(a instanceof AST_PropAccess&&a.expression===t)?l.scope.uses_arguments=2:l.scope.uses_arguments||(l.scope.uses_arguments=!0)}}else l=n.def_global(t);if("eval"==p){var a=f.parent();if("Call"==a.TYPE&&a.expression===t){var o=t.scope;do{if((o=o.resolve()).uses_eval)break;o.uses_eval=!0}while(o=o.parent_scope)}else l.undeclared&&(n.uses_eval=!0)}if(l.init instanceof U&&l.scope!==l.init.name.scope){var _=t.scope;do{if(_===l.init.name.scope)break}while(_=_.parent_scope);_||(l.init=void 0)}return t.thedef=l,t.reference(e),!0}});function u(e){return e.orig[0]instanceof ue&&!(e.orig[1]instanceof ue||e.orig[2]instanceof ue)&&!is_arrow(e.scope)}function l(t,i){var r=t.name,o=t.thedef;if(!all(o.orig,function(e){return!(e instanceof oe||e instanceof de)}))return!1;var a=i.find_variable(r);if(a){var s=a.redefined();s&&(a=s)}else a=n.globals.get(r);return a?a.orig.push(t):a=i.def_variable(t),a.undeclared&&n.variables.set(r,a),!!("arguments"==r&&u(o)&&t instanceof pe)||(o.defun=a.scope,o.forEach(function(n){n.redef=o,n.thedef=a,n.reference(e)}),!0)}n.walk(f),e.ie&&n.walk(new we(function(e){if(e instanceof ie){var n=e.thedef,t=n.defun;return"arguments"!=n.name&&t.name instanceof pe&&t.name.name==n.name&&(t=t.parent_scope.resolve()),l(e,t),!0}if(e instanceof pe){var n=e.thedef;return l(e,e.scope.parent_scope.resolve())?void 0!==e.thedef.init?e.thedef.init=!1:n.init&&(e.thedef.init=n.init):n.defun=void 0,!0}}))}),me.DEFMETHOD("def_global",function(e){var n=this.globals,t=e.name;if(n.has(t))return n.get(t);var i=this.make_def(e);return i.undeclared=!0,i.global=!0,n.set(t,i),i}),Te.DEFMETHOD("init_vars",function(e){qe(this,e)}),K.DEFMETHOD("init_vars",function(e){Ce(this,e)}),v.DEFMETHOD("init_vars",function(e){return Ce(this,e),this}),g.DEFMETHOD("init_vars",function(e){Ce(this,e)}),Y.DEFMETHOD("init_vars",function(e){return Ce(this,e),this.uses_arguments=!1,this.def_variable(new ue({name:"arguments",scope:this,start:this.start,end:this.end})),this}),ne.DEFMETHOD("mark_enclosed",function(e){for(var n=this.definition(),t=this.scope;t&&s(t.enclosed,n)&&(e?(e.keep_fargs&&t instanceof Y&&t.each_argname(function(e){s(n.scope.enclosed,e.definition())}),e.keep_fnames&&t.functions.each(function(e){s(n.scope.enclosed,e)})):t._var_names=void 0,t!==n.scope);t=t.parent_scope);}),ne.DEFMETHOD("reference",function(e){this.definition().references.push(this),this.mark_enclosed(e)}),Te.DEFMETHOD("find_variable",function(e){return this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),Te.DEFMETHOD("def_function",function(e,n){var t=this.def_variable(e,n);return(!t.init||t.init instanceof U)&&(t.init=n),this.functions.set(e.name,t),t}),Te.DEFMETHOD("def_variable",function(e,n){var t=this.variables.get(e.name);return t?(t.orig.push(e),t.init instanceof AST_LambdaExpression&&(t.init=n)):(t=this.make_def(e,n),this.variables.set(e.name,t),t.global=!this.parent_scope),e.thedef=t}),ne.DEFMETHOD("unmangleable",function(e){var n=this.definition();return!n||n.unmangleable(e)}),L.DEFMETHOD("unmangleable",c),ne.DEFMETHOD("definition",function(){return this.thedef}),me.DEFMETHOD("mangle_names",function(e){if((e=$e(e)).cache&&e.cache.props){var n=Fe(this,e);e.cache.props.each(function(e){n.set(e,!0)})}var t=-1,i=[],r=new we(function(n,a){var s;if(n instanceof Te){n instanceof B&&(s=t),e.webkit&&n instanceof R&&n.init instanceof AST_Let&&n.init.definitions.forEach(function(e){e.name.match_symbol(function(e){if(e instanceof de){var n=e.definition(),t=e.scope.parent_scope,i=t.def_variable(e);e.thedef=n,t.to_mangle.push(i),n.redefined=function(){return i}}})},!0);var f=n.to_mangle=[];if(n.variables.each(function(n){(function(n){var t=n.orig[0],r=n.redefined();if(!r){if(!(t instanceof oe))return!1;var o=n.scope.resolve();if(n.scope===o)return!1;if(n.scope.parent_scope.find_variable(t.name))return!1;r=o.def_variable(t),o.to_mangle.push(r)}i.push(n),n.references.forEach(a),(t instanceof ie||t instanceof oe)&&(a(t),n.redefined=function(){return r});return!0;function a(t){t.thedef=r,t.reference(e),t.thedef=n}})(n)||f.push(n)}),a(),e.cache&&n instanceof me&&n.globals.each(o),n instanceof E&&r.has_directive("use asm")){var c=new _e(n.name);c.scope=n,c.reference(e)}if(f.length>36){var u=f.map(function(e,n){return n}).sort(function(e,n){return f[n].references.length-f[e].references.length||e-n});f=u.slice(0,36).sort(function(e,n){return e-n}).map(function(e){return f[e]}).concat(u.slice(36).sort(function(e,n){return e-n}).map(function(e){return f[e]}))}return f.forEach(o),!(n instanceof B)||e.v8&&function(n){var t,i=0;for(;t=n.parent(i++);){if(t instanceof b)return t instanceof me&&!e.toplevel;if(t instanceof B)return!0}}(r)||(t=s),!0}if(n instanceof L){var l;do{l=Pe(++t)}while(ke[l]);return n.mangled_name=l,!0}});function o(n){e.reserved.has[n.name]||n.mangle(e)}this.walk(r),i.forEach(o)}),me.DEFMETHOD("find_colliding_names",function(e){var n=e.cache&&e.cache.props,t=Object.create(ke);return e.reserved.forEach(i),this.globals.each(r),this.walk(new we(function(e){e instanceof Te&&e.variables.each(r)})),t;function i(e){t[e]=!0}function r(t){var r=t.name;if(t.global&&n&&n.has(r))r=n.get(r);else if(!t.unmangleable(e))return;i(r)}}),me.DEFMETHOD("expand_names",function(e){Pe.reset(),Pe.sort(),e=$e(e);var n=this.find_colliding_names(e),t=0;function i(i){if(!(i.global&&e.cache||i.unmangleable(e)||e.reserved.has[i.name])){var r=i.redefined(),o=r?r.rename||r.name:function(){var e;do{e=Pe(t++)}while(n[e]);return e}();i.rename=o,i.forEach(function(e){e.definition()===i&&(e.name=o)})}}this.globals.each(i),this.walk(new we(function(e){e instanceof Te&&e.variables.each(i)}))}),W.DEFMETHOD("tail_node",u),J.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),me.DEFMETHOD("compute_char_frequency",function(e){e=$e(e),Pe.reset();var n=ne.prototype.add_source_map;try{ne.prototype.add_source_map=function(){this.unmangleable(e)||Pe.consider(this.name,-1)},e.properties&&(C.prototype.add_source_map=function(){Pe.consider(this.property,-1)},Q.prototype.add_source_map=function(){!function e(n){n instanceof X?Pe.consider(n.value,-1):n instanceof x?(e(n.consequent),e(n.alternative)):n instanceof J&&e(n.tail_node())}(this.property)}),Pe.consider(this.print_to_string(),1)}finally{ne.prototype.add_source_map=n,delete C.prototype.add_source_map,delete Q.prototype.add_source_map}Pe.sort()});var Pe=function(){var e=Object.create(null);function n(n){for(var t=[],i=0;i<n.length;i++){var r=n[i];t.push(r),e[r]=-.01*i}return t}var t,i,r=n("0123456789"),o=n("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_");function a(){t=null,i=Object.create(e)}function s(e,n){return i[n]-i[e]}function f(e){var n=o[e%54];for(e=Math.floor(e/54);--e>=0;e>>=6)n+=t[63&e];return n}return f.consider=function(e,n){for(var t=e.length;--t>=0;)i[e[t]]+=n},f.sort=function(){t=o.sort(s).concat(r).sort(s)},f.reset=a,a(),f}();return{base54:Pe,is_lhs:Oe}}),e("skylark-uglifyjs/compress",["./utils","./ast","./output","./parse","./scope"],function(e,n,t,i,r){"use strict";const{AST_Accessor:o,AST_Array:a,AST_Arrow:s,AST_Assign:f,AST_AsyncArrow:c,AST_Await:u,AST_BigInt:l,AST_Binary:p,AST_Block:d,AST_BlockScope:h,AST_BlockStatement:_,AST_Boolean:v,AST_Break:m,AST_Call:g,AST_Case:b,AST_Catch:y,AST_Chain:w,AST_Class:S,AST_ClassExpression:x,AST_ClassInitBlock:T,AST_ClassProperty:A,AST_ClassStaticBlock:k,AST_ConciseMethod:E,AST_Conditional:D,AST_Const:O,AST_Constant:q,AST_Continue:C,AST_Debugger:F,AST_Default:$,AST_DefaultAssign:P,AST_DefaultValue:j,AST_DefClass:z,AST_Definitions:M,AST_Defun:N,AST_Destructuring:I,AST_Destructured:R,AST_DestructuredArray:L,AST_DestructuredKeyVal:B,AST_DestructuredObject:H,AST_Directive:Y,AST_Do:U,AST_Dot:V,AST_DWLoop:G,AST_EmptyStatement:W,AST_Exit:K,AST_Expansion:J,AST_Export:X,AST_ExportDeclaration:Q,AST_ExportDefault:Z,AST_ExportReferences:ee,AST_False:ne,AST_Finally:te,AST_For:ie,AST_ForEnumeration:re,AST_ForIn:oe,AST_Function:ae,AST_Hole:se,AST_If:fe,AST_Import:ce,AST_Infinity:ue,AST_IterationStatement:le,AST_Jump:pe,AST_LabeledStatement:de,AST_Lambda:he,AST_LambdaDefinition:_e,AST_LambdaExpression:ve,AST_Let:me,AST_LoopControl:ge,AST_NaN:be,AST_New:ye,AST_Node:we,AST_Null:Se,AST_Number:xe,AST_Object:Te,AST_ObjectKeyVal:Ae,AST_ObjectProperty:ke,AST_ObjectIdentity:Ee,AST_ObjectMethod:De,AST_PrefixedTemplateString:Oe,AST_PropAccess:qe,AST_RegExp:Ce,AST_Return:Fe,AST_Scope:$e,AST_Sequence:Pe,AST_SimpleStatement:je,AST_Spread:ze,AST_Statement:Me,AST_String:Ne,AST_Sub:Ie,AST_Switch:Re,AST_SwitchBranch:Le,AST_Symbol:Be,AST_SymbolCatch:He,AST_SymbolClassProperty:Ye,AST_SymbolConst:Ue,AST_SymbolDeclaration:Ve,AST_SymbolDefun:Ge,AST_SymbolExport:We,AST_SymbolFunarg:Ke,AST_SymbolImport:Je,AST_SymbolLambda:Xe,AST_SymbolLet:Qe,AST_SymbolMethod:Ze,AST_SymbolRef:en,AST_Template:nn,AST_TemplateString:tn,AST_This:rn,AST_Toplevel:on,AST_True:an,AST_Try:sn,AST_Unary:fn,AST_UnaryPostfix:cn,AST_UnaryPrefix:un,AST_Undefined:ln,AST_Var:pn,AST_VarDef:dn,AST_While:hn,AST_With:_n,AST_Yield:vn,TreeTransformer:mn,TreeWalker:gn,_INLINE:bn,_NOINLINE:yn,_PURE:wn,first_in_statement:Sn,is_arrow:xn,is_generator:Tn,walk_body:An,walk_lambda:kn}=n,{all:En,defaults:Dn,Dictionary:On,has_annotation:qn,HOP:Cn,make_node:Fn,makePredicate:$n,MAP:Pn,member:jn,noop:zn,push_uniq:Mn,regexp_source_fix:Nn,regexp_is_safe:In,remove:Rn,return_false:Ln,return_null:Bn,return_true:Hn,return_this:Yn}=e,{is_basic_identifier_string:Un,JS_Parse_Error:Vn,parse:Gn,PRECEDENCE:Wn,is_identifier_string:Kn}=i,{OutputStream:Jn}=t,{base54:Xn,is_lhs:Qn}=r;function Zn(e,n){if(!(this instanceof Zn))return new Zn(e,n);mn.call(this,this.before,this.after),this.options=Dn(e,{annotations:!n,arguments:!n,arrows:!n,assignments:!n,awaits:!n,booleans:!n,collapse_vars:!n,comparisons:!n,conditionals:!n,dead_code:!n,default_values:!n,directives:!n,drop_console:!1,drop_debugger:!n,evaluate:!n,expression:!1,functions:!n,global_defs:!1,hoist_exports:!n,hoist_funs:!1,hoist_props:!n,hoist_vars:!1,ie:!1,if_return:!n,imports:!n,inline:!n,join_vars:!n,keep_fargs:n,keep_fnames:!1,keep_infinity:!1,loops:!n,merge_vars:!n,module:!1,negate_iife:!n,objects:!n,optional_chains:!n,passes:1,properties:!n,pure_funcs:null,pure_getters:!n&&"strict",reduce_funcs:!n,reduce_vars:!n,rests:!n,sequences:!n,side_effects:!n,spreads:!n,strings:!n,switches:!n,templates:!n,top_retain:null,toplevel:!(!e||!e.module&&!e.top_retain),typeofs:!n,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!n,varify:!n,webkit:!1,yields:!n},!0);var t=this.options.evaluate;this.eval_threshold=/eager/.test(t)?1/0:+t;var i=this.options.global_defs;if("object"==typeof i)for(var r in i)/^@/.test(r)&&Cn(i,r)&&(i[r.slice(1)]=Gn(i[r],{expression:!0}));!0===this.options.inline&&(this.options.inline=4),this.drop_fargs=this.options.keep_fargs?Ln:function(e,n){if(e.length_read)return!1;var t=e.name;if(!t)return n&&"Call"==n.TYPE&&n.expression===e;if(t.fixed_value()!==e)return!1;var i=t.definition();if(i.direct_access)return!1;var r=i.escaped;return r&&1!=r.depth},this.options.module&&(this.directives["use strict"]=!0);var o=this.options.pure_funcs;"function"==typeof o?this.pure_funcs=o:"string"==typeof o?this.pure_funcs=function(e){var n;return e instanceof g?n=e.expression:e instanceof nn&&(n=e.tag),!(n&&o===n.print_to_string())}:Array.isArray(o)?this.pure_funcs=function(e){var n;return e instanceof g?n=e.expression:e instanceof nn&&(n=e.tag),!(n&&jn(n.print_to_string(),o))}:this.pure_funcs=Hn;var a=this.options.sequences;this.sequences_limit=1==a?800:0|a;var s=this.options.top_retain;s instanceof RegExp?this.top_retain=function(e){return s.test(e.name)}:"function"==typeof s?this.top_retain=s:s&&("string"==typeof s&&(s=s.split(/,/)),this.top_retain=function(e){return jn(e.name,s)});var f=this.options.toplevel;this.toplevel="string"==typeof f?{funcs:/funcs/.test(f),vars:/vars/.test(f)}:{funcs:f,vars:f}}return Zn.prototype=new mn(function(e,n,t){if(e._squeezed)return e;var i=e instanceof $e;i&&(this.option("arrows")&&xn(e)&&e.value&&(e.body=[e.first_statement()],e.value=null),e.hoist_properties(this),e.hoist_declarations(this),e.process_returns(this)),n(e,this),n(e,this);var r=e.optimize(this);return!i||r!==e||this.has_directive("use asm")||r.pinned()||(r.drop_unused(this),r.merge_variables(this)&&r.drop_unused(this),n(r,this)),r===e&&(r._squeezed=!0),r}),Zn.prototype.option=function(e){return this.options[e]},Zn.prototype.exposed=function(e){if(e.exported)return!0;if(e.undeclared)return!0;if(!(e.global||e.scope.resolve()instanceof on))return!1;var n=this.toplevel;return!En(e.orig,function(e){return n[e instanceof Ge?"funcs":"vars"]})},Zn.prototype.compress=function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var n=this.options.merge_vars,t=+this.options.passes||1,i=1/0,r=!1,o={ie:this.option("ie")},a=0;a<t;a++)if(e.figure_out_scope(o),(a>0||this.option("reduce_vars"))&&e.reset_opt_flags(this),this.options.merge_vars=n&&(r||a==t-1),e=e.transform(this),t>1){var s=0;if(e.walk(new gn(function(){s++})),we.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:a,min_count:i,count:s}),s<i)i=s,r=!1;else{if(r)break;r=!0}}return this.option("expression")&&e.process_expression(!1),e},function(e){function n(e,n){var t=n.get_property();if(!(t instanceof we)){var i;if(e instanceof a){var r=e.elements;if("length"==t)return Xn(r.length,e);"number"==typeof t&&t in r&&(i=r[t])}else if(e instanceof he){if("length"==t)return e.length_read=!0,Xn(e.argnames.length,e)}else if(e instanceof Te){t=""+t;for(var o=e.properties,s=o.length;--s>=0;){var f=o[s];if(!Pi(f))return;i||o[s].key!==t||(i=o[s].value)}}return i instanceof en&&i.fixed_value()||i}}function t(e,i,r,o,s,c,u){var l=i.parent(s);if(!(e.option("unsafe")&&l instanceof V&&function(e,n){if(e instanceof v)return Ft.Boolean[n];if(e instanceof xe)return Ft.Number[n];if(e instanceof Ne)return Ft.String[n];if("valueOf"==n)return!1;if(e instanceof a)return Ft.Array[n];if(e instanceof he)return Ft.Function[n];if(e instanceof Te)return Ft.Object[n];if(e instanceof Ce)return Ft.RegExp[n]&&!e.value.global}(o,l.property))){var d=Qn(r,l);if(d)return d;if(0!=s||!o||!o.is_constant()){if(l instanceof a)return t(e,i,l,l,s+1);if(l instanceof f)switch(l.operator){case"=":return t(e,i,l,o,s+1,c,u);case"&&=":case"||=":case"??=":return t(e,i,l,l,s+1);default:return}if(l instanceof p){if(!xt[l.operator])return;return t(e,i,l,l,s+1)}if(l instanceof g)return!c&&l.expression===r&&!l.is_expr_pure(e)&&(!(o instanceof ve)||!(l instanceof ye)&&o.contains_this());if(l instanceof D){if(l.condition===r)return;return t(e,i,l,l,s+1)}if(l instanceof re)return l.init===r;if(l instanceof Ae){if(l.value!==r)return;var h=i.parent(s+1);return t(e,i,h,h,s+2)}if(l instanceof qe){if(l.expression!==r)return;var _=n(o,l);return(!c||u)&&t(e,i,l,_,s+1)}if(l instanceof Pe){if(l.tail_node()!==r)return;return t(e,i,l,o,s+1,c,u)}}}}function i(e){return e instanceof S||e instanceof he}function r(e){return e instanceof S||e instanceof N||e instanceof ae}function w(e){return"arguments"==e.name&&e.scope.uses_arguments}function k(e,n){do{if(e===n)return!1;if(n instanceof $e)return!0}while(n=n.parent_scope)}function E(e,n,t){var i=e.redef||e.definition();return(!e.in_arg||!is_funarg(i))&&En(i.orig,function(e){return e instanceof Ue||e instanceof Qe?e instanceof Je||n&&ai(n,e):!(t&&e instanceof Xe)})}function P(e,n,t,i){return i instanceof f?"="==i.operator&&i.right===t:i instanceof g?i.expression!==t||i instanceof ye:i instanceof AST_ClassField?i.value===t&&!i.static:i instanceof K?i.value===t&&n.resolve()!==e.scope.resolve():i instanceof dn?i.value===t:void 0}function I(e,n){var t=In(en,e);return t.fixed=n||In(ln,e),t}function J(e,n){return function(t){var i=e(t),t=I(i,n),r=i.definition();return r.references.push(t),r.replaced++,t}}e(we,function(e,n){return e}),on.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var n=this.body,t=[],i=0;i<n.length;i++){var r=n[i];r instanceof Q?(n[i]=r=r.body,r instanceof M?r.definitions.forEach(function(e){e.name.match_symbol(o,!0)}):o(r.name)):r instanceof ee&&(n.splice(i--,1),[].push.apply(t,r.properties))}t.length&&n.push(In(ee,this,{properties:t}))}function o(e){if(e instanceof Ve){var n=In(We,e);n.alias=In(Ne,n,{value:n.name}),t.push(n)}}}),$e.DEFMETHOD("process_expression",function(e,n){var t=this,i=new mn(function(r){if(e){if(r instanceof Y&&(r=In(je,r,{body:In(Ne,r)})),r instanceof je)return n?n(r):In(Fe,r,{value:r.body})}else if(r instanceof Fe){if(n)return n(r);var o=r.value;return o instanceof Ne?In(Y,o):In(je,r,{body:o||In(un,r,{operator:"void",expression:In(xe,r,{value:0})})})}if(r instanceof d){if(r instanceof he){if(r!==t)return r}else if("awaits"===e&&r instanceof sn&&r.bfinally)return r;for(var a=r.body.length;--a>=0;){var s=r.body[a];if(!mt(s,!0)){r.body[a]=s.transform(i);break}}}else r instanceof fe?(r.body=r.body.transform(i),r.alternative&&(r.alternative=r.alternative.transform(i))):r instanceof _n&&(r.body=r.body.transform(i));return r});t.transform(i)}),on.DEFMETHOD("unwrap_expression",function(){switch(this.body.length){case 0:return In(un,this,{operator:"void",expression:In(xe,this,{value:0})});case 1:var e=this.body[0];if(e instanceof Y)return In(Ne,e);if(e instanceof je)return e.body;default:return In(g,this,{expression:In(ae,this,{argnames:[],body:this.body}).init_vars(this),args:[]})}}),we.DEFMETHOD("wrap_expression",function(){var e=this;return is_statement(e)||(e=In(je,e,{body:e})),e instanceof on||(e=In(on,e,{body:[e]})),e});var X=/^(0|[1-9][0-9]*)$/;function Oe(e){e._squeezed=!1,e._optimized=!1,e instanceof h&&(e._var_names=void 0),e instanceof en&&(e.fixed=void 0)}function Ye(e,n){return this.transform(new mn(function(t,i){return t instanceof j?((t=t.clone()).name=t.name.transform(this),t):t instanceof R?(t=t.clone(),i(t,this),t):t instanceof B?((t=t.clone()).value=t.value.transform(this),t):t.convert_symbol(e,n)}))}function Ze(e,n){var t=In(e,this);return n(t,this)||t}function tn(e){var n=e.definition();n.assignments++,n.references.push(e)}function bn(e,n){var t=new gn(function(i){return i instanceof j?(i.value.walk(n),i.name.walk(t),!0):i instanceof B?(i.key instanceof we&&i.key.walk(n),i.value.walk(t),!0):e(i)});this.walk(t)}function yn(e){return e(this)}function wn(e,n){var t=!1,i=new gn(function(r){return!!t||(r instanceof j?n?(r.name.walk(i),!0):t=!0:r instanceof B?!n&&r.key instanceof we?t=!0:(r.value.walk(i),!0):e(r)?t=!0:void 0)});return this.walk(i),t}function Dn(e){return e instanceof AST_AsyncGeneratorDefun||e instanceof AST_AsyncGeneratorFunction}function qn(e){var n=0,t=e.self();do{if(t.variables)return t}while(t=e.parent(n++))}function Fn(e,n,t,i,r,o){for(var a;a=e.parent(n++);t=a){if(a===i)return!1;if(o&&a instanceof he){if(a.name||is_async(a)||Tn(a))return!0}else if(a instanceof sn){if(a.bfinally&&a.bfinally!==t)return!0;if(r&&a.bcatch&&a.bcatch!==t)return!0}}return!1}!function(e){function r(e,n,t){t.assignments=0,t.bool_return=0,t.drop_return=0,t.cross_loop=!1,t.direct_access=!1,t.escaped=[],t.fixed=!t.const_redefs&&!t.scope.pinned()&&!n.exposed(t)&&!(t.init instanceof ve&&t.init!==t.scope)&&t.init,t.reassigned=0,t.recursive_refs=0,t.references=[],t.single_use=void 0}function o(e,n,t){t.variables.each(function(t){r(e,n,t)})}function s(e,n,t){t.fn_defs=[],t.variables.each(function(i){r(e,n,i);var o=i.init;o instanceof _e&&(t.fn_defs.push(o),o.safe_ids=null),null===i.fixed?(i.safe_ids=e.safe_ids,b(e,i)):i.fixed&&(e.loop_ids[i.id]=e.in_loop,b(e,i))}),t.may_call_this=function(){t.may_call_this=t.contains_this()?Hn:Ln},t.uses_arguments&&t.each_argname(function(e){e.definition().last_ref=!1}),n.option("ie")&&t.variables.each(function(e){var n=e.orig[0].definition();n!==e&&(n.fixed=!1)})}function c(e,n){var t=n.safe_ids;return void 0===t||t===e.safe_ids}function u(e,n){var t=e.fn_scanning;e.fn_scanning=n,n.walk(e),e.fn_scanning=t}function l(e,n){n.enclosed.forEach(function(t){if(n.variables.get(t.name)!==t&&!x(e,t)){t.single_use=!1;var i=t.fixed;"function"==typeof i&&(i=i()),i instanceof he&&void 0!==i.safe_ids||(t.fixed=!1)}})}function d(e,n,t){var i=t.safe_ids;if(void 0!==i&&!1!==i)if(t.parent_scope.resolve().may_call_this===Hn)jn(t,e.fn_visited)&&l(e,t);else if(i){var r=jn(t,e.fn_visited);i===e.safe_ids?r||u(e,t):r?l(e,t):t.safe_ids=!1}else e.fn_scanning&&e.fn_scanning!==n.scope.resolve()?t.safe_ids=!1:(t.safe_ids=e.safe_ids,u(e,t))}function _(e,n){var t=n.fn_defs,i=n.may_call_this===Hn?t:t.filter(function(n){return!1===n.safe_ids||(n.safe_ids=e.safe_ids,u(e,n),!1)});m(e),i.forEach(function(n){n.safe_ids=e.safe_ids,u(e,n)}),t.forEach(function(e){e.safe_ids=void 0}),n.fn_defs=void 0,n.may_call_this=void 0}function v(e,n){var t=Object.create(e.safe_ids);n||(t.seq={}),e.safe_ids=t}function m(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function b(e,n){e.safe_ids[n.id]={}}function y(e,n){e.references.push(n),!1!==e.last_ref&&(e.last_ref=n)}function x(e,n){if("m"==n.single_use)return!1;var t=e.safe_ids[n.id];if(t){var i=Cn(e.safe_ids,n.id);if(!i){var r=e.safe_ids.seq;t.read?t.read!==r&&(t.read=!0):t.read=r}return null==n.fixed?!w(n)&&((!n.global||"arguments"!=n.name)&&(e.loop_ids[n.id]=null,n.fixed=In(ln,n.orig[0]),i&&(n.safe_ids=void 0),!0)):!t.assign||t.assign===e.safe_ids}return n.fixed instanceof _e}function A(e,n,t){if(!t){if(is_funarg(n)&&n.scope.uses_arguments&&!e.has_directive("use strict"))return!1;if(!En(n.orig,function(e){return!(e instanceof Ue)}))return!1}if(void 0===n.fixed)return t||En(n.orig,function(e){return!(e instanceof Qe)});if(!1===n.fixed||0===n.fixed)return!1;var i=e.safe_ids[n.id];if(n.safe_ids)return n.safe_ids[n.id]=!1,n.safe_ids=void 0,null===n.fixed||Cn(e.safe_ids,n.id)&&!i.read;if(!Cn(e.safe_ids,n.id)){if(!i)return!1;if(i.read||e.in_loop){var r=e.find_parent(h);if(r instanceof S)return!1;if(n.scope.resolve()!==r.resolve())return!1}i.assign=!(!i.assign||i.assign===e.safe_ids)||e.safe_ids}if(null!=n.fixed&&i.read){if(i.read!==e.safe_ids.seq)return!1;if(e.loop_ids[n.id]!==e.in_loop)return!1}return x(e,n)&&En(n.orig,function(e){return!(e instanceof Xe)})}function O(e){if(!e)return!1;if(e instanceof f){var n=e.operator;return"="==n?O(e.right):!xt[n.slice(0,-1)]}return e instanceof Pe?O(e.tail_node()):e.is_constant()||i(e)||e instanceof Ee}function q(e,t,i,r,o,s,f){var c=e.parent(s);if(!o||!o.is_constant()){if(P(t,i,r,c))return t.escaped.push(c),!(f>1)||o&&o.is_constant_expression(i)||(f=1),(!t.escaped.depth||t.escaped.depth>f)&&(t.escaped.depth=f),t.scope.resolve()!==i.resolve()&&(t.escaped.cross_scope=!0),void(t.fixed&&(t.fixed.escaped=t.escaped));if(function(e,n){if(n instanceof a)return!0;if(n instanceof p)return xt[n.operator];if(n instanceof D)return n.condition!==e;if(n instanceof Pe)return n.tail_node()===e;if(n instanceof ze)return!0}(r,c))q(e,t,i,c,c,s+1,f);else if(c instanceof Ae&&c.value===r){var u=e.parent(s+1);q(e,t,i,u,u,s+2,f)}else if(c instanceof qe&&c.expression===r&&(o=n(o,c),q(e,t,i,c,o,s+1,f+1),o))return;s>0||c instanceof g&&c.expression===r||c instanceof Pe&&c.tail_node()!==r||c instanceof je||c instanceof fn&&!unary_side_effects[c.operator]||(t.direct_access=!0,t.fixed&&(t.fixed.direct_access=!0))}}function C(e){if(e instanceof Ie){var n=e.expression;if(n instanceof en){var t=n.definition();if(w(t)){var i=e.property;i.is_constant()&&(i=i.value),(i instanceof we||X.test(i))&&(t.reassigned++,(i instanceof we?t.scope.argnames:[t.scope.argnames[i]]).forEach(function(e){e instanceof Ke&&(e.definition().fixed=!1)}))}}}}function F(e,n){var t,i;return function(){var r=e();return t!==r&&(t=r,i=n(r)),i}}function z(e,n,t,i,r){var o=new gn(function(t){if(t instanceof j){Oe(t),v(e,!0),t.value.walk(e),m(e);var s=i;return s&&(i=function(e,n,t){var i,r;return function(){if(r===n)return n;var o=t(),a=ei(e,o,!0);return a instanceof we?r=n:i!==o&&(i=o,r=void 0===a?Un(n,[o,n.value]):o),r}}(n,t,s)),t.name.walk(o),i=s,!0}if(t instanceof L){Oe(t);var f,s=i;if(t.elements.forEach(function(e,n){if(e instanceof se)return Oe(e);s&&(i=F(s,function(t){return In(Ie,e,{expression:t,property:In(xe,e,{value:n})})})),e.walk(o)}),t.rest)s&&(i=n.option("rests")&&F(s,function(e){if(!(e instanceof a))return t;for(var n=0,i=t.elements.length;n<i;n++)if(e.elements[n]instanceof ze)return t;return f||(f=In(a,t,{})),f.elements=e.elements.slice(i),f})),t.rest.walk(o);return i=s,!0}if(t instanceof H){Oe(t);var s=i;return t.properties.forEach(function(n){Oe(n),n.key instanceof we&&(v(e),n.key.walk(e),m(e)),s&&(i=F(s,function(e){var t=n.key,i=Ie;return"string"==typeof t&&(Kn(t)?i=V:t=Xn(t,n)),In(i,n,{expression:e,property:t})})),n.value.walk(o)}),t.rest&&(i=!1,t.rest.walk(o)),i=s,!0}return r(t,i,function(){for(var n=e.stack.length,i=0,r=o.stack.length-1;i<r;i++)e.stack.push(o.stack[i]);t.walk(e),e.stack.length=n}),!0});t.walk(o)}function N(e,n,t){var i=this;i.inlined=!1;var r=e.parent(),o=!is_async(i)&&!Tn(i),f=!o,c=!1;i.walk(new gn(function(e){return f?c=!0:e instanceof Fe?f=!0:e instanceof $e&&e!==i||void 0})),c&&v(e,o),s(e,t,i);var u=!i.uses_arguments||e.has_directive("use strict");i.argnames.forEach(function(n,o){var a=r.args[o];z(e,t,n,function(){var e=i.argnames.indexOf(n),t=e<0?a:r.args[e];return t instanceof Pe&&t.expressions.length<2&&(t=t.expressions[0]),t||In(ln,r)},h)});var l,p=i.rest;p&&z(e,t,p,t.option("rests")&&function(){return i.rest!==p?p:(l||(l=In(a,i,{})),l.elements=r.args.slice(i.argnames.length),l)},h),kn(i,e);var d=e.safe_ids;return _(e,i),c||(e.safe_ids=d),!0;function h(n,t){var i=n.definition();t&&u&&void 0===i.fixed?(b(e,i),e.loop_ids[i.id]=e.in_loop,i.fixed=t,i.fixed.assigns=[n]):i.fixed=!1}}e(we,zn),e(f,function(e,n,i){var r=this,o=r.left,a=r.right,s=o instanceof en&&o.definition(),f=s||o instanceof R;switch(r.operator){case"=":return o.equals(a)&&!o.has_side_effects(i)?(a.walk(e),function n(t){Oe(t);if(t instanceof V)n(t.expression);else if(t instanceof Ie)n(t.expression),t.property.walk(e);else if(t instanceof en){var i=t.definition();y(i,t),i.fixed&&(t.fixed=i.fixed,t.fixed.assigns?t.fixed.assigns.push(r):t.fixed.assigns=[r])}else t.walk(e)}(o),r.redundant=!0,!0):s&&a instanceof ve?(h(),a.parent_scope.resolve().fn_defs.push(a),a.safe_ids=null,s.fixed&&r.write_only||d(e,s,a),!0):f?(a.walk(e),h(),!0):void C(o);case"&&=":case"||=":case"??=":var c=!0;default:if(!f)return C(o),_();s.assignments++;var u=s.fixed;if(t(i,e,r,r,0))return s.fixed=!1,_();var l=x(e,s);return c&&v(e,!0),a.walk(e),c&&m(e),l&&!o.in_arg&&A(e,s)?(y(s,o),b(e,s),s.single_use&&(s.single_use=!1),o.fixed=s.fixed=function(){return In(p,r,{operator:r.operator.slice(0,-1),left:I(o,u),right:r.right})},o.fixed.assigns=u&&u.assigns?u.assigns.slice():[s.orig[0]],o.fixed.assigns.push(r),o.fixed.to_binary=J(function(e){return e.left},u)):(o.walk(e),s.fixed=!1),!0}function h(){var n=s&&Ai(e,s),f=t(i,e,r,a,0,O(a),n);z(e,i,o,function(){return r.right},function(n,t,i){if(!(n instanceof en))return C(n),void i();var s=n.definition();s.assignments++,t&&!n.in_arg&&A(e,s)?(y(s,n),b(e,s),(o instanceof R||1==s.orig.length&&s.orig[0]instanceof Ge)&&(s.single_use=!1),e.loop_ids[s.id]=e.in_loop,s.fixed=f?0:t,n.fixed=t,n.fixed.assigns=[r],q(e,s,n.scope,r,a,0,1)):(i(),s.fixed=!1)})}function _(){if(c)return o.walk(e),v(e,!0),a.walk(e),m(e),!0}}),e(p,function(e){if(xt[this.operator])return this.left.walk(e),v(e,!0),this.right.walk(e),m(e),!0}),e(h,function(e,n,t){o(e,t,this)}),e(g,function(e,n){var t=this.expression;if(t instanceof ve){var i=lt(this);return this.args.forEach(function(n){n.walk(e),n instanceof ze&&(i=!1)}),i&&(t.reduce_vars=N),t.walk(e),i&&delete t.reduce_vars,!0}if("Call"==this.TYPE)switch(e.in_boolean_context()){case"d":var r=!0;case!0:!function e(n,t){if(n instanceof f){if("="!=n.operator)return;e(n.left,t),e(n.right,t)}else if(n instanceof p){if(!xt[n.operator])return;e(n.left,t),e(n.right,t)}else if(n instanceof D)e(n.consequent,t),e(n.alternative,t);else if(n instanceof en){var i=n.definition();i.bool_return++,t&&i.drop_return++}}(t,r)}t.walk(e);var o=this.optional;o&&v(e,!0),this.args.forEach(function(n){n.walk(e)}),o&&m(e);var a=t instanceof en&&t.fixed_value();return a instanceof he?d(e,t.definition(),a):e.find_parent($e).may_call_this(),!0}),e(S,function(e,n,t){var i=this;o(e,t,i),i.extends&&i.extends.walk(e);var r=i.properties.filter(function(n){return Oe(n),n.key instanceof we&&(e.push(n),n.key.walk(e),e.pop()),n.value});if(i.name){var a=i.name.definition(),s=e.parent();(s instanceof Q||s instanceof Z)&&(a.single_use=!1),A(e,a,!0)?(b(e,a),e.loop_ids[a.id]=e.in_loop,a.fixed=function(){return i},a.fixed.assigns=[i],ii(a)||(a.single_use=!1)):a.fixed=!1}return r.forEach(function(n){e.push(n),!n.static||_t(n)&&n.value.contains_this()?(v(e),n.value.walk(e),m(e)):n.value.walk(e),e.pop()}),!0}),e(T,function(e,n,t){return v(e,!0),s(e,t,this),n(),_(e,this),!0}),e(D,function(e){return this.condition.walk(e),v(e,!0),this.consequent.walk(e),m(e),v(e,!0),this.alternative.walk(e),m(e),!0}),e(j,function(e){return v(e,!0),this.value.walk(e),m(e),this.name.walk(e),!0}),e(U,function(e){var n=e.in_loop;return e.in_loop=this,v(e),this.body.walk(e),Qt(this,e.parent())&&(m(e),v(e)),this.condition.walk(e),m(e),e.in_loop=n,!0}),e(ie,function(e,n,t){o(e,t,this),this.init&&this.init.walk(e);var i=e.in_loop;return e.in_loop=this,v(e),this.condition&&this.condition.walk(e),this.body.walk(e),this.step&&(Qt(this,e.parent())&&(m(e),v(e)),this.step.walk(e)),m(e),e.in_loop=i,!0}),e(re,function(e,n,t){o(e,t,this),this.object.walk(e);var i=e.in_loop;e.in_loop=this,v(e);var r=this.init;return r instanceof M?r.definitions[0].name.mark_symbol(function(e){if(e instanceof Ve){var n=e.definition();n.assignments++,n.fixed=!1}},e):r instanceof R||r instanceof en?r.mark_symbol(function(e){if(e instanceof en){var n=e.definition();y(n,e),n.assignments++,e.is_immutable()||(n.fixed=!1)}},e):r.walk(e),this.body.walk(e),m(e),e.in_loop=i,!0}),e(fe,function(e){return this.condition.walk(e),v(e,!0),this.body.walk(e),m(e),this.alternative&&(v(e,!0),this.alternative.walk(e),m(e)),!0}),e(de,function(e){return v(e,!0),this.body.walk(e),m(e),!0}),e(he,function(e,n,t){var i=this;return!c(e,i)||(!Mn(e.fn_visited,i)||(i.inlined=!1,v(e),s(e,t,i),n(),_(e,i),i.name&&q(e,i.name.definition(),i,i.name,i,0,1),!0))}),e(_e,function(e,n,t){var i=this,r=i.name.definition(),o=e.parent();return(o instanceof Q||o instanceof Z)&&(r.single_use=!1),!c(e,i)||(!Mn(e.fn_visited,i)||(i.inlined=!1,v(e),s(e,t,i),n(),_(e,i),!0))}),e(Ie,function(e){if(this.optional)return this.expression.walk(e),v(e,!0),this.property.walk(e),m(e),!0}),e(Re,function(e,n,t){o(e,t,this),this.expression.walk(e);var i=!0;return this.body.forEach(function(n){n instanceof $||(n.expression.walk(e),i&&(i=!1,v(e,!0)))}),i||m(e),An(this,e),!0}),e(Le,function(e){return v(e,!0),An(this,e),m(e),!0}),e(He,function(){this.definition().fixed=!1}),e(Je,function(){this.definition().fixed=!1}),e(en,function(e,n,r){var o=this,a=o.definition(),s=a.fixed||a.last_ref&&a.last_ref.fixed;y(a,o),1==a.references.length&&!a.fixed&&a.orig[0]instanceof Ge&&(e.loop_ids[a.id]=e.in_loop);var f,c=Ai(e,a);switch(c&&c.enclosed.forEach(function(n){if(a!==n&&n.scope.resolve()!==c){var t=n.fixed&&n.fixed.assigns;if(t&&!(t[t.length-1]instanceof dn)){var i=e.safe_ids[n.id];i&&(i.assign=!0)}}}),"m"==a.single_use&&a.fixed&&(a.fixed=0,a.single_use=!1),a.fixed){case 0:x(e,a)||(a.fixed=!1);case!1:var u=a.redefined();u&&k(a.scope,o.scope)&&(u.single_use=!1);break;case void 0:a.fixed=!1;break;default:if(!x(e,a)){a.fixed=!1;break}o.in_arg&&a.orig[0]instanceof Xe&&(o.fixed=a.scope);var l=o.fixed_value();c?a.recursive_refs++:l&&function(e,n){return e.option("unused")&&!n.scope.pinned()&&!1!==n.single_use&&n.references.length-n.recursive_refs==1&&!(is_funarg(n)&&n.scope.uses_arguments)}(r,a)?(a.in_loop=e.loop_ids[a.id]!==e.in_loop,a.single_use=i(l)&&!l.pinned()&&(!a.in_loop||e.parent()instanceof g)||!a.in_loop&&a.scope===o.scope.resolve()&&l.is_constant_expression()):a.single_use=!1,t(r,e,o,l,0,O(l),c)&&(a.single_use?a.single_use="m":a.fixed=0),a.fixed&&e.loop_ids[a.id]!==e.in_loop&&(a.cross_loop=!0),q(e,a,o.scope,o,l,0,1)}o.fixed||(o.fixed=0===a.fixed?s:a.fixed),l instanceof he&&!((f=e.parent())instanceof g&&f.expression===o)&&d(e,a,l)}),e(nn,function(e,n){var t=this.tag;if(t){if(t instanceof ve)return this.expressions.forEach(function(n){n.walk(e)}),t.walk(e),!0;t.walk(e),this.expressions.forEach(function(n){n.walk(e)});var i=t instanceof en&&t.fixed_value();return i instanceof he?d(e,t.definition(),i):e.find_parent($e).may_call_this(),!0}}),e(on,function(e,n,t){return this.globals.each(function(n){r(e,t,n)}),v(e,!0),s(e,t,this),n(),_(e,this),!0}),e(sn,function(e,n,t){return o(e,t,this),v(e,!0),An(this,e),m(e),this.bcatch&&(v(e,!0),this.bcatch.walk(e),m(e)),this.bfinally&&this.bfinally.walk(e),!0}),e(fn,function(e,n){var t=this;if(UNARY_POSTFIX[t.operator]){var i=t.expression;if(i instanceof en){var r=i.definition();r.assignments++;var o=r.fixed;return x(e,r)&&!i.in_arg&&A(e,r)?(y(r,i),b(e,r),r.single_use&&(r.single_use=!1),r.fixed=function(){return In(p,t,{operator:t.operator.slice(0,-1),left:In(un,t,{operator:"+",expression:I(i,o)}),right:In(xe,t,{value:1})})},r.fixed.assigns=o&&o.assigns?o.assigns.slice():[],r.fixed.assigns.push(t),t instanceof un?i.fixed=r.fixed:(i.fixed=function(){return In(un,t,{operator:"+",expression:I(i,o)})},i.fixed.assigns=o&&o.assigns,i.fixed.to_prefix=J(function(e){return e.expression},r.fixed))):(i.walk(e),r.fixed=!1),!0}C(i)}}),e(dn,function(e,n,t){var i=this,r=i.value;if(r instanceof ve&&i.name instanceof Ve){a(),r.parent_scope.resolve().fn_defs.push(r),r.safe_ids=null;var o=i.name.definition();o.fixed||d(e,o,r)}else r?(r.walk(e),a()):e.parent()instanceof me&&a();return!0;function a(){z(e,t,i.name,function(){return i.value||In(ln,i)},function(n,t){var r=n.definition();t&&A(e,r,!0)?(b(e,r),e.loop_ids[r.id]=e.in_loop,r.fixed=t,r.fixed.assigns=[i],(n instanceof Ue&&r.redefined()||!E(n)&&!ii(r))&&(r.single_use=!1)):r.fixed=!1})}}),e(hn,function(e,n){var t=e.in_loop;return e.in_loop=this,v(e),n(),m(e),e.in_loop=t,!0})}(function(e,n){e.DEFMETHOD("reduce_vars",n)}),on.DEFMETHOD("reset_opt_flags",function(e){var n=new gn(e.option("reduce_vars")?function(t,i){return Oe(t),t.reduce_vars(n,i,e)}:Oe);n.fn_scanning=null,n.fn_visited=[],n.in_loop=null,n.loop_ids=Object.create(null),n.safe_ids=Object.create(null),n.safe_ids.seq={},this.walk(n)}),Be.DEFMETHOD("fixed_value",function(e){var n=this.definition(),t=n.fixed;if(t)return this.fixed&&(t=this.fixed),(t instanceof we?t:t()).tail_node();if(!(t=0===t&&this.fixed))return t;var i=(t instanceof we?t:t()).tail_node();return e&&1!=n.escaped.depth&&bi(i,!0)?i:i.is_constant()?i:void 0}),en.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return e.orig[0]instanceof Xe&&(1==e.orig.length||!!this.in_arg&&!(e.orig[1]instanceof Ke))}),we.DEFMETHOD("convert_symbol",zn),j.DEFMETHOD("convert_symbol",Ye),R.DEFMETHOD("convert_symbol",Ye),Ve.DEFMETHOD("convert_symbol",Ze),en.DEFMETHOD("convert_symbol",Ze),j.DEFMETHOD("mark_symbol",bn),R.DEFMETHOD("mark_symbol",bn),Ve.DEFMETHOD("mark_symbol",yn),en.DEFMETHOD("mark_symbol",yn),we.DEFMETHOD("match_symbol",function(e){return e(this)}),j.DEFMETHOD("match_symbol",wn),R.DEFMETHOD("match_symbol",wn);var Pn=$n("Infinity NaN undefined");function Nn(e,n){if(e instanceof AST_Atom)return!0;if(e instanceof Ee)return!0;if(e instanceof qe){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof en){if(e.is_immutable())return!1;e=e.fixed_value()}return!e||(!!e.tail_node().is_constant()||Nn(e,n))}if(e instanceof en){if(e.is_immutable())return!0;var t=e.definition();return n.exposed(t)&&Pn[t.name]}return!1}function In(e,n,t){return t?(t.start=n.start,t.end=n.end):t=n,new e(t)}function Un(e,n){return 1==n.length?n[0]:In(Pe,e,{expressions:n.reduce(it,[])})}function Xn(e,n){switch(typeof e){case"string":return In(Ne,n,{value:e});case"number":return isNaN(e)?In(be,n):isFinite(e)?1/e<0?In(un,n,{operator:"-",expression:In(xe,n,{value:-e})}):In(xe,n,{value:e}):e<0?In(un,n,{operator:"-",expression:In(ue,n)}):In(ue,n);case"boolean":return In(e?an:ne,n);case"undefined":return In(ln,n);default:if(null===e)return In(Se,n);if(e instanceof RegExp)return In(Ce,n,{value:e});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof e}))}}function et(e){return e instanceof qe||pt(e)&&"eval"==e.name}function nt(e,n,t){var i=!1;return"Call"==e.TYPE?i=e.expression===n&&et(t):e instanceof nn?i=e.tag===n&&et(t):e instanceof un&&(i="delete"==e.operator||"typeof"==e.operator&&pt(t)),i?Un(n,[In(xe,n,{value:0}),t]):t}function tt(e,n){var t=new On;return e.walk(new gn(function(e){if(e instanceof en){var n=e.definition(),i=e.fixed;i&&t.has(n.id)?t.get(n.id)!==i&&t.set(n.id,!1):t.set(n.id,i)}})),t.size()>0&&n.walk(new gn(function(e){if(e instanceof en){var n=e.definition(),i=e.fixed;i&&t.has(n.id)&&t.get(n.id)!==i&&(e.fixed=!1)}})),n}function it(e,n){return n instanceof Pe?[].push.apply(e,n.expressions):e.push(n),e}function rt(e){return e instanceof O||e instanceof z||e instanceof me}function ot(e){if(e instanceof _e){var n=e.name.definition(),t=e.name.scope;return n.scope===t||En(n.references,function(e){var n=e.scope;do{if(n===t)return!0}while(n=n.parent_scope)})}return!rt(e)}function at(e){if(null===e)return[];if(e instanceof _)return En(e.body,ot)?e.body:[e];if(e instanceof W)return[];if(is_statement(e))return[e];throw new Error("Can't convert thing to statement array")}function st(e){return null===e||(e instanceof W||e instanceof _&&0==e.body.length)}function ft(e){return En(e.body,function(e){return st(e)||e instanceof N||e instanceof pn&&vt(e)})}function ct(e){return e instanceof le&&e.body instanceof _?e.body:e}function ut(e){if("Call"!=e.TYPE)return!1;do{e=e.expression}while(e instanceof qe);return e instanceof ve?!xn(e):ut(e)}function lt(e){var n=e.expression;if(n.name)return!1;if(!(e instanceof ye))return!0;var t=!1;return n.walk(new gn(function(e){return!!t||(e instanceof AST_NewTarget?t=!0:e instanceof $e&&e!==n||void 0)})),!t}function pt(e){return e instanceof en&&e.definition().undeclared}var dt,ht=$n("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet");function _t(e){return e.static&&e.value&&(e instanceof AST_ClassField||e instanceof AST_ClassInit)}function vt(e){return En(e.definitions,function(e){return!e.value})}function mt(e,n){return e instanceof z?n&&!e.extends&&En(e.properties,function(e){return!(e.key instanceof we)&&!_t(e)}):e instanceof M?(n||e instanceof pn)&&vt(e):e instanceof Q?mt(e.body,n):e instanceof Z?mt(e.body,n):e instanceof _e}function gt(e,n){var t=e.lastIndexOf(n);if(t<0)return!1;for(;++t<e.length;)if(!mt(e[t],!0))return!1;return!0}function bt(e,n){var t;if(e.init instanceof _&&(t=e.init,e.init=t.body.pop(),t.body.push(e)),e.init instanceof N?(t||(t=In(_,e,{body:[e]})),t.body.splice(-1,0,e.init),e.init=null):e.init instanceof je?e.init=e.init.body:st(e.init)&&(e.init=null),t)return n?List.splice(t.body):t}function yt(e,n){var i,s,c,l,v,x,T=I(n,function(e){return e instanceof he});!function(){var e=n.self(),t=0;do{if(!i&&e.variables&&(i=e),e instanceof y)n.parent(t).bfinally&&(v||(v={}),v.bfinally=!0),t++;else if(e instanceof te)t++;else if(e instanceof le)l=!0;else{if(e instanceof $e){x=e;break}e instanceof sn&&(v||(v={}),e.bcatch&&(v.bcatch=!0),e.bfinally&&(v.bfinally=!0))}}while(e=n.parent(t++))}();var A,k,q=10;do{if(k=A,A=0,X(e)&&(A=1),!A&&1==k)break;if(n.option("dead_code")&&(ee(e,n)&&(A=2),!A&&2==k))break;if(n.option("if_return")&&(Z(e,n)&&(A=3),!A&&3==k))break;if(n.option("awaits")&&n.option("side_effects")&&(ne(e,n)&&(A=4),!A&&4==k))break;if(n.option("inline")>=4&&(se(e,n)&&(A=5),!A&&5==k))break;if(n.sequences_limit>0){if(ce(e,n)&&(A=6),!A&&6==k)break;if(be(e,n)&&(A=7),!A&&7==k)break}if(n.option("join_vars")&&(Ne(e)&&(A=8),!A&&8==k))break;n.option("collapse_vars")&&J(e,n)&&(A=9)}while(A&&q-- >0);return e;function I(e,n){var t,i=e.self(),r=0;do{if(i instanceof y)i=e.parent(r++);else if(i instanceof de)i=i.body;else if(i instanceof Le){var o=e.parent(r);(o.body[o.body.length-1]===i||a(i.body))&&(r++,i=o)}do{if(n(t=i))return t;i=e.parent(r++)}while(i instanceof fe)}while(t&&(i instanceof _||i instanceof y||i instanceof $e||i instanceof Le||i instanceof sn)&&gt(i.body,t));function a(e){for(var n=e.length;--n>=0;)if(e[n]instanceof m)return!0;return!1}}function J(e,n){if(!x.pinned()){for(var m,y,T=new On,A=[],k=!1,O=new On,q=e.length,C=new mn(function(e,t){if(Ue)return e;if(!Ye)return e!==I[W]?e:++W<I.length?rn(e,C):(Ye=!0,(ne=(ee?function e(n,t){var i=C.parent(t);if(i instanceof a)return e(i,t+1);if(i instanceof f){return _e(i)?n:i.left.match_symbol(function(e){return e instanceof en&&(oe.name==e.name||ee.name==e.name)})?n:i.left!==n&&xt[r=i.operator.slice(0,-1)]?An(i,r,t):e(i,t+1)}if(i instanceof u)return e(i,t+1);if(i instanceof p){var r;return i.left!==n&&xt[r=i.operator]?An(i,r,t):e(i,t+1)}if(i instanceof g)return i;if(i instanceof b)return i.expression!==n?n:e(i,t+1);if(i instanceof D)return i.condition!==n?n:e(i,t+1);if(i instanceof M)return Dn(i,t+1);if(i instanceof U)return n;if(i instanceof K)return Dn(i,t+1);if(i instanceof ie)return i.init!==n&&i.condition!==n?n:e(i,t+1);if(i instanceof re)return i.init!==n?n:e(i,t+1);if(i instanceof fe)return i.condition!==n?n:e(i,t+1);if(i instanceof ke){var o=C.parent(t+1);return En(o.properties,function(e){return e instanceof Ae})?e(o,t+2):o}if(i instanceof qe){var s=i.expression;return s===n?e(i,t+1):n}if(i instanceof Pe)return(i.tail_node()===n?e:Dn)(i,t+1);if(i instanceof je)return Dn(i,t+1);if(i instanceof ze)return e(i,t+1);if(i instanceof Re)return i.expression!==n?n:e(i,t+1);if(i instanceof fn)return"delete"==i.operator?n:e(i,t+1);if(i instanceof dn)return i.name.match_symbol(function(e){return e instanceof Ve&&(oe.name==e.name||ee.name==e.name)})?n:e(i,t+1);if(i instanceof hn)return i.condition!==n?n:e(i,t+1);if(i instanceof vn)return e(i,t+1);return null}:function e(n,t){var i=C.parent(t);if(i instanceof a)return n;if(i instanceof f)return n;if(i instanceof u)return n;if(i instanceof p)return n;if(i instanceof g)return n;if(i instanceof b)return n;if(i instanceof D)return n;if(i instanceof M)return Dn(i,t+1);if(i instanceof K)return n;if(i instanceof fe)return n;if(i instanceof le)return n;if(i instanceof ke)return n;if(i instanceof qe)return n;if(i instanceof Pe)return(i.tail_node()===n?e:Dn)(i,t+1);if(i instanceof je)return Dn(i,t+1);if(i instanceof ze)return n;if(i instanceof Re)return n;if(i instanceof fn)return n;if(i instanceof dn)return n;if(i instanceof vn)return n;return null})(e,0))===e&&(Ue=!0),e);var i,r,s=C.parent();if(!te&&pn(e,s)&&(te=s),pe&&ce&&Je&&!te&&e instanceof f&&"="!=e.operator&&e.left.equals(oe))return We++,k=!0,we.info("Cascading {this} [{start}]",e),Je=!1,Oe=Yn(oe),e.right.transform(C),Bn(J),Ue?i=J:(Ue=!0,i=In(p,J,{operator:pe,left:oe.fixed&&oe.definition().fixed?oe.fixed.to_binary(J):oe,right:Ne})),In(f,e,{operator:"=",left:e.left,right:In(p,e,{operator:e.operator.slice(0,-1),left:i,right:e.right})});if(function(e,t){if(e===Ne)return!0;if(t instanceof ie&&e!==t.init)return!0;if(e instanceof f)return"="!=e.operator&&oe.equals(e.left);if(e instanceof g)return oe instanceof qe&&(!!oe.equals(e.expression)&&!(Ne instanceof ve&&!Ne.contains_this()));return e instanceof S?!n.has_directive("use strict"):e instanceof F||(e instanceof N?de&&oe.name===e.name.name:e instanceof B?e.key instanceof we:e instanceof G||e instanceof ge||e instanceof sn||e instanceof _n)}(e,s))return Ue=!0,e;if(e.single_use)return e;if(!(e instanceof Ve)&&(ce&&oe.equals(e)||ue&&(r=ue(e,this)))){if(!Je||te&&(r||!Ce||!He))return r||ee||(Ue=!0),e;if(Qn(e,s))return ee&&!r&&(Q=!0),e;if(!r&&Z&&e.fixed!==oe.fixed)return Ue=!0,e;if(ee)return te&&0==X&&(X=Y-We),r||We++,e;if(We++,k=Ue=!0,we.info("Collapsing {this} [{start}]",e),"Binary"==J.TYPE)return Hn(J,e),In(f,J,{operator:"=",left:J.right.left,right:"&&"==J.operator?In(D,J,{condition:J.left,consequent:J.right.right,alternative:e}):In(D,J,{condition:J.left,consequent:e,alternative:J.right.right})});if(J instanceof cn)return In(un,J,{operator:J.operator,expression:oe.fixed&&oe.definition().fixed?oe.fixed.to_prefix(J):oe});if(J instanceof un)return Bn(J),J;if(Hn(Ne,e),J instanceof dn){var c=J.name.definition();return c.references.length-c.replaced!=1||n.exposed(c)?In(f,J,{operator:"=",left:e,right:Ne}):(c.replaced++,nt(s,e,Ne))}Bn(Ne);var l=J.clone();return l.right=Ne,l}if(function(e,t){if(!(e instanceof en))return!1;if(e.is_declared(n)){if(e.fixed_value())return!1;if(E(e))return!(t instanceof qe&&t.expression===e)&&w(e.definition())}else if(an(e,t))return!1;return!He||(ue=!1,!1)}(e,s))return Ue=!0,e;if((bn(e,s)||_e(e))&&(ne=e,e instanceof $e&&(Ue=!0)),e instanceof o){var d=Je;return Je=!1,t(e,C),Je=d,tn(e)}if(e instanceof R){var d=Je;return Je=!1,t(e,C),Je=d,tn(e)}if(e instanceof j){e.name=e.name.transform(C);var d=Je;return Je=!1,e.value=e.value.transform(C),Je=d,tn(e)}if(!(!(e instanceof h)||e instanceof $e||e.variables&&e.variables.all(function(e){return!Se.has(e.name)&&!Oe.has(e.name)}))){var d=Je;return Je=!1,rn(e,C)||t(e,C),Je=d,tn(e)}return rn(e,C)?tn(e):void 0},tn),z=new mn(function(e){if(Ue)return e;if(!Ye){if(e!==I[W])return e;switch(W++,I.length-W){case 0:if(Ye=!0,Q)return e;if(e!==J)return e;if(e instanceof dn)return e;Ze.replaced++;var n=z.parent();return n instanceof Pe&&n.tail_node()!==e?(ee.replaced++,Ne===Me?List.skip:Un(Me,Me.expressions.slice(0,-1))):Ne;case 1:if(!Q&&e.body===J)return Ye=!0,Ze.replaced++,ee.replaced++,null;default:return rn(e,z)}}if(e instanceof en&&e.definition()===Ze){if(Qn(e,z.parent()))return e;--We||(Ue=!0),we.info("Replacing {this} [{start}]",e);var t=Ne.clone();return t.scope=e.scope,t.reference(),We==X?(Ue=!0,In(f,J,{operator:"=",left:e,right:t})):(Ze.replaced++,t)}return e instanceof $||e instanceof $e?e:void 0},function(e){return Gn(e,z)});--q>=0;){0==q&&n.option("unused")&&wn();var I=[];for(Sn(e[q]);A.length>0;){var Y,W=0,J=(I=A.pop())[I.length-1],X=-1,Q=!1,Z=!1,ee=null,ne=null,te=null,oe=Pn(J),se=oe&&oe.has_side_effects(n),ce=oe&&(!se||oe instanceof en)&&!Nn(oe,n),ue=Mn(J);if(ce||ue){var pe=J instanceof f&&J.operator.slice(0,-1),de=J.name instanceof Ke,_e=Ln;if(J.may_throw(n)){if(de&&is_async(x))continue;_e=v?function(e){return e.has_side_effects(n)}:et}var be=!1,ye=!1,Se=new On,De=!0,Oe=Yn(J),Ce=Wn(oe),Me=zn(J),Ne=Me;se||(!pe&&Ne instanceof Pe&&(Ne=Ne.tail_node()),se=Kn());var Le=v||!Ce?function(e){return e instanceof R}:Ln,He=Jn(J),Ye=de,Ue=!1,We=0,Je=!m||!Ye;if(!Je){for(var Xe=J.arg_index+1;!Ue&&Xe<m.length;Xe++)m[Xe]&&m[Xe].transform(C);Je=!0}for(var Qe=q;!Ue&&Qe<e.length;Qe++)e[Qe].transform(C);if(ee){if(!We||Y>We+Q){A.push(I),y=!0;continue}We==X&&(Q=!0);var Ze=oe.definition();Ue=!1,W=0,Ye=de;for(var Qe=q;!Ue&&Qe<e.length;Qe++)e[Qe].transform(z)||e.splice(Qe--,1);We=J instanceof dn&&J===I[I.length-1]&&Ze.references.length==Ze.replaced&&!n.exposed(Ze),ee.last_ref=!1,ee.single_use=!1,k=!0}We&&Vn(J)}}}return k}function tn(e){return Ue?e:(ne===e&&(Ue=!0),te===e&&(te=null),e)}function rn(e,n){if(e instanceof h){if(e instanceof $e)return e;if(e instanceof S){e.name&&(e.name=e.name.transform(n)),!Ue&&e.extends&&(e.extends=e.extends.transform(n));for(var t=[],i=[],r=0;!Ue&&r<e.properties.length;r++){var o=e.properties[r];o.key instanceof we&&(o.key=o.key.transform(n)),o.static&&(o instanceof AST_ClassField?o.value&&t.push(o):o instanceof AST_ClassInit&&[].push.apply(i,o.value.body))}for(var r=0;!Ue&&r<i.length;r++)i[r].transform(n);for(var r=0;!Ue&&r<t.length;r++){var o=t[r];o.value=o.value.transform(n)}return e}if(e instanceof re)return e.object=e.object.transform(n),Ue=!0,e;if(e instanceof Re){e.expression=e.expression.transform(n);for(var r=0;!Ue&&r<e.body.length;r++){var a=e.body[r];if(a instanceof b){if(!Ye){if(a!==I[W])continue;W++}if(a.expression=a.expression.transform(n),!He)break;ue=!1}}return Ue=!0,e}}}function an(e,n){return n instanceof f?"="==n.operator&&n.left===e:n instanceof j?n.name===e:n instanceof L||(n instanceof B?n.value===e:void 0)}function pn(e,n){return n instanceof f?n.left!==e&&xt[n.operator.slice(0,-1)]:n instanceof p?n.left!==e&&xt[n.operator]:n instanceof g?n.optional&&n.expression!==e:n instanceof b?n.expression!==e:n instanceof D?n.condition!==e:n instanceof fe?n.condition!==e:n instanceof Ie?n.optional&&n.expression!==e:void 0}function bn(e,t){if(e instanceof u)return!0;if("Binary"==e.TYPE)return!yi(e.operator,e.right,n);if(e instanceof g){var i=e.expression;if(i instanceof en&&(h=i.definition(),i=i.fixed_value()),!(i instanceof he))return!e.is_expr_pure(n);if(h&&Ai(n,h,i))return!0;if(i.collapse_scanning)return!1;i.collapse_scanning=!0;var o=Je;Je=!1;for(var s=ne,f=te,c=0;!Ue&&c<i.argnames.length;c++)yn(m,i.argnames[c],e.args[c])&&(Ue=!0);if(!Ue)if(i.rest&&yn(m,i.rest,In(a,e,{elements:e.args.slice(c)})))Ue=!0;else if(xn(i)&&i.value)i.value.transform(C);else for(var c=0;!Ue&&c<i.body.length;c++){var l=i.body[c];if(l instanceof Fe){l.value&&l.value.transform(C);break}l.transform(C)}return te=f,ne=s,Je=o,i.collapse_scanning=!1,Ue?(Ue=!1,!0):!1}if(e instanceof S){if(!v)return!1;var p=e.extends;return!!p&&(p instanceof en&&(p=p.fixed_value()),!r(p))}if(e instanceof K){if(v){if(v.bfinally)return!0;if(v.bcatch&&e instanceof AST_Throw)return!0}return se||oe instanceof qe||Zn(oe)}if(e instanceof ae)return n.option("ie")&&e.name&&Oe.has(e.name.name);if(e instanceof Ee)return Xn(e,t);if(e instanceof qe){if(se)return!0;var d=e.expression;if(d instanceof en&&w(d.definition()))return!0;if(n.option("unsafe")){if(pt(d)&&ht[d.name])return!1;if(Pt(d))return!1}return!De||!ee&&(!(!v&&Ce)&&(!e.optional&&d.may_throw_on_access(n)))}if(e instanceof ze)return!0;if(e instanceof en){if(Xn(e,t))return!an(e,t);if(se&&Zn(e))return!0;var h=e.definition();return(v||h.scope.resolve()!==x)&&!E(e)}if(e instanceof nn)return!e.is_expr_pure(n);if(e instanceof dn)return!!Le(e.name)||(e.value||t instanceof me)&&e.name.match_symbol(function(e){return e instanceof Ve&&(Oe.has(e.name)||se&&Zn(e))},!0);if(e instanceof vn)return!0;var _=Qn(e.left,e);return!!_&&(_ instanceof qe||(!!Le(_)||_.match_symbol(function(e){return e instanceof en&&(Oe.has(e.name)||be&&n.exposed(e.definition()))},!0)));function m(e){return e.transform(C),Ue}}function yn(e,t,i){if(t instanceof j)return e(t.value)||yn(e,t.name,t.value)||!St(i)&&yn(e,t.name,i);if(!i)return!(t instanceof Be);if(t instanceof R){if(t.rest&&yn(e,t.rest))return!0;if(t instanceof L)return i instanceof a?!En(t.elements,function(n,t){return!yn(e,n,i[t])}):!i.is_string(n)||!En(t.elements,function(n){return!yn(e,n)});if(t instanceof H)return!!i.may_throw_on_access(n)||!En(t.properties,function(n){return!(n.key instanceof we&&e(n.key))&&!yn(e,n.value)})}}function wn(){if(!1!==c){var e=n.parent(),t=n.self();if(void 0===c){if(!(t instanceof ve)||Tn(t)||t.uses_arguments||t.pinned()||!(e instanceof g)||e.expression!==t||!En(e.args,function(e){return!(e instanceof ze)}))return void(c=!1);if(!lt(e))return;c=!0}var i,r=t.in_strict_mode(n)&&!t.parent_scope.resolve(!0).in_strict_mode(n);is_async(t)?(i=function(e){return e instanceof Be&&"await"==e.name},s=!0):(i=function(e){return e instanceof u&&!a.find_parent($e)},void 0===s&&(s=Fn(n,1,e,null,!0,!0)));for(var o=null,a=new gn(function(e,n){if(!h)return!0;if(i(e)||e instanceof vn)return h=null,!0;if(e instanceof Ee)return!r&&o||(h=null),!0;var a;if(e instanceof en)return(e.in_arg&&!ii(e.definition())||(a=t.variables.get(e.name))&&a!==e.definition())&&(h=null),!0;if(e instanceof $e&&!xn(e)){var s=o;return o=e,n(),o=s,!0}}),f=(m=e.args.slice()).length,l=new On,p=t.argnames.length;--p>=0;){var d=t.argnames[p],h=m[p],_=null;if(d instanceof j&&(_=d.value,d=d.name,m[f+p]=_),d instanceof R){if(s&&yn(function(e){return e.has_side_effects(n)},d,h)){A.length=0;break}m[f+p]=t.argnames[p]}else if(!l.has(d.name)&&(l.set(d.name,!0),_&&(h=St(h)?_:null),h||_?h instanceof he&&h.pinned()?h=null:h&&h.walk(a):h=In(ln,d).transform(n),h)){var v=In(dn,d,{name:d,value:h});v.name_index=p,v.arg_index=_?f+p:p,A.unshift([v])}}t.rest&&m.push(t.rest)}}function Sn(e,n){if(I.push(e),e instanceof a)e.elements.forEach(function(e){Sn(e,n)});else if(e instanceof f){var t=e.left;t instanceof R||A.push(I.slice()),Sn(t),Sn(e.right),t instanceof en&&"="==e.operator&&T.set(t.name,(T.get(t.name)||0)+1)}else if(e instanceof u)Sn(e.expression,n);else if(e instanceof p){var i=xt[e.operator];n&&i&&"??"!=e.operator&&e.right instanceof f&&"="==e.right.operator&&!(e.right.left instanceof R)&&A.push(I.slice()),Sn(e.left,!i&&n),Sn(e.right,n)}else if(e instanceof g)Sn(e.expression),e.args.forEach(Sn);else if(e instanceof b)Sn(e.expression);else if(e instanceof D)Sn(e.condition),Sn(e.consequent,n),Sn(e.alternative,n);else if(e instanceof M)e.definitions.forEach(Sn);else if(e instanceof V)Sn(e.expression);else if(e instanceof G)Sn(e.condition),e.body instanceof d||Sn(e.body);else if(e instanceof K)e.value&&Sn(e.value);else if(e instanceof ie)e.init&&Sn(e.init,!0),e.condition&&Sn(e.condition),e.step&&Sn(e.step,!0),e.body instanceof d||Sn(e.body);else if(e instanceof re)Sn(e.object),e.body instanceof d||Sn(e.body);else if(e instanceof fe)Sn(e.condition),e.body instanceof d||Sn(e.body),!e.alternative||e.alternative instanceof d||Sn(e.alternative);else if(e instanceof Te)e.properties.forEach(function(e){I.push(e),e.key instanceof we&&Sn(e.key),e instanceof Ae&&Sn(e.value,n),I.pop()});else if(e instanceof Pe){var r=e.expressions.length-(n?0:1);e.expressions.forEach(function(e,n){Sn(e,n<r)})}else if(e instanceof je)Sn(e.body,!0);else if(e instanceof ze)Sn(e.expression);else if(e instanceof Ie)Sn(e.expression),Sn(e.property);else if(e instanceof Re)Sn(e.expression),e.body.forEach(Sn);else if(e instanceof fn)UNARY_POSTFIX[e.operator]?A.push(I.slice()):Sn(e.expression);else if(e instanceof dn){if(e.name instanceof AST_SymbolVar)if(e.value){var o=e.name.definition();o.references.length>o.replaced&&A.push(I.slice())}else O.set(e.name.name,(O.get(e.name.name)||0)+1);e.value&&Sn(e.value)}else e instanceof vn&&e.expression&&Sn(e.expression);I.pop()}function An(e,n,t){var i;do{i=e,e=C.parent(++t)}while(e instanceof f&&e.operator.slice(0,-1)==n||e instanceof p&&e.operator==n);return i}function kn(e,n,t,i,r){var o=Je;Je=!1;var a=ne,s=te,f=C.stack;return C.stack=[i],e.transform(C),C.stack=f,te=s,ne=a,Je=o,Ue?(Ue=!1,t):n(i,r+1)}function Dn(e,n){var t=C.parent(n);if(bn(e,t))return e;if(pn(e,t))return e;if(t instanceof a)return Dn(t,n+1);if(t instanceof f)return o(t.left);if(t instanceof u)return e;if(t instanceof p)return Dn(t,n+1);if(t instanceof g)return Dn(t,n+1);if(t instanceof b)return Dn(t,n+1);if(t instanceof D)return Dn(t,n+1);if(t instanceof M)return Dn(t,n+1);if(t instanceof K)return Dn(t,n+1);if(t instanceof fe)return Dn(t,n+1);if(t instanceof le)return e;if(t instanceof ke){var i=C.parent(n+1);return En(i.properties,function(e){return e instanceof Ae})?Dn(i,n+2):i}if(t instanceof qe){var r=t.expression;return r===e?Dn(t,n+1):kn(r,Dn,e,t,n)}return t instanceof Pe?Dn(t,n+1):t instanceof je?Dn(t,n+1):t instanceof ze?e:t instanceof Re?Dn(t,n+1):t instanceof fn?Dn(t,n+1):t instanceof dn?o(t.name):t instanceof vn?e:null;function o(i){return _e(t)?e:i!==e&&i instanceof R?kn(i,Dn,e,t,n):Dn(t,n+1)}}function Cn(e){if(y)y=!1;else if(!(Y<1)){var t=(e=e.tail_node())instanceof f&&"="==e.operator?e.left:e;if(t instanceof en){var i=t.definition();if(!i.undeclared&&!w(i)){if(t!==e){if(Nn(t,n))return;var r=i.references.length-i.replaced;if(r<2)return;var o=J.clone();o[o instanceof f?"right":"value"]=t,J.name_index>=0&&(o.name_index=J.name_index,o.arg_index=J.arg_index),J=o}return ee=i}}}}function $n(e){return e.references.length-e.replaced-(T.get(e.name)||0)}function Pn(e){if(e instanceof f){var t=e.left;if(!(t instanceof en))return t;var i=t.definition();if(x.uses_arguments&&is_funarg(i))return t;if(n.exposed(i))return t;if(Y=$n(i),i.fixed&&t.fixed){var r=i.references.filter(function(e){return e.fixed===t.fixed}).length-1;r<Y&&(Y=r,X=0,Z=!0)}return"="==e.operator&&Cn(e.right),t}if(e instanceof p)return e.right.left;if(e instanceof fn)return e.expression;if(e instanceof dn){var t=e.name,i=t.definition();if(i.const_redefs)return;if(!jn(t,i.orig))return;if(x.uses_arguments&&is_funarg(i))return;var o=i.orig.length-i.eliminated-(O.get(i.name)||0);return Y=$n(i),i.fixed&&(Y=Math.min(Y,i.references.filter(function(n){if(!n.fixed)return!0;if(!n.fixed.assigns)return!0;var i=n.fixed.assigns[0];return i===t||zn(i)===e.value}).length)),o>1&&!(t instanceof Ke)?(Cn(e.value),In(en,t)):Cn(e.value)||1==Y&&!n.exposed(i)?In(en,t):void 0}}function zn(e){if(e instanceof f)return e.right;if(e instanceof p){var n=e.clone();return n.right=e.right.right,n}return e instanceof dn?e.value:void 0}function Mn(e){if(!(e instanceof f&&e.right.single_use)){for(var t,i=Object.create(null),r=new gn(function(e){e instanceof en&&(i[e.definition().id]=!0)});e instanceof f&&"="==e.operator;)e.left.walk(r),e=e.right;if(e instanceof Ee)return c;if(e instanceof en){var o=e.evaluate(n);return o===e?c:Rn(o,c)}if(e.is_truthy())return Rn(!0,Ln);if(e.is_constant()){var s=e.evaluate(n);if(!(s instanceof we))return Rn(s,c)}return oe instanceof en&&(!!function e(t){if(t instanceof a)return!1;if(t instanceof p&&xt[t.operator])return e(t.left)&&e(t.right);if(t instanceof g)return!1;if(t instanceof D)return e(t.consequent)&&e(t.alternative);if(t instanceof Te)return!1;return!t.has_side_effects(n)}(e)&&(e.walk(new gn(function(e){if(t)return!0;e instanceof en&&i[e.definition().id]&&(t=!0)})),!t&&c))}function c(n){return e.equals(n)}}function Rn(e,t){return function(i,r){if(r.in_boolean_context()){if(e&&i.is_truthy()&&!i.has_side_effects(n))return!0;if(i.is_constant()){var o=i.evaluate(n);if(!(o instanceof we))return!o==!e}}return t(i)}}function Bn(e){for(;e.write_only&&(e.write_only=!1,e instanceof f);)e=e.right}function Hn(e,n){var t=n.scope||qn(C)||i;e.walk(new gn(function(e){if(e instanceof h)return!0;e instanceof Be&&(e.scope=t)}))}function Yn(e){var i=new On;e instanceof dn&&(e.name.definition().fixed||(De=!1),i.add(e.name.name,oe));var r=x.uses_arguments&&!n.has_directive("use strict"),o=x instanceof on,a=new gn(function(s){var c;if(s instanceof en){if(!(c=s.fixed_value())){c=s;var u=s.definition(),l=s.fixed&&s.fixed.escaped||u.escaped;u.undeclared||!u.assignments&&l&&!l.cross_scope||!P(u,s.scope,s,a.parent())&&ki(u)||(De=!1)}}else s instanceof Ee&&(c=s);if(c)i.add(s.name,t(n,a,s,c,0));else{if(s instanceof he){for(var d,h=0,_=s;d=a.parent(h++);_=d){if(d instanceof f){if(d.left===_)break;if("="==d.operator)continue;if(xt[d.operator.slice(0,-1)])continue;break}if(d instanceof p){if(xt[d.operator])continue;break}if(d instanceof g)return;if(d instanceof $e)return;if(d instanceof Pe){if(d.tail_node()===_)continue;break}if(d instanceof nn){if(d.tag)return;break}}return s.enclosed.forEach(function(e){e.scope!==s&&Se.set(e.name,!0)}),!0}r&&s instanceof Ie&&(x.each_argname(function(e){n.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||(De=!1),i.add(e.name,!0))}),r=!1)}if(o)if("Call"==s.TYPE){if(ye)return;var v=s.expression;if(v instanceof qe)return;if(v instanceof ve&&!v.contains_this())return;ye=!0}else s instanceof qe&&function e(n){if(n instanceof en&&!(n=n.fixed_value()))return!0;if(n instanceof f)return"="==n.operator&&e(n.right);return n instanceof qe||n instanceof Ee}(s.expression)&&(s!==oe||e instanceof fn?be=!0:ye=!0)});return e.walk(a),i}function Vn(t){var i=Ne===Me?null:Un(Me,Me.expressions.slice(0,-1)),r=t.name_index;if(r>=0){var o,a=x.argnames[r];a instanceof j?(x.argnames[r]=a=a.clone(),a.value=i||In(xe,a,{value:0})):(o=n.parent().args)[r]&&(x.argnames[r]=a.clone(),o[r]=i||In(xe,o[r],{value:0}))}else{var s=I.length-1,f=I[s];(f instanceof dn||I[s-1].body===f)&&s--;var c=new mn(function(e,n,t){if(Ye)return e;if(e!==I[W])return e;if(++W<=s)return rn(e,c);if(Ye=!0,e instanceof M){O.set(f.name.name,(O.get(f.name.name)||0)+1),ee&&ee.replaced++;var r=e.definitions,o=r.indexOf(f),a=f.clone();if(a.value=null,!i)return e.definitions[o]=a,e;var u=[In(je,i,{body:i})];if(o>0){var l=e.clone();l.definitions=r.slice(0,o),u.unshift(l),(e=e.clone()).definitions=r.slice(o)}return u.push(e),e.definitions[0]=a,t?List.splice(u):In(_,e,{body:u})}return i?is_statement(e)?In(je,i,{body:i}):i:t?List.skip:null},function(e,n){return e instanceof ie?bt(e,n):Gn(e,c)});Ue=!1,Ye=!1,W=0,(e[q]=e[q].transform(c))||e.splice(q,1)}}function Gn(e,n){if(e instanceof Pe)switch(e.expressions.length){case 0:return null;case 1:return nt(n.parent(),e,e.expressions[0])}}function Wn(e){var n=root_expr(e);if(!(n instanceof en))return!1;if(n.definition().scope.resolve()!==x)return!1;if(!l)return!0;if(pe)return!1;if(J instanceof fn)return!1;var t=Oe.get(n.name);return!t||t[0]===e}function Kn(){return!(J instanceof fn)&&Ne.has_side_effects(n)}function Jn(e){if(e instanceof fn)return!1;if(se)return!1;if(ee)return!0;if(!(oe instanceof en))return!1;var n;if(e instanceof dn)n=1;else{if("="!=e.operator)return!1;n=2}var t=oe.definition();if(t.references.length-t.replaced==n)return!0;if(!t.fixed)return!1;if(!oe.fixed)return!1;var i=oe.fixed.assigns,r=0;return!!En(t.references,function(e,n){var t=e.fixed;return!!t&&(!t.to_binary&&!t.to_prefix&&(t===oe.fixed?(r++,!0):i&&t.assigns&&i[0]!==t.assigns[0]))})&&(r==n&&(Z=!0,!0))}function Xn(e,n){var t=Oe.get(e.name);if(t&&!En(t,function(e){return!e}))return t[0]!==oe||void(ue=!1)}function Zn(e){var t=e.definition();return!(1==t.orig.length&&t.orig[0]instanceof Ge)&&(t.scope.resolve()!==x||(!(!ye||!n.exposed(t))||!En(t.references,function(e){return e.scope.resolve(!0)===x})))}function et(e,n){if(e instanceof f)return et(e.left,!0);if(e instanceof fn)return et(e.expression,!0);if(e instanceof dn)return e.value&&et(e.value);if(n){if(e instanceof V)return et(e.expression,!0);if(e instanceof Ie)return et(e.expression,!0);if(e instanceof en)return e.definition().scope.resolve()!==x}return!1}}function X(e){for(var n=!1,t=[],i=0;i<e.length;){var r=e[i];if(r instanceof _&&En(r.body,ot))n=!0,X(r.body),[].splice.apply(e,[i,1].concat(r.body)),i+=r.body.length;else{if(r instanceof Y){if(jn(r.value,t)){n=!0,e.splice(i,1);continue}t.push(r.value)}r instanceof W?(n=!0,e.splice(i,1)):i++}}return n}function Z(e,n){for(var t,i,r,o=!1,a=n.parent(),s=n.self(),f=T&&a&&"Call"==a.TYPE&&a.expression===s,c=T&&n.option("conditionals")&&n.option("sequences"),u=!(v&&v.bfinally&&Dn(x)),l=function(e){for(var n=0,t=e.length;--t>=0;){var i=e[t];if(i instanceof fe&&i.body instanceof Fe&&++n>1)return!0}return!1}(e),p=e.length;--p>=0;){var h=e[p],g=V(p),b=e[g];if(T&&t&&!b&&h instanceof Fe&&u&&!(s instanceof Le)){var y=h.value;if(!y){o=!0,e.splice(p,1);continue}var w=y.tail_node();if(St(w)){o=!0,y instanceof un?y=y.expression:w instanceof un&&((y=y.clone()).expressions[y.expressions.length-1]=w.expression),e[p]=In(je,h,{body:y});continue}}if(h instanceof fe){var S=Mt(h.body);if(L(S)){S.label&&Rn(S.label.thedef.references,S),o=!0,(h=h.clone()).body=In(_,h,{body:Y(h.body,S)}),h.alternative=In(_,h,{body:at(h.alternative).concat(B(r,i))}),U(S.value,r),e[p]=h,e[p]=h.transform(n);continue}if(S&&!h.alternative&&b instanceof pe){var A=h.condition,k=p+1==g&&h.body instanceof _;if((A=Tt(A,A.negate(n),k))!==h.condition){o=!0,(h=h.clone()).condition=A;var y=h.body;h.body=In(_,b,{body:B(!0,null,g+1)}),e.splice(p,1,h,y),(!T||s instanceof d&&s.body===e)&&(e[p]=h.transform(n));continue}}var E=Mt(h.alternative);if(L(E)){E.label&&Rn(E.label.thedef.references,E),o=!0,(h=h.clone()).body=In(_,h.body,{body:at(h.body).concat(B(r,i))}),h.alternative=In(_,h.alternative,{body:Y(h.alternative,E)}),U(E.value,r),e[p]=h,e[p]=h.transform(n);continue}if(n.option("typeofs")){if(S&&!E){var q=In(_,s,{body:e.slice(p+1)});Zt(h.condition,null,q)}if(!S&&E){var q=In(_,s,{body:e.slice(p+1)});Zt(h.condition,q)}}}if(h instanceof fe&&h.body instanceof Fe){var F,$,P=h.body.value,j=h.body.in_bool||b instanceof Fe&&b.in_bool;if(!h.alternative&&b instanceof Fe&&(u||!P==!b.value)){o=!0,(h=h.clone()).alternative=In(_,b,{body:B(!0,null,g+1)}),e[p]=h,e[p]=h.transform(n);continue}if(T&&t&&!b&&!h.alternative&&(j||P&&l||P instanceof D&&(St(P.consequent,n)||St(P.alternative,n)))){o=!0,(h=h.clone()).alternative=In(Fe,h,{value:null}),e[p]=h,e[p]=h.transform(n);continue}if(c&&!h.alternative&&(!($=e[F=G(p)])&&f||$ instanceof fe&&$.body instanceof Fe)&&(b?b instanceof je&&V(g)==e.length:!t)){o=!0;var M=[];h=h.clone(),M.push(h.condition),h.condition=Un(h,M),h.alternative=In(_,s,{body:B().concat(In(Fe,s,{value:null}))}),e[p]=h.transform(n),p=F+1;continue}}h instanceof m||h instanceof K?i=h:t&&i&&i===b&&J(h)}return o;function N(e){return I(n,function(n){return n===e})}function R(e,n){if(!i)return!1;if(i.TYPE!=e.TYPE)return!1;var t=e.value;if(!t)return!1;var r=i.equals(e);return!r&&t instanceof Pe&&(t=t.tail_node(),i.value&&i.value.equals(t)&&(r=2)),!r&&!n&&i.value instanceof Pe&&i.value.tail_node().equals(t)&&(r=3),r}function L(t){if(r=!1,!function(e){if(e instanceof K){if(r=R(e))return!0;if(!T)return!1;if(!(e instanceof Fe))return!1;var t=e.value;return!(t&&!St(t.tail_node()))&&(!(s instanceof Le)||!!i&&(!(i instanceof K&&i.value)&&(r=4,!0)))}if(!(e instanceof ge))return!1;if(s instanceof Le)if(i instanceof K){if(!T)return!1;if(i.value)return!1;r=!0}else if(i){if(n.loopcontrol_target(i)!==a)return!1;r=!0}else if(!1===i)return!1;var o=n.loopcontrol_target(e);return e instanceof C?N(ct(o)):!(o instanceof le)&&N(o)}(t))return!1;for(var o=e.length;--o>p;){var f=e[o];if(f instanceof z){if(f.name.definition().preinit)return!1}else if((f instanceof O||f instanceof me)&&!En(f.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof Ve&&e.definition().preinit})}))return!1}return!0}function B(n,t,r){var o=[],a=!1,s=p+1;n?t?r=e.lastIndexOf(t):(t=e[r])!==i&&(i=!1):(r=e.length,i=null);var f=e.splice(s,r-s).filter(function(e){return e instanceof _e?(o.push(e),!1):(rt(e)&&(a=!0),!0)});return 3===n&&(f.push(In(je,t.value,{body:Un(t.value,t.value.expressions.slice(0,-1))})),t.value=t.value.tail_node()),[].push.apply(a?f:e,o),f}function H(e,n){if(e)switch(n){case 4:return e;case 3:if(!(e instanceof Pe))break;case 2:return Un(e,e.expressions.slice(0,-1))}}function Y(e,n){for(var t,i=at(e),o=i;(t=o[o.length-1])!==n;)o=t.body;o.pop();var a=n.value;return r&&(a=H(a,r)),a&&o.push(In(je,a,{body:a})),i}function U(e,n){if(n&&e){switch(n){case 4:return;case 3:case 2:e=e.tail_node()}tt(e,i.value)}}function V(n){t=!0;for(var i=n;++i<e.length;){var r=e[i];if(!mt(r)){if(!(r instanceof pn))break;t=!1}}return i}function G(n){for(var t=n;--t>=0;){var i=e[t];if(!(i instanceof pn)&&!mt(i))break}return t}function J(e,n,t){if(e instanceof K){var r=!(n&&e instanceof AST_Throw)&&R(e,!0);if(r){o=!0;var a=H(e.value,r);return a?In(je,a,{body:a}):t?null:In(W,e)}}else if(e instanceof fe)e.body=J(e.body,n),e.alternative&&(e.alternative=J(e.alternative,n));else if(e instanceof de)e.body=J(e.body,n);else if(e instanceof sn){if(!e.bfinally||!i.value||i.value.is_constant()){e.bcatch&&J(e.bcatch,n);var s=J(e.body.pop(),!0,!0);s&&e.body.push(s)}}else if(e instanceof d&&!(e instanceof $e||e instanceof Re)){var s=J(e.body.pop(),n,!0);s&&e.body.push(s)}return e}}function ee(e,n){var t,i=n.self();i instanceof y?i=n.parent():i instanceof de&&(i=i.body);for(var r=0,o=0,a=e.length;r<a;r++){var s=e[r];if(s instanceof ge){var f=n.loopcontrol_target(s);ct(f)!==i||s instanceof m&&f instanceof le?e[o++]=s:s.label&&Rn(s.label.thedef.references,s)}else e[o++]=s;if(Mt(s)){t=e.slice(r+1);break}}return e.length=o,t&&t.forEach(function(t){wt(n,t,e)}),e.length!=a}function ne(e,n){if(!(!T||v&&v.bfinally)){for(var t=!1,i=e.length;--i>=0;){var r=e[i];if(!(r instanceof je))break;var o=r.body;if(!(o instanceof u))break;var a=o.expression;if(!wi(n,a))break;if(t=!0,a=a.drop_side_effect_free(n,!0)){r.body=a;break}}return e.length=i+1,t}}function se(e,n){var t=!1,r=e.length-1;if(T&&r>=0){var o=v&&v.bfinally&&Dn(x),a=e[r].try_inline(n,i,o);a&&(e[r--]=a,t=!0)}for(var s=l&&v&&v.bfinally?"try":l;r>=0;r--){var a=e[r].try_inline(n,i,!0,s);a&&(e[r]=a,t=!0)}return t}function ce(e,n){if(!(e.length<2)){for(var t=[],i=0,r=0,o=e.length;r<o;r++){var a=e[r];a instanceof je?(t.length>=n.sequences_limit&&s(),it(t,a.body)):mt(a)?e[i++]=a:(s(),e[i++]=a)}return s(),e.length=i,i!=o}function s(){if(t.length){var n=Un(t[0],t);e[i++]=In(je,n,{body:n}),t=[]}}}function ue(e,n){if(!(e instanceof _))return e;for(var t=null,i=0;i<e.body.length;i++){var r=e.body[i];if(r instanceof pn&&vt(r))n.push(r);else{if(t||rt(r))return!1;t=r}}return t}function be(e,n){for(var t,i=!1,r=0,o=0;o<e.length;o++){var a=e[o];if(t)if(a instanceof K)!a.value&&Dn(x)||(a.value=d(a.value||In(ln,a)).optimize(n));else if(a instanceof ie){if(!(a.init instanceof M)){var s=!1;t.body.walk(new gn(function(e){return!!(s||e instanceof $e)||(e instanceof p&&"in"==e.operator?(s=!0,!0):void 0)})),s||(a.init?a.init=d(a.init):(a.init=t.body,r--,i=!0))}}else a instanceof oe?rt(a.init)||(a.object=d(a.object)):a instanceof fe?a.condition=d(a.condition):a instanceof Re?a.expression=d(a.expression):a instanceof _n&&(a.expression=d(a.expression));if(n.option("conditionals")&&a instanceof fe){var f=[],c=ue(a.body,f),u=ue(a.alternative,f);if(!1!==c&&!1!==u&&f.length>0){var l=f.length;f.push(In(fe,a,{condition:a.condition,body:c||In(W,a.body),alternative:u})),f.unshift(r,1),[].splice.apply(e,f),o+=l,r+=l+1,t=null,i=!0;continue}}e[r++]=a,t=a instanceof je?a:null}return e.length=r,i;function d(e){r--,i=!0;var n=t.body;return Un(n,[n,e])}}function ye(e){return e instanceof f?[e]:e instanceof Pe?e.expressions.slice():void 0}function Se(e,n,t){var i=ye(n);if(i){t=t||0;for(var r=!1,o=i.length-t;--o>=0;){var a=i[o];if(l(a)){var s;if(a.left instanceof en)s=i.slice(o+1);else{if(!(a.left instanceof qe&&l(a.left.expression)))continue;s=i.slice(o+1);var c=a.clone();a=a.left.expression,c.left=c.left.clone(),c.left.expression=a.left.clone(),s.unshift(c)}0!=s.length&&Me(a.left,a.right,s)&&(r=!0,i=i.slice(0,o).concat(a,s))}}if(e instanceof M){for(var o=e.definitions.length;--o>=0;){var u=e.definitions[o];if(u.value){Me(u.name,u.value,i)&&(r=!0),Oe(u,i,t)&&(r=!0);break}}e instanceof pn&&Ce(e.definitions,i,t)&&(r=!0)}return r&&i}function l(e){return e instanceof f&&"="==e.operator}}function De(e,n){if(e instanceof je&&!vt(n)){var t=ye(e.body);if(t){var i=[];if(Ce(i,t.reverse(),0))return n.definitions=i.reverse().concat(n.definitions),t.reverse()}}}function Oe(e,t,i){if(n.option("conditionals")&&!(e.name instanceof R)){for(var r=!1,o=e.name.definition();t.length>i;){var a=hi(n,o,e.value,t[0]);if(!a)break;e.value=a,t.shift(),r=!0}return r}}function Ce(e,n,t){for(var i=!1;n.length>t;){var r=n[0];if(!(r instanceof f))break;if("="!=r.operator)break;var o=r.left;if(!(o instanceof en))break;if(pt(o))break;if(o.scope.resolve()!==x)break;var a=o.definition();if(a.scope!==x)break;if(a.orig.length>a.eliminated+1)break;if("SymbolVar"!=a.orig[0].TYPE)break;var s=In(AST_SymbolVar,o);e.push(In(dn,r,{name:s,value:r.right})),a.orig.push(s),a.replaced++,n.shift(),i=!0}return i}function Me(e,t,i){var r=new On;for(r.set(e.name,!0);t instanceof f&&"="==t.operator;)t.left instanceof en&&r.set(t.left.name,!0),t=t.right;if(t instanceof Te){var o=!1;do{if(!a(i[0]))break;i.shift(),o=!0}while(i.length);return o}function a(e){if(e instanceof f&&"="==e.operator&&e.left instanceof qe){var i=e.left.expression;if(i instanceof en&&r.has(i.name)&&e.right.is_constant_expression(x)){var o=e.left.property;if(o instanceof we&&(a(o)&&(o=e.left.property=o.right.clone()),o=o.evaluate(n)),!(o instanceof we)){var s="__proto__"==(o=""+o)||n.has_directive("use strict")?function(e){var n=e.key;return"string"==typeof n&&n!=o&&"__proto__"!=n}:function(e){var n=e.key;return e instanceof AST_ObjectGetter||e instanceof AST_ObjectSetter?"string"==typeof n&&n!=o:"__proto__"!==n};if(En(t.properties,s))return t.properties.push(In(Ae,e,{key:o,value:e.right})),!0}}}}}function Ne(e){for(var n,t=!1,i=0,r=-1;i<e.length;i++){var o=e[i],a=e[r];if(o instanceof M)if(a&&a.TYPE==o.TYPE)a.definitions=a.definitions.concat(o.definitions),t=!0;else if(n&&n.TYPE==o.TYPE&&vt(o))n.definitions=n.definitions.concat(o.definitions),t=!0;else if(o instanceof pn){var s=De(a,o);s?(s.length&&(a.body=Un(a,s),r++),t=!0):r++,e[r]=n=o}else e[++r]=o;else{if(o instanceof K)o.value=u(o.value);else if(o instanceof ie){var s=Se(a,o.init);if(s)t=!0,o.init=s.length?Un(o.init,s):null;else{if(a instanceof pn&&(!o.init||o.init.TYPE==a.TYPE)){o.init&&(a.definitions=a.definitions.concat(o.init.definitions)),o=o.clone(),n=o.init=a,e[r]=l(o),t=!0;continue}if(n&&o.init&&n.TYPE==o.init.TYPE&&vt(o.init))n.definitions=n.definitions.concat(o.init.definitions),o.init=null,t=!0;else if(o.init instanceof pn&&(n=o.init,s=De(a,o.init))){if(t=!0,0==s.length){e[r]=l(o);continue}a.body=Un(a,s)}}}else if(o instanceof re){if(n&&n.TYPE==o.init.TYPE){var f=n.definitions.slice();o.init=o.init.definitions[0].name.convert_symbol(en,function(e,n){f.push(In(dn,n,{name:n,value:null})),n.definition().references.push(e)}),n.definitions=f,t=!0}o.object=u(o.object)}else if(o instanceof fe)o.condition=u(o.condition);else if(o instanceof je){var c,s=Se(a,o.body);if(s){if(t=!0,!s.length)continue;o.body=Un(o.body,s)}else if(a instanceof M&&(c=e[i+1])&&a.TYPE==c.TYPE&&(c=c.definitions[0]).value){t=!0,c.value=Un(o,[o.body,c.value]);continue}}else o instanceof Re?o.expression=u(o.expression):o instanceof _n&&(o.expression=u(o.expression));e[++r]=n?l(o):o}}return e.length=r+1,t;function u(e){var n=Se(a,e,1);if(!n)return e;t=!0;var i=e.tail_node();return n[n.length-1]!==i&&n.push(i.left),Un(e,n)}function l(e){return e.transform(new mn(function(e,i,r){if(e instanceof M){if(n===e)return e;if(n.TYPE!=e.TYPE)return e;var o=this.parent();return o instanceof re&&o.init===e?e:vt(e)?(n.definitions=n.definitions.concat(e.definitions),t=!0,o instanceof ie&&o.init===e?null:r?List.skip:In(W,e)):e}return e instanceof Q?e:e instanceof $e?e:is_statement(e)?void 0:e}))}}}function wt(e,n,t){var i,r=!1;function o(e){i?(i.push(e),ot(e)||(i.required=!0)):t.push(e)}n.walk(new gn(function(a,s){if(a instanceof z)return a.extends=null,a.properties=[],o(a),!0;if(a instanceof M){var f=[];return a.remove_initializers(e,f)&&we.warn("Dropping initialization in unreachable code [{start}]",a),f.length>0&&(a.definitions=f,o(a)),!0}if(a instanceof _e)return o(a),!0;if(a instanceof $e)return!0;if(a instanceof h){var c=i;return i=[],s(),i.required?t.push(In(_,n,{body:i})):i.length&&[].push.apply(t,i),i=c,!0}a instanceof ge||(r=!0)})),r&&we.warn("Dropping unreachable code [{start}]",n)}function St(e,n){return null==e||e.is_undefined||e instanceof ln||e instanceof un&&"void"==e.operator&&!(n&&e.expression.has_side_effects(n))}en.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&ht[this.name]}),(dt=function(e,n){e.DEFMETHOD("in_strict_mode",n)})(S,Hn),dt($e,function(e){for(var n=this.body,t=0;t<n.length;t++){var i=n[t];if(!(i instanceof Y))break;if("use strict"==i.value)return!0}var r=this.parent_scope;return r?r.resolve(!0).in_strict_mode(e):e.option("module")}),function(e){e(we,Ln),e(a,Hn),e(f,function(){return"="==this.operator&&this.right.is_truthy()}),e(he,Hn),e(Te,Hn),e(Ce,Hn),e(Pe,function(){return this.tail_node().is_truthy()}),e(en,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=Ln;var n=e.is_truthy();return delete this.is_truthy,n})}(function(e,n){e.DEFMETHOD("is_truthy",n)}),function(e){function n(e,n,t){switch(e){case"-":return n.is_negative_zero()&&(!(t instanceof q)||0==t.value);case"&&":case"||":return n.is_negative_zero()||t.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}e(we,Hn),e(a,Ln),e(f,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():n(e.slice(0,-1),this.left,this.right)}),e(p,function(){return n(this.operator,this.left,this.right)}),e(q,function(){return 0==this.value&&1/this.value<0}),e(he,Ln),e(Te,Ln),e(Ce,Ln),e(Pe,function(){return this.tail_node().is_negative_zero()}),e(en,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=Hn;var n=e.is_negative_zero();return delete this.is_negative_zero,n}),e(un,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator})}(function(e,n){e.DEFMETHOD("is_negative_zero",n)}),function(e){function n(e,n){return n||/strict/.test(e.option("pure_getters"))}we.DEFMETHOD("may_throw_on_access",function(e,n){return!e.option("pure_getters")||this._dot_throw(e,n)}),e(we,n),e(a,Ln),e(f,function(e){var n=this.operator,t=this.left,i=this.right;return"="!=n?xt[n.slice(0,-1)]&&(t._dot_throw(e)||i._dot_throw(e)):!!i._dot_throw(e)&&(!(t instanceof en)||(!(i instanceof p&&"||"==i.operator&&t.name==i.left.name)||i.right._dot_throw(e)))}),e(p,function(e){return xt[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),e(S,function(e,t){return n(e,t)&&!En(this.properties,function(e){return!!e.private||(!e.static||!(e instanceof AST_ClassGetter||e instanceof AST_ClassSetter))})}),e(D,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),e(q,Ln),e(V,function(e,t){if(!n(e,t))return!1;var r=this.expression;return r instanceof en&&(r=r.fixed_value()),!("prototype"==this.property&&i(r))}),e(he,Ln),e(Se,Hn),e(Te,function(e,t){return n(e,t)&&!En(this.properties,function(n){return!(n instanceof AST_ObjectGetter||n instanceof AST_ObjectSetter)&&!("__proto__"===n.key&&n.value._dot_throw(e,t))})}),e(Ee,function(e,t){return n(e,t)&&!this.scope.resolve().new}),e(Pe,function(e){return this.tail_node()._dot_throw(e)}),e(en,function(e,t){if(this.is_undefined)return!0;if(!n(e,t))return!1;if(pt(this)&&this.is_declared(e))return!1;if(this.is_immutable())return!1;var i=this.definition();if(w(i)&&!i.scope.rest&&En(i.scope.argnames,function(e){return e instanceof Ke}))return i.scope.uses_arguments>2;var r=this.fixed_value(!0);return!r||(this._dot_throw=Hn,r._dot_throw(e)?(delete this._dot_throw,!0):(this._dot_throw=Ln,!1))}),e(un,function(){return"void"==this.operator}),e(cn,Ln),e(ln,Hn)}(function(e,n){e.DEFMETHOD("_dot_throw",n)}),function(e){function n(e,n,t){switch(n){case"&&":return t.left.is_defined(e)&&t.right.is_defined(e);case"||":return t.left.is_truthy()||t.right.is_defined(e);case"??":return t.left.is_defined(e)||t.right.is_defined(e);default:return!0}}e(we,Ln),e(a,Hn),e(f,function(e){var t=this.operator;return"="==t?this.right.is_defined(e):n(e,t.slice(0,-1),this)}),e(p,function(e){return n(e,this.operator,this)}),e(D,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),e(q,Hn),e(se,Ln),e(he,Hn),e(Te,Hn),e(Pe,function(e){return this.tail_node().is_defined(e)}),e(en,function(e){if(this.is_undefined)return!1;if(pt(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var n=this.fixed_value();if(!n)return!1;this.is_defined=Ln;var t=n.is_defined(e);return delete this.is_defined,t}),e(un,function(){return"void"!=this.operator}),e(cn,Hn),e(ln,Ln)}(function(e,n){e.DEFMETHOD("is_defined",n)}),function(e){e(we,Ln),e(f,function(e){return"="==this.operator&&this.right.is_boolean(e)});var n=$n("in instanceof == != === !== < <= >= >");e(p,function(e){return n[this.operator]||xt[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(v,Hn);var t=$n("every hasOwnProperty isPrototypeOf propertyIsEnumerable some");e(g,function(e){if(!e.option("unsafe"))return!1;var n=this.expression;return n instanceof V&&(t[n.property]||"test"==n.property&&n.expression instanceof Ce)}),e(D,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(ye,Ln),e(Pe,function(e){return this.tail_node().is_boolean(e)}),e(en,function(e){var n=this.fixed_value();if(!n)return!1;this.is_boolean=Ln;var t=n.is_boolean(e);return delete this.is_boolean,t});var i=$n("! delete");e(un,function(){return i[this.operator]})}(function(e,n){e.DEFMETHOD("is_boolean",n)}),function(e){e(we,Ln);var n=$n("- * / % ** & | ^ << >> >>>");e(f,function(e){return n[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(p,function(e){return!!n[this.operator]||"+"==this.operator&&((this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e)))});var t=$n(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);e(g,function(e){if(!e.option("unsafe"))return!1;var n=this.expression;return n instanceof V&&(t[n.property]||pt(n.expression)&&"Math"==n.expression.name)}),e(D,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(ye,Ln),e(xe,Hn),e(Pe,function(e){return this.tail_node().is_number(e)}),e(en,function(e,n){var t=this.fixed_value();if(!t)return!1;if(n&&t instanceof un&&"+"==t.operator&&t.expression.equals(this))return!1;this.is_number=Ln;var i=t.is_number(e);return delete this.is_number,i});var i=$n("+ - ~ ++ --");e(fn,function(){return i[this.operator]})}(function(e,n){e.DEFMETHOD("is_number",n)}),function(e){e(we,Ln),e(f,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(p,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))});var n=$n(["charAt","substr","substring","toExponential","toFixed","toLowerCase","toPrecision","toString","toUpperCase","trim"]);e(g,function(e){if(!e.option("unsafe"))return!1;var t=this.expression;return t instanceof V&&n[t.property]}),e(D,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(Pe,function(e){return this.tail_node().is_string(e)}),e(Ne,Hn),e(en,function(e){var n=this.fixed_value();if(!n)return!1;this.is_string=Ln;var t=n.is_string(e);return delete this.is_string,t}),e(nn,function(e){return!this.tag||Ei(e,this.tag)}),e(un,function(){return"typeof"==this.operator})}(function(e,n){e.DEFMETHOD("is_string",n)});var xt=$n("&& || ??");function Tt(e,n,t){var i=n.print_to_string().length-e.print_to_string().length;return i<(t||0)?n:e}function At(e,n,t){return Tt(In(je,e,{body:e}),In(je,n,{body:n}),t).body}function kt(e,n,t,i){return(Sn(e)?At:Tt)(n,t,i)}function Et(e){var n=Object.create(null);return Object.keys(e).forEach(function(t){n[t]=$n(e[t])}),n}function Dt(e){for(var n=0;n<e.length;n++){var t=e[n];if(!(t instanceof Y))return t}}function Ot(){return this.value?In(Fe,this.value,{value:this.value}):Dt(this.body)}function qt(e,n){var t=n.evaluate(e);return t===n?n:(t=Xn(t,n).optimize(e),kt(e,n,t,e.eval_threshold))}!function(e){function n(e){we.warn("global_defs {this} redefined [{start}]",e)}on.DEFMETHOD("resolve_defines",function(e){return e.option("global_defs")?(this.figure_out_scope({ie:e.option("ie")}),this.transform(new mn(function(t){var i=t._find_defs(e,"");if(i){for(var r,o=0,a=t;(r=this.parent(o++))&&r instanceof qe&&r.expression===a;)a=r;if(!Qn(a,r))return i;n(t)}}))):this}),e(we,zn),e(V,function(e,n){return this.expression._find_defs(e,"."+this.property+n)}),e(Ve,function(e){this.definition().global&&Cn(e.option("global_defs"),this.name)&&n(this)}),e(en,function(e,n){if(this.definition().global){var t=e.option("global_defs"),i=this.name+n;return Cn(t,i)?function e(n,t){if(n instanceof we)return n.clone(!0);if(Array.isArray(n))return In(a,t,{elements:n.map(function(n){return e(n,t)})});if(n&&"object"==typeof n){var i=[];for(var r in n)Cn(n,r)&&i.push(In(Ae,t,{key:r,value:e(n[r],t)}));return In(Te,t,{properties:i})}return Xn(n,t)}(t[i],this):void 0}})}(function(e,n){e.DEFMETHOD("_find_defs",n)}),s.DEFMETHOD("first_statement",Ot),c.DEFMETHOD("first_statement",Ot),he.DEFMETHOD("first_statement",function(){return Dt(this.body)}),he.DEFMETHOD("length",function(){for(var e=this.argnames,n=0;n<e.length&&!(e[n]instanceof j);n++);return n});var Ct=["constructor","toString","valueOf"],Ft=Et({Array:["indexOf","join","lastIndexOf","slice"].concat(Ct),Boolean:Ct,Function:Ct,Number:["toExponential","toFixed","toPrecision"].concat(Ct),Object:Ct,RegExp:["exec","test"].concat(Ct),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(Ct)}),$t=Et({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]});function Pt(e){if(!(e instanceof V))return!1;var n=e.expression;if(!pt(n))return!1;var t=$t[n.name];return t&&(t[e.property]||"Math"==n.name&&"random"==e.property)}!function(e){e(we,Ln),e(q,Hn),e(Ce,Ln);var n=$n("! ~ - + void");e(un,function(){return n[this.operator]&&this.expression instanceof q})}(function(e,n){e.DEFMETHOD("is_constant",n)}),function(e){we.DEFMETHOD("evaluate",function(e,n){if(!e.option("evaluate"))return this;var t=[],i=this._eval(e,n,t,1);return t.forEach(function(e){delete e._eval}),n?i:!i||i instanceof RegExp?i:"function"==typeof i||"object"==typeof i?this:i});var n=new gn(function(e){e instanceof f&&t(e.left),e instanceof re&&t(e.init),e instanceof fn&&UNARY_POSTFIX[e.operator]&&t(e.expression)});function t(e){e instanceof L?e.elements.forEach(t):e instanceof H?e.properties.forEach(function(e){t(e.value)}):e instanceof qe?t(e.expression):e instanceof en&&e.definition().references.forEach(function(e){delete e._eval})}e(Me,function(){throw new Error(string_template("Cannot evaluate a statement [{start}]",this))}),e(o,Yn),e(l,Yn),e(S,Yn),e(we,Yn),e(q,function(){return this.value}),e(f,function(e,i,r,o){var a=this.left;if(!i){if(!(a instanceof en))return this;if(!Cn(a,"_eval")){if(!a.fixed)return this;var s=a.definition();if(!s.fixed)return this;if(s.undeclared)return this;if(s.last_ref!==a)return this;if("m"==s.single_use)return this;if(this.right.has_side_effects(e))return this}}var f,c=this.operator;f=!Cn(a,"_eval")&&a instanceof en&&a.fixed&&a.definition().fixed?a:"="==c?this.right:In(p,this,{operator:c.slice(0,-1),left:a,right:this.right}),a.walk(n);var u=f._eval(e,i,r,o);return"object"==typeof u?this:(t(a),u)}),e(Pe,function(e,t,i,r){if(!t)return this;for(var o=this.expressions,a=0,s=o.length-1;a<s;a++)o[a].walk(n);var f=o[s],c=f._eval(e,t,i,r);return c===f?this:c}),e(he,function(e){if(e.option("unsafe")){var n=function(){};return n.node=this,n.toString=function(){return"function(){}"},n}return this}),e(a,function(e,n,t,i){if(e.option("unsafe")){for(var r=[],o=0;o<this.elements.length;o++){var a=this.elements[o];if(a instanceof se)return this;var s=a._eval(e,n,t,i);if(a===s)return this;r.push(s)}return r}return this}),e(Te,function(e,n,t,i){if(e.option("unsafe")){for(var r={},o=0;o<this.properties.length;o++){var a=this.properties[o];if(!(a instanceof Ae))return this;var s=a.key;if(s instanceof we&&(s=s._eval(e,n,t,i))===a.key)return this;switch(s){case"__proto__":case"toString":case"valueOf":return this}if(r[s]=a.value._eval(e,n,t,i),r[s]===a.value)return this}return r}return this});var i=$n("! typeof void");e(un,function(e,r,o,a){var s=this.expression,f=this.operator;if(e.option("typeofs")&&"typeof"==f&&(s instanceof he||s instanceof en&&s.fixed_value()instanceof he))return"function";var c=s instanceof en&&s.definition();i[f]||c&&c.fixed||a++,s.walk(n);var u=s._eval(e,r,o,a);if(u===s){if(r&&"void"==f)return;return this}switch(f){case"!":return!u;case"typeof":return u instanceof RegExp?this:typeof u;case"void":return;case"~":return~u;case"-":return-u;case"+":return+u;case"++":case"--":if(!c)return this;if(!r){if(c.undeclared)return this;if(c.last_ref!==s)return this}return Cn(s,"_eval")&&(u=+(f[0]+1)+ +u),t(s),u}return this}),e(cn,function(e,i,r,o){var a=this.expression;if(a instanceof en){if(!Cn(a,"_eval")){if(!a.fixed)return this;if(!i){var s=a.definition();if(!s.fixed)return this;if(s.undeclared)return this;if(s.last_ref!==a)return this}}}else if(!i)return this;a instanceof en&&a.definition().fixed||o++,a.walk(n);var f=a._eval(e,i,r,o);return f===a?this:(t(a),+f)});var r=$n("&& || === !==");e(p,function(e,n,t,i){r[this.operator]||i++;var o=this.left._eval(e,n,t,i);if(o===this.left)return this;if(this.operator==(o?"||":"&&"))return o;var a,s=n&&!(o&&"object"==typeof o),f=this.right._eval(e,s,t,i);if(f===this.right)return this;switch(this.operator){case"&&":a=o&&f;break;case"||":a=o||f;break;case"??":a=null==o?f:o;break;case"|":a=o|f;break;case"&":a=o&f;break;case"^":a=o^f;break;case"+":a=o+f;break;case"-":a=o-f;break;case"*":a=o*f;break;case"/":a=o/f;break;case"%":a=o%f;break;case"<<":a=o<<f;break;case">>":a=o>>f;break;case">>>":a=o>>>f;break;case"==":a=o==f;break;case"===":a=o===f;break;case"!=":a=o!=f;break;case"!==":a=o!==f;break;case"<":a=o<f;break;case"<=":a=o<=f;break;case">":a=o>f;break;case">=":a=o>=f;break;case"**":a=Math.pow(o,f);break;case"in":if(f&&"object"==typeof f&&Cn(f,o)){a=!0;break}default:return this}if(isNaN(a))return e.find_parent(_n)?this:a;if(e.option("unsafe_math")&&!n&&a&&"number"==typeof a&&("+"==this.operator||"-"==this.operator)){var c=Math.max(0,u(o),u(f));if(c<16)return+a.toFixed(c)}return a;function u(e){var n=/(\.[0-9]*)?(e[^e]+)?$/.exec(+e);return(n[1]||".").length-1-(n[2]||"").slice(1)}}),e(D,function(e,n,t,i){var r=this.condition._eval(e,n,t,i);if(r===this.condition)return this;var o=r?this.consequent:this.alternative,a=o._eval(e,n,t,i);return a===o?this:a}),e(en,function(e,n,t,i){var r,o=this.fixed_value();if(!o)return this;if(Cn(o,"_eval"))r=o._eval();else{if(this._eval=Yn,r=o._eval(e,n,t,i),delete this._eval,r===o)return this;o._eval=function(){return r},t.push(o)}return r&&"object"==typeof r&&!function(e,n){var t=e.definition().escaped;switch(t.length){case 0:return!0;case 1:var i=!1;return t[0].walk(new gn(function(n){return!!i||(n===e?i=!0:n instanceof $e||void 0)})),i;default:return n<=t.depth}}(this,i)?this:r});var c={Array:Array,Math:Math,Number:Number,Object:Object,String:String},u=Et({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),d=$n("global ignoreCase multiline source");function h(e,n,t,i,r){for(var o=[],a=0;a<e.length;a++){var s=e[a],f=s._eval(n,t,i,r);if(s===f)return;o.push(f)}return o}e(qe,function(e,n,t,i){if(e.option("unsafe")){var r,o=this.expression;if(!pt(o)&&(null==(r=o._eval(e,n,t,i+1))||r===o))return this;var a=this.property;if(a instanceof we&&(a=a._eval(e,n,t,i))===this.property)return this;if(void 0===r){var s=u[o.name];if(!s||!s[a])return this;r=c[o.name]}else if(r instanceof RegExp){if(!d[a])return this}else if("object"==typeof r){if(!Cn(r,a))return this}else if("function"==typeof r)switch(a){case"name":return r.node.name?r.node.name.name:"";case"length":return r.node.length();default:return this}return r[a]}return this}),e(g,function(e,t,i,r){var o=this.expression,a=o instanceof en?o.fixed_value():o;if(a instanceof s||a instanceof N||a instanceof ae){if(a.evaluating)return this;if(a.name&&a.name.definition().recursive_refs>0)return this;if(this.is_expr_pure(e))return this;var f=h(this.args,e,t,i,r);if(!En(a.argnames,function(n,o){if(n instanceof j){if(!f)return!1;if(void 0===f[o]){var a=n.value._eval(e,t,i,r);if(a===n.value)return!1;f[o]=a}n=n.name}return!(n instanceof R)}))return this;if(a.rest instanceof R)return this;if(!f&&!t)return this;var u=a.first_statement();if(!(u instanceof Fe)){if(t){a.walk(n);var l=!1;if(a.evaluating=!0,An(a,new gn(function(n){return!!l||(n instanceof Fe?(n.value&&void 0!==n.value._eval(e,!0,i,r)&&(l=!0),!0):n instanceof $e&&n!==a||void 0)})),a.evaluating=!1,!l)return}return this}var p=u.value;if(!p)return;var d=[];return(!f||En(a.argnames,function(e,n){return b(e,f[n])})&&(!a.rest||b(a.rest,f.slice(a.argnames.length)))||t)&&(t&&a.argnames.forEach(function(e){e instanceof j&&e.value.walk(n)}),a.evaluating=!0,p=p._eval(e,t,i,r),a.evaluating=!1),d.forEach(function(e){delete e._eval}),p===u.value?this:p}if(e.option("unsafe")&&o instanceof qe){var _=o.property;if(_ instanceof we&&(_=_._eval(e,t,i,r))===o.property)return this;var v=o.expression;if(pt(v)){var m=$t[v.name];if(!m||!m[_])return this;p=c[v.name]}else{if(null==(p=v._eval(e,t,i,r+1))||p===v)return this;var g=Ft[p.constructor.name];if(!g||!g[_])return this;if(p instanceof RegExp&&p.global&&!(v instanceof Ce))return this}var f=h(this.args,e,t,i,r);if(!f)return this;if("replace"==_&&"function"==typeof f[1])return this;try{return p[_].apply(p,f)}catch(e){we.warn("Error evaluating {this} [{start}]",this)}finally{p instanceof RegExp&&(p.lastIndex=0)}}return this;function b(e,n){e instanceof j&&(e=e.name);var t=e.definition();if(t.orig[t.orig.length-1]!==e)return!1;var i=n;return t.references.forEach(function(e){e._eval=function(){return i},d.push(e)}),!0}}),e(ye,Yn),e(nn,function(e,n,t,i){if(!e.option("templates"))return this;if(this.tag){if(!Ei(e,this.tag))return this;f=function(e){return e}}var r=h(this.expressions,e,n,t,i);if(!r)return this;for(var o=!1,a=f(this.strings[0]),s=0;s<r.length;s++)a+=r[s]+f(this.strings[s+1]);return o?(this._eval=Yn,this):a;function f(e){return"string"!=typeof(e=Di(e))&&(o=!0),e}})}(function(e,n){e.DEFMETHOD("_eval",n)}),function(e){function n(e){return In(un,e,{operator:"!",expression:e})}function t(e,t,i){var r=n(e);return i?Tt(r,In(je,t,{body:t}))===r?r:t:Tt(r,t)}e(we,function(){return n(this)}),e(Me,function(){throw new Error("Cannot negate a statement")}),e(p,function(e,i){var r=this.clone(),o=this.operator;if(e.option("unsafe_comps"))switch(o){case"<=":return r.operator=">",r;case"<":return r.operator=">=",r;case">=":return r.operator="<",r;case">":return r.operator="<=",r}switch(o){case"==":return r.operator="!=",r;case"!=":return r.operator="==",r;case"===":return r.operator="!==",r;case"!==":return r.operator="===",r;case"&&":return r.operator="||",r.left=r.left.negate(e,i),r.right=r.right.negate(e),t(this,r,i);case"||":return r.operator="&&",r.left=r.left.negate(e,i),r.right=r.right.negate(e),t(this,r,i)}return n(this)}),e(x,function(){return n(this)}),e(D,function(e,n){var i=this.clone();return i.consequent=i.consequent.negate(e),i.alternative=i.alternative.negate(e),t(this,i,n)}),e(ve,function(){return n(this)}),e(Pe,function(e){var n=this.expressions.slice();return n.push(n.pop().negate(e)),Un(this,n)}),e(un,function(){return"!"==this.operator?this.expression:n(this)})}(function(e,n){e.DEFMETHOD("negate",function(e,t){return n.call(this,e,t)})});var jt=$n("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),zt=$n("Map Set WeakMap WeakSet");function Mt(e){return e&&e.aborts()}g.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var n=this.expression;if(pt(n)){if(jt[n.name])return!0;if(this instanceof ye&&zt[n.name])return!0}if(Pt(n))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),nn.DEFMETHOD("is_expr_pure",function(e){var n=this.tag;if(!n)return!0;if(e.option("unsafe")){if(pt(n)&&jt[n.name])return!0;if(n instanceof V&&pt(n.expression)){var t=$t[n.expression.name];return t&&(t[n.property]||"Math"==n.expression.name&&"random"==n.property)}}return!e.pure_funcs(this)}),we.DEFMETHOD("is_call_pure",Ln),g.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var n=this.expression;if(!(n instanceof V))return!1;var t,i=n.expression,r=n.property;if(i instanceof a)t=Ft.Array;else if(i.is_boolean(e))t=Ft.Boolean;else if(i.is_number(e))t=Ft.Number;else if(i instanceof Ce)t=Ft.RegExp;else if(i.is_string(e)){if(t=Ft.String,"replace"==r){var o=this.args[1];if(o&&!o.is_string(e))return!1}}else n.may_throw_on_access(e)||(t=Ft.Object);return t&&t[r]}),function(e){e(we,Ln),e(a,Hn),e(f,function(){switch(this.operator){case"=":return this.right.safe_to_spread();case"&&=":case"||=":case"??=":return this.left.safe_to_spread()&&this.right.safe_to_spread()}return!0}),e(p,function(){return!xt[this.operator]||this.left.safe_to_spread()&&this.right.safe_to_spread()}),e(q,Hn),e(he,Hn),e(Te,function(){return En(this.properties,function(e){return!(e instanceof AST_ObjectGetter||e instanceof ze)})}),e(Pe,function(){return this.tail_node().safe_to_spread()}),e(en,function(){var e=this.fixed_value();return e&&e.safe_to_spread()}),e(fn,Hn)}(function(e,n){e.DEFMETHOD("safe_to_spread",n)}),function(e){function n(e,n,t){return!En(e,t?function(e){return e instanceof ze?!t(e,n):!e.has_side_effects(n)}:function(e){return!e.has_side_effects(n)})}function t(e,n){var t=e.expression;return!t.is_string(n)||t.has_side_effects(n)}e(we,Hn),e(a,function(e){return n(this.elements,e,t)}),e(f,function(e){var n=this.left;if(!(n instanceof qe))return!0;var t=n.expression;return!(t instanceof Ee)||!t.scope.resolve().new||n instanceof Ie&&n.property.has_side_effects(e)||this.right.has_side_effects(e)}),e(p,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||!yi(this.operator,this.right,e)}),e(d,function(e){return n(this.body,e)}),e(g,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||n(this.args,e,t)}),e(b,function(e){return this.expression.has_side_effects(e)||n(this.body,e)}),e(S,function(e){var t=this.extends;return!(!t||(t instanceof en&&(t=t.fixed_value()),r(t)))||n(this.properties,e)}),e(A,function(e){return this.key instanceof we&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),e(D,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(q,Ln),e(M,function(e){return n(this.definitions,e)}),e(L,function(e){return n(this.elements,e)}),e(B,function(e){return this.key instanceof we&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(H,function(e){return n(this.properties,e)}),e(V,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),e(W,Ln),e(fe,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),e(de,function(e){return this.body.has_side_effects(e)}),e(he,Ln),e(Te,function(e){return n(this.properties,e,function(e,n){var t=e.expression;return!t.safe_to_spread()||t.has_side_effects(n)})}),e(Ee,Ln),e(ke,function(e){return this.key instanceof we&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(Pe,function(e){return n(this.expressions,e)}),e(je,function(e){return this.body.has_side_effects(e)}),e(Ie,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),e(Re,function(e){return this.expression.has_side_effects(e)||n(this.body,e)}),e(Ve,Ln),e(en,function(e){return!this.is_declared(e)||!E(this,e)}),e(nn,function(e){return!this.is_expr_pure(e)||n(this.expressions,e)}),e(sn,function(e){return n(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),e(fn,function(e){return unary_side_effects[this.operator]||this.expression.has_side_effects(e)}),e(dn,function(){return this.value})}(function(e,n){e.DEFMETHOD("has_side_effects",n)}),function(e){function n(e,n){for(var t=e.length;--t>=0;)if(e[t].may_throw(n))return!0;return!1}function t(e,t){return!!e.may_throw(t)||(e instanceof en&&(e=e.fixed_value()),!(e instanceof he)||(!!n(e.argnames,t)||(!!n(e.body,t)||xn(e)&&e.value&&e.value.may_throw(t))))}e(we,Hn),e(q,Ln),e(W,Ln),e(he,Ln),e(Ee,Ln),e(Ve,Ln),e(a,function(e){return n(this.elements,e)}),e(f,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof en)&&this.left.may_throw(e)}),e(u,function(e){return this.expression.may_throw(e)}),e(p,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||!yi(this.operator,this.right,e)}),e(d,function(e){return n(this.body,e)}),e(g,function(e){if(n(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=Hn;var i=t(this.expression,e);return delete this.may_throw,i}),e(b,function(e){return this.expression.may_throw(e)||n(this.body,e)}),e(D,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),e(j,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),e(M,function(e){return n(this.definitions,e)}),e(V,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),e(re,function(e){if(this.init.may_throw(e))return!0;var n=this.object;return!!n.may_throw(e)||(!((n=n.tail_node())instanceof a||n.is_string(e))||this.body.may_throw(e))}),e(fe,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),e(de,function(e){return this.body.may_throw(e)}),e(Te,function(e){return n(this.properties,e)}),e(ke,function(e){return this.value.may_throw(e)||this.key instanceof we&&this.key.may_throw(e)}),e(Fe,function(e){return this.value&&this.value.may_throw(e)}),e(Pe,function(e){return n(this.expressions,e)}),e(je,function(e){return this.body.may_throw(e)}),e(Ie,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),e(Re,function(e){return this.expression.may_throw(e)||n(this.body,e)}),e(en,function(e){return!this.is_declared(e)||!E(this,e)}),e(nn,function(e){if(n(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=Hn;var i=t(this.tag,e);return delete this.may_throw,i}),e(sn,function(e){return(this.bcatch?this.bcatch.may_throw(e):n(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),e(fn,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof en)}),e(dn,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)})}(function(e,n){e.DEFMETHOD("may_throw",n)}),function(e){function n(e,n){for(var t=e.length;--t>=0;)if(!e[t].is_constant_expression(n))return!1;return!0}e(we,Ln),e(a,function(e){return n(this.elements,e)}),e(p,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&yi(this.operator,this.right)}),e(S,function(e){var t=this.extends;return!(t&&!r(t))&&n(this.properties,e)}),e(A,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),e(q,Hn),e(he,function(e){var n=this,t=!0,i=[];return n.walk(new gn(function(r,o){if(!t)return!0;if(r instanceof h){if(r===n)return;return i.push(r),o(),i.pop(),!0}if(r instanceof en){if(n.inlined||r.redef||r.in_arg)return t=!1,!0;if(n.variables.has(r.name))return!0;var a=r.definition();if(jn(a.scope,i))return!0;if(e&&!a.redefined()){var s=e.find_variable(r.name);if(s?s===a:a.undeclared)return t="f",!0}return t=!1,!0}return r instanceof Ee?(xn(n)&&En(i,function(e){return!(e instanceof $e)||xn(e)})&&(t=!1),!0):void 0})),t}),e(Te,function(e){return n(this.properties,e)}),e(ke,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),e(fn,function(e){return this.expression.is_constant_expression(e)})}(function(e,n){e.DEFMETHOD("is_constant_expression",n)}),function(e){function n(){var e=this.body.length;return e>0&&Mt(this.body[e-1])}e(Me,Bn),e(pe,Yn),e(_,n),e(Le,n),e(fe,function(){return this.alternative&&Mt(this.body)&&Mt(this.alternative)&&this})}(function(e,n){e.DEFMETHOD("aborts",n)});var Nt=$n(["use asm","use strict"]);function It(e,n,t){switch(e.body.length){case 0:return t?List.skip:In(W,e);case 1:var i=e.body[0];return ot(i)?n instanceof le&&i instanceof _e?e:i:e}return e}function Rt(e,n){n.option("rests")&&(e.uses_arguments||e.rest instanceof L&&n.drop_fargs(e,n.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest))}function Lt(e,n){if(!n.option("arrows"))return e;Rt(e,n),e.value&&(e.body=[e.first_statement()]);var t=yt(e.body,n);switch(t.length){case 1:var i=t[0];if(i instanceof Fe){e.body.length=0,e.value=i.value;break}default:e.body=t,e.value=null}return e}e(Y,function(e,n){return!n.option("directives")||Nt[e.value]&&n.has_directive(e.value)===e?e:In(W,e)}),e(F,function(e,n){return n.option("drop_debugger")?In(W,e):e}),e(de,function(e,n){if(e.body instanceof fe||e.body instanceof m){var t=yt([e.body],n);switch(t.length){case 0:e.body=In(W,e);break;case 1:e.body=t[0];break;default:e.body=In(_,e,{body:t})}}return n.option("unused")&&0==e.label.references.length?e.body:e}),e(ge,function(e,n){if(!n.option("dead_code"))return e;var t=e.label;if(t){var i=n.loopcontrol_target(e);e.label=null,n.loopcontrol_target(e)===i?Rn(t.thedef.references,e):e.label=t}return e}),e(d,function(e,n){return e.body=yt(e.body,n),e}),e(_,function(e,n){return e.body=yt(e.body,n),It(e,n.parent())}),e(he,function(e,n){return Rt(e,n),e.body=yt(e.body,n),e}),e(s,Lt),e(c,Lt),e(ae,function(e,n){Rt(e,n),e.body=yt(e.body,n);var t=n.parent();if(n.option("inline"))for(var i=0;i<e.body.length;i++){var r=e.body[i];if(!(r instanceof Y)){if(r instanceof Fe){if(i!=e.body.length-1)break;var o=r.value;if(!o||"Call"!=o.TYPE)break;if(o.is_expr_pure(n))break;var a,s=o.expression;if(s instanceof en){if(e.name&&e.name.definition()===s.definition())break;a=s.fixed_value()}else a=s;if(!(a instanceof N||a instanceof ae))break;if(a.rest)break;if(a.uses_arguments)break;if(a===s){if(a.parent_scope!==e)break;if(!En(a.enclosed,function(n){return n.scope!==e}))break}if((a!==s||a.name)&&(t instanceof AST_ClassMethod||t instanceof De)&&t.value===n.self())break;if(a.contains_this())break;var f=a.argnames.length;if(f>0&&n.option("inline")<2)break;if(f>e.argnames.length)break;if(!En(e.argnames,function(e){return e instanceof Ke}))break;if(!En(o.args,function(e){return!(e instanceof ze)}))break;for(var c=0;c<f;c++){var u=o.args[c];if(!(u instanceof en))break;if(u.definition()!==e.argnames[c].definition())break}if(c<f)break;for(;c<o.args.length&&!o.args[c].has_side_effects(n);c++);if(c<o.args.length)break;if(f<e.argnames.length&&!n.drop_fargs(e,t)){if(!n.drop_fargs(a,o))break;do{a.argnames.push(a.make_var(Ke,a,"argument_"+f))}while(++f<e.argnames.length)}return s}break}}return e});var Bt=$n("arguments await yield");function Ht(e,n){for(var t=n.length;--t>=0;)n[t]||(n[t]=In(se,e))}function Yt(e,n){var t=In(x,e);return t.name&&(t.name=n?null:In(AST_SymbolClass,t.name)),t}function Ut(e,n){var t;switch(e.CTOR){case AST_AsyncDefun:t=AST_AsyncFunction;break;case AST_AsyncGeneratorDefun:t=AST_AsyncGeneratorFunction;break;case N:t=ae;break;case AST_GeneratorDefun:t=AST_GeneratorFunction}var i=In(t,e);return i.name=n?null:In(Xe,e.name),i}function Vt(e,n){e.walk(new gn(function(t){return t instanceof Fe?(n(t),!0):t instanceof $e&&t!==e||void 0}))}function Gt(e){var n=Object.create(null);return Vt(e,function(e){var t=e.value;if(t&&(t=t.tail_node()),t instanceof en){var i=t.definition().id;n[i]=(n[i]||0)+1}}),n}function Wt(e,n,t){if(t.exposed(e))return!1;switch(e.references.length-e.replaced-(n[e.id]||0)){case e.drop_return:return"d";case e.bool_return:return!0}}function Kt(e,n){Vt(e,function(e){e.in_bool=!0;var t=e.value;if(t){var i=ei(n,t);i?i instanceof we||(t=t.drop_side_effect_free(n),e.value=t?Un(e.value,[t,In(xe,e.value,{value:1})]):In(xe,e.value,{value:1})):(t=t.drop_side_effect_free(n),e.value=t?Un(e.value,[t,In(xe,e.value,{value:0})]):null)}})}function Jt(e,n){if(!e.name||!n.option("ie"))return!0;var t=e.name.definition();return!n.exposed(t)&&En(t.references,function(e){return!(e instanceof en)})}function Xt(e,n,t){if(n instanceof he){var i=xn(n),r=is_async(n),o=!1,a=!1;if(i&&e.option("arrows"))if(n.value){if(!r||wi(e,n.value)){var f=n.value.drop_side_effect_free(e);f!==n.value&&(o=!0,n.value=f)}}else a=!0;else if(!Tn(n))if(!t&&n.name){var l=n.name.definition();a=l.references.length==l.replaced}else a=!0;if(a&&(n.process_expression(!1,function(n){var t=n.value;if(t){if(r&&!wi(e,t))return n;t=t.drop_side_effect_free(e,!0)}return o=!0,t?In(je,n,{body:t}):In(W,n)}),Vt(n,function(n){var t=n.value;if(t){if(r&&!wi(e,t))return;var i=t.drop_side_effect_free(e);i!==t&&(o=!0,i&&r&&!wi(e,i)&&(i=i.negate(e)),n.value=i)}})),r&&e.option("awaits")){a&&n.process_expression("awaits",function(n){var t=n.body;if(t instanceof u){if(wi(e,t.expression)){if(o=!0,!(t=t.expression.drop_side_effect_free(e,!0)))return In(W,n);n.body=t}}else if(t instanceof Pe){for(var i=t.expressions,r=i.length;--r>=0;){var a=i[r];if(!(a instanceof u))break;var s=a.expression;if(!wi(e,s))break;if(o=!0,i[r]=s.drop_side_effect_free(e))break}switch(r){case-1:return In(W,n);case 0:n.body=i[0];break;default:i.length=r+1}}return n});var p=!a&&n.name||i&&n.value&&!wi(e,n.value),d=new gn(function(t){return!!p||(d.parent()===n&&t.may_throw(e)?p=!0:t instanceof u?p=!0:t instanceof AST_ForAwaitOf?p=!0:t instanceof Fe?t.value&&!wi(e,t.value)?p=!0:void 0:t instanceof $e&&t!==n||void 0)});if(n.walk(d),!p){var h;switch(n.CTOR){case c:h=s;break;case AST_AsyncFunction:h=ae;break;case AST_AsyncGeneratorFunction:h=AST_GeneratorFunction}return In(h,n)}}return o&&n.clone()}}function Qt(e,n,t){t||(t=ge);var i=!1,r=new gn(function(n){return!!(i||n instanceof $e)||(n instanceof t&&r.loopcontrol_target(n)===e?i=!0:void 0)});return n instanceof de&&r.push(n),r.push(e),e.body.walk(r),i}function Zt(e,n,t){if(e instanceof Pe&&(e=e.tail_node()),e instanceof p)if(e.left instanceof Ne){if(e.right instanceof un&&"typeof"==e.right.operator){var i=e.right.expression;if(pt(i)){var r,o="undefined"==e.left.value;switch(e.operator){case"==":r=o?t:n;break;case"!=":r=o?n:t;break;default:return}if(r){var a,s=!1,c=i.definition(),u=[],l=[],d=new gn(function(e,n){if(s)return!0;if(e instanceof f){var t=e.left;if(!(t instanceof en&&t.definition()===c))return;switch(e.right.walk(d),e.operator){case"=":case"&&=":s=!0}return!0}if(e instanceof g)return n(),(a=e.expression.tail_node())instanceof en&&(a=a.fixed_value(),i=u.length),a instanceof he?Mn(l,a)&&a.walk(d):s=!0,i>=0&&(u.length=i),!0;if(e instanceof G){var i=u.length;return n(),s&&(u.length=i),!0}if(e instanceof ie){e.init&&e.init.walk(d);var i=u.length;return e.condition&&e.condition.walk(d),e.body.walk(d),e.step&&e.step.walk(d),s&&(u.length=i),!0}if(e instanceof re){e.object.walk(d);var i=u.length;return e.init.walk(d),e.body.walk(d),s&&(u.length=i),!0}if(e instanceof $e){if(e===a)return;return!0}return e instanceof en?(e.definition()===c&&u.push(e),!0):void 0});r.walk(d),u.forEach(function(e){e.defined=!0})}}}}else switch(e.operator){case"&&":Zt(e.left,n),Zt(e.right,n);break;case"||":Zt(h(e.left),t),Zt(h(e.right),t)}function h(e){if(e instanceof p)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function ei(e,n,t){return!!n.truthy||(St(n)?void 0:!(n.falsy&&!t)&&(!!n.is_truthy()||n.evaluate(e,!0)))}function ni(e,n){var t,i=0,r=!1,o=e.self();if(!is_statement(o))for(;;){if(t=o,(o=e.parent(i++))instanceof p)switch(t){case o.left:if(xt[o.operator])continue;break;case o.right:if(s(o.left))switch(o.operator){case"&&":n[r?"falsy":"truthy"]=!0;break;case"||":case"??":n[r?"truthy":"falsy"]=!0}}else if(o instanceof D){var a=o.condition;if(a===t)continue;if(s(a))switch(t){case o.consequent:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}}else{if(o instanceof K)break;if(o instanceof fe)break;if(o instanceof Pe){if(o.expressions[0]===t)continue}else if(o instanceof je)break}return}for(;;){if(t=o,(o=e.parent(i++))instanceof _){if(o.body[0]===t)continue}else if(o instanceof fe&&s(o.condition))switch(t){case o.body:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}return}function s(e){return!!n.equals(e)||e instanceof un&&("!"==e.operator&&(!!n.equals(e.expression)&&(r=!0,!0)))}}function ti(e){return function(n,t){var i=!1;return this.definitions.forEach(function(r){r.value&&(i=!0),r.name.match_symbol(function(i){i instanceof Ve&&t.push(In(dn,i,{name:i,value:e(n,i)}))},!0)}),i}}function ii(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof Xe?3:2)}function ri(e,n){if(e.exposed(n))return!0;for(var t=n.scope.resolve(),i=n.scope;i!==t;)if((i=i.parent_scope).var_names().has(n.name))return!0}function oi(e,n){return In(pn,e,{definitions:e.definitions.map(function(e){return In(dn,e,{name:e.name.convert_symbol(AST_SymbolVar,function(e,t){var i=e.definition();i.orig[i.orig.indexOf(t)]=e,i.scope!==n&&(i.scope=n,n.variables.set(i.name,i),n.enclosed.push(i),n.var_names().set(i.name,!0))}),value:e.value})})})}function ai(e,n){var t=n.definition();return(t.fixed||0===t.fixed)&&ii(t)&&ki(t)&&!ri(e,t)}function si(e,n){return n.option("varify")&&En(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof Ve)return!ai(n,e)},!0)})?oi(e,n.find_parent($e)):e}function fi(e,n){if(n.option("optional_chains")&&e.terminal)do{var t=e.expression;if(e.optional){var i=ei(n,t,!0);if(null==i)return In(un,e,{operator:"void",expression:t}).optimize(n);i instanceof we||(e.optional=!1)}e=t}while(("Call"==e.TYPE||e instanceof qe)&&!e.terminal)}function ci(e,n){var t=e.expression;if(!(t instanceof Pe))return e;var i=t.expressions.slice(),r=e.clone();return r.expression=i.pop(),i.push(r),Un(e,i)}function ui(e,n,t){var i=e.expression,r=i instanceof en?i.fixed_value():i;if(r instanceof he&&!r.uses_arguments&&!(r.pinned()||t&&t.indexOf(r)<0)){var o=e.args;if(En(o,function(e){return!(e instanceof ze)})){var s=r.argnames,f=r===i&&!r.name;if(r.rest){if(!f||!n.option("rests"))return;var c=s.length;for(o=o.slice(0,c);o.length<c;)o.push(In(ln,e).optimize(n));o.push(In(a,e,{elements:e.args.slice(c)})),s=s.concat(r.rest),r.rest=null}else o=o.slice(),s=s.slice();for(var u=0,l=0,p=f&&n.option("default_values"),d=f&&n.drop_fargs(r,e)?function(e,t){return!e||(e instanceof L?0==e.elements.length&&!e.rest&&t instanceof a:e instanceof H?0==e.properties.length&&!e.rest&&t&&!t.may_throw_on_access(n):e.unused)}:Ln,h=[],_=0;_<o.length;_++){var v=s[_];if(p&&v instanceof j&&o[_].is_defined(n)&&(s[_]=v=v.name),v&&void 0===v.unused){if(d(v,o[_])){var m=o[_].drop_side_effect_free(n);s.splice(_,1),o.splice(_,1),m&&h.push(m),_--;continue}h.push(o[_]),o[u++]=Un(e,h),h=[]}else{var m=o[_].drop_side_effect_free(n);if(d(v)){v&&s.splice(_,1),o.splice(_,1),m&&h.push(m),_--;continue}if(m)h.push(m),o[u++]=Un(e,h),h=[];else if(v){if(!h.length){o[u++]=In(xe,o[_],{value:0});continue}o[u++]=Un(e,h),h=[]}}l=u}for(;_<s.length;_++)d(s[_])&&s.splice(_--,1);if(r.argnames=s,o.length=l,e.args=o,h.length){var g=Un(e,h);o.push(o.length<s.length?In(un,e,{operator:"void",expression:g}):g)}}}}function li(e,n){n||(n=e.find_parent($e));var t=[];return(is_async(n)||n instanceof on&&e.option("module"))&&t.push("await"),Tn(n)&&t.push("yield"),t.length&&$n(t)}function pi(e,n){if(!n)return!0;var t=!0,i=new gn(function(r){if(!t)return!0;if(r instanceof $e){if(r===e)return;if(xn(r))for(var o=0;t&&o<r.argnames.length;o++)r.argnames[o].walk(i);else r instanceof _e&&n[r.name.name]&&(t=!1);return!0}r instanceof Be&&n[r.name]&&r!==e.name&&(t=!1)});return e.walk(i),t}function di(e,n){return e.in_strict_mode(n)||!n.has_directive("use strict")}function hi(e,n,t,i){if(i instanceof p&&("&&"==i.operator||"||"==i.operator)&&i.right instanceof f&&"="==i.right.operator&&i.right.left instanceof en&&i.right.left.definition()===n&&!t.has_side_effects(e)&&r(i.left)&&r(i.right.right))return n.replaced++,"&&"==i.operator?In(D,i,{condition:i.left,consequent:i.right.right,alternative:t}):In(D,i,{condition:i.left,consequent:t,alternative:i.right.right});function r(t){if(!t.has_side_effects(e)){var i=!1;return t.walk(new gn(function(e){return!!i||(e instanceof en&&e.definition()===n?i=!0:void 0)})),!i}}}$e.DEFMETHOD("merge_variables",function(e){if(e.option("merge_vars")){var n,t,i=[],r={},o=this,a=[],s=[],c=0,u=new On,l=Object.create(null),d=Object.create(null),h=new gn(function(a,s){if(a instanceof f){var c=a.left,d=a.right;return c instanceof R?(d.walk(h),q(en,F,c),!0):xt[a.operator.slice(0,-1)]?(c.walk(h),E(),d.walk(h),c instanceof en&&F(c),O(),!0):c instanceof en?("="!=a.operator&&F(c,!0),d.walk(h),F(c),!0):void 0}if(a instanceof p){if(!xt[a.operator])return;return k(a),!0}if(a instanceof m){var _=h.loopcontrol_target(a);return _ instanceof le||P(_),!0}if(a instanceof g){var v=a.expression;return v instanceof ve?(a.args.forEach(function(e){e.walk(h)}),v.walk(h)):(s(),A(v)),!0}if(a instanceof S)return a.name&&a.name.walk(h),a.extends&&a.extends.walk(h),a.properties.filter(function(e){return e.key instanceof we&&e.key.walk(h),e.value}).forEach(function(e){e.static?e.value.walk(h):(E(),r.block=a,e.value.walk(h),O())}),!0;if(a instanceof D)return k(a.condition,a.consequent,a.alternative),!0;if(a instanceof C){var _=h.loopcontrol_target(a);return _ instanceof U&&P(_),!0}if(a instanceof U){E(),r.block=a,r.loop=!0;var b=r;return a.body.walk(h),r.inserted===a&&(r=b),a.condition.walk(h),O(),!0}if(a instanceof ie)return a.init&&a.init.walk(h),E(),r.block=a,r.loop=!0,a.condition&&a.condition.walk(h),a.body.walk(h),a.step&&a.step.walk(h),O(),!0;if(a instanceof re)return a.object.walk(h),E(),r.block=a,r.loop=!0,a.init.walk(h),a.body.walk(h),O(),!0;if(a instanceof fe)return k(a.condition,a.body,a.alternative),!0;if(a instanceof de){E(),r.block=a;var b=r;return a.body.walk(h),r.inserted===a&&(r=b),O(),!0}if(a instanceof $e){if(E(),r.block=a,a===o&&(t=r),a instanceof he){a.name&&(l[a.name.definition().id]=!1);var y=a.uses_arguments&&!h.has_directive("use strict")?function(e){l[e.definition().id]=!1}:function(e){F(e)};i.push(a),a.argnames.forEach(function(e){q(Ke,y,e)}),a.rest&&q(Ke,y,a.rest),i.pop()}return kn(a,h),O(),!0}if(a instanceof Ie){var v=a.expression;return a.optional?(v.walk(h),E(),a.property.walk(h),O()):s(),A(v),!0}if(a instanceof Re){a.expression.walk(h);var b=r;return a.body.forEach(function(e){e instanceof $||(e.expression.walk(h),b===r&&E())}),r=b,a.body.forEach(function(e){E(),r.block=a;var n=r;An(e,h),r.inserted===a&&(r=n),O()}),!0}if(a instanceof Ue||a instanceof Qe)return l[a.definition().id]=!1,!0;if(a instanceof en)return F(a,!0),!0;if(a instanceof sn){var w=n;return n=a,An(a,h),a.bcatch&&(a.bcatch.argname&&a.bcatch.argname.mark_symbol(function(e){if(e instanceof He){var n=e.definition();l[n.id]=!1,(n=n.redefined())&&(l[n.id]=!1)}},h),a.bfinally||(n=w)?An(a.bcatch,h):(E(),An(a.bcatch,h),O())),n=w,a.bfinally&&a.bfinally.walk(h),!0}if(a instanceof fn){if(!UNARY_POSTFIX[a.operator])return;var x=a.expression;if(!(x instanceof en))return;return F(x,!0),!0}if(a instanceof dn){var T=a.value;return T?T.walk(h):T=r.block instanceof re&&r.block.init===h.parent(),q(Ve,T?function(e){e instanceof AST_SymbolVar?F(e):e.walk(h)}:function(e){if(e instanceof AST_SymbolVar){var n=e.definition().id,t=l[n];t?t.push(e):n in l||u.add(n,e)}else e.walk(h)},a.name),!0}if(a instanceof hn)return E(),r.block=a,r.loop=!0,s(),O(),!0;function A(n){if(e.option("ie")){var t=root_expr(n);t instanceof en&&t.walk(h)}}function k(e,n,t){var i=r,o=[i,i];if(e instanceof p)switch(e.operator){case"&&":o[0]=k(e.left,e.right)[0];break;case"||":case"??":o[1]=k(e.left,null,e.right)[1];break;default:e.walk(h)}else e instanceof D?k(e.condition,e.consequent,e.alternative):e.walk(h);return r=o[0],n&&(E(),n.walk(h)),o[0]=r,r=o[1],t&&(E(),t.walk(h)),o[1]=r,r=i,o}});h.directives=Object.create(e.directives),o.walk(h);for(var _=!1,v=Object.create(null);a.length&&s.length;){var b=s.shift();if(b){var y=b.definition,w=l[y.id];if(w){for(w={end:w.end};y.id in v;)y=v[y.id];w.start=l[y.id].start;var x=[];do{var T=a.shift();if(!(b.index>T.index)){var A=T.definition;if(A.id in d){var k=l[A.id];if(k){if(k.start.block===w.start.block&&M(k,w)&&(!k.start.loop&&ki(y)||M(w,k))&&(!e.option("webkit")||is_funarg(y)===is_funarg(A))&&!A.const_redefs&&En(k.scopes,function(e){return e.find_variable(y.name)===y})){k.forEach(function(e){e.thedef=y,e.name=y.name,e instanceof en?(y.references.push(e),A.replaced++):(y.orig.push(e),A.eliminated++)}),A.fixed||(y.fixed=!1),v[A.id]=y,_=!0;break}x.push(T)}}}}while(a.length);x.length&&(a=x.concat(a))}}}return _}function E(){r=Object.create(r)}function O(){r=Object.getPrototypeOf(r)}function q(e,n,t){var i=new gn(function(t){if(!(t instanceof R))return t instanceof j?(E(),t.value.walk(h),O(),t.name.walk(i)):t instanceof B?t.key instanceof we?t.value instanceof qe?(E(),r.block=t,t.key.walk(h),t.value.walk(i),O()):(t.key.walk(h),t.value.walk(i)):t.value.walk(i):t instanceof e?n(t):t.walk(h),!0});t.walk(i)}function F(f,p){var _,v=f.definition();if(p&&!En(i,function(e){return!(_=e.variables.get(f.name))||(!is_funarg(_)||_!==v&&!v.undeclared&&e.parent_scope.find_variable(f.name)!==v)}))return l[v.id]=l[_.id]=!1;var m=r;if(n&&(E(),m=r,O()),v.id in l){var g=l[v.id];if(!g)return;if(g.start.block!==m.block)return l[v.id]=!1;if(b(f),g.end=m,v.id in d)s[d[v.id]]=null;else if(!p)return}else{if((_=o.variables.get(v.name))!==v)return _&&t===m&&(l[_.id]=!1),l[v.id]=!1;if(e.exposed(v)||Bt[f.name])return l[v.id]=!1;var g=u.get(v.id)||[];if(g.scopes=[],b(f),l[v.id]=g,!p)return g.start=m,a.push({index:c++,definition:v});if(m.block!==o)return l[v.id]=!1;g.start=t}function b(e){g.push(e),Mn(g.scopes,e.scope);var n=qn(h);n!==e.scope&&Mn(g.scopes,n)}d[v.id]=s.length,s.push({index:c++,definition:v})}function P(e){for(var n=[];;){if(Cn(r,"block")){var t=r.block;if(t instanceof de&&(t=t.body),t===e)break}n.push(r),O()}for(r.inserted=r.block,E();n.length;){var i=n.pop();E(),Cn(i,"block")&&(r.block=i.block),Cn(i,"loop")&&(r.loop=i.loop)}}function z(e,n){return e===n||e.isPrototypeOf(n)}function M(e,n){return z(e.start,e.end)||z(e.start,n.start)}}),$e.DEFMETHOD("drop_unused",function(e){if(e.option("unused")){var n=this,t=!(n instanceof on)||e.toplevel.funcs,i=!(n instanceof on)||e.toplevel.vars,r=/keep_assign/.test(e.option("unused"))?Ln:function(n,t){var i,r=!1;if(n instanceof f?(n.write_only||"="==n.operator)&&(i=a(n.left,t)):n instanceof fn&&n.write_only&&(i=a(n.expression,t)),i instanceof en){var o=i.definition();if(!c[o.id]&&!e.exposed(o)&&E(i,e,r))return i}function a(n,t){if(n instanceof qe){var i=n.expression;if(!i.may_throw_on_access(e,!0))return r=!0,t&&n instanceof Ie&&t.unshift(n.property),a(i,t)}else if(n instanceof f&&"="==n.operator){n.write_only="p";var o=a(n.right);return t?(t.assign=n,o instanceof en?o:n.left):o}return n}},s=Object.create(null),c=Object.create(null),u=function(t){return(u=function n(t,i,r){var o=e.parent(i);if(!o)return r;var a=o instanceof he&&jn(t,o.argnames);return n(o,i+1,a?function(e){var n=r(e);if(n)return n;if(n=o.variables.get(e)){var t=n.orig[0];if(t instanceof Ke||t instanceof Xe)return n}}:o.variables?function(e){return r(e)||o.variables.get(e)}:r)}(n,0,zn))(t)},l=Object.create(null),h=[],v=Object.create(null),m=Object.create(null),b=Object.create(null),S=Object.create(null),T=Object.create(null);n instanceof on&&e.top_retain&&n.variables.each(function(n){!e.top_retain(n)||n.id in v||(we.info("Retaining variable {name}",n),v[n.id]=!0,h.push(n))});var A=new On,q=new On,C=this,F=new gn(function(r,o){if(r instanceof he&&r.uses_arguments&&!F.has_directive("use strict")&&r.each_argname(function(e){var n=e.definition();n.id in v||(v[n.id]=!0,h.push(n))}),r!==n){if(C===n){if(r instanceof z){var a=r.name.definition(),s=t&&!a.exported;s||a.id in v||(v[a.id]=!0,h.push(a));var f=F.parent()instanceof Z;f?c[a.id]=!0:!s||a.id in m||(m[a.id]=1),r.extends&&r.extends.walk(F);var u=[];return r.properties.forEach(function(e){e.key instanceof we&&e.key.walk(F);var n=e.value;n&&(_t(e)?(!f&&n.contains_this()&&(f=!0),l(n)):u.push(n))}),u.forEach(s&&f?l:function(e){q.add(a.id,e)}),!0}if(r instanceof _e){var a=r.name.definition(),s=t&&!a.exported;return s||a.id in v||(v[a.id]=!0,h.push(a)),q.add(a.id,r),F.parent()instanceof Z?(c[a.id]=!0,Se(r,o,!0)):(!s||a.id in m||(m[a.id]=1),!0)}if(r instanceof M)return r.definitions.forEach(function(n){var t=n.value,o=t&&(n.name instanceof R||t.has_side_effects(e)),a=o&&"="==t.tail_node().operator;n.name.mark_symbol(function(e){if(e instanceof Ve){var s=e.definition();if(T[s.id]=(T[s.id]||0)+1,r instanceof pn&&s.orig[0]instanceof He){var f=s.redefined();f&&(T[f.id]=(T[f.id]||0)+1)}return s.id in v||i&&!s.exported&&(r instanceof O?!s.redefined():!s.const_redefs)&&(r instanceof pn||ii(s))||(v[s.id]=!0,h.push(s)),t&&(o?a&&ge(s,e,S[s.id]):q.add(s.id,t),A.add(s.id,n)),pe(s),!0}},F),o&&t.walk(F)}),!0;if(r instanceof Ke){var a=r.definition();return T[a.id]=(T[a.id]||0)+1,A.add(a.id,r),!0}if(r instanceof Je){var a=r.definition();return a.id in v||i&&ii(a)||(v[a.id]=!0,h.push(a)),!0}}return Se(r,o,!0)}function l(e){var n=C;C=r,e.walk(F),C=n}});F.directives=Object.create(e.directives),n.walk(F);var $=e.option("keep_fnames")?Ln:e.option("ie")?function(n){return!e.exposed(n)&&n.references.length==n.replaced}:function(e){return!(e.id in v)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof Ke||En(e.references,function(e){return!e.in_arg}))};e.option("ie")&&q.each(function(e,n){n in v||e.forEach(function(e){e.walk(new gn(function(e){return e instanceof ae&&e.name&&!$(e.name.definition())?(e.walk(F),!0):e instanceof $e||void 0}))})}),F=new gn(Se);for(var P=0;P<h.length;P++){var I=q.get(h[P].id);I&&I.forEach(function(e){e.walk(F)})}Object.keys(s).forEach(function(e){var n=s[e];if(n){n=n.reduce(function(e,n){return n.forEach(function(n){Mn(e,n)}),e},[]);var t=(A.get(e)||[]).filter(function(e){return find_if(e instanceof fn?function(n){return n===e}:function(n){return n===e||!(n instanceof fn)&&X(n)===X(e)},n)});n.length==t.length?s[e]=t:delete s[e]}else delete s[e]});var B=[],U=[],V=new mn(function(n){if(n instanceof j)return Ee(V,n);if(n instanceof R&&n.rest&&(n.rest=n.rest.transform(V)),n instanceof L){for(var t=!n.rest,i=n.elements.length;--i>=0;){var r=n.elements[i].transform(V);r?(n.elements[i]=r,t=!1):t?n.elements.pop():n.elements[i]=In(se,n.elements[i])}return n}if(n instanceof H){var o=[];return n.properties.forEach(function(t){var i=!1;if(t.key instanceof we&&(t.key=t.key.transform(G),i=t.key.has_side_effects(e)),(i||n.rest)&&function(e){return(e instanceof j?e.name:e)instanceof Ve}(t.value))t.value=t.value.transform(G),o.push(t);else{var r=t.value.transform(V);!r&&n.rest&&(r=t.value instanceof L?In(L,t.value,{elements:[]}):In(H,t.value,{properties:[]})),r&&(t.value=r,o.push(t))}}),n.properties=o,n}return n instanceof Ve?ke(n):void 0}),G=new mn(function(c,u,h){var m=G.parent();if(i){var b=[],S=r(c,b);if(S){if(function(e,n){var t=e.definition(),i=v[t.id];return!i||n[n instanceof f?"left":"expression"]===e&&(i===e&&t.references.length-t.replaced==1||le(t,n)<0)}(S,c)&&(c instanceof f&&(D=be(c),!0===c.write_only&&(D=D.drop_side_effect_free(e))),D||(D=In(xe,c,{value:0}))),D){if(b.assign){var A=b.assign.drop_side_effect_free(e);A&&(A.write_only=!0,b.unshift(A))}switch(m instanceof Pe&&m.tail_node()!==c&&!D.has_side_effects(e)||b.push(D),b.length){case 0:return List.skip;case 1:return nt(m,c,b[0].transform(G));default:return Un(c,b.map(function(e){return e.transform(G)}))}}}else if(c instanceof cn&&c.expression instanceof en&&le(c.expression.definition(),c)<0)return In(un,c,{operator:"+",expression:c.expression})}if(c instanceof p&&"instanceof"==c.operator){var S=c.right;if(!(S instanceof en))return;if(S.definition().id in v)return;var k=c.left.drop_side_effect_free(e),D=In(ne,c).optimize(e);return k?Un(c,[k,D]):D}if(c instanceof g)return B.push(c),c.args=c.args.map(function(e){return e.transform(G)}),c.expression=c.expression.transform(G),c;if(C===n){if(t&&c!==n&&c instanceof z){var q=c.name.definition();if(!(q.id in v)){K(c.name,"Dropping unused class {name}"),q.eliminated++,u(c,G);var F=Yt(c,!0);return m instanceof Z?F:(F=F.drop_side_effect_free(e,!0))?In(je,c,{body:F}):h?List.skip:In(W,c)}}if(c instanceof x&&c.name&&$(c.name.definition())&&(c.name=null),c instanceof he){if(t&&c!==n&&c instanceof _e){var q=c.name.definition();if(!(q.id in v))return K(c.name,"Dropping unused function {name}"),q.eliminated++,m instanceof Z?(Ce(),Ut(c,!0)):h?List.skip:In(W,c)}if(Ce(),c instanceof ve&&c.name&&$(c.name.definition())&&(c.name=null),!(c instanceof o)){var P,j,I=e.drop_fargs(c,m);if(I&&m instanceof g&&m.expression===c)for(P=m.args,j=0;j<P.length&&!(P[j]instanceof ze);j++);var H=c.argnames,Y=c.rest,X=!1,te=!1;if(Y){if(te=!0,!P||j<H.length||Y instanceof Ke)Y=Y.transform(V);else{var F=De(Y,In(a,m,{elements:P.slice(H.length)}),ke,!c.uses_arguments,Y);Y=F.name,P.length=H.length,F.value.elements.length&&[].push.apply(P,F.value.elements)}Y instanceof R&&!Y.rest&&(Y instanceof L?0==Y.elements.length&&(Y=null):0==Y.properties.length&&(Y=null)),c.rest=Y,Y&&(I=!1,X=!0)}for(var oe=I?-1:c.length(),se=P&&!c.uses_arguments&&m!==e.parent(),ce=H.length;--ce>=0;){var S=H[ce];if(S instanceof Ke){var q=S.definition();q.id in v?(I=!1,le(q,S)<0&&(S.unused=null)):I?(K(S,"Dropping unused function argument {name}"),H.pop(),q.eliminated++,S.unused=!0):S.unused=!0}else{var ue;if(te=!0,!P||j<ce)ue=S.transform(V);else{var F=De(S,P[ce],ke,se,S);ue=F.name,F.value&&(P[ce]=F.value)}ue?(I=!1,H[ce]=ue,X||(X=!(ue instanceof Ke))):I?(J(S,"Dropping unused default argument {name}"),H.pop()):ce>oe?(J(S,"Dropping unused default argument assignment {name}"),S.name instanceof Ke?S.name.unused=!0:X=!0,H[ce]=S.name):(J(S,"Dropping unused default argument value {name}"),H[ce]=S=S.clone(),S.value=In(xe,S,{value:0}),X=!0)}}te&&!X&&c.uses_arguments&&!G.has_directive("use strict")&&(c.rest=In(L,c,{elements:[]})),U.push(c)}return c}if(c instanceof y&&c.argname instanceof R&&c.argname.transform(V),c instanceof M&&!(m instanceof re&&m.init===c)){var pe=[],ge=[],ye=[],Se=[],Te=0,Ae=c instanceof pn;switch(c.definitions.forEach(function(n){n.value&&(n.value=n.value.transform(G));var t=n.value;if(n.name instanceof R){var r=De(n.name,t,function(e){return i?e.definition().id in v?e:b(e)?e:Ae&&!E(e)?e:null:e},!0);r.name?(n=In(dn,n,{name:r.name,value:t=r.value}),y()):r.value&&Se.push(r.value)}else{var o,a,f,u,l=n.name.definition(),p=Ae?E(n.name):ii(l);if(!p||!i||l.id in v)if(t&&((o=le(l,n))<0||(u=t.tail_node())instanceof en&&u.definition()===l)&&(n=n.clone(),(t=t.drop_side_effect_free(e))&&we.warn("Side effects in definition of variable {name} [{start}]",n.name),c instanceof O?n.value=t||In(xe,n,{value:0}):(n.value=null,t&&Se.push(t)),t=null,o>=0&&(s[l.id][o]=n)),t||c instanceof me)if(e.option("functions")&&!e.option("ie")&&p&&t&&1==T[l.id]&&0==l.assignments&&(f=t.tail_node())instanceof ve&&!w(l)&&!xn(f)&&function(e,t){return 0==t.length?e===n.name.fixed_value():En(t,function(n){return e===n.fixed_value()})}(f,l.references)&&function(n){if(!Ae||e.has_directive("use strict")||!(n instanceof ae))return m instanceof $e;return m instanceof d||m instanceof ie&&m.init===c||m instanceof fe}(f)&&!1!==(a=function(n,t){if(!n.name)return null;var i,r=n.name.definition();if(r.orig.length>1)return null;if(r.assignments>0)return!1;if(r.name==t)return r;if(e.option("keep_fnames"))return!1;switch(t){case"await":i=is_async;break;case"yield":i=Tn}return En(r.references,function(e){var r=e.scope;if(r.find_variable(t)!==l)return!1;if(i)do{if(r=r.resolve(),i(r))return!1}while(r!==n&&(r=r.parent_scope));return!0})&&r}(f,n.name.name))){var h;switch(we.warn("Declaring {name} as function [{start}]",n.name),f.CTOR){case AST_AsyncFunction:h=AST_AsyncDefun;break;case AST_AsyncGeneratorFunction:h=AST_AsyncGeneratorDefun;break;case ae:h=N;break;case AST_GeneratorFunction:h=AST_GeneratorDefun}var _=In(h,f);_.name=In(Ge,n.name);var g=n.name.scope.resolve().def_function(_.name);a&&a.forEach(function(e){e.name=g.name,e.thedef=g,e.reference()}),pe.push(_),t!==f&&[].push.apply(Se,t.expressions.slice(0,-1))}else p&&T[l.id]>1&&!(m instanceof Q)&&l.orig.indexOf(n.name)>l.eliminated&&(T[l.id]--,Te++),y();else m instanceof Q?y():p&&T[l.id]>1?(we.info("Dropping declaration of variable {name} [{start}]",n.name),T[l.id]--,l.eliminated++):ge.push(n);else b(n.name)?((t=t&&t.drop_side_effect_free(e))&&Se.push(t),T[l.id]>1?(we.warn("Dropping duplicated declaration of variable {name} [{start}]",n.name),T[l.id]--,l.eliminated++):(n.value=null,ge.push(n))):((t=t&&t.drop_side_effect_free(e))?(we.warn("Side effects in initialization of unused variable {name} [{start}]",n.name),Se.push(t)):K(n.name,"Dropping unused variable {name}"),l.eliminated++)}function b(e){var n=e.definition();return n.orig[0]instanceof He&&n.scope.resolve()===e.scope.resolve()}function y(){Se.length>0&&(0==ye.length?pe.push(In(je,c,{body:Un(c,Se)})):t?(Se.push(t),n.value=Un(t,Se)):n.value=In(un,n,{operator:"void",expression:Un(n,Se)}),Se=[]),ye.push(n)}}),ge.length){case 0:if(0==ye.length)break;if(ye.length==Te){[].unshift.apply(Se,ye.map(function(e){we.info("Dropping duplicated definition of variable {name} [{start}]",e.name);var n=e.name.definition(),t=In(en,e.name);n.references.push(t);var i=In(f,e,{operator:"=",left:t,right:e.value}),r=le(n,e);return r>=0&&(s[n.id][r]=i),n.assignments++,n.eliminated++,i}));break}case 1:if(0==ye.length){var Ee=ge[0].name.definition().id;if(Ee in l){c.definitions=ge,l[Ee].init=c;break}}default:var Oe;ye.length>0&&(Oe=ye[0].value)instanceof Pe&&(ye[0].value=Oe.tail_node(),pe.push(In(je,c,{body:Un(Oe,Oe.expressions.slice(0,-1))}))),c.definitions=ge.concat(ye),pe.push(c)}return Se.length>0&&pe.push(In(je,c,{body:Un(c,Se)})),ee(pe,c,h)}if(c instanceof f){if(u(c,G),!(c.left instanceof R))return c;var F=De(c.left,c.right,function(e){return e},!0===c.write_only);return F.name?In(f,c,{operator:c.operator,left:F.name,right:F.value}):F.value?F.value:m instanceof Pe&&m.tail_node()!==c?List.skip:In(xe,c,{value:0})}if(c instanceof de&&c.body instanceof ie){if(u(c,G),c.body instanceof _){var qe=c.body;return c.body=qe.body.pop(),qe.body.push(c),h?List.splice(qe.body):qe}return c}if(c instanceof $e)return Ce(),c;if(c instanceof Je)return!e.option("imports")||c.definition().id in v?c:h?List.skip:null}function Ce(){var e=C;C=c,u(c,G),C=e}},function(n,t){if(n instanceof _)return It(n,G.parent(),t);if(n instanceof Q){var r=n.body;if(!(r instanceof _))return;return n.body=r.body.pop(),r.body.push(n),t?List.splice(r.body):r}if(n instanceof ie)return bt(n,t);if(n instanceof oe){if(!i||!e.option("loops"))return;if(!st(n.body))return;var o=ye(n);if(!o)return;var a=o.definition();if(a.id in v)return;K(o,"Dropping unused loop variable {name}"),l[a.id]===n&&delete l[a.id];var s=[],f=n.object.drop_side_effect_free(e);return f&&(we.warn("Side effects in object of for-in loop [{start}]",f),s.push(In(je,n,{body:f}))),n.init instanceof M&&a.orig[0]instanceof He&&s.push(n.init),ee(s,n,t)}if(n instanceof ce)return n.properties&&0==n.properties.length&&(n.properties=null),n;if(n instanceof Pe){if(n.expressions.length>1)return;return nt(G.parent(),n,n.expressions[0])}});G.push(e.parent()),G.directives=Object.create(e.directives),n.transform(G),n instanceof he&&1==n.body.length&&n.body[0]instanceof Y&&"use strict"==n.body[0].value&&(n.body.length=0),B.forEach(function(n){ui(n,e,U)})}function K(e,n){we[e.definition().references.length>0?"info":"warn"](n+" [{start}]",e)}function J(e,n){e.name instanceof Ke?K(e.name,n):we.info(n+" [{start}]",e)}function X(e){return e[e instanceof f?"right":"value"]}function ee(e,n,t){switch(e.length){case 0:return t?List.skip:In(W,n);case 1:return e[0];default:return t?List.splice(e):In(_,n,{body:e})}}function te(e,t){return e.scope.resolve()===n&&(e.fixed&&t.fixed||(s[e.id]=!1),!1!==s[e.id])}function ue(e,n){s[e.id]||(s[e.id]=[]),n.fixed.assigns&&Mn(s[e.id],n.fixed.assigns)}function le(e,n){var t=s[e.id];return t&&t.indexOf(n)}function pe(e){m[e.id]>1&&!(e.id in v)&&(v[e.id]=!0,h.push(e)),m[e.id]=0}function ge(e,n,t){e.id in v||(n&&t?(v[e.id]=n,h.push(e)):(b[e.id]=n,S[e.id]=t))}function be(n){var t=n.right;if(!n.write_only)return t;if(!(t instanceof p&&xt[t.operator]))return t;if(!(t.left instanceof en))return t;if(!(n.left instanceof en))return t;var i=n.left.definition();return t.left.definition()!==i?t:t.right.has_side_effects(e)?t:(te(i,t.left)&&ue(i,t.left),t.right)}function ye(e){var n=e.init;if(n instanceof M)return(n=n.definitions[0].name)instanceof Ve&&n;for(;n instanceof qe;)n=n.expression.tail_node();return n instanceof en?n:void 0}function Se(t,o,a){if(t instanceof f&&t.left instanceof en){var s=t.left.definition();s.scope.resolve()===n&&A.add(s.id,t)}if(t instanceof en&&t.in_arg&&(T[t.definition().id]=0),t instanceof fn&&t.expression instanceof en){var s=t.expression.definition();s.scope.resolve()===n&&A.add(s.id,t)}var c=[],d=r(t,c);if(d){var _=d.definition();if(_.scope.resolve()!==n&&n.variables.get(d.name)!==_)return;if(w(_)&&!En(n.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof Ke){var n=e.definition();return n.references.length>n.replaced}},!0)}))return;if("p"===t.write_only&&t.right.may_throw_on_access(e,!0))return;var g=c.assign;if(g&&(g.write_only=!0,g.walk(F)),c.forEach(function(e){e.walk(F)}),t instanceof f){var y=be(t),x=!1;if(a&&!0===t.write_only&&!y.has_side_effects(e)?q.add(_.id,y):(y.walk(F),x="="==y.tail_node().operator),t.left===d)t.write_only&&!x||ge(_,d,S[_.id]);else{var E=d.fixed_value();E&&E.is_constant()||ge(_,b[_.id],!0)}}return te(_,d)&&Qn(d,t)!==d&&ue(_,d),pe(_),!0}if(t instanceof p){if("instanceof"!=t.operator)return;var d=t.right;if(!(d instanceof en))return;var D=d.definition().id;if(!m[D])return;return t.left.walk(F),m[D]++,!0}if(t instanceof oe){if(t.init instanceof en&&C===n){var D=t.init.definition().id;D in l||(l[D]=t)}if(!i||!e.option("loops"))return;if(!st(t.body))return;if(t.init.has_side_effects(e))return;var d=ye(t);if(!d)return;var s=d.definition();if(s.scope.resolve()!==n){var O=u(d.name);if(O===s||O&&O.redefined()===s)return}return t.object.walk(F),!0}if(t instanceof en){var _=t.definition();if(_.id in v||(v[_.id]=!0,h.push(_)),k(_.scope,t.scope)){var $=_.redefined();!$||$.id in v||(v[$.id]=!0,h.push($))}return te(_,t)&&ue(_,t),!0}if(t instanceof $e){var P=C;return C=t,o(),C=P,!0}}function ke(e){return e.definition().id in v?e:(e instanceof Ke&&(e.unused=!0),null)}function Ee(n,t){t.value=t.value.transform(G);var i=t.name.transform(n);if(!i){if(t.name instanceof R)return null;var r=t.value.drop_side_effect_free(e);if(!r)return null;K(t.name,"Side effects in default value of unused variable {name}"),(t=t.clone()).name.unused=null,t.value=r}return t}function De(n,t,i,r,s){var c=new mn(function(n){if(n instanceof j){if(!(e.option("default_values")&&t&&t.is_defined(e))){var f=r;r=!1;var p=Ee(c,n);return r=f,!p&&r&&t&&(t=t.drop_side_effect_free(e)),p}n===s?s=n=n.name:n=n.name}if(n instanceof L){var d,f=r,h=t;t instanceof en&&(r=!1,t=t.fixed_value()),t instanceof a?(d=!0,S=t.elements):(d=t&&t.is_string(e),S=!1);var _=[],v=r&&[],m=0;if(n.elements.forEach(function(e,n){(t=S&&S[n])instanceof se?t=null:t instanceof ze&&(r&&(v.length=m,Ht(h,v),[].push.apply(v,S.slice(n)),h.elements=v),t=S=!1),(e=e.transform(c))&&(_[m]=e),r&&t&&(v[m]=t),!e&&!t&&r&&S||m++}),t=S&&In(a,h,{elements:S.slice(n.elements.length)}),n.rest){var g=r;r=!1,n.rest=n.rest.transform(e.option("rests")?c:G),r=g,n.rest&&(_.length=m)}if(r&&(t&&!n.rest&&(t=t.drop_side_effect_free(e)),t instanceof a?t=t.elements:t instanceof Pe?t=t.expressions:t&&(t=[t]),t&&t.length&&(v.length=m,[].push.apply(v,t))),t=h,r=f,S&&v&&(Ht(t,v),(t=t.clone()).elements=v),d){if(!n.rest)switch(_.length){case 0:if(n===s)break;return r&&(t=t.drop_side_effect_free(e)),null;case 1:if(!r)break;if(n===s)break;var b=_[0];if(b.has_side_effects(e))break;if(t.has_side_effects(e)&&b.match_symbol(function(e){return e instanceof qe}))break;return t=In(Ie,n,{expression:t,property:In(xe,n,{value:0})}),b}}else _.length=n.elements.length;return Ht(n,_),n.elements=_,n}if(n instanceof H){var y,w,S,f=r,h=t;t instanceof en&&(r=!1,t=t.fixed_value()),t instanceof Te&&(y=[],w=new On,S=t.properties.map(function(n,t){if((n=n.clone())instanceof ze)w=!1;else{var i=n.key;i instanceof we&&(i=i.evaluate(e,!0)),i instanceof we?w=!1:!w||n instanceof AST_ObjectSetter||w.set(i,n),y[t]=i}return n})),n.rest&&(t=!1,n.rest=n.rest.transform(e.option("rests")?c:G));var x=new On,T=r&&new On,A=[];if(n.properties.map(function(n){var t=n.key;return t instanceof we&&(n.key=t=t.transform(G),t=t.evaluate(e,!0)),t instanceof we?T=!1:x.set(t,!x.has(t)),t}).forEach(function(e,i){var a,s=n.properties[i];if(e instanceof we)r=!1,t=!1,a=s.value.transform(c)||l(s.value);else{r=T&&x.get(e);var f=w&&w.get(e);f?(t=f.value)instanceof o&&(t=!1):t=!1,(a=s.value.transform(c))?T&&T.set(e,!1):((n.rest||u(s))&&(a=l(s.value)),T&&!T.has(e)&&(f?(T.set(e,f),null===t&&w.set(e,u(f)&&In(Ae,f,{key:f.key,value:In(xe,f,{value:0})}))):T.set(e,!0))),t&&(f.value=t)}a&&(s.value=a,A.push(s))}),t=h,r=f,T&&y&&((t=t.clone()).properties=List(S,function(t,i){if(t instanceof ze)return t;var r=y[i];if(r instanceof we)return t;if(T.has(r)){var o=T.get(r);if(!o)return t;if(o===t)return w.get(r)||List.skip}else if(n.rest)return t;var a=t.value.drop_side_effect_free(e);return a?(t.value=a,t):u(t)?In(Ae,t,{key:t.key,value:In(xe,t,{value:0})}):List.skip})),t&&!n.rest)switch(A.length){case 0:if(n===s)break;if(t.may_throw_on_access(e,!0))break;return r&&(t=t.drop_side_effect_free(e)),null;case 1:if(!r)break;if(n===s)break;var k=A[0];if(k.key instanceof we)break;if(k.value.has_side_effects(e))break;if(t.has_side_effects(e)&&k.value.match_symbol(function(e){return e instanceof qe}))break;return t=In(Ie,n,{expression:t,property:Xn(k.key,k)}),k.value}return n.properties=A,n}return!(n=n instanceof se?null:i(n))&&r&&t&&(t=t.drop_side_effect_free(e)),n});return{name:n.transform(c),value:t};function u(n){return n.key instanceof we&&n.key.has_side_effects(e)}function l(n){return n instanceof j?l(n.name):n instanceof R?(null===t?t=In(xe,n,{value:0}):t&&(t.may_throw_on_access(e,!0)?t=In(a,n,{elements:t instanceof Pe?t.expressions:[t]}):function e(n){if(n instanceof f)n.write_only=!1,e(n.right);else if(n instanceof p){if(!xt[n.operator])return;e(n.left),e(n.right)}else n instanceof D?(e(n.consequent),e(n.alternative)):n instanceof Pe?e(n.tail_node()):n instanceof fn&&(n.write_only=!1)}(t)),In(H,n,{properties:[]})):(n.unused=null,n)}}}),$e.DEFMETHOD("hoist_declarations",function(e){if(!e.has_directive("use asm")){var n=e.option("hoist_funs"),t=e.option("hoist_vars"),i=this;if(t){var r=0;i.walk(new gn(function(e){return r>1||(e instanceof Q||(e instanceof $e&&e!==i||(e instanceof pn?(r++,!0):void 0)))})),r<=1&&(t=!1)}if(n||t){var o=new On,a=[],s=[],f=new On,c=new mn(function(r,u,l){if(r!==i){if(r instanceof Y)return a.push(r),l?List.skip:In(W,r);if(r instanceof _e){if(!n)return r;var p=c.parent();return p instanceof Q?r:p instanceof Z?r:p!==i&&e.has_directive("use strict")?r:(s.push(r),l?List.skip:In(W,r))}if(r instanceof pn){if(!t)return r;var p=c.parent();if(p instanceof Q)return r;if(!En(r.definitions,function(e){var n=e.name;return n instanceof AST_SymbolVar&&!o.has(n.name)&&i.find_variable(n.name)===n.definition()}))return r;r.definitions.forEach(function(e){f.set(e.name.name,e)});var d=r.to_assignments();if(p instanceof re&&p.init===r){if(d)return d;var h=r.definitions[0].name;return In(en,h)}return p instanceof ie&&p.init===r?d:d?In(je,r,{body:d}):l?List.skip:In(W,r)}return r instanceof $e?r:r instanceof Ue?(o.set(r.name,!0),r):void 0}});if(i.transform(c),f.size()>0){var u=[];i instanceof he&&i.each_argname(function(e){En(e.definition().references,function(e){return!e.in_arg})&&f.del(e.name)}),f.each(function(e,n){(e=e.clone()).name=e.name.clone(),e.value=null,u.push(e),f.set(n,e),e.name.definition().orig.unshift(e.name)}),u.length>0&&s.push(In(pn,i,{definitions:u}))}i.body=a.concat(s,i.body)}}}),$e.DEFMETHOD("process_returns",zn),N.DEFMETHOD("process_returns",function(e){if(e.option("booleans")&&!(e.parent()instanceof Z))switch(Wt(this.name.definition(),Gt(this),e)){case"d":Xt(e,this,!0);break;case!0:Kt(this,e)}}),ae.DEFMETHOD("process_returns",function(e){if(e.option("booleans")){var n=!0,t=Gt(this);if(!this.name||l(this.name.definition())){var i=e.parent();if(i instanceof f){if("="!=i.operator)return;var r=i.left;if(!(r instanceof en))return;if(!l(r.definition()))return}else if(i instanceof g&&i.expression!==this){var o=i.expression;if(o instanceof en&&(o=o.fixed_value()),!(o instanceof he))return;if(o.uses_arguments||o.pinned())return;for(var a=i.args,s=0;s<a.length;s++){var c=a[s];if(c===this){if(!(r=o.argnames[s])&&o.rest)return;break}if(c instanceof ze)return}if(r instanceof j&&(r=r.name),r instanceof Ke&&!l(r.definition()))return}else{if("Call"!=i.TYPE)return;e.pop();var u=e.in_boolean_context();switch(e.push(this),u){case!0:n=!1;case"d":break;default:return}}n?Xt(e,this,!0):Kt(this,e)}}function l(i){switch(Wt(i,t,e)){case!0:n=!1;case"d":return!0}}}),h.DEFMETHOD("var_names",function(){var e=this._var_names;return e||(this._var_names=e=new On,this.enclosed.forEach(function(n){e.set(n.name,!0)}),this.variables.each(function(n,t){e.set(t,!0)})),e}),$e.DEFMETHOD("make_var",function(e,n,t){var i=[this];n instanceof Ve&&n.definition().references.forEach(function(e){var n=e.scope;do{if(!Mn(i,n))return;n=n.parent_scope}while(n&&n!==this)});for(var r=t=t.replace(/^[^a-z_$]|[^a-z0-9_$]/gi,"_"),o=0;!En(i,function(e){return!e.var_names().has(r)});o++)r=t+"$"+o;var a=In(e,n,{name:r,scope:this}),s=this.def_variable(a);return i.forEach(function(e){e.enclosed.push(s),e.var_names().set(r,!0)}),a}),$e.DEFMETHOD("hoist_properties",function(e){if(e.option("hoist_props")&&!e.has_directive("use asm")){var n=this;if(!xn(n)||!n.value){var t=n instanceof on&&e.top_retain||Ln,i=Object.create(null),r=new mn(function(e,t){if(e instanceof f){if("="!=e.operator)return;if(!e.write_only)return;if(!o(e.left,e.right,1))return;t(e,r);var a=new On,s=[],c=[];return e.right.properties.forEach(function(t){var i=d(AST_SymbolVar,e.left,t.key);c.push(In(dn,e,{name:i,value:null}));var r=In(en,e,{name:i.name,scope:n,thedef:i.definition()});r.reference(),s.push(In(f,e,{operator:"=",left:r,right:t.value}))}),a.value=e.right,i[e.left.definition().id]=a,n.body.splice(n.body.indexOf(r.stack[1])+1,0,In(pn,e,{definitions:c})),Un(e,s)}if(e instanceof $e){if(e===n)return;var u=r.parent();if("Call"==u.TYPE&&u.expression===e)return;return e}if(e instanceof dn){if(!o(e.name,e.value,0))return;t(e,r);var a=new On,l=[],p=e.clone();return p.value=e.name instanceof Ue?In(xe,e,{value:0}):null,l.push(p),e.value.properties.forEach(function(n){l.push(In(dn,e,{name:d(e.name.CTOR,e.name,n.key),value:n.value}))}),a.value=e.value,i[e.name.definition().id]=a,List.splice(l)}function d(e,t,i){var r=n.make_var(e,t,t.name+"_"+i);return a.set(i,r.definition()),r}});n.transform(r),n.transform(new mn(function(e,n){if(e instanceof qe){if(!(e.expression instanceof en))return;var t=i[e.expression.definition().id];if(!t)return;if(e.expression.fixed_value()!==t.value)return;var r=t.get(e.get_property()),o=In(en,e,{name:r.name,scope:e.expression.scope,thedef:r});return o.reference(),o}if(e instanceof en){var t=i[e.definition().id];if(!t)return;if(e.fixed_value()!==t.value)return;return In(Te,e,{properties:[]})}}))}}function o(i,r,o){if(i instanceof Be){var a=i.definition();if(a.assignments==o&&a.references.length-a.replaced!=o&&!a.single_use&&n.find_variable(i.name)===a&&!t(a)&&i.fixed_value()===r){var s=i.fixed||a.fixed;if(!(s.direct_access||s.escaped&&1==s.escaped.depth))return r instanceof Te&&r.properties.length>0&&E(i,e)&&En(r.properties,function(e){return Pi(e)&&"__proto__"!==e.key})}}}}),function(e){function n(e,n,t,i){for(var r=e.length,o=[],a=!1,s=0;s<r;s++){var f,c=e[s];(f=i&&c instanceof ze?i(c,n,t):c.drop_side_effect_free(n,t))!==c&&(a=!0),f&&(o.push(f),t=!1)}return o.length?a?o:e:null}function t(e,n,t){var i=e.expression;return i.is_string(n)?i.drop_side_effect_free(n,t):e}function i(e){return e instanceof ze?In(a,e,{elements:[e]}):e}e(we,Yn),e(o,Bn),e(a,function(e,r){var o=n(this.elements,e,r,t);return o?o===this.elements&&En(o,function(e){return e instanceof ze})?this:Un(this,o.map(i)):null}),e(f,function(e){var n=this.left;if(n instanceof qe){var t=n.expression;if(t.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&t.is_constant())return this}return n.has_side_effects(e)?this:xt[this.operator.slice(0,-1)]?this:(this.write_only=!0,root_expr(n).is_constant_expression(e.find_parent($e))?this.right.drop_side_effect_free(e):this)}),e(u,function(e){if(!e.option("awaits"))return this;var n=this.expression;if(!wi(e,n))return this;n instanceof un&&"!"==n.operator&&(n=n.expression);var t=n.drop_side_effect_free(e);if(t===n)return this;t?wi(e,t)||(t=t.negate(e)):t=In(xe,n,{value:0});var i=this.clone();return i.expression=t,i}),e(p,function(e,n){var t=this.left,i=this.right,r=this.operator;if(!yi(r,i,e)){var o=t.drop_side_effect_free(e,n);if(o===t)return this;var a=this.clone();return a.left=o||In(xe,t,{value:0}),a}var s=i.drop_side_effect_free(e,n);if(!s)return t.drop_side_effect_free(e,n);if(xt[r]&&s.has_side_effects(e)){var a=this;if(s!==i&&((a=a.clone()).right=s.drop_side_effect_free(e)),"??"==r)return a;var f=a.clone();f.operator="&&"==r?"||":"&&",f.left=t.negate(e,n);var c=f.right.tail_node();c instanceof p&&f.operator==c.operator&&Ti(f);var u=n?At:Tt;return"&&"==r?u(a,f):u(f,a)}var o=t.drop_side_effect_free(e,n);return o?(s=s.drop_side_effect_free(e))?Un(this,[o,s]):o:s}),e(g,function(e,r){var o=this;if(o.is_expr_pure(e)){o.pure&&we.warn("Dropping __PURE__ call [{start}]",o);var a=n(o.args,e,r,t);return a&&Un(o,a.map(i))}var s=o.expression;if(o.is_call_pure(e)){var f=o.args.slice();return f.unshift(s.expression),(f=n(f,e,r,t))&&Un(o,f.map(i))}if(e.option("yields")&&Tn(s)){var c=o.clone();c.expression=In(ae,s),c.expression.body=[];var u=c.transform(e);if(u!==c)return u.drop_side_effect_free(e,r)}var l=Xt(e,s);if(l&&((o=o.clone()).expression=l,s._squeezed&&(o.expression._squeezed=!0)),o instanceof ye){var p=s;if(p instanceof en&&(p=p.fixed_value()),p instanceof he){if(function(e,n){e.new=!0;var t=En(e.body,function(e){return!e.has_side_effects(n)})&&En(e.argnames,function(e){return!e.match_symbol(Ln)})&&!(e.rest&&e.rest.match_symbol(Ln));return e.new=!1,t}(p,e)){var f=o.args.slice();return f.unshift(s),(f=n(f,e,r,t))&&Un(o,f.map(i))}p.contains_this()||((o=In(g,o)).expression=o.expression.clone(),o.args=o.args.slice())}}return o.call_only=!0,o}),e(x,function(e,t){for(var i=this,o=[],a=[],f=0,c=i.properties,u=0;u<c.length;u++){var l=c[u];if(l.key instanceof we&&o.push(l.key),_t(l)){var p=l.value;if(p.has_side_effects(e)){if(p.contains_this())return i;l instanceof AST_ClassInit?(f++,a.push(l)):a.push(p)}}}var d=i.extends;if(d&&(d instanceof en&&(d=d.fixed_value()),(d=!r(d))||o.unshift(i.extends)),(o=n(o,e,t))&&(t=!1),a=n(a,e,t),!o){if(!d&&!a&&!i.name)return null;o=[]}if(d||i.name||!e.has_directive("use strict")){var h=Yt(i);return d||(h.extends=null),h.properties=[],a?a.length==f?(o.length&&a.unshift(In(AST_ClassField,i,{key:Un(i,o),value:null})),h.properties=a):h.properties.push(In(AST_ClassField,i,{static:!0,key:o.length?Un(i,o):"c",value:_()})):o.length&&h.properties.push(In(AST_ClassMethod,i,{key:Un(i,o),value:In(ae,i,{argnames:[],body:[]}).init_vars(h)})),h}return a&&o.push(In(g,i,{expression:In(s,i,{argnames:[],body:[],value:_()}).init_vars(i.parent_scope),args:[]})),Un(i,o);function _(){return Un(i,a.map(function(e){if(!(e instanceof AST_ClassInit))return e;var n=In(s,e.value);return n.argnames=[],In(g,e,{expression:n,args:[]})}))}}),e(D,function(e){var n,t,i=this.consequent.drop_side_effect_free(e),r=this.alternative.drop_side_effect_free(e);return i===this.consequent&&r===this.alternative?this:(e.option("ie")&&(n=[],i instanceof ae&&(n.push(i),i=null),r instanceof ae&&(n.push(r),r=null)),i?r?((t=this.clone()).consequent=i,t.alternative=r):t=In(p,this,{operator:"&&",left:this.condition,right:i}):t=r?In(p,this,{operator:"||",left:this.condition,right:r}):this.condition.drop_side_effect_free(e),n?(t&&n.push(t),0==n.length?null:Un(this,n)):t)}),e(q,Bn),e(V,function(e,n){var t=this.expression;return t.may_throw_on_access(e)?this:t.drop_side_effect_free(e,n)}),e(ae,function(e){return Jt(this,e)?null:this}),e(ve,Bn),e(Te,function(e,t){var i=[];this.properties.forEach(function(e){e instanceof ze?i.push(e):(e.key instanceof we&&i.push(e.key),i.push(e.value))});var r=n(i,e,t,function(e,n,t){var i=e.expression;return i.safe_to_spread()?i.drop_side_effect_free(n,t):e});return r?r!==i||En(r,function(e){return!(e instanceof ze)})?Un(this,r.map(function(e){return e instanceof ze?In(Te,e,{properties:[e]}):e})):this:null}),e(Ee,Bn),e(Pe,function(e,t){var i=n(this.expressions,e,t);if(!i)return null;var r,o,a,s=i.length-1,c=i[s];if(e.option("awaits")&&s>0&&c instanceof u&&c.expression.is_constant()){var l=(i=i.slice(0,-1))[--s];c.expression=wi(e,l)?l:l.negate(e),i[s]=c}return e.option("conditionals")&&s>0&&(r=i[s-1])instanceof f&&"="==r.operator&&(a=r.left)instanceof en&&(o=hi(e,a.definition(),r.right,c))&&((r=r.clone()).right=o,(i=i.slice(0,-2)).push(r.drop_side_effect_free(e,t))),i===this.expressions?this:Un(this,i)}),e(Ie,function(e,n){var t=this.expression;if(t.may_throw_on_access(e))return this;var i=this.property;return(t=t.drop_side_effect_free(e,n))?(i=i.drop_side_effect_free(e))?Un(this,[t,i]):t:i.drop_side_effect_free(e,n)}),e(en,function(e){return this.is_declared(e)&&E(this,e)?null:this}),e(nn,function(e,n){var t=this;if(t.is_expr_pure(e)){var i=t.expressions;return 0==i.length?null:Un(t,i).drop_side_effect_free(e,n)}var r=t.tag,o=Xt(e,r);return o&&((t=t.clone()).tag=o,r._squeezed&&(t.tag._squeezed=!0)),t}),e(fn,function(e,n){var t=this.expression;if(unary_side_effects[this.operator])return this.write_only=!t.has_side_effects(e),this;if("typeof"==this.operator&&t instanceof en&&E(t,e))return null;var i=t.drop_side_effect_free(e,n);return n&&i&&ut(i)?i===t&&"!"==this.operator?this:i.negate(e,n):i})}(function(e,n){e.DEFMETHOD("drop_side_effect_free",n)}),e(je,function(e,n){if(n.option("side_effects")){var t=e.body,i=t.drop_side_effect_free(n,!0);if(!i)return we.warn("Dropping side-effect-free statement [{start}]",e),In(W,e);if(i!==t)return In(je,e,{body:i})}return e}),e(hn,function(e,n){return n.option("loops")?In(ie,e).optimize(n):e}),e(U,function(e,n){if(!n.option("loops"))return e;var t=ei(n,e.condition);if(!(t instanceof we)){if(t&&!Qt(e,n.parent(),C))return In(ie,e,{body:In(_,e.body,{body:[e.body,In(je,e.condition,{body:e.condition})]})}).optimize(n);if(!Qt(e,n.parent()))return In(_,e.body,{body:[e.body,In(je,e.condition,{body:e.condition})]}).optimize(n)}if(e.body instanceof _&&!Qt(e,n.parent(),C)){for(var i=e.body.body,r=i.length;--r>=0;){var o=i[r];if(o instanceof fe&&!o.alternative&&o.body instanceof m&&n.loopcontrol_target(o.body)===e){if(a(o.condition))break;e.condition=In(p,e,{operator:"&&",left:o.condition.negate(n),right:e.condition}),i.splice(r,1)}else if(o instanceof je){if(a(o.body))break;e.condition=Un(e,[o.body,e.condition]),i.splice(r,1)}else if(!mt(o,!0))break}e.body=It(e.body,n.parent())}return e.body instanceof W?In(ie,e).optimize(n):e.body instanceof je?In(ie,e,{condition:Un(e.condition,[e.body.body,e.condition]),body:In(W,e)}).optimize(n):e;function a(n){var t=!1;return n.walk(new gn(function(n){return!!t||(n instanceof en?(jn(n.definition(),e.enclosed)||(t=!0),!0):void 0)})),t}}),e(ie,function(e,n){if(!n.option("loops"))return e;if(n.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(n)),e.step&&(e.step=e.step.drop_side_effect_free(n))),e.condition){var t=ei(n,e.condition);if(t)t instanceof we||(e.body=In(_,e.body,{body:[In(je,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(n.option("dead_code")){var i=[];return is_statement(e.init)?i.push(e.init):e.init&&i.push(In(je,e.init,{body:e.init})),i.push(In(je,e.condition,{body:e.condition})),wt(n,e.body,i),In(_,e,{body:i}).optimize(n)}}return function e(n,t){var i=s(n.body);if(t.option("dead_code")&&(i instanceof m||i instanceof C&&f(i)||i instanceof K)){var r=[];is_statement(n.init)?r.push(n.init):n.init&&r.push(In(je,n.init,{body:n.init}));var o=f(i)||i instanceof K;return n.condition&&o?r.push(In(fe,n,{condition:n.condition,body:i,alternative:null})):n.condition?r.push(In(je,n.condition,{body:n.condition})):o&&r.push(i),wt(t,n.body,r),In(_,n,{body:r})}if(i instanceof fe){var a=s(i.body);if(a instanceof m&&!f(a)){n.condition?n.condition=In(p,n.condition,{left:n.condition,operator:"&&",right:i.condition.negate(t)}):n.condition=i.condition.negate(t);var r=at(i.alternative);return wt(t,i.body,r),c(r)}if((a=s(i.alternative))instanceof m&&!f(a)){n.condition?n.condition=In(p,n.condition,{left:n.condition,operator:"&&",right:i.condition}):n.condition=i.condition;var r=at(i.body);return wt(t,i.alternative,r),c(r)}}return n;function s(e){return e instanceof _?e.body[0]:e}function f(e){return t.loopcontrol_target(e)!==t.self()}function c(i){return n.body instanceof _?(n.body=n.body.clone(),n.body.body=i.concat(n.body.body.slice(1)),n.body=n.body.transform(t)):n.body=In(_,n.body,{body:i}).transform(t),e(n,t)}}(e,n)}),e(re,function(e,n){if(n.option("varify")&&rt(e.init)){var t=e.init.definitions[0].name;(t instanceof R||t instanceof Qe)&&!t.match_symbol(function(e){if(e instanceof Ve){var t=e.definition();return!ki(t)||ri(n,t)}},!0)&&(e.init=oi(e.init,e.resolve()))}return e}),e(fe,function(e,n){if(st(e.alternative)&&(e.alternative=null),!n.option("conditionals"))return e;if(n.option("booleans")&&!e.condition.has_side_effects(n)&&ni(n,e.condition),n.option("dead_code")){var t=ei(n,e.condition);if(!t){we.warn("Condition always false [{start}]",e.condition);var i=[In(je,e.condition,{body:e.condition}).transform(n)];return wt(n,e.body,i),e.alternative&&i.push(e.alternative),In(_,e,{body:i}).optimize(n)}if(!(t instanceof we)){we.warn("Condition always true [{start}]",e.condition);var i=[In(je,e.condition,{body:e.condition}).transform(n),e.body];return e.alternative&&wt(n,e.alternative,i),In(_,e,{body:i}).optimize(n)}}var r=e.condition.negate(n),o=e.condition.print_to_string().length,a=r.print_to_string().length,s=a<o;if(e.alternative&&s){s=!1,e.condition=r;var c=e.body;e.body=e.alternative,e.alternative=st(c)?null:c}var u=[],l=[],d=[],h=I(e.body,u,l,d),v=[],m=[],g=[],b=I(e.alternative,v,m,g);if(h instanceof _||b instanceof _){var i=[],w=[];if(h&&([].push.apply(i,u),[].push.apply(w,l),h instanceof _?e.body=h:0==h.length?e.body=In(W,e.body):e.body=In(je,e.body,{body:Un(e.body,h)}),d.forEach(tn)),b&&([].push.apply(i,v),[].push.apply(w,m),b instanceof _?e.alternative=b:0==b.length?e.alternative=null:e.alternative=In(je,e.alternative,{body:Un(e.alternative,b)}),g.forEach(tn)),w.length>0&&i.push(In(pn,e,{definitions:w})),i.length>0)return i.push(e.transform(n)),In(_,e,{body:i}).optimize(n)}else if(h&&b){var i=u.concat(v);return(l.length>0||m.length>0)&&i.push(In(pn,e,{definitions:l.concat(m)})),0==h.length?i.push(In(je,e.condition,{body:b.length>0?In(p,e,{operator:"||",left:e.condition,right:Un(e.alternative,b)}).transform(n):e.condition.clone()}).optimize(n)):0==b.length?(o===a&&!s&&e.condition instanceof p&&"||"==e.condition.operator&&(s=!0),i.push(In(je,e,{body:In(p,e,{operator:s?"||":"&&",left:s?r:e.condition,right:Un(e.body,h)}).transform(n)}).optimize(n))):i.push(In(je,e,{body:In(D,e,{condition:e.condition,consequent:Un(e.body,h),alternative:Un(e.alternative,b)})}).optimize(n)),d.forEach(tn),g.forEach(tn),In(_,e,{body:i}).optimize(n)}if(st(e.body)&&(e=In(fe,e,{condition:r,body:e.alternative,alternative:null})),e.alternative instanceof K&&e.body.TYPE==e.alternative.TYPE){var S=e.body.value,x=e.alternative.value;if(!S&&!x)return In(_,e,{body:[In(je,e,{body:e.condition}),e.body]}).optimize(n);if(S&&x||!function(){var e=!1,t=0,i=n.self();do{if(i instanceof y)n.parent(t).bfinally&&(e=!0),t++;else if(i instanceof te)t++;else{if(i instanceof $e)return e&&Dn(i);i instanceof sn&&i.bfinally&&(e=!0)}}while(i=n.parent(t++))}()){var T=In(e.body.CTOR,e,{value:In(D,e,{condition:e.condition,consequent:S||In(ln,e.body).transform(n),alternative:x||In(ln,e.alternative).transform(n)})});return T instanceof Fe&&(T.in_bool=e.body.in_bool||e.alternative.in_bool),T}}if(e.body instanceof fe&&!e.body.alternative&&!e.alternative&&(e=In(fe,e,{condition:In(p,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null})),Mt(e.body)&&e.alternative){var A=e.alternative;return e.alternative=null,In(_,e,{body:[e,A]}).optimize(n)}if(Mt(e.alternative)){var i=e.body;return e.body=e.alternative,e.condition=s?r:e.condition.negate(n),e.alternative=null,In(_,e,{body:[e,i]}).optimize(n)}if(e.alternative){for(var k=z(e.body),E=M(k),O=z(e.alternative),q=M(O),C=[];E>=0&&q>=0;){var F=k[E],$=O[q];if(F.equals($))k.splice(E--,1),O.splice(q--,1),C.unshift(tt(F,$));else{if(!(F instanceof je))break;if(!($ instanceof je))break;var P=F.body.tail_node(),j=$.body.tail_node();if(!P.equals(j))break;E=N(k,F.body,E),q=N(O,$.body,q),C.unshift(In(je,P,{body:tt(P,j)}))}}if(C.length>0)return e.body=k.length>0?In(_,e,{body:k}):In(W,e),e.alternative=O.length>0?In(_,e,{body:O}):null,C.unshift(e),In(_,e,{body:C}).optimize(n)}return n.option("typeofs")&&Zt(e.condition,e.body,e.alternative),e;function z(e){return e instanceof _?e.body:[e]}function M(e){for(var n=e.length;--n>=0&&mt(e[n],!0););return n}function N(e,n,t){return n instanceof Pe?e[t]=In(je,n,{body:Un(n,n.expressions.slice(0,-1))}):e.splice(t--,1),t}function I(e,t,i,r){if(null==e)return[];if(e instanceof _){for(var o=[],a=0;a<e.body.length;a++){var s=e.body[a];if(!(s instanceof W)){if(s instanceof K){if(0==a)return;o.length>0&&(s=s.clone(),o.push(s.value||In(ln,s).transform(n)),s.value=Un(e,o));var c=e.clone();return c.body=c.body.slice(a+1),c.body.unshift(s),c}if(s instanceof _e)t.push(s);else if(s instanceof je){if(!n.option("sequences")&&o.length>0)return;o.push(s.body)}else{if(!(s instanceof pn))return;if(!n.option("sequences")&&o.length>0)return;s.remove_initializers(n,i),s.definitions.forEach(u)}}}return o}if(e instanceof _e)return t.push(e),[];if(e instanceof W)return[];if(e instanceof je)return[e.body];if(e instanceof pn){var o=[];return e.remove_initializers(n,i),e.definitions.forEach(u),o}function u(e){e.value&&o.push(In(f,e,{operator:"=",left:e.name.convert_symbol(en,function(e){r.push(e)}),right:e.value}))}}}),e(Re,function(e,n){if(!n.option("switches"))return e;if(!n.option("dead_code"))return e;for(var t,i,r,o=[],a=[],s=[],f=0,c=e.body.length;f<c;f++){if((t=e.body[f])instanceof $){var u=o[o.length-1];if(i||A(t.body[0],n)&&(!u||Mt(u))){E(t,u);continue}i=t}else{var l=t.expression,d=In(p,e,{operator:"===",left:e.expression,right:l}).evaluate(n,!0);if(!d){l.has_side_effects(n)&&s.push(l),E(t,o[o.length-1]);continue}if(!(d instanceof we)){if(i){var h=o.indexOf(i);o.splice(h,1),E(i,o[h-1]),i=null}for(l.has_side_effects(n)?r=t:i=t=In($,t);++f<c;)E(e.body[f],t)}}if(f+1>=c||Mt(t)){var u=o[o.length-1],v=t.body;if(Mt(u))switch(u.body.length-v.length){case 1:var g=u.body[u.body.length-1];if(!A(g,n))break;v=v.concat(g);case 0:var y=In(_,u),w=In(_,t,{body:v});y.equals(w)&&(u.body=[])}}s.length&&(t instanceof $?o.push(In(b,e,{expression:Un(e,s),body:[]})):(s.push(t.expression),t.expression=Un(e,s)),s=[]),o.push(t)}for(s.length&&!r&&o.push(In(b,e,{expression:Un(e,s),body:[]}));t=o[o.length-1];){var g=t.body[t.body.length-1];if(A(g,n)&&t.body.pop(),t===i){if(!ft(t))break}else{if(t.expression.has_side_effects(n))break;if(i){if(!ft(i))break;if(o[o.length-2]!==i)break;i.body=i.body.concat(t.body),t.body=[]}else if(!ft(t))break}E(t),o.pop()===i&&(i=null)}if(!t)return a.push(In(je,e.expression,{body:e.expression})),s.length&&a.push(In(je,e,{body:Un(e,s)})),In(_,e,{body:a}).optimize(n);if(t===i)for(;(t=o[o.length-2])&&!(t instanceof $)&&ft(t);){var l=t.expression;if(l.has_side_effects(n)){var u=o[o.length-3];if(u&&!Mt(u))break;i.body.unshift(In(je,e,{body:l}))}E(t),o.splice(-2,1)}if(o[0].body=a.concat(o[0].body),e.body=o,n.option("conditionals"))switch(o.length){case 1:if(!k(o[0]))break;var l=o[0].expression,v=o[0].body.slice();return o[0]!==i&&o[0]!==r?In(fe,e,{condition:In(p,e,{operator:"===",left:e.expression,right:l}),body:In(_,e,{body:v}),alternative:null}).optimize(n):(l&&v.unshift(In(je,l,{body:l})),v.unshift(In(je,e.expression,{body:e.expression})),In(_,e,{body:v}).optimize(n));case 2:if(!jn(i,o)||!k(o[1]))break;var v=o[0].body.slice(),S=v.length&&A(v[v.length-1],n);if(S&&v.pop(),!En(v,k))break;var x=o[1].body.length&&In(_,o[1]),T=In(fe,e,{condition:In(p,e,o[0]===i?{operator:"!==",left:e.expression,right:o[1].expression}:{operator:"===",left:e.expression,right:o[0].expression}),body:In(_,o[0],{body:v}),alternative:S&&x||null});return!S&&x&&(T=In(_,e,{body:[T,x]})),T.optimize(n)}return e;function A(n,t){return n instanceof m&&t.loopcontrol_target(n)===e}function k(n){var t=!1,i=new gn(function(e){if(t||e instanceof he||e instanceof je)return!0;A(e,i)&&(t=!0)});return i.push(e),n.walk(i),!t}function E(e,t){t&&!Mt(t)?t.body=t.body.concat(e.body):wt(n,e,a)}}),e(sn,function(e,n){if(e.body=yt(e.body,n),n.option("dead_code")){if(ft(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof He&&!E(e)},!0))){var t=[];return e.bcatch&&(wt(n,e.bcatch,t),t.forEach(function(e){e instanceof pn&&e.definitions.forEach(function(e){var n=e.name.definition().redefined();n&&(e.name=e.name.clone(),e.name.thedef=n)})})),t.unshift(In(_,e).optimize(n)),e.bfinally&&t.push(In(_,e.bfinally).optimize(n)),In(_,e,{body:t}).optimize(n)}if(e.bfinally&&ft(e.bfinally)){var t=In(_,e.bfinally).optimize(n);if(t=e.body.concat(t),!e.bcatch)return In(_,e,{body:t}).optimize(n);e.body=t,e.bfinally=null}}return e}),O.DEFMETHOD("remove_initializers",ti(function(e,n){return In(ln,n).optimize(e)})),me.DEFMETHOD("remove_initializers",ti(Bn)),pn.DEFMETHOD("remove_initializers",ti(Bn)),M.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,n){var t=n.name.definition(),i=n.value;if(i){i instanceof Pe&&(i=i.clone());var r=In(en,n.name),o=In(f,n,{operator:"=",left:r,right:i});e.push(o);var a=function(){return o.right};a.assigns=[o],a.direct_access=t.direct_access,a.escaped=t.escaped,r.fixed=a,t.references.forEach(function(e){if(e.fixed){var i=e.fixed.assigns;i&&i[0]===n&&(i.length>1||e.fixed.to_binary||e.fixed.to_prefix?i[0]=o:(e.fixed=a,t.fixed===e.fixed&&(t.fixed=a)))}}),t.references.push(r)}return t.assignments++,t.eliminated++,t.single_use=!1,e},[]);return 0==e.length?null:Un(this,e)}),e(O,si),e(me,si),e(g,function(e,n){var t=e.expression,i=fi(e,n);if(i)return i;if(n.option("sequences"))if(t instanceof qe){var r=ci(t,n);if(r!==t){var o=e.clone();return o.expression=r.expressions.pop(),r.expressions.push(o),r.optimize(n)}}else if(!et(t.tail_node())){var r=ci(e,n);if(r!==e)return r.optimize(n)}if(n.option("unused")&&ui(e,n),n.option("unsafe"))if(pt(t))switch(t.name){case"Array":if(1==e.args.length){var s=e.args[0];if(s instanceof xe)try{var c=s.value;if(c>6)break;for(var l=Array(c),d=0;d<c;d++)l[d]=In(se,e);return In(a,e,{elements:l})}catch(n){we.warn("Invalid array length: {length} [{start}]",{length:c,start:e.start});break}if(!s.is_boolean(n)&&!s.is_string(n))break}return In(a,e,{elements:e.args});case"Object":if(0==e.args.length)return In(Te,e,{properties:[]});break;case"String":if(0==e.args.length)return In(Ne,e,{value:""});if(1==e.args.length)return In(p,e,{operator:"+",left:In(Ne,e,{value:""}),right:e.args[0]}).optimize(n);break;case"Number":if(0==e.args.length)return In(xe,e,{value:0});if(1==e.args.length)return In(un,e,{operator:"+",expression:In(p,e,{operator:"+",left:In(Ne,e,{value:""}),right:e.args[0]})}).optimize(n);break;case"Boolean":if(0==e.args.length)return In(ne,e).optimize(n);if(1==e.args.length)return In(un,e,{operator:"!",expression:In(un,e,{operator:"!",expression:e.args[0]})}).optimize(n);break;case"RegExp":var h=[];if(En(e.args,function(e){var t=e.evaluate(n);return h.unshift(t),e!==t}))try{return kt(n,e,In(Ce,e,{value:RegExp.apply(RegExp,h)}))}catch(n){we.warn("Error converting {this} [{start}]",e)}}else if(t instanceof V)switch(t.property){case"toString":var v=t.expression;if(0==e.args.length&&!(v.may_throw_on_access(n)||v instanceof AST_Super))return In(p,e,{operator:"+",left:In(Ne,e,{value:""}),right:v}).optimize(n);break;case"join":if(t.expression instanceof a&&e.args.length<2)e:{var m=e.args[0];if(0==t.expression.elements.length&&!(m instanceof ze))return m?Un(e,[m,In(Ne,e,{value:""})]).optimize(n):In(Ne,e,{value:""});if(!(m&&(m=m.evaluate(n))instanceof we)){for(var l=[],b=[],d=0;d<t.expression.elements.length;d++){var y=t.expression.elements[d],w=y.evaluate(n);if(w!==y)b.push(w);else{if(y instanceof ze)break e;b.length>0&&(l.push(In(Ne,e,{value:b.join(m)})),b.length=0),l.push(y)}}if(b.length>0&&l.push(In(Ne,e,{value:b.join(m)})),1==l.length)return l[0].is_string(n)?l[0]:In(p,l[0],{operator:"+",left:In(Ne,e,{value:""}),right:l[0]});if(""==m)return s=l[0].is_string(n)||l[1].is_string(n)?l.shift():In(Ne,e,{value:""}),l.reduce(function(e,n){return In(p,n,{operator:"+",left:e,right:n})},s).optimize(n);var S=e.clone();return S.expression=S.expression.clone(),S.expression.expression=S.expression.expression.clone(),S.expression.expression.elements=l,kt(n,e,S)}}break;case"charAt":if(e.args.length<2){var S=In(p,e,{operator:"||",left:In(Ie,e,{expression:t.expression,property:e.args.length?In(p,e.args[0],{operator:"|",left:In(xe,e,{value:0}),right:e.args[0]}):In(xe,e,{value:0})}).optimize(n),right:In(Ne,e,{value:""})});return S.is_string=Hn,S.optimize(n)}break;case"apply":if(2==e.args.length&&e.args[1]instanceof a){var x=e.args[1].elements.slice();return x.unshift(e.args[0]),In(g,e,{expression:In(V,t,{expression:t.expression,property:"call"}),args:x}).optimize(n)}break;case"call":var T=t.expression;if(T instanceof en&&(T=T.fixed_value()),T instanceof he&&!T.contains_this())return(e.args.length?Un(e,[e.args[0],In(g,e,{expression:t.expression,args:e.args.slice(1)})]):In(g,e,{expression:t.expression,args:[]})).optimize(n)}else if(n.option("side_effects")&&t instanceof g&&1==t.args.length&&pt(t.expression)&&"Object"==t.expression.name){var o=e.clone();return o.expression=nt(e,t,t.args[0]),o.optimize(n)}if(n.option("unsafe_Function")&&pt(t)&&"Function"==t.name){if(0==e.args.length)return In(ae,e,{argnames:[],body:[]}).init_vars(t.scope);if(En(e.args,function(e){return e instanceof Ne}))try{var A="n(function("+e.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+e.args[e.args.length-1].value+"})",k=Gn(A),E={ie:n.option("ie")};k.figure_out_scope(E);var O,q=new Zn(n.options);(k=k.transform(q)).figure_out_scope(E),k.compute_char_frequency(E),k.mangle_names(E),k.walk(new gn(function(e){return!!O||(e instanceof he?(O=e,!0):void 0)}));var A=Jn();return _.prototype._codegen.call(O,A),e.args=[In(Ne,e,{value:O.argnames.map(function(e){return e.print_to_string()}).join()}),In(Ne,e.args[e.args.length-1],{value:A.get().replace(/^\{|\}$/g,"")})],e}catch(n){if(!(n instanceof Vn))throw n;we.warn("Error parsing code passed to new Function [{start}]",e.args[e.args.length-1]),we.warn(n.toString())}}var C=t instanceof en?t.fixed_value():t,F=n.parent(),$=n.self(),P=C instanceof he&&(!is_async(C)||n.option("awaits")&&F instanceof u)&&(!Tn(C)||n.option("yields")&&$ instanceof vn&&$.nested),z=P&&C.first_statement(),M=0,I=!1,Y=!En(e.args,function(e){return!(e instanceof ze)}),U=P&&En(C.argnames,function(n,t){if(1==M&&e.args[t]instanceof ze&&(M=2),n instanceof j){M||(M=1);var i=1==M&&e.args[t];if(St(i)||(M=2),zi(C,n.value))return!1;n=n.name}return!(n instanceof R&&(I=!0,zi(C,n)))})&&!(C.rest instanceof R&&zi(C,C.rest)),K=U&&n.option("inline")&&!e.is_expr_pure(n)&&(t===C||di(C,n));if(K&&z instanceof Fe){var w=z.value;if(t===C&&!C.name&&(!w||w.is_constant_expression())&&pi(C,li(n)))return Un(e,me(w)).optimize(n)}if(P&&!C.contains_this()){var J,X=!1;if(K&&!C.uses_arguments&&!C.pinned()&&!(C.name&&C instanceof ve)&&(t===C||!Ai(n,J=t.definition(),C)&&C.is_constant_expression(qn(n)))&&(w=function(e){var t=C.body.length;if(t<2&&(e=be(e)))return e;if(n.option("inline")<3)return!1;e=null;for(var i=0;i<t;i++){var r=C.body[i];if(r instanceof pn){if(X){if(!e)continue;if(!(e instanceof je))return!1;vt(r)||(e=null)}else if(!vt(r)){if(e&&!(e instanceof je))return!1;e=null,X=!0}}else{if(r instanceof AST_AsyncDefun||r instanceof N||r instanceof W)continue;if(e)return!1;e=r}}return be(e)}(z))){var Q,Z,ee,te,oe=t===C||J.single_use&&J.references.length-J.replaced==1;if(function(){if(M||I||Y||X||C.rest)return;if(n.option("inline")<2&&C.argnames.length)return;if(!C.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof Ke}))return;var t,i=n.find_parent($e),r=!1,o=li(n,i),a=[],s=!1,c=new gn(function(e,i){if(r)return!0;if(e instanceof p&&xt[e.operator]||e instanceof D)a=null;else{if(e instanceof $e)return r=!0;if(o&&e instanceof Be&&o[e.name])return r=!0;if(e instanceof en){var u=e.definition();if(C.variables.get(e.name)!==u)return void(a=null);if(u.init instanceof _e)return r=!0;if(Qn(e,c.parent()))return r=!0;var l=ye(u);if(t<l||(t=l),!a)return;s?a=null:a.push(C.argnames[l])}else if(!s)return e instanceof f&&e.left instanceof qe?(e.left.expression.walk(c),e.left instanceof Ie&&e.left.property.walk(c),e.right.walk(c),s=!0,!0):e.has_side_effects(n)?(i(),s=!0,!0):void 0}});if(w.walk(c),r)return;var u=e.args.length;if(a&&C.argnames.length>=u){for(u=C.argnames.length;u-- >t&&C.argnames[u]===a.pop(););u++}return u<=t||En(e.args.slice(t,u),s&&!a?function(e){return e.is_constant_expression(i)}:function(e){return!e.has_side_effects(n)})}()){var x=e.args.slice(),fe=[],ce=w.clone(!0).transform(new mn(function(n){if(n instanceof en){var t=n.definition();if(C.variables.get(n.name)!==t)return fe.push(n),n;var i=ye(t),r=x[i];if(!r)return In(ln,e);x[i]=null;var o=this.parent();return o?nt(o,n,r):r}})),ue=C.inlined;t!==C&&(C.inlined=!0);var le=[];x.forEach(function(e){e&&((e=e.clone(!0)).walk(new gn(function(e){e instanceof en&&fe.push(e)})),le.push(e))},[]),le.push(ce);var S=Un(e,le).optimize(n);if(C.inlined=ue,S=nt(F,$,S),oe||Tt(S,e)===S)return fe.forEach(function(e){e.scope=t===C?C.parent_scope:t.scope,e.reference();var n=e.definition();oe&&n.replaced++,n.single_use=!1}),S;S.has_side_effects(n)||(e.drop_side_effect_free=function(e,n){var t=this.args.slice();return t.unshift(this.expression),Un(this,t).drop_side_effect_free(e,n)})}if(oe&&function(){var e,i=new On,r=0;te=$;do{if(te.variables&&te.variables.each(function(e){i.set(e.name,!0)}),e=te,(te=n.parent(r++))instanceof AST_ClassField){if(!te.static)return!1}else if(te instanceof G)ee=[];else if(te instanceof ie){if(te.init===e)continue;ee=[]}else if(te instanceof re){if(te.init===e)continue;if(te.object===e)continue;ee=[]}}while(!(te instanceof $e));if(!(Z=te.body.indexOf(e)+1))return!1;if(!pi(C,li(n,te)))return!1;var o=(t!==C||C.parent_scope.resolve()===te)&&!te.pinned();te instanceof on&&(n.toplevel.vars?i.set("arguments",!0):o=!1);Q=new On;var a=n.option("inline");return!(!function(e,n){var t=!1;return C.each_argname(function(i){if(!t&&!i.unused){if(!n||Se(e,i.name))return t=!0;Q.set(i.name,!0),ee&&ee.push(i.definition())}}),!t}(i,a>=2&&o)||!function(e,n){for(var t=0;t<C.body.length;t++){var i=C.body[t];if(i instanceof _e){var r=i.name;if(!n)return!1;if(Q.has(r.name))return!1;if(Se(e,r.name))return!1;if(!En(i.enclosed,function(n){return n.scope===te||n.scope===i||!e.has(n.name)}))return!1;ee&&ee.push(r.definition())}else if(i instanceof pn){if(!n)return!1;for(var o=i.definitions.length;--o>=0;){var r=i.definitions[o].name;if(Se(e,r.name))return!1;ee&&ee.push(r.definition())}}}return!0}(i,a>=3&&o)||ee&&0!=ee.length&&qi(C,ee))}()){C._squeezed=!0,t!==C&&(C.parent_scope=t.scope);var S=Un(e,function(){var t=[],i=[];M>1||I||Y||C.rest?function(n,t){function i(e,i){if(i.unused)return de(i);var r=i.definition();r.assignments++,r.references.push(e);var o=In(AST_SymbolVar,i);r.orig.push(o),r.eliminated++,Ae(n,t,o)}t.push(In(f,e,{operator:"=",left:In(L,e,{elements:C.argnames.map(function(e){return e.unused?In(se,e):e.convert_symbol(en,i)}),rest:C.rest&&C.rest.convert_symbol(en,i)}),right:In(a,e,{elements:e.args.slice()})}))}(t,i):function(n,t){for(var i=C.argnames.length,r=e.args.length;--r>=i;)t.push(e.args[r]);var o=[];for(r=i;--r>=0;){var a,s=C.argnames[r];s instanceof j?(o.push(s),a=s.name):a=s;var c=e.args[r];if(a.unused||te.var_names().has(a.name))c&&t.push(c);else{var u=In(AST_SymbolVar,a),l=a.definition();l.orig.push(u),l.eliminated++,void 0!==a.unused?(Ae(n,t,u),c&&t.push(c)):(!c&&s===a&&(ee||"arguments"==a.name&&!xn(C)&&xn(te))&&(c=In(ln,e)),Ae(n,t,u,c))}}for(n.reverse(),t.reverse(),r=o.length;--r>=0;){var p=o[r];if(void 0!==p.name.unused)t.push(p.value);else{var d=In(en,p.name);p.name.definition().references.push(d),t.push(In(f,p,{operator:"=",left:d,right:p.value}))}}}(t,i);var r=function(e,t){var i=[Z,0],r=[],o=[],a=[],s=[],f=[];return C.body.filter(ee?function(n){if(!(n instanceof _e))return!0;var t=In(AST_SymbolVar,ji(n.name)),i=t.definition();return i.fixed=!1,i.orig.push(t),i.eliminated++,Ae(e,o,t,Ut(n,!0)),!1}:function(e){if(!(e instanceof _e))return!0;var n=e.name.definition();return te.functions.set(n.name,n),te.variables.set(n.name,n),te.enclosed.push(n),te.var_names().set(n.name,!0),i.push(e),!1}).forEach(function(e){if(e instanceof pn)for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t],o=ji(i.name),c=i.value;c&&f.length>0&&(f.push(c),c=Un(i,f),f=[]),Ae(r,a,o,c),ee&&(Q.has(o.name)||1==o.definition().orig.length&&C.functions.has(o.name)||s.push(Ni(n,o)))}else e instanceof je&&f.push(e.body)}),[].push.apply(e,r),[].push.apply(t,s),[].push.apply(t,o),[].push.apply(t,a),i}(t,i);i.push(w),t.length&&r.push(In(pn,C,{definitions:t}));return[].splice.apply(te.body,r),C.enclosed.forEach(function(e){te.var_names().has(e.name)||(te.enclosed.push(e),te.var_names().set(e.name,!0))}),i}()).optimize(n);return nt(F,$,S)}}if(n.option("side_effects")&&U&&En(C.body,st)&&(C===t?Jt(C,n):!M&&!I&&!C.rest)&&(!xn(C)||!C.value)&&pi(C,li(n)))return Un(e,me()).optimize(n)}if(n.option("drop_console")&&t instanceof qe){for(var pe=t.expression;pe.expression;)pe=pe.expression;if(pt(pe)&&"console"==pe.name)return In(ln,e).optimize(n)}return n.option("negate_iife")&&F instanceof je&&ut($)?e.negate(n,!0):qt(n,e);function de(e){return In(Ie,e,{expression:In(a,e,{elements:[]}),property:In(xe,e,{value:0})})}function me(n){var t=e.args.slice(),i=M>1||I||C.rest;if((i||Y)&&(t=[In(a,e,{elements:t})]),i){var r=new mn(function(e,n){if(e instanceof j)return In(j,e,{name:e.name.transform(r)||de(e),value:e.value});if(e instanceof L){var t=[];return e.elements.forEach(function(e,n){(e=e.transform(r))&&(t[n]=e)}),Ht(e,t),In(L,e,{elements:t})}if(e instanceof H){var i=[],o=[];return e.properties.forEach(function(n){var t=n.key,a=n.value.transform(r);a?(o.length&&(t instanceof we||(t=Xn(t,n)),o.push(t),t=Un(e,o),o=[]),i.push(In(B,n,{key:t,value:a}))):t instanceof we&&o.push(t)}),o.length&&i.push(In(B,e,{key:Un(e,o),value:de(e)})),In(H,e,{properties:i})}return e instanceof Ke?null:void 0}),o=[];C.argnames.forEach(function(e,n){(e=e.transform(r))&&(o[n]=e)});var s=C.rest&&C.rest.transform(r);s&&(o.length=C.argnames.length),Ht(C,o),t[0]=In(f,e,{operator:"=",left:In(L,C,{elements:o,rest:s}),right:t[0]})}else C.argnames.forEach(function(e){e instanceof j&&t.push(e.value)});return t.push(n||In(ln,e)),t}function ge(){return e.call_only?In(xe,e,{value:0}):In(ln,e)}function be(n){return n?n instanceof Fe?n.value||ge():n instanceof je?e.call_only?n.body:In(un,n,{operator:"void",expression:n.body}):void 0:ge()}function ye(e){for(var n=C.argnames.length;--n>=0;)if(C.argnames[n].definition()===e)return n}function Se(e,n){return e.has(n)||Pn[n]||te.var_names().has(n)}function Ae(n,t,i,r){var o=i.definition();if(te.var_names().has(i.name)||(te.var_names().set(i.name,!0),n.push(In(dn,i,{name:i,value:null}))),te.variables.set(i.name,o),te.enclosed.push(o),r){var a=In(en,i);o.assignments++,o.references.push(a),t.push(In(f,e,{operator:"=",left:a,right:r}))}}}),e(ye,function(e,n){if(n.option("unsafe")){var t=e.expression;if(pt(t))switch(t.name){case"Array":case"Error":case"Function":case"Object":case"RegExp":return In(g,e).transform(n)}}if(n.option("sequences")){var i=ci(e,n);if(i!==e)return i.optimize(n)}return n.option("unused")&&ui(e,n),e}),e(Pe,function(e,n){var t=function(){if(!n.option("side_effects"))return e.expressions;var t=[],i=Sn(n),r=e.expressions.length-1;return e.expressions.forEach(function(e,o){o<r&&(e=e.drop_side_effect_free(n,i)),e&&(it(t,e),i=!1)}),t}(),i=t.length-1;return function(){for(var e=1;e<i;e++){var o=t[e-1],a=r(o);if(a){var s=t[e];if(n.option("conditionals")){var f=hi(n,a,o.right,s);if(f){o.right=f,t.splice(e--,1),i--;continue}}n.option("dead_code")&&r(s)===a&&s.right.is_constant_expression(a.scope.resolve())&&(t[--e]=o.right)}}}(),function(){if(!n.option("side_effects"))return;for(;i>0&&St(t[i],n);)i--;i<t.length-1&&(t[i]=In(un,e,{operator:"void",expression:t[i]}),t.length=i+1)}(),0==i?((e=nt(n.parent(),n.self(),t[0]))instanceof Pe||(e=e.optimize(n)),e):(e.expressions=t,e);function r(e){return e instanceof f&&"="==e.operator&&e.left instanceof en&&e.left.definition()}}),e(cn,function(e,n){if(n.option("sequences")){var t=ci(e,n);if(t!==e)return t.optimize(n)}return qt(n,e)});var _i=$n("+ -"),vi=$n("* / %");e(un,function(e,n){var t=e.operator,i=e.expression;if(n.option("sequences")&&function(){switch(t){case"delete":return!f(i.tail_node());case"typeof":return!pt(i.tail_node());default:return!0}}()){var r=ci(e,n);if(r!==e)return r.optimize(n)}switch(t){case"+":if(!n.option("evaluate"))break;if(!i.is_number(n,!0))break;var o=n.parent();if(o instanceof un&&"delete"==o.operator)break;return i;case"-":if(i instanceof ue&&(i=i.transform(n)),i instanceof xe||i instanceof ue)return e;break;case"!":if(!n.option("booleans"))break;if(i.is_truthy())return Un(e,[i,In(ne,e)]).optimize(n);if(n.in_boolean_context()){if(i instanceof un&&"!"==i.operator)return i.expression;if(i instanceof p){var a=Sn(n);e=(a?At:Tt)(e,i.negate(n,a))}}break;case"delete":if(!n.option("evaluate"))break;if(f(i))break;return Un(e,[i,In(an,e)]).optimize(n);case"typeof":if(!n.option("booleans"))break;if(!n.in_boolean_context())break;we.warn("Boolean expression always true [{start}]",e);var s=[In(an,e)];return i instanceof en&&E(i,n)||s.unshift(i),Un(e,s).optimize(n);case"void":if(!n.option("side_effects"))break;return(i=i.drop_side_effect_free(n))?(e.expression=i,e):In(ln,e).optimize(n)}return n.option("evaluate")&&i instanceof p&&_i[t]&&vi[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(n))?In(p,e,{operator:i.operator,left:In(un,i.left,{operator:t,expression:i.left}),right:i.right}):qt(n,e);function f(e){return e instanceof ue||e instanceof be||e instanceof AST_NewTarget||e instanceof qe||e instanceof en||e instanceof ln}}),e(u,function(e,n){if(!n.option("awaits"))return e;if(n.option("sequences")){var t=ci(e,n);if(t!==e)return t.optimize(n)}if(n.option("side_effects")){var i=e.expression;if(i instanceof u)return i.optimize(n);if(i instanceof un&&i.expression instanceof u)return i.optimize(n);for(var r,o=0,a=e;r=n.parent(o++);a=r){if(xn(r)){if(r.value===a)return i.optimize(n)}else if(r instanceof Fe){var s=!0;do{if(a=r,(r=n.parent(o++))instanceof sn&&(r.bfinally||r.bcatch)!==a){s=!1;break}}while(r&&!(r instanceof $e));if(s)return i.optimize(n)}else if(r instanceof Pe&&r.tail_node()===a)continue;break}}return e}),e(vn,function(e,n){if(!n.option("yields"))return e;if(n.option("sequences")){var t=ci(e,n);if(t!==e)return t.optimize(n)}var i=e.expression;if(e.nested&&"Call"==i.TYPE){var r=i.clone().optimize(n);if("Call"!=r.TYPE)return r}return e}),p.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof qe){if(!(this.left.expression instanceof Pe))return this;var n=this.left.expression.expressions.slice(),t=this.clone();return t.left=t.left.clone(),t.left.expression=n.pop(),n.push(t),Un(this,n)}if(this.left instanceof Pe){var n=this.left.expressions.slice(),t=this.clone();return t.left=n.pop(),n.push(t),Un(this,n)}if(this.right instanceof Pe){if(this.left.has_side_effects(e))return this;for(var i="="==this.operator&&this.left instanceof en,n=this.right.expressions,r=n.length-1,o=0;o<r&&(i||!n[o].has_side_effects(e));o++);if(o==r){n=n.slice();var t=this.clone();return t.right=n.pop(),n.push(t),Un(this,n)}if(o>0){var t=this.clone();return t.right=Un(this.right,n.slice(o)),(n=n.slice(0,o)).push(t),Un(this,n)}}return this});var mi=$n("indexOf lastIndexOf"),gi=$n("== === != !== * & | ^");function bi(e,n){return e instanceof f?!n&&"="==e.operator&&bi(e.right):e instanceof ye?!n:e instanceof Pe?bi(e.tail_node(),n):e instanceof en?!n&&bi(e.fixed_value()):e instanceof a||e instanceof S||e instanceof he||e instanceof Te}function yi(e,n,t){switch(e){case"in":return bi(n)||t&&t.option("unsafe_comps");case"instanceof":return n instanceof en&&(n=n.fixed_value()),i(n)||t&&t.option("unsafe_comps");default:return!0}}function wi(e,n){if(n.is_constant())return!0;if(n instanceof f)return"="!=n.operator||wi(e,n.right);if(n instanceof p)return!xt[n.operator]||wi(e,n.left)&&wi(e,n.right);if(n instanceof g)return is_async(n.expression);if(n instanceof D)return wi(e,n.consequent)&&wi(e,n.alternative);if(n instanceof Pe)return wi(e,n.tail_node());if(n instanceof en){var t=n.fixed_value();return t&&wi(e,t)}return n instanceof nn?!n.tag||Ei(e,n.tag):n instanceof fn||void 0}function Si(e,n){return e instanceof f?Nn(e.left,n)?e:e.left:e instanceof Pe?Si(e.tail_node(),n):e instanceof un&&UNARY_POSTFIX[e.operator]?Nn(e.expression,n)?e:e.expression:e}function xi(e,n){return n instanceof V?xi(e,n.expression):n instanceof Ie?xi(e,n.expression)&&xi(e,n.property):n instanceof Be||!n.has_side_effects(e)}function Ti(e,n){var t=e.right.tail_node();if(t!==e.right){var i=e.right.expressions.slice(0,-1);i.push(t.left),(t=t.clone()).left=Un(e.right,i),e.right=t}e.left=In(p,e,{operator:e.operator,left:e.left,right:t.left,start:e.left.start,end:t.left.end}),e.right=t.right,n?e.left=e.left.transform(n):e.operator==t.left.operator&&Ti(e.left)}function Ai(e,n,t){var r=0,o=e.self();do{if(o===t)return o;if(i(o)&&o.name&&o.name.definition()===n)return o}while(o=e.parent(r++))}function ki(e){var n=e.scope.resolve();return En(e.references,function(e){return n===e.scope.resolve()})}function Ei(e,n){return e.option("unsafe")&&n instanceof V&&"raw"==n.property&&pt(n.expression)&&"String"==n.expression.name}function Di(e){var n=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,t){var i=decode_escape_sequence(t);if("string"==typeof i)return i;n=!0}),!n)return e}function Oi(e,n){return e instanceof en||e.TYPE===n.TYPE}function qi(e,n){var t=!1,i=new gn(function(e){return!!t||(e instanceof en&&jn(e.definition(),n)?t=!0:void 0)}),r=new gn(function(n){if(t)return!0;if(n instanceof he&&n!==e){if(!(n.name||is_async(n)||Tn(n))){var o=r.parent();if(o instanceof g&&o.expression===n)return}return n.walk(i),!0}});return e.walk(r),t}e(p,function(e,n){if(!gi[e.operator]||!e.right.is_constant()||e.left.is_constant()||e.left instanceof p&&Wn[e.left.operator]>=Wn[e.operator]||z(),n.option("sequences")){var t=e.lift_sequences(n);if(t!==e)return t.optimize(n)}if(n.option("assignments")&&xt[e.operator]){var r=Si(e.left,n),o=e.right;if(r instanceof en&&o instanceof f&&"="==o.operator&&r.equals(o.left)){r=r.clone();var a=In(f,e,{operator:"=",left:r,right:In(p,e,{operator:e.operator,left:e.left,right:o.right})});r.fixed&&(r.fixed=function(){return a.right},r.fixed.assigns=[a]);var s=r.definition();return s.references.push(r),s.replaced++,a.optimize(n)}}if(n.option("comparisons"))switch(e.operator){case"===":case"!==":if(St(e.left,n)&&e.right.is_defined(n))return we.warn("Expression always defined [{start}]",e),Un(e,[e.right,In("==="==e.operator?ne:an,e)]).optimize(n);var c=!0;(e.left.is_string(n)&&e.right.is_string(n)||e.left.is_number(n)&&e.right.is_number(n)||e.left.is_boolean(n)&&e.right.is_boolean(n)||xi(n,e.left)&&e.left.equals(e.right))&&(e.operator=e.operator.slice(0,2));case"==":case"!=":if(!c&&St(e.left,n))e.left=In(Se,e.left);else if(n.option("typeofs")&&e.left instanceof Ne&&"undefined"==e.left.value&&e.right instanceof un&&"typeof"==e.right.operator){var u=e.right.expression;(u instanceof en?!u.is_declared(n):u instanceof qe&&n.option("ie"))||(e.right=u,e.left=In(ln,e.left).optimize(n),2==e.operator.length&&(e.operator+="="))}else if(e.left instanceof en&&e.right instanceof en&&e.left.definition()===e.right.definition()&&bi(e.left))return In("="==e.operator[0]?an:ne,e).optimize(n);break;case"&&":case"||":var l=e.left;if(!(l instanceof p))break;if(l.operator!=("&&"==e.operator?"!==":"==="))break;if(!(e.right instanceof p))break;if(l.operator!=e.right.operator)break;if(St(l.left,n)&&e.right.left instanceof Se||l.left instanceof Se&&St(e.right.left,n)){var u=l.right;if(u instanceof f&&"="==u.operator&&(u=u.left),u.has_side_effects(n))break;if(!u.equals(e.right.right))break;return l.operator=l.operator.slice(0,-1),l.left=In(Se,e),l}}var d=!1,h=n.parent();if(n.option("booleans")){var r=Si(e.left,n);if(xt[e.operator]&&!r.has_side_effects(n)){if(r.equals(e.right))return nt(h,n.self(),e.left).optimize(n);ni(n,r)}d=n.in_boolean_context()}if(d)switch(e.operator){case"+":var _=e.left.evaluate(n,!0);if(_&&"string"==typeof _||(_=e.right.evaluate(n,!0))&&"string"==typeof _){we.warn("+ in boolean context always true [{start}]",e);var v=[];if(e.left.evaluate(n)instanceof we&&v.push(e.left),e.right.evaluate(n)instanceof we&&v.push(e.right),v.length<2)return v.push(In(an,e)),Un(e,v).optimize(n);e.truthy=!0}break;case"==":if(e.left instanceof Ne&&""==e.left.value&&e.right.is_string(n))return In(un,e,{operator:"!",expression:e.right}).optimize(n);break;case"!=":if(e.left instanceof Ne&&""==e.left.value&&e.right.is_string(n))return e.right.optimize(n)}if(n.option("comparisons")&&e.is_boolean(n)){if("Binary"!=h.TYPE){var m=In(un,e,{operator:"!",expression:e.negate(n)});if(kt(n,e,m)===m)return m}switch(e.operator){case">":z("<");break;case">=":z("<=")}}if(n.option("conditionals")&&xt[e.operator]){if(e.left instanceof p&&e.operator==e.left.operator){var g=In(p,e,{operator:e.operator,left:e.left.right,right:e.right}),b=g.transform(n);g!==b&&(e.left=e.left.left,e.right=b)}var y=e.right.tail_node();y instanceof p&&e.operator==y.operator&&Ti(e,n)}if(n.option("strings")&&"+"==e.operator){if(e.right instanceof Ne&&""==e.right.value&&e.left.is_string(n))return e.left.optimize(n);if(e.left instanceof Ne&&""==e.left.value&&e.right.is_string(n))return e.right.optimize(n);if(e.left instanceof p&&"+"==e.left.operator&&e.left.left instanceof Ne&&""==e.left.left.value&&e.right.is_string(n)&&(e.left.right.is_constant()||!e.right.has_side_effects(n)))return e.left=e.left.right,e.optimize(n);var y=e.right.tail_node();y instanceof p&&e.operator==y.operator&&(e.left.is_string(n)&&y.is_string(n)||y.left.is_string(n)&&(e.left.is_constant()||!y.right.has_side_effects(n)))&&Ti(e,n)}if(n.option("evaluate")){var w=!0;switch(e.operator){case"&&":var S=ei(n,e.left);if(!S)return we.warn("Condition left of && always false [{start}]",e),nt(h,n.self(),e.left).optimize(n);if(!(S instanceof we))return we.warn("Condition left of && always true [{start}]",e),Un(e,[e.left,e.right]).optimize(n);if(e.right.evaluate(n,!0)){if((d||"&&"==h.operator&&h.left===n.self())&&!(e.right.evaluate(n)instanceof we))return we.warn("Dropping side-effect-free && [{start}]",e),e.left.optimize(n)}else{if(d&&!(e.right.evaluate(n)instanceof we))return we.warn("Boolean && always false [{start}]",e),Un(e,[e.left,In(ne,e)]).optimize(n);e.falsy=!0}if("||"==e.left.operator){var x=ei(n,e.left.right);if(!x)return In(D,e,{condition:e.left.left,consequent:e.right,alternative:e.left.right}).optimize(n)}break;case"??":var T=!0;case"||":var A,S=ei(n,e.left,T);if(T?null==S:!S)return we.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:T?"nullish":"false",start:e.start}),Un(e,[e.left,e.right]).optimize(n);if(!(S instanceof we))return we.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:T?"defined":"true",start:e.start}),nt(h,n.self(),e.left).optimize(n);if(T||!(A=e.right.evaluate(n,!0))||A instanceof we){if((d||"||"==h.operator&&h.left===n.self())&&!e.right.evaluate(n))return we.warn("Dropping side-effect-free {operator} [{start}]",e),e.left.optimize(n)}else{if(d&&!(e.right.evaluate(n)instanceof we))return we.warn("Boolean || always true [{start}]",e),Un(e,[e.left,In(an,e)]).optimize(n);e.truthy=!0}if(!T&&"&&"==e.left.operator){var x=ei(n,e.left.right);if(x&&!(x instanceof we))return In(D,e,{condition:e.left.left,consequent:e.left.right,alternative:e.right}).optimize(n)}break;case"+":if(e.left instanceof q&&e.right instanceof p&&"+"==e.right.operator&&e.right.left instanceof q&&e.right.is_string(n)&&(e=In(p,e,{operator:"+",left:In(Ne,e.left,{value:""+e.left.value+e.right.left.value,start:e.left.start,end:e.right.left.end}),right:e.right.right})),e.right instanceof q&&e.left instanceof p&&"+"==e.left.operator&&e.left.right instanceof q&&e.left.is_string(n)&&(e=In(p,e,{operator:"+",left:e.left.left,right:In(Ne,e.right,{value:""+e.left.right.value+e.right.value,start:e.left.right.start,end:e.right.end})})),e.right instanceof un&&"-"==e.right.operator&&e.left.is_number(n)){e=In(p,e,{operator:"-",left:e.left,right:e.right.expression});break}if(e.left instanceof un&&"-"==e.left.operator&&j()&&e.right.is_number(n)){e=In(p,e,{operator:"-",left:e.right,right:e.left.expression});break}if(n.option("unsafe_math")&&e.left instanceof p&&Wn[e.left.operator]==Wn[e.operator]&&e.right.is_constant()&&(e.right.is_boolean(n)||e.right.is_number(n))&&e.left.is_number(n)&&!e.left.right.is_constant()&&(e.left.left.is_boolean(n)||e.left.left.is_number(n))){e=In(p,e,{operator:e.left.operator,left:In(p,e,{operator:e.operator,left:e.right,right:e.left.left}),right:e.left.right});break}case"-":if(e.right instanceof un&&"-"==e.right.operator&&e.left.is_number(n)&&e.right.expression.is_number(n)){e=In(p,e,{operator:"+",left:e.left,right:e.right.expression});break}case"*":case"/":w=n.option("unsafe_math"),"+"!=e.operator&&["left","right"].forEach(function(t){var i=e[t];if(i instanceof un&&"+"==i.operator){var r=i.expression;(r.is_boolean(n)||r.is_number(n)||r.is_string(n))&&(e[t]=r)}});case"&":case"|":case"^":if("-"==e.operator||"/"==e.operator||!e.left.is_boolean(n)&&!e.left.is_number(n)||!e.right.is_boolean(n)&&!e.right.is_number(n)||!j()||e.left instanceof p&&e.left.operator!=e.operator&&Wn[e.left.operator]>=Wn[e.operator]||(e=kt(n,e,In(p,e,{operator:e.operator,left:e.right,right:e.left}),e.right instanceof q&&!(e.left instanceof q))),!w||!e.is_number(n))break;if(!(e.right instanceof p&&"%"!=e.right.operator&&Wn[e.right.operator]==Wn[e.operator]&&e.right.is_number(n)&&("+"!=e.operator||e.right.left.is_boolean(n)||e.right.left.is_number(n)))||"-"==e.operator&&e.left.is_negative_zero()||!e.right.left.is_constant_expression()&&e.right.right.has_side_effects(n)||function(e){var n=!1;return e.walk(new gn(function(e){if(n)return!0;if(e instanceof f){if(e.left instanceof qe)return n=!0}else if(e instanceof fn&&unary_side_effects[e.operator]&&e.expression instanceof qe)return n=!0})),n}(e.right.right)||"+"!=(e=In(p,e,{operator:F(e.operator,e.right.operator),left:In(p,e.left,{operator:e.operator,left:e.left,right:e.right.left,start:e.left.start,end:e.right.left.end}),right:e.right.right})).operator||e.right.is_boolean(n)||e.right.is_number(n)||(e.right=In(un,e.right,{operator:"+",expression:e.right})),e.right instanceof q&&e.left instanceof p&&"%"!=e.left.operator&&Wn[e.left.operator]==Wn[e.operator]&&e.left.is_number(n))if(e.left.left instanceof q){var r=$(e.operator,e.left.left,e.right,{start:e.left.left.start,end:e.right.end});e=$(e.left.operator,qt(n,r),e.left.right,e)}else if(e.left.right instanceof q){var k=F(e.left.operator,e.operator),y=qt(n,$(k,e.left.right,e.right,e.left));!y.is_constant()||"-"==e.left.operator&&0!=e.right.value&&0==+y.value&&e.left.left.is_negative_zero()||(e=$(e.left.operator,e.left.left,y,e))}break;case"instanceof":if(i(e.right))return Un(e,[e,In(ne,e)]).optimize(n)}if(!(h instanceof un&&"delete"==h.operator)){if(e.left instanceof xe&&!e.right.is_constant())switch(e.operator){case"+":if(0==e.left.value){if(e.right.is_boolean(n))return In(un,e,{operator:"+",expression:e.right}).optimize(n);if(e.right.is_number(n)&&!e.right.is_negative_zero())return e.right}break;case"*":if(1==e.left.value)return In(un,e,{operator:"+",expression:e.right}).optimize(n)}if(e.right instanceof xe&&!e.left.is_constant())switch(e.operator){case"+":if(0==e.right.value){if(e.left.is_boolean(n))return In(un,e,{operator:"+",expression:e.left}).optimize(n);if(e.left.is_number(n)&&!e.left.is_negative_zero())return e.left}break;case"-":if(0==e.right.value)return In(un,e,{operator:"+",expression:e.left}).optimize(n);break;case"/":if(1==e.right.value)return In(un,e,{operator:"+",expression:e.left}).optimize(n)}}}if(n.option("typeofs"))switch(e.operator){case"&&":Zt(e.left,e.right,null);break;case"||":Zt(e.left,null,e.right)}if(n.option("unsafe")){var E=P(e.right);if(d&&E&&("=="==e.operator||"!="==e.operator)&&e.left instanceof xe&&0==e.left.value)return("=="==e.operator?In(un,e,{operator:"!",expression:e.right}):e.right).optimize(n);var O=P(e.left);if(n.option("comparisons")&&function(){switch(e.operator){case"<=":return E&&e.left instanceof xe&&0==e.left.value;case"<":if(O&&e.right instanceof xe&&0==e.right.value)return!0;case"==":case"!=":return!!E&&(e.left instanceof xe&&-1==e.left.value||e.left instanceof un&&"-"==e.left.operator&&e.left.expression instanceof xe&&1==e.left.expression.value)}}()){var C=In(un,e,{operator:"!",expression:In(un,e,{operator:"~",expression:O?e.left:e.right})});switch(e.operator){case"<":if(O)break;case"<=":case"!=":C=In(un,e,{operator:"!",expression:C})}return C.optimize(n)}}return qt(n,e);function F(e,n){switch(e){case"-":return"+"==n?"-":"+";case"/":return"*"==n?"/":"*";default:return n}}function $(e,t,i,r){return"+"==e&&(t.is_boolean(n)||t.is_number(n)||(t=In(un,t,{operator:"+",expression:t})),i.is_boolean(n)||i.is_number(n)||(i=In(un,i,{operator:"+",expression:i}))),In(p,r,{operator:e,left:t,right:i})}function P(e){return"Call"==e.TYPE&&e.expression instanceof V&&mi[e.expression.property]}function j(){return e.left.is_constant()||e.right.is_constant()||!e.left.has_side_effects(n)&&!e.right.has_side_effects(n)}function z(n){if(j()){n&&(e.operator=n);var t=e.left;e.left=e.right,e.right=t}}}),e(We,function(e){return e}),e(en,function(e,n){if(!n.option("ie")&&pt(e)&&(!e.scope.resolve().uses_with||!n.find_parent(_n)))switch(e.name){case"undefined":return In(ln,e).optimize(n);case"NaN":return In(be,e).optimize(n);case"Infinity":return In(ue,e).optimize(n)}var t=n.parent();if(n.option("reduce_vars")&&Qn(n.self(),t)!==n.self()){var r,o,a,s=e.definition(),f=e.fixed_value(),c=s.single_use&&!(t instanceof g&&t.is_expr_pure(n));if(c)if(i(f)){if(s.scope===e.scope.resolve(!0)&&!s.in_loop||n.option("reduce_funcs")&&1!=s.escaped.depth&&!f.inlined)if(s.redefined())c=!1;else if(Ai(n,s,f))c=!1;else if(f.name&&f.name.definition()!==s)c=!1;else if(f.parent_scope!==e.scope||is_funarg(s))if(di(f,n)){if("f"==(c=f.is_constant_expression(e.scope))){var u=e.scope;do{(u instanceof _e||u instanceof ve)&&(u.inlined=!0)}while(u=u.parent_scope)}}else c=!1;else f.name&&("await"==f.name.name&&is_async(f)||"yield"==f.name.name&&Tn(f))?c=!1:f.has_side_effects(n)?c=!1:n.option("ie")&&f instanceof S&&(c=!1);else c=!1;c&&(f.parent_scope=e.scope)}else(!f||s.recursive_refs>0||!f.is_constant_expression()||f.drop_side_effect_free(n))&&(c=!1);if(c){if(s.single_use=!1,f._squeezed=!0,f.single_use=!0,f instanceof z&&(f=Yt(f)),f instanceof _e&&(f=Ut(f)),i(f)){var l=[],u=e.scope;do{if(l.push(u),u===s.scope)break}while(u=u.parent_scope);f.enclosed.forEach(function(e){if(!f.variables.has(e.name))for(var n=0;n<l.length;n++){var t=l[n];if(!Mn(t.enclosed,e))return;t.var_names().set(e.name,!0)}})}if(s.recursive_refs>0){var p,d,h=(w=f.clone(!0)).name.definition(),_=w.variables.get(w.name.name),v=_&&_.orig[0];w instanceof S?(p="def_function",d=AST_SymbolClass):(p="def_variable",d=Xe),v instanceof d||((v=In(d,w.name)).scope=w,w.name=v,(_=w[p](v)).recursive_refs=s.recursive_refs),w.walk(new gn(function(e){if(e instanceof Ve){if(e!==v){var n=e.definition();n.orig.push(e),n.eliminated++}}else if(e instanceof en){var n=e.definition();if(n===h)e.thedef=n=_;else{n.single_use=!1;var t=e.fixed_value();i(t)&&t.name&&t.name.definition()===n&&n.scope===t.name.scope&&f.variables.get(t.name.name)===n&&(t.name=t.name.clone(),e.thedef=n=w.variables.get(t.name.name)||w[p](t.name))}n.references.push(e)}}))}else f instanceof $e?(n.push(f),w=f.optimize(n),n.pop()):w=f.optimize(n),w=w.transform(new mn(function(e,n){return e instanceof $e?e:(e=e.clone(),n(e,this),e)}));return s.replaced++,w}if(f&&!1!==(r=e.fixed||s.fixed).should_replace)if(f instanceof rn?is_funarg(s)||!ki(s)||function(n){var t=e.scope;for(;t!==n.scope;){if(t instanceof S)return!0;t=t.parent_scope}}(s)||(a=f):(o=f.evaluate(n,!0))!==f&&"function"!=typeof o&&(null===o||"object"!=typeof o||n.option("unsafe_regexp")&&o instanceof RegExp&&!s.cross_loop&&ki(s))&&(a=Xn(o,f)),a){if(void 0===r.should_replace){var m=a.optimize(n).print_to_string().length;x(f)||(m=Math.min(m,f.print_to_string().length));var b=s.name.length;if(n.option("unused")&&!n.exposed(s)){var y=s.references.length-s.replaced-s.assignments;y=Math.min(y,s.references.filter(function(e){return e.fixed===r}).length),b+=(b+2+m)/Math.max(1,y)}r.should_replace=m-Math.floor(b)<n.eval_threshold}var w;if(r.should_replace)return x(f)?(w=a.optimize(n))===a&&(w=w.clone(!0)):(w=Tt(a.optimize(n),f))!==a&&w!==f||(w=w.clone(!0)),s.replaced++,w}}return e;function x(e){var n;return e.walk(new gn(function(e){if(e instanceof en&&(n=!0),n)return!0})),n}}),e(nn,function(e,n){if(!n.option("templates"))return e;var t=e.tag;if(!t||Ei(n,t)){for(var i,r=[],o=[],a=0;a<e.strings.length;a++){var s=e.strings[a];if(!t){var f=Di(s);f&&(s=v(f))}if(a>0){var c=e.expressions[a-1],u=m(c);if(u){var l,d=o[o.length-1],h=d+u+s;if(t||typeof(l=Di(h))==i){o[o.length-1]=l?v(l):h;continue}}r.push(c)}o.push(s),t||(i=typeof f)}if(!t&&o.length>1){if(""==o[o.length-1])return In(p,e,{operator:"+",left:In(nn,e,{expressions:r.slice(0,-1),strings:o.slice(0,-1)}).transform(n),right:r[r.length-1]}).optimize(n);if(""==o[0]){for(var _=In(p,e,{operator:"+",left:In(Ne,e,{value:""}),right:r[0]}),a=1;""==o[a]&&a<r.length;a++)_=In(p,e,{operator:"+",left:_,right:r[a]});return kt(n,e,In(p,e,{operator:"+",left:_.transform(n),right:In(nn,e,{expressions:r.slice(a),strings:o.slice(a)}).transform(n)}).optimize(n))}}e.expressions=r,e.strings=o}return qt(n,e);function v(e){return e.replace(/\r|\\|`|\${/g,function(e){return"\\"+("\r"==e?"r":e)})}function m(e){var i=e.evaluate(n);if(i!==e&&!(t&&/\r|\\|`/.test(i)||(i=v(""+i)).length>e.print_to_string().length+"${}".length))return i}}),e(ln,function(e,n){if(n.option("unsafe_undefined")){var t=qn(n).find_variable("undefined");if(t){var i=In(en,e,{name:"undefined",scope:t.scope,thedef:t});return i.is_undefined=!0,i}}var r=Qn(n.self(),n.parent());return r&&Oi(r,e)?e:In(un,e,{operator:"void",expression:In(xe,e,{value:0})})}),e(ue,function(e,n){var t=Qn(n.self(),n.parent());return t&&Oi(t,e)?e:!n.option("keep_infinity")||t||qn(n).find_variable("Infinity")?In(p,e,{operator:"/",left:In(xe,e,{value:1}),right:In(xe,e,{value:0})}):e}),e(be,function(e,n){var t=Qn(n.self(),n.parent());return t&&Oi(t,e)?e:t||qn(n).find_variable("NaN")?In(p,e,{operator:"/",left:In(xe,e,{value:0}),right:In(xe,e,{value:0})}):e});var Ci=$n("+ - * / % >> << >>> | ^ &"),Fi=$n("* | ^ &");function $i(e,n){if(!e)return!1;var t=n.parent();return"Call"!=t.TYPE||(t.expression!==n.self()||!(e instanceof en&&!(e=e.fixed_value()))&&(e instanceof he&&!e.contains_this()))}function Pi(e){return e instanceof Ae&&"string"==typeof e.key&&!(e instanceof De&&e.value.contains_super())}function ji(e){var n=e.definition().redefined();return n&&((e=e.clone()).thedef=n),e}function zi(e,n){var t=!1;return n.walk(new gn(function(n){return!!t||(n instanceof en&&e.variables.get(n.name)===n.definition()?t=!0:void 0)})),t}function Mi(e,n){var t=[];e.references.forEach(function(e){var i=e.fixed;i&&Mn(t,i)&&(i.assigns?i.assigns.unshift(n):i.assigns=[n])})}function Ni(e,n){var t=In(en,n),i=In(f,n,{operator:"=",left:t,right:In(ln,n).transform(e)}),r=n.definition();return r.fixed&&(t.fixed=function(){return i.right},t.fixed.assigns=[i],Mi(r,i)),r.assignments++,r.references.push(t),i}e(f,function(e,n){if(n.option("dead_code"))if(e.left instanceof qe){if("="==e.operator){if(e.redundant){var t=[e.left.expression];return e.left instanceof Ie&&t.push(e.left.property),t.push(e.right),Un(e,t).optimize(n)}if(e.left.equals(e.right)&&!e.left.has_side_effects(n))return e.right;var i=e.left.expression;if(i instanceof he||!n.has_directive("use strict")&&i instanceof q&&!i.may_throw_on_access(n))return e.left instanceof V?e.right:Un(e,[e.left.property,e.right]).optimize(n)}}else if(e.left instanceof en&&E(e.left,n)){var r;if("="==e.operator&&e.left.equals(e.right)&&!((r=n.parent())instanceof un&&"delete"==r.operator))return e.right;if(e.left.is_immutable())return w();var o,a=e.left.definition(),s=a.scope.resolve(),c=s===n.find_parent(he),u=0;if(r=n.self(),!s.uses_arguments||!is_funarg(a)||n.has_directive("use strict"))do{if(o=r,(r=n.parent(u++))instanceof f){if(r.left instanceof en&&r.left.definition()===a){if(g(u,r,!c))break;return w(a)}if(r.left.match_symbol(function(e){if(e instanceof qe)return!0}))break}else{if(r instanceof K){if(!c)break;if(g(u,r))break;if(qi(s,[a]))break;return w(a)}if(r instanceof je){if(!c)break;if(qi(s,[a]))break;var l;do{if(l=r,(r=n.parent(u++))===s&&gt(r.body,l))return w(a)}while(m(l,r));break}if(r instanceof dn){if(!(r.name instanceof Ve))continue;if(r.name.definition()!==a)continue;if(g(u,r))break;return w(a)}}}while(v(o,r))}if(n.option("sequences")){var d=e.lift_sequences(n);if(d!==e)return d.optimize(n)}if(n.option("assignments")){if("="==e.operator&&e.left instanceof en&&e.right instanceof p){if(e.right.left instanceof en&&e.right.left.name==e.left.name&&Ci[e.right.operator])return b(e.right.right);if(e.right.right instanceof en&&e.right.right.name==e.left.name&&Fi[e.right.operator]&&!e.right.left.has_side_effects(n))return b(e.right.left)}if(("-="==e.operator||"+="==e.operator&&(e.left.is_boolean(n)||e.left.is_number(n)))&&e.right instanceof xe&&1==e.right.value){var h=e.operator.slice(0,-1);return In(un,e,{operator:h+h,expression:e.left})}}return qt(n,e);function v(e,n){if(n instanceof p)switch(e){case n.left:return n.right.is_constant_expression(s);case n.right:return!0;default:return!1}if(n instanceof D)switch(e){case n.condition:return n.consequent.is_constant_expression(s)&&n.alternative.is_constant_expression(s);case n.consequent:case n.alternative:return!0;default:return!1}if(n instanceof Pe){var t=n.expressions,i=t.indexOf(e);if(i<0)return!1;for(var r=t.length;--r>i;)if(!t[r].is_constant_expression(s))return!1;return!0}return n instanceof un}function m(e,n){return n instanceof _?gt(n.body,e):n instanceof y?gt(n.body,e):n instanceof te?gt(n.body,e):n instanceof fe?n.body===e||n.alternative===e:n instanceof sn?n.bfinally?n.bfinally===e:n.bcatch===e:void 0}function g(t,i,r){var o=e.right;e.right=In(Se,o);var a=i.may_throw(n);return e.right=o,Fn(n,t,i,s,a,r)}function b(n){var t=e.left.fixed;return t&&(t.to_binary=J(function(e){return e.left},t)),In(f,e,{operator:e.right.operator+"=",left:e.left,right:n})}function w(t){return t&&(t.fixed=!1),("="!=e.operator?In(p,e,{operator:e.operator.slice(0,-1),left:e.left,right:e.right}):nt(n.parent(),e,e.right)).optimize(n)}}),e(D,function(e,n){if(n.option("sequences")&&e.condition instanceof Pe){var t=e.condition.expressions.slice(),i=e.clone();return i.condition=t.pop(),t.push(i),Un(e,t).optimize(n)}if(!n.option("conditionals"))return e;var r=e.condition;if(n.option("booleans")&&!r.has_side_effects(n)&&ni(n,r),!(r=ei(n,r)))return we.warn("Condition always false [{start}]",e),Un(e,[e.condition,e.alternative]).optimize(n);if(!(r instanceof we))return we.warn("Condition always true [{start}]",e),Un(e,[e.condition,e.consequent]).optimize(n);var o=Sn(n),a=r.negate(n,o);(o?At:Tt)(r,a)===a&&(e=In(D,e,{condition:a,consequent:e.alternative,alternative:e.consequent}),a=r,r=e.condition);var s=e.consequent,c=e.alternative,u=Si(r,n);if(xi(n,u)){if(u.equals(s))return In(p,e,{operator:"||",left:r,right:c}).optimize(n);if(u.equals(c))return In(p,e,{operator:"&&",left:r,right:s}).optimize(n)}var l=s.tail_node();if(l instanceof f){var d="="==l.operator,h=d?c.tail_node():c;if((d||s===l)&&h instanceof f&&l.operator==h.operator&&l.left.equals(h.left)&&(d&&l.left instanceof en||!r.has_side_effects(n)&&A(s)&&A(c)))return In(f,e,{operator:l.operator,left:l.left,right:In(D,e,{condition:r,consequent:k(s),alternative:k(c)})})}var h=c.tail_node();if(l.equals(h))return Un(e,s.equals(c)?[r,s]:[In(D,e,{condition:r,consequent:E(s),alternative:E(c)}),h]).optimize(n);var _,v=function n(t,i,o){var a=t.tail_node();var s=i.tail_node();if(!function e(n,t){if(n.TYPE!=t.TYPE)return;if(n.optional!=t.optional)return;if(n instanceof g){if(-1!=x(n,t))return;return"Call"!=n.TYPE||!(n.expression instanceof qe||t.expression instanceof qe)||e(n.expression,t.expression)}if(!(n instanceof qe))return;var i=n.property;var r=t.property;return(i instanceof we?i.equals(r):i==r)&&!(n.expression instanceof AST_Super||t.expression instanceof AST_Super)}(a,s))return!o&&In(D,e,{condition:r,consequent:t,alternative:i});var f=a.clone();var c=T(t,a,"expression");var u=T(i,s,"expression");var l=n(c,u);a.expression instanceof Pe&&(l=nt(a,a.expression,l));f.expression=l;return f}(s,c,!0);if(v)return v;if(s instanceof g&&c.TYPE==s.TYPE&&(_=x(s,c))>=0&&s.expression.equals(c.expression)&&!r.has_side_effects(n)&&!s.expression.has_side_effects(n)){var i=s.clone(),m=s.args[_];return i.args[_]=m instanceof ze?In(ze,e,{expression:In(D,e,{condition:r,consequent:m.expression,alternative:c.args[_].expression})}):In(D,e,{condition:r,consequent:m,alternative:c.args[_]}),i}if(l instanceof D&&l.alternative.equals(c))return In(D,e,{condition:In(p,e,{left:r,operator:"&&",right:T(s,l,"condition")}),consequent:l.consequent,alternative:tt(l.alternative,c)});if(l instanceof D&&l.consequent.equals(c))return In(D,e,{condition:In(p,e,{left:a,operator:"||",right:T(s,l,"condition")}),consequent:tt(l.consequent,c),alternative:l.alternative});if(h instanceof D&&s.equals(h.consequent))return In(D,e,{condition:In(p,e,{left:r,operator:"||",right:T(c,h,"condition")}),consequent:tt(s,h.consequent),alternative:h.alternative});if(h instanceof D&&s.equals(h.alternative))return In(D,e,{condition:In(p,e,{left:a,operator:"&&",right:T(c,h,"condition")}),consequent:h.consequent,alternative:tt(s,h.alternative)});if(l instanceof p&&"&&"==l.operator&&l.right.equals(c))return In(p,e,{operator:"&&",left:In(p,e,{operator:"||",left:a,right:T(s,l,"left")}),right:tt(l.right,c)}).optimize(n);if(l instanceof p&&"||"==l.operator&&l.right.equals(c))return In(p,e,{operator:"||",left:In(p,e,{operator:"&&",left:r,right:T(s,l,"left")}),right:tt(l.right,c)}).optimize(n);if(h instanceof p&&"&&"==h.operator&&h.right.equals(s))return In(p,e,{operator:"&&",left:In(p,e,{operator:"||",left:r,right:T(c,h,"left")}),right:tt(s,h.right)}).optimize(n);if(h instanceof p&&"||"==h.operator&&h.right.equals(s))return In(p,e,{operator:"||",left:In(p,e,{operator:"&&",left:a,right:T(c,h,"left")}),right:tt(s,h.right)}).optimize(n);var b=n.option("booleans")&&n.in_boolean_context();return w(s)?S(c)?y(r):In(p,e,{operator:"||",left:y(r),right:c}).optimize(n):S(s)?w(c)?y(r.negate(n)):In(p,e,{operator:"&&",left:y(r.negate(n)),right:c}).optimize(n):w(c)?In(p,e,{operator:"||",left:y(r.negate(n)),right:s}).optimize(n):S(c)?In(p,e,{operator:"&&",left:y(r),right:s}).optimize(n):(n.option("typeofs")&&Zt(r,s,c),e);function y(e){return e.is_boolean(n)?e:In(un,e,{operator:"!",expression:e.negate(n)})}function w(e){return e instanceof an||b&&e instanceof q&&e.value||e instanceof un&&"!"==e.operator&&e.expression instanceof q&&!e.expression.value}function S(e){return e instanceof ne||b&&(e instanceof q&&!e.value||e instanceof un&&"void"==e.operator&&!e.expression.has_side_effects(n))||e instanceof un&&"!"==e.operator&&e.expression instanceof q&&e.expression.value}function x(e,n){var t=e.args,i=n.args,r=t.length;if(r!=i.length)return-2;for(var o=0;o<r;o++)if(!t[o].equals(i[o])){if(t[o]instanceof ze!=i[o]instanceof ze)return-3;for(var a=o+1;a<r;a++)if(!t[a].equals(i[a]))return-2;return o}return-1}function T(e,n,t){if(e===n)return n[t];var i=e.expressions.slice(0,-1);return i.push(n[t]),Un(e,i)}function A(e){return e===e.tail_node()||En(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(n)})}function k(e){if(!(e instanceof Pe))return e.right;var n=e.expressions.slice();return n.push(n.pop().right),Un(e,n)}function E(e){return e instanceof Pe?Un(e,e.expressions.slice(0,-1)):In(xe,e,{value:0})}}),e(v,function(e,n){if(!n.option("booleans"))return e;if(n.in_boolean_context())return In(xe,e,{value:+e.value});var t=n.parent();return t instanceof p&&("=="==t.operator||"!="==t.operator)?(we.warn("Non-strict equality against boolean: {operator} {value} [{start}]",{operator:t.operator,value:e.value,start:t.start}),In(xe,e,{value:+e.value})):In(un,e,{operator:"!",expression:In(xe,e,{value:1-e.value})})}),e(ze,function(e,n){var t=e.expression;return n.option("spreads")&&t instanceof a&&!(n.parent()instanceof Te)?List.splice(t.elements.map(function(e){return e instanceof se?In(ln,e).optimize(n):e})):e}),e(Ie,function(e,n){var t=e.expression,i=e.property,r=fi(e,n);if(r)return r;if(n.option("properties")){var s=i.evaluate(n);if(s!==i){if("string"==typeof s)if("undefined"==s)s=void 0;else{var f=parseFloat(s);f.toString()==s&&(s=f)}i=e.property=Tt(i,Xn(s,i).transform(n));var c=""+s;if(Kn(c)&&c.length<=i.print_to_string().length+1)return In(V,e,{optional:e.optional,expression:t,property:c,quoted:!0}).optimize(n)}}var u,l,p,d,h=n.parent(),_=Qn(n.self(),h);if(n.option("arguments")&&t instanceof en&&w(u=t.definition())&&!t.in_arg&&i instanceof xe&&Math.floor(x=i.value)==x&&(l=u.scope)===function(){var e,t=0;for(;e=n.parent(t++);)if(e instanceof he){if(e instanceof o)return;if(xn(e))continue;return p=n.parent(t),e}}()&&l.uses_arguments<(_?2:3)){h instanceof un&&"delete"==h.operator&&(u.deleted||(u.deleted=[]),u.deleted[x]=!0);var v=l.argnames[x];if(u.deleted&&u.deleted[x])v=null;else if(v){var m;v instanceof Ke&&"await"!=v.name&&t.scope.find_variable(v.name)===(m=v.definition())?(n.has_directive("use strict")||l.name||l.rest||!(p instanceof g&&x<p.args.length&&En(p.args.slice(0,x+1),function(e){return!(e instanceof ze)}))||!En(l.argnames,function(e){return e instanceof Ke}))&&(O()||m.assignments||m.orig.length>1)&&(v=null):v=null}else if((_||!O())&&x<l.argnames.length+5&&n.drop_fargs(l,p)&&!l.rest)for(;x>=l.argnames.length;)v=l.make_var(Ke,l,"argument_"+l.argnames.length),l.argnames.push(v);if(v&&find_if(function(e){return e.name===v.name},l.argnames)===v){_&&u.reassigned--;var b=In(en,v);return b.reference(),v.unused=void 0,b}}if(_)return e;if(n.option("sequences")&&"Call"!=h.TYPE&&!(h instanceof re&&h.init===e)){var y=ci(e,n);if(y!==e)return y.optimize(n)}if(s!==i){var S=e.flatten_object(c,n);S&&(t=e.expression=S.expression,i=e.property=S.property)}if(n.option("properties")&&n.option("side_effects")&&i instanceof xe&&t instanceof a&&En(d=t.elements,function(e){return!(e instanceof ze)})){var x=i.value,T=d[x];if($i(T,n)){for(var A=T instanceof se,k=!A,E=[],D=d.length;--D>x;){var f=d[D].drop_side_effect_free(n);f&&(E.unshift(f),k&&f.has_side_effects(n)&&(k=!1))}for(k||E.unshift(T);--D>=0;){var f=d[D].drop_side_effect_free(n);f?E.unshift(f):A?E.unshift(In(se,d[D])):x--}return k?(E.push(T),Un(e,E).optimize(n)):In(Ie,e,{expression:In(a,t,{elements:E}),property:In(xe,i,{value:x})})}}return qt(n,e);function O(){return!n.option("reduce_vars")||u.reassigned}}),ve.DEFMETHOD("contains_super",function(){var e=!1,n=this;return n.walk(new gn(function(t){return!!e||(t instanceof AST_Super?e=!0:t!==n&&t instanceof $e&&!xn(t)||void 0)})),e}),function(e){e(s,Ln),e(c,Ln),e(we,function(){var e=!1,n=this;return n.walk(new gn(function(t){return!!e||(t instanceof rn?e=!0:t!==n&&t instanceof $e&&!xn(t)||void 0)})),e})}(function(e,n){e.DEFMETHOD("contains_this",n)}),qe.DEFMETHOD("flatten_object",function(e,n){if(n.option("properties")&&"__proto__"!==e){var t=this.expression;if(t instanceof Te)for(var i=t.properties,r=i.length;--r>=0;){var o=i[r];if(o.key===e){if(!En(i,Pi))return;if(!$i(o.value,n))return;for(var f,u,l=[],p=0;p<i.length;p++){var d=i[p].value;if(i[p]instanceof De){var h,_=!(d.uses_arguments||Tn(d)||d.contains_this());if(_){u||(u=n.find_parent($e));var v=li(n,u);d.each_argname(function(e){v[e.name]&&(_=!1)})}if(_)h=is_async(d)?c:s;else{if(!(r!=p||(f=n.parent())instanceof g&&f.expression===this))return;h=d.CTOR}d=In(h,d)}l.push(d)}return In(Ie,this,{expression:In(a,t,{elements:l}),property:In(xe,this,{value:r})})}}}}),e(V,function(e,n){"arguments"!=e.property&&"caller"!=e.property||we.warn("Function.prototype.{property} not supported [{start}]",e);var t=n.parent();if(Qn(n.self(),t))return e;var i=fi(e,n);if(i)return i;if(n.option("sequences")&&"Call"!=t.TYPE&&!(t instanceof re&&t.init===e)){var r=ci(e,n);if(r!==e)return r.optimize(n)}if(n.option("unsafe_proto")&&e.expression instanceof V&&"prototype"==e.expression.property){var o=e.expression.expression;if(pt(o))switch(o.name){case"Array":e.expression=In(a,e.expression,{elements:[]});break;case"Function":e.expression=In(ae,e.expression,{argnames:[],body:[]}).init_vars(o.scope);break;case"Number":e.expression=In(xe,e.expression,{value:0});break;case"Object":e.expression=In(Te,e.expression,{properties:[]});break;case"RegExp":e.expression=In(Ce,e.expression,{value:/t/});break;case"String":e.expression=In(Ne,e.expression,{value:""})}}var s=e.flatten_object(e.property,n);return s?s.optimize(n):qt(n,e)}),e(L,function(e,n){return n.option("rests")&&e.rest instanceof L?In(L,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),e(B,function(e,n){if(n.option("objects")){var t=e.key;t instanceof we&&(t=t.evaluate(n))!==e.key&&(e.key=""+t)}return e}),e(Te,function(e,n){if(!n.option("objects"))return e;var t=!1,i=!1,r=!1,o=n.has_directive("use strict"),a=[],s=new On,f=[];if(e.properties.forEach(function(e){if(!(e instanceof ze))return l(e);i=!0;var o=e.expression;n.option("spreads")&&o instanceof Te&&En(o.properties,function(e){return!(e instanceof AST_ObjectGetter)&&(!(e instanceof ze)&&("__proto__"!==e.key||(e instanceof AST_ObjectSetter||!e.value.has_side_effects(n))))})?(t=!0,o.properties.forEach(function(e){var t=e.key,i=e instanceof AST_ObjectSetter;if("__proto__"===t){if(!i)return;t=Xn(t,e)}l(i?In(Ae,e,{key:t,value:In(ln,e).optimize(n)}):e)})):(r=!0,u(),f.push(e))}),u(),!t)return e;if(i&&r&&1==f.length){var c=f[0];c instanceof ke&&c.key instanceof xe&&(c.key=""+c.key.value)}return In(Te,e,{properties:f});function u(){a.forEach(function(n){var i=s.get(n);switch(i.length){case 0:return;case 1:return f.push(i[0])}t=!0;var a=o&&!r&&i.pop();f.push(1==i.length?i[0]:In(Ae,e,{key:i[0].key,value:Un(e,i.map(function(e){return e.value}))})),a&&f.push(a),i.length=0}),a=[],s=new On}function l(e){var t=e.key;t instanceof we&&(i=!0,(t=t.evaluate(n))===e.key||"__proto__"===t?r=!0:t=e.key=""+t),Pi(e)?(e.value.has_side_effects(n)&&u(),a.push(t),s.add(t,e)):(u(),f.push(e)),i&&!r&&"string"==typeof t&&X.test(t)&&(r=!0,s.has(t)&&(e=s.get(t)[0]),e.key=In(xe,e,{value:+t}))}}),function(e){function n(e,n,t,i,r,o,a){for(var s=[],f=o.expressions,c=t,u=f.length-(a||0),l=u;--u>=0;c=!0,r=!1){var p=f[u].try_inline(e,n,c,i,r);p&&(d(),s.push(p))}if(0!=s.length)return d(),!t&&s[0]instanceof je&&(s[0]=In(Fe,o,{value:s[0].body})),In(_,o,{body:s.reverse()});function d(){l>u+1&&s.push(In(je,o,{body:Un(o,f.slice(u+1,l))})),l=u}}e(we,zn),e(f,zn),e(u,function(e,n,t,i){if(e.option("awaits")){var r=this,o=r.expression.try_inline(e,n,t,i,!0);if(o)return t||Vt(o,function(n){n.in_bool=!1;var t=n.value;t instanceof u||(n.value=In(u,r,{expression:t||In(ln,n).transform(e)}))}),Mt(o)?o:In(_,r,{body:[o,In(je,r,{body:In(u,r,{expression:In(xe,r,{value:0})})})]})}}),e(p,function(e,n,t,i,r){if(void 0!==t){var o=this,a=o.operator;if(xt[a]){var s=o.right.try_inline(e,n,t,i,r);if(s)return In(fe,o,{condition:function(n){switch(a){case"&&":return n;case"||":return n.negate(e);case"??":return In(p,o,{operator:"==",left:In(Se,o),right:n})}}(o.left),body:s,alternative:t?null:In(Fe,o,{value:In(ln,o).transform(e)})})}}}),e(_,function(e,n,t,i){if(!t&&this.variables){var r=this.body,o=r.length-1;if(!(o<0)){var a=r[o].try_inline(e,this,t,i);if(a)return r[o]=a,this}}}),e(g,function(e,n,t,i,r){if(!(e.option("inline")<4)){var o=this;if(!o.is_expr_pure(e)){var s=o.expression;if(s instanceof ve&&!(s.name||s.uses_arguments||s.pinned()||Tn(s))){var f=xn(s);if(!(f&&s.value||s.body[0]instanceof Y||s.contains_this())){n||(n=qn(e));var c=new On;for(c.set("NaN",!0);!(n instanceof $e);)n.variables.each(function(e){c.set(e.name,!0)}),n=n.parent_scope;if(jn(n,e.stack)&&!(n.pinned()&&s.variables.size()>(f?0:1))){if(n instanceof on){if(s.variables.size()>(f?0:1)){if(!e.toplevel.vars)return;if(s.functions.size()>0&&!e.toplevel.funcs)return}c.set("arguments",!0)}var l=!r&&is_async(s);if(l){if(!e.option("awaits"))return;if(!is_async(n))return;if(o.may_throw(e))return}var p=n.var_names();if(i&&(i=[]),s.variables.all(function(e,n){return i&&i.push(e),!c.has(n)&&!p.has(n)||!f&&"arguments"==n&&1==e.orig.length})&&!(i&&i.length>0&&qi(s,i))){var d=!0;if(En(s.argnames,function(e){var n=!1,t=new gn(function(e){return!!n||(e instanceof j?zi(s,e.value)?n=!0:(e.name.walk(t),!0):e instanceof B?e.key instanceof we&&zi(s,e.key)?n=!0:(e.value.walk(t),!0):e instanceof Ke&&!En(e.definition().orig,function(e){return!(e instanceof Ge)})?n=!0:void 0)});return e.walk(t),!n&&(e instanceof Ke||(d=!1),!0)})){if(s.rest){if(zi(s,s.rest))return;d=!1}var h;if(t?h=function(e){var n=!1;return e.walk(new gn(function(e){return!!n||(l&&(e instanceof u||e instanceof AST_ForAwaitOf)||e instanceof Fe?n=!0:e instanceof $e||void 0)})),!n}:(r||is_async(s)||Dn(n))&&(h=function(e){var n=!1,t=new gn(function(e){return!!n||(e instanceof Fe?n=!0:e instanceof $e||void 0)});return e.walk(new gn(function(e){return!!n||(e instanceof sn?(e.bfinally&&En(e.body,function(e){return e.walk(t),!n})&&e.bcatch&&e.bcatch.walk(t),!0):e instanceof $e||void 0)})),!n}),(!h||En(s.body,h))&&pi(s,li(e,n))){s.functions.each(function(e,t){n.functions.set(t,e)});var v=[];s.variables.each(function(t,r){if((f||"arguments"!=r||1!=t.orig.length)&&(p.set(r,!0),n.enclosed.push(t),n.variables.set(r,t),t.single_use=!1,i&&t.references.length!=t.replaced&&t.orig.length!=t.eliminated&&(1!=t.orig.length||!s.functions.has(r))&&En(t.orig,function(e){return!(e instanceof Ue)&&(e instanceof Ke?!e.unused&&t.scope.resolve()!==s:!(e instanceof Qe))}))){var o=t.orig[0];o instanceof He||v.push(In(je,o,{body:Ni(e,ji(o))}))}});var m=Object.create(null),g=new On;if(d&&En(o.args,function(e){return!(e instanceof ze)})){var b=o.args.slice();s.argnames.forEach(function(n){var t=b.shift();if(n.unused)t&&v.push(In(je,o,{body:t}));else{var i=In(dn,o,{name:n.convert_symbol(AST_SymbolVar,w),value:t||In(ln,o).transform(e)});n instanceof Ke&&Mi(n.definition(),i),v.push(In(pn,o,{definitions:[i]}))}}),b.length&&v.push(In(je,o,{body:Un(o,b)}))}else v.push(In(pn,o,{definitions:[In(dn,o,{name:In(L,o,{elements:s.argnames.map(function(e){return e.unused?In(se,e):e.convert_symbol(AST_SymbolVar,w)}),rest:s.rest&&s.rest.convert_symbol(AST_SymbolVar,w)}),value:In(a,o,{elements:o.args.slice()})})]}));g.each(function(e,n){var t=m[n];[].unshift.apply(t.orig,e),t.eliminated+=e.length}),[].push.apply(v,i?s.body.filter(function(e){if(!(e instanceof _e))return!0;var n=In(AST_SymbolVar,ji(e.name)),t=n.definition();return t.fixed=!1,t.orig.push(n),t.eliminated++,v.push(In(pn,e,{definitions:[In(dn,e,{name:n,value:Ut(e,!0)})]})),!1}):s.body);var y=In(_,o,{body:v});return t||(l&&Vt(y,function(e){var n=e.value;St(n)||(e.value=In(u,o,{expression:n}))}),v.push(In(Fe,o,{value:Dn(n)?In(ln,o).transform(e):null}))),y}}}}}}}}function w(e,n){var t=n.definition();m[t.id]=t,g.add(t.id,e)}}),e(D,function(e,n,t,i,r){var o=this.consequent.try_inline(e,n,t,i,r),a=this.alternative.try_inline(e,n,t,i,r);if(o||a)return In(fe,this,{condition:this.condition,body:o||s(this.consequent),alternative:a||s(this.alternative)});function s(e){return t?In(je,e,{body:e}):In(Fe,e,{value:e})}}),e(ie,function(e,n,t,i){var r=this.body.try_inline(e,n,!0,!0);r&&(this.body=r);var o=this.init;return o&&(o=o.try_inline(e,n,!0,i))?(this.init=null,o instanceof _?(o.body.push(this),o):In(_,o,{body:[o,this]})):r&&this}),e(re,function(e,t,i,r){var o=this.body.try_inline(e,t,!0,!0);o&&(this.body=o);var a=this.object;if(a instanceof Pe){var s=n(e,t,!0,r,!1,a,1);if(s)return this.object=a.tail_node(),s.body.push(this),s}return o&&this}),e(fe,function(e,t,i,r){var o=this.body.try_inline(e,t,i,r);o&&(this.body=o);var a=this.alternative;a&&(a=a.try_inline(e,t,i,r))&&(this.alternative=a);var s=this.condition;if(s instanceof Pe){var f=n(e,t,!0,r,!1,s,1);if(f)return this.condition=s.tail_node(),f.body.push(this),f}return(o||a)&&this}),e(le,function(e,n,t,i){var r=this.body.try_inline(e,n,!0,!0);if(r)return this.body=r,this}),e(de,function(e,n,t,i){var r=this.body.try_inline(e,n,t,i);if(r){if(this.body instanceof le&&r instanceof _){var o=r.body.pop();return this.body=o,r.body.push(this),r}return this.body=r,this}}),e(ye,zn),e(Fe,function(e,n,t,i){var r=this.value;return r&&r.try_inline(e,n,void 0,"try"===i)}),e(Pe,function(e,t,i,r,o){return n(e,t,i,r,o,this)}),e(je,function(e,n,t,i){for(var r=this.body;r instanceof un;){var o=r.operator;if(unary_side_effects[o])break;if("void"==o)break;r=r.expression}return t||St(r)||(r=In(un,this,{operator:"void",expression:r})),r.try_inline(e,n,t||!1,i)}),e(un,function(e,n,t,i,r){var o=this,a=o.operator;if(!unary_side_effects[a]){t||"void"!=a||(t=!1);var s=o.expression.try_inline(e,n,t,i,r);if(s)return t||Vt(s,function(n){n.in_bool=!1;var t=n.value;"void"==a&&St(t)||(n.value=In(un,o,{operator:a,expression:t||In(ln,n).transform(e)}))}),s}}),e(_n,function(e,t,i,r){var o=this.body.try_inline(e,t,i,r);o&&(this.body=o);var a=this.expression;if(a instanceof Pe){var s=n(e,t,!0,r,!1,a,1);if(s)return this.expression=a.tail_node(),s.body.push(this),s}return o&&this}),e(vn,function(e,n,t,i){if(e.option("yields")&&this.nested){var r=this.expression;if("Call"==r.TYPE){var o=r.expression;switch(o.CTOR){case AST_AsyncGeneratorFunction:o=In(AST_AsyncFunction,o);break;case AST_GeneratorFunction:o=In(ae,o);break;default:return}return(r=r.clone()).expression=o,r.try_inline(e,n,t,i)}}})}(function(e,n){e.DEFMETHOD("try_inline",n)}),e(Fe,function(e,n){var t=e.value;return t&&n.option("side_effects")&&St(t,n)&&!Dn(n.find_parent($e))&&(e.value=null),e})}(function(e,n){e.DEFMETHOD("optimize",function(e){if(this._optimized)return this;if(e.has_directive("use asm"))return this;var t=n(this,e);return t._optimized=!0,t})}),{Compressor:Zn}}),e("skylark-uglifyjs/sourcemap",["./utils"],function(e){"use strict";const{characters:n,HOP:t,Dictionary:i}=e;var r=n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o=r.reduce(function(e,n,t){return e[n]=t,e},Object.create(null));function a(e){var n="";e=Math.abs(e)<<1|e>>>31;do{var t=31&e;(e>>>=5)&&(t|=32),n+=r[t]}while(e);return n}function s(){var e=new i,n=[];return n.index=function(t){var i=e.get(t);return i>=0||(i=n.length,n.push(t),e.set(t,i)),i},n}return{SourceMap:function(e){var n,t=s(),r=e.includeSources&&new i,f=s(),c="";e.orig&&Object.keys(e.orig).forEach(function(n){var t=e.orig[n],i=[0,0,1,0,0];if(e.orig[n]={names:t.names,mappings:t.mappings.split(/;/).map(function(e){return i[0]=0,e.split(/,/).map(function(e){return i.slice(0,function(e,n){for(var t=0,i=0,r=0,a=0;r<n.length;r++){var s=o[n[r]];t+=(31&s)<<i,32&s?i+=5:(e[a++]+=1&t?2147483648|-(t>>1):t>>1,t=i=0)}return a}(i,e))})}),sources:t.sources},r&&t.sourcesContent)for(var a=0;a<t.sources.length;a++){var s=t.sourcesContent[a];s&&r.set(t.sources[a],s)}});var u=1,l=0,p=0,d=1,h=0,_=0;return{add:e.orig?function(n,t,i,r,o,a){var s=e.orig[n];if(s){var f,c=s.mappings[r-1];if(!c)return;for(var u=0;u<c.length;u++){var l=c[u][0];if(o>=l&&(f=c[u]),o<=l)break}!f||f.length<4?n=null:(n=s.sources[f[1]],r=f[2],o=f[3],f.length>4&&(a=s.names[f[4]]))}v(n,t,i,r,o,a)}:v,setSourceContent:r?function(e,n){r.has(e)||r.set(e,n)}:noop,toString:function(){return JSON.stringify({version:3,file:e.filename||void 0,sourceRoot:e.root||void 0,sources:t,sourcesContent:r?t.map(function(e){return r.get(e)||null}):void 0,names:f,mappings:c})}};function v(i,r,o,s,v,m){if(null!=n||null!=i){if(n=i,u<r){l=0;do{c+=";"}while(++u<r)}else c&&(c+=",");if(c+=a(o-l),l=o,null!=i){var g=t.index(i);if(c+=a(g-p),p=g,c+=a(s-d),d=s,c+=a(v-h),h=v,e.names&&null!=m){var b=f.index(m);c+=a(b-_),_=b}}}}}}}),e("skylark-uglifyjs/propmangle",["./utils","./ast","./scope"],function(e,n,t){"use strict";const{defaults:i,push_uniq:r,Dictionary:o}=e,{base54:a}=t,{AST_Binary:s,AST_Call:f,AST_ClassPrivateProperty:c,AST_Conditional:u,AST_Dot:l,AST_DotHash:p,AST_ObjectKeyVal:d,AST_ObjectProperty:h,AST_PrivateMethod:_,AST_PrivateGetter:v,AST_PrivateSetter:m,AST_PrivateIn:g,AST_Sequence:b,AST_String:y,AST_Sub:w,TreeWalker:S,_KEY:x,_MANGLEPROP:T,walk:A}=n;function k(){var e=new o;["NaN","null","true","false","Infinity","-Infinity","undefined"].forEach(t),["encodeURI","encodeURIComponent","escape","eval","decodeURI","decodeURIComponent","isFinite","isNaN","parseFloat","parseInt","unescape"].forEach(t);var n=Function("return this")();return["Array","ArrayBuffer","Atomics","BigInt","Boolean","console","DataView","Date","Error","Function","Int8Array","Intl","JSON","Map","Math","Number","Object","Promise","Proxy","Reflect","RegExp","Set","String","Symbol","WebAssembly"].forEach(function(e){t(e);var i=n[e];if(i&&(Object.getOwnPropertyNames(i).map(t),"function"==typeof i)){i.__proto__&&Object.getOwnPropertyNames(i.__proto__).map(t),i.prototype&&Object.getOwnPropertyNames(i.prototype).map(t);try{Object.getOwnPropertyNames(new i).map(t)}catch(e){try{Object.getOwnPropertyNames(i()).map(t)}catch(e){}}}}),(k=function(){return e.clone()})();function t(n){e.set(n,!0)}}function E(e,n){e instanceof u?(E(e.consequent,n),E(e.alternative,n)):e instanceof b?E(e.tail_node(),n):e instanceof y&&n(e.value)}return{mangle_properties:function(e,n){var t=(n=i(n,{builtins:!1,cache:null,debug:!1,domprops:!1,keep_quoted:!1,regex:null,reserved:null},!0)).builtins?new o:k();n.domprops||"undefined"==typeof domprops||domprops.forEach(function(e){t.set(e,!0)});Array.isArray(n.reserved)&&n.reserved.forEach(function(e){t.set(e,!0)});var r,f=-1;n.cache?(r=n.cache.props).each(function(e){t.set(e,!0)}):r=new o;var c,p=n.regex,d=!1!==n.debug;d&&(c=!0===n.debug?"":n.debug);var _=new o,v=t.clone();function m(e){return!v.has(e)&&!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(e)}function g(e){return t.has(e)?(AST_Node.info("Preserving reserved property {this}",e),!1):p&&!p.test(e)?(AST_Node.info("Preserving excluded property {this}",e),!1):r.has(e)||_.has(e)}function x(e){m(e)&&_.set(e,!0),g(e)||v.set(e,!0)}function T(e){if(!g(e))return e;var n=r.get(e);if(!n){if(d){var t="_$"+e+"$"+c+"_";m(t)&&(n=t)}if(!n)do{n=a(++f)}while(!m(n));/^#/.test(e)&&(n="#"+n),r.set(e,n)}return AST_Node.info("Mapping property {name} to {mangled}",{mangled:n,name:e}),n}function A(e){e instanceof b?A(e.tail_node()):e instanceof y?e.value=T(e.value):e instanceof u&&(A(e.consequent),A(e.alternative))}e.walk(new S(function(e){if("Call"==e.TYPE){var n=e.expression;if(n instanceof l)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((n=n.expression)instanceof AST_SymbolRef))break;if("Object"!=n.name)break;if(!n.definition().undeclared)break;E(e.args[1],x);break;case"hasOwnProperty":if(e.args.length<1)break;E(e.args[0],x)}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof h?e.key instanceof AST_Node?E(e.key,x):x(e.key):e instanceof l?is_lhs(e,this.parent())&&x(e.property):e instanceof w&&is_lhs(e,this.parent())&&E(e.property,x)})),e.walk(new S(function(e){if(e instanceof s)"in"==e.operator&&A(e.left);else if("Call"==e.TYPE){var t=e.expression;if(t instanceof l)switch(t.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((t=t.expression)instanceof AST_SymbolRef))break;if("Object"!=t.name)break;if(!t.definition().undeclared)break;A(e.args[1]);break;case"hasOwnProperty":if(e.args.length<1)break;A(e.args[0])}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof h?e.key instanceof AST_Node?A(e.key):e.key=T(e.key):e instanceof l?e.property=T(e.property):e instanceof w&&(n.keep_quoted||A(e.property))}))},reserve_quoted_keys:function(e,n){function t(e){r(n,e)}e.walk(new S(function(e){e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof h?e.key instanceof AST_Node?E(e.key,t):e.start&&e.start.quote&&t(e.key):e instanceof l?e.quoted&&t(e.property):e instanceof w&&E(e.property,t)}))}}}),e("skylark-uglifyjs/minify",["./utils","./ast","./parse","./output","./compress","./sourcemap","./propmangle"],function(e,n,t,i,r,o,a){"use strict";const{defaults:s,HOP:f}=e,{AST_Toplevel:c,AST_Node:u,walk:l,AST_Scope:p}=n,{parse:d}=t,{OutputStream:h}=i,{Compressor:_}=r,{SourceMap:v}=o,{mangle_properties:m,reserve_quoted_keys:g}=a;var b,y;function w(e,n){for(var t=n.end.comments_after,i=t.length;--i>=0;){var r=t[i];if("comment1"!=r.type)break;var o=/^# ([^\s=]+)=(\S+)\s*$/.exec(r.value);if(!o)break;if("sourceMappingURL"==o[1]){if(!(o=/^data:application\/json(;.*?)?;base64,([^,]+)$/.exec(o[2])))break;return b(o[2])}}u.warn("inline source map not found: {name}",{name:e})}function S(e){try{return JSON.parse(e)}catch(n){throw new Error("invalid input source map: "+e)}}function x(e,n,t){t.forEach(function(t){n[t]&&("object"!=typeof n[t]&&(n[t]={}),e in n[t]||(n[t][e]=n[e]))})}function T(e){e&&("props"in e?e.props instanceof Dictionary||(e.props=Dictionary.fromObject(e.props)):e.props=new Dictionary)}function A(e){return{props:e.props.toObject()}}return"undefined"==typeof Buffer?(b=atob,y=btoa):void 0===Buffer.alloc?(b=function(e){return new Buffer(e,"base64").toString()},y=function(e){return new Buffer(e).toString("base64")}):(b=function(e){return Buffer.from(e,"base64").toString()},y=function(e){return Buffer.from(e).toString("base64")}),{minify:function(e,n){try{(n=s(n,{annotations:void 0,compress:{},enclose:!1,expression:!1,ie:!1,ie8:!1,keep_fargs:!1,keep_fnames:!1,mangle:{},module:!1,nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:!(!n||!n.module),v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0)).validate&&u.enable_validation();var t,i=n.timings&&{start:Date.now()};void 0!==n.annotations&&x("annotations",n,["compress","output"]),n.expression&&x("expression",n,["compress","parse"]),n.ie8&&(n.ie=n.ie||n.ie8),n.ie&&x("ie",n,["compress","mangle","output","rename"]),n.keep_fargs&&x("keep_fargs",n,["compress","mangle","rename"]),n.keep_fnames&&x("keep_fnames",n,["compress","mangle","rename"]),n.module&&x("module",n,["compress","parse"]),n.toplevel&&x("toplevel",n,["compress","mangle","rename"]),n.v8&&x("v8",n,["mangle","output","rename"]),n.webkit&&x("webkit",n,["compress","mangle","output","rename"]),n.mangle&&(n.mangle=s(n.mangle,{cache:n.nameCache&&(n.nameCache.vars||{}),eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),n.mangle.properties&&("object"!=typeof n.mangle.properties&&(n.mangle.properties={}),n.mangle.properties.keep_quoted&&(t=n.mangle.properties.reserved,Array.isArray(t)||(t=[]),n.mangle.properties.reserved=t),!n.nameCache||"cache"in n.mangle.properties||(n.mangle.properties.cache=n.nameCache.props||{})),T(n.mangle.cache),T(n.mangle.properties.cache)),void 0===n.rename&&(n.rename=n.compress&&n.mangle),n.sourceMap&&(n.sourceMap=s(n.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0));var r,o=[];if(n.warnings&&u.log_function(function(e){o.push(e)},"verbose"==n.warnings),i&&(i.parse=Date.now()),n.parse=n.parse||{},e instanceof u)r=e;else{"string"==typeof e&&(e=[e]),n.parse.toplevel=null;var a=n.sourceMap&&n.sourceMap.content;for(var l in"string"==typeof a&&"inline"!=a&&(a=S(a)),a&&(n.sourceMap.orig=Object.create(null)),e)if(f(e,l))if(n.parse.filename=l,n.parse.toplevel=r=d(e[l],n.parse),"inline"==a){var p=w(l,r);p&&(n.sourceMap.orig[l]=S(p))}else a&&(n.sourceMap.orig[l]=a)}n.parse.expression&&(r=r.wrap_expression()),t&&g(r,t),["enclose","wrap"].forEach(function(t){var i=n[t];if(i){var o=r.print_to_string().slice(0,-1);r=r[t](i),e[r.start.file]=r.print_to_string().replace(o,"")}}),n.validate&&r.validate_ast(),i&&(i.rename=Date.now()),n.rename&&(r.figure_out_scope(n.rename),r.expand_names(n.rename)),i&&(i.compress=Date.now()),n.compress&&(r=new _(n.compress).compress(r),n.validate&&r.validate_ast()),i&&(i.scope=Date.now()),n.mangle&&r.figure_out_scope(n.mangle),i&&(i.mangle=Date.now()),n.mangle&&(r.compute_char_frequency(n.mangle),r.mangle_names(n.mangle)),i&&(i.properties=Date.now()),t&&g(r,t),n.mangle&&n.mangle.properties&&m(r,n.mangle.properties),n.parse.expression&&(r=r.unwrap_expression()),i&&(i.output=Date.now());var b={},k=s(n.output,{ast:!1,code:!0});if(k.ast&&(b.ast=r),k.code){if(n.sourceMap&&(k.source_map=v(n.sourceMap),n.sourceMap.includeSources)){if(e instanceof c)throw new Error("original source content unavailable");for(var l in e)f(e,l)&&k.source_map.setSourceContent(l,e[l])}delete k.ast,delete k.code;var E=h(k);if(r.print(E),b.code=E.get(),n.sourceMap){b.map=k.source_map.toString();var D=n.sourceMap.url;D&&(b.code=b.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),b.code+="inline"==D?"\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+y(b.map):"\n//# sourceMappingURL="+D)}}return n.nameCache&&n.mangle&&(n.mangle.cache&&(n.nameCache.vars=A(n.mangle.cache)),n.mangle.properties&&n.mangle.properties.cache&&(n.nameCache.props=A(n.mangle.properties.cache))),i&&(i.end=Date.now(),b.timings={parse:.001*(i.rename-i.parse),rename:.001*(i.compress-i.rename),compress:.001*(i.scope-i.compress),scope:.001*(i.mangle-i.scope),mangle:.001*(i.properties-i.mangle),properties:.001*(i.output-i.properties),output:.001*(i.end-i.output),total:.001*(i.end-i.start)}),o.length&&(b.warnings=o),b}catch(e){return{error:e}}finally{u.log_function(),u.disable_validation()}}}}),e("skylark-uglifyjs/main",["./minify"],function(e){return e}),e("skylark-uglifyjs",["skylark-uglifyjs/main"],function(e){return e})}(t),!i){var a=require("skylark-langx-ns");r?module.exports=a:n.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-uglifyjs.js.map
