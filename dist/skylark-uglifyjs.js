/**
 * skylark-uglifyjs - A version of uglifyjs that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
(function(factory,globals,define,require) {
  var isAmd = (typeof define === 'function' && define.amd),
      isCmd = (!isAmd && typeof exports !== 'undefined');

  if (!isAmd && !define) {
    var map = {};
    function absolute(relative, base) {
        if (relative[0]!==".") {
          return relative;
        }
        var stack = base.split("/"),
            parts = relative.split("/");
        stack.pop(); 
        for (var i=0; i<parts.length; i++) {
            if (parts[i] == ".")
                continue;
            if (parts[i] == "..")
                stack.pop();
            else
                stack.push(parts[i]);
        }
        return stack.join("/");
    }
    define = globals.define = function(id, deps, factory) {
        if (typeof factory == 'function') {
            map[id] = {
                factory: factory,
                deps: deps.map(function(dep){
                  return absolute(dep,id);
                }),
                resolved: false,
                exports: null
            };
            require(id);
        } else {
            map[id] = {
                factory : null,
                resolved : true,
                exports : factory
            };
        }
    };
    require = globals.require = function(id) {
        if (!map.hasOwnProperty(id)) {
            throw new Error('Module ' + id + ' has not been defined');
        }
        var module = map[id];
        if (!module.resolved) {
            var args = [];

            module.deps.forEach(function(dep){
                args.push(require(dep));
            })

            module.exports = module.factory.apply(globals, args) || null;
            module.resolved = true;
        }
        return module.exports;
    };
  }
  
  if (!define) {
     throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");
  }

  factory(define,require);

  if (!isAmd) {
    var skylarkjs = require("skylark-langx-ns");

    if (isCmd) {
      module.exports = skylarkjs;
    } else {
      globals.skylarkjs  = skylarkjs;
    }
  }

})(function(define,require) {

/***********************************************************************

      A JavaScript tokenizer / parser / beautifier / compressor.
      https://github.com/mishoo/UglifyJS

      -------------------------------- (C) ---------------------------------

                               Author: Mihai Bazon
                             <mihai.bazon@gmail.com>
                           http://mihai.bazon.net/blog

      Distributed under the BSD license:

        Copyright 2012 (c) Mihai Bazon <mihai.bazon@gmail.com>

        Redistribution and use in source and binary forms, with or without
        modification, are permitted provided that the following conditions
        are met:

            * Redistributions of source code must retain the above
              copyright notice, this list of conditions and the following
              disclaimer.

            * Redistributions in binary form must reproduce the above
              copyright notice, this list of conditions and the following
              disclaimer in the documentation and/or other materials
              provided with the distribution.

        THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDER “AS IS” AND ANY
        EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
        IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
        PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE
        LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,
        OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
        PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
        PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
        THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
        TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
        THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
        SUCH DAMAGE.

     ***********************************************************************/

/***********************************************************************

      A JavaScript tokenizer / parser / beautifier / compressor.
      https://github.com/mishoo/UglifyJS

      -------------------------------- (C) ---------------------------------

                               Author: Mihai Bazon
                             <mihai.bazon@gmail.com>
                           http://mihai.bazon.net/blog

      Distributed under the BSD license:

        Copyright 2012 (c) Mihai Bazon <mihai.bazon@gmail.com>
        Parser based on parse-js (http://marijn.haverbeke.nl/parse-js/).

        Redistribution and use in source and binary forms, with or without
        modification, are permitted provided that the following conditions
        are met:

            * Redistributions of source code must retain the above
              copyright notice, this list of conditions and the following
              disclaimer.

            * Redistributions in binary form must reproduce the above
              copyright notice, this list of conditions and the following
              disclaimer in the documentation and/or other materials
              provided with the distribution.

        THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDER “AS IS” AND ANY
        EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
        IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
        PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE
        LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,
        OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
        PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
        PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
        THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
        TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
        THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
        SUCH DAMAGE.

     ***********************************************************************/

// if (a) return b; if (c) return d; e; ---> return a ? b : c ? d : void e;

define("skylark-uglifyjs/utils",[],function(){"use strict";function e(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(e){return e.stack}}})}function r(e,n){this.message=e,this.defs=n}((r.prototype=Object.create(Error.prototype)).constructor=r).prototype.name="DefaultsError",e(r);t.is_op=function(e){return e===o||e instanceof s},t.splice=function(e){return new s(e)},o=t.skip={};var o,n=t;function t(e,n){for(var t=[],i=0;i<e.length;i++){var r=n(e[i],i);r!==o&&(r instanceof s?t.push.apply(t,r.v):t.push(r))}return t}function s(e){this.v=e}function i(){this.values=Object.create(null)}function a(e,n){return Object.prototype.hasOwnProperty.call(e,n)}return i.prototype={set:function(e,n){return"__proto__"==e?this.proto_value=n:this.values[e]=n,this},add:function(e,n){var t=this.get(e);return t?t.push(n):this.set(e,[n]),this},get:function(e){return"__proto__"==e?this.proto_value:this.values[e]},del:function(e){return"__proto__"==e?delete this.proto_value:delete this.values[e],this},has:function(e){return"__proto__"==e?"proto_value"in this:e in this.values},all:function(e){for(var n in this.values)if(!e(this.values[n],n))return!1;return!("proto_value"in this&&!e(this.proto_value,"__proto__"))},each:function(e){for(var n in this.values)e(this.values[n],n);"proto_value"in this&&e(this.proto_value,"__proto__")},size:function(){return Object.keys(this.values).length+("proto_value"in this)},map:function(e){var n,t=[];for(n in this.values)t.push(e(this.values[n],n));return"proto_value"in this&&t.push(e(this.proto_value,"__proto__")),t},clone:function(){var t=new i;return this.each(function(e,n){t.set(n,e)}),t},toObject:function(){var t={};return this.each(function(e,n){t["$"+n]=e}),t}},i.fromObject=function(e){var n,t=new i;for(n in e)a(e,n)&&t.set(n.slice(1),e[n]);return t},{characters:function(e){return e.split("")},member:function(e,n){return 0<=n.indexOf(e)},find_if:function(e,n){for(var t=n.length;0<=--t;)if(e(n[t]))return n[t]},configure_error_stack:e,defaults:function(e,n,t){if(t)for(var i in e)if(a(e,i)&&!a(n,i))throw new r("`"+i+"` is not a supported option",n);for(var i in e)a(e,i)&&(n[i]=e[i]);return n},DefaultsError:r,noop:function(){},return_false:function(){return!1},return_true:function(){return!0},return_this:function(){return this},return_null:function(){return null},List:n,push_uniq:function(e,n){if(e.indexOf(n)<0)return e.push(n)},string_template:function(e,t){return e.replace(/\{([^{}]+)\}/g,function(e,n){n="this"==n?t:t[n];return n instanceof AST_Node?n.print_to_string():n instanceof AST_Token?n.file+":"+n.line+","+n.col:n})},remove:function(e,n){0<=(n=e.indexOf(n))&&e.splice(n,1)},makePredicate:function(e){Array.isArray(e)||(e=e.split(" "));var n=Object.create(null);return e.forEach(function(e){n[e]=!0}),n},all:function(e,n){for(var t=e.length;0<=--t;)if(!n(e[t],t))return!1;return!0},Dictionary:i,HOP:a,DEF_BITPROPS:function(i,e){if(31<e.length)throw new Error("Too many properties: "+e.length+"\n"+e.join(", "));e.forEach(function(e,n){var t=1<<n;Object.defineProperty(i.prototype,e,{get:function(){return!!(this._bits&t)},set:function(e){e?this._bits|=t:this._bits&=~t}})})}}}),define("skylark-uglifyjs/ast",["./utils"],function(z){"use strict";const{all:M,HOP:N,List:I,noop:R,DEF_BITPROPS:B,return_true:H,return_this:Y}=z;var L;function e(e,n,t,i){void 0===i&&(i=c);var r,o=n=n?n.split(/\s+/):[],s=(i&&i.PROPS&&(n=n.concat(i.PROPS)),["return function AST_",e,"(props){","this._bits=0;","if(props){"]),a=(n.forEach(function(e){s.push("this.",e,"=props.",e,";")}),s.push("}"),Object.create(i&&i.prototype)),f=((t.initialize||a.initialize)&&s.push("this.initialize();"),s.push("};"),new Function(s.join(""))());for(r in f.prototype=a,(f.prototype.CTOR=f).prototype.TYPE=f.TYPE=e,i&&(f.BASE=i).SUBCLASSES.push(f),f.DEFMETHOD=function(e,n){this.prototype[e]=n},f.PROPS=n,f.SELF_PROPS=o,f.SUBCLASSES=[],t)N(t,r)&&(/^\$/.test(r)?f[r.substr(1)]=t[r]:f.DEFMETHOD(r,t[r]));return"undefined"!=typeof exports&&(exports["AST_"+e]=f),f}var z=e("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),c=e("Node","start end",{_clone:function(e){var n;return e?(n=this.clone()).transform(new Jn(function(e){if(e!==n)return e.clone(!0)})):new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},equals:function(e){return this.TYPE==e.TYPE&&this._equals(e)},walk:function(e){e.visit(this)},_validate:function(){if("Node"==this.TYPE)throw new Error("should not instantiate AST_Node")},validate:function(){for(var e=this.CTOR;e.prototype._validate.call(this),e=e.BASE;);},validate_ast:function(){var n={};this.walk(new j(function(e){if(e.validate_visited===n)throw new Error(string_template("cannot reuse AST_{TYPE} from [{start}]",e));e.validate_visited=n}))}},null),U=(B(c,["_optimized","_squeezed","call_only","collapse_scanning","defined","evaluating","falsy","in_arg","in_bool","is_undefined","inlined","length_read","nested","new","optional","private","pure","redundant","single_use","static","terminal","truthy","uses_eval","uses_with"]),(c.log_function=function(n,e){var t;function i(e){t[e]||(t[e]=!0,n(e))}"function"!=typeof n?c.info=c.warn=R:(t=Object.create(null),c.info=e?function(e,n){i("INFO: "+string_template(e,n))}:R,c.warn=function(e,n){i("WARN: "+string_template(e,n))})})(),[]);function i(e,t){return e.length==t.length&&M(e,function(e,n){return e.equals(t[n])})}function r(e,n){return e===n||(null==e?null==n:e instanceof c&&n instanceof c&&e.equals(n))}c.enable_validation=function(){c.disable_validation(),function e(n){var t;n.SUBCLASSES.forEach(e),N(n.prototype,"transform")&&(t=n.prototype.transform,n.prototype.transform=function(e,n){e=t.call(this,e,n);if(e instanceof c)e.validate();else if(!(null===e||n&&I.is_op(e)))throw new Error("invalid transformed value: "+e);return e},U.push(function(){n.prototype.transform=t}))}(this)},c.disable_validation=function(){for(var e;e=U.pop();)e()};var n=e("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if("Statement"==this.TYPE)throw new Error("should not instantiate AST_Statement")}}),V=e("Debugger",null,{$documentation:"Represents a debugger statement",_equals:H},n),o=e("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_equals:function(e){return this.value==e.value},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},n),G=e("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_equals:H},n);function s(e){return e instanceof n&&!(e instanceof ye)&&!(e instanceof v)}function W(e,n,t,i,r){if(t=t?"contain":"be",!(e instanceof c))throw new Error(n+" must "+t+" AST_Node");if(e instanceof We)throw new Error(n+" cannot "+t+" AST_DefaultValue");if(e instanceof T)throw new Error(n+" cannot "+t+" AST_Destructured");if(e instanceof Un&&!r)throw new Error(n+" cannot "+t+" AST_Hole");if(e instanceof nn&&!i)throw new Error(n+" cannot "+t+" AST_Spread");if(s(e))throw new Error(n+" cannot "+t+" AST_Statement");if(e instanceof q)throw new Error(n+" cannot "+t+" AST_SymbolDeclaration")}function t(e,n){W(e[n],n)}var K=e("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){t(this,"body")}},n),a=e("BlockScope","_var_names enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any inner scopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---\x3e SymbolDef for all variables/functions defined in this scope"},clone:function(e){e=this._clone(e);return this.enclosed&&(e.enclosed=this.enclosed.slice()),this.functions&&(e.functions=this.functions.clone()),this.variables&&(e.variables=this.variables.clone()),e},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if("BlockScope"==this.TYPE)throw new Error("should not instantiate AST_BlockScope");if(null!=this.parent_scope){if(!(this.parent_scope instanceof a))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof d))throw new Error("must be contained within AST_Scope")}}},n);function f(e,n){e.body.forEach(function(e){e.walk(n)})}var u=e("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},_equals:function(e){return i(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){f(n,e)})},_validate:function(){if("Block"==this.TYPE)throw new Error("should not instantiate AST_Block");this.body.forEach(function(e){if(!s(e))throw new Error("body must contain AST_Statement")})}},a),J=e("BlockStatement",null,{$documentation:"A block statement"},u),l=e("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if("StatementWithBody"==this.TYPE)throw new Error("should not instantiate AST_StatementWithBody");if(!s(this.body))throw new Error("body must be AST_Statement")}},a),X=e("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_equals:function(e){return this.label.equals(e.label)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.label.walk(e),n.body.walk(e)})},clone:function(e){var n,t,i=this._clone(e);return e&&(n=i.label,t=this.label,i.walk(new j(function(e){return e instanceof w?e.label&&e.label.thedef===t?((e.label.thedef=n).references.push(e),!0):void 0:e instanceof d||void 0}))),i},_validate:function(){if(!(this.label instanceof qn))throw new Error("label must be AST_Label")}},l),p=e("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if("IterationStatement"==this.TYPE)throw new Error("should not instantiate AST_IterationStatement")}},l),Q=e("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)},_validate:function(){if("DWLoop"==this.TYPE)throw new Error("should not instantiate AST_DWLoop");t(this,"condition")}},p),Z=e("Do",null,{$documentation:"A `do` statement",walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e),n.condition.walk(e)})}},Q),ee=e("While",null,{$documentation:"A `while` statement",walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e)})}},Q),ne=e("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_equals:function(e){return r(this.init,e.init)&&r(this.condition,e.condition)&&r(this.step,e.step)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.init&&n.init.walk(e),n.condition&&n.condition.walk(e),n.step&&n.step.walk(e),n.body.walk(e)})},_validate:function(){if(null!=this.init){if(!(this.init instanceof c))throw new Error("init must be AST_Node");if(s(this.init)&&!(this.init instanceof x))throw new Error("init cannot be AST_Statement")}null!=this.condition&&t(this,"condition"),null!=this.step&&t(this,"step")}},p),te=e("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},_equals:function(e){return this.init.equals(e.init)&&this.object.equals(e.object)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.init.walk(e),n.object.walk(e),n.body.walk(e)})},_validate:function(){if("ForEnumeration"==this.TYPE)throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof x){if(1!=this.init.definitions.length)throw new Error("init must have single declaration")}else A(this.init,function(e){if(!(e instanceof k||e instanceof Cn))throw new Error("init must be assignable: "+e.TYPE)});t(this,"object")}},p),ie=e("ForIn",null,{$documentation:"A `for ... in` statement"},te),re=e("ForOf",null,{$documentation:"A `for ... of` statement"},te),oe=e("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},re),se=e("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_equals:function(e){return this.expression.equals(e.expression)&&this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.body.walk(e)})},_validate:function(){t(this,"expression")}},l),d=e("Scope","fn_defs may_call_this uses_eval uses_with",{$documentation:"Base class for all statements introducing a lambda scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:Y,_validate:function(){if("Scope"==this.TYPE)throw new Error("should not instantiate AST_Scope")}},u),ae=e("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---\x3e SymbolDef for all undeclared names"},wrap:function(e){var n=this.body;return L.parse(["(function(exports){'$ORIG';})(typeof ",e,"=='undefined'?(",e,"={}):",e,");"].join(""),{filename:"wrap="+JSON.stringify(e)}).transform(new Jn(function(e){if(e instanceof o&&"$ORIG"==e.value)return I.splice(n)}))},enclose:function(e){var n=(e="string"!=typeof e?"":e).indexOf(":"),t=(n<0&&(n=e.length),this.body);return L.parse(["(function(",e.slice(0,n),'){"$ORIG"})(',e.slice(n+1),")"].join(""),{filename:"enclose="+JSON.stringify(e)}).transform(new Jn(function(e){if(e instanceof o&&"$ORIG"==e.value)return I.splice(t)}))}},d),fe=e("ClassInitBlock",null,{$documentation:"Value for `class` static initialization blocks"},d),h=e("Lambda","argnames length_read rest safe_ids uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean|number/S] whether this function accesses the arguments array"},each_argname:function(n){var t=new j(function(e){return e instanceof We?(e.name.walk(t),!0):e instanceof dn?(e.value.walk(t),!0):void(e instanceof kn&&n(e))});this.argnames.forEach(function(e){e.walk(t)}),this.rest&&this.rest.walk(t)},_equals:function(e){return r(this.rest,e.rest)&&r(this.name,e.name)&&r(this.value,e.value)&&i(this.argnames,e.argnames)&&i(this.body,e.body)},walk:function(n){var e=this;n.visit(e,function(){e.name&&e.name.walk(n),e.argnames.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n),f(e,n)})},_validate:function(){if("Lambda"==this.TYPE)throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(e){A(e,function(e){if(!(e instanceof kn))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),null!=this.rest&&A(this.rest,function(e){if(!(e instanceof kn))throw new Error("rest must be AST_SymbolFunarg")})}},d),_=e("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(null!=this.name)throw new Error("name must be null")}},h),v=e("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if("LambdaExpression"==this.TYPE)throw new Error("should not instantiate AST_LambdaExpression")}},h);function m(e){return e instanceof ce||e instanceof ue}var ce=e("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(n){var e=this;n.visit(e,function(){e.argnames.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n),e.value?e.value.walk(n):f(e,n)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(t(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},v),ue=e("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(n){var e=this;n.visit(e,function(){e.argnames.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n),e.value?e.value.walk(n):f(e,n)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(t(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},v),le=e("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof An))throw new Error("name must be AST_SymbolLambda")}},v),pe=e("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof An))throw new Error("name must be AST_SymbolLambda")}},v),de=e("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof An))throw new Error("name must be AST_SymbolLambda")}},v),he=e("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof An))throw new Error("name must be AST_SymbolLambda")}},v),g=e("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if("LambdaDefinition"==this.TYPE)throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof Tn))throw new Error("name must be AST_SymbolDefun")}},h),_e=e("AsyncDefun",null,{$documentation:"An asynchronous function definition"},g),ve=e("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},g),me=e("Defun",null,{$documentation:"A function definition"},g),ge=e("GeneratorDefun",null,{$documentation:"A generator function definition"},g),b=e("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},_equals:function(e){return r(this.name,e.name)&&r(this.extends,e.extends)&&i(this.properties,e.properties)},resolve:function(e){return e?this:this.parent_scope.resolve()},walk:function(n){var e=this;n.visit(e,function(){e.name&&e.name.walk(n),e.extends&&e.extends.walk(n),e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){if("Class"==this.TYPE)throw new Error("should not instantiate AST_Class");null!=this.extends&&t(this,"extends"),this.properties.forEach(function(e){if(!(e instanceof y))throw new Error("properties must contain AST_ClassProperty")})}},a),be=e("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof En))throw new Error("name must be AST_SymbolDefClass")}},b),ye=e("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof Dn))throw new Error("name must be AST_SymbolClass")}},b),y=e("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node?] property name (AST_Node for computed property, null for initialization block)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},_equals:function(e){return!this.private==!e.private&&!this.static==!e.static&&r(this.key,e.key)&&r(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof c&&n.key.walk(e),n.value&&n.value.walk(e)})},_validate:function(){if("ClassProperty"==this.TYPE)throw new Error("should not instantiate AST_ClassProperty");if(this instanceof Te){if(null!=this.key)throw new Error("key must be null")}else if("string"!=typeof this.key){if(!(this.key instanceof c))throw new Error("key must be string or AST_Node");t(this,"key")}if(null!=this.value&&!(this.value instanceof c))throw new Error("value must be AST_Node")}}),we=e("ClassField",null,{$documentation:"A `class` field",_validate:function(){null!=this.value&&t(this,"value")}},y),xe=e("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof _))throw new Error("value must be AST_Accessor")}},y),Se=e("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof _))throw new Error("value must be AST_Accessor")}},y),ke=e("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof v))throw new Error("value must be AST_LambdaExpression");if(m(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of class method's lambda must be null")}},y),Te=e("ClassInit",null,{$documentation:"A `class` static initialization block",_validate:function(){if(!this.static)throw new Error("static must be true");if(!(this.value instanceof fe))throw new Error("value must be AST_ClassInitBlock")},initialize:function(){this.static=!0}},y),Ae=e("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if("Jump"==this.TYPE)throw new Error("should not instantiate AST_Jump")}},n),Ee=e("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_equals:function(e){return r(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.value&&n.value.walk(e)})},_validate:function(){if("Exit"==this.TYPE)throw new Error("should not instantiate AST_Exit")}},Ae),De=e("Return",null,{$documentation:"A `return` statement",_validate:function(){null!=this.value&&t(this,"value")}},Ee),Oe=e("Throw",null,{$documentation:"A `throw` statement",_validate:function(){t(this,"value")}},Ee),w=e("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_equals:function(e){return r(this.label,e.label)},walk:function(e){var n=this;e.visit(n,function(){n.label&&n.label.walk(e)})},_validate:function(){if("LoopControl"==this.TYPE)throw new Error("should not instantiate AST_LoopControl");if(null!=this.label&&!(this.label instanceof Fn))throw new Error("label must be AST_LabelRef")}},Ae),qe=e("Break",null,{$documentation:"A `break` statement"},w),Ce=e("Continue",null,{$documentation:"A `continue` statement"},w),$e=e("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_equals:function(e){return this.body.equals(e.body)&&this.condition.equals(e.condition)&&r(this.alternative,e.alternative)},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e),n.alternative&&n.alternative.walk(e)})},_validate:function(){if(t(this,"condition"),null!=this.alternative&&!s(this.alternative))throw new Error("alternative must be AST_Statement")}},l),Fe=e("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_equals:function(e){return this.expression.equals(e.expression)&&i(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),f(n,e)})},_validate:function(){t(this,"expression"),this.body.forEach(function(e){if(!(e instanceof je))throw new Error("body must be AST_SwitchBranch[]")})}},u),je=e("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if("SwitchBranch"==this.TYPE)throw new Error("should not instantiate AST_SwitchBranch")}},u),Pe=e("Default",null,{$documentation:"A `default` switch branch"},je),ze=e("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_equals:function(e){return this.expression.equals(e.expression)&&i(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),f(n,e)})},_validate:function(){t(this,"expression")}},je),Me=e("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_equals:function(e){return i(this.body,e.body)&&r(this.bcatch,e.bcatch)&&r(this.bfinally,e.bfinally)},walk:function(e){var n=this;e.visit(n,function(){f(n,e),n.bcatch&&n.bcatch.walk(e),n.bfinally&&n.bfinally.walk(e)})},_validate:function(){if(null!=this.bcatch&&!(this.bcatch instanceof Ne))throw new Error("bcatch must be AST_Catch");if(null!=this.bfinally&&!(this.bfinally instanceof Ie))throw new Error("bfinally must be AST_Finally")}},u),Ne=e("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},_equals:function(e){return r(this.argname,e.argname)&&i(this.body,e.body)},walk:function(e){var n=this;e.visit(n,function(){n.argname&&n.argname.walk(e),f(n,e)})},_validate:function(){null!=this.argname&&A(this.argname,function(e){if(!(e instanceof On))throw new Error("argname must be AST_SymbolCatch")})}},u),Ie=e("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},u),x=e("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_equals:function(e){return i(this.definitions,e.definitions)},walk:function(n){var e=this;n.visit(e,function(){e.definitions.forEach(function(e){e.walk(n)})})},_validate:function(){if("Definitions"==this.TYPE)throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},n),Re=e("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof S))throw new Error("definitions must be AST_VarDef[]");A(e.name,function(e){if(!(e instanceof yn))throw new Error("name must be AST_SymbolConst")})})}},x),Be=e("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof S))throw new Error("definitions must be AST_VarDef[]");A(e.name,function(e){if(!(e instanceof xn))throw new Error("name must be AST_SymbolLet")})})}},x),He=e("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof S))throw new Error("definitions must be AST_VarDef[]");A(e.name,function(e){if(!(e instanceof Sn))throw new Error("name must be AST_SymbolVar")})})}},x),S=e("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_equals:function(e){return this.name.equals(e.name)&&r(this.value,e.value)},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value&&n.value.walk(e)})},_validate:function(){null!=this.value&&t(this,"value")}}),Ye=e("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){if(!(this.body instanceof be||this.body instanceof x||this.body instanceof g))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},n),Le=e("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},_equals:function(e){return this.body.equals(e.body)},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){this.body instanceof be||this.body instanceof g||t(this,"body")}},n),Ue=e("ExportForeign","aliases keys path",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[AST_String*] array of aliases to export",keys:"[AST_String*] array of keys to import",path:"[AST_String] the path to import module"},_equals:function(e){return this.path.equals(e.path)&&i(this.aliases,e.aliases)&&i(this.keys,e.keys)},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(e){if(!(e instanceof $))throw new Error("aliases must contain AST_String")}),this.keys.forEach(function(e){if(!(e instanceof $))throw new Error("keys must contain AST_String")}),!(this.path instanceof $))throw new Error("path must be AST_String")}},n),Ve=e("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},_equals:function(e){return i(this.properties,e.properties)},walk:function(n){var e=this;n.visit(e,function(){e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof $n))throw new Error("properties must contain AST_SymbolExport")})}},n),Ge=e("Import","all default path properties",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[AST_String] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified"},_equals:function(e){return this.path.equals(e.path)&&r(this.all,e.all)&&r(this.default,e.default)&&!this.properties==!e.properties&&(!this.properties||i(this.properties,e.properties))},walk:function(n){var e=this;n.visit(e,function(){e.all&&e.all.walk(n),e.default&&e.default.walk(n),e.properties&&e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){if(null!=this.all){if(!(this.all instanceof wn))throw new Error("all must be AST_SymbolImport");if(null!=this.properties)throw new Error("cannot import both * and {} in the same statement")}if(null!=this.default){if(!(this.default instanceof wn))throw new Error("default must be AST_SymbolImport");if(""!==this.default.key.value)throw new Error("invalid default key: "+this.default.key.value)}if(!(this.path instanceof $))throw new Error("path must be AST_String");null!=this.properties&&this.properties.forEach(function(e){if(!(e instanceof wn))throw new Error("properties must contain AST_SymbolImport")})}},n),We=e("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},_equals:function(e){return this.name.equals(e.name)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value.walk(e)})},_validate:function(){t(this,"value")}});function Ke(e,n,t,i){e[n].forEach(function(e){W(e,n,!0,t,i)})}var Je=e("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[boolean/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&this.expression.equals(e.expression)&&i(this.args,e.args)},walk:function(n){var e=this;n.visit(e,function(){e.expression.walk(n),e.args.forEach(function(e){e.walk(n)})})},_validate:function(){t(this,"expression"),Ke(this,"args",!0)}}),Xe=e("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},Je),Qe=e("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_equals:function(e){return i(this.expressions,e.expressions)},walk:function(n){var e=this;n.visit(e,function(){e.expressions.forEach(function(e){e.walk(n)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");Ke(this,"expressions")}});var k=e("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},_equals:function(e){return!this.optional==!e.optional&&r(this.property,e.property)&&this.expression.equals(e.expression)},get_property:function(){var e=this.property;return e instanceof C?e.value:e instanceof rn&&"void"==e.operator&&e.expression instanceof C?void 0:e},_validate:function(){if("PropAccess"==this.TYPE)throw new Error("should not instantiate AST_PropAccess");t(this,"expression")}}),Ze=e("Dot","quoted",{$documentation:"A dotted property access expression",$propdoc:{quoted:"[boolean] whether property is transformed from a quoted string"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("string"!=typeof this.property)throw new Error("property must be string")}},k),en=e("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.property.walk(e)})},_validate:function(){t(this,"property")}},k),nn=e("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){t(this,"expression")}}),tn=e("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_equals:function(e){return this.operator==e.operator&&this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("Unary"==this.TYPE)throw new Error("should not instantiate AST_Unary");if("string"!=typeof this.operator)throw new Error("operator must be string");t(this,"expression")}}),rn=e("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},tn),on=e("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},tn),sn=e("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_equals:function(e){return this.operator==e.operator&&this.left.equals(e.left)&&this.right.equals(e.right)},walk:function(e){var n=this;e.visit(n,function(){n.left.walk(e),n.right.walk(e)})},_validate:function(){if(this instanceof fn||t(this,"left"),"string"!=typeof this.operator)throw new Error("operator must be string");t(this,"right")}}),an=e("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_equals:function(e){return this.condition.equals(e.condition)&&this.consequent.equals(e.consequent)&&this.alternative.equals(e.alternative)},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.consequent.walk(e),n.alternative.walk(e)})},_validate:function(){t(this,"condition"),t(this,"consequent"),t(this,"alternative")}}),fn=e("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof T){if("="!=this.operator)throw new Error("invalid destructuring operator: "+this.operator);A(this.left,function(e){if(!(e instanceof k||e instanceof Cn))throw new Error("left must be assignable: "+e.TYPE)})}else if(!(this.left instanceof Vn||this.left instanceof Yn||this.left instanceof k&&!this.left.optional||this.left instanceof Cn||this.left instanceof Ln))throw new Error("left must be assignable")}},sn),cn=e("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},_equals:function(e){return this.expression.equals(e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){t(this,"expression")}}),un=e("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},_equals:function(e){return!this.nested==!e.nested&&r(this.expression,e.expression)},walk:function(e){var n=this;e.visit(n,function(){n.expression&&n.expression.walk(e)})},_validate:function(){if(null!=this.expression)t(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),ln=e("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_equals:function(e){return i(this.elements,e.elements)},walk:function(n){var e=this;n.visit(e,function(){e.elements.forEach(function(e){e.walk(n)})})},_validate:function(){Ke(this,"elements",!0,!0)}}),T=e("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if("Destructured"==this.TYPE)throw new Error("should not instantiate AST_Destructured")}});function A(e,n,t){if(e instanceof We&&t)return A(e.name,n);if(e instanceof T){if(null!=e.rest&&A(e.rest,n),e instanceof pn)return e.elements.forEach(function(e){e instanceof Un||A(e,n,!0)});if(e instanceof hn)return e.properties.forEach(function(e){A(e.value,n,!0)})}n(e)}var E,pn=e("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},_equals:function(e){return r(this.rest,e.rest)&&i(this.elements,e.elements)},walk:function(n){var e=this;n.visit(e,function(){e.elements.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n)})}},T),dn=e("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},_equals:function(e){return r(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof c&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("string"!=typeof this.key){if(!(this.key instanceof c))throw new Error("key must be string or AST_Node");t(this,"key")}if(!(this.value instanceof c))throw new Error("value must be AST_Node")}}),hn=e("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},_equals:function(e){return r(this.rest,e.rest)&&i(this.properties,e.properties)},walk:function(n){var e=this;n.visit(e,function(){e.properties.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n)})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof dn))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},T),_n=e("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},_equals:function(e){return i(this.properties,e.properties)},walk:function(n){var e=this;n.visit(e,function(){e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof D||e instanceof nn))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),D=e("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},_equals:function(e){return r(this.key,e.key)&&this.value.equals(e.value)},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof c&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("ObjectProperty"==this.TYPE)throw new Error("should not instantiate AST_ObjectProperty");if("string"!=typeof this.key){if(!(this.key instanceof c))throw new Error("key must be string or AST_Node");t(this,"key")}if(!(this.value instanceof c))throw new Error("value must be AST_Node")}}),vn=e("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){t(this,"value")}},D),mn=e("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof v))throw new Error("value must be AST_LambdaExpression");if(m(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of object method's lambda must be null")}},vn),gn=e("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof _))throw new Error("value must be AST_Accessor")}},D),bn=e("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof _))throw new Error("value must be AST_Accessor")}},D),O=e("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_equals:function(e){return this.thedef?this.thedef===e.thedef:this.name==e.name},_validate:function(){if("Symbol"==this.TYPE)throw new Error("should not instantiate AST_Symbol");if("string"!=typeof this.name)throw new Error("name must be string")}}),q=e("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},O),yn=e("SymbolConst",null,{$documentation:"Symbol defining a constant"},q),wn=e("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[AST_String] the original `export` name"},_equals:function(e){return this.name==e.name&&this.key.equals(e.key)},_validate:function(){if(!(this.key instanceof $))throw new Error("key must be AST_String")}},yn),xn=e("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},q),Sn=e("SymbolVar",null,{$documentation:"Symbol defining a variable"},q),kn=e("SymbolFunarg","unused",{$documentation:"Symbol naming a function argument"},Sn),Tn=e("SymbolDefun",null,{$documentation:"Symbol defining a function"},q),An=e("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},q),En=e("SymbolDefClass",null,{$documentation:"Symbol defining a class"},yn),Dn=e("SymbolClass",null,{$documentation:"Symbol naming a class expression"},yn),On=e("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},q),qn=e("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},O),Cn=e("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},O),$n=e("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[AST_String] the `export` alias"},_equals:function(e){return this.name==e.name&&this.alias.equals(e.alias)},_validate:function(){if(!(this.alias instanceof $))throw new Error("alias must be AST_String")}},Cn),Fn=e("LabelRef",null,{$documentation:"Reference to a label symbol"},O),jn=e("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_equals:H,_validate:function(){if("ObjectIdentity"==this.TYPE)throw new Error("should not instantiate AST_ObjectIdentity")}},O),Pn=e("Super",null,{$documentation:"The `super` symbol",_validate:function(){if("super"!==this.name)throw new Error('name must be "super"')}},jn),zn=e("This",null,{$documentation:"The `this` symbol",_validate:function(){if("This"==this.TYPE&&"this"!==this.name)throw new Error('name must be "this"')}},jn),Mn=e("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if("new.target"!==this.name)throw new Error('name must be "new.target": '+this.name)}},zn),Nn=e("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node?] tag function, or null if absent"},_equals:function(e){return r(this.tag,e.tag)&&(n=this.strings,t=e.strings,n.length==t.length)&&M(n,function(e,n){return e==t[n]})&&i(this.expressions,e.expressions);var n,t},walk:function(n){var e=this;n.visit(e,function(){e.tag&&e.tag.walk(n),e.expressions.forEach(function(e){e.walk(n)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");Ke(this,"expressions"),this.strings.forEach(function(e){if("string"!=typeof e)throw new Error("strings must contain string")}),null!=this.tag&&t(this,"tag")}}),C=e("Constant",null,{$documentation:"Base class for all constants",_equals:function(e){return this.value===e.value},_validate:function(){if("Constant"==this.TYPE)throw new Error("should not instantiate AST_Constant")}}),$=e("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},C),In=e("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if("number"!=typeof this.value)throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},C),Rn=e("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if("string"!=typeof this.value)throw new Error("value must be string");if("-"==this.value[0])throw new Error("value cannot be negative")}},C),Bn=e("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_equals:function(e){return""+this.value==""+e.value},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},C),F=e("Atom",null,{$documentation:"Base class for atoms",_equals:H,_validate:function(){if("Atom"==this.TYPE)throw new Error("should not instantiate AST_Atom")}},C),Hn=e("Null",null,{$documentation:"The `null` atom",value:null},F),Yn=e("NaN",null,{$documentation:"The impossible value",value:NaN},F),Ln=e("Undefined",null,{$documentation:"The `undefined` value",value:void 0},F),Un=e("Hole",null,{$documentation:"A hole in an array",value:void 0},F),Vn=e("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},F),Gn=e("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if("Boolean"==this.TYPE)throw new Error("should not instantiate AST_Boolean")}},F),Wn=e("False",null,{$documentation:"The `false` atom",value:!1},Gn),Kn=e("True",null,{$documentation:"The `true` atom",value:!0},Gn);function j(e){this.callback=e,this.directives=Object.create(null),this.stack=[]}function Jn(e,n){j.call(this),this.before=e,this.after=n}function P(e,n){return I(e,function(e){return e.transform(n,!0)})}function Xn(e,n){e.argnames=P(e.argnames,n),e.rest&&(e.rest=e.rest.transform(n)),e.value?e.value=e.value.transform(n):e.body=P(e.body,n)}return j.prototype={visit:function(e,n){this.push(e),!this.callback(e,n||R)&&n&&n(),this.pop()},parent:function(e){return this.stack[this.stack.length-2-(e||0)]},push:function(e){var n;e instanceof b?(this.directives=Object.create(this.directives),n="use strict"):e instanceof o?n=e.value:e instanceof h&&(this.directives=Object.create(this.directives)),n&&!this.directives[n]&&(this.directives[n]=e),this.stack.push(e)},pop:function(){var e=this.stack.pop();(e instanceof b||e instanceof h)&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(e){for(var n=this.stack,t=n.length-1;0<=--t;){var i=n[t];if(i instanceof e)return i}},has_directive:function(e){var n=this.directives[e];if(n)return n;var t=this.stack[this.stack.length-1];if(t instanceof d)for(var i=0;i<t.body.length;++i){var r=t.body[i];if(!(r instanceof o))break;if(r.value==e)return r}},loopcontrol_target:function(e){var n,t=this.stack;if(e.label){for(var i=t.length;0<=--i;)if((n=t[i])instanceof X&&n.label.name==e.label.name)return n.body}else for(i=t.length;0<=--i;)if((n=t[i])instanceof p||e instanceof qe&&n instanceof Fe)return n},in_boolean_context:function(){for(var e,n=!0,t=0,i=this.self();e=this.parent(t++);i=e){if(e instanceof sn)switch(e.operator){case"&&":case"||":e.left===i&&(n=!1);continue;default:return!1}if(!(e instanceof an)){if(e instanceof Q)return e.condition===i;if(e instanceof ne)return e.condition===i;if(e instanceof $e)return e.condition===i;if(e instanceof De){if(e.in_bool)return!0;for(;e=this.parent(t++);)if(e instanceof h){if(e.name)return!1;if("Call"!=(e=this.parent(t++)).TYPE)return!1;break}}if(e instanceof Qe){if(e.tail_node()===i)continue;return!n||"d"}return e instanceof K?!n||"d":e instanceof rn&&"!"==e.operator}if(e.condition===i)return!0}}},Jn.prototype=new j,(E=function(e,i){e.DEFMETHOD("transform",function(e,n){var t;return e.push(this),void 0===(t=e.before?e.before(this,i,n):t)&&(i(t=this,e),e.after)&&void 0!==(n=e.after(t,n))&&(t=n),e.pop(),t})})(c,R),E(X,function(e,n){e.label=e.label.transform(n),e.body=e.body.transform(n)}),E(K,function(e,n){e.body=e.body.transform(n)}),E(u,function(e,n){e.body=P(e.body,n)}),E(Z,function(e,n){e.body=e.body.transform(n),e.condition=e.condition.transform(n)}),E(ee,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n)}),E(ne,function(e,n){e.init&&(e.init=e.init.transform(n)),e.condition&&(e.condition=e.condition.transform(n)),e.step&&(e.step=e.step.transform(n)),e.body=e.body.transform(n)}),E(te,function(e,n){e.init=e.init.transform(n),e.object=e.object.transform(n),e.body=e.body.transform(n)}),E(se,function(e,n){e.expression=e.expression.transform(n),e.body=e.body.transform(n)}),E(Ee,function(e,n){e.value&&(e.value=e.value.transform(n))}),E(w,function(e,n){e.label&&(e.label=e.label.transform(n))}),E($e,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n),e.alternative&&(e.alternative=e.alternative.transform(n))}),E(Fe,function(e,n){e.expression=e.expression.transform(n),e.body=P(e.body,n)}),E(ze,function(e,n){e.expression=e.expression.transform(n),e.body=P(e.body,n)}),E(Me,function(e,n){e.body=P(e.body,n),e.bcatch&&(e.bcatch=e.bcatch.transform(n)),e.bfinally&&(e.bfinally=e.bfinally.transform(n))}),E(Ne,function(e,n){e.argname&&(e.argname=e.argname.transform(n)),e.body=P(e.body,n)}),E(x,function(e,n){e.definitions=P(e.definitions,n)}),E(S,function(e,n){e.name=e.name.transform(n),e.value&&(e.value=e.value.transform(n))}),E(We,function(e,n){e.name=e.name.transform(n),e.value=e.value.transform(n)}),E(h,function(e,n){e.name&&(e.name=e.name.transform(n)),e.argnames=P(e.argnames,n),e.rest&&(e.rest=e.rest.transform(n)),e.body=P(e.body,n)}),E(ce,Xn),E(ue,Xn),E(b,function(e,n){e.name&&(e.name=e.name.transform(n)),e.extends&&(e.extends=e.extends.transform(n)),e.properties=P(e.properties,n)}),E(y,function(e,n){e.key instanceof c&&(e.key=e.key.transform(n)),e.value&&(e.value=e.value.transform(n))}),E(Je,function(e,n){e.expression=e.expression.transform(n),e.args=P(e.args,n)}),E(Qe,function(e,n){e.expressions=P(e.expressions,n)}),E(cn,function(e,n){e.expression=e.expression.transform(n)}),E(un,function(e,n){e.expression&&(e.expression=e.expression.transform(n))}),E(Ze,function(e,n){e.expression=e.expression.transform(n)}),E(en,function(e,n){e.expression=e.expression.transform(n),e.property=e.property.transform(n)}),E(nn,function(e,n){e.expression=e.expression.transform(n)}),E(tn,function(e,n){e.expression=e.expression.transform(n)}),E(sn,function(e,n){e.left=e.left.transform(n),e.right=e.right.transform(n)}),E(an,function(e,n){e.condition=e.condition.transform(n),e.consequent=e.consequent.transform(n),e.alternative=e.alternative.transform(n)}),E(ln,function(e,n){e.elements=P(e.elements,n)}),E(pn,function(e,n){e.elements=P(e.elements,n),e.rest&&(e.rest=e.rest.transform(n))}),E(dn,function(e,n){e.key instanceof c&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),E(hn,function(e,n){e.properties=P(e.properties,n),e.rest&&(e.rest=e.rest.transform(n))}),E(_n,function(e,n){e.properties=P(e.properties,n)}),E(D,function(e,n){e.key instanceof c&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),E(Ye,function(e,n){e.body=e.body.transform(n)}),E(Le,function(e,n){e.body=e.body.transform(n)}),E(Ve,function(e,n){e.properties=P(e.properties,n)}),E(Ge,function(e,n){e.all&&(e.all=e.all.transform(n)),e.default&&(e.default=e.default.transform(n)),e.properties&&(e.properties=P(e.properties,n))}),E(Nn,function(e,n){e.tag&&(e.tag=e.tag.transform(n)),e.expressions=P(e.expressions,n)}),L={parse:null,DEFNODE:e,AST_Token:z,AST_Node:c,AST_Statement:n,AST_Debugger:V,AST_Directive:o,AST_EmptyStatement:G,AST_SimpleStatement:K,AST_BlockScope:a,AST_Block:u,AST_BlockStatement:J,AST_StatementWithBody:l,AST_LabeledStatement:X,AST_IterationStatement:p,AST_DWLoop:Q,AST_Do:Z,AST_While:ee,AST_For:ne,AST_ForEnumeration:te,AST_ForIn:ie,AST_ForOf:re,AST_ForAwaitOf:oe,AST_With:se,AST_Scope:d,AST_Toplevel:ae,AST_ClassInitBlock:fe,AST_Lambda:h,AST_Accessor:_,AST_LambdaExpression:v,AST_Arrow:ce,AST_AsyncArrow:ue,AST_AsyncFunction:le,AST_Function:de,AST_GeneratorFunction:he,AST_AsyncGeneratorFunction:pe,AST_LambdaDefinition:g,AST_AsyncDefun:_e,AST_AsyncGeneratorDefun:ve,AST_Defun:me,AST_GeneratorDefun:ge,AST_Class:b,AST_DefClass:be,AST_ClassExpression:ye,AST_ClassProperty:y,AST_ClassField:we,AST_ClassGetter:xe,AST_ClassSetter:Se,AST_ClassMethod:ke,AST_ClassInit:Te,AST_Jump:Ae,AST_Exit:Ee,AST_Return:De,AST_Throw:Oe,AST_LoopControl:w,AST_Break:qe,AST_Continue:Ce,AST_If:$e,AST_Switch:Fe,AST_SwitchBranch:je,AST_Default:Pe,AST_Case:ze,AST_Try:Me,AST_Catch:Ne,AST_Finally:Ie,AST_Definitions:x,AST_Const:Re,AST_Let:Be,AST_Var:He,AST_VarDef:S,AST_ExportDeclaration:Ye,AST_ExportDefault:Le,AST_ExportForeign:Ue,AST_ExportReferences:Ve,AST_Import:Ge,AST_DefaultValue:We,AST_Call:Je,AST_New:Xe,AST_Sequence:Qe,AST_PropAccess:k,AST_Dot:Ze,AST_Sub:en,AST_Spread:nn,AST_Unary:tn,AST_UnaryPrefix:rn,AST_UnaryPostfix:on,AST_Binary:sn,AST_Conditional:an,AST_Assign:fn,AST_Await:cn,AST_Yield:un,AST_Array:ln,AST_Destructured:T,AST_DestructuredArray:pn,AST_DestructuredKeyVal:dn,AST_DestructuredObject:hn,AST_Object:_n,AST_ObjectProperty:D,AST_ObjectKeyVal:vn,AST_ObjectMethod:mn,AST_ObjectSetter:gn,AST_ObjectGetter:bn,AST_Symbol:O,AST_SymbolDeclaration:q,AST_SymbolConst:yn,AST_SymbolImport:wn,AST_SymbolLet:xn,AST_SymbolVar:Sn,AST_SymbolFunarg:kn,AST_SymbolDefun:Tn,AST_SymbolLambda:An,AST_SymbolDefClass:En,AST_SymbolClass:Dn,AST_SymbolCatch:On,AST_Label:qn,AST_SymbolRef:Cn,AST_SymbolExport:$n,AST_LabelRef:Fn,AST_ObjectIdentity:jn,AST_Super:Pn,AST_This:zn,AST_NewTarget:Mn,AST_Template:Nn,AST_Constant:C,AST_String:$,AST_Number:In,AST_BigInt:Rn,AST_RegExp:Bn,AST_Atom:F,AST_Null:Hn,AST_NaN:Yn,AST_Undefined:Ln,AST_Hole:Un,AST_Infinity:Vn,AST_Boolean:Gn,AST_False:Wn,AST_True:Kn,first_in_statement:function(e,n,t){for(var i,r=e.parent(-1),o=0;i=e.parent(o++);r=i){if(m(i))return n&&i.value===r;if(i instanceof sn){if(i.left===r)continue}else if("Call"==i.TYPE){if(i.expression===r)continue}else if(i instanceof an){if(i.condition===r)continue}else{if(i instanceof Le)return t;if(i instanceof k){if(i.expression===r)continue}else if(i instanceof Qe){if(i.expressions[0]===r)continue}else{if(i instanceof K)return!0;if(i instanceof Nn){if(i.tag===r)continue}else if(i instanceof on&&i.expression===r)continue}}return!1}},root_expr:function(e){for(;e instanceof k;)e=e.expression;return e},is_arrow:m,is_generator:function(e){return e instanceof ve||e instanceof pe||e instanceof ge||e instanceof he},walk_lambda:function(e,n){m(e)&&e.value?e.value.walk(n):f(e,n)},walk_body:f,is_statement:s,is_async:function(e){return e instanceof ue||e instanceof _e||e instanceof le||e instanceof ve||e instanceof pe},TreeWalker:j,TreeTransformer:Jn}}),define("skylark-uglifyjs/parse",["./utils","./ast"],function(e,i){"use strict";const{characters:n,defaults:ze,find_if:Me,makePredicate:t,configure_error_stack:r,HOP:Ne,all:le}=e,{AST_Accessor:Ie,AST_Array:T,AST_Arrow:Re,AST_Assign:pe,AST_AsyncFunction:de,AST_AsyncDefun:he,AST_AsyncArrow:Be,AST_AsyncGeneratorFunction:_e,AST_AsyncGeneratorDefun:ve,AST_Await:He,AST_BigInt:Ye,AST_Binary:Le,AST_BlockStatement:Ue,AST_Break:Ve,AST_Call:Ge,AST_Case:We,AST_Catch:Ke,AST_ClassExpression:Je,AST_ClassGetter:Xe,AST_ClassInit:Qe,AST_ClassMethod:Ze,AST_ClassSetter:en,AST_Conditional:nn,AST_Const:tn,AST_Continue:rn,AST_Debugger:on,AST_Default:sn,AST_DefaultValue:me,AST_DefClass:ge,AST_Definitions:an,AST_Defun:be,AST_Destructured:ye,AST_DestructuredArray:we,AST_DestructuredKeyVal:xe,AST_DestructuredObject:Se,AST_Directive:fn,AST_Do:cn,AST_Dot:un,AST_EmptyStatement:ln,AST_ExportDeclaration:pn,AST_False:dn,AST_Finally:hn,AST_For:_n,AST_ForIn:vn,AST_ForOf:mn,AST_Function:ke,AST_Hole:Te,AST_If:gn,AST_Import:bn,AST_Infinity:yn,AST_IterationStatement:wn,AST_Label:xn,AST_LabeledStatement:Sn,AST_LabelRef:kn,AST_Let:Tn,AST_New:An,AST_NewTarget:En,AST_Null:Dn,AST_Number:On,AST_Object:Ae,AST_ObjectGetter:qn,AST_ObjectKeyVal:Ee,AST_ObjectMethod:De,AST_ObjectSetter:Cn,AST_PropAccess:$n,AST_RegExp:Fn,AST_Return:jn,AST_Sequence:Pn,AST_SimpleStatement:zn,AST_Spread:Oe,AST_String:qe,AST_Sub:Mn,AST_Super:Nn,AST_Switch:In,AST_SymbolCatch:Rn,AST_SymbolClass:Bn,AST_SymbolConst:Hn,AST_SymbolDeclaration:Yn,AST_SymbolDefClass:Ln,AST_SymbolDefun:Un,AST_SymbolExport:Vn,AST_SymbolFunarg:Ce,AST_SymbolImport:$e,AST_SymbolLambda:Gn,AST_SymbolLet:Wn,AST_SymbolRef:Fe,AST_SymbolVar:Kn,AST_Template:Jn,AST_This:Xn,AST_Throw:Qn,AST_Token:$,AST_Toplevel:Zn,AST_True:et,AST_Try:nt,AST_UnaryPostfix:tt,AST_UnaryPrefix:it,AST_Var:rt,AST_VarDef:ot,AST_While:st,AST_With:at,AST_Yield:ft}=i;var e=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",A="false null true",je="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with"].join(" "),F="return new delete throw else case",je=t(je),e=t(e),F=t(F),A=t(A),j=/^0b([01]+)$/i,P=/^0x([0-9a-f]+)$/i,z=/^0o?([0-7]+)$/i,M=t(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),E="\n\r\u2028\u2029",D="+-*&%=<>!?|~^",ct=",;:)}]",O="[{(,;:",q=O+"`)}]",C=E+"  \t\f\v​             　\ufeff",N=t(n("./'\"#"+D+q+C));function I(e){return 48<=e&&e<=57}function R(e){return!N[e]}function ut(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function B(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":if("{"==e[1]&&"}"==e.slice(-1))n=e.slice(2,-1);else{if(5!=e.length)return;n=e.slice(1)}return(n=parseInt(n,16))<0||isNaN(n)?void 0:n<65536?String.fromCharCode(n):1114111<n?void 0:String.fromCharCode(55232+(n>>10))+String.fromCharCode(56320+(1023&n));case"v":return"\v";case"x":var n;return 3!=e.length?void 0:(n=parseInt(e.slice(1),16))<0||isNaN(n)?void 0:String.fromCharCode(n);case"\r":case"\n":return"";default:return"0"==e?"\0":"0"<=e[0]&&e[0]<="9"?void 0:e}}function o(e,n,t,i,r){this.message=e,this.filename=n,this.line=t,this.col=i,this.pos=r}function lt(e,n,t,i,r){throw new o(e,n,t,i,r)}function Pe(e,n,t){return e.type==n&&(null==t||e.value==t)}E=t(n(E)),D=t(n(D)),ct=t(n(ct)),O=t(n(O)),q=t(n(q)),C=t(n(C)),((o.prototype=Object.create(Error.prototype)).constructor=o).prototype.name="SyntaxError",r(o);var H={};function pt(i,r,o,s){var a={text:i,filename:r,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:Object.create(null),read_template:e("Unterminated template literal",function(e){for(var n="";;){var t=i();switch(t){case"\\":t+=i();break;case"`":return void e.push(n);case"$":if("{"==c())return u(),e.push(n),a.regex_allowed=!0}n+=t}function i(){var e=u(!0,!0);return"\r"==e?"\n":e}})},f=!1;function c(){return a.text.charAt(a.pos)}function u(e,n){var t=a.text.charAt(a.pos++);if(e&&!t)throw H;return E[t]?(a.col=0,a.line++,n||(a.newline_before=!0),"\r"==t&&"\n"==c()&&(a.pos++,t="\n")):a.col++,t}function l(e){for(;0<e--;)u()}function p(e){return a.text.substr(a.pos,e.length)==e}function d(){a.tokline=a.line,a.tokcol=a.col,a.tokpos=a.pos}function h(e,n,t){a.regex_allowed="operator"==e&&!ht[n]||"keyword"==e&&F[n]||"punc"==e&&O[n],"punc"==e&&"."==n?f=!0:t||(f=!1);n={type:e,value:n,line:a.tokline,col:a.tokcol,pos:a.tokpos,endline:a.line,endcol:a.col,endpos:a.pos,nlb:a.newline_before,file:r};return/^(?:num|string|regexp)$/i.test(e)&&(n.raw=i.substring(n.pos,n.endpos)),t||(n.comments_before=a.comments_before,n.comments_after=a.comments_before=[]),a.newline_before=!1,new $(n)}function _(e){lt(e,r,a.tokline,a.tokcol,a.tokpos)}function v(e){return/^0[0-7_]+$/.test(e)}function m(e){var n,t=!1,i=!1,r=!1,o="."==e,s=function(e){for(var n,t="";(n=c())&&e(n,t);)t+=u();return t}(function(e,n){switch(e){case"x":case"X":return!r&&(r=!0);case"e":case"E":return r||!t&&(t=i=!0);case"+":case"-":return i;case i=!1,".":return!(o||t||r||v(n))&&(o=!0)}return/[_0-9a-dfo]/i.test(e)}),e=(v(s=e?e+s:s)?T.has_directive("use strict")&&_("Legacy octal literals are not allowed in strict mode"):s=s.replace(r?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1"),e=s,(n=j.exec(e))?parseInt(n[1],2):(n=P.exec(e))?parseInt(n[1],16):(n=z.exec(e))?parseInt(n[1],8):(n=parseFloat(e))==e?n:void 0);return isNaN(e)&&_("Invalid syntax: "+s),o||t||"n"!=c()?h("num",e):h("bigint",s.toLowerCase()+u())}function g(e){var n,t=u(!0,e);if("0"<=t&&t<="7")return n=t,"0"<=(r=c())&&r<="7"&&(n+=u(!0))[0]<="3"&&"0"<=(r=c())&&r<="7"&&(n+=u(!0)),"0"===n?"\0":(0<n.length&&T.has_directive("use strict")&&_("Legacy octal escape sequences are not allowed in strict mode"),String.fromCharCode(parseInt(n,8)));if("u"==t){var i=u(!0,e);if(t+=i,"{"!=i)t+=u(!0,e)+u(!0,e)+u(!0,e);else for(;t+=i=u(!0,e),"}"!=i;);}else"x"==t&&(t+=u(!0,e)+u(!0,e));var r=B(t);return"string"!=typeof r&&_("Invalid escape sequence: \\"+t),r}var b=e("Unterminated string constant",function(e){for(var n=u(),t="";;){var i=u(!0,!0);if("\\"==i)i=g(!0);else if(E[i])_("Unterminated string constant");else if(i==n)break;t+=i}var r=h("string",t);return r.quote=e,r});function y(e){var n,t=a.regex_allowed,i=function(){for(var e=a.text,n=a.pos;n<a.text.length;++n)if(E[e[n]])return n;return-1}();return-1==i?(n=a.text.substr(a.pos),a.pos=a.text.length):(n=a.text.substring(a.pos,i),a.pos=i),a.col=a.tokcol+(a.pos-a.tokpos),a.comments_before.push(h(e,n,!0)),a.regex_allowed=t,T}var w=e("Unterminated multiline comment",function(){var e=a.regex_allowed,n=function(e,n){if(e=a.text.indexOf(e,a.pos),n&&-1==e)throw H;return e}("*/",!0),n=a.text.substring(a.pos,n).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return l(n.length+2),a.comments_before.push(h("comment2",n,!0)),a.regex_allowed=e,T});function x(){for(var e,n,t=!1,i=!1,r="#"==c()?u():"";e=c();)if(t)"u"!=e&&_("Expecting UnicodeEscapeSequence -- uXXXX"),R(e=g())||_("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),r+=e,t=!1;else if("\\"==e)i=t=!0,u();else{if(!R(e))break;r+=u()}return je[r]&&i&&(n=r.charCodeAt(0).toString(16).toUpperCase(),r="\\u"+"0000".substr(n.length)+n+r.slice(1)),r}var S=e("Unterminated regular expression",function(e){for(var n,t=!1,i=!1;n=u(!0);)if(E[n])_("Unexpected line terminator");else if(t)e+="\\"+n,t=!1;else if("["==n)i=!0,e+=n;else if("]"==n&&i)i=!1,e+=n;else{if("/"==n&&!i)break;"\\"==n?t=!0:e+=n}var r=x();try{var o=new RegExp(e,r);return o.raw_source=e,h("regexp",o)}catch(e){_(e.message)}});function k(e){return h("operator",function e(n){var t;return c()&&(t=n+c(),M[t])?(u(),e(t)):n}(e||u()))}function e(n,t){return function(e){try{return t(e)}catch(e){if(e!==H)throw e;_(n)}}}function T(e){if(null!=e)return S(e);for(s&&0==a.pos&&p("#!")&&(d(),l(2),y("comment5"));;){for(;C[c()];)u();if(d(),o){if(p("\x3c!--")){l(4),y("comment3");continue}if(p("--\x3e")&&a.newline_before){l(3),y("comment4");continue}}var n=c();if(!n)return h("eof");var t=n.charCodeAt(0);switch(t){case 34:case 39:return b(n);case 46:return u(),p("..")?h("operator","."+u()+u()):I(c().charCodeAt(0))?m("."):h("punc",".");case 47:var i=function(){switch(u(),c()){case"/":return u(),y("comment1");case"*":return u(),w()}return a.regex_allowed?S(""):k("/")}();if(i===T)continue;return i}if(I(t))return m();if(q[n])return h("punc",u());if(p("=>"))return h("punc",u()+u());if(D[n])return k();if(35!=t&&92!=t&&N[n])break;return t=void 0,t=x(),f?h("name",t):A[t]?h("atom",t):je[t]?M[t]?h("operator",t):h("keyword",t):h("name",t)}_("Unexpected character '"+n+"'")}return T.context=function(e){return a=e?e:a},T.add_directive=function(e){a.directives[e]=!0},T.push_directives_stack=function(){a.directives=Object.create(a.directives)},T.pop_directives_stack=function(){a.directives=Object.getPrototypeOf(a.directives)},T.has_directive=function(e){return!!a.directives[e]},T}var dt=t("typeof void delete -- ++ ! ~ - +"),ht=t("-- ++"),_t=t("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),vt=function(e,n){for(var t=0;t<e.length;)for(var i=e[t++],r=0;r<i.length;r++)n[i[r]]=t;return n}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),mt=t("atom bigint num regexp string");function s(e,A){A=ze(A,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var E={input:"string"==typeof e?pt(e,A.filename,A.html5_comments,A.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function D(e,n){return Pe(E.token,e,n)}function O(){return E.peeked||(E.peeked=E.input())}function q(){return E.prev=E.token,E.peeked?(E.token=E.peeked,E.peeked=null):E.token=E.input(),E.in_directives=E.in_directives&&("string"==E.token.type||D("punc",";")),E.token}function C(){return E.prev}function $(e,n,t,i){var r=E.input.context();lt(e,r.filename,null!=n?n:r.tokline,null!=t?t:r.tokcol,null!=i?i:r.tokpos)}function F(e,n){$(n,e.line,e.col)}function i(e,n){return e+(void 0===n?"":" «"+n+"»")}function j(e){F(e=null==e?E.token:e,"Unexpected token: "+i(e.type,e.value))}function P(e,n){if(D(e,n))return q();F(E.token,"Unexpected token: "+i(E.token.type,E.token.value)+", expected: "+i(e,n))}function z(e){P("punc",e)}function M(e){return e.nlb||!le(e.comments_before,function(e){return!e.nlb})}function Z(){return!A.strict&&(D("eof")||D("punc","}")||M(E.token))}function N(e){D("punc",";")?q():e||Z()||z(";")}function I(){z("(");var e=X();return z(")"),e}function n(i){return function(){var e=E.token,n=i.apply(null,arguments),t=C();return n.start=e,n.end=t,n}}function R(){(D("operator","/")||D("operator","/="))&&(E.peeked=null,E.token=E.input(E.token.value.substr(1)))}E.token=q();var B=n(function(e){switch(R(),E.token.type){case"string":var n=E.in_directives,t=X();return n&&(t instanceof qe?(w=t.start.raw.slice(1,-1),E.input.add_directive(w),t.value=w):E.in_directives=n=!1),N(),n?new fn(t):new zn({body:t});case"num":case"bigint":case"regexp":case"operator":case"atom":return H();case"name":switch(E.token.value){case"async":if(Pe(O(),"keyword","function"))return q(),q(),D("operator","*")?(q(),Y(ve)):Y(he);break;case"await":if(E.in_async)return H();break;case"export":if(e||""===A.module||j(),q(),D("operator","*"))return s=o=E.token,q(),D("name","as")&&(q(),te()||P("name"),s=E.token,q()),P("name","from"),new AST_ExportForeign({aliases:[L(s)],keys:[L(o)],path:ie()});if(D("punc","{")){q();for(var i=[],r=[];te();){var o=E.token;q(),r.push(o),D("name","as")?(q(),te()||P("name"),i.push(E.token),q()):i.push(o),D("punc","}")||z(",")}return(z("}"),D("name","from"))?(q(),new AST_ExportForeign({aliases:i.map(L),keys:r.map(L),path:ie()})):(N(),new AST_ExportReferences({properties:r.map(function(e,n){Pe(e,"name")||F(e,"Name expected");e=ue(Vn,e);return e.alias=L(i[n]),e})}))}return D("keyword","default")?(q(),s=E.token,(c=function(){if(D("name","async")){if(Pe(O(),"keyword","function"))return q(),q(),D("operator","*")?(q(),U(ve,Y(_e))):U(he,Y(de))}else if(D("keyword"))switch(E.token.value){case"class":return q(),U(ge,ne(Je));case"function":return(q(),D("operator","*"))?(q(),U(AST_GeneratorDefun,Y(AST_GeneratorFunction))):U(be,Y(ke))}}())?(c.start=s,c.end=C()):(R(),c=X(),N()),new AST_ExportDefault({body:c})):new pn({body:re()});case"import":var s=O();if("punc"==s.type&&/^[(.]$/.test(s.value))break;e||""===A.module||j(),q();var a,f,c=null,u=G($e,!0),l=null;if(u?(u.key=new qe({start:u.start,value:"",end:u.end}),(a=D("punc",","))&&q()):a=!D("string"),a)if(D("operator","*")){var p=E.token;q(),P("name","as"),(c=G($e)).key=L(p)}else{for(z("{"),l=[];te();)Pe(O(),"name","as")?(p=E.token,q(),q(),(f=G($e)).key=L(p)):(f=G($e)).key=new qe({start:f.start,value:f.name,end:f.end}),l.push(f),D("punc","}")||z(",");z("}")}return(c||u||l)&&P("name","from"),new bn({all:c,default:u,path:ie(),properties:l});case"let":if(se())return q(),d=fe(),N(),d;break;case"yield":if(E.in_generator)return H()}return(Pe(O(),"punc",":")?function(){var n=G(xn);le(E.labels,function(e){return e.name!=n.name})||$("Label "+n.name+" defined twice");z(":"),E.labels.push(n);var e=B();E.labels.pop(),e instanceof wn||n.references.forEach(function(e){e instanceof rn&&F(e.label.start,"Continue label `"+n.name+"` must refer to IterationStatement")});return new Sn({body:e,label:n})}:H)();case"punc":switch(E.token.value){case"{":return new Ue({start:E.token,body:V(),end:C()});case"[":case"(":case"`":return H();case";":return E.in_directives=!1,q(),new ln;default:j()}case"keyword":switch(E.token.value){case"break":return q(),ee(Ve);case"class":return q(),ne(ge);case"const":q();var d=ae();return N(),d;case"continue":return q(),ee(rn);case"debugger":return q(),N(),new on;case"do":q();var t=Q(B),h=(P("keyword","while"),I());return N(!0),new cn({body:t,condition:h});case"while":return q(),new st({condition:I(),body:Q(B)});case"for":q();var h=D("name","await")&&q(),_=(z("("),null);if(!h&&D("punc",";")||(_=(D("keyword","const")?(q(),ae):D("name","let")&&se()?(q(),fe):D("keyword","var")?(q(),ce):X)(!0),h?(P("name","of"),b=AST_ForAwaitOf):D("operator","in")?(q(),b=vn):D("name","of")&&(q(),b=mn),!b))return v=_,z(";"),m=D("punc",";")?null:X(),z(";"),g=D("punc",")")?null:X(),z(")"),new _n({init:v,condition:m,step:g,body:Q(B)});_ instanceof an?(1<_.definitions.length&&F(_.start,"Only one variable declaration allowed in for..in/of loop"),b!==vn&&_.definitions[0].value&&F(_.definitions[0].value.start,"No initializers allowed in for..of loop")):K(_)||(_=J(_))instanceof ye||F(_.start,"Invalid left-hand side in for..in/of loop");var v=b,m=_,g=(R(),X());return z(")"),new v({init:m,object:g,body:Q(B)});case"function":return(q(),D("operator","*"))?(q(),Y(AST_GeneratorDefun)):Y(be);case"if":q();var b=I(),_=B(),y=null;return D("keyword","else")&&(q(),y=B()),new gn({condition:b,body:_,alternative:y});case"return":0!=E.in_function||A.bare_returns||$("'return' outside of function"),q();var w=null;return D("punc",";")?q():Z()||(w=X(),N()),new jn({value:w});case"switch":return q(),new In({expression:I(),body:Q(oe)});case"throw":q(),M(E.token)&&$("Illegal newline after 'throw'");w=X();return N(),new Qn({value:w});case"try":q();var x,S,y=V(),k=null,T=null;return D("keyword","catch")&&(S=E.token,q(),x=null,D("punc","(")&&(q(),x=W(Rn),z(")")),k=new Ke({start:S,argname:x,body:V(),end:C()})),D("keyword","finally")&&(S=E.token,q(),T=new hn({start:S,body:V(),end:C()})),k||T||$("Missing catch/finally blocks"),new nt({body:y,bcatch:k,bfinally:T});case"var":q();d=ce();return N(),d;case"with":return E.input.has_directive("use strict")&&$("Strict mode may not include a with statement"),q(),new at({expression:I(),body:B()})}}j()});function H(){var e=X();return N(),new zn({body:e})}function ee(e){var n,t=null,e=(null!=(t=Z()?t:G(kn,!0))?((n=Me(function(e){return e.name==t.name},E.labels))||F(t.start,"Undefined label "+t.name),t.thedef=n):0==E.in_loop&&$(e.TYPE+" not inside a loop or switch"),N(),new e({label:t}));return n&&n.references.push(e),e}function v(e,n){if(D("name",e)){e=O();if(e&&!Pe(e,"operator","=")&&!("punc"==e.type&&/^[(;}]$/.test(e.value)||n&&M(e)))return q()}}function ne(e){for(var n,t=E.in_async,i=E.in_generator,r=(E.input.push_directives_stack(),E.input.add_directive("use strict"),n=e===ge?G(Ln):G(Bn,!0),null),o=(D("keyword","extends")&&(q(),R(),r=m(!0)),z("{"),[]);!D("punc","}");)if(D("punc",";"))q();else{var s=E.token,a=!!v("static"),f=v("async",!0);if(D("operator","*")){q();var c=D("name")&&/^#/.test(E.token.value),u=h(),l=E.token,p=Y(f?_e:AST_GeneratorFunction);p.start=l,p.end=C(),o.push(new Ze({start:s,static:a,private:c,key:u,value:p,end:C()}))}else if(a&&D("punc","{"))o.push(new Qe({start:s,value:new AST_ClassInitBlock({start:s,body:V(),end:C()}),end:C()}));else{c=D("name")&&/^#/.test(E.token.value),u=h();if(D("punc","(")){l=E.token,p=Y(f?de:ke);p.start=l,p.end=C(),o.push(new Ze({start:s,static:a,private:c,key:u,value:p,end:C()}))}else{f&&j(f);f=null;if(D("operator","="))q(),E.in_async=!1,E.in_generator=!1,f=_(),E.in_generator=i,E.in_async=t;else if(!D("punc",";")&&!D("punc","}")){var d=null;switch(u){case"get":d=Xe;break;case"set":d=en}if(d){o.push(new d({start:s,static:a,private:D("name")&&/^#/.test(E.token.value),key:h(),value:b(),end:C()}));continue}}N(),o.push(new AST_ClassField({start:s,static:a,private:c,key:u,value:f,end:C()}))}}}return q(),E.input.pop_directives_stack(),E.in_generator=i,E.in_async=t,new e({extends:r,name:n,properties:o})}function l(e){var n;return e instanceof T?(n=null,e.elements[e.elements.length-1]instanceof Oe&&(n=l(e.elements.pop().expression)),new we({start:e.start,elements:e.elements.map(l),rest:n,end:e.end})):e instanceof pe?new me({start:e.start,name:l(e.left),value:e.right,end:e.end}):e instanceof me?(e.name=l(e.name),e):e instanceof we?(e.elements=e.elements.map(l),e.rest&&(e.rest=l(e.rest)),e):e instanceof Se?(e.properties.forEach(function(e){e.value=l(e.value)}),e.rest&&(e.rest=l(e.rest)),e):e instanceof Te?e:e instanceof Ae?(n=null,e.properties[e.properties.length-1]instanceof Oe&&(n=l(e.properties.pop().expression)),new Se({start:e.start,properties:e.properties.map(function(e){return e instanceof Ee||F(e.start,"Invalid destructuring assignment"),new xe({start:e.start,key:e.key,value:l(e.value),end:e.end})}),rest:n,end:e.end})):e instanceof Ce?e:e instanceof Fe?new Ce(e):e instanceof ft?new Ce({start:e.start,name:"yield",end:e.end}):void F(e.start,"Invalid arrow parameter")}function u(e,n,t){var i,r,o=E.in_async,s=E.in_generator,a=(E.in_async=t,E.in_generator=!1,E.in_funarg),f=(E.in_funarg=E.in_function,e.map(l)),e=(e=e.rest||null)&&l(e),a=(E.in_funarg=a,z("=>"),E.in_loop),c=E.labels,u=(++E.in_function,E.input.push_directives_stack(),E.in_loop=0,E.labels=[],r=D("punc","{")?(E.in_directives=!0,i=V(),null):(i=[],R(),_()),E.input.has_directive("use strict")),a=(E.input.pop_directives_stack(),--E.in_function,E.in_loop=a,E.labels=c,E.in_generator=s,E.in_async=o,new(t?Be:Re)({start:n,argnames:f,rest:e,body:i,value:r,end:C()}));return u&&a.each_argname(w),a}var Y=function(e){var n,t=E.in_async,i=E.in_generator,r=(/Defun$/.test(e.TYPE)?(n=G(Un),E.in_async=/^Async/.test(e.TYPE),E.in_generator=/Generator/.test(e.TYPE)):(E.in_async=/^Async/.test(e.TYPE),E.in_generator=/Generator/.test(e.TYPE),n=G(Gn,!0)),!n||e===Ie||n instanceof Yn||j(C()),z("("),E.in_funarg),o=(E.in_funarg=E.in_function,p(")",!A.strict,!1,function(){return c(Ce)})),r=(E.in_funarg=r,E.in_loop),s=E.labels,a=(++E.in_function,E.in_directives=!0,E.input.push_directives_stack(),E.in_loop=0,E.labels=[],V()),f=E.input.has_directive("use strict"),r=(E.input.pop_directives_stack(),--E.in_function,E.in_loop=r,E.labels=s,E.in_generator=i,E.in_async=t,new e({name:n,argnames:o,rest:o.rest||null,body:a}));return f&&(n&&w(n),r.each_argname(w)),r};function te(){return D("name")||D("string")||ut(E.token.value)}function L(e){return new qe({start:e,quote:e.quote,value:e.value,end:e})}function ie(){var e=E.token;return P("string"),N(),L(e)}function U(e,n){return n.name&&((n=new e(n)).name=new(e===ge?Ln:Un)(n.name)),n}var re=n(function(){if(D("name"))switch(E.token.value){case"async":return(q(),P("keyword","function"),D("operator","*"))?(q(),Y(ve)):Y(he);case"let":q();var e=fe();return N(),e}else if(D("keyword"))switch(E.token.value){case"class":return q(),ne(ge);case"const":q();e=ae();return N(),e;case"function":return(q(),D("operator","*"))?(q(),Y(AST_GeneratorDefun)):Y(be);case"var":q();e=ce();return N(),e}j()});function V(){z("{");for(var e=[];!D("punc","}");)D("eof")&&z("}"),e.push(B());return q(),e}function oe(){z("{");for(var e,n,t,i,r=[];!D("punc","}");)D("eof")&&z("}"),D("keyword","case")?(e&&(e.end=C()),n=[],e=new We({start:(i=E.token,q(),i),expression:X(),body:n}),r.push(e),z(":")):D("keyword","default")?(e&&(e.end=C()),t&&$("More than one default clause in switch statement"),n=[],e=new sn({start:(i=E.token,q(),z(":"),i),body:n}),r.push(e),t=e):(n||j(),n.push(B()));return e&&(e.end=C()),q(),r}function r(e,n){for(var t=[];;){var i=E.token,r=W(e),o=null;if(D("operator","=")?(q(),o=_(n)):!n&&(e===Hn||r instanceof ye)&&$("Missing initializer in declaration"),t.push(new ot({start:i,name:r,value:o,end:C()})),!D("punc",","))break;q()}return t}function se(){var e=O();return Pe(e,"name")||Pe(e,"punc","[")||Pe(e,"punc","{")}var ae=function(e){return new tn({start:C(),definitions:r(Hn,e),end:C()})},fe=function(e){return new Tn({start:C(),definitions:r(Wn,e),end:C()})},ce=function(e){return new rt({start:C(),definitions:r(Kn,e),end:C()})};var m=function(e){if(D("operator","new"))return n=e,a=E.token,P("operator","new"),(f=D("punc",".")&&Pe(O(),"name","target")?(q(),q(),new En):(f=m(!1),c=D("punc","(")?(q(),p(")",!A.strict)):[],new An({expression:f,args:c}))).start=a,f.end=C(),d(f,n);var n,t,i,r=E.token;if(D("punc")){switch(r.value){case"`":return d(x(null),e);case"(":return(q(),D("punc",")"))?(q(),u([],r)):(t=X(!1,!0),i=r.comments_before.length,[].unshift.apply(t.start.comments_before,r.comments_before),r.comments_before.length=0,r.comments_before=t.start.comments_before,0==(r.comments_before_length=i)&&0<r.comments_before.length&&((i=r.comments_before[0]).nlb||(i.nlb=r.nlb,r.nlb=!1)),r.comments_after=t.start.comments_after,t.start=r,z(")"),(i=C()).comments_before=t.end.comments_before,i.comments_after.forEach(function(e){t.end.comments_after.push(e),e.nlb&&(E.token.nlb=!0)}),i.comments_after.length=0,i.comments_after=t.end.comments_after,t.end=i,D("punc","=>")?u(t instanceof Pn?t.expressions:[t],r):d(t,e));case"[":return d(g(),e);case"{":return d(y(),e)}j()}if(D("keyword"))switch(r.value){case"class":q();var o=ne(Je);return o.start=r,o.end=C(),d(o,e);case"function":return q(),(s=D("operator","*")?(q(),Y(AST_GeneratorFunction)):Y(ke)).start=r,s.end=C(),d(s,e)}if(D("name")){var s,a,f,c=ue(Fe,r);if(q(),"async"==c.name){if(D("keyword","function"))return q(),(s=D("operator","*")?(q(),Y(_e)):Y(de)).start=r,s.end=C(),d(s,e);if(D("name")&&Pe(O(),"punc","=>"))return r=E.token,c=ue(Fe,r),q(),u([c],r,!0);if(D("punc","("))return a=d(c,e),D("punc","=>")?((f=a.args)[f.length-1]instanceof Oe&&(f.rest=f.pop().expression),u(f,r,!0)):a}return D("punc","=>")?u([c],r):d(c,e)}if(mt[E.token.type])return d(function(){var e,n=E.token,t=n.value;switch(n.type){case"num":isFinite(t)?e=new On({value:t}):(e=new yn,t<0&&(e=new it({operator:"-",expression:e})));break;case"bigint":e=new Ye({value:t});break;case"string":e=new qe({value:t,quote:n.quote});break;case"regexp":e=new Fn({value:t});break;case"atom":switch(t){case"false":e=new dn;break;case"true":e=new et;break;case"null":e=new Dn;break;default:j()}break;default:j()}return q(),e.start=e.end=n,e}(),e);j()};function p(e,n,t,i){i=i||_;for(var r=!0,o=[];!D("punc",e)&&(r?r=!1:z(","),!n||!D("punc",e));)if(t&&D("punc",","))o.push(new Te({start:E.token,end:E.token}));else if(D("operator","...")){if(i!==_){q(),o.rest=i(),o.rest instanceof me&&F(o.rest.start,"Invalid rest parameter");break}o.push(new Oe({start:E.token,expression:(q(),i()),end:C()}))}else o.push(i());return z(e),o}var g=n(function(){return z("["),new T({elements:p("]",!A.strict,!0)})}),b=n(function(){return Y(Ie)}),y=n(function(){z("{");for(var e=!0,n=[];!D("punc","}")&&(e?e=!1:z(","),A.strict||!D("punc","}"));){var t=E.token;if(D("operator","*")){q();var i=h(),r=E.token,o=Y(AST_GeneratorFunction);o.start=r,o.end=C(),n.push(new De({start:t,key:i,value:o,end:C()}))}else if(D("operator","..."))q(),n.push(new Oe({start:t,expression:_(),end:C()}));else if(Pe(O(),"operator","=")){r=G(Fe);q(),n.push(new Ee({start:t,key:t.value,value:new pe({start:t,left:r,operator:"=",right:_(),end:C()}),end:C()}))}else if(Pe(O(),"punc",",")||Pe(O(),"punc","}"))n.push(new Ee({start:t,key:t.value,value:G(Fe),end:C()}));else{i=h();if(D("punc","(")){var s=E.token;(a=Y(ke)).start=s,a.end=C(),n.push(new De({start:t,key:i,value:a,end:C()}))}else if(D("punc",":"))q(),n.push(new Ee({start:t,key:i,value:_(),end:C()}));else{if("name"==t.type)switch(i){case"async":var a,f=D("operator","*")&&q(),s=(i=h(),E.token);(a=Y(f?_e:de)).start=s,a.end=C(),n.push(new De({start:t,key:i,value:a,end:C()}));continue;case"get":n.push(new qn({start:t,key:h(),value:b(),end:C()}));continue;case"set":n.push(new Cn({start:t,key:h(),value:b(),end:C()}));continue}j()}}}return q(),new Ae({properties:n})});function h(){var e=E.token;switch(e.type){case"operator":je[e.value]||j();case"num":case"string":case"name":case"keyword":case"atom":return q(),""+e.value;case"punc":z("[");var n=_();return z("]"),n;default:j()}}function ue(e,n){var t=n.value;switch(t){case"await":E.in_async&&j(n);break;case"super":e=Nn;break;case"this":e=Xn;break;case"yield":E.in_generator&&j(n)}return new e({name:""+t,start:n,end:n})}function w(e){"arguments"!=e.name&&"eval"!=e.name&&"let"!=e.name||F(e.start,"Unexpected "+e.name+" in strict mode")}function G(e,n){return D("name")?(e=ue(e,E.token),E.input.has_directive("use strict")&&e instanceof Yn&&w(e),q(),e):(n||$("Name expected"),null)}function W(e){var n,t=E.token;if(D("punc","["))return q(),n=p("]",!A.strict,!0,function(){return c(e)}),new we({start:t,elements:n,rest:n.rest||null,end:C()});if(D("punc","{")){q();for(var i=!0,r=[],o=null;!D("punc","}")&&(i?i=!1:z(","),A.strict||!D("punc","}"));){var s=E.token;if(D("punc","[")||Pe(O(),"punc",":")){var a=h();z(":"),r.push(new xe({start:s,key:a,value:c(e),end:C()}))}else{if(D("operator","...")){q(),o=W(e);break}a=G(e);D("operator","=")&&(q(),a=new me({start:a.start,name:a,value:_(),end:C()})),r.push(new xe({start:s,key:s.value,value:a,end:C()}))}}return z("}"),new Se({start:t,properties:r,rest:o,end:C()})}return G(e)}function c(e){var n=E.token,e=W(e);return D("operator","=")?(q(),new me({start:n,name:e,value:_(),end:C()})):e}function x(e){for(var n=e?e.start:E.token,t=E.input.context().read_template,i=[],r=[];t(i);)q(),r.push(X()),D("punc","}")||j();return q(),new Jn({start:n,expressions:r,strings:i,tag:e,end:C()})}function d(e,n){for(var t=e.start,i=null;;)if(D("operator","?")&&Pe(O(),"punc",".")&&(q(),q(),i=e),D("punc","[")){q();var r=X();z("]"),e=new Mn({start:t,optional:i===e,expression:e,property:r,end:C()})}else if(n&&D("punc","("))q(),e=new Ge({start:t,optional:i===e,expression:e,args:p(")",!A.strict),end:C()});else if(i===e||D("punc","."))i!==e&&q(),e=new un({start:t,optional:i===e,expression:e,property:(r=void 0,r=E.token.value,P("name"),r),end:C()});else{if(!D("punc","`"))break;i&&$("Invalid template on optional chain"),e=x(e)}if(i&&(e.terminal=!0),e instanceof Ge&&!e.pure)for(var o=(t=e.start).comments_before,s=Ne(t,"comments_before_length")?t.comments_before_length:o.length;0<=--s;)if(/[@#]__PURE__/.test(o[s].value)){e.pure=!0;break}return e}function o(e){var n,t,i=E.token;if(E.in_async&&D("name","await"))return E.in_funarg===E.in_function&&$("Invalid use of await in function argument"),E.input.context().regex_allowed=!0,q(),new He({start:i,expression:o(e),end:C()});if(E.in_generator&&D("name","yield"))return E.in_funarg===E.in_function&&$("Invalid use of yield in function argument"),E.input.context().regex_allowed=!0,q(),t=null,n=!1,D("operator","*")?(q(),t=_(e),n=!0):(D("punc")?ct[E.token.value]:Z())||(t=_(e)),new ft({start:i,expression:t,nested:n,end:C()});if(D("operator")&&dt[i.value])return q(),R(),(t=s(it,i,o(e))).start=i,t.end=C(),t;for(var r=m(!0);D("operator")&&ht[E.token.value]&&!M(E.token);)(r=s(tt,E.token,r)).start=i,r.end=E.token,q();return r}function s(e,n,t){var i=n.value;switch(i){case"++":case"--":K(t)||F(n,"Invalid use of "+i+" operator");break;case"delete":t instanceof Fe&&E.input.has_directive("use strict")&&F(t.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:i,expression:t})}var a=function(e,n,t){var i=D("operator")?E.token.value:null,r=null!=(i="in"==i&&t?null:i)?vt[i]:null;return null!=r&&n<r?(q(),r=a(o(t),"**"==i?r-1:r,t),a(new Le({start:e.start,left:e,operator:i,right:r,end:r.end}),n,t)):e};var f=function(e){var n,t=E.token,i=a(o(i=e),0,i);return D("operator","?")?(q(),n=_(),z(":"),new nn({start:t,condition:i,consequent:n,alternative:_(e),end:C()})):i};function K(e){return e instanceof $n&&!e.optional||e instanceof Fe}function J(e){var n;if(e instanceof T)return t=null,(!(e.elements[e.elements.length-1]instanceof Oe)||(t=J(e.elements.pop().expression))instanceof ye||K(t))&&(n=e.elements.map(J),le(n,function(e){return e instanceof me||e instanceof ye||e instanceof Te||K(e)}))?new we({start:e.start,elements:n,rest:t,end:e.end}):e;if(e instanceof pe)return(n=J(e.left))instanceof ye||K(n)?new me({start:e.start,name:n,value:e.right,end:e.end}):e;if(!(e instanceof Ae))return e;var t=null;if(e.properties[e.properties.length-1]instanceof Oe&&!((t=J(e.properties.pop().expression))instanceof ye||K(t)))return e;for(var i=[],r=0;r<e.properties.length;r++){var o=e.properties[r];if(!(o instanceof Ee))return e;var s=J(o.value);if(!(s instanceof me||s instanceof ye||K(s)))return e;i.push(new xe({start:o.start,key:o.key,value:s,end:o.end}))}return new Se({start:e.start,properties:i,rest:t,end:e.end})}function _(e){var n=E.token,t=f(e),i=E.token.value;if(D("operator")&&_t[i]){if(K(t)||"="==i&&(t=J(t))instanceof ye)return q(),new pe({start:n,left:t,operator:i,right:_(e),end:C()});$("Invalid assignment")}return t}function X(e,n){for(var t=E.token,i=[];;){if(n&&D("operator","...")){q(),i.rest=W(Ce);break}if(i.push(_(e)),!D("punc",","))break;if(q(),n&&D("punc",")")&&Pe(O(),"punc","=>"))break}return 1!=i.length||i.rest?new Pn({start:t,expressions:i,end:C()}):i[0]}function Q(e){++E.in_loop;e=e();return--E.in_loop,e}if(A.expression)return R(),e=X(),P("eof"),e;var e=E.token,S=[];for(A.module&&(E.in_async=!0,E.input.add_directive("use strict")),E.input.push_directives_stack();!D("eof");)S.push(B(!0));E.input.pop_directives_stack();var k=C()||e,t=A.toplevel;return t?(t.body=t.body.concat(S),t.end=k):t=new Zn({start:e,body:S,end:k}),t}return{is_identifier_string:ut,is_identifier_char:R,is_surrogate_pair_head:function(e){return 55296<=e&&e<=56319},is_surrogate_pair_tail:function(e){return 56320<=e&&e<=57343},decode_escape_sequence:B,tokenizer:pt,parse:i.parse=s,KEYWORDS:je,RESERVED_WORDS:e,KEYWORDS_BEFORE_EXPRESSION:F,KEYWORDS_ATOM:A,UNARY_POSTFIX:ht,PRECEDENCE:vt}}),define("skylark-uglifyjs/output",["./utils","./ast","./parse"],function(q,C,$){"use strict";const{defaults:J,makePredicate:X,noop:L,return_false:U,return_true:Q}=q,{AST_Array:n,AST_Arrow:F,AST_AsyncArrow:j,AST_AsyncDefun:P,AST_AsyncFunction:z,AST_AsyncGeneratorDefun:M,AST_AsyncGeneratorFunction:N,AST_Assign:t,AST_Await:o,AST_Binary:V,AST_BlockStatement:i,AST_Break:I,AST_Call:s,AST_Case:R,AST_Catch:B,AST_Class:a,AST_ClassExpression:H,AST_ClassField:Y,AST_ClassGetter:Z,AST_ClassInit:ee,AST_ClassMethod:ne,AST_ClassProperty:te,AST_ClassSetter:ie,AST_Conditional:G,AST_Const:r,AST_Constant:re,AST_Continue:oe,AST_Debugger:se,AST_Default:ae,AST_DefaultValue:f,AST_Definitions:fe,AST_DestructuredArray:ce,AST_DestructuredKeyVal:ue,AST_DestructuredObject:le,AST_Destructured:pe,AST_Directive:de,AST_Do:he,AST_Dot:_e,AST_EmptyStatement:c,AST_Exit:ve,AST_ExportDeclaration:me,AST_ExportDefault:ge,AST_ExportForeign:be,AST_ExportReferences:ye,AST_Finally:we,AST_For:xe,AST_ForAwaitOf:Se,AST_ForEnumeration:ke,AST_ForIn:Te,AST_ForOf:Ae,AST_Function:Ee,AST_GeneratorDefun:De,AST_GeneratorFunction:Oe,AST_Hole:qe,AST_If:Ce,AST_Import:$e,AST_IterationStatement:Fe,AST_Jump:je,AST_LabeledStatement:Pe,AST_Lambda:ze,AST_Let:Me,AST_New:u,AST_Node:W,AST_Number:Ne,AST_Object:Ie,AST_ObjectGetter:Re,AST_ObjectKeyVal:Be,AST_ObjectMethod:He,AST_ObjectProperty:Ye,AST_ObjectSetter:Le,AST_PropAccess:l,AST_RegExp:Ue,AST_Return:Ve,AST_Scope:Ge,AST_Sequence:We,AST_SimpleStatement:Ke,AST_Spread:Je,AST_Statement:Xe,AST_StatementWithBody:Qe,AST_String:Ze,AST_Sub:en,AST_Switch:nn,AST_SwitchBranch:tn,AST_Symbol:p,AST_SymbolExport:rn,AST_SymbolFunarg:on,AST_SymbolImport:sn,AST_Template:d,AST_Throw:an,AST_Toplevel:fn,AST_Try:cn,AST_Unary:h,AST_UnaryPostfix:un,AST_UnaryPrefix:ln,AST_Var:pn,AST_VarDef:dn,AST_While:hn,AST_With:_n,AST_Yield:K,TreeWalker:vn,is_arrow:mn,is_generator:gn,is_async:bn,first_in_statement:yn,root_expr:wn}=C,{is_identifier_char:xn,is_identifier_string:Sn,is_surrogate_pair_head:kn,is_surrogate_pair_tail:Tn,PRECEDENCE:An,RESERVED_WORDS:En}=$;function Dn(e){return"comment2"==e.type&&/@preserve|@license|@cc_on/i.test(e.value)}function On(f){f=J(f,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,extendscript:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var n,c=U;function e(e){if("number"==typeof e)return new Array(e+1).join(" ");if(!e)return"";if(/^\s*$/.test(e))return e;throw new Error("unsupported indentation: "+JSON.stringify(""+e))}f.comments&&(n=f.comments,"string"==typeof f.comments&&/^\/.*\/[a-zA-Z]*$/.test(f.comments)&&(j=f.comments.lastIndexOf("/"),n=new RegExp(f.comments.substr(1,j-1),f.comments.substr(j+1))),c=n instanceof RegExp?function(e){return"comment5"!=e.type&&n.test(e.value)}:"function"==typeof n?function(e){return"comment5"!=e.type&&n(this,e)}:"some"===n?Dn:Q);var r,o,s,a,u,l,t,p=0,d=1,i=e(f.indent_start),h=e(f.indent_level),z=h.length+1>>1,_=0,v=!0,m=f.source_map&&[],g=!1,b=!1,y="";function w(){u=a=!1,t=[];var e=l;return l=r="",e}w();var x=f.ascii_only?function(e,t){return(e=t?e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return"\\u{"+(e.charCodeAt(0)-55232<<10|e.charCodeAt(1)-56320).toString(16)+"}"}):e).replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var n=e.charCodeAt(0).toString(16);if(n.length<=2&&!t){for(;n.length<2;)n="0"+n;return"\\x"+n}for(;n.length<4;)n="0"+n;return"\\u"+n})}:function(e){for(var n="",t=0,i=0;t<e.length;t++){var r=e.charCodeAt(t);if(kn(r)){if(Tn(e.charCodeAt(t+1))){t++;continue}}else if(!Tn(r))continue;n+=e.slice(i,t)+"\\u"+r.toString(16),i=t+1}return 0==i?e:n+e.slice(i)};function S(e){return"'"+e.replace(/\x27/g,"\\'")+"'"}function k(e){return'"'+e.replace(/\x22/g,'\\"')+'"'}var M=[null,S,k,function(e,n){return("'"==n?S:k)(e)}][f.quote_style]||function(e,n,t,i){return(i<t?S:k)(e)};function T(t,e){var i=0,r=0;return t=t.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(e,n){switch(e){case'"':return++i,'"';case"'":return++r,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return f.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(t.charAt(n+1))?"\\x00":"\\0"}return e}),M(x(t),e,i,r)}var N=m?function(n,t){m.forEach(function(e){e.line+=n,e.col+=t})}:L,A=m?function(){m.forEach(function(e){f.source_map.add(e.token.file,e.line,e.col,e.token.line,e.token.col,e.name||"name"!=e.token.type?e.name:e.token.value)}),m=[]}:L;function E(e){y+=l.slice(0,_);var n=(l=l.slice(_)).length;for(N(e,n-p),d+=e,p=n;e--;)y+="\n"}var D=f.max_line_len?function(e){v?p>f.max_line_len&&W.warn("Output exceeds {max_line_len} characters",f):(p>f.max_line_len&&(E(1),v=!0),(v||e)&&A())}:L,I=X("( [ + * / - , .");function O(e,n,t){return xn(e)&&(xn(n)||"\\"==n)||"/"==n&&n==e||("+"==n||"-"==n)&&n==r||"--"==r&&">"==n||"!"==r&&"--"==t||"/"==e&&("in"==t||"instanceof"==t)}var q=f.beautify||f.comments||f.max_line_len||f.preserve_line||f.shebang||!f.semicolons||f.source_map||f.width?function(e){var n=e.charAt(0),t=(g&&n&&(g=!1,"\n"!=n)&&(q("\n"),$()),b&&n&&(b=!1,/[\s;})]/.test(n)||C()),r.slice(-1)),i=(u&&(u=!1,":"==t&&"}"==n||";"!=t&&(!n||";}".indexOf(n)<0))&&((i=I[n])||f.semicolons?(l+=";",p++,v||(D(),v&&!i&&";"==l&&(l="",p=0)),_==l.length-1&&_++):(D(),l+="\n",d++,p=0,/^\s+$/.test(e)&&(u=!0)),f.beautify||(a=!1)),a&&(O(t,n,e)&&(l+=" ",p++),"<"==t&&"!"==e||(a=!1)),s&&(m.push({token:s,name:o,line:d,col:p}),s=!1,v)&&A(),l+=e,e.split(/\r?\n/)),n=i.length-1;d+=n,p+=i[0].length,0<n&&(D(),p=i[n].length),r=e}:function(e){var n=e.charAt(0),t=r.slice(-1);u&&(u=!1,":"==t&&"}"==n||(!n||";}".indexOf(n)<0)&&";"!=t)&&(l+=";",a=!1),a&&(O(t,n,e)&&(l+=" "),"<"==t&&"!"==e||(a=!1)),l+=e,r=e},C=f.beautify?function(){q(" ")}:function(){a=!0},$=f.beautify?function(e){g&&q("\n"),q(e?i.slice(0,-z):i)}:L,R=f.beautify?function(e){var n=i;i+=h,e(),i=n}:function(e){e()},F=f.max_line_len||f.preserve_line?function(){D(),_=l.length,v=!1}:L,B=f.beautify?function(){q("\n"),_=l.length}:F,j=f.beautify?function(){q(";")}:function(){u=!0};var H=m?function(e,n){s=e,o=n}:L;function P(e,n){g||(!e.nlb||!n&&/(^|\n) *$/.test(l)?n&&(b=!0):g=!0)}function Y(e){var n=e.value.replace(/[@#]__PURE__/g," ");return(!/^\s*$/.test(n)||/^\s*$/.test(e.value))&&(/comment[134]/.test(e.type)?(q("//"+n),g=!0):"comment2"==e.type&&q("/*"+n+"*/"),1)}return{get:function(){return v||D(!0),y+l},reset:w,indent:$,should_break:f.beautify&&f.width?function(){return p>=f.width}:U,has_parens:function(){return"("==r.slice(-1)},newline:B,print:q,space:C,comma:function(){F(),q(","),F(),C()},colon:function(){q(":"),C()},last:function(){return r},semicolon:j,force_semicolon:function(){u&&q(";"),q(";")},to_utf8:x,print_name:function(e){q(x(e.toString(),!0))},print_string:f.inline_script?function(e,n){e=T(e,n).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),q(e.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(e,n){q(T(e,n))},with_indent:R,with_block:function(e,n){q("{"),B(),R(e),H(n),$(),q("}")},with_parens:function(e){q("("),F(),e(),F(),q(")")},with_square:function(e){q("["),F(),e(),F(),q("]")},add_mapping:H,option:function(e){return f[e]},prepend_comments:f.comments||f.shebang?function(e){var t,i=this;e instanceof ve?t=e.value:e instanceof K&&(t=e.expression);var r,n,o=(o=a(e))||[],s=(t&&((r=new vn(function(e){if(t=e,!((n=r.parent())instanceof V?n.left===t:"Call"==n.TYPE?n.expression===t:n instanceof G?n.condition===t:n instanceof _e?n.expression===t:n instanceof ve||(n instanceof We?n.expressions[0]===t:n instanceof en?n.expression===t:n instanceof un||n instanceof K)))return!0;var n,t=a(e);t&&(o=o.concat(t))})).push(e),t.walk(r)),1==d&&0==p&&(0<o.length&&f.shebang&&"comment5"==o[0].type&&(q("#!"+o.shift().value+"\n"),$()),n=f.preamble)&&q(n.replace(/\r\n?|\u2028|\u2029|(^|\S)\s*$/g,"$1\n")),o=o.filter(c,e),!1);function a(e){var n=e.start;if(!n){if(!t)return;e.start=n=new AST_Token}e=n.comments_before;if(!e){if(!t)return;n.comments_before=e=[]}if(e._dumped!==i)return e._dumped=i,e}o.forEach(function(e,n){P(e,n),Y(e)&&(s=!0)}),s&&P(e.start,!0)}:L,append_comments:f.comments?function(e,t){var n=e.end;n&&(n=n[t?"comments_before":"comments_after"])&&n._dumped!==this&&(e instanceof Xe||all(n,function(e){return!/comment[134]/.test(e.type)}))&&(n._dumped=this,n.filter(c,e).forEach(function(e,n){P(e,n||!t),Y(e)}))}:L,push_node:function(e){t.push(e)},pop_node:f.preserve_line?function(){var e=t.pop();e.start&&e.start.line>d&&E(e.start.line-d)}:function(){t.pop()},parent:function(e){return t[t.length-2-(e||0)]}}}function e(e,n){e.DEFMETHOD("_codegen",n)}function _(e,n){e.DEFMETHOD("needs_parens",n)}function v(e){var n=e.parent();return!e.has_parens()&&yn(e,!1,!0)?this.name||!(n instanceof ge):!!(e.option("webkit")&&n instanceof l&&n.expression===this)||!!(e.option("wrap_iife")&&n instanceof s&&n.expression===this)||void 0}function qn(e){return!e.has_parens()&&yn(e,!0)}function Cn(e){e=e.parent();return e instanceof V?"**"==e.operator&&e.left===this:e instanceof s?e.expression===this:e instanceof a||(e instanceof l?e.expression===this:e instanceof d?e.tag===this:void 0)}function $n(e,n){return!!e.terminal&&(n instanceof s||n instanceof l)&&n.expression===e}function m(e,n){n=n.parent();return n instanceof o||(n instanceof V?!(n instanceof t):n instanceof s?n.expression===e:n instanceof a||(n instanceof G?n.condition===e:n instanceof l?n.expression===e:n instanceof d?n.tag===e:n instanceof h||void 0))}function Fn(e,t,i,n){var r=e.length-1,o=n,n=O;e.forEach(function(e,n){o&&(e instanceof de?"use asm"==e.value&&(O=!0):e instanceof c||(e instanceof Ke&&e.body instanceof Ze&&i.force_semicolon(),o=!1)),e instanceof c||(i.indent(),e.print(i),n==r&&t)||(i.newline(),t&&i.newline())}),O=n}function g(e,n){n.print("{"),n.with_indent(function(){n.append_comments(e,!0)}),n.print("}")}function b(e,n,t){0<e.body.length?n.with_block(function(){Fn(e.body,!1,n,t)},e.end):g(e,n)}function jn(t,i){return function(e){var n=this;e.print(t),e.space(),e.with_parens(function(){n.init.print(e),e.space(),e.print(i),e.space(),n.object.print(e)}),E(n.body,e)}}function y(e,n){var t=e.value;"*"==t||Sn(t)?n.print_name(t):n.print_string(t,e.quote)}function Pn(e,t){t.with_parens(function(){e.argnames.forEach(function(e,n){n&&t.comma(),e.print(t)}),e.rest&&(e.argnames.length&&t.comma(),t.print("..."),e.rest.print(t))})}function zn(e,n){var t=1==e.argnames.length&&!e.rest&&e.argnames[0];t instanceof on&&"yield"!=t.name?t.print(n):Pn(e,n),n.space(),n.print("=>"),n.space(),e.value?e.value.print(n):b(e,n,!0)}function w(e,n){e.name&&(n.space(),e.name.print(n)),Pn(e,n),n.space(),b(e,n,!0)}function Mn(e){e.print("async"),e.space(),e.print("function"),w(this,e)}function Nn(e){e.print("async"),e.space(),e.print("function*"),w(this,e)}function In(e){e.print("function*"),w(this,e)}function Rn(e,n){var t=e.value;bn(t)&&(n.print("async"),n.space()),gn(t)&&n.print("*"),k(e,n),w(e.value,n)}function x(t,i){return function(e){e.print(t);var n=this[i];n&&(e.space(),n.print(e)),e.semicolon()}}function Bn(e,n){n.newline(),e.body.forEach(function(e){n.indent(),e.print(n),n.newline()})}function Hn(n){return function(t){t.print(n),t.space(),this.definitions.forEach(function(e,n){n&&t.comma(),e.print(t)});var e=t.parent();e instanceof Fe&&e.init===this||t.semicolon()}}function Yn(e,n,t){var i=!1;t&&e.walk(new vn(function(e){return!!i||(e instanceof V&&"in"==e.operator?i=!0:e instanceof Ge&&(!mn(e)||!e.value)||void 0)})),e.print(n,i)}function Ln(e,n){if(n.option("annotations")&&e.pure){var t,i=0,r=e;do{if(t=r,(r=n.parent(i++))instanceof s&&r.expression===t)return}while(r instanceof l&&r.expression===t);n.print("/*@__PURE__*/")}}function Un(e,t){t.with_parens(function(){e.args.forEach(function(e,n){n&&t.comma(),e.print(t)}),t.add_mapping(e.end)})}function S(e,t,i){var n=e.properties;0<n.length?t.with_block(function(){n.forEach(function(e,n){n&&(i||t.print(","),t.newline()),t.indent(),e.print(t)}),t.newline()},e.end):g(e,t)}function k(e,n){var t=e.key;if(t instanceof W)return n.with_square(function(){t.print(n)});var i=e.start&&e.start.quote;if(n.option("quote_keys")||i&&n.option("keep_quoted_props"))n.print_string(t,i);else if(""+ +t==t&&0<=t)n.print(Gn(t));else if(e.private)n.print_name(t);else{if(En[t]?!n.option("ie"):Sn(t))return n.print_name(t),t;n.print_string(t,i)}}function T(n){return function(e){this.static&&(e.print("static"),e.space()),e.print(n),e.space(),k(this,e),w(this.value,e)}}function A(e){var n=e.definition();return n&&n.mangled_name||e.name}function E(e,n){n.option("braces")&&!(e instanceof r||e instanceof Me)?D(e,n):e instanceof c?n.force_semicolon():(n.space(),e.print(n))}function Vn(e,n){return 0<e.args.length||n.option("beautify")}function Gn(e){for(var n,t,i=e.toString(10).replace(/^0\./,".").replace("e+","e"),r=[i],o=(Math.floor(e)===e&&r.push(e<0?"-0x"+(-e).toString(16).toLowerCase():"0x"+e.toString(16).toLowerCase()),(e=/^\.0+/.exec(i))?(n=e[0].length,t=i.slice(n),r.push(t+"e-"+(t.length+n-1))):(e=/[^0]0+$/.exec(i))?(n=e[0].length-1,r.push(i.slice(0,-n)+"e"+n)):(e=/^(\d)\.(\d+)e(-?\d+)$/.exec(i))&&r.push(e[1]+e[2]+"e"+(e[3]-e[2].length)),r),s=o[0],a=s.length,f=1;f<o.length;++f)o[f].length<a&&(a=(s=o[f]).length);return s}function D(e,n){n.space(),e instanceof c?g(e,n):e instanceof i?e.print(n):n.with_block(function(){n.indent(),e.print(n),n.newline()},e.end)}function Wn(e,n){e.forEach(function(e){e.DEFMETHOD("add_source_map",n)})}var O,Kn;return O=!1,W.DEFMETHOD("print",function(e,n){var t=this;function i(){e.prepend_comments(t),t.add_source_map(e),t._codegen(e),e.append_comments(t)}e.push_node(t),n||t.needs_parens(e)?e.with_parens(i):i(),e.pop_node()}),Kn=On({inline_script:!1,shebang:!1,width:!1}),W.DEFMETHOD("print_to_string",function(e){return e?(e=On(e),this.print(e),e.get()):(this.print(Kn),Kn.reset())}),_(W,U),_(z,v),_(N,v),_(H,v),_(Ee,v),_(Oe,v),_(Ie,qn),_(o,Cn),_(h,Cn),_(We,function(e){e=e.parent();return e instanceof n||mn(e)&&e.value===this||e instanceof o||e instanceof V||e instanceof s||e instanceof a||e instanceof te||e instanceof G||e instanceof f||e instanceof ue||e instanceof ge||e instanceof Ae||e instanceof Ye||e instanceof l&&e.expression===this||e instanceof Je||e instanceof d&&e.tag===this||e instanceof h||e instanceof dn||e instanceof K}),_(V,function(e){var n,t,i,r,e=e.parent();return e instanceof o||(e instanceof V?(n=e.operator,t=An[n],i=this.operator,(r=An[i])<t||"??"==n&&("&&"==i||"||"==i)||t==r&&this===e["**"==n?"left":"right"]):e instanceof s?e.expression===this:e instanceof a||(e instanceof l?e.expression===this:e instanceof d?e.tag===this:e instanceof h||void 0))}),_(l,function(e){e=e.parent();return e instanceof u&&e.expression===this&&"Call"==wn(this).TYPE||$n(this,e)}),_(s,function(e){var n=e.parent();if(n instanceof u)return n.expression===this;if(e.option("webkit")&&this.expression instanceof Ee&&n instanceof l&&n.expression===this){e=e.parent(1);if(e instanceof t&&e.left===n)return!0}return $n(this,n)}),_(u,function(e){return!Vn(this,e)&&((e=e.parent())instanceof s?e.expression===this:e instanceof l||(e instanceof d?e.tag===this:void 0))}),_(Ne,function(e){return!!e.option("galio")&&(e=e.parent())instanceof l&&e.expression===this&&/^0/.test(Gn(this.value))}),_(F,function(e){return m(this,e)}),_(t,function(e){return!!m(this,e)||(e.option("v8")?this.left instanceof pe:this.left instanceof le?qn(e):void 0)}),_(j,function(e){return m(this,e)}),_(G,function(e){return m(this,e)||e.option("extendscript")&&e.parent()instanceof G}),_(K,function(e){return m(this,e)}),e(de,function(e){var n=this.quote,t=this.value;switch(e.option("quote_style")){case 0:case 2:-1==t.indexOf('"')&&(n='"');break;case 1:-1==t.indexOf("'")&&(n="'")}e.print(n+t+n),e.semicolon()}),e(se,function(e){e.print("debugger"),e.semicolon()}),e(fn,function(e){Fn(this.body,!0,e,!0),e.print("")}),e(Pe,function(e){this.label.print(e),e.colon(),this.body.print(e)}),e(Ke,function(e){this.body.print(e),e.semicolon()}),e(i,function(e){b(this,e)}),e(c,function(e){e.semicolon()}),e(he,function(e){var n=this;e.print("do"),D(n.body,e),e.space(),e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),e.semicolon()}),e(hn,function(e){var n=this;e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),E(n.body,e)}),e(xe,function(e){var n=this;e.print("for"),e.space(),e.with_parens(function(){n.init?(n.init instanceof fe?n.init.print(e):Yn(n.init,e,!0),e.print(";"),e.space()):e.print(";"),n.condition?(n.condition.print(e),e.print(";"),e.space()):e.print(";"),n.step&&n.step.print(e)}),E(n.body,e)}),e(Se,jn("for await","of")),e(Te,jn("for","in")),e(Ae,jn("for","of")),e(_n,function(e){var n=this;e.print("with"),e.space(),e.with_parens(function(){n.expression.print(e)}),E(n.body,e)}),e(me,function(e){e.print("export"),e.space(),this.body.print(e)}),e(ge,function(e){e.print("export"),e.space(),e.print("default"),e.space();var n=this.body;n.print(e),n instanceof H&&!n.name||n instanceof AST_DefClass||n instanceof AST_LambdaDefinition||n instanceof AST_LambdaExpression&&!n.name&&!mn(n)||e.semicolon()}),e(be,function(t){var i=this,n=(t.print("export"),t.space(),i.keys.length);function r(e){var n=i.aliases[e],e=i.keys[e];y(e,t),n.value!=e.value&&(t.space(),t.print("as"),t.space(),y(n,t))}0==n?g(i,t):"*"==i.keys[0].value?r(0):t.with_block(function(){t.indent(),r(0);for(var e=1;e<n;e++)t.print(","),t.newline(),t.indent(),r(e);t.newline()},i.end),t.space(),t.print("from"),t.space(),i.path.print(t),t.semicolon()}),e(ye,function(e){e.print("export"),e.space(),S(this,e),e.semicolon()}),e($e,function(e){var n=this;e.print("import"),e.space(),n.default&&n.default.print(e),n.all&&(n.default&&e.comma(),n.all.print(e)),n.properties&&(n.default&&e.comma(),S(n,e)),(n.all||n.default||n.properties)&&(e.space(),e.print("from"),e.space()),n.path.print(e),e.semicolon()}),e(F,function(e){zn(this,e)}),e(j,function(e){e.print("async"),e.space(),zn(this,e)}),e(ze,function(e){e.print("function"),w(this,e)}),e(P,Mn),e(z,Mn),e(M,Nn),e(N,Nn),e(De,In),e(Oe,In),e(a,function(e){var n=this;e.print("class"),n.name&&(e.space(),n.name.print(e)),n.extends&&(e.space(),e.print("extends"),e.space(),n.extends.print(e)),e.space(),S(n,e,!0)}),e(Y,function(e){this.static&&(e.print("static"),e.space()),k(this,e),this.value&&(e.space(),e.print("="),e.space(),this.value.print(e)),e.semicolon()}),e(Z,T("get")),e(ie,T("set")),e(ne,function(e){this.static&&(e.print("static"),e.space()),Rn(this,e)}),e(ee,function(e){e.print("static"),e.space(),b(this.value,e)}),e(Ve,x("return","value")),e(an,x("throw","value")),e(I,x("break","label")),e(oe,x("continue","label")),e(Ce,function(e){var n=this;e.print("if"),e.space(),e.with_parens(function(){n.condition.print(e)}),n.alternative?(function(e,n){var t=e.body;if(n.option("braces")&&!(t instanceof r||t instanceof Me)||n.option("ie")&&t instanceof he)return D(t,n);if(!t)return n.force_semicolon();for(;;)if(t instanceof Ce){if(!t.alternative)return D(e.body,n);t=t.alternative}else{if(!(t instanceof Qe))break;t=t.body}E(e.body,n)}(n,e),e.space(),e.print("else"),n.alternative instanceof Ce?(e.space(),n.alternative.print(e)):E(n.alternative,e)):E(n.body,e)}),e(nn,function(t){var e=this,i=(t.print("switch"),t.space(),t.with_parens(function(){e.expression.print(t)}),t.space(),e.body.length-1);i<0?g(e,t):t.with_block(function(){e.body.forEach(function(e,n){t.indent(!0),e.print(t),n<i&&0<e.body.length&&t.newline()})},e.end)}),e(ae,function(e){e.print("default:"),Bn(this,e)}),e(R,function(e){e.print("case"),e.space(),this.expression.print(e),e.print(":"),Bn(this,e)}),e(cn,function(e){var n=this;e.print("try"),e.space(),b(n,e),n.bcatch&&(e.space(),n.bcatch.print(e)),n.bfinally&&(e.space(),n.bfinally.print(e))}),e(B,function(e){var n=this;e.print("catch"),n.argname&&(e.space(),e.with_parens(function(){n.argname.print(e)})),e.space(),b(n,e)}),e(we,function(e){e.print("finally"),e.space(),b(this,e)}),e(r,Hn("const")),e(Me,Hn("let")),e(pn,Hn("var")),e(dn,function(e){var n;this.name.print(e),this.value&&(e.space(),e.print("="),e.space(),n=(n=e.parent(1))instanceof xe||n instanceof ke,Yn(this.value,e,n))}),e(f,function(e){this.name.print(e),e.space(),e.print("="),e.space(),this.value.print(e)}),e(s,function(e){Ln(this,e),this.expression.print(e),this.optional&&e.print("?."),Un(this,e)}),e(u,function(e){Ln(this,e),e.print("new"),e.space(),this.expression.print(e),Vn(this,e)&&Un(this,e)}),e(We,function(t){this.expressions.forEach(function(e,n){0<n&&(t.comma(),t.should_break())&&(t.newline(),t.indent()),e.print(t)})}),e(_e,function(e){var n=this,t=n.expression,i=(t.print(e),n.property);e.option("ie")&&En[i]||n.quoted&&e.option("keep_quoted_props")?(n.optional&&e.print("?."),e.with_square(function(){e.add_mapping(n.end),e.print_string(i)})):(t instanceof Ne&&!/[ex.)]/i.test(e.last())&&e.print("."),e.print(n.optional?"?.":"."),e.add_mapping(n.end),e.print_name(i))}),e(en,function(e){var n=this;n.expression.print(e),n.optional&&e.print("?."),e.with_square(function(){n.property.print(e)})}),e(Je,function(e){e.print("..."),this.expression.print(e)}),e(ln,function(e){var n=this.operator,t=this.expression;e.print(n),(/^[a-z]/i.test(n)||/[+-]$/.test(n)&&t instanceof ln&&/^[+-]/.test(t.operator))&&e.space(),t.print(e)}),e(un,function(e){this.expression.print(e),e.add_mapping(this.end),e.print(this.operator)}),e(V,function(e){this.left.print(e),e.space(),e.print(this.operator),e.space(),this.right.print(e)}),e(G,function(e){this.condition.print(e),e.space(),e.print("?"),e.space(),this.consequent.print(e),e.space(),e.colon(),this.alternative.print(e)}),e(o,function(e){e.print("await"),e.space(),this.expression.print(e)}),e(K,function(e){e.print(this.nested?"yield*":"yield"),this.expression&&(e.space(),this.expression.print(e))}),e(n,function(t){var e=this.elements,i=e.length;t.with_square(0<i?function(){t.space(),e.forEach(function(e,n){n&&t.comma(),e.print(t),n===i-1&&e instanceof qe&&t.comma()}),t.space()}:L)}),e(ce,function(t){var e=this.elements,n=e.length,i=this.rest;t.with_square(n||i?function(){t.space(),e.forEach(function(e,n){n&&t.comma(),e.print(t)}),i?(n&&t.comma(),t.print("..."),i.print(t)):e[n-1]instanceof qe&&t.comma(),t.space()}:L)}),e(ue,function(e){var n=k(this,e),t=this.value;if(n)if(t instanceof f){if(t.name instanceof p&&n==A(t.name))return e.space(),e.print("="),e.space(),void t.value.print(e)}else if(t instanceof p&&n==A(t))return;e.colon(),t.print(e)}),e(le,function(t){var e=this.properties,n=e.length,i=this.rest;n||i?t.with_block(function(){e.forEach(function(e,n){n&&(t.print(","),t.newline()),t.indent(),e.print(t)}),i&&(n&&(t.print(","),t.newline()),t.indent(),t.print("..."),i.print(t)),t.newline()},this.end):g(this,t)}),e(Ie,function(e){S(this,e)}),e(Be,function(e){k(this,e),e.colon(),this.value.print(e)}),e(He,function(e){Rn(this,e)}),e(Re,T("get")),e(Le,T("set")),e(p,function(e){e.print_name(A(this))}),e(rn,function(e){var n=A(this),t=(e.print_name(n),this.alias);t.value!=n&&(e.space(),e.print("as"),e.space(),y(t,e))}),e(sn,function(e){var n=A(this),t=this.key;t.value&&t.value!=n&&(y(t,e),e.space(),e.print("as"),e.space()),e.print_name(n)}),e(qe,L),e(d,function(e){var n=this;n.tag&&n.tag.print(e),e.print("`");for(var t=0;t<n.expressions.length;t++)e.print(n.strings[t]),e.print("${"),n.expressions[t].print(e),e.print("}");e.print(n.strings[t]),e.print("`")}),e(re,function(e){e.print(""+this.value)}),e(Ze,function(e){e.print_string(this.value,this.quote)}),e(Ne,function(e){var n=this.start;O&&n&&null!=n.raw?e.print(n.raw):e.print(Gn(this.value))}),e(Ue,function(e){var n=this.value,t=n.toString(),i=t.lastIndexOf("/");n.raw_source?t="/"+n.raw_source+t.slice(i):1==i?t="/(?:)"+t.slice(i):t.indexOf("/",1)<i&&(t="/"+t.slice(1,i).replace(/\\\\|[^/]?\//g,function(e){return"\\"==e[0]?e:e.slice(0,-1)+"\\/"})+t.slice(i)),e.print(e.to_utf8(t).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(e){switch(e[1]){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\t";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}).replace(/[\n\r\u2028\u2029]/g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}),Wn([W,Pe],L),Wn([n,o,i,B,re,se,fe,pe,de,we,je,ze,u,Ie,Je,Qe,p,nn,tn,cn,ln,K],function(e){e.add_mapping(this.start)}),Wn([te,ue,Ye],function(e){"string"==typeof this.key&&e.add_mapping(this.start,this.key)}),{OutputStream:On}}),define("skylark-uglifyjs/scope",["./utils","./ast","./parse"],function(z,M,N){"use strict";const{defaults:n,find_if:I,member:R,push_uniq:_,return_false:B,return_this:H,DEF_BITPROPS:Y,makePredicate:t,Dictionary:c}=z,{AST_Arrow:L,AST_Assign:U,AST_AsyncArrow:V,AST_Block:G,AST_Catch:W,AST_Conditional:K,AST_DefClass:J,AST_Definitions:X,AST_DefaultValue:Q,AST_Defun:Z,AST_Destructured:v,AST_DestructuredKeyVal:ee,AST_Dot:i,AST_ExportDeclaration:m,AST_ForEnumeration:ne,AST_IterationStatement:te,AST_Label:g,AST_LabeledStatement:u,AST_Lambda:b,AST_LambdaDefinition:y,AST_LambdaExpression:ie,AST_LoopControl:re,AST_Node:oe,AST_PropAccess:se,AST_Scope:w,AST_Sequence:r,AST_String:ae,AST_Sub:fe,AST_SwitchBranch:ce,AST_Symbol:x,AST_SymbolCatch:S,AST_SymbolClass:ue,AST_SymbolConst:k,AST_SymbolDeclaration:le,AST_SymbolDefClass:pe,AST_SymbolDefun:T,AST_SymbolFunarg:A,AST_SymbolImport:de,AST_SymbolLambda:E,AST_SymbolLet:D,AST_SymbolRef:he,AST_SymbolVar:O,AST_Toplevel:l,AST_Try:_e,AST_VarDef:ve,AST_With:me,TreeWalker:e,walk_body:q,walk_lambda:ge,AST_BlockScope:C,AST_Unary:be,is_arrow:ye}=M,p=N["RESERVED_WORDS"];function o(e,n,t,i){this._bits=0,this.defun=void 0,this.eliminated=0,this.id=e,this.init=i,this.mangled_name=null,this.name=t.name,this.orig=[t],this.references=[],this.replaced=0,this.safe_ids=void 0,this.scope=n}function we(e){return e.orig[0]instanceof A||e.orig[1]instanceof A}o.prototype={forEach:function(e){this.orig.forEach(e),this.references.forEach(e)},mangle:function(e){var n,t;this.mangled_name||((n=this.global&&e.cache&&e.cache.props)&&n.has(this.name)?this.mangled_name=n.get(this.name):this.unmangleable(e)?d(this.scope,e).set(this.name,!0):(t=this.redefined(),this.mangled_name=t?t.mangled_name||t.name:function(e,t){var n,i=e.scope,r=d(i,t),o=i.cname_holes,s=new c,a=[i];e.forEach(function(e){var n=e.scope;do{if(R(n,a))break;d(n,t).each(function(e,n){s.set(n,e)}),a.push(n)}while(n=n.parent_scope)});for(var f=0;f<o.length;f++)if(n=j(o[f]),!s.has(n))return o.splice(f,1),r.set(n,!0),n;for(;;)if(n=j(++i.cname),!(r.has(n)||p[n]||t.reserved.has[n])){if(!s.has(n))break;o.push(i.cname)}return r.set(n,!0),n}(this,e),n&&n.set(this.name,this.mangled_name)))},redefined:function(){var n,e=this.defun;if(e)return n=this.name,(e=e.variables.get(n)||e instanceof l&&e.globals.get(n)||this.orig[0]instanceof k&&I(function(e){return e.name==n},e.enclosed))&&e!==this?e.redefined()||e:void 0},unmangleable:function(e){if(this.exported)return!0;if(this.undeclared)return!0;if(!e.eval&&this.scope.pinned())return!0;if(e.keep_fargs&&we(this))return!0;if(e.keep_fnames){var n=this.orig[0];if(n instanceof ue)return!0;if(n instanceof pe)return!0;if(n instanceof T)return!0;if(n instanceof E)return!0}return!(e.toplevel||!this.global)}},Y(o,["const_redefs","cross_loop","direct_access","exported","global","undeclared"]);var xe=t("delete ++ --");function Se(e,n){return n instanceof U?n.left===e&&e:n instanceof Q?n.name===e&&e:n instanceof v||n instanceof ee?e:n instanceof ne?n.init===e&&e:n instanceof be?xe[n.operator]&&n.expression:void 0}function ke(e,n){e.enclosed=[],e.parent_scope=n,e.functions=new c,e.variables=new c,n&&(e.make_def=n.make_def)}function s(e,n){ke(e,n),e.uses_eval=!1,e.uses_with=!1}function d(e,n){var t,i=e.names_in_use;return i||(e.cname=-1,e.cname_holes=[],e.names_in_use=i=new c,t=n.cache&&n.cache.props,e.enclosed.forEach(function(e){e.unmangleable(n)&&i.set(e.name,!0),e.global&&t&&t.has(e.name)&&i.set(t.get(e.name),!0)})),i}function h(e){return e=n(e,{eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(e.reserved)||(e.reserved=[]),_(e.reserved,"arguments"),e.reserved.has=t(e.reserved),e}l.DEFMETHOD("figure_out_scope",function(u){u=n(u,{cache:null,ie:!1});var l=this,s=null,a=!1,t=0,f=l.parent_scope=null,p=new e(function(i,e){var n,t;if(i instanceof J)return n=a,a=p.parent()instanceof m,i.name.walk(p),a=n,o(function(){i.extends&&i.extends.walk(p),i.properties.forEach(function(e){e.walk(p)})}),!0;if(i instanceof X)return n=a,a=p.parent()instanceof m,e(),a=n,!0;if(i instanceof y)return n=a,a=p.parent()instanceof m,i.name.walk(p),a=n,o(function(){i.argnames.forEach(function(e){e.walk(p)}),i.rest&&i.rest.walk(p),q(i,p)}),!0;if(i instanceof ce)return i.init_vars(f),e(),!0;if(i instanceof _e)return o(function(){q(i,p)}),i.bcatch&&i.bcatch.walk(p),i.bfinally&&i.bfinally.walk(p),!0;if(i instanceof me){for(var r=f;!(r=r.resolve()).uses_with&&(r.uses_with=!0,r=r.parent_scope););return o(e),!0}if(i instanceof C)return o(e),!0;function o(e){i.init_vars(f);var n=s,t=f;i instanceof w&&(s=i),f=i,e(),f=t,s=n}i instanceof x&&(i.scope=f),i instanceof g&&((i.thedef=i).references=[]),i instanceof S?f.def_variable(i).defun=s:i instanceof k?((t=f.def_variable(i)).defun=s,a&&(t.exported=!0)):i instanceof T?(t=s.def_function(i,p.parent()),a&&(t.exported=!0)):i instanceof A?s.def_variable(i):i instanceof E?(t=s.def_function(i,"arguments"==i.name?void 0:s),u.ie&&"arguments"!=i.name&&(t.defun=s.parent_scope.resolve())):i instanceof D?(t=f.def_variable(i),a&&(t.exported=!0)):i instanceof O&&(t=s.def_variable(i,i instanceof de?void 0:null),a)&&(t.exported=!0)}),d=(l.make_def=function(e,n){return new o(++t,this,e,n)},l.walk(p),l.globals=new c,[]),p=new e(function(e){if(e instanceof W)return e.argname instanceof v?(d.push(e),e.argname.walk(p),d.pop(),q(e,p),!0):void 0;if(e instanceof b)return d.push(e),e.name&&e.name.walk(p),e.argnames.forEach(function(e){e.walk(p)}),e.rest&&e.rest.walk(p),d.pop(),ge(e,p),!0;if(e instanceof re)return e.label&&e.label.thedef.references.push(e),!0;if(e instanceof le){var n,t=e.definition();if(t.preinit=t.references.length,e instanceof S){if(n=t.redefined())for(var i=e.scope;i&&_(i.enclosed,n)&&i!==n.scope;i=i.parent_scope);}else e instanceof k?(n=t.redefined())&&(n.const_redefs=!0):t.scope!==e.scope&&(e instanceof T||e instanceof A||e instanceof O)&&(e.mark_enclosed(u),n=e.scope.find_variable(e.name),e.thedef!==n)&&((e.thedef=n).orig.push(e),e.mark_enclosed(u));return"arguments"!=e.name||(r=e instanceof O&&p.parent())instanceof ve&&!r.value||(s=e.scope.resolve().find_variable("arguments"))&&h(s)&&(s.scope.uses_arguments=3),!0}if(e instanceof he){for(var r,o=e.name,s=e.scope.find_variable(o),a=d.length;0<a&&s&&!((a=d.lastIndexOf(s.scope,a-1))<0);){var f=s.orig[0];if(f instanceof S||f instanceof A||f instanceof E){e.in_arg=!0;break}s=s.scope.parent_scope.find_variable(o)}if(s?"arguments"==o&&h(s)&&(Se(e,r=p.parent())?s.scope.uses_arguments=3:s.scope.uses_arguments<2&&!(r instanceof se&&r.expression===e)?s.scope.uses_arguments=2:s.scope.uses_arguments||(s.scope.uses_arguments=!0)):s=l.def_global(e),"eval"==o)if("Call"==(r=p.parent()).TYPE&&r.expression===e)for(i=e.scope;!(i=i.resolve()).uses_eval&&(i.uses_eval=!0,i=i.parent_scope););else s.undeclared&&(l.uses_eval=!0);if(s.init instanceof y&&s.scope!==s.init.name.scope){var c=e.scope;do{if(c===s.init.name.scope)break}while(c=c.parent_scope);c||(s.init=void 0)}return e.thedef=s,e.reference(u),!0}});function h(e){return e.orig[0]instanceof A&&!(e.orig[1]instanceof A||e.orig[2]instanceof A)&&!ye(e.scope)}function i(e,n){var t,i,r=e.name,o=e.thedef;if(all(o.orig,function(e){return!(e instanceof k||e instanceof D)}))return(t=n.find_variable(r))?(i=t.redefined())&&(t=i):t=l.globals.get(r),t?t.orig.push(e):t=n.def_variable(e),t.undeclared&&l.variables.set(r,t),"arguments"==r&&h(o)&&e instanceof E||(o.defun=t.scope,o.forEach(function(e){e.redef=o,e.thedef=t,e.reference(u)})),1}l.walk(p),u.ie&&l.walk(new e(function(e){var n,t;return e instanceof S?(n=(t=e.thedef).defun,i(e,n="arguments"!=t.name&&n.name instanceof E&&n.name.name==t.name?n.parent_scope.resolve():n),!0):e instanceof E?(t=e.thedef,i(e,e.scope.parent_scope.resolve())?void 0!==e.thedef.init?e.thedef.init=!1:t.init&&(e.thedef.init=t.init):t.defun=void 0,!0):void 0}))}),l.DEFMETHOD("def_global",function(e){var n=this.globals,t=e.name;return n.has(t)?n.get(t):((e=this.make_def(e)).undeclared=!0,e.global=!0,n.set(t,e),e)}),C.DEFMETHOD("init_vars",function(e){ke(this,e)}),w.DEFMETHOD("init_vars",function(e){s(this,e)}),L.DEFMETHOD("init_vars",function(e){return s(this,e),this}),V.DEFMETHOD("init_vars",function(e){s(this,e)}),b.DEFMETHOD("init_vars",function(e){return s(this,e),this.uses_arguments=!1,this.def_variable(new A({name:"arguments",scope:this,start:this.start,end:this.end})),this}),x.DEFMETHOD("mark_enclosed",function(e){for(var n=this.definition(),t=this.scope;t&&_(t.enclosed,n)&&(e?(e.keep_fargs&&t instanceof b&&t.each_argname(function(e){_(n.scope.enclosed,e.definition())}),e.keep_fnames&&t.functions.each(function(e){_(n.scope.enclosed,e)})):t._var_names=void 0,t!==n.scope);t=t.parent_scope);}),x.DEFMETHOD("reference",function(e){this.definition().references.push(this),this.mark_enclosed(e)}),C.DEFMETHOD("find_variable",function(e){return this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),C.DEFMETHOD("def_function",function(e,n){var t=this.def_variable(e,n);return(!t.init||t.init instanceof y)&&(t.init=n),this.functions.set(e.name,t),t}),C.DEFMETHOD("def_variable",function(e,n){var t=this.variables.get(e.name);return t?(t.orig.push(e),t.init instanceof ie&&(t.init=n)):(t=this.make_def(e,n),this.variables.set(e.name,t),t.global=!this.parent_scope),e.thedef=t}),x.DEFMETHOD("unmangleable",function(e){var n=this.definition();return!n||n.unmangleable(e)}),g.DEFMETHOD("unmangleable",B),x.DEFMETHOD("definition",function(){return this.thedef}),l.DEFMETHOD("mangle_names",function(o){(o=h(o)).cache&&o.cache.props&&(n=d(this,o),o.cache.props.each(function(e){n.set(e,!0)}));var n,s=-1,a=[],f=new e(function(e,n){var t,i,r;if(e instanceof C)return e instanceof u&&(t=s),o.webkit&&e instanceof te&&e.init instanceof AST_Let&&e.init.definitions.forEach(function(e){e.name.match_symbol(function(e){var n,t,i;e instanceof D&&(n=e.definition(),t=e.scope.parent_scope,i=t.def_variable(e),e.thedef=n,t.to_mangle.push(i),n.redefined=function(){return i})})},!0),i=e.to_mangle=[],e.variables.each(function(e){!function(n){var e=n.orig[0],t=n.redefined();if(!t){if(!(e instanceof k))return;var i=n.scope.resolve();if(n.scope===i)return;if(n.scope.parent_scope.find_variable(e.name))return;t=i.def_variable(e),i.to_mangle.push(t)}a.push(n),n.references.forEach(r),(e instanceof S||e instanceof k)&&(r(e),n.redefined=function(){return t});return 1;function r(e){e.thedef=t,e.reference(o),e.thedef=n}}(e)&&i.push(e)}),n(),o.cache&&e instanceof l&&e.globals.each(c),e instanceof Z&&f.has_directive("use asm")&&((n=new he(e.name)).scope=e,n.reference(o)),(i=36<i.length?(n=i.map(function(e,n){return n}).sort(function(e,n){return i[n].references.length-i[e].references.length||e-n})).slice(0,36).sort(function(e,n){return e-n}).map(function(e){return i[e]}).concat(n.slice(36).sort(function(e,n){return e-n}).map(function(e){return i[e]})):i).forEach(c),!(e instanceof u)||o.v8&&function(e){var n,t=0;for(;n=e.parent(t++);){if(n instanceof G)return n instanceof l&&!o.toplevel;if(n instanceof u)return 1}}(f)||(s=t),!0;if(e instanceof g){for(;r=j(++s),p[r];);return e.mangled_name=r,!0}});function c(e){o.reserved.has[e.name]||e.mangle(o)}this.walk(f),a.forEach(c)}),l.DEFMETHOD("find_colliding_names",function(t){var i=t.cache&&t.cache.props,n=Object.create(p);return t.reserved.forEach(r),this.globals.each(o),this.walk(new e(function(e){e instanceof C&&e.variables.each(o)})),n;function r(e){n[e]=!0}function o(e){var n=e.name;if(e.global&&i&&i.has(n))n=i.get(n);else if(!e.unmangleable(t))return;r(n)}}),l.DEFMETHOD("expand_names",function(i){j.reset(),j.sort(),i=h(i);var r=this.find_colliding_names(i),o=0;function n(n){var e,t;n.global&&i.cache||n.unmangleable(i)||i.reserved.has[n.name]||(e=n.redefined(),t=e?e.rename||e.name:function(){for(var e;e=j(o++),r[e];);return e}(),n.rename=t,n.forEach(function(e){e.definition()===n&&(e.name=t)}))}this.globals.each(n),this.walk(new e(function(e){e instanceof C&&e.variables.each(n)}))}),oe.DEFMETHOD("tail_node",H),r.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),l.DEFMETHOD("compute_char_frequency",function(e){e=h(e),j.reset();var n=x.prototype.add_source_map;try{x.prototype.add_source_map=function(){this.unmangleable(e)||j.consider(this.name,-1)},e.properties&&(i.prototype.add_source_map=function(){j.consider(this.property,-1)},fe.prototype.add_source_map=function(){!function e(n){n instanceof ae?j.consider(n.value,-1):n instanceof K?(e(n.consequent),e(n.alternative)):n instanceof r&&e(n.tail_node())}(this.property)}),j.consider(this.print_to_string(),1)}finally{x.prototype.add_source_map=n,delete i.prototype.add_source_map,delete fe.prototype.add_source_map}j.sort()});a=Object.create(null),Te=Ae("0123456789"),F=Ae("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_"),P.consider=function(e,n){for(var t=e.length;0<=--t;)$[e[t]]+=n},P.sort=function(){f=F.sort(De).concat(Te).sort(De)},(P.reset=Ee)();var a,f,$,Te,F,j=P;function Ae(e){for(var n=[],t=0;t<e.length;t++){var i=e[t];n.push(i),a[i]=-.01*t}return n}function Ee(){f=null,$=Object.create(a)}function De(e,n){return $[n]-$[e]}function P(e){var n=F[e%54];for(e=Math.floor(e/54);0<=--e;e>>=6)n+=f[63&e];return n}return{base54:j,is_lhs:Se,is_funarg:we,unary_side_effects:xe}}),define("skylark-uglifyjs/compress",["./utils","./ast","./output","./parse","./scope"],function(e,n,t,i,r){"use strict";const{AST_Accessor:Ke,AST_Array:ye,AST_Arrow:h,AST_Assign:we,AST_AsyncArrow:_,AST_AsyncDefun:ne,AST_AsyncFunction:te,AST_AsyncGeneratorDefun:ie,AST_AsyncGeneratorFunction:re,AST_Atom:o,AST_Await:Je,AST_BigInt:s,AST_Binary:xe,AST_Block:Xe,AST_BlockScope:Qe,AST_BlockStatement:Se,AST_Boolean:l,AST_Break:F,AST_Call:ke,AST_Case:Ze,AST_Catch:oe,AST_Class:en,AST_ClassExpression:se,AST_ClassField:nn,AST_ClassGetter:a,AST_ClassInit:tn,AST_ClassInitBlock:f,AST_ClassMethod:p,AST_ClassProperty:c,AST_ClassSetter:u,AST_Conditional:Te,AST_Const:ae,AST_Constant:T,AST_Continue:j,AST_Debugger:rn,AST_Default:on,AST_DefaultValue:Ae,AST_DefClass:fe,AST_Definitions:sn,AST_Defun:an,AST_Destructured:Ee,AST_DestructuredArray:fn,AST_DestructuredKeyVal:cn,AST_DestructuredObject:un,AST_Directive:x,AST_Do:ln,AST_Dot:pn,AST_DWLoop:dn,AST_EmptyStatement:Z,AST_Exit:hn,AST_ExportDeclaration:ce,AST_ExportDefault:ue,AST_ExportReferences:v,AST_False:le,AST_Finally:O,AST_For:_n,AST_ForAwaitOf:g,AST_ForEnumeration:vn,AST_ForIn:k,AST_Function:mn,AST_Hole:pe,AST_If:De,AST_Import:A,AST_Infinity:m,AST_IterationStatement:gn,AST_Jump:P,AST_LabeledStatement:de,AST_Lambda:Oe,AST_LambdaDefinition:bn,AST_LambdaExpression:yn,AST_Let:wn,AST_LoopControl:xn,AST_NaN:b,AST_New:y,AST_NewTarget:w,AST_Node:qe,AST_Null:E,AST_Number:Ce,AST_Object:Sn,AST_ObjectKeyVal:kn,AST_ObjectGetter:S,AST_ObjectProperty:Tn,AST_ObjectIdentity:An,AST_ObjectMethod:D,AST_ObjectSetter:q,AST_PropAccess:$e,AST_RegExp:G,AST_Return:Fe,AST_Scope:je,AST_Sequence:Pe,AST_SimpleStatement:ze,AST_Spread:Me,AST_Statement:C,AST_String:U,AST_Sub:En,AST_Super:W,AST_Switch:Dn,AST_SwitchBranch:z,AST_Symbol:On,AST_SymbolCatch:he,AST_SymbolClass:$,AST_SymbolConst:M,AST_SymbolDeclaration:qn,AST_SymbolDefun:Cn,AST_SymbolExport:N,AST_SymbolFunarg:Ne,AST_SymbolImport:_e,AST_SymbolLambda:ve,AST_SymbolLet:I,AST_SymbolRef:Ie,AST_SymbolVar:$n,AST_Template:Fn,AST_This:R,AST_Throw:jn,AST_Toplevel:Pn,AST_True:B,AST_Try:zn,AST_Unary:Mn,AST_UnaryPostfix:Nn,AST_UnaryPrefix:Re,AST_Undefined:Be,AST_Var:ee,AST_VarDef:He,AST_While:In,AST_With:Rn,AST_Yield:Bn,TreeTransformer:Hn,TreeWalker:Ye,first_in_statement:H,root_expr:Yn,is_arrow:Ln,is_generator:Un,is_statement:Vn,is_async:Gn,walk_body:Y,walk_lambda:L}=n,{all:Le,defaults:K,Dictionary:Wn,find_if:me,HOP:J,List:Kn,makePredicate:X,member:Jn,noop:ge,push_uniq:be,remove:Q,return_false:Ue,return_null:Xn,return_true:V,return_this:Qn}=e,{JS_Parse_Error:Zn,parse:et,PRECEDENCE:nt,decode_escape_sequence:tt,is_identifier_string:it,UNARY_POSTFIX:rt}=i,ot=t["OutputStream"],{is_lhs:st,is_funarg:at,unary_side_effects:ft}=r;function ct(e,n){if(!(this instanceof ct))return new ct(e,n);Hn.call(this,this.before,this.after),this.options=K(e,{annotations:!n,arguments:!n,arrows:!n,assignments:!n,awaits:!n,booleans:!n,collapse_vars:!n,comparisons:!n,conditionals:!n,dead_code:!n,default_values:!n,directives:!n,drop_console:!1,drop_debugger:!n,evaluate:!n,expression:!1,functions:!n,global_defs:!1,hoist_exports:!n,hoist_funs:!1,hoist_props:!n,hoist_vars:!1,ie:!1,if_return:!n,imports:!n,inline:!n,join_vars:!n,keep_fargs:n,keep_fnames:!1,keep_infinity:!1,loops:!n,merge_vars:!n,module:!1,negate_iife:!n,objects:!n,optional_chains:!n,passes:1,properties:!n,pure_funcs:null,pure_getters:!n&&"strict",reduce_funcs:!n,reduce_vars:!n,rests:!n,sequences:!n,side_effects:!n,spreads:!n,strings:!n,switches:!n,templates:!n,top_retain:null,toplevel:!(!e||!e.module&&!e.top_retain),typeofs:!n,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!n,varify:!n,webkit:!1,yields:!n},!0);var e=this.options.evaluate,t=(this.eval_threshold=/eager/.test(e)?1/0:+e,this.options.global_defs);if("object"==typeof t)for(var i in t)/^@/.test(i)&&J(t,i)&&(t[i.slice(1)]=et(t[i],{expression:!0}));!0===this.options.inline&&(this.options.inline=4),this.drop_fargs=this.options.keep_fargs?Ue:function(e,n){var t;return!e.length_read&&((t=e.name)?t.fixed_value()===e&&!(t=t.definition()).direct_access&&(t=t.escaped)&&1!=t.depth:n&&"Call"==n.TYPE&&n.expression===e)},this.options.module&&(this.directives["use strict"]=!0);var r=this.options.pure_funcs,n=("function"==typeof r?this.pure_funcs=r:"string"==typeof r?this.pure_funcs=function(e){var n;return e instanceof ke?n=e.expression:e instanceof Fn&&(n=e.tag),!(n&&r===n.print_to_string())}:Array.isArray(r)?this.pure_funcs=function(e){var n;return e instanceof ke?n=e.expression:e instanceof Fn&&(n=e.tag),!(n&&Jn(n.print_to_string(),r))}:this.pure_funcs=V,this.options.sequences),o=(this.sequences_limit=1==n?800:0|n,this.options.top_retain),e=(o instanceof RegExp?this.top_retain=function(e){return o.test(e.name)}:"function"==typeof o?this.top_retain=o:o&&("string"==typeof o&&(o=o.split(/,/)),this.top_retain=function(e){return Jn(e.name,o)}),this.options.toplevel);this.toplevel="string"==typeof e?{funcs:/funcs/.test(e),vars:/vars/.test(e)}:{funcs:e,vars:e}}function ut(e,n){var t,i=n.get_property();if(!(i instanceof qe)){if(e instanceof ye){n=e.elements;if("length"==i)return Jt(n.length,e);"number"==typeof i&&i in n&&(t=n[i])}else if(e instanceof Oe){if("length"==i)return e.length_read=!0,Jt(e.argnames.length,e)}else if(e instanceof Sn)for(var i=""+i,r=e.properties,o=r.length;0<=--o;){if(!$r(r[o]))return;t||r[o].key!==i||(t=r[o].value)}return t instanceof Ie&&t.fixed_value()||t}}function lt(e,n,t,i,r,o,s){var a=n.parent(r);if(!(e.option("unsafe")&&a instanceof pn&&(f=i,u=a.property,f instanceof l?no.Boolean[u]:f instanceof Ce?no.Number[u]:f instanceof U?no.String[u]:"valueOf"!=u&&(f instanceof ye?no.Array[u]:f instanceof Oe?no.Function[u]:f instanceof Sn?no.Object[u]:f instanceof G&&no.RegExp[u]&&!f.value.global)))){var f,c,u=st(t,a);if(u)return u;if(0!=r||!i||!i.is_constant()){if(a instanceof ye)return lt(e,n,a,a,r+1);if(a instanceof we)switch(a.operator){case"=":return lt(e,n,a,i,r+1,o,s);case"&&=":case"||=":case"??=":return lt(e,n,a,a,r+1);default:return}return a instanceof xe?We[a.operator]?lt(e,n,a,a,r+1):void 0:a instanceof ke?!o&&a.expression===t&&!a.is_expr_pure(e)&&(!(i instanceof yn)||!(a instanceof y)&&i.contains_this()):a instanceof Te?a.condition===t?void 0:lt(e,n,a,a,r+1):a instanceof vn?a.init===t:a instanceof kn?a.value!==t?void 0:(f=n.parent(r+1),lt(e,n,f,f,r+2)):a instanceof $e?a.expression!==t?void 0:(c=ut(i,a),(!o||s)&&lt(e,n,a,c,r+1)):a instanceof Pe&&a.tail_node()===t?lt(e,n,a,i,r+1,o,s):void 0}}}function pt(e){return e instanceof en||e instanceof Oe}function dt(e){return e instanceof en||e instanceof an||e instanceof mn}function ht(e){return"arguments"==e.name&&e.scope.uses_arguments}function _t(e,n){do{if(e===n)return;if(n instanceof je)return 1}while(n=n.parent_scope)}function vt(e,n,t){var i=e.redef||e.definition();return(!e.in_arg||!at(i))&&Le(i.orig,function(e){return e instanceof M||e instanceof I?e instanceof _e||n&&ur(n,e):!(t&&e instanceof ve)})}function mt(e,n,t,i){return i instanceof we?"="==i.operator&&i.right===t:i instanceof ke?i.expression!==t||i instanceof y:i instanceof nn?i.value===t&&!i.static:i instanceof hn?i.value===t&&n.resolve()!==e.scope.resolve():i instanceof He&&i.value===t}function gt(e,n){var t=Ve(Ie,e);return t.fixed=n||Ve(Be,e),t}function bt(t,i){return function(e){var n=t(e),e=gt(n,i),n=n.definition();return n.references.push(e),n.replaced++,e}}function yt(e,n,t){t.assignments=0,t.bool_return=0,t.drop_return=0,t.cross_loop=!1,t.direct_access=!1,t.escaped=[],t.fixed=!t.const_redefs&&!t.scope.pinned()&&!n.exposed(t)&&!(t.init instanceof yn&&t.init!==t.scope)&&t.init,t.reassigned=0,t.recursive_refs=0,t.references=[],t.single_use=void 0}function wt(e,n,t){t.variables.each(function(e){yt(0,n,e)})}function xt(t,i,r){r.fn_defs=[],r.variables.each(function(e){yt(0,i,e);var n=e.init;n instanceof bn&&(r.fn_defs.push(n),n.safe_ids=null),null===e.fixed?(e.safe_ids=t.safe_ids,Ot(t,e)):e.fixed&&(t.loop_ids[e.id]=t.in_loop,Ot(t,e))}),r.may_call_this=function(){r.may_call_this=r.contains_this()?V:Ue},r.uses_arguments&&r.each_argname(function(e){e.definition().last_ref=!1}),i.option("ie")&&r.variables.each(function(e){var n=e.orig[0].definition();n!==e&&(n.fixed=!1)})}function St(e,n){n=n.safe_ids;return void 0===n||n===e.safe_ids}function kt(e,n){var t=e.fn_scanning;(e.fn_scanning=n).walk(e),e.fn_scanning=t}function Tt(t,i){i.enclosed.forEach(function(e){var n;i.variables.get(e.name)===e||Ct(t,e)||(e.single_use=!1,(n="function"==typeof(n=e.fixed)?n():n)instanceof Oe&&void 0!==n.safe_ids)||(e.fixed=!1)})}function At(e,n,t){var i,r=t.safe_ids;void 0!==r&&!1!==r&&(t.parent_scope.resolve().may_call_this===V?Jn(t,e.fn_visited)&&Tt(e,t):r?(i=Jn(t,e.fn_visited),r===e.safe_ids?i||kt(e,t):i?Tt(e,t):t.safe_ids=!1):e.fn_scanning&&e.fn_scanning!==n.scope.resolve()?t.safe_ids=!1:(t.safe_ids=e.safe_ids,kt(e,t)))}function Et(n,e){var t=e.fn_defs,i=e.may_call_this===V?t:t.filter(function(e){return!1===e.safe_ids||(e.safe_ids=n.safe_ids,kt(n,e),!1)});Dt(n),i.forEach(function(e){e.safe_ids=n.safe_ids,kt(n,e)}),t.forEach(function(e){e.safe_ids=void 0}),e.fn_defs=void 0,e.may_call_this=void 0}function d(e,n){var t=Object.create(e.safe_ids);n||(t.seq={}),e.safe_ids=t}function Dt(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function Ot(e,n){e.safe_ids[n.id]={}}function qt(e,n){e.references.push(n),!1!==e.last_ref&&(e.last_ref=n)}function Ct(e,n){var t,i,r;return"m"!=n.single_use&&((t=e.safe_ids[n.id])?((i=J(e.safe_ids,n.id))||(r=e.safe_ids.seq,t.read?t.read!==r&&(t.read=!0):t.read=r),null==n.fixed?!ht(n)&&!(n.global&&"arguments"==n.name||(e.loop_ids[n.id]=null,n.fixed=Ve(Be,n.orig[0]),i&&(n.safe_ids=void 0),0)):!t.assign||t.assign===e.safe_ids):n.fixed instanceof bn)}function $t(e,n,t){if(!t){if(at(n)&&n.scope.uses_arguments&&!e.has_directive("use strict"))return;if(!Le(n.orig,function(e){return!(e instanceof M)}))return}if(void 0===n.fixed)return t||Le(n.orig,function(e){return!(e instanceof I)});if(!1!==n.fixed&&0!==n.fixed){t=e.safe_ids[n.id];if(n.safe_ids)return n.safe_ids[n.id]=!1,n.safe_ids=void 0,null===n.fixed||J(e.safe_ids,n.id)&&!t.read;if(!J(e.safe_ids,n.id)){if(!t)return;if(t.read||e.in_loop){var i=e.find_parent(Qe);if(i instanceof en)return;if(n.scope.resolve()!==i.resolve())return}t.assign=!(!t.assign||t.assign===e.safe_ids)||e.safe_ids}if(null!=n.fixed&&t.read){if(t.read!==e.safe_ids.seq)return;if(e.loop_ids[n.id]!==e.in_loop)return}return Ct(e,n)&&Le(n.orig,function(e){return!(e instanceof ve)})}}function Ft(e){var n;return!!e&&(e instanceof we?"="==(n=e.operator)?Ft(e.right):!We[n.slice(0,-1)]:e instanceof Pe?Ft(e.tail_node()):e.is_constant()||pt(e)||e instanceof An)}function jt(e,n,t,i,r,o,s){var a,f=e.parent(o);if(!r||!r.is_constant())if(mt(n,t,i,f))n.escaped.push(f),!(1<s)||r&&r.is_constant_expression(t)||(s=1),(!n.escaped.depth||n.escaped.depth>s)&&(n.escaped.depth=s),n.scope.resolve()!==t.resolve()&&(n.escaped.cross_scope=!0),n.fixed&&(n.fixed.escaped=n.escaped);else{if(c=i,(a=f)instanceof ye||(a instanceof xe?We[a.operator]:a instanceof Te?a.condition!==c:a instanceof Pe?a.tail_node()===c:a instanceof Me))jt(e,n,t,f,f,o+1,s);else if(f instanceof kn&&f.value===i){var c=e.parent(o+1);jt(e,n,t,c,c,o+2,s)}else if(f instanceof $e&&f.expression===i&&(jt(e,n,t,f,r=ut(r,f),o+1,s+1),r))return;0<o||f instanceof ke&&f.expression===i||f instanceof Pe&&f.tail_node()!==i||f instanceof ze||f instanceof Mn&&!ft[f.operator]||(n.direct_access=!0,n.fixed&&(n.fixed.direct_access=!0))}}function Pt(e){var n;e instanceof En&&(n=e.expression)instanceof Ie&&ht(n=n.definition())&&((e=(e=e.property).is_constant()?e.value:e)instanceof qe||Nr.test(e))&&(n.reassigned++,(e instanceof qe?n.scope.argnames:[n.scope.argnames[e]]).forEach(function(e){e instanceof Ne&&(e.definition().fixed=!1)}))}function zt(n,t){var i,r;return function(){var e=n();return r=i!==e?t(i=e):r}}function Mt(c,n,e,u,l){var p=new Ye(function(i){var t,r,o,s,a,f,e;return i instanceof Ae?(It(i),d(c,!0),i.value.walk(c),Dt(c),(e=u)&&(t=n,r=i,o=e,u=function(){var e,n;return a===r?r:(e=o(),(n=rr(t,e,!0))instanceof qe?a=r:s!==e&&(s=e,a=void 0===n?Ge(r,[e,r.value]):e),a)}),i.name.walk(p),u=e):i instanceof fn?(It(i),e=u,i.elements.forEach(function(n,t){if(n instanceof pe)return It(n);e&&(u=zt(e,function(e){return Ve(En,n,{expression:e,property:Ve(Ce,n,{value:t})})})),n.walk(p)}),i.rest&&(e&&(u=n.option("rests")&&zt(e,function(e){if(!(e instanceof ye))return i;for(var n=0,t=i.elements.length;n<t;n++)if(e.elements[n]instanceof Me)return i;return(f=f||Ve(ye,i,{})).elements=e.elements.slice(t),f})),i.rest.walk(p)),u=e):i instanceof un?(It(i),e=u,i.properties.forEach(function(i){It(i),i.key instanceof qe&&(d(c),i.key.walk(c),Dt(c)),e&&(u=zt(e,function(e){var n=i.key,t=En;return"string"==typeof n&&(it(n)?t=pn:n=Jt(n,i)),Ve(t,i,{expression:e,property:n})})),i.value.walk(p)}),i.rest&&(u=!1,i.rest.walk(p)),u=e):l(i,u,function(){for(var e=c.stack.length,n=0,t=p.stack.length-1;n<t;n++)c.stack.push(p.stack[n]);i.walk(c),c.stack.length=e}),!0});e.walk(p)}function Nt(i,e,r){var n,o=this,s=(o.inlined=!1,i.parent()),t=!Gn(o)&&!Un(o),a=!t,f=!1,c=(o.walk(new Ye(function(e){return a?f=!0:e instanceof Fe?a=!0:e instanceof je&&e!==o||void 0})),f&&d(i,t),xt(i,r,o),!o.uses_arguments||i.has_directive("use strict")),u=(o.argnames.forEach(function(n,e){var t=s.args[e];Mt(i,r,n,function(){var e=o.argnames.indexOf(n),e=e<0?t:s.args[e];return(e=e instanceof Pe&&e.expressions.length<2?e.expressions[0]:e)||Ve(Be,s)},l)}),o.rest),t=(u&&Mt(i,r,u,r.option("rests")&&function(){return o.rest!==u?u:((n=n||Ve(ye,o,{})).elements=s.args.slice(o.argnames.length),n)},l),L(o,i),i.safe_ids);return Et(i,o),f||(i.safe_ids=t),!0;function l(e,n){var t=e.definition();n&&c&&void 0===t.fixed?(Ot(i,t),i.loop_ids[t.id]=i.in_loop,t.fixed=n,t.fixed.assigns=[e]):t.fixed=!1}}function It(e){e._squeezed=!1,e._optimized=!1,e instanceof Qe&&(e._var_names=void 0),e instanceof Ie&&(e.fixed=void 0)}function Rt(t,i){return this.transform(new Hn(function(e,n){return e instanceof Ae?((e=e.clone()).name=e.name.transform(this),e):e instanceof Ee?(n(e=e.clone(),this),e):e instanceof cn?((e=e.clone()).value=e.value.transform(this),e):e.convert_symbol(t,i)}))}function Bt(e,n){e=Ve(e,this);return n(e,this)||e}function Ht(e){var n=e.definition();n.assignments++,n.references.push(e)}function Yt(n,t){var i=new Ye(function(e){return e instanceof Ae?(e.value.walk(t),e.name.walk(i),!0):e instanceof cn?(e.key instanceof qe&&e.key.walk(t),e.value.walk(i),!0):n(e)});this.walk(i)}function Lt(e){return e(this)}function Ut(n,t){var i=!1,r=new Ye(function(e){return!!i||(e instanceof Ae?t?(e.name.walk(r),!0):i=!0:e instanceof cn?!t&&e.key instanceof qe?i=!0:(e.value.walk(r),!0):n(e)?i=!0:void 0)});return this.walk(r),i}function Vt(e){return e instanceof ie||e instanceof re}function Gt(e){var n=0,t=e.self();do{if(t.variables)return t}while(t=e.parent(n++))}function Wt(e,n,t,i,r,o){for(var s;s=e.parent(n++);t=s){if(s===i)return!1;if(o&&s instanceof Oe){if(s.name||Gn(s)||Un(s))return!0}else if(s instanceof zn){if(s.bfinally&&s.bfinally!==t)return!0;if(r&&s.bcatch&&s.bcatch!==t)return!0}}return!1}function Kt(e,n){if(e instanceof o)return!0;if(e instanceof An)return!0;if(e instanceof $e){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof Ie){if(e.is_immutable())return!1;e=e.fixed_value()}return e?!!e.tail_node().is_constant()||Kt(e,n):!0}return e instanceof Ie&&(!!e.is_immutable()||(e=e.definition(),n.exposed(e)&&Ir[e.name]))}function Ve(e,n,t){return t?(t.start=n.start,t.end=n.end):t=n,new e(t)}function Ge(e,n){return 1==n.length?n[0]:Ve(Pe,e,{expressions:n.reduce(ei,[])})}function Jt(e,n){switch(typeof e){case"string":return Ve(U,n,{value:e});case"number":return isNaN(e)?Ve(b,n):isFinite(e)?1/e<0?Ve(Re,n,{operator:"-",expression:Ve(Ce,n,{value:-e})}):Ve(Ce,n,{value:e}):e<0?Ve(Re,n,{operator:"-",expression:Ve(m,n)}):Ve(m,n);case"boolean":return Ve(e?B:le,n);case"undefined":return Ve(Be,n);default:if(null===e)return Ve(E,n);if(e instanceof RegExp)return Ve(G,n,{value:e});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof e}))}}function Xt(e){return e instanceof $e||ci(e)&&"eval"==e.name}function Qt(e,n,t){var i=!1;return"Call"==e.TYPE?i=e.expression===n&&Xt(t):e instanceof Fn?i=e.tag===n&&Xt(t):e instanceof Re&&(i="delete"==e.operator||"typeof"==e.operator&&ci(t)),i?Ge(n,[Ve(Ce,n,{value:0}),t]):t}function Zt(e,n){var i=new Wn;return e.walk(new Ye(function(e){var n;e instanceof Ie&&(n=e.definition(),(e=e.fixed)&&i.has(n.id)?i.get(n.id)!==e&&i.set(n.id,!1):i.set(n.id,e))})),0<i.size()&&n.walk(new Ye(function(e){var n,t;e instanceof Ie&&(n=e.definition(),t=e.fixed)&&i.has(n.id)&&i.get(n.id)!==t&&(e.fixed=!1)})),n}function ei(e,n){return n instanceof Pe?[].push.apply(e,n.expressions):e.push(n),e}function ni(e){return e instanceof ae||e instanceof fe||e instanceof wn}function ti(e){var n,t;return e instanceof bn?(n=e.name.definition(),t=e.name.scope,n.scope===t||Le(n.references,function(e){var n=e.scope;do{if(n===t)return!0}while(n=n.parent_scope)})):!ni(e)}function ii(e){if(null===e)return[];if(e instanceof Se)return Le(e.body,ti)?e.body:[e];if(e instanceof Z)return[];if(Vn(e))return[e];throw new Error("Can't convert thing to statement array")}function ri(e){return null===e||e instanceof Z||e instanceof Se&&0==e.body.length}function oi(e){return Le(e.body,function(e){return ri(e)||e instanceof an||e instanceof ee&&li(e)})}function si(e){return e instanceof gn&&e.body instanceof Se?e.body:e}function ai(e){if("Call"!=e.TYPE)return!1;for(;(e=e.expression)instanceof $e;);return e instanceof yn?!Ln(e):ai(e)}function fi(e){var n,t=e.expression;return!(t.name||e instanceof y&&(n=!1,t.walk(new Ye(function(e){return!!n||(e instanceof w?n=!0:e instanceof je&&e!==t||void 0)})),n))}function ci(e){return e instanceof Ie&&e.definition().undeclared}function ui(e){return e.static&&e.value&&(e instanceof nn||e instanceof tn)}function li(e){return Le(e.definitions,function(e){return!e.value})}function pi(e,n){return e instanceof fe?n&&!e.extends&&Le(e.properties,function(e){return!(e.key instanceof qe||ui(e))}):e instanceof sn?(n||e instanceof ee)&&li(e):e instanceof ce||e instanceof ue?pi(e.body,n):e instanceof bn}function di(e,n){var t=e.lastIndexOf(n);if(t<0)return!1;for(;++t<e.length;)if(!pi(e[t],!0))return!1;return!0}function hi(e,n){var t;if(e.init instanceof Se&&(t=e.init,e.init=t.body.pop(),t.body.push(e)),e.init instanceof an?((t=t||Ve(Se,e,{body:[e]})).body.splice(-1,0,e.init),e.init=null):e.init instanceof ze?e.init=e.init.body:ri(e.init)&&(e.init=null),t)return n?Kn.splice(t.body):t}function _i(e,l){var he,_e,ve,me,ge,be,C=$(l,function(e){return e instanceof Oe}),n=l.self(),t=0;do{if(!he&&n.variables&&(he=n),n instanceof oe)l.parent(t).bfinally&&((ge=ge||{}).bfinally=!0),t++;else if(n instanceof O)t++;else if(n instanceof gn)me=!0;else{if(n instanceof je){be=n;break}n instanceof zn&&(ge=ge||{},n.bcatch&&(ge.bcatch=!0),n.bfinally)&&(ge.bfinally=!0)}}while(n=l.parent(t++));var i,r,o=10;do{if(r=i,i=0,!(i=!function e(n){var t=!1,i=[];for(var r=0;r<n.length;){var o=n[r];if(o instanceof Se&&Le(o.body,ti))t=!0,e(o.body),[].splice.apply(n,[r,1].concat(o.body)),r+=o.body.length;else{if(o instanceof x){if(Jn(o.value,i)){t=!0,n.splice(r,1);continue}i.push(o.value)}o instanceof Z?(t=!0,n.splice(r,1)):r++}}return t}(e)?i:1)&&1==r)break;if(l.option("dead_code")&&!(i=!function(n,t){var e,i=t.self();i instanceof oe?i=t.parent():i instanceof de&&(i=i.body);for(var r=0,o=0,s=n.length;r<s;r++){var a,f=n[r];if(!(f instanceof xn)||si(a=t.loopcontrol_target(f))!==i||f instanceof F&&a instanceof gn?n[o++]=f:f.label&&Q(f.label.thedef.references,f),Ii(f)){e=n.slice(r+1);break}}n.length=o,e&&e.forEach(function(e){vi(t,e,n)});return n.length!=s}(e,l)?i:2)&&2==r)break;if(l.option("if_return")&&!(i=!function(s,i){for(var r,a,o,f=!1,c=i.parent(),u=i.self(),e=C&&c&&"Call"==c.TYPE&&c.expression===u,n=C&&i.option("conditionals")&&i.option("sequences"),t=!(ge&&ge.bfinally&&Vt(be)),l=function(e){for(var n=0,t=e.length;0<=--t;){var i=e[t];if(i instanceof De&&i.body instanceof Fe&&1<++n)return!0}return!1}(s),p=s.length;0<=--p;){var d=s[p],h=q(p),_=s[h];if(C&&r&&!_&&d instanceof Fe&&t&&!(u instanceof z)){if(!(b=d.value)){f=!0,s.splice(p,1);continue}var v=b.tail_node();if(mi(v)){f=!0,b instanceof Re?b=b.expression:v instanceof Re&&((b=b.clone()).expressions[b.expressions.length-1]=v.expression),s[p]=Ve(ze,d,{body:b});continue}}if(d instanceof De){v=Ii(d.body);if(T(v)){v.label&&Q(v.label.thedef.references,v),f=!0,(d=d.clone()).body=Ve(Se,d,{body:D(d.body,v)}),d.alternative=Ve(Se,d,{body:ii(d.alternative).concat(A(o,a))}),O(v.value,o),s[p]=d,s[p]=d.transform(i);continue}if(v&&!d.alternative&&_ instanceof P){var m=d.condition,g=p+1==h&&d.body instanceof Se;if((m=xi(m,m.negate(i),g))!==d.condition){f=!0,(d=d.clone()).condition=m;var b=d.body;d.body=Ve(Se,_,{body:A(!0,null,h+1)}),s.splice(p,1,d,b),(!C||u instanceof Xe&&u.body===s)&&(s[p]=d.transform(i));continue}}var y,g=Ii(d.alternative);if(T(g)){g.label&&Q(g.label.thedef.references,g),f=!0,(d=d.clone()).body=Ve(Se,d.body,{body:ii(d.body).concat(A(o,a))}),d.alternative=Ve(Se,d.alternative,{body:D(d.alternative,g)}),O(g.value,o),s[p]=d,s[p]=d.transform(i);continue}i.option("typeofs")&&(v&&!g&&(y=Ve(Se,u,{body:s.slice(p+1)}),ir(d.condition,null,y)),!v)&&g&&(y=Ve(Se,u,{body:s.slice(p+1)}),ir(d.condition,y))}if(d instanceof De&&d.body instanceof Fe){var m=d.body.value,w=d.body.in_bool||_ instanceof Fe&&_.in_bool;if(!d.alternative&&_ instanceof Fe&&(t||!m==!_.value)){f=!0,(d=d.clone()).alternative=Ve(Se,_,{body:A(!0,null,h+1)}),s[p]=d,s[p]=d.transform(i);continue}if(C&&r&&!_&&!d.alternative&&(w||m&&l||m instanceof Te&&(mi(m.consequent,i)||mi(m.alternative,i)))){f=!0,(d=d.clone()).alternative=Ve(Fe,d,{value:null}),s[p]=d,s[p]=d.transform(i);continue}if(n&&!d.alternative&&(!(x=s[w=function(e){for(var n=e;0<=--n;){var t=s[n];if(!(t instanceof ee)&&!pi(t))break}return n}(p)])&&e||x instanceof De&&x.body instanceof Fe)&&(_?_ instanceof ze&&q(h)==s.length:!r)){f=!0;var x=[];d=d.clone(),x.push(d.condition),d.condition=Ge(d,x),d.alternative=Ve(Se,u,{body:A().concat(Ve(Fe,u,{value:null}))}),s[p]=d.transform(i),p=w+1;continue}}d instanceof F||d instanceof hn?a=d:r&&a&&a===_&&function e(n,t,i){if(n instanceof hn){var r=!(t&&n instanceof jn)&&k(n,!0);if(r)return f=!0,(r=E(n.value,r))?Ve(ze,r,{body:r}):i?null:Ve(Z,n)}else{var o;n instanceof De?(n.body=e(n.body,t),n.alternative&&(n.alternative=e(n.alternative,t))):n instanceof de?n.body=e(n.body,t):n instanceof zn?n.bfinally&&a.value&&!a.value.is_constant()||(n.bcatch&&e(n.bcatch,t),(o=e(n.body.pop(),!0,!0))&&n.body.push(o)):n instanceof Xe&&!(n instanceof je||n instanceof Dn)&&(o=e(n.body.pop(),t,!0))&&n.body.push(o)}return n}(d)}return f;function S(n){return $(i,function(e){return e===n})}function k(e,n){var t;return!!a&&a.TYPE==e.TYPE&&!!(t=e.value)&&(!(e=!(e=a.equals(e))&&t instanceof Pe&&(t=t.tail_node(),a.value)&&a.value.equals(t)?2:e)&&!n&&a.value instanceof Pe&&a.value.tail_node().equals(t)?3:e)}function T(e){if(o=!1,function(e){if(e instanceof hn){if(!(o=k(e))){if(!C)return;if(!(e instanceof Fe))return;var n=e.value;if(n&&!mi(n.tail_node()))return;if(u instanceof z){if(!a)return;if(a instanceof hn&&a.value)return;o=4}}return 1}if(e instanceof xn){if(u instanceof z)if(a instanceof hn){if(!C)return;if(a.value)return;o=!0}else if(a){if(i.loopcontrol_target(a)!==c)return;o=!0}else if(!1===a)return;n=i.loopcontrol_target(e);return e instanceof j?S(si(n)):!(n instanceof gn)&&S(n)}}(e)){for(var n=s.length;--n>p;){var t=s[n];if(t instanceof fe){if(t.name.definition().preinit)return}else if((t instanceof ae||t instanceof wn)&&!Le(t.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof qn&&e.definition().preinit})}))return}return 1}}function A(e,n,t){var i=[],r=!1,o=p+1,t=(e?n?t=s.lastIndexOf(n):(n=s[t])!==a&&(a=!1):(t=s.length,a=null),s.splice(o,t-o).filter(function(e){return e instanceof bn?(i.push(e),!1):(ni(e)&&(r=!0),!0)}));return 3===e&&(t.push(Ve(ze,n.value,{body:Ge(n.value,n.value.expressions.slice(0,-1))})),n.value=n.value.tail_node()),[].push.apply(r?t:s,i),t}function E(e,n){if(e)switch(n){case 4:return e;case 3:if(!(e instanceof Pe))break;case 2:return Ge(e,e.expressions.slice(0,-1))}}function D(e,n){for(var t,e=ii(e),i=e;(t=i[i.length-1])!==n;)i=t.body;i.pop();var r=n.value;return(r=o?E(r,o):r)&&i.push(Ve(ze,r,{body:r})),e}function O(e,n){if(n&&e){switch(n){case 4:return;case 3:case 2:e=e.tail_node()}Zt(e,a.value)}}function q(e){r=!0;for(var n=e;++n<s.length;){var t=s[n];if(!pi(t)){if(!(t instanceof ee))break;r=!1}}return n}}(e,l)?i:3)&&3==r)break;if(l.option("awaits")&&l.option("side_effects")&&!(i=!function(e,n){if(!(!C||ge&&ge.bfinally)){for(var t=!1,i=e.length;0<=--i;){var r=e[i];if(!(r instanceof ze))break;var o=r.body;if(!(o instanceof Je))break;o=o.expression;if(!wr(n,o))break;if(t=!0,o=o.drop_side_effect_free(n,!0)){r.body=o;break}}return e.length=i+1,t}}(e,l)?i:4)&&4==r)break;if(4<=l.option("inline")&&!(i=!function(e,n){var t=!1,i=e.length-1;{var r;C&&0<=i&&(r=ge&&ge.bfinally&&Vt(be),s=e[i].try_inline(n,he,r))&&(e[i--]=s,t=!0)}for(var o=me&&ge&&ge.bfinally?"try":me;0<=i;i--){var s;(s=e[i].try_inline(n,he,!0,o))&&(e[i]=s,t=!0)}return t}(e,l)?i:5)&&5==r)break;if(0<l.sequences_limit){if(!(i=!function(n,e){if(!(n.length<2)){for(var t=[],i=0,r=0,o=n.length;r<o;r++){var s=n[r];s instanceof ze?(t.length>=e.sequences_limit&&a(),ei(t,s.body)):(pi(s)||a(),n[i++]=s)}return a(),(n.length=i)!=o}function a(){var e;t.length&&(e=Ge(t[0],t),n[i++]=Ve(ze,e,{body:e}),t=[])}}(e,l)?i:6)&&6==r)break;if(!(i=!function(e,n){for(var t,i=!1,r=0,o=0;o<e.length;o++){var s,a=e[o];if(t&&(a instanceof hn?!a.value&&Vt(be)||(a.value=p(a.value||Ve(Be,a)).optimize(n)):a instanceof _n?a.init instanceof sn||(s=!1,t.body.walk(new Ye(function(e){return!!(s||e instanceof je)||(e instanceof xe&&"in"==e.operator?s=!0:void 0)})),s)||(a.init?a.init=p(a.init):(a.init=t.body,r--,i=!0)):a instanceof k?ni(a.init)||(a.object=p(a.object)):a instanceof De?a.condition=p(a.condition):(a instanceof Dn||a instanceof Rn)&&(a.expression=p(a.expression))),n.option("conditionals")&&a instanceof De){var f=[],c=d(a.body,f),u=d(a.alternative,f);if(!1!==c&&!1!==u&&0<f.length){var l=f.length;f.push(Ve(De,a,{condition:a.condition,body:c||Ve(Z,a.body),alternative:u})),f.unshift(r,1),[].splice.apply(e,f),o+=l,r+=l+1,i=!(t=null);continue}}e[r++]=a,t=a instanceof ze?a:null}return e.length=r,i;function p(e){r--,i=!0;var n=t.body;return Ge(n,[n,e])}}(e,l)?i:7)&&7==r)break}if(l.option("join_vars")&&!(i=!function(e){for(var r,o=!1,n=0,t=-1;n<e.length;n++){var i,s,a,f=e[n],c=e[t];if(f instanceof sn)c&&c.TYPE==f.TYPE?(c.definitions=c.definitions.concat(f.definitions),o=!0):r&&r.TYPE==f.TYPE&&li(f)?(r.definitions=r.definitions.concat(f.definitions),o=!0):f instanceof ee?((s=_(c,f))?(s.length&&(c.body=Ge(c,s),t++),o=!0):t++,e[t]=r=f):e[++t]=f;else{if(f instanceof hn)f.value=u(f.value);else if(f instanceof _n)if(s=h(c,f.init))o=!0,f.init=s.length?Ge(f.init,s):null;else{if(c instanceof ee&&(!f.init||f.init.TYPE==c.TYPE)){f.init&&(c.definitions=c.definitions.concat(f.init.definitions)),f=f.clone(),r=f.init=c,e[t]=l(f),o=!0;continue}if(r&&f.init&&r.TYPE==f.init.TYPE&&li(f.init))r.definitions=r.definitions.concat(f.init.definitions),f.init=null,o=!0;else if(f.init instanceof ee&&(r=f.init,s=_(c,f.init))){if(o=!0,0==s.length){e[t]=l(f);continue}c.body=Ge(c,s)}}else if(f instanceof vn)r&&r.TYPE==f.init.TYPE&&(i=r.definitions.slice(),f.init=f.init.definitions[0].name.convert_symbol(Ie,function(e,n){i.push(Ve(He,n,{name:n,value:null})),n.definition().references.push(e)}),r.definitions=i,o=!0),f.object=u(f.object);else if(f instanceof De)f.condition=u(f.condition);else if(f instanceof ze){if(s=h(c,f.body)){if(o=!0,!s.length)continue;f.body=Ge(f.body,s)}else if(c instanceof sn&&(a=e[n+1])&&c.TYPE==a.TYPE&&(a=a.definitions[0]).value){o=!0,a.value=Ge(f,[f.body,a.value]);continue}}else(f instanceof Dn||f instanceof Rn)&&(f.expression=u(f.expression));e[++t]=r?l(f):f}}return e.length=t+1,o;function u(e){var n=h(c,e,1);if(!n)return e;o=!0;var t=e.tail_node();return n[n.length-1]!==t&&n.push(t.left),Ge(e,n)}function l(e){return e.transform(new Hn(function(e,n,t){var i;return e instanceof sn?r!==e&&r.TYPE==e.TYPE&&!((i=this.parent())instanceof vn&&i.init===e)&&li(e)?(r.definitions=r.definitions.concat(e.definitions),o=!0,i instanceof _n&&i.init===e?null:t?Kn.skip:Ve(Z,e)):e:!(e instanceof ce)&&!(e instanceof je)&&Vn(e)?void 0:e}))}}(e)?i:8)&&8==r)break;!l.option("collapse_vars")||!function(i,p){if(!be.pinned()){for(var d,M,N=new Wn,h=[],I=!1,_=new Wn,r=i.length,u=new Hn(function(e,n){if(E)return e;if(!A){if(e===v[m]){if(++m<v.length)return $(e,u);A=!0,(l=(g?P:ne)(e,0))===e&&(E=!0)}return e}var t,i,r,o=u.parent();if(!b&&Z(e,o)&&(b=o),H&&B&&O&&!b&&e instanceof we&&"="!=e.operator&&e.left.equals(y))return D++,I=!0,qe.info("Cascading {this} [{start}]",e),O=!1,S=ue(y),e.right.transform(u),fe(a),i=E?a:(E=!0,Ve(xe,a,{operator:H,left:y.fixed&&y.definition().fixed?y.fixed.to_binary(a):y,right:T})),Ve(we,e,{operator:"=",left:e.left,right:Ve(xe,e,{operator:e.operator.slice(0,-1),left:i,right:e.right})});if(function(e,n){if(e===T)return 1;if(n instanceof _n&&e!==n.init)return 1;if(e instanceof we)return"="!=e.operator&&y.equals(e.left);if(e instanceof ke)return y instanceof $e&&y.equals(e.expression)&&(!(T instanceof yn)||T.contains_this());return e instanceof en?!p.has_directive("use strict"):e instanceof rn||(e instanceof an?Y&&y.name===e.name.name:e instanceof cn?e.key instanceof qe:e instanceof dn||e instanceof xn||e instanceof zn||e instanceof Rn)}(e,o))return E=!0,e;if(e.single_use)return e;if(e instanceof qn||!(B&&y.equals(e)||x&&(t=x(e,this))))return function(e,n){if(e instanceof Ie){if(e.is_declared(p)){if(e.fixed_value())return;if(vt(e))return!(n instanceof $e&&n.expression===e)&&ht(e.definition())}else if(Q(e,n))return;if(!X)return 1;x=!1}return}(e,o)?(E=!0,e):((ee(e,o)||L(e))&&(l=e)instanceof je&&(E=!0),e instanceof Ke||e instanceof Ee?(r=O,O=!1,n(e,u),O=r,C(e)):e instanceof Ae?(e.name=e.name.transform(u),r=O,O=!1,e.value=e.value.transform(u),O=r,C(e)):!(e instanceof Qe)||e instanceof je||e.variables&&e.variables.all(function(e){return!G.has(e.name)&&!S.has(e.name)})?$(e,u)?C(e):void 0:(r=O,O=!1,$(e,u)||n(e,u),O=r,C(e)));if(!O||b&&(t||!K||!X))return t||g||(E=!0),e;if(st(e,o))return g&&!t&&(c=!0),e;if(!t&&R&&e.fixed!==y.fixed)return E=!0,e;if(g)return b&&0==f&&(f=s-D),t||D++,e;if(D++,I=E=!0,qe.info("Collapsing {this} [{start}]",e),"Binary"==a.TYPE)return ce(a,e),Ve(we,a,{operator:"=",left:a.right.left,right:"&&"==a.operator?Ve(Te,a,{condition:a.left,consequent:a.right.right,alternative:e}):Ve(Te,a,{condition:a.left,consequent:e,alternative:a.right.right})});if(a instanceof Nn)return Ve(Re,a,{operator:a.operator,expression:y.fixed&&y.definition().fixed?y.fixed.to_prefix(a):y});if(a instanceof Re)return fe(a),a;if(ce(T,e),a instanceof He)return(i=a.name.definition()).references.length-i.replaced!=1||p.exposed(i)?Ve(we,a,{operator:"=",left:e,right:T}):(i.replaced++,Qt(o,e,T));fe(T);n=a.clone();return n.right=T,n},C),o=new Hn(function(e){if(E)return e;if(!A){if(e!==v[m])return e;switch(m++,v.length-m){case 0:if(A=!0,c)return e;if(e!==a)return e;if(e instanceof He)return e;q.replaced++;var n=o.parent();return n instanceof Pe&&n.tail_node()!==e?(g.replaced++,T===k?Kn.skip:Ge(k,k.expressions.slice(0,-1))):T;case 1:if(!c&&e.body===a)return A=!0,q.replaced++,g.replaced++,null;default:return $(e,o)}}if(e instanceof Ie&&e.definition()===q){if(st(e,o.parent()))return e;--D||(E=!0),qe.info("Replacing {this} [{start}]",e);var t=T.clone();return(t.scope=e.scope,t.reference(),D==f)?(E=!0,Ve(we,a,{operator:"=",left:e,right:t})):(q.replaced++,t)}return e instanceof on||e instanceof je?e:void 0},function(e){return le(e,o)});0<=--r;){0==r&&p.option("unused")&&!function(){if(!1!==ve){var e=p.parent(),i=p.self();if(void 0===ve){if(!(i instanceof yn)||Un(i)||i.uses_arguments||i.pinned()||!(e instanceof ke)||e.expression!==i||!Le(e.args,function(e){return!(e instanceof Me)}))return ve=!1;if(!fi(e))return;ve=!0}for(var r,o=i.in_strict_mode(p)&&!i.parent_scope.resolve(!0).in_strict_mode(p),s=(Gn(i)?(r=function(e){return e instanceof On&&"await"==e.name},_e=!0):(r=function(e){return e instanceof Je&&!n.find_parent(je)},void 0===_e&&(_e=Wt(p,1,e,null,!0,!0))),null),n=new Ye(function(e,n){var t;return!u||(r(e)||e instanceof Bn?!(u=null):e instanceof An?(!o&&s||(u=null),!0):e instanceof Ie?((e.in_arg&&!ar(e.definition())||(t=i.variables.get(e.name))&&t!==e.definition())&&(u=null),!0):e instanceof je&&!Ln(e)?(t=s,s=e,n(),s=t,!0):void 0)}),t=(d=e.args.slice()).length,a=new Wn,f=i.argnames.length;0<=--f;){var c=i.argnames[f],u=d[f],l=null;if(c instanceof Ae&&(l=c.value,c=c.name,d[t+f]=l),c instanceof Ee){if(_e&&F(function(e){return e.has_side_effects(p)},c,u)){h.length=0;break}d[t+f]=i.argnames[f]}else a.has(c.name)||(a.set(c.name,!0),(u=l?mi(u)?l:null:u)||l?u instanceof Oe&&u.pinned()?u=null:u&&u.walk(n):u=Ve(Be,c).transform(p),u&&((c=Ve(He,c,{name:c,value:u})).name_index=f,c.arg_index=l?t+f:f,h.unshift([c])))}i.rest&&d.push(i.rest)}}();var v=[];for(j(i[r]);0<h.length;){v=h.pop();var s,m=0,a=v[v.length-1],f=-1,c=!1,R=!1,g=null,l=null,b=null,y=function(n){if(n instanceof we)return(t=n.left)instanceof Ie&&(i=t.definition(),be.uses_arguments&&at(i)||p.exposed(i)||(s=oe(i),i.fixed&&t.fixed&&(e=i.references.filter(function(e){return e.fixed===t.fixed}).length-1)<s&&(s=e,R=!(f=0)),"="==n.operator&&re(n.right))),t;if(n instanceof xe)return n.right.left;if(n instanceof Mn)return n.expression;if(n instanceof He){var t,e,i=(t=n.name).definition();if(!i.const_redefs)if(Jn(t,i.orig))if(!be.uses_arguments||!at(i))return e=i.orig.length-i.eliminated-(_.get(i.name)||0),s=oe(i),i.fixed&&(s=Math.min(s,i.references.filter(function(e){return!e.fixed||!e.fixed.assigns||(e=e.fixed.assigns[0])===t||se(e)===n.value}).length)),1<e&&!(t instanceof Ne)?(re(n.value),Ve(Ie,t)):re(n.value)||1==s&&!p.exposed(i)?Ve(Ie,t):void 0}}(a),w=y&&y.has_side_effects(p),B=y&&(!w||y instanceof Ie)&&!Kt(y,p),x=function(n){if(!(n instanceof we&&n.right.single_use)){for(var t,i=Object.create(null),e=new Ye(function(e){e instanceof Ie&&(i[e.definition().id]=!0)});n instanceof we&&"="==n.operator;)n.left.walk(e),n=n.right;if(n instanceof An)return o;if(n instanceof Ie)return(r=n.evaluate(p))===n?o:ae(r,o);if(n.is_truthy())return ae(!0,Ue);if(n.is_constant()){var r=n.evaluate(p);if(!(r instanceof qe))return ae(r,o)}return y instanceof Ie?!!function e(n){if(n instanceof ye)return!1;if(n instanceof xe&&We[n.operator])return e(n.left)&&e(n.right);if(n instanceof ke)return!1;if(n instanceof Te)return e(n.consequent)&&e(n.alternative);if(n instanceof Sn)return!1;return!n.has_side_effects(p)}(n)&&(n.walk(new Ye(function(e){if(t)return!0;e instanceof Ie&&i[e.definition().id]&&(t=!0)})),!t)&&o:!1}function o(e){return n.equals(e)}}(a);if(B||x){var H=a instanceof we&&a.operator.slice(0,-1),Y=a.name instanceof Ne,L=Ue;if(a.may_throw(p)){if(Y&&Gn(be))continue;L=ge?function(e){return e.has_side_effects(p)}:t}var U=!1,V=!1,G=new Wn,W=!0,S=ue(a),K=function(e){var n=Yn(e);return n instanceof Ie&&n.definition().scope.resolve()===be&&(!me||!H&&!(a instanceof Mn||(n=S.get(n.name))&&n[0]!==e))}(y),k=se(a),T=k,J=(w||(!H&&T instanceof Pe&&(T=T.tail_node()),w=!(a instanceof Mn)&&T.has_side_effects(p)),ge||!K?function(e){return e instanceof Ee}:Ue),X=function(e){if(e instanceof Mn)return!1;if(w)return!1;if(!g){if(!(y instanceof Ie))return!1;var n;if(e instanceof He)n=1;else{if("="!=e.operator)return!1;n=2}e=y.definition();if(e.references.length-e.replaced!=n){if(!e.fixed)return!1;if(!y.fixed)return!1;var t=y.fixed.assigns,i=0;if(!Le(e.references,function(e,n){e=e.fixed;return!!e&&!e.to_binary&&!e.to_prefix&&(e===y.fixed?(i++,!0):t&&e.assigns&&t[0]!==e.assigns[0])}))return!1;if(i!=n)return!1;R=!0}}return!0}(a),A=Y,E=!1,D=0,O=!d||!A;if(!O){for(var n=a.arg_index+1;!E&&n<d.length;n++)d[n]&&d[n].transform(u);O=!0}for(var e=r;!E&&e<i.length;e++)i[e].transform(u);if(g){if(!D||D+c<s){h.push(v),M=!0;continue}D==f&&(c=!0);var q=y.definition();E=!1,m=0,A=Y;for(e=r;!E&&e<i.length;e++)i[e].transform(o)||i.splice(e--,1);D=a instanceof He&&a===v[v.length-1]&&q.references.length==q.replaced&&!p.exposed(q),g.last_ref=!1,g.single_use=!1,I=!0}D&&!function(e){var n,t,f,c,u,l=T===k?null:Ge(k,k.expressions.slice(0,-1)),e=e.name_index;0<=e?(t=be.argnames[e])instanceof Ae?(be.argnames[e]=t=t.clone(),t.value=l||Ve(Ce,t,{value:0})):(n=p.parent().args)[e]&&(be.argnames[e]=t.clone(),n[e]=l||Ve(Ce,n[e],{value:0})):(f=v.length-1,c=v[f],(c instanceof He||v[f-1].body===c)&&f--,u=new Hn(function(e,n,t){var i,r,o,s,a;return A||e!==v[m]?e:++m<=f?$(e,u):(A=!0,e instanceof sn?(_.set(c.name.name,(_.get(c.name.name)||0)+1),g&&g.replaced++,r=(i=e.definitions).indexOf(c),(o=c.clone()).value=null,l?(s=[Ve(ze,l,{body:l})],0<r&&((a=e.clone()).definitions=i.slice(0,r),s.unshift(a),(e=e.clone()).definitions=i.slice(r)),s.push(e),e.definitions[0]=o,t?Kn.splice(s):Ve(Se,e,{body:s})):(e.definitions[r]=o,e)):l?Vn(e)?Ve(ze,l,{body:l}):l:t?Kn.skip:null)},function(e,n){return e instanceof _n?hi(e,n):le(e,u)}),A=E=!1,m=0,(i[r]=i[r].transform(u))||i.splice(r,1))}(a)}}}return I}function C(e){return E||(l===e&&(E=!0),b===e&&(b=null)),e}function $(e,n){if(e instanceof Qe){if(e instanceof je)return e;if(e instanceof en){e.name&&(e.name=e.name.transform(n)),!E&&e.extends&&(e.extends=e.extends.transform(n));for(var t=[],i=[],r=0;!E&&r<e.properties.length;r++)(o=e.properties[r]).key instanceof qe&&(o.key=o.key.transform(n)),o.static&&(o instanceof nn?o.value&&t.push(o):o instanceof tn&&[].push.apply(i,o.value.body));for(r=0;!E&&r<i.length;r++)i[r].transform(n);for(var o,r=0;!E&&r<t.length;r++)(o=t[r]).value=o.value.transform(n);return e}if(e instanceof vn)return e.object=e.object.transform(n),E=!0,e;if(e instanceof Dn){e.expression=e.expression.transform(n);for(r=0;!E&&r<e.body.length;r++){var s=e.body[r];if(s instanceof Ze){if(!A){if(s!==v[m])continue;m++}if(s.expression=s.expression.transform(n),!X)break;x=!1}}return E=!0,e}}}function Q(e,n){return n instanceof we?"="==n.operator&&n.left===e:n instanceof Ae?n.name===e:n instanceof fn||n instanceof cn&&n.value===e}function Z(e,n){return n instanceof we?n.left!==e&&We[n.operator.slice(0,-1)]:n instanceof xe?n.left!==e&&We[n.operator]:n instanceof ke?n.optional&&n.expression!==e:n instanceof Ze?n.expression!==e:n instanceof Te||n instanceof De?n.condition!==e:n instanceof En&&n.optional&&n.expression!==e}function ee(e,n){if(e instanceof Je)return 1;if("Binary"==e.TYPE)return!yr(e.operator,e.right,p);if(e instanceof ke){var t=e.expression;if(t instanceof Ie&&(f=t.definition(),t=t.fixed_value()),!(t instanceof Oe))return!e.is_expr_pure(p);if(!f||!Tr(p,f,t)){if(t.collapse_scanning)return;t.collapse_scanning=!0;for(var i=O,r=(O=!1,l),o=b,s=0;!E&&s<t.argnames.length;s++)F(c,t.argnames[s],e.args[s])&&(E=!0);if(!E)if(t.rest&&F(c,t.rest,Ve(ye,e,{elements:e.args.slice(s)})))E=!0;else if(Ln(t)&&t.value)t.value.transform(u);else for(s=0;!E&&s<t.body.length;s++){var a=t.body[s];if(a instanceof Fe){a.value&&a.value.transform(u);break}a.transform(u)}if(b=o,l=r,O=i,t.collapse_scanning=!1,!E)return;E=!1}return 1}var f;if(e instanceof en)return ge&&(o=e.extends)&&!dt(o=o instanceof Ie?o.fixed_value():o);if(e instanceof hn){if(ge){if(ge.bfinally)return 1;if(ge.bcatch&&e instanceof jn)return 1}return w||y instanceof $e||de(y)}if(e instanceof mn)return p.option("ie")&&e.name&&S.has(e.name.name);if(e instanceof An)return pe(e);if(e instanceof $e){if(w)return 1;r=e.expression;if(r instanceof Ie&&ht(r.definition()))return 1;if(p.option("unsafe")){if(ci(r)&&Gr[r.name])return;if(Oi(r))return}return W?!g&&(ge||!K)&&!e.optional&&r.may_throw_on_access(p):1}return e instanceof Me||(e instanceof Ie?pe(e)?!Q(e,n):w&&de(e)||(f=e.definition(),(ge||f.scope.resolve()!==be)&&!vt(e)):e instanceof Fn?!e.is_expr_pure(p):e instanceof He?J(e.name)||(e.value||n instanceof wn)&&e.name.match_symbol(function(e){return e instanceof qn&&(S.has(e.name)||w&&de(e))},!0):e instanceof Bn||(i=st(e.left,e))&&(i instanceof $e||J(i)||i.match_symbol(function(e){return e instanceof Ie&&(S.has(e.name)||U&&p.exposed(e.definition()))},!0)));function c(e){return e.transform(u),E}}function F(t,e,i){return e instanceof Ae?t(e.value)||F(t,e.name,e.value)||!mi(i)&&F(t,e.name,i):i?e instanceof Ee?!(!e.rest||!F(t,e.rest))||(e instanceof fn?i instanceof ye?!Le(e.elements,function(e,n){return!F(t,e,i[n])}):!i.is_string(p)||!Le(e.elements,function(e){return!F(t,e)}):e instanceof un?!!i.may_throw_on_access(p)||!Le(e.properties,function(e){return!(e.key instanceof qe&&t(e.key)||F(t,e.value))}):void 0):void 0:!(e instanceof On)}function j(e,n){var t,i;v.push(e),e instanceof ye?e.elements.forEach(function(e){j(e,n)}):e instanceof we?((i=e.left)instanceof Ee||h.push(v.slice()),j(i),j(e.right),i instanceof Ie&&"="==e.operator&&N.set(i.name,(N.get(i.name)||0)+1)):e instanceof Je?j(e.expression,n):e instanceof xe?(i=We[e.operator],n&&i&&"??"!=e.operator&&e.right instanceof we&&"="==e.right.operator&&!(e.right.left instanceof Ee)&&h.push(v.slice()),j(e.left,!i&&n),j(e.right,n)):e instanceof ke?(j(e.expression),e.args.forEach(j)):e instanceof Ze?j(e.expression):e instanceof Te?(j(e.condition),j(e.consequent,n),j(e.alternative,n)):e instanceof sn?e.definitions.forEach(j):e instanceof pn?j(e.expression):e instanceof dn?(j(e.condition),e.body instanceof Xe||j(e.body)):e instanceof hn?e.value&&j(e.value):e instanceof _n?(e.init&&j(e.init,!0),e.condition&&j(e.condition),e.step&&j(e.step,!0),e.body instanceof Xe||j(e.body)):e instanceof vn?(j(e.object),e.body instanceof Xe||j(e.body)):e instanceof De?(j(e.condition),e.body instanceof Xe||j(e.body),!e.alternative||e.alternative instanceof Xe||j(e.alternative)):e instanceof Sn?e.properties.forEach(function(e){v.push(e),e.key instanceof qe&&j(e.key),e instanceof kn&&j(e.value,n),v.pop()}):e instanceof Pe?(t=e.expressions.length-(n?0:1),e.expressions.forEach(function(e,n){j(e,n<t)})):e instanceof ze?j(e.body,!0):e instanceof Me?j(e.expression):e instanceof En?(j(e.expression),j(e.property)):e instanceof Dn?(j(e.expression),e.body.forEach(j)):e instanceof Mn?rt[e.operator]?h.push(v.slice()):j(e.expression):e instanceof He?(e.name instanceof $n&&(e.value?(i=e.name.definition()).references.length>i.replaced&&h.push(v.slice()):_.set(e.name.name,(_.get(e.name.name)||0)+1)),e.value&&j(e.value)):e instanceof Bn&&e.expression&&j(e.expression),v.pop()}function ne(e,n){var t=u.parent(n);return t instanceof ye||t instanceof we||t instanceof Je||t instanceof xe||t instanceof ke||t instanceof Ze||t instanceof Te?e:t instanceof sn?z(t,n+1):t instanceof hn||t instanceof De||t instanceof gn||t instanceof Tn||t instanceof $e?e:t instanceof Pe?(t.tail_node()===e?ne:z)(t,n+1):t instanceof ze?z(t,n+1):t instanceof Me||t instanceof Dn||t instanceof Mn||t instanceof He||t instanceof Bn?e:null}function te(e,n,t){for(var i;i=e,(e=u.parent(++t))instanceof we&&e.operator.slice(0,-1)==n||e instanceof xe&&e.operator==n;);return i}function ie(e,n,t,i,r){var o=O,s=(O=!1,l),a=b,f=u.stack;return u.stack=[i],e.transform(u),u.stack=f,b=a,l=s,O=o,E?(E=!1,t):n(i,r+1)}function P(e,n){var t,i=u.parent(n);return i instanceof ye?P(i,n+1):i instanceof we?L(i)||i.left.match_symbol(function(e){return e instanceof Ie&&(y.name==e.name||g.name==e.name)})?e:i.left!==e&&We[t=i.operator.slice(0,-1)]?te(i,t,n):P(i,n+1):i instanceof Je?P(i,n+1):i instanceof xe?i.left!==e&&We[t=i.operator]?te(i,t,n):P(i,n+1):i instanceof ke?i:i instanceof Ze?i.expression!==e?e:P(i,n+1):i instanceof Te?i.condition!==e?e:P(i,n+1):i instanceof sn?z(i,n+1):i instanceof ln?e:i instanceof hn?z(i,n+1):i instanceof _n?i.init!==e&&i.condition!==e?e:P(i,n+1):i instanceof vn?i.init!==e?e:P(i,n+1):i instanceof De?i.condition!==e?e:P(i,n+1):i instanceof Tn?(t=u.parent(n+1),Le(t.properties,function(e){return e instanceof kn})?P(t,n+2):t):i instanceof $e?i.expression===e?P(i,n+1):e:i instanceof Pe?(i.tail_node()===e?P:z)(i,n+1):i instanceof ze?z(i,n+1):i instanceof Me?P(i,n+1):i instanceof Dn?i.expression!==e?e:P(i,n+1):i instanceof Mn?"delete"==i.operator?e:P(i,n+1):i instanceof He?i.name.match_symbol(function(e){return e instanceof qn&&(y.name==e.name||g.name==e.name)})?e:P(i,n+1):i instanceof In?i.condition!==e?e:P(i,n+1):i instanceof Bn?P(i,n+1):null}function z(n,t){var e,i=u.parent(t);return ee(n,i)||Z(n,i)?n:i instanceof ye?z(i,t+1):i instanceof we?r(i.left):i instanceof Je?n:i instanceof xe||i instanceof ke||i instanceof Ze||i instanceof Te||i instanceof sn||i instanceof hn||i instanceof De?z(i,t+1):i instanceof gn?n:i instanceof Tn?(e=u.parent(t+1),Le(e.properties,function(e){return e instanceof kn})?z(e,t+2):e):i instanceof $e?(e=i.expression)===n?z(i,t+1):ie(e,z,n,i,t):i instanceof Pe||i instanceof ze?z(i,t+1):i instanceof Me?n:i instanceof Dn||i instanceof Mn?z(i,t+1):i instanceof He?r(i.name):i instanceof Bn?n:null;function r(e){return L(i)?n:e!==n&&e instanceof Ee?ie(e,z,n,i,t):z(i,t+1)}}function re(e){if(M)M=!1;else if(!(s<1)){var n=(e=e.tail_node())instanceof we&&"="==e.operator?e.left:e;if(n instanceof Ie){var t=n.definition();if(!t.undeclared&&!ht(t)){if(n!==e){if(Kt(n,p))return;if(t.references.length-t.replaced<2)return;e=a.clone();e[e instanceof we?"right":"value"]=n,0<=a.name_index&&(e.name_index=a.name_index,e.arg_index=a.arg_index),a=e}return g=t}}}}function oe(e){return e.references.length-e.replaced-(N.get(e.name)||0)}function se(e){var n;return e instanceof we?e.right:e instanceof xe?((n=e.clone()).right=e.right.right,n):e instanceof He?e.value:void 0}function ae(t,i){return function(e,n){if(n.in_boolean_context()){if(t&&e.is_truthy()&&!e.has_side_effects(p))return!0;if(e.is_constant()){n=e.evaluate(p);if(!(n instanceof qe))return!n==!t}}return i(e)}}function fe(e){for(;e.write_only&&(e.write_only=!1,e instanceof we);)e=e.right}function ce(e,n){var t=n.scope||Gt(u)||he;e.walk(new Ye(function(e){if(e instanceof Qe)return!0;e instanceof On&&(e.scope=t)}))}function ue(a){var f=new Wn,c=(a instanceof He&&(a.name.definition().fixed||(W=!1),f.add(a.name.name,y)),be.uses_arguments&&!p.has_directive("use strict")),u=be instanceof Pn,l=new Ye(function(n){var e,t,i;if(n instanceof Ie?(e=n.fixed_value())||(t=(e=n).definition(),i=n.fixed&&n.fixed.escaped||t.escaped,t.undeclared)||!t.assignments&&i&&!i.cross_scope||!mt(t,n.scope,n,l.parent())&&Ar(t)||(W=!1):n instanceof An&&(e=n),e)f.add(n.name,lt(p,l,n,e,0));else{if(n instanceof Oe){for(var r,o=0,s=n;r=l.parent(o++);s=r){if(r instanceof we){if(r.left===s)break;if("="==r.operator)continue;if(We[r.operator.slice(0,-1)])continue;break}if(r instanceof xe){if(We[r.operator])continue;break}if(r instanceof ke)return;if(r instanceof je)return;if(r instanceof Pe){if(r.tail_node()===s)continue;break}if(r instanceof Fn){if(r.tag)return;break}}return n.enclosed.forEach(function(e){e.scope!==n&&G.set(e.name,!0)}),!0}c&&n instanceof En&&(be.each_argname(function(e){p.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||(W=!1),f.add(e.name,!0))}),c=!1)}u&&("Call"==n.TYPE?V||(i=n.expression)instanceof $e||i instanceof yn&&!i.contains_this()||(V=!0):n instanceof $e&&function e(n){return n instanceof Ie&&!(n=n.fixed_value())||(n instanceof we?"="==n.operator&&e(n.right):n instanceof $e||n instanceof An)}(n.expression)&&(n!==y||a instanceof Mn?U=!0:V=!0))});return a.walk(l),f}function le(e,n){if(e instanceof Pe)switch(e.expressions.length){case 0:return null;case 1:return Qt(n.parent(),e,e.expressions[0])}}function pe(e){e=S.get(e.name);if(e&&!Le(e,function(e){return!e}))return e[0]!==y||void(x=!1)}function de(e){e=e.definition();return!(1==e.orig.length&&e.orig[0]instanceof Cn||e.scope.resolve()===be&&(!V||!p.exposed(e))&&Le(e.references,function(e){return e.scope.resolve(!0)===be}))}function t(e,n){if(e instanceof we)return t(e.left,!0);if(e instanceof Mn)return t(e.expression,!0);if(e instanceof He)return e.value&&t(e.value);if(n){if(e instanceof pn)return t(e.expression,!0);if(e instanceof En)return t(e.expression,!0);if(e instanceof Ie)return e.definition().scope.resolve()!==be}return!1}}(e,l)||(i=9)}while(i&&0<o--);return e;function $(e,n){var t,i,r=e.self(),o=0;do{r instanceof oe?r=e.parent(o++):r instanceof de?r=r.body:r instanceof z&&((i=e.parent(o)).body[i.body.length-1]!==r&&!function(e){for(var n=e.length;0<=--n;)if(e[n]instanceof F)return 1;return}(r.body)||(o++,r=i));do{if(n(t=r))return t}while((r=e.parent(o++))instanceof De)}while(t&&(r instanceof Se||r instanceof oe||r instanceof je||r instanceof z||r instanceof zn)&&di(r.body,t))}function d(e,n){if(!(e instanceof Se))return e;for(var t=null,i=0;i<e.body.length;i++){var r=e.body[i];if(r instanceof ee&&li(r))n.push(r);else{if(t||ni(r))return!1;t=r}}return t}function p(e){return e instanceof we?[e]:e instanceof Pe?e.expressions.slice():void 0}function h(e,n,t){var i=p(n);if(i){for(var r=!1,o=i.length-(t=t||0);0<=--o;)if(u(f=i[o])){if(f.left instanceof Ie)s=i.slice(o+1);else{if(!(f.left instanceof $e&&u(f.left.expression)))continue;var s=i.slice(o+1),a=f.clone(),f=f.left.expression;a.left=a.left.clone(),a.left.expression=f.left.clone(),s.unshift(a)}0!=s.length&&m(f.left,f.right,s)&&(r=!0,i=i.slice(0,o).concat(f,s))}if(e instanceof sn){for(o=e.definitions.length;0<=--o;){var c=e.definitions[o];if(c.value){m(c.name,c.value,i)&&(r=!0),!function(e,n,t){if(l.option("conditionals")&&!(e.name instanceof Ee)){for(var i=!1,r=e.name.definition();n.length>t;){var o=gr(l,r,e.value,n[0]);if(!o)break;e.value=o,n.shift(),i=!0}return i}}(c,i,t)||(r=!0);break}}e instanceof ee&&v(e.definitions,i,t)&&(r=!0)}return r&&i}function u(e){return e instanceof we&&"="==e.operator}}function _(e,n){if(e instanceof ze&&!li(n)){e=p(e.body);if(e){var t=[];if(v(t,e.reverse(),0))return n.definitions=t.reverse().concat(n.definitions),e.reverse()}}}function v(e,n,t){for(var i=!1;n.length>t;){var r=n[0];if(!(r instanceof we))break;if("="!=r.operator)break;var o=r.left;if(!(o instanceof Ie))break;if(ci(o))break;if(o.scope.resolve()!==be)break;var s=o.definition();if(s.scope!==be)break;if(s.orig.length>s.eliminated+1)break;if("SymbolVar"!=s.orig[0].TYPE)break;o=Ve($n,o);e.push(Ve(He,r,{name:o,value:r.right})),s.orig.push(o),s.replaced++,n.shift(),i=!0}return i}function m(e,r,n){var o=new Wn;for(o.set(e.name,!0);r instanceof we&&"="==r.operator;)r.left instanceof Ie&&o.set(r.left.name,!0),r=r.right;if(r instanceof Sn){var t=!1;do{if(!function e(n){if(!(n instanceof we))return;if("="!=n.operator)return;if(!(n.left instanceof $e))return;var t=n.left.expression;if(!(t instanceof Ie))return;if(!o.has(t.name))return;if(!n.right.is_constant_expression(be))return;var i=n.left.property;i instanceof qe&&(i=(i=e(i)?n.left.property=i.right.clone():i).evaluate(l));if(i instanceof qe)return;i=""+i;t="__proto__"==i||l.has_directive("use strict")?function(e){e=e.key;return"string"==typeof e&&e!=i&&"__proto__"!=e}:function(e){var n=e.key;return e instanceof S||e instanceof q?"string"==typeof n&&n!=i:"__proto__"!==n};if(!Le(r.properties,t))return;r.properties.push(Ve(kn,n,{key:i,value:n.right}));return!0}(n[0]))break}while(n.shift(),t=!0,n.length);return t}}}function vi(i,r,o){var s,a=!1;function f(e){s?(s.push(e),ti(e)||(s.required=!0)):o.push(e)}r.walk(new Ye(function(e,n){var t;return e instanceof fe?(e.extends=null,e.properties=[],f(e),!0):e instanceof sn?(e.remove_initializers(i,t=[])&&qe.warn("Dropping initialization in unreachable code [{start}]",e),0<t.length&&(e.definitions=t,f(e)),!0):e instanceof bn?(f(e),!0):e instanceof je||(e instanceof Qe?(t=s,s=[],n(),s.required?o.push(Ve(Se,r,{body:s})):s.length&&[].push.apply(o,s),s=t,!0):void(e instanceof xn||(a=!0)))})),a&&qe.warn("Dropping unreachable code [{start}]",r)}function mi(e,n){return null==e||e.is_undefined||e instanceof Be||e instanceof Re&&"void"==e.operator&&(!n||!e.expression.has_side_effects(n))}function gi(e,n,t){switch(e){case"-":return n.is_negative_zero()&&(!(t instanceof T)||0==t.value);case"&&":case"||":return n.is_negative_zero()||t.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}function bi(e,n){return n||/strict/.test(e.option("pure_getters"))}function yi(e,n,t){switch(n){case"&&":return t.left.is_defined(e)&&t.right.is_defined(e);case"||":return t.left.is_truthy()||t.right.is_defined(e);case"??":return t.left.is_defined(e)||t.right.is_defined(e);default:return!0}}function wi(e){qe.warn("global_defs {this} redefined [{start}]",e)}function xi(e,n,t){return n.print_to_string().length-e.print_to_string().length<(t||0)?n:e}function Si(e,n,t){return xi(Ve(ze,e,{body:e}),Ve(ze,n,{body:n}),t).body}function ki(e,n,t,i){return(H(e)?Si:xi)(n,t,i)}function Ti(n){var t=Object.create(null);return Object.keys(n).forEach(function(e){t[e]=X(n[e])}),t}function Ai(e){for(var n=0;n<e.length;n++){var t=e[n];if(!(t instanceof x))return t}}function Ei(){return this.value?Ve(Fe,this.value,{value:this.value}):Ai(this.body)}function Di(e,n){var t=n.evaluate(e);return t===n?n:ki(e,n,Jt(t,n).optimize(e),e.eval_threshold)}function Oi(e){if(e instanceof pn){var n,t=e.expression;if(ci(t))return(n=to[t.name])&&(n[e.property]||"Math"==t.name&&"random"==e.property)}}function qi(e){e instanceof fn?e.elements.forEach(qi):e instanceof un?e.properties.forEach(function(e){qi(e.value)}):e instanceof $e?qi(e.expression):e instanceof Ie&&e.definition().references.forEach(function(e){delete e._eval})}function Ci(e,n,t,i,r){for(var o=[],s=0;s<e.length;s++){var a=e[s],f=a._eval(n,t,i,r);if(a===f)return;o.push(f)}return o}function $i(e){return Ve(Re,e,{operator:"!",expression:e})}function Fi(e,n,t){e=$i(e);return t?xi(e,Ve(ze,n,{body:n}))===e?e:n:xi(e,n)}function ji(e,n,t){return!Le(e,t?function(e){return e instanceof Me?!t(e,n):!e.has_side_effects(n)}:function(e){return!e.has_side_effects(n)})}function Pi(e,n){e=e.expression;return!e.is_string(n)||e.has_side_effects(n)}function zi(e,n){for(var t=e.length;0<=--t;)if(e[t].may_throw(n))return!0;return!1}function Mi(e,n){return!!e.may_throw(n)||!((e=e instanceof Ie?e.fixed_value():e)instanceof Oe&&!zi(e.argnames,n)&&!zi(e.body,n))||Ln(e)&&e.value&&e.value.may_throw(n)}function Ni(e,n){for(var t=e.length;0<=--t;)if(!e[t].is_constant_expression(n))return!1;return!0}function Ii(e){return e&&e.aborts()}function Ri(){var e=this.body.length;return 0<e&&Ii(this.body[e-1])}function Bi(e,n,t){switch(e.body.length){case 0:return t?Kn.skip:Ve(Z,e);case 1:var i=e.body[0];return ti(i)?n instanceof gn&&i instanceof bn?e:i:e}return e}function Hi(e,n){!n.option("rests")||e.uses_arguments||e.rest instanceof fn&&n.drop_fargs(e,n.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest)}function Yi(e,n){if(n.option("arrows")){Hi(e,n),e.value&&(e.body=[e.first_statement()]);var t=_i(e.body,n);switch(t.length){case 1:var i=t[0];if(i instanceof Fe){e.body.length=0,e.value=i.value;break}default:e.body=t,e.value=null}}return e}function Li(e,n){for(var t=n.length;0<=--t;)n[t]||(n[t]=Ve(pe,e))}function Ui(e,n){e=Ve(se,e);return e.name&&(e.name=n?null:Ve($,e.name)),e}function Vi(e,n){var t;switch(e.CTOR){case ne:t=te;break;case ie:t=re;break;case an:t=mn;break;case AST_GeneratorDefun:t=AST_GeneratorFunction}var i=Ve(t,e);return i.name=n?null:Ve(ve,e.name),i}function Gi(n,t){n.walk(new Ye(function(e){return e instanceof Fe?(t(e),!0):e instanceof je&&e!==n||void 0}))}function Wi(e){var n=Object.create(null);return Gi(e,function(e){var e=e.value;(e=e&&e.tail_node())instanceof Ie&&(e=e.definition().id,n[e]=(n[e]||0)+1)}),n}function Ki(e,n,t){if(t.exposed(e))return!1;switch(e.references.length-e.replaced-(n[e.id]||0)){case e.drop_return:return"d";case e.bool_return:return!0}}function Ji(e,i){Gi(e,function(e){e.in_bool=!0;var n,t=e.value;t&&((n=rr(i,t))?n instanceof qe||(t=t.drop_side_effect_free(i),e.value=t?Ge(e.value,[t,Ve(Ce,e.value,{value:1})]):Ve(Ce,e.value,{value:1})):(t=t.drop_side_effect_free(i),e.value=t?Ge(e.value,[t,Ve(Ce,e.value,{value:0})]):null))})}function Xi(e,n){return!e.name||!n.option("ie")||(e=e.name.definition(),!n.exposed(e)&&Le(e.references,function(e){return!(e instanceof Ie)}))}function Qi(o,n,e){if(n instanceof Oe){var t,i=Ln(n),r=Gn(n),s=!1,a=!1;if(i&&o.option("arrows")?n.value?r&&!wr(o,n.value)||(t=n.value.drop_side_effect_free(o))!==n.value&&(s=!0,n.value=t):a=!0:Un(n)||(a=!(!e&&n.name)||(t=n.name.definition()).references.length==t.replaced),a&&(n.process_expression(!1,function(e){var n=e.value;if(n){if(r&&!wr(o,n))return e;n=n.drop_side_effect_free(o,!0)}return s=!0,n?Ve(ze,e,{body:n}):Ve(Z,e)}),Gi(n,function(e){var n,t=e.value;!t||r&&!wr(o,t)||(n=t.drop_side_effect_free(o))!==t&&(s=!0,n&&r&&!wr(o,n)&&(n=n.negate(o)),e.value=n)})),r&&o.option("awaits")){a&&n.process_expression("awaits",function(e){var n=e.body;if(n instanceof Je){if(wr(o,n.expression)){if(s=!0,!(n=n.expression.drop_side_effect_free(o,!0)))return Ve(Z,e);e.body=n}}else if(n instanceof Pe){for(var t=n.expressions,i=t.length;0<=--i;){var r=t[i];if(!(r instanceof Je))break;r=r.expression;if(!wr(o,r))break;if(s=!0,t[i]=r.drop_side_effect_free(o))break}switch(i){case-1:return Ve(Z,e);case 0:e.body=t[0];break;default:t.length=i+1}}return e});var f,c=!a&&n.name||i&&n.value&&!wr(o,n.value),u=new Ye(function(e){return!!c||(u.parent()===n&&e.may_throw(o)||e instanceof Je||e instanceof g?c=!0:e instanceof Fe?e.value&&!wr(o,e.value)?c=!0:void 0:e instanceof je&&e!==n||void 0)});if(n.walk(u),!c){switch(n.CTOR){case _:f=h;break;case te:f=mn;break;case re:f=AST_GeneratorFunction}return Ve(f,n)}}return s&&n.clone()}}function Zi(e,n,t,i){for(var r=e.length,o=[],s=!1,a=0;a<r;a++){var f=e[a],c=i&&f instanceof Me?i(f,n,t):f.drop_side_effect_free(n,t);c!==f&&(s=!0),c&&(o.push(c),t=!1)}return o.length?s?o:e:null}function er(e,n,t){var i=e.expression;return i.is_string(n)?i.drop_side_effect_free(n,t):e}function nr(e){return e instanceof Me?Ve(ye,e,{elements:[e]}):e}function tr(n,e,t){t=t||xn;var i=!1,r=new Ye(function(e){return!!(i||e instanceof je)||(e instanceof t&&r.loopcontrol_target(e)===n?i=!0:void 0)});return e instanceof de&&r.push(e),r.push(n),n.body.walk(r),i}function ir(e,n,t){if((e=e instanceof Pe?e.tail_node():e)instanceof xe)if(e.left instanceof U){if(e.right instanceof Re&&"typeof"==e.right.operator){var i=e.right.expression;if(ci(i)){var r,o,s,a,f,c,u,l="undefined"==e.left.value;switch(e.operator){case"==":r=l?t:n;break;case"!=":r=l?n:t;break;default:return}r&&(o=!1,s=i.definition(),f=[],c=[],u=new Ye(function(e,n){if(o)return!0;if(e instanceof we){var t=e.left;if(!(t instanceof Ie&&t.definition()===s))return;switch(e.right.walk(u),e.operator){case"=":case"&&=":o=!0}return!0}var i;return e instanceof ke?(n(),(a=e.expression.tail_node())instanceof Ie&&(a=a.fixed_value(),i=f.length),a instanceof Oe?be(c,a)&&a.walk(u):o=!0,0<=i&&(f.length=i),!0):e instanceof dn?(i=f.length,n(),o&&(f.length=i),!0):e instanceof _n?(e.init&&e.init.walk(u),i=f.length,e.condition&&e.condition.walk(u),e.body.walk(u),e.step&&e.step.walk(u),o&&(f.length=i),!0):e instanceof vn?(e.object.walk(u),i=f.length,e.init.walk(u),e.body.walk(u),o&&(f.length=i),!0):e instanceof je?e!==a||void 0:e instanceof Ie?(e.definition()===s&&f.push(e),!0):void 0}),r.walk(u),f.forEach(function(e){e.defined=!0}))}}}else switch(e.operator){case"&&":ir(e.left,n),ir(e.right,n);break;case"||":ir(p(e.left),t),ir(p(e.right),t)}function p(e){if(e instanceof xe)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function rr(e,n,t){return!!n.truthy||(mi(n)?void 0:!(n.falsy&&!t)&&(!!n.is_truthy()||n.evaluate(e,!0)))}function or(e,n){var t,i=0,r=!1,o=e.self();if(!Vn(o))for(;;){if(t=o,(o=e.parent(i++))instanceof xe)switch(t){case o.left:if(We[o.operator])continue;break;case o.right:if(a(o.left))switch(o.operator){case"&&":n[r?"falsy":"truthy"]=!0;break;case"||":case"??":n[r?"truthy":"falsy"]=!0}}else if(o instanceof Te){var s=o.condition;if(s===t)continue;if(a(s))switch(t){case o.consequent:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}}else{if(o instanceof hn)break;if(o instanceof De)break;if(o instanceof Pe){if(o.expressions[0]===t)continue}else if(o instanceof ze)break}return}for(;;){if(t=o,(o=e.parent(i++))instanceof Se){if(o.body[0]===t)continue}else if(o instanceof De&&a(o.condition))switch(t){case o.body:n[r?"falsy":"truthy"]=!0;break;case o.alternative:n[r?"truthy":"falsy"]=!0}return}function a(e){return n.equals(e)||e instanceof Re&&"!"==e.operator&&n.equals(e.expression)&&(r=!0)}}function sr(r){return function(n,t){var i=!1;return this.definitions.forEach(function(e){e.value&&(i=!0),e.name.match_symbol(function(e){e instanceof qn&&t.push(Ve(He,e,{name:e,value:r(n,e)}))},!0)}),i}}function ar(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof ve?3:2)}function fr(e,n){if(e.exposed(n))return!0;for(var t=n.scope.resolve(),i=n.scope;i!==t;)if((i=i.parent_scope).var_names().has(n.name))return!0}function cr(e,i){return Ve(ee,e,{definitions:e.definitions.map(function(e){return Ve(He,e,{name:e.name.convert_symbol($n,function(e,n){var t=e.definition();t.orig[t.orig.indexOf(n)]=e,t.scope!==i&&((t.scope=i).variables.set(t.name,t),i.enclosed.push(t),i.var_names().set(t.name,!0))}),value:e.value})})})}function ur(e,n){n=n.definition();return(n.fixed||0===n.fixed)&&ar(n)&&Ar(n)&&!fr(e,n)}function lr(e,n){return n.option("varify")&&Le(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof qn)return!ur(n,e)},!0)})?cr(e,n.find_parent(je)):e}function pr(e,n){if(n.option("optional_chains")&&e.terminal)do{var t=e.expression;if(e.optional){var i=rr(n,t,!0);if(null==i)return Ve(Re,e,{operator:"void",expression:t}).optimize(n);i instanceof qe||(e.optional=!1)}}while(("Call"==(e=t).TYPE||e instanceof $e)&&!e.terminal)}function dr(e){var n,t=e.expression;return t instanceof Pe?(t=t.expressions.slice(),(n=e.clone()).expression=t.pop(),t.push(n),Ge(e,t)):e}function hr(e,t,n){var i=e.expression,r=i instanceof Ie?i.fixed_value():i;if(r instanceof Oe&&!r.uses_arguments&&!(r.pinned()||n&&n.indexOf(r)<0)){var o=e.args;if(Le(o,function(e){return!(e instanceof Me)})){var s=r.argnames,n=r===i&&!r.name;if(r.rest){if(!n||!t.option("rests"))return;for(var a=s.length,o=o.slice(0,a);o.length<a;)o.push(Ve(Be,e).optimize(t));o.push(Ve(ye,e,{elements:e.args.slice(a)})),s=s.concat(r.rest),r.rest=null}else o=o.slice(),s=s.slice();for(var f=0,c=0,u=n&&t.option("default_values"),l=n&&t.drop_fargs(r,e)?function(e,n){return!e||(e instanceof fn?0==e.elements.length&&!e.rest&&n instanceof ye:e instanceof un?0==e.properties.length&&!e.rest&&n&&!n.may_throw_on_access(t):e.unused)}:Ue,p=[],d=0;d<o.length;d++){var h=s[d];if(u&&h instanceof Ae&&o[d].is_defined(t)&&(s[d]=h=h.name),h&&void 0===h.unused){if(l(h,o[d])){_=o[d].drop_side_effect_free(t);s.splice(d,1),o.splice(d,1),_&&p.push(_),d--;continue}p.push(o[d]),o[f++]=Ge(e,p),p=[]}else{var _=o[d].drop_side_effect_free(t);if(l(h)){h&&s.splice(d,1),o.splice(d,1),_&&p.push(_),d--;continue}if(_)p.push(_),o[f++]=Ge(e,p),p=[];else if(h){if(!p.length){o[f++]=Ve(Ce,o[d],{value:0});continue}o[f++]=Ge(e,p),p=[]}}c=f}for(;d<s.length;d++)l(s[d])&&s.splice(d--,1);r.argnames=s,o.length=c,e.args=o,p.length&&(i=Ge(e,p),o.push(o.length<s.length?Ve(Re,e,{operator:"void",expression:i}):i))}}}function _r(e,n){n=n||e.find_parent(je);var t=[];return(Gn(n)||n instanceof Pn&&e.option("module"))&&t.push("await"),Un(n)&&t.push("yield"),t.length&&X(t)}function vr(t,i){var r,o;return!i||(r=!0,o=new Ye(function(e){if(!r)return!0;if(e instanceof je){if(e===t)return;if(Ln(e))for(var n=0;r&&n<e.argnames.length;n++)e.argnames[n].walk(o);else e instanceof bn&&i[e.name.name]&&(r=!1);return!0}e instanceof On&&i[e.name]&&e!==t.name&&(r=!1)}),t.walk(o),r)}function mr(e,n){return e.in_strict_mode(n)||!n.has_directive("use strict")}function gr(t,i,e,n){if(n instanceof xe&&("&&"==n.operator||"||"==n.operator)&&n.right instanceof we&&"="==n.right.operator&&n.right.left instanceof Ie&&n.right.left.definition()===i&&!e.has_side_effects(t)&&r(n.left)&&r(n.right.right))return i.replaced++,"&&"==n.operator?Ve(Te,n,{condition:n.left,consequent:n.right.right,alternative:e}):Ve(Te,n,{condition:n.left,consequent:e,alternative:n.right.right});function r(e){var n;if(!e.has_side_effects(t))return n=!1,e.walk(new Ye(function(e){return!!n||(e instanceof Ie&&e.definition()===i?n=!0:void 0)})),!n}}function br(e,n){return e instanceof we?!n&&"="==e.operator&&br(e.right):e instanceof y?!n:e instanceof Pe?br(e.tail_node(),n):e instanceof Ie?!n&&br(e.fixed_value()):e instanceof ye||e instanceof en||e instanceof Oe||e instanceof Sn}function yr(e,n,t){switch(e){case"in":return br(n)||t&&t.option("unsafe_comps");case"instanceof":return pt(n=n instanceof Ie?n.fixed_value():n)||t&&t.option("unsafe_comps");default:return!0}}function wr(e,n){var t;return!!n.is_constant()||(n instanceof we?"="!=n.operator||wr(e,n.right):n instanceof xe?!We[n.operator]||wr(e,n.left)&&wr(e,n.right):n instanceof ke?Gn(n.expression):n instanceof Te?wr(e,n.consequent)&&wr(e,n.alternative):n instanceof Pe?wr(e,n.tail_node()):n instanceof Ie?(t=n.fixed_value())&&wr(e,t):n instanceof Fn?!n.tag||Er(e,n.tag):n instanceof Mn||void 0)}function xr(e,n){return e instanceof we?Kt(e.left,n)?e:e.left:e instanceof Pe?xr(e.tail_node(),n):!(e instanceof Re&&rt[e.operator])||Kt(e.expression,n)?e:e.expression}function Sr(e,n){return n instanceof pn?Sr(e,n.expression):n instanceof En?Sr(e,n.expression)&&Sr(e,n.property):n instanceof On||!n.has_side_effects(e)}function kr(e,n){var t,i=e.right.tail_node();i!==e.right&&((t=e.right.expressions.slice(0,-1)).push(i.left),(i=i.clone()).left=Ge(e.right,t),e.right=i),e.left=Ve(xe,e,{operator:e.operator,left:e.left,right:i.left,start:e.left.start,end:i.left.end}),e.right=i.right,n?e.left=e.left.transform(n):e.operator==i.left.operator&&kr(e.left)}function Tr(e,n,t){var i=0,r=e.self();do{if(r===t)return r;if(pt(r)&&r.name&&r.name.definition()===n)return r}while(r=e.parent(i++))}function Ar(e){var n=e.scope.resolve();return Le(e.references,function(e){return n===e.scope.resolve()})}function Er(e,n){return e.option("unsafe")&&n instanceof pn&&"raw"==n.property&&ci(n.expression)&&"String"==n.expression.name}function Dr(e){var t=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,n){n=tt(n);if("string"==typeof n)return n;t=!0}),!t)return e}function Or(e,n){return e instanceof Ie||e.TYPE===n.TYPE}function qr(t,n){var i=!1,r=new Ye(function(e){return!!i||(e instanceof Ie&&Jn(e.definition(),n)?i=!0:void 0)}),o=new Ye(function(e){if(i)return!0;if(e instanceof Oe&&e!==t){if(!(e.name||Gn(e)||Un(e))){var n=o.parent();if(n instanceof ke&&n.expression===e)return}return e.walk(r),!0}});return t.walk(o),i}function Cr(e,n){var t;if(e)return"Call"!=(t=n.parent()).TYPE?1:t.expression!==n.self()||(!(e instanceof Ie)||(e=e.fixed_value()))&&e instanceof Oe&&!e.contains_this()}function $r(e){return e instanceof kn&&"string"==typeof e.key&&!(e instanceof D&&e.value.contains_super())}function Fr(e){var n=e.definition().redefined();return n&&((e=e.clone()).thedef=n),e}function jr(n,e){var t=!1;return e.walk(new Ye(function(e){return!!t||(e instanceof Ie&&n.variables.get(e.name)===e.definition()?t=!0:void 0)})),t}function Pr(e,n){var t=[];e.references.forEach(function(e){e=e.fixed;e&&be(t,e)&&(e.assigns?e.assigns.unshift(n):e.assigns=[n])})}function zr(e,n){var t=Ve(Ie,n),i=Ve(we,n,{operator:"=",left:t,right:Ve(Be,n).transform(e)}),e=n.definition();return e.fixed&&(t.fixed=function(){return i.right},t.fixed.assigns=[i],Pr(e,i)),e.assignments++,e.references.push(t),i}function Mr(e,n,t,i,r,o,s){for(var a=[],f=o.expressions,c=t,u=f.length-(s||0),l=u;0<=--u;r=!(c=!0)){var p=f[u].try_inline(e,n,c,i,r);p&&(d(),a.push(p))}if(0!=a.length)return d(),!t&&a[0]instanceof ze&&(a[0]=Ve(Fe,o,{value:a[0].body})),Ve(Se,o,{body:a.reverse()});function d(){u+1<l&&a.push(Ve(ze,o,{body:Ge(o,f.slice(u+1,l))})),l=u}}var Nr,Ir,Rr,Br,Hr,Yr,Lr,Ur,Vr,Gr,We,Wr,Kr,Jr,Xr,Qr,Zr,eo,no,to,io,ro,oo,so,ao,fo,co,uo,lo,po;return(ct.prototype=new Hn(function(e,n,t){var i,r;return e._squeezed?e:((i=e instanceof je)&&(this.option("arrows")&&Ln(e)&&e.value&&(e.body=[e.first_statement()],e.value=null),e.hoist_properties(this),e.hoist_declarations(this),e.process_returns(this)),n(e,this),n(e,this),r=e.optimize(this),!i||r!==e||this.has_directive("use asm")||r.pinned()||(r.drop_unused(this),r.merge_variables(this)&&r.drop_unused(this),n(r,this)),r===e&&(r._squeezed=!0),r)})).option=function(e){return this.options[e]},ct.prototype.exposed=function(e){var n;return!!e.exported||!!e.undeclared||!!(e.global||e.scope.resolve()instanceof Pn)&&(n=this.toplevel,!Le(e.orig,function(e){return n[e instanceof Cn?"funcs":"vars"]}))},ct.prototype.compress=function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var n=this.options.merge_vars,t=+this.options.passes||1,i=1/0,r=!1,o={ie:this.option("ie")},s=0;s<t;s++)if(e.figure_out_scope(o),(0<s||this.option("reduce_vars"))&&e.reset_opt_flags(this),this.options.merge_vars=n&&(r||s==t-1),e=e.transform(this),1<t){var a=0;if(e.walk(new Ye(function(){a++})),qe.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:s,min_count:i,count:a}),a<i)i=a,r=!1;else{if(r)break;r=!0}}return this.option("expression")&&e.process_expression(!1),e},(n=function(e,n){e.DEFMETHOD("optimize",function(e){return this._optimized||e.has_directive("use asm")?this:((e=n(this,e))._optimized=!0,e)})})(qe,function(e,n){return e}),Pn.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var n=this.body,t=[],i=0;i<n.length;i++){var r=n[i];r instanceof ce?(n[i]=r=r.body,r instanceof sn?r.definitions.forEach(function(e){e.name.match_symbol(o,!0)}):o(r.name)):r instanceof v&&(n.splice(i--,1),[].push.apply(t,r.properties))}t.length&&n.push(Ve(v,this,{properties:t}))}function o(e){e instanceof qn&&((e=Ve(N,e)).alias=Ve(U,e,{value:e.name}),t.push(e))}}),je.DEFMETHOD("process_expression",function(r,o){var s=this,a=new Hn(function(e){var n;if(r){if((e=e instanceof x?Ve(ze,e,{body:Ve(U,e)}):e)instanceof ze)return o?o(e):Ve(Fe,e,{value:e.body})}else if(e instanceof Fe)return o?o(e):(n=e.value)instanceof U?Ve(x,n):Ve(ze,e,{body:n||Ve(Re,e,{operator:"void",expression:Ve(Ce,e,{value:0})})});if(e instanceof Xe){if(e instanceof Oe){if(e!==s)return e}else if("awaits"===r&&e instanceof zn&&e.bfinally)return e;for(var t=e.body.length;0<=--t;){var i=e.body[t];if(!pi(i,!0)){e.body[t]=i.transform(a);break}}}else e instanceof De?(e.body=e.body.transform(a),e.alternative&&(e.alternative=e.alternative.transform(a))):e instanceof Rn&&(e.body=e.body.transform(a));return e});s.transform(a)}),Pn.DEFMETHOD("unwrap_expression",function(){var e=this;switch(e.body.length){case 0:return Ve(Re,e,{operator:"void",expression:Ve(Ce,e,{value:0})});case 1:var n=e.body[0];if(n instanceof x)return Ve(U,n);if(n instanceof ze)return n.body;default:return Ve(ke,e,{expression:Ve(mn,e,{argnames:[],body:e.body}).init_vars(e),args:[]})}}),qe.DEFMETHOD("wrap_expression",function(){var e=this;return e=(e=Vn(e)?e:Ve(ze,e,{body:e}))instanceof Pn?e:Ve(Pn,e,{body:[e]})}),Nr=/^(0|[1-9][0-9]*)$/,(e=function(e,n){e.DEFMETHOD("reduce_vars",n)})(qe,ge),e(we,function(o,e,n){var s=this,a=s.left,f=s.right,t=a instanceof Ie&&a.definition(),i=t||a instanceof Ee;switch(s.operator){case"=":return a.equals(f)&&!a.has_side_effects(n)?(f.walk(o),function e(n){It(n);{var t;n instanceof pn?e(n.expression):n instanceof En?(e(n.expression),n.property.walk(o)):n instanceof Ie?(qt(t=n.definition(),n),t.fixed&&(n.fixed=t.fixed,n.fixed.assigns?n.fixed.assigns.push(s):n.fixed.assigns=[s])):n.walk(o)}}(a),s.redundant=!0):t&&f instanceof yn?(l(),f.parent_scope.resolve().fn_defs.push(f),f.safe_ids=null,t.fixed&&s.write_only||At(o,t,f),!0):i?(f.walk(o),l(),!0):void Pt(a);case"&&=":case"||=":case"??=":var r=!0;default:if(!i)return Pt(a),p();t.assignments++;var c,u=t.fixed;return lt(n,o,s,s,0)?(t.fixed=!1,p()):(c=Ct(o,t),r&&d(o,!0),f.walk(o),r&&Dt(o),c&&!a.in_arg&&$t(o,t)?(qt(t,a),Ot(o,t),t.single_use&&(t.single_use=!1),a.fixed=t.fixed=function(){return Ve(xe,s,{operator:s.operator.slice(0,-1),left:gt(a,u),right:s.right})},a.fixed.assigns=u&&u.assigns?u.assigns.slice():[t.orig[0]],a.fixed.assigns.push(s),a.fixed.to_binary=bt(function(e){return e.left},u)):(a.walk(o),t.fixed=!1),!0)}function l(){var e=t&&Tr(o,t),r=lt(n,o,s,f,0,Ft(f),e);Mt(o,n,a,function(){return s.right},function(e,n,t){var i;e instanceof Ie?((i=e.definition()).assignments++,n&&!e.in_arg&&$t(o,i)?(qt(i,e),Ot(o,i),(a instanceof Ee||1==i.orig.length&&i.orig[0]instanceof Cn)&&(i.single_use=!1),o.loop_ids[i.id]=o.in_loop,i.fixed=r?0:n,e.fixed=n,e.fixed.assigns=[s],jt(o,i,e.scope,s,f,0,1)):(t(),i.fixed=!1)):(Pt(e),t())})}function p(){if(r)return a.walk(o),d(o,!0),f.walk(o),Dt(o),!0}}),e(xe,function(e){if(We[this.operator])return this.left.walk(e),d(e,!0),this.right.walk(e),Dt(e),!0}),e(Qe,function(e,n,t){wt(0,t,this)}),e(ke,function(n,e){var t,i=this,r=i.expression;if(r instanceof yn)t=fi(i),i.args.forEach(function(e){e.walk(n),e instanceof Me&&(t=!1)}),t&&(r.reduce_vars=Nt),r.walk(n),t&&delete r.reduce_vars;else{if("Call"==i.TYPE)switch(n.in_boolean_context()){case"d":var o=!0;case!0:!function e(n,t){n instanceof we?"="==n.operator&&(e(n.left,t),e(n.right,t)):n instanceof xe?We[n.operator]&&(e(n.left,t),e(n.right,t)):n instanceof Te?(e(n.consequent,t),e(n.alternative,t)):n instanceof Ie&&((n=n.definition()).bool_return++,t)&&n.drop_return++}(r,o)}r.walk(n);var s=i.optional,i=(s&&d(n,!0),i.args.forEach(function(e){e.walk(n)}),s&&Dt(n),r instanceof Ie&&r.fixed_value());i instanceof Oe?At(n,r.definition(),i):n.find_parent(je).may_call_this()}return!0}),e(en,function(n,e,t){var i,r,o=this,t=(wt(0,t,o),o.extends&&o.extends.walk(n),o.properties.filter(function(e){return It(e),e.key instanceof qe&&(n.push(e),e.key.walk(n),n.pop()),e.value}));return o.name&&(i=o.name.definition(),((r=n.parent())instanceof ce||r instanceof ue)&&(i.single_use=!1),$t(n,i,!0)?(Ot(n,i),n.loop_ids[i.id]=n.in_loop,i.fixed=function(){return o},i.fixed.assigns=[o],ar(i)||(i.single_use=!1)):i.fixed=!1),t.forEach(function(e){n.push(e),!e.static||ui(e)&&e.value.contains_this()?(d(n),e.value.walk(n),Dt(n)):e.value.walk(n),n.pop()}),!0}),e(f,function(e,n,t){return d(e,!0),xt(e,t,this),n(),Et(e,this),!0}),e(Te,function(e){return this.condition.walk(e),d(e,!0),this.consequent.walk(e),Dt(e),d(e,!0),this.alternative.walk(e),Dt(e),!0}),e(Ae,function(e){return d(e,!0),this.value.walk(e),Dt(e),this.name.walk(e),!0}),e(ln,function(e){var n=e.in_loop;return e.in_loop=this,d(e),this.body.walk(e),tr(this,e.parent())&&(Dt(e),d(e)),this.condition.walk(e),Dt(e),e.in_loop=n,!0}),e(_n,function(e,n,t){var i=this,t=(wt(0,t,i),i.init&&i.init.walk(e),e.in_loop);return e.in_loop=i,d(e),i.condition&&i.condition.walk(e),i.body.walk(e),i.step&&(tr(i,e.parent())&&(Dt(e),d(e)),i.step.walk(e)),Dt(e),e.in_loop=t,!0}),e(vn,function(e,n,t){var i=this,t=(wt(0,t,i),i.object.walk(e),e.in_loop),r=(e.in_loop=i,d(e),i.init);return r instanceof sn?r.definitions[0].name.mark_symbol(function(e){e instanceof qn&&((e=e.definition()).assignments++,e.fixed=!1)},e):r instanceof Ee||r instanceof Ie?r.mark_symbol(function(e){var n;e instanceof Ie&&(qt(n=e.definition(),e),n.assignments++,e.is_immutable()||(n.fixed=!1))},e):r.walk(e),i.body.walk(e),Dt(e),e.in_loop=t,!0}),e(De,function(e){return this.condition.walk(e),d(e,!0),this.body.walk(e),Dt(e),this.alternative&&(d(e,!0),this.alternative.walk(e),Dt(e)),!0}),e(de,function(e){return d(e,!0),this.body.walk(e),Dt(e),!0}),e(Oe,function(e,n,t){var i=this;return St(e,i)&&be(e.fn_visited,i)&&(i.inlined=!1,d(e),xt(e,t,i),n(),Et(e,i),i.name)&&jt(e,i.name.definition(),i,i.name,i,0,1),!0}),e(bn,function(e,n,t){var i=this,r=i.name.definition(),o=e.parent();return(o instanceof ce||o instanceof ue)&&(r.single_use=!1),St(e,i)&&be(e.fn_visited,i)&&(i.inlined=!1,d(e),xt(e,t,i),n(),Et(e,i)),!0}),e(En,function(e){if(this.optional)return this.expression.walk(e),d(e,!0),this.property.walk(e),Dt(e),!0}),e(Dn,function(n,e,t){wt(0,t,this),this.expression.walk(n);var i=!0;return this.body.forEach(function(e){e instanceof on||(e.expression.walk(n),i&&d(n,!(i=!1)))}),i||Dt(n),Y(this,n),!0}),e(z,function(e){return d(e,!0),Y(this,e),Dt(e),!0}),e(he,function(){this.definition().fixed=!1}),e(_e,function(){this.definition().fixed=!1}),e(Ie,function(t,e,n){var i,r=this,o=r.definition(),s=o.fixed||o.last_ref&&o.last_ref.fixed,a=(qt(o,r),1==o.references.length&&!o.fixed&&o.orig[0]instanceof Cn&&(t.loop_ids[o.id]=t.in_loop),Tr(t,o));switch(a&&a.enclosed.forEach(function(e){var n;o===e||e.scope.resolve()===a||!(n=e.fixed&&e.fixed.assigns)||n[n.length-1]instanceof He||(n=t.safe_ids[e.id])&&(n.assign=!0)}),"m"==o.single_use&&o.fixed&&(o.fixed=0,o.single_use=!1),o.fixed){case 0:Ct(t,o)||(o.fixed=!1);case!1:var f=o.redefined();f&&_t(o.scope,r.scope)&&(f.single_use=!1);break;case void 0:o.fixed=!1;break;default:Ct(t,o)?(r.in_arg&&o.orig[0]instanceof ve&&(r.fixed=o.scope),i=r.fixed_value(),a?o.recursive_refs++:!i||(f=o,!n.option("unused"))||f.scope.pinned()||!1===f.single_use||f.references.length-f.recursive_refs!=1||at(f)&&f.scope.uses_arguments?o.single_use=!1:(o.in_loop=t.loop_ids[o.id]!==t.in_loop,o.single_use=pt(i)&&!i.pinned()&&(!o.in_loop||t.parent()instanceof ke)||!o.in_loop&&o.scope===r.scope.resolve()&&i.is_constant_expression()),lt(n,t,r,i,0,Ft(i),a)&&(o.single_use?o.single_use="m":o.fixed=0),o.fixed&&t.loop_ids[o.id]!==t.in_loop&&(o.cross_loop=!0),jt(t,o,r.scope,r,i,0,1)):o.fixed=!1}r.fixed||(r.fixed=0===o.fixed?s:o.fixed),i instanceof Oe&&!((s=t.parent())instanceof ke&&s.expression===r)&&At(t,o,i)}),e(Fn,function(n,e){var t,i=this.tag;if(i)return i instanceof yn?(this.expressions.forEach(function(e){e.walk(n)}),i.walk(n)):(i.walk(n),this.expressions.forEach(function(e){e.walk(n)}),(t=i instanceof Ie&&i.fixed_value())instanceof Oe?At(n,i.definition(),t):n.find_parent(je).may_call_this()),!0}),e(Pn,function(e,n,t){return this.globals.each(function(e){yt(0,t,e)}),d(e,!0),xt(e,t,this),n(),Et(e,this),!0}),e(zn,function(e,n,t){var i=this;return wt(0,t,i),d(e,!0),Y(i,e),Dt(e),i.bcatch&&(d(e,!0),i.bcatch.walk(e),Dt(e)),i.bfinally&&i.bfinally.walk(e),!0}),e(Mn,function(e,n){var t=this;if(rt[t.operator]){var i,r,o=t.expression;if(o instanceof Ie)return(i=o.definition()).assignments++,r=i.fixed,Ct(e,i)&&!o.in_arg&&$t(e,i)?(qt(i,o),Ot(e,i),i.single_use&&(i.single_use=!1),i.fixed=function(){return Ve(xe,t,{operator:t.operator.slice(0,-1),left:Ve(Re,t,{operator:"+",expression:gt(o,r)}),right:Ve(Ce,t,{value:1})})},i.fixed.assigns=r&&r.assigns?r.assigns.slice():[],i.fixed.assigns.push(t),t instanceof Re?o.fixed=i.fixed:(o.fixed=function(){return Ve(Re,t,{operator:"+",expression:gt(o,r)})},o.fixed.assigns=r&&r.assigns,o.fixed.to_prefix=bt(function(e){return e.expression},i.fixed))):(o.walk(e),i.fixed=!1),!0;Pt(o)}}),e(He,function(i,e,n){var t,r=this,o=r.value;return o instanceof yn&&r.name instanceof qn?(s(),o.parent_scope.resolve().fn_defs.push(o),o.safe_ids=null,(t=r.name.definition()).fixed||At(i,t,o)):o?(o.walk(i),s()):i.parent()instanceof wn&&s(),!0;function s(){Mt(i,n,r.name,function(){return r.value||Ve(Be,r)},function(e,n){var t=e.definition();n&&$t(i,t,!0)?(Ot(i,t),i.loop_ids[t.id]=i.in_loop,t.fixed=n,t.fixed.assigns=[r],(e instanceof M&&t.redefined()||!vt(e)&&!ar(t))&&(t.single_use=!1)):t.fixed=!1})}}),e(In,function(e,n){var t=e.in_loop;return e.in_loop=this,d(e),n(),Dt(e),e.in_loop=t,!0}),Pn.DEFMETHOD("reset_opt_flags",function(t){var i=new Ye(t.option("reduce_vars")?function(e,n){return It(e),e.reduce_vars(i,n,t)}:It);i.fn_scanning=null,i.fn_visited=[],i.in_loop=null,i.loop_ids=Object.create(null),i.safe_ids=Object.create(null),i.safe_ids.seq={},this.walk(i)}),On.DEFMETHOD("fixed_value",function(e){var n=this.definition(),t=n.fixed;return t?((t=this.fixed?this.fixed:t)instanceof qe?t:t()).tail_node():(t=0===t&&this.fixed)&&(t=(t instanceof qe?t:t()).tail_node(),e&&1!=n.escaped.depth&&br(t,!0)||t.is_constant()?t:void 0)}),Ie.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return e.orig[0]instanceof ve&&(1==e.orig.length||!(!this.in_arg||e.orig[1]instanceof Ne))}),qe.DEFMETHOD("convert_symbol",ge),Ae.DEFMETHOD("convert_symbol",Rt),Ee.DEFMETHOD("convert_symbol",Rt),qn.DEFMETHOD("convert_symbol",Bt),Ie.DEFMETHOD("convert_symbol",Bt),Ae.DEFMETHOD("mark_symbol",Yt),Ee.DEFMETHOD("mark_symbol",Yt),qn.DEFMETHOD("mark_symbol",Lt),Ie.DEFMETHOD("mark_symbol",Lt),qe.DEFMETHOD("match_symbol",function(e){return e(this)}),Ae.DEFMETHOD("match_symbol",Ut),Ee.DEFMETHOD("match_symbol",Ut),Ir=X("Infinity NaN undefined"),Gr=X("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet"),Ie.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&Gr[this.name]}),(e=function(e,n){e.DEFMETHOD("in_strict_mode",n)})(en,V),e(je,function(e){for(var n=this.body,t=0;t<n.length;t++){var i=n[t];if(!(i instanceof x))break;if("use strict"==i.value)return!0}var r=this.parent_scope;return r?r.resolve(!0).in_strict_mode(e):e.option("module")}),(e=function(e,n){e.DEFMETHOD("is_truthy",n)})(qe,Ue),e(ye,V),e(we,function(){return"="==this.operator&&this.right.is_truthy()}),e(Oe,V),e(Sn,V),e(G,V),e(Pe,function(){return this.tail_node().is_truthy()}),e(Ie,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=Ue;e=e.is_truthy();return delete this.is_truthy,e}),(e=function(e,n){e.DEFMETHOD("is_negative_zero",n)})(qe,V),e(ye,Ue),e(we,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():gi(e.slice(0,-1),this.left,this.right)}),e(xe,function(){return gi(this.operator,this.left,this.right)}),e(T,function(){return 0==this.value&&1/this.value<0}),e(Oe,Ue),e(Sn,Ue),e(G,Ue),e(Pe,function(){return this.tail_node().is_negative_zero()}),e(Ie,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=V;e=e.is_negative_zero();return delete this.is_negative_zero,e}),e(Re,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator}),e=function(e,n){e.DEFMETHOD("_dot_throw",n)},qe.DEFMETHOD("may_throw_on_access",function(e,n){return!e.option("pure_getters")||this._dot_throw(e,n)}),e(qe,bi),e(ye,Ue),e(we,function(e){var n=this.operator,t=this.left,i=this.right;return"="!=n?We[n.slice(0,-1)]&&(t._dot_throw(e)||i._dot_throw(e)):!!i._dot_throw(e)&&(!(t instanceof Ie&&i instanceof xe&&"||"==i.operator&&t.name==i.left.name)||i.right._dot_throw(e))}),e(xe,function(e){return We[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),e(en,function(e,n){return bi(e,n)&&!Le(this.properties,function(e){return!!e.private||!e.static||!(e instanceof a||e instanceof u)})}),e(Te,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),e(T,Ue),e(pn,function(e,n){return!(!bi(e,n)||((e=this.expression)instanceof Ie&&(e=e.fixed_value()),"prototype"==this.property&&pt(e)))}),e(Oe,Ue),e(E,V),e(Sn,function(n,t){return bi(n,t)&&!Le(this.properties,function(e){return!(e instanceof S||e instanceof q||"__proto__"===e.key&&e.value._dot_throw(n,t))})}),e(An,function(e,n){return bi(e,n)&&!this.scope.resolve().new}),e(Pe,function(e){return this.tail_node()._dot_throw(e)}),e(Ie,function(e,n){if(this.is_undefined)return!0;if(bi(e,n)&&!(ci(this)&&this.is_declared(e)||this.is_immutable())){n=this.definition();if(ht(n)&&!n.scope.rest&&Le(n.scope.argnames,function(e){return e instanceof Ne}))return 2<n.scope.uses_arguments;n=this.fixed_value(!0);if(!n)return!0;if(this._dot_throw=V,n._dot_throw(e))return delete this._dot_throw,!0;this._dot_throw=Ue}return!1}),e(Re,function(){return"void"==this.operator}),e(Nn,Ue),e(Be,V),(e=function(e,n){e.DEFMETHOD("is_defined",n)})(qe,Ue),e(ye,V),e(we,function(e){var n=this.operator;return"="==n?this.right.is_defined(e):yi(e,n.slice(0,-1),this)}),e(xe,function(e){return yi(e,this.operator,this)}),e(Te,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),e(T,V),e(pe,Ue),e(Oe,V),e(Sn,V),e(Pe,function(e){return this.tail_node().is_defined(e)}),e(Ie,function(e){if(this.is_undefined)return!1;if(ci(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var n=this.fixed_value();if(!n)return!1;this.is_defined=Ue;n=n.is_defined(e);return delete this.is_defined,n}),e(Re,function(){return"void"!=this.operator}),e(Nn,V),e(Be,Ue),(e=function(e,n){e.DEFMETHOD("is_boolean",n)})(qe,Ue),e(we,function(e){return"="==this.operator&&this.right.is_boolean(e)}),Rr=X("in instanceof == != === !== < <= >= >"),e(xe,function(e){return Rr[this.operator]||We[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(l,V),Br=X("every hasOwnProperty isPrototypeOf propertyIsEnumerable some"),e(ke,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof pn&&(Br[e.property]||"test"==e.property&&e.expression instanceof G)}),e(Te,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(y,Ue),e(Pe,function(e){return this.tail_node().is_boolean(e)}),e(Ie,function(e){var n=this.fixed_value();if(!n)return!1;this.is_boolean=Ue;n=n.is_boolean(e);return delete this.is_boolean,n}),Hr=X("! delete"),e(Re,function(){return Hr[this.operator]}),(e=function(e,n){e.DEFMETHOD("is_number",n)})(qe,Ue),Yr=X("- * / % ** & | ^ << >> >>>"),e(we,function(e){return Yr[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(xe,function(e){return!!Yr[this.operator]||"+"==this.operator&&(this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e))}),Lr=X(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),e(ke,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof pn&&(Lr[e.property]||ci(e.expression)&&"Math"==e.expression.name)}),e(Te,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(y,Ue),e(Ce,V),e(Pe,function(e){return this.tail_node().is_number(e)}),e(Ie,function(e,n){var t=this.fixed_value();if(!t)return!1;if(n&&t instanceof Re&&"+"==t.operator&&t.expression.equals(this))return!1;this.is_number=Ue;n=t.is_number(e);return delete this.is_number,n}),Ur=X("+ - ~ ++ --"),e(Mn,function(){return Ur[this.operator]}),(e=function(e,n){e.DEFMETHOD("is_string",n)})(qe,Ue),e(we,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(xe,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))}),Vr=X(["charAt","substr","substring","toExponential","toFixed","toLowerCase","toPrecision","toString","toUpperCase","trim"]),e(ke,function(e){return!!e.option("unsafe")&&(e=this.expression)instanceof pn&&Vr[e.property]}),e(Te,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(Pe,function(e){return this.tail_node().is_string(e)}),e(U,V),e(Ie,function(e){var n=this.fixed_value();if(!n)return!1;this.is_string=Ue;n=n.is_string(e);return delete this.is_string,n}),e(Fn,function(e){return!this.tag||Er(e,this.tag)}),e(Re,function(){return"typeof"==this.operator}),We=X("&& || ??"),e=function(e,n){e.DEFMETHOD("_find_defs",n)},Pn.DEFMETHOD("resolve_defines",function(o){return o.option("global_defs")?(this.figure_out_scope({ie:o.option("ie")}),this.transform(new Hn(function(e){var n=e._find_defs(o,"");if(n){for(var t,i=0,r=e;(t=this.parent(i++))&&t instanceof $e&&t.expression===r;)r=t;if(!st(r,t))return n;wi(e)}}))):this}),e(qe,ge),e(pn,function(e,n){return this.expression._find_defs(e,"."+this.property+n)}),e(qn,function(e){this.definition().global&&J(e.option("global_defs"),this.name)&&wi(this)}),e(Ie,function(e,n){if(this.definition().global)return e=e.option("global_defs"),n=this.name+n,J(e,n)?function n(e,t){if(e instanceof qe)return e.clone(!0);if(Array.isArray(e))return Ve(ye,t,{elements:e.map(function(e){return n(e,t)})});if(e&&"object"==typeof e){var i,r=[];for(i in e)J(e,i)&&r.push(Ve(kn,t,{key:i,value:n(e[i],t)}));return Ve(Sn,t,{properties:r})}return Jt(e,t)}(e[n],this):void 0}),h.DEFMETHOD("first_statement",Ei),_.DEFMETHOD("first_statement",Ei),Oe.DEFMETHOD("first_statement",function(){return Ai(this.body)}),Oe.DEFMETHOD("length",function(){for(var e=this.argnames,n=0;n<e.length&&!(e[n]instanceof Ae);n++);return n}),no=Ti({Array:["indexOf","join","lastIndexOf","slice"].concat(e=["constructor","toString","valueOf"]),Boolean:e,Function:e,Number:["toExponential","toFixed","toPrecision"].concat(e),Object:e,RegExp:["exec","test"].concat(e),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(e)}),to=Ti({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]}),(e=function(e,n){e.DEFMETHOD("is_constant",n)})(qe,Ue),e(T,V),e(G,Ue),Wr=X("! ~ - + void"),e(Re,function(){return Wr[this.operator]&&this.expression instanceof T}),e=function(e,n){e.DEFMETHOD("_eval",n)},qe.DEFMETHOD("evaluate",function(e,n){var t;return!e.option("evaluate")||(t=this._eval(e,n,e=[],1),e.forEach(function(e){delete e._eval}),!n&&t&&!(t instanceof RegExp)&&("function"==typeof t||"object"==typeof t))?this:t}),Kr=new Ye(function(e){e instanceof we&&qi(e.left),e instanceof vn&&qi(e.init),e instanceof Mn&&rt[e.operator]&&qi(e.expression)}),e(C,function(){throw new Error(string_template("Cannot evaluate a statement [{start}]",this))}),e(Ke,Qn),e(s,Qn),e(en,Qn),e(qe,Qn),e(T,function(){return this.value}),e(we,function(e,n,t,i){var r=this.left;if(!n){if(!(r instanceof Ie))return this;if(!J(r,"_eval")){if(!r.fixed)return this;var o=r.definition();if(!o.fixed)return this;if(o.undeclared)return this;if(o.last_ref!==r)return this;if("m"==o.single_use)return this;if(this.right.has_side_effects(e))return this}}o=this.operator,o=!J(r,"_eval")&&r instanceof Ie&&r.fixed&&r.definition().fixed?r:"="==o?this.right:Ve(xe,this,{operator:o.slice(0,-1),left:r,right:this.right}),r.walk(Kr),o=o._eval(e,n,t,i);return"object"==typeof o?this:(qi(r),o)}),e(Pe,function(e,n,t,i){if(!n)return this;for(var r=this.expressions,o=0,s=r.length-1;o<s;o++)r[o].walk(Kr);var a=r[s],e=a._eval(e,n,t,i);return e===a?this:e}),e(Oe,function(e){return e.option("unsafe")?((e=function(){}).node=this,e.toString=function(){return"function(){}"},e):this}),e(ye,function(e,n,t,i){if(e.option("unsafe")){for(var r=[],o=0;o<this.elements.length;o++){var s=this.elements[o];if(s instanceof pe)return this;var a=s._eval(e,n,t,i);if(s===a)return this;r.push(a)}return r}return this}),e(Sn,function(e,n,t,i){if(e.option("unsafe")){for(var r={},o=0;o<this.properties.length;o++){var s=this.properties[o];if(!(s instanceof kn))return this;var a=s.key;if(a instanceof qe&&(a=a._eval(e,n,t,i))===s.key)return this;switch(a){case"__proto__":case"toString":case"valueOf":return this}if(r[a]=s.value._eval(e,n,t,i),r[a]===s.value)return this}return r}return this}),Jr=X("! typeof void"),e(Re,function(e,n,t,i){var r=this.expression,o=this.operator;if(e.option("typeofs")&&"typeof"==o&&(r instanceof Oe||r instanceof Ie&&r.fixed_value()instanceof Oe))return"function";var s=r instanceof Ie&&r.definition(),a=(Jr[o]||s&&s.fixed||i++,r.walk(Kr),r._eval(e,n,t,i));if(a===r)return n&&"void"==o?void 0:this;switch(o){case"!":return!a;case"typeof":return a instanceof RegExp?this:typeof a;case"void":return;case"~":return~a;case"-":return-a;case"+":return+a;case"++":case"--":if(!s)return this;if(!n){if(s.undeclared)return this;if(s.last_ref!==r)return this}return J(r,"_eval")&&(a=+(o[0]+1)+ +a),qi(r),a}return this}),e(Nn,function(e,n,t,i){var r=this.expression;if(r instanceof Ie){if(!J(r,"_eval")){if(!r.fixed)return this;if(!n){var o=r.definition();if(!o.fixed)return this;if(o.undeclared)return this;if(o.last_ref!==r)return this}}}else if(!n)return this;r instanceof Ie&&r.definition().fixed||i++,r.walk(Kr);o=r._eval(e,n,t,i);return o===r?this:(qi(r),+o)}),Xr=X("&& || === !=="),e(xe,function(e,n,t,i){Xr[this.operator]||i++;var r=this.left._eval(e,n,t,i);if(r===this.left)return this;if(this.operator==(r?"||":"&&"))return r;var o,s=this.right._eval(e,n&&!(r&&"object"==typeof r),t,i);if(s===this.right)return this;switch(this.operator){case"&&":o=r&&s;break;case"||":o=r||s;break;case"??":o=null==r?s:r;break;case"|":o=r|s;break;case"&":o=r&s;break;case"^":o=r^s;break;case"+":o=r+s;break;case"-":o=r-s;break;case"*":o=r*s;break;case"/":o=r/s;break;case"%":o=r%s;break;case"<<":o=r<<s;break;case">>":o=r>>s;break;case">>>":o=r>>>s;break;case"==":o=r==s;break;case"===":o=r===s;break;case"!=":o=r!=s;break;case"!==":o=r!==s;break;case"<":o=r<s;break;case"<=":o=r<=s;break;case">":o=s<r;break;case">=":o=s<=r;break;case"**":o=Math.pow(r,s);break;case"in":if(s&&"object"==typeof s&&J(s,r)){o=!0;break}default:return this}if(isNaN(o))return e.find_parent(Rn)?this:o;if(e.option("unsafe_math")&&!n&&o&&"number"==typeof o&&("+"==this.operator||"-"==this.operator)){t=Math.max(0,a(r),a(s));if(t<16)return+o.toFixed(t)}return o;function a(e){e=/(\.[0-9]*)?(e[^e]+)?$/.exec(+e);return(e[1]||".").length-1-(e[2]||"").slice(1)}}),e(Te,function(e,n,t,i){var r=this.condition._eval(e,n,t,i);return r===this.condition||(e=(r=r?this.consequent:this.alternative)._eval(e,n,t,i))===r?this:e}),e(Ie,function(e,n,t,i){var r,o=this.fixed_value();if(!o)return this;if(J(o,"_eval"))r=o._eval();else{if(this._eval=Qn,r=o._eval(e,n,t,i),delete this._eval,r===o)return this;o._eval=function(){return r},t.push(o)}return r&&"object"==typeof r&&!function(n,e){var t=n.definition().escaped;switch(t.length){case 0:return 1;case 1:var i=!1;return t[0].walk(new Ye(function(e){return!!i||(e===n?i=!0:e instanceof je||void 0)})),i;default:return e<=t.depth}}(this,i)?this:r}),Qr={Array:Array,Math:Math,Number:Number,Object:Object,String:String},Zr=Ti({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),eo=X("global ignoreCase multiline source"),e($e,function(e,n,t,i){if(e.option("unsafe")){var r,o=this.expression;if(!ci(o)&&(null==(r=o._eval(e,n,t,i+1))||r===o))return this;var s=this.property;if(s instanceof qe&&(s=s._eval(e,n,t,i))===this.property)return this;if(void 0===r){e=Zr[o.name];if(!e||!e[s])return this;r=Qr[o.name]}else if(r instanceof RegExp){if(!eo[s])return this}else if("object"==typeof r){if(!J(r,s))return this}else if("function"==typeof r)switch(s){case"name":return r.node.name?r.node.name.name:"";case"length":return r.node.length();default:return this}return r[s]}return this}),e(ke,function(i,r,o,s){var e=this.expression,n=e instanceof Ie?e.fixed_value():e;if(n instanceof h||n instanceof an||n instanceof mn){if(!n.evaluating&&!(n.name&&0<n.name.definition().recursive_refs||this.is_expr_pure(i))){var a=Ci(this.args,i,r,o,s);if(Le(n.argnames,function(e,n){if(e instanceof Ae){if(!a)return!1;if(void 0===a[n]){var t=e.value._eval(i,r,o,s);if(t===e.value)return!1;a[n]=t}e=e.name}return!(e instanceof Ee)})&&!(n.rest instanceof Ee)&&(a||r)){var f,t=n.first_statement();if(t instanceof Fe)return(u=t.value)?(f=[],a&&(!Le(n.argnames,function(e,n){return p(e,a[n])})||n.rest&&!p(n.rest,a.slice(n.argnames.length)))&&!r||(r&&n.argnames.forEach(function(e){e instanceof Ae&&e.value.walk(Kr)}),n.evaluating=!0,u=u._eval(i,r,o,s),n.evaluating=!1),f.forEach(function(e){delete e._eval}),u===t.value?this:u):void 0;if(r){n.walk(Kr);var c=!1;if(n.evaluating=!0,Y(n,new Ye(function(e){return!!c||(e instanceof Fe?(e.value&&void 0!==e.value._eval(i,!0,o,s)&&(c=!0),!0):e instanceof je&&e!==n||void 0)})),n.evaluating=!1,!c)return}}}}else if(i.option("unsafe")&&e instanceof $e){var u,t=e.property;if(t instanceof qe&&(t=t._eval(i,r,o,s))===e.property)return this;e=e.expression;if(ci(e)){var l=to[e.name];if(!l||!l[t])return this;u=Qr[e.name]}else{if(null==(u=e._eval(i,r,o,s+1))||u===e)return this;l=no[u.constructor.name];if(!l||!l[t])return this;if(u instanceof RegExp&&u.global&&!(e instanceof G))return this}if(!(a=Ci(this.args,i,r,o,s)))return this;if("replace"==t&&"function"==typeof a[1])return this;try{return u[t].apply(u,a)}catch(e){qe.warn("Error evaluating {this} [{start}]",this)}finally{u instanceof RegExp&&(u.lastIndex=0)}}return this;function p(e,n){var t,i=(e=e instanceof Ae?e.name:e).definition();return i.orig[i.orig.length-1]===e&&(t=n,i.references.forEach(function(e){e._eval=function(){return t},f.push(e)}),!0)}}),e(y,Qn),e(Fn,function(e,n,t,i){if(e.option("templates")){if(this.tag){if(!Er(e,this.tag))return this;f=function(e){return e}}var r=Ci(this.expressions,e,n,t,i);if(r){for(var o=!1,s=f(this.strings[0]),a=0;a<r.length;a++)s+=r[a]+f(this.strings[a+1]);if(!o)return s;this._eval=Qn}}return this;function f(e){return"string"!=typeof(e=Dr(e))&&(o=!0),e}}),(e=function(e,t){e.DEFMETHOD("negate",function(e,n){return t.call(this,e,n)})})(qe,function(){return $i(this)}),e(C,function(){throw new Error("Cannot negate a statement")}),e(xe,function(e,n){var t=this.clone(),i=this.operator;if(e.option("unsafe_comps"))switch(i){case"<=":return t.operator=">",t;case"<":return t.operator=">=",t;case">=":return t.operator="<",t;case">":return t.operator="<=",t}switch(i){case"==":return t.operator="!=",t;case"!=":return t.operator="==",t;case"===":return t.operator="!==",t;case"!==":return t.operator="===",t;case"&&":return t.operator="||",t.left=t.left.negate(e,n),t.right=t.right.negate(e),Fi(this,t,n);case"||":return t.operator="&&",t.left=t.left.negate(e,n),t.right=t.right.negate(e),Fi(this,t,n)}return $i(this)}),e(se,function(){return $i(this)}),e(Te,function(e,n){var t=this.clone();return t.consequent=t.consequent.negate(e),t.alternative=t.alternative.negate(e),Fi(this,t,n)}),e(yn,function(){return $i(this)}),e(Pe,function(e){var n=this.expressions.slice();return n.push(n.pop().negate(e)),Ge(this,n)}),e(Re,function(){return"!"==this.operator?this.expression:$i(this)}),io=X("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),ro=X("Map Set WeakMap WeakSet"),ke.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var n=this.expression;if(ci(n)){if(io[n.name])return!0;if(this instanceof y&&ro[n.name])return!0}if(Oi(n))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),Fn.DEFMETHOD("is_expr_pure",function(e){var n,t=this.tag;if(!t)return!0;if(e.option("unsafe")){if(ci(t)&&io[t.name])return!0;if(t instanceof pn&&ci(t.expression))return(n=to[t.expression.name])&&(n[t.property]||"Math"==t.expression.name&&"random"==t.property)}return!e.pure_funcs(this)}),qe.DEFMETHOD("is_call_pure",Ue),ke.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var n=this.expression;if(!(n instanceof pn))return!1;var t,i=n.expression,r=n.property;if(i instanceof ye)t=no.Array;else if(i.is_boolean(e))t=no.Boolean;else if(i.is_number(e))t=no.Number;else if(i instanceof G)t=no.RegExp;else if(i.is_string(e)){if(t=no.String,"replace"==r){i=this.args[1];if(i&&!i.is_string(e))return!1}}else n.may_throw_on_access(e)||(t=no.Object);return t&&t[r]}),(e=function(e,n){e.DEFMETHOD("safe_to_spread",n)})(qe,Ue),e(ye,V),e(we,function(){switch(this.operator){case"=":return this.right.safe_to_spread();case"&&=":case"||=":case"??=":return this.left.safe_to_spread()&&this.right.safe_to_spread()}return!0}),e(xe,function(){return!We[this.operator]||this.left.safe_to_spread()&&this.right.safe_to_spread()}),e(T,V),e(Oe,V),e(Sn,function(){return Le(this.properties,function(e){return!(e instanceof S||e instanceof Me)})}),e(Pe,function(){return this.tail_node().safe_to_spread()}),e(Ie,function(){var e=this.fixed_value();return e&&e.safe_to_spread()}),e(Mn,V),(e=function(e,n){e.DEFMETHOD("has_side_effects",n)})(qe,V),e(ye,function(e){return ji(this.elements,e,Pi)}),e(we,function(e){var n,t=this.left;return!(t instanceof $e)||!((n=t.expression)instanceof An)||!n.scope.resolve().new||t instanceof En&&t.property.has_side_effects(e)||this.right.has_side_effects(e)}),e(xe,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||!yr(this.operator,this.right,e)}),e(Xe,function(e){return ji(this.body,e)}),e(ke,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||ji(this.args,e,Pi)}),e(Ze,function(e){return this.expression.has_side_effects(e)||ji(this.body,e)}),e(en,function(e){var n=this.extends;return!(!n||dt(n=n instanceof Ie?n.fixed_value():n))||ji(this.properties,e)}),e(c,function(e){return this.key instanceof qe&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),e(Te,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),e(T,Ue),e(sn,function(e){return ji(this.definitions,e)}),e(fn,function(e){return ji(this.elements,e)}),e(cn,function(e){return this.key instanceof qe&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(un,function(e){return ji(this.properties,e)}),e(pn,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),e(Z,Ue),e(De,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),e(de,function(e){return this.body.has_side_effects(e)}),e(Oe,Ue),e(Sn,function(e){return ji(this.properties,e,function(e,n){e=e.expression;return!e.safe_to_spread()||e.has_side_effects(n)})}),e(An,Ue),e(Tn,function(e){return this.key instanceof qe&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),e(Pe,function(e){return ji(this.expressions,e)}),e(ze,function(e){return this.body.has_side_effects(e)}),e(En,function(e){return this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),e(Dn,function(e){return this.expression.has_side_effects(e)||ji(this.body,e)}),e(qn,Ue),e(Ie,function(e){return!this.is_declared(e)||!vt(this,e)}),e(Fn,function(e){return!this.is_expr_pure(e)||ji(this.expressions,e)}),e(zn,function(e){return ji(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),e(Mn,function(e){return ft[this.operator]||this.expression.has_side_effects(e)}),e(He,function(){return this.value}),(e=function(e,n){e.DEFMETHOD("may_throw",n)})(qe,V),e(T,Ue),e(Z,Ue),e(Oe,Ue),e(An,Ue),e(qn,Ue),e(ye,function(e){return zi(this.elements,e)}),e(we,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof Ie)&&this.left.may_throw(e)}),e(Je,function(e){return this.expression.may_throw(e)}),e(xe,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||!yr(this.operator,this.right,e)}),e(Xe,function(e){return zi(this.body,e)}),e(ke,function(e){if(zi(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=V;e=Mi(this.expression,e);return delete this.may_throw,e}),e(Ze,function(e){return this.expression.may_throw(e)||zi(this.body,e)}),e(Te,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),e(Ae,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),e(sn,function(e){return zi(this.definitions,e)}),e(pn,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),e(vn,function(e){var n;return!!this.init.may_throw(e)||!!(n=this.object).may_throw(e)||!((n=n.tail_node())instanceof ye||n.is_string(e))||this.body.may_throw(e)}),e(De,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),e(de,function(e){return this.body.may_throw(e)}),e(Sn,function(e){return zi(this.properties,e)}),e(Tn,function(e){return this.value.may_throw(e)||this.key instanceof qe&&this.key.may_throw(e)}),e(Fe,function(e){return this.value&&this.value.may_throw(e)}),e(Pe,function(e){return zi(this.expressions,e)}),e(ze,function(e){return this.body.may_throw(e)}),e(En,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),e(Dn,function(e){return this.expression.may_throw(e)||zi(this.body,e)}),e(Ie,function(e){return!this.is_declared(e)||!vt(this,e)}),e(Fn,function(e){if(zi(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=V;e=Mi(this.tag,e);return delete this.may_throw,e}),e(zn,function(e){return(this.bcatch?this.bcatch.may_throw(e):zi(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),e(Mn,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof Ie)}),e(He,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),(e=function(e,n){e.DEFMETHOD("is_constant_expression",n)})(qe,Ue),e(ye,function(e){return Ni(this.elements,e)}),e(xe,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&yr(this.operator,this.right)}),e(en,function(e){var n=this.extends;return!(n&&!dt(n))&&Ni(this.properties,e)}),e(c,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),e(T,V),e(Oe,function(i){var r=this,o=!0,s=[];return r.walk(new Ye(function(e,n){if(!o)return!0;if(e instanceof Qe)return e===r?void 0:(s.push(e),n(),s.pop(),!0);if(e instanceof Ie){if(r.inlined||e.redef||e.in_arg)return!(o=!1);if(!r.variables.has(e.name)){n=e.definition();if(!Jn(n.scope,s)){if(i&&!n.redefined()){var t=i.find_variable(e.name);if(t?t===n:n.undeclared)return o="f",!0}o=!1}}return!0}return e instanceof An?(Ln(r)&&Le(s,function(e){return!(e instanceof je)||Ln(e)})&&(o=!1),!0):void 0})),o}),e(Sn,function(e){return Ni(this.properties,e)}),e(Tn,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),e(Mn,function(e){return this.expression.is_constant_expression(e)}),(e=function(e,n){e.DEFMETHOD("aborts",n)})(C,Xn),e(P,Qn),e(Se,Ri),e(z,Ri),e(De,function(){return this.alternative&&Ii(this.body)&&Ii(this.alternative)&&this}),oo=X(["use asm","use strict"]),n(x,function(e,n){return!n.option("directives")||oo[e.value]&&n.has_directive(e.value)===e?e:Ve(Z,e)}),n(rn,function(e,n){return n.option("drop_debugger")?Ve(Z,e):e}),n(de,function(e,n){if(e.body instanceof De||e.body instanceof F){var t=_i([e.body],n);switch(t.length){case 0:e.body=Ve(Z,e);break;case 1:e.body=t[0];break;default:e.body=Ve(Se,e,{body:t})}}return n.option("unused")&&0==e.label.references.length?e.body:e}),n(xn,function(e,n){var t,i;return n.option("dead_code")&&(t=e.label)&&(i=n.loopcontrol_target(e),e.label=null,n.loopcontrol_target(e)===i?Q(t.thedef.references,e):e.label=t),e}),n(Xe,function(e,n){return e.body=_i(e.body,n),e}),n(Se,function(e,n){return e.body=_i(e.body,n),Bi(e,n.parent())}),n(Oe,function(e,n){return Hi(e,n),e.body=_i(e.body,n),e}),n(h,Yi),n(_,Yi),n(mn,function(n,e){Hi(n,e),n.body=_i(n.body,e);var t=e.parent();if(e.option("inline"))for(var i=0;i<n.body.length;i++){var r=n.body[i];if(!(r instanceof x)){if(r instanceof Fe){if(i!=n.body.length-1)break;var o=r.value;if(!o||"Call"!=o.TYPE)break;if(o.is_expr_pure(e))break;var s,r=o.expression;if(r instanceof Ie){if(n.name&&n.name.definition()===r.definition())break;s=r.fixed_value()}else s=r;if(!(s instanceof an||s instanceof mn))break;if(s.rest)break;if(s.uses_arguments)break;if(s===r){if(s.parent_scope!==n)break;if(!Le(s.enclosed,function(e){return e.scope!==n}))break}if((s!==r||s.name)&&(t instanceof p||t instanceof D)&&t.value===e.self())break;if(s.contains_this())break;var a=s.argnames.length;if(0<a&&e.option("inline")<2)break;if(a>n.argnames.length)break;if(!Le(n.argnames,function(e){return e instanceof Ne}))break;if(!Le(o.args,function(e){return!(e instanceof Me)}))break;for(var f=0;f<a;f++){var c=o.args[f];if(!(c instanceof Ie))break;if(c.definition()!==n.argnames[f].definition())break}if(f<a)break;for(;f<o.args.length&&!o.args[f].has_side_effects(e);f++);if(f<o.args.length)break;if(a<n.argnames.length&&!e.drop_fargs(n,t)){if(!e.drop_fargs(s,o))break;for(;s.argnames.push(s.make_var(Ne,s,"argument_"+a)),++a<n.argnames.length;);}return r}break}}return n}),so=X("arguments await yield"),je.DEFMETHOD("merge_variables",function(u){if(u.option("merge_vars")){for(var l,p,d=[],h={},_=this,a=[],f=[],c=0,v=new Wn,m=Object.create(null),g=Object.create(null),b=new Ye(function(t,e){var n,i,r,o,s,a;return t instanceof we?(s=t.left,o=t.right,s instanceof Ee?(o.walk(b),k(Ie,T,s),!0):We[t.operator.slice(0,-1)]?(s.walk(b),x(),o.walk(b),s instanceof Ie&&T(s),S(),!0):s instanceof Ie?("="!=t.operator&&T(s,!0),o.walk(b),T(s),!0):void 0):t instanceof xe?We[t.operator]?(c(t),!0):void 0:t instanceof F?((a=b.loopcontrol_target(t))instanceof gn||A(a),!0):t instanceof ke?((i=t.expression)instanceof yn?(t.args.forEach(function(e){e.walk(b)}),i.walk(b)):(e(),f(i)),!0):t instanceof en?(t.name&&t.name.walk(b),t.extends&&t.extends.walk(b),t.properties.filter(function(e){return e.key instanceof qe&&e.key.walk(b),e.value}).forEach(function(e){e.static?e.value.walk(b):(x(),h.block=t,e.value.walk(b),S())}),!0):t instanceof Te?(c(t.condition,t.consequent,t.alternative),!0):t instanceof j?((a=b.loopcontrol_target(t))instanceof ln&&A(a),!0):t instanceof ln?(x(),h.block=t,h.loop=!0,r=h,t.body.walk(b),h.inserted===t&&(h=r),t.condition.walk(b),S(),!0):t instanceof _n?(t.init&&t.init.walk(b),x(),h.block=t,h.loop=!0,t.condition&&t.condition.walk(b),t.body.walk(b),t.step&&t.step.walk(b),S(),!0):t instanceof vn?(t.object.walk(b),x(),h.block=t,h.loop=!0,t.init.walk(b),t.body.walk(b),S(),!0):t instanceof De?(c(t.condition,t.body,t.alternative),!0):t instanceof de?(x(),h.block=t,r=h,t.body.walk(b),h.inserted===t&&(h=r),S(),!0):t instanceof je?(x(),(h.block=t)===_&&(p=h),t instanceof Oe&&(t.name&&(m[t.name.definition().id]=!1),n=t.uses_arguments&&!b.has_directive("use strict")?function(e){m[e.definition().id]=!1}:function(e){T(e)},d.push(t),t.argnames.forEach(function(e){k(Ne,n,e)}),t.rest&&k(Ne,n,t.rest),d.pop()),L(t,b),S(),!0):t instanceof En?(i=t.expression,(t.optional?(i.walk(b),x(),t.property.walk(b),S):e)(),f(i),!0):t instanceof Dn?(t.expression.walk(b),r=h,t.body.forEach(function(e){e instanceof on||(e.expression.walk(b),r===h&&x())}),h=r,t.body.forEach(function(e){x(),h.block=t;var n=h;Y(e,b),h.inserted===t&&(h=n),S()}),!0):t instanceof M||t instanceof I?!(m[t.definition().id]=!1):t instanceof Ie?(T(t,!0),!0):t instanceof zn?(o=l,l=t,Y(t,b),t.bcatch&&(t.bcatch.argname&&t.bcatch.argname.mark_symbol(function(e){e instanceof he&&(e=e.definition(),m[e.id]=!1,e=e.redefined())&&(m[e.id]=!1)},b),t.bfinally||(l=o)?Y(t.bcatch,b):(x(),Y(t.bcatch,b),S())),l=o,t.bfinally&&t.bfinally.walk(b),!0):t instanceof Mn?rt[t.operator]&&(s=t.expression)instanceof Ie?(T(s,!0),!0):void 0:t instanceof He?((a=t.value)?a.walk(b):a=h.block instanceof vn&&h.block.init===b.parent(),k(qn,a?function(e){e instanceof $n?T(e):e.walk(b)}:function(e){var n,t;e instanceof $n?(n=e.definition().id,(t=m[n])?t.push(e):n in m||v.add(n,e)):e.walk(b)},t.name),!0):t instanceof In?(x(),h.block=t,h.loop=!0,e(),S(),!0):void 0;function f(e){u.option("ie")&&(e=Yn(e))instanceof Ie&&e.walk(b)}function c(e,n,t){var i=h,r=[i,i];if(e instanceof xe)switch(e.operator){case"&&":r[0]=c(e.left,e.right)[0];break;case"||":case"??":r[1]=c(e.left,null,e.right)[1];break;default:e.walk(b)}else e instanceof Te?c(e.condition,e.consequent,e.alternative):e.walk(b);return h=r[0],n&&(x(),n.walk(b)),r[0]=h,h=r[1],t&&(x(),t.walk(b)),r[1]=h,h=i,r}}),e=(b.directives=Object.create(u.directives),_.walk(b),!1),n=Object.create(null);a.length&&f.length;){var t=f.shift();if(t){var i=t.definition,r=m[i.id];if(r){for(r={end:r.end};i.id in n;)i=n[i.id];r.start=m[i.id].start;var o=[];do{var s=a.shift();if(!(t.index>s.index)){var y=s.definition;if(y.id in g){var w=m[y.id];if(w){if(w.start.block===r.start.block&&D(w,r)&&(!w.start.loop&&Ar(i)||D(r,w))&&(!u.option("webkit")||at(i)===at(y))&&!y.const_redefs&&Le(w.scopes,function(e){return e.find_variable(i.name)===i})){w.forEach(function(e){e.thedef=i,e.name=i.name,e instanceof Ie?(i.references.push(e),y.replaced++):(i.orig.push(e),y.eliminated++)}),y.fixed||(i.fixed=!1),n[y.id]=i,e=!0;break}o.push(s)}}}}while(a.length);o.length&&(a=o.concat(a))}}}return e}function x(){h=Object.create(h)}function S(){h=Object.getPrototypeOf(h)}function k(n,t,e){var i=new Ye(function(e){if(!(e instanceof Ee))return e instanceof Ae?(x(),e.value.walk(b),S(),e.name.walk(i)):e instanceof cn?e.key instanceof qe?e.value instanceof $e?(x(),(h.block=e).key.walk(b),e.value.walk(i),S()):(e.key.walk(b),e.value.walk(i)):e.value.walk(i):e instanceof n?t(e):e.walk(b),!0});e.walk(i)}function T(n,e){var t,i=n.definition();if(e&&!Le(d,function(e){return!(t=e.variables.get(n.name))||!at(t)||t!==i&&!i.undeclared&&e.parent_scope.find_variable(n.name)!==i}))return m[i.id]=m[t.id]=!1;var r,o=h;if(l&&(x(),o=h,S()),i.id in m){if(!(r=m[i.id]))return;if(r.start.block!==o.block)return m[i.id]=!1;if(s(n),r.end=o,i.id in g)f[g[i.id]]=null;else if(!e)return}else{if((t=_.variables.get(i.name))!==i)return t&&p===o&&(m[t.id]=!1),m[i.id]=!1;if(u.exposed(i)||so[n.name])return m[i.id]=!1;if((r=v.get(i.id)||[]).scopes=[],s(n),m[i.id]=r,!e)return r.start=o,a.push({index:c++,definition:i});if(o.block!==_)return m[i.id]=!1;r.start=p}function s(e){r.push(e),be(r.scopes,e.scope);var n=Gt(b);n!==e.scope&&be(r.scopes,n)}g[i.id]=f.length,f.push({index:c++,definition:i})}function A(e){for(var n=[];;){if(J(h,"block")){var t=h.block;if((t=t instanceof de?t.body:t)===e)break}n.push(h),S()}for(h.inserted=h.block,x();n.length;){var i=n.pop();x(),J(i,"block")&&(h.block=i.block),J(i,"loop")&&(h.loop=i.loop)}}function E(e,n){return e===n||e.isPrototypeOf(n)}function D(e,n){return E(e.start,e.end)||E(e.start,n.start)}}),je.DEFMETHOD("drop_unused",function(C){if(C.option("unused")){var $=this,F=!($ instanceof Pn)||C.toplevel.funcs,j=!($ instanceof Pn)||C.toplevel.vars,P=/keep_assign/.test(C.option("unused"))?Ue:function(e,n){var t,i=!1;if(e instanceof we?!e.write_only&&"="!=e.operator||(t=r(e.left,n)):e instanceof Mn&&e.write_only&&(t=r(e.expression,n)),t instanceof Ie){e=t.definition();if(!s[e.id]&&!C.exposed(e)&&vt(t,C,i))return t}function r(e,n){if(e instanceof $e){var t=e.expression;if(!t.may_throw_on_access(C,!0))return i=!0,n&&e instanceof En&&n.unshift(e.property),r(t,n)}else if(e instanceof we&&"="==e.operator)return e.write_only="p",t=r(e.right),!n||(n.assign=e,t instanceof Ie)?t:e.left;return e}},z=Object.create(null),s=Object.create(null),c=function(e){return(c=function e(n,t,i){var r=C.parent(t);if(!r)return i;n=r instanceof Oe&&Jn(n,r.argnames);return e(r,t+1,n?function(e){var n=i(e);if(n)return n;if(n=r.variables.get(e)){e=n.orig[0];if(e instanceof Ne||e instanceof ve)return n}}:r.variables?function(e){return i(e)||r.variables.get(e)}:i)}($,0,ge))(e)},M=Object.create(null),u=[],N=Object.create(null),l=Object.create(null),p=Object.create(null),d=Object.create(null),I=Object.create(null),h=($ instanceof Pn&&C.top_retain&&$.variables.each(function(e){!C.top_retain(e)||e.id in N||(qe.info("Retaining variable {name}",e),N[e.id]=!0,u.push(e))}),new Wn),_=new Wn,R=this,B=((v=new Ye(function(a,e){if(a instanceof Oe&&a.uses_arguments&&!v.has_directive("use strict")&&a.each_argname(function(e){e=e.definition();e.id in N||(N[e.id]=!0,u.push(e))}),a!==$){if(R===$){var t,i,n,r;if(a instanceof fe)return r=a.name.definition(),(n=F&&!r.exported)||r.id in N||(N[r.id]=!0,u.push(r)),(t=v.parent()instanceof ue)?s[r.id]=!0:!n||r.id in l||(l[r.id]=1),a.extends&&a.extends.walk(v),i=[],a.properties.forEach(function(e){e.key instanceof qe&&e.key.walk(v);var n=e.value;n&&(ui(e)?(!t&&n.contains_this()&&(t=!0),o(n)):i.push(n))}),i.forEach(n&&t?o:function(e){_.add(r.id,e)}),!0;if(a instanceof bn)return r=a.name.definition(),(n=F&&!r.exported)||r.id in N||(N[r.id]=!0,u.push(r)),_.add(r.id,a),v.parent()instanceof ue?(s[r.id]=!0,f(a,e,!0)):(!n||r.id in l||(l[r.id]=1),!0);if(a instanceof sn)return a.definitions.forEach(function(i){var r=i.value,o=r&&(i.name instanceof Ee||r.has_side_effects(C)),s=o&&"="==r.tail_node().operator;i.name.mark_symbol(function(e){var n,t;if(e instanceof qn)return n=e.definition(),I[n.id]=(I[n.id]||0)+1,a instanceof ee&&n.orig[0]instanceof he&&(t=n.redefined())&&(I[t.id]=(I[t.id]||0)+1),n.id in N||j&&!n.exported&&(a instanceof ae?!n.redefined():!n.const_redefs)&&(a instanceof ee||ar(n))||(N[n.id]=!0,u.push(n)),r&&(o?s&&b(n,e,d[n.id]):_.add(n.id,r),h.add(n.id,i)),y(n),!0},v),o&&r.walk(v)}),!0;if(a instanceof Ne)return r=a.definition(),I[r.id]=(I[r.id]||0)+1,h.add(r.id,a),!0;if(a instanceof _e)return(r=a.definition()).id in N||j&&ar(r)||(N[r.id]=!0,u.push(r)),!0}return f(a,e,!0)}function o(e){var n=R;R=a,e.walk(v),R=n}})).directives=Object.create(C.directives),$.walk(v),C.option("keep_fnames")?Ue:C.option("ie")?function(e){return!C.exposed(e)&&e.references.length==e.replaced}:function(e){return!(e.id in N)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof Ne||Le(e.references,function(e){return!e.in_arg}))});C.option("ie")&&_.each(function(e,n){n in N||e.forEach(function(e){e.walk(new Ye(function(e){return e instanceof mn&&e.name&&!B(e.name.definition())?(e.walk(v),!0):e instanceof je||void 0}))})});for(var v=new Ye(f),e=0;e<u.length;e++){var n=_.get(u[e].id);n&&n.forEach(function(e){e.walk(v)})}Object.keys(z).forEach(function(e){var n,t=z[e];t&&(t=t.reduce(function(n,e){return e.forEach(function(e){be(n,e)}),n},[]),n=(h.get(e)||[]).filter(function(n){return me(n instanceof Mn?function(e){return e===n}:function(e){return e===n||!(e instanceof Mn)&&i(e)===i(n)},t)}),t.length==n.length)?z[e]=n:delete z[e]});var H=[],Y=[],L=new Hn(function(t){if(t instanceof Ae)return S(L,t);if(t instanceof Ee&&t.rest&&(t.rest=t.rest.transform(L)),t instanceof fn){for(var e=!t.rest,n=t.elements.length;0<=--n;){var i=t.elements[n].transform(L);i?(t.elements[n]=i,e=!1):e?t.elements.pop():t.elements[n]=Ve(pe,t.elements[n])}return t}var r;return t instanceof un?(r=[],t.properties.forEach(function(e){var n=!1;e.key instanceof qe&&(e.key=e.key.transform(U),n=e.key.has_side_effects(C)),(n||t.rest)&&((n=e.value)instanceof Ae?n.name:n)instanceof qn?(e.value=e.value.transform(U),r.push(e)):(n=!(n=e.value.transform(L))&&t.rest?e.value instanceof fn?Ve(fn,e.value,{elements:[]}):Ve(un,e.value,{properties:[]}):n)&&(e.value=n,r.push(e))}),t.properties=r,t):t instanceof qn?K(t):void 0}),U=new Hn(function(d,n,e){var t,i,h=U.parent();if(j){var r,o,s=[],a=P(d,s);if(a){if(i=d,m=(t=a).definition(),r=!(o=N[m.id])||i[i instanceof we?"left":"expression"]===t&&(o===t&&m.references.length-m.replaced==1||W(m,i)<0)?(r=d instanceof we&&(r=Q(d),!0===d.write_only)?r.drop_side_effect_free(C):r)||Ve(Ce,d,{value:0}):r)switch(s.assign&&(o=s.assign.drop_side_effect_free(C))&&(o.write_only=!0,s.unshift(o)),h instanceof Pe&&h.tail_node()!==d&&!r.has_side_effects(C)||s.push(r),s.length){case 0:return Kn.skip;case 1:return Qt(h,d,s[0].transform(U));default:return Ge(d,s.map(function(e){return e.transform(U)}))}}else if(d instanceof Nn&&d.expression instanceof Ie&&W(d.expression.definition(),d)<0)return Ve(Re,d,{operator:"+",expression:d.expression})}if(d instanceof xe&&"instanceof"==d.operator)return!((a=d.right)instanceof Ie)||a.definition().id in N?void 0:(t=d.left.drop_side_effect_free(C),r=Ve(le,d).optimize(C),t?Ge(d,[t,r]):r);if(d instanceof ke)return H.push(d),d.args=d.args.map(function(e){return e.transform(U)}),d.expression=d.expression.transform(U),d;if(R===$){if(F&&d!==$&&d instanceof fe)if(!((l=d.name.definition()).id in N))return V(d.name,"Dropping unused class {name}"),l.eliminated++,n(d,U),p=Ui(d,!0),h instanceof ue?p:(p=p.drop_side_effect_free(C,!0))?Ve(ze,d,{body:p}):e?Kn.skip:Ve(Z,d);if(d instanceof se&&d.name&&B(d.name.definition())&&(d.name=null),d instanceof Oe){if(F&&d!==$&&d instanceof bn)if(!((l=d.name.definition()).id in N))return V(d.name,"Dropping unused function {name}"),l.eliminated++,h instanceof ue?(q(),Vi(d,!0)):e?Kn.skip:Ve(Z,d);if(q(),d instanceof yn&&d.name&&B(d.name.definition())&&(d.name=null),!(d instanceof Ke)){var f,c,u=C.drop_fargs(d,h);if(u&&h instanceof ke&&h.expression===d)for(f=h.args,c=0;c<f.length&&!(f[c]instanceof Me);c++);for(var l,p,_,v=d.argnames,m=d.rest,g=!1,b=!1,y=(m&&(b=!0,!f||c<v.length||m instanceof Ne?m=m.transform(L):(m=(p=J(m,Ve(ye,h,{elements:f.slice(v.length)}),K,!d.uses_arguments,m)).name,f.length=v.length,p.value.elements.length&&[].push.apply(f,p.value.elements)),m instanceof Ee&&!m.rest&&(m instanceof fn?0==m.elements.length&&(m=null):0==m.properties.length&&(m=null)),d.rest=m)&&(g=!(u=!1)),u?-1:d.length()),w=f&&!d.uses_arguments&&h!==C.parent(),x=v.length;0<=--x;)(a=v[x])instanceof Ne?(l=a.definition()).id in N?(u=!1,W(l,a)<0&&(a.unused=null)):(u&&(V(a,"Dropping unused function argument {name}"),v.pop(),l.eliminated++),a.unused=!0):(b=!0,!f||c<x?_=a.transform(L):(_=(p=J(a,f[x],K,w,a)).name,p.value&&(f[x]=p.value)),_?(u=!1,v[x]=_,g=g||!(_ instanceof Ne)):u?(G(a,"Dropping unused default argument {name}"),v.pop()):y<x?(G(a,"Dropping unused default argument assignment {name}"),a.name instanceof Ne?a.name.unused=!0:g=!0,v[x]=a.name):(G(a,"Dropping unused default argument value {name}"),v[x]=a=a.clone(),a.value=Ve(Ce,a,{value:0}),g=!0));b&&!g&&d.uses_arguments&&!U.has_directive("use strict")&&(d.rest=Ve(fn,d,{elements:[]})),Y.push(d)}return d}if(d instanceof oe&&d.argname instanceof Ee&&d.argname.transform(L),!(d instanceof sn)||h instanceof vn&&h.init===d)return d instanceof we?(n(d,U),d.left instanceof Ee?(p=J(d.left,d.right,function(e){return e},!0===d.write_only)).name?Ve(we,d,{operator:d.operator,left:p.name,right:p.value}):p.value||(h instanceof Pe&&h.tail_node()!==d?Kn.skip:Ve(Ce,d,{value:0})):d):d instanceof de&&d.body instanceof _n?(n(d,U),d.body instanceof Se?(i=d.body,d.body=i.body.pop(),i.body.push(d),e?Kn.splice(i.body):i):d):d instanceof je?(q(),d):d instanceof _e?!C.option("imports")||d.definition().id in N?d:e?Kn.skip:null:void 0;var S=[],k=[],T=[],A=[],E=0,D=d instanceof ee;switch(d.definitions.forEach(function(e){e.value&&(e.value=e.value.transform(U));var n=e.value;if(e.name instanceof Ee)(f=J(e.name,n,function(e){return!j||e.definition().id in N||l(e)||D&&!vt(e)?e:null},!0)).name?(e=Ve(He,e,{name:f.name,value:n=f.value}),p()):f.value&&A.push(f.value);else{var t,i,r,o,s,a=e.name.definition(),f=D?vt(e.name):ar(a);if(!f||!j||a.id in N)if(n&&((o=W(a,e))<0||(s=n.tail_node())instanceof Ie&&s.definition()===a)&&(e=e.clone(),(n=n.drop_side_effect_free(C))&&qe.warn("Side effects in definition of variable {name} [{start}]",e.name),d instanceof ae?e.value=n||Ve(Ce,e,{value:0}):(e.value=null,n&&A.push(n)),n=null,0<=o)&&(z[a.id][o]=e),n||d instanceof wn)if(C.option("functions")&&!C.option("ie")&&f&&n&&1==I[a.id]&&0==a.assignments&&(s=n.tail_node())instanceof yn&&!ht(a)&&!Ln(s)&&(r=s,0==(o=a.references).length?r===e.name.fixed_value():Le(o,function(e){return r===e.fixed_value()}))&&(i=s,D&&!C.has_directive("use strict")&&i instanceof mn?h instanceof Xe||h instanceof _n&&h.init===d||h instanceof De:h instanceof je)&&!1!==(i=function(t,i){if(!t.name)return null;var r,e=t.name.definition();if(1<e.orig.length)return null;if(0<e.assignments)return!1;if(e.name==i)return e;if(C.option("keep_fnames"))return!1;switch(i){case"await":r=Gn;break;case"yield":r=Un}return Le(e.references,function(e){var n=e.scope;if(n.find_variable(i)!==a)return!1;if(r)do{if(n=n.resolve(),r(n))return!1}while(n!==t&&(n=n.parent_scope));return!0})&&e}(s,e.name.name))){switch(qe.warn("Declaring {name} as function [{start}]",e.name),s.CTOR){case te:t=ne;break;case re:t=ie;break;case mn:t=an;break;case AST_GeneratorFunction:t=AST_GeneratorDefun}var c=Ve(t,s),u=(c.name=Ve(Cn,e.name),e.name.scope.resolve().def_function(c.name));i&&i.forEach(function(e){e.name=u.name,e.thedef=u,e.reference()}),S.push(c),n!==s&&[].push.apply(A,n.expressions.slice(0,-1))}else f&&1<I[a.id]&&!(h instanceof ce)&&a.orig.indexOf(e.name)>a.eliminated&&(I[a.id]--,E++),p();else h instanceof ce?p():f&&1<I[a.id]?(qe.info("Dropping declaration of variable {name} [{start}]",e.name),I[a.id]--,a.eliminated++):k.push(e);else l(e.name)?((n=n&&n.drop_side_effect_free(C))&&A.push(n),1<I[a.id]?(qe.warn("Dropping duplicated declaration of variable {name} [{start}]",e.name),I[a.id]--,a.eliminated++):(e.value=null,k.push(e))):((n=n&&n.drop_side_effect_free(C))?(qe.warn("Side effects in initialization of unused variable {name} [{start}]",e.name),A.push(n)):V(e.name,"Dropping unused variable {name}"),a.eliminated++)}function l(e){var n=e.definition();return n.orig[0]instanceof he&&n.scope.resolve()===e.scope.resolve()}function p(){0<A.length&&(0==T.length?S.push(Ve(ze,d,{body:Ge(d,A)})):n?(A.push(n),e.value=Ge(n,A)):e.value=Ve(Re,e,{operator:"void",expression:Ge(e,A)}),A=[]),T.push(e)}}),k.length){case 0:if(0==T.length)break;if(T.length==E){[].unshift.apply(A,T.map(function(e){qe.info("Dropping duplicated definition of variable {name} [{start}]",e.name);var n=e.name.definition(),t=Ve(Ie,e.name),t=(n.references.push(t),Ve(we,e,{operator:"=",left:t,right:e.value})),e=W(n,e);return 0<=e&&(z[n.id][e]=t),n.assignments++,n.eliminated++,t}));break}case 1:if(0==T.length){var O=k[0].name.definition().id;if(O in M){d.definitions=k,M[O].init=d;break}}default:0<T.length&&(O=T[0].value)instanceof Pe&&(T[0].value=O.tail_node(),S.push(Ve(ze,d,{body:Ge(O,O.expressions.slice(0,-1))}))),d.definitions=k.concat(T),S.push(d)}return 0<A.length&&S.push(Ve(ze,d,{body:Ge(d,A)})),X(S,d,e)}function q(){var e=R;n(R=d,U),R=e}},function(e,n){if(e instanceof Se)return Bi(e,U.parent(),n);if(e instanceof ce)return(t=e.body)instanceof Se?(e.body=t.body.pop(),t.body.push(e),n?Kn.splice(t.body):t):void 0;if(e instanceof _n)return hi(e,n);if(e instanceof k){if(!j||!C.option("loops"))return;if(!ri(e.body))return;var t=w(e);if(!t)return;var i=t.definition();if(i.id in N)return;V(t,"Dropping unused loop variable {name}"),M[i.id]===e&&delete M[i.id];var t=[],r=e.object.drop_side_effect_free(C);return r&&(qe.warn("Side effects in object of for-in loop [{start}]",r),t.push(Ve(ze,e,{body:r}))),e.init instanceof sn&&i.orig[0]instanceof he&&t.push(e.init),X(t,e,n)}return e instanceof A?(e.properties&&0==e.properties.length&&(e.properties=null),e):e instanceof Pe&&!(1<e.expressions.length)?Qt(U.parent(),e,e.expressions[0]):void 0});U.push(C.parent()),U.directives=Object.create(C.directives),$.transform(U),$ instanceof Oe&&1==$.body.length&&$.body[0]instanceof x&&"use strict"==$.body[0].value&&($.body.length=0),H.forEach(function(e){hr(e,C,Y)})}function V(e,n){qe[0<e.definition().references.length?"info":"warn"](n+" [{start}]",e)}function G(e,n){e.name instanceof Ne?V(e.name,n):qe.info(n+" [{start}]",e)}function i(e){return e[e instanceof we?"right":"value"]}function X(e,n,t){switch(e.length){case 0:return t?Kn.skip:Ve(Z,n);case 1:return e[0];default:return t?Kn.splice(e):Ve(Se,n,{body:e})}}function m(e,n){return e.scope.resolve()===$&&(e.fixed&&n.fixed||(z[e.id]=!1),!1!==z[e.id])}function g(e,n){z[e.id]||(z[e.id]=[]),n.fixed.assigns&&be(z[e.id],n.fixed.assigns)}function W(e,n){e=z[e.id];return e&&e.indexOf(n)}function y(e){1<l[e.id]&&!(e.id in N)&&(N[e.id]=!0,u.push(e)),l[e.id]=0}function b(e,n,t){e.id in N||(n&&t?(N[e.id]=n,u.push(e)):(p[e.id]=n,d[e.id]=t))}function Q(e){var n=e.right;return!e.write_only||!(n instanceof xe&&We[n.operator])||!(n.left instanceof Ie)||!(e.left instanceof Ie)||(e=e.left.definition(),n.left.definition()!==e)||n.right.has_side_effects(C)?n:(m(e,n.left)&&g(e,n.left),n.right)}function w(e){var n=e.init;if(n instanceof sn)return(n=n.definitions[0].name)instanceof qn&&n;for(;n instanceof $e;)n=n.expression.tail_node();return n instanceof Ie?n:void 0}function f(e,n,t){e instanceof we&&e.left instanceof Ie&&(r=e.left.definition()).scope.resolve()===$&&h.add(r.id,e),e instanceof Ie&&e.in_arg&&(I[e.definition().id]=0),e instanceof Mn&&e.expression instanceof Ie&&(r=e.expression.definition()).scope.resolve()===$&&h.add(r.id,e);var i,r,o,s=[],a=P(e,s);if(a)return(o=a.definition()).scope.resolve()!==$&&$.variables.get(a.name)!==o||ht(o)&&!Le($.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof Ne)return(e=e.definition()).references.length>e.replaced},!0)})||"p"===e.write_only&&e.right.may_throw_on_access(C,!0)?void 0:((f=s.assign)&&(f.write_only=!0,f.walk(v)),s.forEach(function(e){e.walk(v)}),e instanceof we&&(f=Q(e),s=!1,t&&!0===e.write_only&&!f.has_side_effects(C)?_.add(o.id,f):(f.walk(v),s="="==f.tail_node().operator),e.left===a?e.write_only&&!s||b(o,a,d[o.id]):(t=a.fixed_value())&&t.is_constant()||b(o,p[o.id],!0)),m(o,a)&&st(a,e)!==a&&g(o,a),y(o),!0);if(e instanceof xe)return"instanceof"==e.operator&&(a=e.right)instanceof Ie&&(i=a.definition().id,l[i])?(e.left.walk(v),l[i]++,!0):void 0;if(e instanceof k){if(e.init instanceof Ie&&R===$&&((i=e.init.definition().id)in M||(M[i]=e)),!j||!C.option("loops"))return;if(!ri(e.body))return;if(e.init.has_side_effects(C))return;if(!(a=w(e)))return;if((r=a.definition()).scope.resolve()!==$){var f=c(a.name);if(f===r||f&&f.redefined()===r)return}return e.object.walk(v),!0}return e instanceof Ie?((o=e.definition()).id in N||(N[o.id]=!0,u.push(o)),!_t(o.scope,e.scope)||!(s=o.redefined())||s.id in N||(N[s.id]=!0,u.push(s)),m(o,e)&&g(o,e),!0):e instanceof je?(t=R,R=e,n(),R=t,!0):void 0}function K(e){return e.definition().id in N?e:(e instanceof Ne&&(e.unused=!0),null)}function S(e,n){if(n.value=n.value.transform(U),!n.name.transform(e)){if(n.name instanceof Ee)return null;e=n.value.drop_side_effect_free(C);if(!e)return null;V(n.name,"Side effects in default value of unused variable {name}"),(n=n.clone()).name.unused=null,n.value=e}return n}function J(e,v,m,g,b){var y=new Hn(function(r){if(r instanceof Ae){if(!(C.option("default_values")&&v&&v.is_defined(C)))return t=g,g=!1,n=S(y,r),g=t,!n&&g&&(v=v&&v.drop_side_effect_free(C)),n;r===b?b=r=r.name:r=r.name}if(r instanceof fn){var e,n,t=g,i=v,o=(v instanceof Ie&&(g=!1,v=v.fixed_value()),l=v instanceof ye?(e=!0,v.elements):(e=v&&v.is_string(C),!1),[]),s=g&&[],a=0;if(r.elements.forEach(function(e,n){(v=l&&l[n])instanceof pe?v=null:v instanceof Me&&(g&&(s.length=a,Li(i,s),[].push.apply(s,l.slice(n)),i.elements=s),v=l=!1),(e=e.transform(y))&&(o[a]=e),g&&v&&(s[a]=v),!e&&!v&&g&&l||a++}),v=l&&Ve(ye,i,{elements:l.slice(r.elements.length)}),r.rest&&(n=g,g=!1,r.rest=r.rest.transform(C.option("rests")?y:U),g=n,r.rest)&&(o.length=a),g&&(v=(v=v&&!r.rest?v.drop_side_effect_free(C):v)instanceof ye?v.elements:v instanceof Pe?v.expressions:v&&[v])&&v.length&&(s.length=a,[].push.apply(s,v)),v=i,g=t,l&&s&&(Li(v,s),(v=v.clone()).elements=s),e){if(!r.rest)switch(o.length){case 0:if(r===b)break;return g&&(v=v.drop_side_effect_free(C)),null;case 1:if(!g)break;if(r===b)break;var f=o[0];if(f.has_side_effects(C))break;if(v.has_side_effects(C)&&f.match_symbol(function(e){return e instanceof $e}))break;return v=Ve(En,r,{expression:v,property:Ve(Ce,r,{value:0})}),f}}else o.length=r.elements.length;Li(r,o),r.elements=o}else if(r instanceof un){var c,u,l,t=g,i=v,p=(v instanceof Ie&&(g=!1,v=v.fixed_value()),v instanceof Sn&&(c=[],u=new Wn,l=v.properties.map(function(e,n){var t;return(e=e.clone())instanceof Me?u=!1:((t=(t=e.key)instanceof qe?t.evaluate(C,!0):t)instanceof qe?u=!1:!u||e instanceof q||u.set(t,e),c[n]=t),e})),r.rest&&(v=!1,r.rest=r.rest.transform(C.option("rests")?y:U)),new Wn),d=g&&new Wn,h=[];if(r.properties.map(function(e){var n=e.key;return n instanceof qe&&(e.key=n=n.transform(U),n=n.evaluate(C,!0)),n instanceof qe?d=!1:p.set(n,!p.has(n)),n}).forEach(function(e,n){var t,i,n=r.properties[n];e instanceof qe?(v=g=!1,t=n.value.transform(y)||x(n.value)):(g=d&&p.get(e),(!(i=u&&u.get(e))||(v=i.value)instanceof Ke)&&(v=!1),(t=n.value.transform(y))?d&&d.set(e,!1):((r.rest||w(n))&&(t=x(n.value)),d&&!d.has(e)&&(i?(d.set(e,i),null===v&&u.set(e,w(i)&&Ve(kn,i,{key:i.key,value:Ve(Ce,i,{value:0})}))):d.set(e,!0))),v&&(i.value=v)),t&&(n.value=t,h.push(n))}),v=i,g=t,d&&c&&((v=v.clone()).properties=Kn(l,function(e,n){if(e instanceof Me)return e;n=c[n];if(n instanceof qe)return e;if(d.has(n)){var t=d.get(n);if(!t)return e;if(t===e)return u.get(n)||Kn.skip}else if(r.rest)return e;t=e.value.drop_side_effect_free(C);return t?(e.value=t,e):w(e)?Ve(kn,e,{key:e.key,value:Ve(Ce,e,{value:0})}):Kn.skip})),v&&!r.rest)switch(h.length){case 0:if(r===b)break;if(v.may_throw_on_access(C,!0))break;return g&&(v=v.drop_side_effect_free(C)),null;case 1:if(!g)break;if(r===b)break;var _=h[0];if(_.key instanceof qe)break;if(_.value.has_side_effects(C))break;if(v.has_side_effects(C)&&_.value.match_symbol(function(e){return e instanceof $e}))break;return v=Ve(En,r,{expression:v,property:Jt(_.key,_)}),_.value}r.properties=h}else!(r=r instanceof pe?null:m(r))&&g&&(v=v&&v.drop_side_effect_free(C));return r});return{name:e.transform(y),value:v};function w(e){return e.key instanceof qe&&e.key.has_side_effects(C)}function x(e){return e instanceof Ae?x(e.name):e instanceof Ee?(null===v?v=Ve(Ce,e,{value:0}):v&&(v.may_throw_on_access(C,!0)?v=Ve(ye,e,{elements:v instanceof Pe?v.expressions:[v]}):function e(n){n instanceof we?(n.write_only=!1,e(n.right)):n instanceof xe?We[n.operator]&&(e(n.left),e(n.right)):n instanceof Te?(e(n.consequent),e(n.alternative)):n instanceof Pe?e(n.tail_node()):n instanceof Mn&&(n.write_only=!1)}(v)),Ve(un,e,{properties:[]})):(e.unused=null,e)}}}),je.DEFMETHOD("hoist_declarations",function(s){var a,f,c,n,u,l,p,d,h,t;!s.has_directive("use asm")&&(a=s.option("hoist_funs"),f=s.option("hoist_vars"),c=this,f&&(n=0,c.walk(new Ye(function(e){return 1<n||e instanceof ce||e instanceof je&&e!==c||(e instanceof ee?(n++,!0):void 0)})),n<=1)&&(f=!1),a||f)&&(u=new Wn,l=[],p=[],d=new Wn,h=new Hn(function(e,n,t){if(e!==c){if(e instanceof x)return l.push(e),t?Kn.skip:Ve(Z,e);var i;if(e instanceof bn)return!a||(i=h.parent())instanceof ce||i instanceof ue||i!==c&&s.has_directive("use strict")?e:(p.push(e),t?Kn.skip:Ve(Z,e));if(e instanceof ee){if(!f)return e;if((i=h.parent())instanceof ce)return e;if(!Le(e.definitions,function(e){e=e.name;return e instanceof $n&&!u.has(e.name)&&c.find_variable(e.name)===e.definition()}))return e;e.definitions.forEach(function(e){d.set(e.name.name,e)});var r,o=e.to_assignments();return i instanceof vn&&i.init===e?o||(r=e.definitions[0].name,Ve(Ie,r)):i instanceof _n&&i.init===e?o:o?Ve(ze,e,{body:o}):t?Kn.skip:Ve(Z,e)}return e instanceof je?e:e instanceof M?(u.set(e.name,!0),e):void 0}}),c.transform(h),0<d.size()&&(t=[],c instanceof Oe&&c.each_argname(function(e){Le(e.definition().references,function(e){return!e.in_arg})&&d.del(e.name)}),d.each(function(e,n){(e=e.clone()).name=e.name.clone(),e.value=null,t.push(e),d.set(n,e),e.name.definition().orig.unshift(e.name)}),0<t.length)&&p.push(Ve(ee,c,{definitions:t})),c.body=l.concat(p,c.body))}),je.DEFMETHOD("process_returns",ge),an.DEFMETHOD("process_returns",function(e){if(e.option("booleans")&&!(e.parent()instanceof ue))switch(Ki(this.name.definition(),Wi(this),e)){case"d":Qi(e,this,!0);break;case!0:Ji(this,e)}}),mn.DEFMETHOD("process_returns",function(n){if(n.option("booleans")){var t=!0,i=Wi(this);if(!this.name||c(this.name.definition())){var e=n.parent();if(e instanceof we){if("="!=e.operator)return;if(!((o=e.left)instanceof Ie))return;if(!c(o.definition()))return}else if(e instanceof ke&&e.expression!==this){var r=e.expression;if(!((r=r instanceof Ie?r.fixed_value():r)instanceof Oe))return;if(r.uses_arguments||r.pinned())return;for(var o,s=e.args,a=0;a<s.length;a++){var f=s[a];if(f===this){if(!(o=r.argnames[a])&&r.rest)return;break}if(f instanceof Me)return}if((o=o instanceof Ae?o.name:o)instanceof Ne&&!c(o.definition()))return}else{if("Call"!=e.TYPE)return;n.pop();e=n.in_boolean_context();switch(n.push(this),e){case!0:t=!1;case"d":break;default:return}}t?Qi(n,this,!0):Ji(this,n)}}function c(e){switch(Ki(e,i,n)){case!0:t=!1;case"d":return 1}}}),Qe.DEFMETHOD("var_names",function(){var t=this._var_names;return t||(this._var_names=t=new Wn,this.enclosed.forEach(function(e){t.set(e.name,!0)}),this.variables.each(function(e,n){t.set(n,!0)})),t}),je.DEFMETHOD("make_var",function(e,n,t){for(var i=[this],r=(n instanceof qn&&n.definition().references.forEach(function(e){var n=e.scope;do{if(!be(i,n))return}while((n=n.parent_scope)&&n!==this)}),t=t.replace(/^[^a-z_$]|[^a-z0-9_$]/gi,"_")),o=0;!Le(i,function(e){return!e.var_names().has(r)});o++)r=t+"$"+o;var e=Ve(e,n,{name:r,scope:this}),s=this.def_variable(e);return i.forEach(function(e){e.enclosed.push(s),e.var_names().set(r,!0)}),e}),je.DEFMETHOD("hoist_properties",function(r){var f,o,c,u;function l(e,n,t){var i;return!(e instanceof On)||(i=e.definition()).assignments!=t||i.references.length-i.replaced==t||i.single_use||f.find_variable(e.name)!==i||o(i)||e.fixed_value()!==n||(t=e.fixed||i.fixed).direct_access?void 0:(!t.escaped||1!=t.escaped.depth)&&n instanceof Sn&&0<n.properties.length&&vt(e,r)&&Le(n.properties,function(e){return $r(e)&&"__proto__"!==e.key})}!r.option("hoist_props")||r.has_directive("use asm")||(f=this,Ln(f)&&f.value)||(o=f instanceof Pn&&r.top_retain||Ue,c=Object.create(null),u=new Hn(function(t,e){if(t instanceof we){if("="!=t.operator)return;if(!t.write_only)return;if(!l(t.left,t.right,1))return;e(t,u);var i=new Wn,r=[],o=[];return t.right.properties.forEach(function(e){var n=a($n,t.left,e.key),n=(o.push(Ve(He,t,{name:n,value:null})),Ve(Ie,t,{name:n.name,scope:f,thedef:n.definition()}));n.reference(),r.push(Ve(we,t,{operator:"=",left:n,right:e.value}))}),i.value=t.right,c[t.left.definition().id]=i,f.body.splice(f.body.indexOf(u.stack[1])+1,0,Ve(ee,t,{definitions:o})),Ge(t,r)}var n,s;if(t instanceof je)return t===f||"Call"==(s=u.parent()).TYPE&&s.expression===t?void 0:t;if(t instanceof He&&l(t.name,t.value,0))return e(t,u),i=new Wn,n=[],(s=t.clone()).value=t.name instanceof M?Ve(Ce,t,{value:0}):null,n.push(s),t.value.properties.forEach(function(e){n.push(Ve(He,t,{name:a(t.name.CTOR,t.name,e.key),value:e.value}))}),i.value=t.value,c[t.name.definition().id]=i,Kn.splice(n);function a(e,n,t){e=f.make_var(e,n,n.name+"_"+t);return i.set(t,e.definition()),e}}),f.transform(u),f.transform(new Hn(function(e,n){var t;if(e instanceof $e)return!(e.expression instanceof Ie&&(i=c[e.expression.definition().id])&&e.expression.fixed_value()===i.value)?void 0:(t=i.get(e.get_property()),(t=Ve(Ie,e,{name:t.name,scope:e.expression.scope,thedef:t})).reference(),t);if(e instanceof Ie){var i=c[e.definition().id];if(i&&e.fixed_value()===i.value)return Ve(Sn,e,{properties:[]})}})))}),(e=function(e,n){e.DEFMETHOD("drop_side_effect_free",n)})(qe,Qn),e(Ke,Xn),e(ye,function(e,n){e=Zi(this.elements,e,n,er);return e?e===this.elements&&Le(e,function(e){return e instanceof Me})?this:Ge(this,e.map(nr)):null}),e(we,function(e){var n=this.left;if(n instanceof $e){var t=n.expression;if(t.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&t.is_constant())return this}return!n.has_side_effects(e)&&!We[this.operator.slice(0,-1)]&&(this.write_only=!0,Yn(n).is_constant_expression(e.find_parent(je)))?this.right.drop_side_effect_free(e):this}),e(Je,function(e){if(!e.option("awaits"))return this;var n=this.expression;if(!wr(e,n))return this;var t=(n=n instanceof Re&&"!"==n.operator?n.expression:n).drop_side_effect_free(e);if(t===n)return this;t?wr(e,t)||(t=t.negate(e)):t=Ve(Ce,n,{value:0});e=this.clone();return e.expression=t,e}),e(xe,function(e,n){var t,i,r,o,s=this.left,a=this.right,f=this.operator;return yr(f,a,e)?(t=a.drop_side_effect_free(e,n))?We[f]&&t.has_side_effects(e)?(i=this,t!==a&&((i=i.clone()).right=t.drop_side_effect_free(e)),"??"==f?i:((a=i.clone()).operator="&&"==f?"||":"&&",a.left=s.negate(e,n),(r=a.right.tail_node())instanceof xe&&a.operator==r.operator&&kr(a),r=n?Si:xi,"&&"==f?r(i,a):r(a,i))):(o=s.drop_side_effect_free(e,n))?(t=t.drop_side_effect_free(e))?Ge(this,[o,t]):o:t:s.drop_side_effect_free(e,n):(o=s.drop_side_effect_free(e,n))===s?this:((i=this.clone()).left=o||Ve(Ce,s,{value:0}),i)}),e(ke,function(e,n){var t=this;if(t.is_expr_pure(e))return t.pure&&qe.warn("Dropping __PURE__ call [{start}]",t),(i=Zi(t.args,e,n,er))&&Ge(t,i.map(nr));var i=t.expression;if(t.is_call_pure(e))return(f=t.args.slice()).unshift(i.expression),(f=Zi(f,e,n,er))&&Ge(t,f.map(nr));if(e.option("yields")&&Un(i)){var r=t.clone(),o=(r.expression=Ve(mn,i),r.expression.body=[],r.transform(e));if(o!==r)return o.drop_side_effect_free(e,n)}var s,a,r=Qi(e,i);if(r&&((t=t.clone()).expression=r,i._squeezed)&&(t.expression._squeezed=!0),t instanceof y){var f,o=i;if((o=o instanceof Ie?o.fixed_value():o)instanceof Oe){if(s=e,(r=o).new=!0,a=Le(r.body,function(e){return!e.has_side_effects(s)})&&Le(r.argnames,function(e){return!e.match_symbol(Ue)})&&!(r.rest&&r.rest.match_symbol(Ue)),r.new=!1,a)return(f=t.args.slice()).unshift(i),(f=Zi(f,e,n,er))&&Ge(t,f.map(nr));o.contains_this()||((t=Ve(ke,t)).expression=t.expression.clone(),t.args=t.args.slice())}}return t.call_only=!0,t}),e(se,function(e,n){for(var t=this,i=[],r=[],o=0,s=t.properties,a=0;a<s.length;a++){var f=s[a];if(f.key instanceof qe&&i.push(f.key),ui(f)){var c=f.value;if(c.has_side_effects(e)){if(c.contains_this())return t;f instanceof tn?(o++,r.push(f)):r.push(c)}}}var u=t.extends;if(!u||(u=!dt(u=u instanceof Ie?u.fixed_value():u))||i.unshift(t.extends),i=Zi(i,e,n),r=Zi(r,e,n=i?!1:n),!i){if(!u&&!r&&!t.name)return null;i=[]}return u||t.name||!e.has_directive("use strict")?(n=Ui(t),u||(n.extends=null),n.properties=[],r?r.length==o?(i.length&&r.unshift(Ve(nn,t,{key:Ge(t,i),value:null})),n.properties=r):n.properties.push(Ve(nn,t,{static:!0,key:i.length?Ge(t,i):"c",value:l()})):i.length&&n.properties.push(Ve(p,t,{key:Ge(t,i),value:Ve(mn,t,{argnames:[],body:[]}).init_vars(n)})),n):(r&&i.push(Ve(ke,t,{expression:Ve(h,t,{argnames:[],body:[],value:l()}).init_vars(t.parent_scope),args:[]})),Ge(t,i));function l(){return Ge(t,r.map(function(e){var n;return e instanceof tn?((n=Ve(h,e.value)).argnames=[],Ve(ke,e,{expression:n,args:[]})):e}))}}),e(Te,function(e){var n,t,i=this.consequent.drop_side_effect_free(e),r=this.alternative.drop_side_effect_free(e);return i===this.consequent&&r===this.alternative?this:(e.option("ie")&&(n=[],i instanceof mn&&(n.push(i),i=null),r instanceof mn)&&(n.push(r),r=null),i?r?((t=this.clone()).consequent=i,t.alternative=r):t=Ve(xe,this,{operator:"&&",left:this.condition,right:i}):t=r?Ve(xe,this,{operator:"||",left:this.condition,right:r}):this.condition.drop_side_effect_free(e),n?(t&&n.push(t),0==n.length?null:Ge(this,n)):t)}),e(T,Xn),e(pn,function(e,n){var t=this.expression;return t.may_throw_on_access(e)?this:t.drop_side_effect_free(e,n)}),e(mn,function(e){return Xi(this,e)?null:this}),e(yn,Xn),e(Sn,function(e,n){var t=[],e=(this.properties.forEach(function(e){e instanceof Me?t.push(e):(e.key instanceof qe&&t.push(e.key),t.push(e.value))}),Zi(t,e,n,function(e,n,t){var i=e.expression;return i.safe_to_spread()?i.drop_side_effect_free(n,t):e}));return e?e!==t||Le(e,function(e){return!(e instanceof Me)})?Ge(this,e.map(function(e){return e instanceof Me?Ve(Sn,e,{properties:[e]}):e})):this:null}),e(An,Xn),e(Pe,function(e,n){var t,i,r,o=Zi(this.expressions,e,n);return o?(t=o[r=o.length-1],e.option("awaits")&&0<r&&t instanceof Je&&t.expression.is_constant()&&(i=(o=o.slice(0,-1))[--r],t.expression=wr(e,i)?i:i.negate(e),o[r]=t),e.option("conditionals")&&0<r&&(i=o[r-1])instanceof we&&"="==i.operator&&(r=i.left)instanceof Ie&&(r=gr(e,r.definition(),i.right,t))&&((i=i.clone()).right=r,(o=o.slice(0,-2)).push(i.drop_side_effect_free(e,n))),o===this.expressions?this:Ge(this,o)):null}),e(En,function(e,n){var t,i=this.expression;return i.may_throw_on_access(e)?this:(t=this.property,(i=i.drop_side_effect_free(e,n))?(t=t.drop_side_effect_free(e))?Ge(this,[i,t]):i:t.drop_side_effect_free(e,n))}),e(Ie,function(e){return this.is_declared(e)&&vt(this,e)?null:this}),e(Fn,function(e,n){var t,i=this;return i.is_expr_pure(e)?0==(t=i.expressions).length?null:Ge(i,t).drop_side_effect_free(e,n):((n=Qi(e,t=i.tag))&&((i=i.clone()).tag=n,t._squeezed)&&(i.tag._squeezed=!0),i)}),e(Mn,function(e,n){var t,i=this.expression;return ft[this.operator]?(this.write_only=!i.has_side_effects(e),this):"typeof"==this.operator&&i instanceof Ie&&vt(i,e)?null:(t=i.drop_side_effect_free(e,n),n&&t&&ai(t)?t===i&&"!"==this.operator?this:t.negate(e,n):t)}),n(ze,function(e,n){if(n.option("side_effects")){var t=e.body,n=t.drop_side_effect_free(n,!0);if(!n)return qe.warn("Dropping side-effect-free statement [{start}]",e),Ve(Z,e);if(n!==t)return Ve(ze,e,{body:n})}return e}),n(In,function(e,n){return n.option("loops")?Ve(_n,e).optimize(n):e}),n(ln,function(t,e){if(!e.option("loops"))return t;var n=rr(e,t.condition);if(!(n instanceof qe)){if(n&&!tr(t,e.parent(),j))return Ve(_n,t,{body:Ve(Se,t.body,{body:[t.body,Ve(ze,t.condition,{body:t.condition})]})}).optimize(e);if(!tr(t,e.parent()))return Ve(Se,t.body,{body:[t.body,Ve(ze,t.condition,{body:t.condition})]}).optimize(e)}if(t.body instanceof Se&&!tr(t,e.parent(),j)){for(var i=t.body.body,r=i.length;0<=--r;){var o=i[r];if(o instanceof De&&!o.alternative&&o.body instanceof F&&e.loopcontrol_target(o.body)===t){if(s(o.condition))break;t.condition=Ve(xe,t,{operator:"&&",left:o.condition.negate(e),right:t.condition}),i.splice(r,1)}else if(o instanceof ze){if(s(o.body))break;t.condition=Ge(t,[o.body,t.condition]),i.splice(r,1)}else if(!pi(o,!0))break}t.body=Bi(t.body,e.parent())}return t.body instanceof Z?Ve(_n,t).optimize(e):t.body instanceof ze?Ve(_n,t,{condition:Ge(t.condition,[t.body.body,t.condition]),body:Ve(Z,t)}).optimize(e):t;function s(e){var n=!1;return e.walk(new Ye(function(e){return!!n||(e instanceof Ie?(Jn(e.definition(),t.enclosed)||(n=!0),!0):void 0)})),n}}),n(_n,function(e,n){if(!n.option("loops"))return e;if(n.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(n)),e.step)&&(e.step=e.step.drop_side_effect_free(n)),e.condition){var t=rr(n,e.condition);if(t)t instanceof qe||(e.body=Ve(Se,e.body,{body:[Ve(ze,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(n.option("dead_code"))return t=[],Vn(e.init)?t.push(e.init):e.init&&t.push(Ve(ze,e.init,{body:e.init})),t.push(Ve(ze,e.condition,{body:e.condition})),vi(n,e.body,t),Ve(Se,e,{body:t}).optimize(n)}return function n(t,i){var e=s(t.body);if(i.option("dead_code")&&(e instanceof F||e instanceof j&&a(e)||e instanceof hn))return r=[],Vn(t.init)?r.push(t.init):t.init&&r.push(Ve(ze,t.init,{body:t.init})),o=a(e)||e instanceof hn,t.condition&&o?r.push(Ve(De,t,{condition:t.condition,body:e,alternative:null})):t.condition?r.push(Ve(ze,t.condition,{body:t.condition})):o&&r.push(e),vi(i,t.body,r),Ve(Se,t,{body:r});if(e instanceof De){var r,o=s(e.body);if(o instanceof F&&!a(o))return t.condition?t.condition=Ve(xe,t.condition,{left:t.condition,operator:"&&",right:e.condition.negate(i)}):t.condition=e.condition.negate(i),r=ii(e.alternative),vi(i,e.body,r),f(r);if((o=s(e.alternative))instanceof F&&!a(o))return t.condition?t.condition=Ve(xe,t.condition,{left:t.condition,operator:"&&",right:e.condition}):t.condition=e.condition,r=ii(e.body),vi(i,e.alternative,r),f(r)}return t;function s(e){return e instanceof Se?e.body[0]:e}function a(e){return i.loopcontrol_target(e)!==i.self()}function f(e){return t.body instanceof Se?(t.body=t.body.clone(),t.body.body=e.concat(t.body.body.slice(1)),t.body=t.body.transform(i)):t.body=Ve(Se,t.body,{body:e}).transform(i),n(t,i)}}(e,n)}),n(vn,function(e,n){var t;return n.option("varify")&&ni(e.init)&&((t=e.init.definitions[0].name)instanceof Ee||t instanceof I)&&!t.match_symbol(function(e){if(e instanceof qn)return!Ar(e=e.definition())||fr(n,e)},!0)&&(e.init=cr(e.init,e.resolve())),e}),n(De,function(e,c){if(ri(e.alternative)&&(e.alternative=null),c.option("conditionals")){if(c.option("booleans")&&!e.condition.has_side_effects(c)&&or(c,e.condition),c.option("dead_code")){var n=rr(c,e.condition);if(!n)return qe.warn("Condition always false [{start}]",e.condition),h=[Ve(ze,e.condition,{body:e.condition}).transform(c)],vi(c,e.body,h),e.alternative&&h.push(e.alternative),Ve(Se,e,{body:h}).optimize(c);if(!(n instanceof qe))return qe.warn("Condition always true [{start}]",e.condition),h=[Ve(ze,e.condition,{body:e.condition}).transform(c),e.body],e.alternative&&vi(c,e.alternative,h),Ve(Se,e,{body:h}).optimize(c)}var n=e.condition.negate(c),t=e.condition.print_to_string().length,i=n.print_to_string().length,r=i<t,o=(e.alternative&&r&&(r=!1,e.condition=n,o=e.body,e.body=e.alternative,e.alternative=ri(o)?null:o),[]),s=[],a=[],f=D(e.body,o,s,a),u=[],l=[],p=[],d=D(e.alternative,u,l,p);if(f instanceof Se||d instanceof Se){var h=[],_=[];if(f&&([].push.apply(h,o),[].push.apply(_,s),f instanceof Se?e.body=f:0==f.length?e.body=Ve(Z,e.body):e.body=Ve(ze,e.body,{body:Ge(e.body,f)}),a.forEach(Ht)),d&&([].push.apply(h,u),[].push.apply(_,l),d instanceof Se?e.alternative=d:0==d.length?e.alternative=null:e.alternative=Ve(ze,e.alternative,{body:Ge(e.alternative,d)}),p.forEach(Ht)),0<_.length&&h.push(Ve(ee,e,{definitions:_})),0<h.length)return h.push(e.transform(c)),Ve(Se,e,{body:h}).optimize(c)}else if(f&&d)return h=o.concat(u),(0<s.length||0<l.length)&&h.push(Ve(ee,e,{definitions:s.concat(l)})),0==f.length?h.push(Ve(ze,e.condition,{body:0<d.length?Ve(xe,e,{operator:"||",left:e.condition,right:Ge(e.alternative,d)}).transform(c):e.condition.clone()}).optimize(c)):0==d.length?(t===i&&!r&&e.condition instanceof xe&&"||"==e.condition.operator&&(r=!0),h.push(Ve(ze,e,{body:Ve(xe,e,{operator:r?"||":"&&",left:r?n:e.condition,right:Ge(e.body,f)}).transform(c)}).optimize(c))):h.push(Ve(ze,e,{body:Ve(Te,e,{condition:e.condition,consequent:Ge(e.body,f),alternative:Ge(e.alternative,d)})}).optimize(c)),a.forEach(Ht),p.forEach(Ht),Ve(Se,e,{body:h}).optimize(c);if((e=ri(e.body)?Ve(De,e,{condition:n,body:e.alternative,alternative:null}):e).alternative instanceof hn&&e.body.TYPE==e.alternative.TYPE){_=e.body.value,o=e.alternative.value;if(!_&&!o)return Ve(Se,e,{body:[Ve(ze,e,{body:e.condition}),e.body]}).optimize(c);if(_&&o||!function(){var e=!1,n=0,t=c.self();do{if(t instanceof oe)c.parent(n).bfinally&&(e=!0),n++;else if(t instanceof O)n++;else{if(t instanceof je)return e&&Vt(t);t instanceof zn&&t.bfinally&&(e=!0)}}while(t=c.parent(n++))}())return(u=Ve(e.body.CTOR,e,{value:Ve(Te,e,{condition:e.condition,consequent:_||Ve(Be,e.body).transform(c),alternative:o||Ve(Be,e.alternative).transform(c)})}))instanceof Fe&&(u.in_bool=e.body.in_bool||e.alternative.in_bool),u}if(Ii((e=e.body instanceof De&&!e.body.alternative&&!e.alternative?Ve(De,e,{condition:Ve(xe,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null}):e).body)&&e.alternative)return s=e.alternative,e.alternative=null,Ve(Se,e,{body:[e,s]}).optimize(c);if(Ii(e.alternative))return h=e.body,e.body=e.alternative,e.condition=r?n:e.condition.negate(c),e.alternative=null,Ve(Se,e,{body:[e,h]}).optimize(c);if(e.alternative){for(var v=T(e.body),m=A(v),g=T(e.alternative),b=A(g),y=[];0<=m&&0<=b;){var w=v[m],x=g[b];if(w.equals(x))v.splice(m--,1),g.splice(b--,1),y.unshift(Zt(w,x));else{if(!(w instanceof ze))break;if(!(x instanceof ze))break;var S=w.body.tail_node(),k=x.body.tail_node();if(!S.equals(k))break;m=E(v,w.body,m),b=E(g,x.body,b),y.unshift(Ve(ze,S,{body:Zt(S,k)}))}}if(0<y.length)return e.body=0<v.length?Ve(Se,e,{body:v}):Ve(Z,e),e.alternative=0<g.length?Ve(Se,e,{body:g}):null,y.unshift(e),Ve(Se,e,{body:y}).optimize(c)}c.option("typeofs")&&ir(e.condition,e.body,e.alternative)}return e;function T(e){return e instanceof Se?e.body:[e]}function A(e){for(var n=e.length;0<=--n&&pi(e[n],!0););return n}function E(e,n,t){return n instanceof Pe?e[t]=Ve(ze,n,{body:Ge(n,n.expressions.slice(0,-1))}):e.splice(t--,1),t}function D(e,n,t,i){if(null==e)return[];if(e instanceof Se){for(var r=[],o=0;o<e.body.length;o++){var s=e.body[o];if(!(s instanceof Z)){if(s instanceof hn){if(0==o)return;0<r.length&&(s=s.clone(),r.push(s.value||Ve(Be,s).transform(c)),s.value=Ge(e,r));var a=e.clone();return a.body=a.body.slice(o+1),a.body.unshift(s),a}if(s instanceof bn)n.push(s);else if(s instanceof ze){if(!c.option("sequences")&&0<r.length)return;r.push(s.body)}else{if(!(s instanceof ee))return;if(!c.option("sequences")&&0<r.length)return;s.remove_initializers(c,t),s.definitions.forEach(f)}}}return r}return e instanceof bn?(n.push(e),[]):e instanceof Z?[]:e instanceof ze?[e.body]:e instanceof ee?(r=[],e.remove_initializers(c,t),e.definitions.forEach(f),r):void 0;function f(e){e.value&&r.push(Ve(we,e,{operator:"=",left:e.name.convert_symbol(Ie,function(e){i.push(e)}),right:e.value}))}}}),n(Dn,function(i,t){if(t.option("switches")&&t.option("dead_code")){for(var e,n,r,o=[],s=[],a=[],f=0,c=i.body.length;f<c;f++){if((e=i.body[f])instanceof on){var u=o[o.length-1];if(n||y(e.body[0],t)&&(!u||Ii(u))){x(e,u);continue}n=e}else{var l=e.expression,p=Ve(xe,i,{operator:"===",left:i.expression,right:l}).evaluate(t,!0);if(!p){l.has_side_effects(t)&&a.push(l),x(e,o[o.length-1]);continue}if(!(p instanceof qe))for(n&&(p=o.indexOf(n),o.splice(p,1),x(n,o[p-1]),n=null),l.has_side_effects(t)?r=e:n=e=Ve(on,e);++f<c;)x(i.body[f],e)}if(c<=f+1||Ii(e)){var d,u=o[o.length-1],h=e.body;if(Ii(u))switch(u.body.length-h.length){case 1:if(!y(d=u.body[u.body.length-1],t))break;h=h.concat(d);case 0:var _=Ve(Se,u),v=Ve(Se,e,{body:h});_.equals(v)&&(u.body=[])}}a.length&&(e instanceof on?o.push(Ve(Ze,i,{expression:Ge(i,a),body:[]})):(a.push(e.expression),e.expression=Ge(i,a)),a=[]),o.push(e)}for(a.length&&!r&&o.push(Ve(Ze,i,{expression:Ge(i,a),body:[]}));e=o[o.length-1];){if(y(d=e.body[e.body.length-1],t)&&e.body.pop(),e===n){if(!oi(e))break}else{if(e.expression.has_side_effects(t))break;if(n){if(!oi(n))break;if(o[o.length-2]!==n)break;n.body=n.body.concat(e.body),e.body=[]}else if(!oi(e))break}x(e),o.pop()===n&&(n=null)}if(!e)return s.push(Ve(ze,i.expression,{body:i.expression})),a.length&&s.push(Ve(ze,i,{body:Ge(i,a)})),Ve(Se,i,{body:s}).optimize(t);if(e===n)for(;(e=o[o.length-2])&&!(e instanceof on)&&oi(e);){if((l=e.expression).has_side_effects(t)){if((u=o[o.length-3])&&!Ii(u))break;n.body.unshift(Ve(ze,i,{body:l}))}x(e),o.splice(-2,1)}if(o[0].body=s.concat(o[0].body),i.body=o,t.option("conditionals"))switch(o.length){case 1:if(w(o[0]))return l=o[0].expression,h=o[0].body.slice(),(o[0]!==n&&o[0]!==r?Ve(De,i,{condition:Ve(xe,i,{operator:"===",left:i.expression,right:l}),body:Ve(Se,i,{body:h}),alternative:null}):(l&&h.unshift(Ve(ze,l,{body:l})),h.unshift(Ve(ze,i.expression,{body:i.expression})),Ve(Se,i,{body:h}))).optimize(t);break;case 2:if(Jn(n,o)&&w(o[1])){var m,g,b=(h=o[0].body.slice()).length&&y(h[h.length-1],t);if(b&&h.pop(),Le(h,w))return m=o[1].body.length&&Ve(Se,o[1]),g=Ve(De,i,{condition:Ve(xe,i,o[0]===n?{operator:"!==",left:i.expression,right:o[1].expression}:{operator:"===",left:i.expression,right:o[0].expression}),body:Ve(Se,o[0],{body:h}),alternative:b&&m||null}),(g=!b&&m?Ve(Se,i,{body:[g,m]}):g).optimize(t)}}}return i;function y(e,n){return e instanceof F&&n.loopcontrol_target(e)===i}function w(e){var n=!1,t=new Ye(function(e){if(n||e instanceof Oe||e instanceof ze)return!0;y(e,t)&&(n=!0)});return t.push(i),e.walk(t),!n}function x(e,n){n&&!Ii(n)?n.body=n.body.concat(e.body):vi(t,e,s)}}),n(zn,function(e,n){if(e.body=_i(e.body,n),n.option("dead_code")){if(oi(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof he&&!vt(e)},!0)))return t=[],e.bcatch&&(vi(n,e.bcatch,t),t.forEach(function(e){e instanceof ee&&e.definitions.forEach(function(e){var n=e.name.definition().redefined();n&&(e.name=e.name.clone(),e.name.thedef=n)})})),t.unshift(Ve(Se,e).optimize(n)),e.bfinally&&t.push(Ve(Se,e.bfinally).optimize(n)),Ve(Se,e,{body:t}).optimize(n);if(e.bfinally&&oi(e.bfinally)){var t=Ve(Se,e.bfinally).optimize(n);if(t=e.body.concat(t),!e.bcatch)return Ve(Se,e,{body:t}).optimize(n);e.body=t,e.bfinally=null}}return e}),ae.DEFMETHOD("remove_initializers",sr(function(e,n){return Ve(Be,n).optimize(e)})),wn.DEFMETHOD("remove_initializers",sr(Xn)),ee.DEFMETHOD("remove_initializers",sr(Xn)),sn.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,t){var n,i,r,o=t.name.definition(),s=t.value;return s&&(s instanceof Pe&&(s=s.clone()),n=Ve(Ie,t.name),i=Ve(we,t,{operator:"=",left:n,right:s}),e.push(i),(r=function(){return i.right}).assigns=[i],r.direct_access=o.direct_access,r.escaped=o.escaped,n.fixed=r,o.references.forEach(function(e){var n;e.fixed&&(n=e.fixed.assigns)&&n[0]===t&&(1<n.length||e.fixed.to_binary||e.fixed.to_prefix?n[0]=i:(e.fixed=r,o.fixed===e.fixed&&(o.fixed=r)))}),o.references.push(n)),o.assignments++,o.eliminated++,o.single_use=!1,e},[]);return 0==e.length?null:Ge(this,e)}),n(ae,lr),n(wn,lr),n(ke,function(p,c){var o=p.expression,e=pr(p,c);if(e)return e;if(c.option("sequences"))if(o instanceof $e){if((b=dr(o))!==o)return(y=p.clone()).expression=b.expressions.pop(),b.expressions.push(y),b.optimize(c)}else if(!Xt(o.tail_node()))if((b=dr(p))!==p)return b.optimize(c);if(c.option("unused")&&hr(p,c),c.option("unsafe"))if(ci(o))switch(o.name){case"Array":if(1==p.args.length){if((a=p.args[0])instanceof Ce)try{var n=a.value;if(6<n)break;for(var t=Array(n),i=0;i<n;i++)t[i]=Ve(pe,p);return Ve(ye,p,{elements:t})}catch(e){qe.warn("Invalid array length: {length} [{start}]",{length:n,start:p.start});break}if(!a.is_boolean(c)&&!a.is_string(c))break}return Ve(ye,p,{elements:p.args});case"Object":if(0==p.args.length)return Ve(Sn,p,{properties:[]});break;case"String":if(0==p.args.length)return Ve(U,p,{value:""});if(1==p.args.length)return Ve(xe,p,{operator:"+",left:Ve(U,p,{value:""}),right:p.args[0]}).optimize(c);break;case"Number":if(0==p.args.length)return Ve(Ce,p,{value:0});if(1==p.args.length)return Ve(Re,p,{operator:"+",expression:Ve(xe,p,{operator:"+",left:Ve(U,p,{value:""}),right:p.args[0]})}).optimize(c);break;case"Boolean":if(0==p.args.length)return Ve(le,p).optimize(c);if(1==p.args.length)return Ve(Re,p,{operator:"!",expression:Ve(Re,p,{operator:"!",expression:p.args[0]})}).optimize(c);break;case"RegExp":var z=[];if(Le(p.args,function(e){var n=e.evaluate(c);return z.unshift(n),e!==n}))try{return ki(c,p,Ve(G,p,{value:RegExp.apply(RegExp,z)}))}catch(e){qe.warn("Error converting {this} [{start}]",p)}}else if(o instanceof pn)switch(o.property){case"toString":var r=o.expression;if(0!=p.args.length||r.may_throw_on_access(c)||r instanceof W)break;return Ve(xe,p,{operator:"+",left:Ve(U,p,{value:""}),right:r}).optimize(c);case"join":if(o.expression instanceof ye&&p.args.length<2)e:{var s=p.args[0];if(0==o.expression.elements.length&&!(s instanceof Me))return s?Ge(p,[s,Ve(U,p,{value:""})]).optimize(c):Ve(U,p,{value:""});if(!(s&&(s=s.evaluate(c))instanceof qe)){for(var a,t=[],f=[],i=0;i<o.expression.elements.length;i++){var u=o.expression.elements[i];if((k=u.evaluate(c))!==u)f.push(k);else{if(u instanceof Me)break e;0<f.length&&(t.push(Ve(U,p,{value:f.join(s)})),f.length=0),t.push(u)}}return(0<f.length&&t.push(Ve(U,p,{value:f.join(s)})),1==t.length)?t[0].is_string(c)?t[0]:Ve(xe,t[0],{operator:"+",left:Ve(U,p,{value:""}),right:t[0]}):""==s?(a=t[0].is_string(c)||t[1].is_string(c)?t.shift():Ve(U,p,{value:""}),t.reduce(function(e,n){return Ve(xe,n,{operator:"+",left:e,right:n})},a).optimize(c)):((F=p.clone()).expression=F.expression.clone(),F.expression.expression=F.expression.expression.clone(),F.expression.expression.elements=t,ki(c,p,F))}}break;case"charAt":if(p.args.length<2)return(F=Ve(xe,p,{operator:"||",left:Ve(En,p,{expression:o.expression,property:p.args.length?Ve(xe,p.args[0],{operator:"|",left:Ve(Ce,p,{value:0}),right:p.args[0]}):Ve(Ce,p,{value:0})}).optimize(c),right:Ve(U,p,{value:""})})).is_string=V,F.optimize(c);break;case"apply":if(2==p.args.length&&p.args[1]instanceof ye)return(C=p.args[1].elements.slice()).unshift(p.args[0]),Ve(ke,p,{expression:Ve(pn,o,{expression:o.expression,property:"call"}),args:C}).optimize(c);break;case"call":r=o.expression;if((r=r instanceof Ie?r.fixed_value():r)instanceof Oe&&!r.contains_this())return(p.args.length?Ge(p,[p.args[0],Ve(ke,p,{expression:o.expression,args:p.args.slice(1)})]):Ve(ke,p,{expression:o.expression,args:[]})).optimize(c)}else if(c.option("side_effects")&&o instanceof ke&&1==o.args.length&&ci(o.expression)&&"Object"==o.expression.name)return(y=p.clone()).expression=Qt(p,o,o.args[0]),y.optimize(c);if(c.option("unsafe_Function")&&ci(o)&&"Function"==o.name){if(0==p.args.length)return Ve(mn,p,{argnames:[],body:[]}).init_vars(o.scope);if(Le(p.args,function(e){return e instanceof U}))try{var l,d="n(function("+p.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+p.args[p.args.length-1].value+"})",h=et(d),_={ie:c.option("ie")},v=(h.figure_out_scope(_),new ct(c.options)),d=((h=h.transform(v)).figure_out_scope(_),h.compute_char_frequency(_),h.mangle_names(_),h.walk(new Ye(function(e){return!!l||(e instanceof Oe?(l=e,!0):void 0)})),ot());return Se.prototype._codegen.call(l,d),p.args=[Ve(U,p,{value:l.argnames.map(function(e){return e.print_to_string()}).join()}),Ve(U,p.args[p.args.length-1],{value:d.get().replace(/^\{|\}$/g,"")})],p}catch(e){if(!(e instanceof Zn))throw e;qe.warn("Error parsing code passed to new Function [{start}]",p.args[p.args.length-1]),qe.warn(e.toString())}}var m=o instanceof Ie?o.fixed_value():o,e=c.parent(),g=c.self(),b=m instanceof Oe&&(!Gn(m)||c.option("awaits")&&e instanceof Je)&&(!Un(m)||c.option("yields")&&g instanceof Bn&&g.nested),y=b&&m.first_statement(),w=0,x=!1,S=!Le(p.args,function(e){return!(e instanceof Me)}),v=b&&Le(m.argnames,function(e,n){if(1==w&&p.args[n]instanceof Me&&(w=2),e instanceof Ae){if(mi(1==(w=w||1)&&p.args[n])||(w=2),jr(m,e.value))return!1;e=e.name}return!(e instanceof Ee&&(x=!0,jr(m,e)))})&&!(m.rest instanceof Ee&&jr(m,m.rest)),_=v&&c.option("inline")&&!p.is_expr_pure(c)&&(o===m||mr(m,c));if(_&&y instanceof Fe){var k=y.value;if(o===m&&!m.name&&(!k||k.is_constant_expression())&&vr(m,_r(c)))return Ge(p,R(k)).optimize(c)}if(b&&!m.contains_this()){var T,A=!1;if(_&&!m.uses_arguments&&!m.pinned()&&!(m.name&&m instanceof yn)&&(o===m||!Tr(c,T=o.definition(),m)&&m.is_constant_expression(Gt(c)))&&(k=function(e){var n=m.body.length;if(n<2&&(e=H(e)))return e;if(c.option("inline")<3)return!1;e=null;for(var t=0;t<n;t++){var i=m.body[t];if(i instanceof ee){if(A){if(e){if(!(e instanceof ze))return!1;li(i)||(e=null)}}else if(!li(i)){if(e&&!(e instanceof ze))return!1;A=!(e=null)}}else if(!(i instanceof ne||i instanceof an||i instanceof Z)){if(e)return!1;e=i}}return H(e)}(y))){var E,M,D,O,q=o===m||T.single_use&&T.references.length-T.replaced==1;if(function(){if(!(w||x||S||A||m.rest)&&!(c.option("inline")<2&&m.argnames.length)&&m.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof Ne})){var i,n=c.find_parent(je),r=!1,o=_r(c,n),s=[],a=!1,f=new Ye(function(e,n){var t;return!!r||(e instanceof xe&&We[e.operator]||e instanceof Te?void(s=null):e instanceof je||o&&e instanceof On&&o[e.name]?r=!0:e instanceof Ie?(t=e.definition(),m.variables.get(e.name)!==t?void(s=null):t.init instanceof bn||st(e,f.parent())?r=!0:(t=Y(t),i<t||(i=t),s?void(a?s=null:s.push(m.argnames[t])):void 0)):a?void 0:e instanceof we&&e.left instanceof $e?(e.left.expression.walk(f),e.left instanceof En&&e.left.property.walk(f),e.right.walk(f),a=!0):e.has_side_effects(c)?(n(),a=!0):void 0)});if(k.walk(f),!r){var e=p.args.length;if(s&&m.argnames.length>=e){for(e=m.argnames.length;e-- >i&&m.argnames[e]===s.pop(););e++}return e<=i||Le(p.args.slice(i,e),a&&!s?function(e){return e.is_constant_expression(n)}:function(e){return!e.has_side_effects(c)})}}}()){var C=p.args.slice(),$=[],h=k.clone(!0).transform(new Hn(function(e){if(e instanceof Ie){var n=e.definition();if(m.variables.get(e.name)!==n)return $.push(e),e;var n=Y(n),t=C[n];if(!t)return Ve(Be,p);C[n]=null;n=this.parent();return n?Qt(n,e,t):t}})),d=m.inlined,N=(o!==m&&(m.inlined=!0),[]),F=(C.forEach(function(e){e&&((e=e.clone(!0)).walk(new Ye(function(e){e instanceof Ie&&$.push(e)})),N.push(e))},[]),N.push(h),Ge(p,N).optimize(c));if(m.inlined=d,F=Qt(e,g,F),q||xi(F,p)===F)return $.forEach(function(e){e.scope=o===m?m.parent_scope:o.scope,e.reference();e=e.definition();q&&e.replaced++,e.single_use=!1}),F;F.has_side_effects(c)||(p.drop_side_effect_free=function(e,n){var t=this.args.slice();return t.unshift(this.expression),Ge(this,t).drop_side_effect_free(e,n)})}if(q&&function(){var e,n=new Wn,t=0;O=g;do{if(O.variables&&O.variables.each(function(e){n.set(e.name,!0)}),e=O,(O=c.parent(t++))instanceof nn){if(!O.static)return}else O instanceof dn?D=[]:O instanceof _n?O.init!==e&&(D=[]):O instanceof vn&&O.init!==e&&O.object!==e&&(D=[])}while(!(O instanceof je));if(!(M=O.body.indexOf(e)+1))return;if(!vr(m,_r(c,O)))return;var i=(o!==m||m.parent_scope.resolve()===O)&&!O.pinned();O instanceof Pn&&(c.toplevel.vars?n.set("arguments",!0):i=!1);E=new Wn;var r=c.option("inline");return function(n,t){var i=!1;return m.each_argname(function(e){if(!i&&!e.unused){if(!t||L(n,e.name))return i=!0;E.set(e.name,!0),D&&D.push(e.definition())}}),!i}(n,2<=r&&i)&&!(!function(n,e){for(var t=0;t<m.body.length;t++){var i=m.body[t];if(i instanceof bn){var r=i.name;if(!e)return;if(E.has(r.name))return;if(L(n,r.name))return;if(!Le(i.enclosed,function(e){return e.scope===O||e.scope===i||!n.has(e.name)}))return;D&&D.push(r.definition())}else if(i instanceof ee){if(!e)return;for(var o=i.definitions.length;0<=--o;){r=i.definitions[o].name;if(L(n,r.name))return;D&&D.push(r.definition())}}}return 1}(n,3<=r&&i)||D&&0!=D.length&&qr(m,D))}())return m._squeezed=!0,o!==m&&(m.parent_scope=o.scope),F=Ge(p,function(){var e=[],n=[];(1<w||x||S||m.rest?function(i,r){function n(e,n){if(n.unused)return I(n);var t=n.definition(),e=(t.assignments++,t.references.push(e),Ve($n,n));t.orig.push(e),t.eliminated++,P(i,r,e)}r.push(Ve(we,p,{operator:"=",left:Ve(fn,p,{elements:m.argnames.map(function(e){return e.unused?Ve(pe,e):e.convert_symbol(Ie,n)}),rest:m.rest&&m.rest.convert_symbol(Ie,n)}),right:Ve(ye,p,{elements:p.args.slice()})}))}:function(e,n){for(var t=m.argnames.length,i=p.args.length;--i>=t;)n.push(p.args[i]);var r,o=[];for(i=t;0<=--i;){var s,a,f=m.argnames[i],c=(r=f instanceof Ae?(o.push(f),f.name):f,p.args[i]);r.unused||O.var_names().has(r.name)?c&&n.push(c):(s=Ve($n,r),(a=r.definition()).orig.push(s),a.eliminated++,void 0!==r.unused?(P(e,n,s),c&&n.push(c)):(!c&&f===r&&(D||"arguments"==r.name&&!Ln(m)&&Ln(O))&&(c=Ve(Be,p)),P(e,n,s,c)))}for(e.reverse(),n.reverse(),i=o.length;0<=--i;){var u,l=o[i];void 0!==l.name.unused?n.push(l.value):(u=Ve(Ie,l.name),l.name.definition().references.push(u),n.push(Ve(we,l,{operator:"=",left:u,right:l.value})))}})(e,n);var t=function(i,e){var t=[M,0],o=[],r=[],s=[],a=[],f=[];return m.body.filter(D?function(e){var n,t;return!(e instanceof bn&&((t=(n=Ve($n,Fr(e.name))).definition()).fixed=!1,t.orig.push(n),t.eliminated++,P(i,r,n,Vi(e,!0)),1))}:function(e){var n;return!(e instanceof bn&&(n=e.name.definition(),O.functions.set(n.name,n),O.variables.set(n.name,n),O.enclosed.push(n),O.var_names().set(n.name,!0),t.push(e),1))}).forEach(function(e){if(e instanceof ee)for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n],i=Fr(t.name),r=t.value;r&&0<f.length&&(f.push(r),r=Ge(t,f),f=[]),P(o,s,i,r),!D||E.has(i.name)||1==i.definition().orig.length&&m.functions.has(i.name)||a.push(zr(c,i))}else e instanceof ze&&f.push(e.body)}),[].push.apply(i,o),[].push.apply(e,a),[].push.apply(e,r),[].push.apply(e,s),t}(e,n);n.push(k),e.length&&t.push(Ve(ee,m,{definitions:e}));return[].splice.apply(O.body,t),m.enclosed.forEach(function(e){O.var_names().has(e.name)||(O.enclosed.push(e),O.var_names().set(e.name,!0))}),n}()).optimize(c),Qt(e,g,F)}if(c.option("side_effects")&&v&&Le(m.body,ri)&&(m===o?Xi(m,c):!w&&!x&&!m.rest)&&(!Ln(m)||!m.value)&&vr(m,_r(c)))return Ge(p,R()).optimize(c)}if(c.option("drop_console")&&o instanceof $e){for(var j=o.expression;j.expression;)j=j.expression;if(ci(j)&&"console"==j.name)return Ve(Be,p).optimize(c)}return c.option("negate_iife")&&e instanceof ze&&ai(g)?p.negate(c,!0):Di(c,p);function I(e){return Ve(En,e,{expression:Ve(ye,e,{elements:[]}),property:Ve(Ce,e,{value:0})})}function R(e){var s,t,n=p.args.slice(),i=1<w||x||m.rest;return(i||S)&&(n=[Ve(ye,p,{elements:n})]),i?(s=new Hn(function(i,e){var t,r,o;return i instanceof Ae?Ve(Ae,i,{name:i.name.transform(s)||I(i),value:i.value}):i instanceof fn?(t=[],i.elements.forEach(function(e,n){(e=e.transform(s))&&(t[n]=e)}),Li(i,t),Ve(fn,i,{elements:t})):i instanceof un?(r=[],o=[],i.properties.forEach(function(e){var n=e.key,t=e.value.transform(s);t?(o.length&&(n instanceof qe||(n=Jt(n,e)),o.push(n),n=Ge(i,o),o=[]),r.push(Ve(cn,e,{key:n,value:t}))):n instanceof qe&&o.push(n)}),o.length&&r.push(Ve(cn,i,{key:Ge(i,o),value:I(i)})),Ve(un,i,{properties:r})):i instanceof Ne?null:void 0}),t=[],m.argnames.forEach(function(e,n){(e=e.transform(s))&&(t[n]=e)}),(i=m.rest&&m.rest.transform(s))&&(t.length=m.argnames.length),Li(m,t),n[0]=Ve(we,p,{operator:"=",left:Ve(fn,m,{elements:t,rest:i}),right:n[0]})):m.argnames.forEach(function(e){e instanceof Ae&&n.push(e.value)}),n.push(e||Ve(Be,p)),n}function B(){return p.call_only?Ve(Ce,p,{value:0}):Ve(Be,p)}function H(e){return e?e instanceof Fe?e.value||B():e instanceof ze?p.call_only?e.body:Ve(Re,e,{operator:"void",expression:e.body}):void 0:B()}function Y(e){for(var n=m.argnames.length;0<=--n;)if(m.argnames[n].definition()===e)return n}function L(e,n){return e.has(n)||Ir[n]||O.var_names().has(n)}function P(e,n,t,i){var r=t.definition();O.var_names().has(t.name)||(O.var_names().set(t.name,!0),e.push(Ve(He,t,{name:t,value:null}))),O.variables.set(t.name,r),O.enclosed.push(r),i&&(e=Ve(Ie,t),r.assignments++,r.references.push(e),n.push(Ve(we,p,{operator:"=",left:e,right:i})))}}),n(y,function(e,n){if(n.option("unsafe")){var t=e.expression;if(ci(t))switch(t.name){case"Array":case"Error":case"Function":case"Object":case"RegExp":return Ve(ke,e).transform(n)}}if(n.option("sequences")){t=dr(e);if(t!==e)return t.optimize(n)}return n.option("unused")&&hr(e,n),e}),n(Pe,function(e,t){for(var i,r,o,n=t.option("side_effects")?(i=[],r=H(t),o=e.expressions.length-1,e.expressions.forEach(function(e,n){(e=n<o?e.drop_side_effect_free(t,r):e)&&(ei(i,e),r=!1)}),i):e.expressions,s=n.length-1,a=1;a<s;a++){var f=n[a-1],c=p(f);if(c){var u=n[a];if(t.option("conditionals")){var l=gr(t,c,f.right,u);if(l){f.right=l,n.splice(a--,1),s--;continue}}t.option("dead_code")&&p(u)===c&&u.right.is_constant_expression(c.scope.resolve())&&(n[--a]=f.right)}}if(t.option("side_effects")){for(;0<s&&mi(n[s],t);)s--;s<n.length-1&&(n[s]=Ve(Re,e,{operator:"void",expression:n[s]}),n.length=s+1)}return 0==s?(e=Qt(t.parent(),t.self(),n[0]))instanceof Pe?e:e.optimize(t):(e.expressions=n,e);function p(e){return e instanceof we&&"="==e.operator&&e.left instanceof Ie&&e.left.definition()}}),n(Nn,function(e,n){if(n.option("sequences")){var t=dr(e);if(t!==e)return t.optimize(n)}return Di(n,e)}),ao=X("+ -"),fo=X("* / %"),n(Re,function(e,n){var t=e.operator,i=e.expression;if(n.option("sequences")&&function(){switch(t){case"delete":return!s(i.tail_node());case"typeof":return!ci(i.tail_node());default:return 1}}()){var r=dr(e);if(r!==e)return r.optimize(n)}switch(t){case"+":if(!n.option("evaluate"))break;if(!i.is_number(n,!0))break;var o=n.parent();if(o instanceof Re&&"delete"==o.operator)break;return i;case"-":if((i=i instanceof m?i.transform(n):i)instanceof Ce||i instanceof m)return e;break;case"!":if(n.option("booleans")){if(i.is_truthy())return Ge(e,[i,Ve(le,e)]).optimize(n);if(n.in_boolean_context()){if(i instanceof Re&&"!"==i.operator)return i.expression;i instanceof xe&&(e=((o=H(n))?Si:xi)(e,i.negate(n,o)))}}break;case"delete":if(!n.option("evaluate"))break;if(s(i))break;return Ge(e,[i,Ve(B,e)]).optimize(n);case"typeof":if(!n.option("booleans"))break;if(!n.in_boolean_context())break;qe.warn("Boolean expression always true [{start}]",e);o=[Ve(B,e)];return i instanceof Ie&&vt(i,n)||o.unshift(i),Ge(e,o).optimize(n);case"void":if(n.option("side_effects"))return(i=i.drop_side_effect_free(n))?(e.expression=i,e):Ve(Be,e).optimize(n)}return n.option("evaluate")&&i instanceof xe&&ao[t]&&fo[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(n))?Ve(xe,e,{operator:i.operator,left:Ve(Re,i.left,{operator:t,expression:i.left}),right:i.right}):Di(n,e);function s(e){return e instanceof m||e instanceof b||e instanceof w||e instanceof $e||e instanceof Ie||e instanceof Be}}),n(Je,function(e,n){if(n.option("awaits")){if(n.option("sequences")){var t=dr(e);if(t!==e)return t.optimize(n)}if(n.option("side_effects")){var i=e.expression;if(i instanceof Je)return i.optimize(n);if(i instanceof Re&&i.expression instanceof Je)return i.optimize(n);for(var r,o=0,s=e;r=n.parent(o++);s=r){if(Ln(r)){if(r.value===s)return i.optimize(n)}else if(r instanceof Fe){var a=!0;do{if(s=r,(r=n.parent(o++))instanceof zn&&(r.bfinally||r.bcatch)!==s){a=!1;break}}while(r&&!(r instanceof je));if(a)return i.optimize(n)}else if(r instanceof Pe&&r.tail_node()===s)continue;break}}}return e}),n(Bn,function(e,n){if(n.option("yields")){if(n.option("sequences")){var t=dr(e);if(t!==e)return t.optimize(n)}t=e.expression;if(e.nested&&"Call"==t.TYPE){t=t.clone().optimize(n);if("Call"!=t.TYPE)return t}}return e}),xe.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof $e)return this.left.expression instanceof Pe?(n=this.left.expression.expressions.slice(),(t=this.clone()).left=t.left.clone(),t.left.expression=n.pop(),n.push(t),Ge(this,n)):this;if(this.left instanceof Pe)return n=this.left.expressions.slice(),(t=this.clone()).left=n.pop(),n.push(t),Ge(this,n);if(this.right instanceof Pe){if(this.left.has_side_effects(e))return this;for(var n,t,i="="==this.operator&&this.left instanceof Ie,r=(n=this.right.expressions).length-1,o=0;o<r&&(i||!n[o].has_side_effects(e));o++);if(o==r)return n=n.slice(),(t=this.clone()).right=n.pop(),n.push(t),Ge(this,n);if(0<o)return(t=this.clone()).right=Ge(this.right,n.slice(o)),(n=n.slice(0,o)).push(t),Ge(this,n)}return this}),co=X("indexOf lastIndexOf"),uo=X("== === != !== * & | ^"),n(xe,function(t,r){if(!uo[t.operator]||!t.right.is_constant()||t.left.is_constant()||t.left instanceof xe&&nt[t.left.operator]>=nt[t.operator]||k(),r.option("sequences")){var e=t.lift_sequences(r);if(e!==t)return e.optimize(r)}if(r.option("assignments")&&We[t.operator]){var n,i=xr(t.left,r),e=t.right;if(i instanceof Ie&&e instanceof we&&"="==e.operator&&i.equals(e.left))return i=i.clone(),n=Ve(we,t,{operator:"=",left:i,right:Ve(xe,t,{operator:t.operator,left:t.left,right:e.right})}),i.fixed&&(i.fixed=function(){return n.right},i.fixed.assigns=[n]),(e=i.definition()).references.push(i),e.replaced++,n.optimize(r)}if(r.option("comparisons"))switch(t.operator){case"===":case"!==":if(mi(t.left,r)&&t.right.is_defined(r))return qe.warn("Expression always defined [{start}]",t),Ge(t,[t.right,Ve("==="==t.operator?le:B,t)]).optimize(r);var o=!0;(t.left.is_string(r)&&t.right.is_string(r)||t.left.is_number(r)&&t.right.is_number(r)||t.left.is_boolean(r)&&t.right.is_boolean(r)||Sr(r,t.left)&&t.left.equals(t.right))&&(t.operator=t.operator.slice(0,2));case"==":case"!=":if(!o&&mi(t.left,r))t.left=Ve(E,t.left);else if(r.option("typeofs")&&t.left instanceof U&&"undefined"==t.left.value&&t.right instanceof Re&&"typeof"==t.right.operator)((s=t.right.expression)instanceof Ie?!s.is_declared(r):s instanceof $e&&r.option("ie"))||(t.right=s,t.left=Ve(Be,t.left).optimize(r),2==t.operator.length&&(t.operator+="="));else if(t.left instanceof Ie&&t.right instanceof Ie&&t.left.definition()===t.right.definition()&&br(t.left))return Ve("="==t.operator[0]?B:le,t).optimize(r);break;case"&&":case"||":var s,o=t.left;if(o instanceof xe&&(o.operator==("&&"==t.operator?"!==":"===")&&t.right instanceof xe&&o.operator==t.right.operator&&(mi(o.left,r)&&t.right.left instanceof E||o.left instanceof E&&mi(t.right.left,r)))){if((s=(s=o.right)instanceof we&&"="==s.operator?s.left:s).has_side_effects(r))break;if(s.equals(t.right.right))return o.operator=o.operator.slice(0,-1),o.left=Ve(E,t),o}}var a,f,c=!1,u=r.parent();if(r.option("booleans")){i=xr(t.left,r);if(We[t.operator]&&!i.has_side_effects(r)){if(i.equals(t.right))return Qt(u,r.self(),t.left).optimize(r);or(r,i)}c=r.in_boolean_context()}if(c)switch(t.operator){case"+":var l=t.left.evaluate(r,!0);if(l&&"string"==typeof l||(l=t.right.evaluate(r,!0))&&"string"==typeof l){qe.warn("+ in boolean context always true [{start}]",t);l=[];if(t.left.evaluate(r)instanceof qe&&l.push(t.left),t.right.evaluate(r)instanceof qe&&l.push(t.right),l.length<2)return l.push(Ve(B,t)),Ge(t,l).optimize(r);t.truthy=!0}break;case"==":if(t.left instanceof U&&""==t.left.value&&t.right.is_string(r))return Ve(Re,t,{operator:"!",expression:t.right}).optimize(r);break;case"!=":if(t.left instanceof U&&""==t.left.value&&t.right.is_string(r))return t.right.optimize(r)}if(r.option("comparisons")&&t.is_boolean(r)){if("Binary"!=u.TYPE){e=Ve(Re,t,{operator:"!",expression:t.negate(r)});if(ki(r,t,e)===e)return e}switch(t.operator){case">":k("<");break;case">=":k("<=")}}if(r.option("conditionals")&&We[t.operator]&&(t.left instanceof xe&&t.operator==t.left.operator&&(a=(e=Ve(xe,t,{operator:t.operator,left:t.left.right,right:t.right})).transform(r),e!==a)&&(t.left=t.left.left,t.right=a),(p=t.right.tail_node())instanceof xe)&&t.operator==p.operator&&kr(t,r),r.option("strings")&&"+"==t.operator){if(t.right instanceof U&&""==t.right.value&&t.left.is_string(r))return t.left.optimize(r);if(t.left instanceof U&&""==t.left.value&&t.right.is_string(r))return t.right.optimize(r);if(t.left instanceof xe&&"+"==t.left.operator&&t.left.left instanceof U&&""==t.left.left.value&&t.right.is_string(r)&&(t.left.right.is_constant()||!t.right.has_side_effects(r)))return t.left=t.left.right,t.optimize(r);(p=t.right.tail_node())instanceof xe&&t.operator==p.operator&&(t.left.is_string(r)&&p.is_string(r)||p.left.is_string(r)&&(t.left.is_constant()||!p.right.has_side_effects(r)))&&kr(t,r)}if(r.option("evaluate")){var p,d=!0;switch(t.operator){case"&&":if(!(v=rr(r,t.left)))return qe.warn("Condition left of && always false [{start}]",t),Qt(u,r.self(),t.left).optimize(r);if(!(v instanceof qe))return qe.warn("Condition left of && always true [{start}]",t),Ge(t,[t.left,t.right]).optimize(r);if(t.right.evaluate(r,!0)){if((c||"&&"==u.operator&&u.left===r.self())&&!(t.right.evaluate(r)instanceof qe))return qe.warn("Dropping side-effect-free && [{start}]",t),t.left.optimize(r)}else{if(c&&!(t.right.evaluate(r)instanceof qe))return qe.warn("Boolean && always false [{start}]",t),Ge(t,[t.left,Ve(le,t)]).optimize(r);t.falsy=!0}if("||"==t.left.operator)if(!(_=rr(r,t.left.right)))return Ve(Te,t,{condition:t.left.left,consequent:t.right,alternative:t.left.right}).optimize(r);break;case"??":var h=!0;case"||":var _,v=rr(r,t.left,h);if(h?null==v:!v)return qe.warn("Condition left of {operator} always {value} [{start}]",{operator:t.operator,value:h?"nullish":"false",start:t.start}),Ge(t,[t.left,t.right]).optimize(r);if(!(v instanceof qe))return qe.warn("Condition left of {operator} always {value} [{start}]",{operator:t.operator,value:h?"defined":"true",start:t.start}),Qt(u,r.self(),t.left).optimize(r);if(h||!(v=t.right.evaluate(r,!0))||v instanceof qe){if((c||"||"==u.operator&&u.left===r.self())&&!t.right.evaluate(r))return qe.warn("Dropping side-effect-free {operator} [{start}]",t),t.left.optimize(r)}else{if(c&&!(t.right.evaluate(r)instanceof qe))return qe.warn("Boolean || always true [{start}]",t),Ge(t,[t.left,Ve(B,t)]).optimize(r);t.truthy=!0}if(!h&&"&&"==t.left.operator)if((_=rr(r,t.left.right))&&!(_ instanceof qe))return Ve(Te,t,{condition:t.left.left,consequent:t.left.right,alternative:t.right}).optimize(r);break;case"+":if((t=(t=t.left instanceof T&&t.right instanceof xe&&"+"==t.right.operator&&t.right.left instanceof T&&t.right.is_string(r)?Ve(xe,t,{operator:"+",left:Ve(U,t.left,{value:""+t.left.value+t.right.left.value,start:t.left.start,end:t.right.left.end}),right:t.right.right}):t).right instanceof T&&t.left instanceof xe&&"+"==t.left.operator&&t.left.right instanceof T&&t.left.is_string(r)?Ve(xe,t,{operator:"+",left:t.left.left,right:Ve(U,t.right,{value:""+t.left.right.value+t.right.value,start:t.left.right.start,end:t.right.end})}):t).right instanceof Re&&"-"==t.right.operator&&t.left.is_number(r)){t=Ve(xe,t,{operator:"-",left:t.left,right:t.right.expression});break}if(t.left instanceof Re&&"-"==t.left.operator&&S()&&t.right.is_number(r)){t=Ve(xe,t,{operator:"-",left:t.right,right:t.left.expression});break}if(r.option("unsafe_math")&&t.left instanceof xe&&nt[t.left.operator]==nt[t.operator]&&t.right.is_constant()&&(t.right.is_boolean(r)||t.right.is_number(r))&&t.left.is_number(r)&&!t.left.right.is_constant()&&(t.left.left.is_boolean(r)||t.left.left.is_number(r))){t=Ve(xe,t,{operator:t.left.operator,left:Ve(xe,t,{operator:t.operator,left:t.right,right:t.left.left}),right:t.left.right});break}case"-":if(t.right instanceof Re&&"-"==t.right.operator&&t.left.is_number(r)&&t.right.expression.is_number(r)){t=Ve(xe,t,{operator:"+",left:t.left,right:t.right.expression});break}case"*":case"/":d=r.option("unsafe_math"),"+"!=t.operator&&["left","right"].forEach(function(e){var n=t[e];n instanceof Re&&"+"==n.operator&&((n=n.expression).is_boolean(r)||n.is_number(r)||n.is_string(r))&&(t[e]=n)});case"&":case"|":case"^":"-"==t.operator||"/"==t.operator||!t.left.is_boolean(r)&&!t.left.is_number(r)||!t.right.is_boolean(r)&&!t.right.is_number(r)||!S()||t.left instanceof xe&&t.left.operator!=t.operator&&nt[t.left.operator]>=nt[t.operator]||(t=ki(r,t,Ve(xe,t,{operator:t.operator,left:t.right,right:t.left}),t.right instanceof T&&!(t.left instanceof T))),d&&t.is_number(r)&&(!(t.right instanceof xe&&"%"!=t.right.operator&&nt[t.right.operator]==nt[t.operator]&&t.right.is_number(r)&&("+"!=t.operator||t.right.left.is_boolean(r)||t.right.left.is_number(r)))||"-"==t.operator&&t.left.is_negative_zero()||!t.right.left.is_constant_expression()&&t.right.right.has_side_effects(r)||(v=t.right.right,f=!1,v.walk(new Ye(function(e){if(f)return!0;if(e instanceof we){if(e.left instanceof $e)return f=!0}else if(e instanceof Mn&&ft[e.operator]&&e.expression instanceof $e)return f=!0})),f)||("+"!=(t=Ve(xe,t,{operator:y(t.operator,t.right.operator),left:Ve(xe,t.left,{operator:t.operator,left:t.left,right:t.right.left,start:t.left.start,end:t.right.left.end}),right:t.right.right})).operator||t.right.is_boolean(r)||t.right.is_number(r)||(t.right=Ve(Re,t.right,{operator:"+",expression:t.right}))),t.right instanceof T)&&t.left instanceof xe&&"%"!=t.left.operator&&nt[t.left.operator]==nt[t.operator]&&t.left.is_number(r)&&(t.left.left instanceof T?(i=w(t.operator,t.left.left,t.right,{start:t.left.left.start,end:t.right.end}),t=w(t.left.operator,Di(r,i),t.left.right,t)):t.left.right instanceof T&&(h=y(t.left.operator,t.operator),!(p=Di(r,w(h,t.left.right,t.right,t.left))).is_constant()||"-"==t.left.operator&&0!=t.right.value&&0==+p.value&&t.left.left.is_negative_zero()||(t=w(t.left.operator,t.left.left,p,t))));break;case"instanceof":if(pt(t.right))return Ge(t,[t,Ve(le,t)]).optimize(r)}if(!(u instanceof Re&&"delete"==u.operator)){if(t.left instanceof Ce&&!t.right.is_constant())switch(t.operator){case"+":if(0==t.left.value){if(t.right.is_boolean(r))return Ve(Re,t,{operator:"+",expression:t.right}).optimize(r);if(t.right.is_number(r)&&!t.right.is_negative_zero())return t.right}break;case"*":if(1==t.left.value)return Ve(Re,t,{operator:"+",expression:t.right}).optimize(r)}if(t.right instanceof Ce&&!t.left.is_constant())switch(t.operator){case"+":if(0==t.right.value){if(t.left.is_boolean(r))return Ve(Re,t,{operator:"+",expression:t.left}).optimize(r);if(t.left.is_number(r)&&!t.left.is_negative_zero())return t.left}break;case"-":if(0==t.right.value)return Ve(Re,t,{operator:"+",expression:t.left}).optimize(r);break;case"/":if(1==t.right.value)return Ve(Re,t,{operator:"+",expression:t.left}).optimize(r)}}}if(r.option("typeofs"))switch(t.operator){case"&&":ir(t.left,t.right,null);break;case"||":ir(t.left,null,t.right)}if(r.option("unsafe")){var m=x(t.right);if(c&&m&&("=="==t.operator||"!="==t.operator)&&t.left instanceof Ce&&0==t.left.value)return("=="==t.operator?Ve(Re,t,{operator:"!",expression:t.right}):t.right).optimize(r);var g=x(t.left);if(r.option("comparisons")&&function(){switch(t.operator){case"<=":return m&&t.left instanceof Ce&&0==t.left.value;case"<":if(g&&t.right instanceof Ce&&0==t.right.value)return 1;case"==":case"!=":return m?t.left instanceof Ce&&-1==t.left.value||t.left instanceof Re&&"-"==t.left.operator&&t.left.expression instanceof Ce&&1==t.left.expression.value:void 0}}()){var b=Ve(Re,t,{operator:"!",expression:Ve(Re,t,{operator:"~",expression:g?t.left:t.right})});switch(t.operator){case"<":if(g)break;case"<=":case"!=":b=Ve(Re,t,{operator:"!",expression:b})}return b.optimize(r)}}return Di(r,t);function y(e,n){switch(e){case"-":return"+"==n?"-":"+";case"/":return"*"==n?"/":"*";default:return n}}function w(e,n,t,i){return"+"==e&&(n.is_boolean(r)||n.is_number(r)||(n=Ve(Re,n,{operator:"+",expression:n})),t.is_boolean(r)||t.is_number(r)||(t=Ve(Re,t,{operator:"+",expression:t}))),Ve(xe,i,{operator:e,left:n,right:t})}function x(e){return"Call"==e.TYPE&&e.expression instanceof pn&&co[e.expression.property]}function S(){return t.left.is_constant()||t.right.is_constant()||!t.left.has_side_effects(r)&&!t.right.has_side_effects(r)}function k(e){S()&&(e&&(t.operator=e),e=t.left,t.left=t.right,t.right=e)}}),n(N,function(e){return e}),n(Ie,function(t,e){if(!e.option("ie")&&ci(t)&&(!t.scope.resolve().uses_with||!e.find_parent(Rn)))switch(t.name){case"undefined":return Ve(Be,t).optimize(e);case"NaN":return Ve(b,t).optimize(e);case"Infinity":return Ve(m,t).optimize(e)}var n=e.parent();if(e.option("reduce_vars")&&st(e.self(),n)!==e.self()){var i,r,o,s,a,f,c,u,l,p=t.definition(),d=t.fixed_value(),n=p.single_use&&!(n instanceof ke&&n.is_expr_pure(e));if(n)if(pt(d)){if(p.scope===t.scope.resolve(!0)&&!p.in_loop||e.option("reduce_funcs")&&1!=p.escaped.depth&&!d.inlined)if(p.redefined())n=!1;else if(Tr(e,p,d))n=!1;else if(d.name&&d.name.definition()!==p)n=!1;else if(d.parent_scope!==t.scope||at(p))if(mr(d,e)){if("f"==(n=d.is_constant_expression(t.scope)))for(var h=t.scope;(h instanceof bn||h instanceof yn)&&(h.inlined=!0),h=h.parent_scope;);}else n=!1;else(d.name&&("await"==d.name.name&&Gn(d)||"yield"==d.name.name&&Un(d))||d.has_side_effects(e)||e.option("ie")&&d instanceof en)&&(n=!1);else n=!1;n&&(d.parent_scope=t.scope)}else(!d||0<p.recursive_refs||!d.is_constant_expression()||d.drop_side_effect_free(e))&&(n=!1);if(n){if(p.single_use=!1,d._squeezed=!0,d.single_use=!0,pt(d=(d=d instanceof fe?Ui(d):d)instanceof bn?Vi(d):d)){var _=[],h=t.scope;do{if(_.push(h),h===p.scope)break}while(h=h.parent_scope);d.enclosed.forEach(function(e){if(!d.variables.has(e.name))for(var n=0;n<_.length;n++){var t=_[n];if(!be(t.enclosed,e))return;t.var_names().set(e.name,!0)}})}return 0<p.recursive_refs?(i=(l=d.clone(!0)).name.definition(),r=l.variables.get(l.name.name),o=r&&r.orig[0],n=l instanceof en?(s="def_function",$):(s="def_variable",ve),o instanceof n||(((o=Ve(n,l.name)).scope=l).name=o,(r=l[s](o)).recursive_refs=p.recursive_refs),l.walk(new Ye(function(e){var n,t;e instanceof qn?e!==o&&((n=e.definition()).orig.push(e),n.eliminated++):e instanceof Ie&&((n=e.definition())===i?e.thedef=n=r:(n.single_use=!1,pt(t=e.fixed_value())&&t.name&&t.name.definition()===n&&n.scope===t.name.scope&&d.variables.get(t.name.name)===n&&(t.name=t.name.clone(),e.thedef=n=l.variables.get(t.name.name)||l[s](t.name))),n.references.push(e))}))):(d instanceof je?(e.push(d),l=d.optimize(e),e.pop()):l=d.optimize(e),l=l.transform(new Hn(function(e,n){return e instanceof je||n(e=e.clone(),this),e}))),p.replaced++,l}if(d&&!1!==(a=t.fixed||p.fixed).should_replace)if(d instanceof R?at(p)||!Ar(p)||function(e){var n=t.scope;for(;n!==e.scope;){if(n instanceof en)return 1;n=n.parent_scope}}(p)||(f=d):(n=d.evaluate(e,!0))!==d&&"function"!=typeof n&&(null===n||"object"!=typeof n||e.option("unsafe_regexp")&&n instanceof RegExp&&!p.cross_loop&&Ar(p))&&(f=Jt(n,d)),f)if(void 0===a.should_replace&&(n=f.optimize(e).print_to_string().length,v(d)||(n=Math.min(n,d.print_to_string().length)),c=p.name.length,e.option("unused")&&!e.exposed(p)&&(u=p.references.length-p.replaced-p.assignments,u=Math.min(u,p.references.filter(function(e){return e.fixed===a}).length),c+=(c+2+n)/Math.max(1,u)),a.should_replace=n-Math.floor(c)<e.eval_threshold),a.should_replace)return v(d)?(l=f.optimize(e))===f&&(l=l.clone(!0)):(l=xi(f.optimize(e),d))!==f&&l!==d||(l=l.clone(!0)),p.replaced++,l}return t;function v(e){var n;return e.walk(new Ye(function(e){if(n=e instanceof Ie?!0:n)return!0})),n}}),n(Fn,function(e,t){if(!t.option("templates"))return e;var i=e.tag;if(!i||Er(t,i)){for(var n,r=[],o=[],s=0;s<e.strings.length;s++){var a,f=e.strings[s];if(i||(a=Dr(f))&&(f=d(a)),0<s){var c=e.expressions[s-1],u=function(e){var n=e.evaluate(t);if(n!==e&&!(i&&/\r|\\|`/.test(n)||(n=d(""+n)).length>e.print_to_string().length+"${}".length))return n}(c);if(u){var l,u=o[o.length-1]+u+f;if(i||typeof(l=Dr(u))==n){o[o.length-1]=l?d(l):u;continue}}r.push(c)}o.push(f),i||(n=typeof a)}if(!i&&1<o.length){if(""==o[o.length-1])return Ve(xe,e,{operator:"+",left:Ve(Fn,e,{expressions:r.slice(0,-1),strings:o.slice(0,-1)}).transform(t),right:r[r.length-1]}).optimize(t);if(""==o[0]){for(var p=Ve(xe,e,{operator:"+",left:Ve(U,e,{value:""}),right:r[0]}),s=1;""==o[s]&&s<r.length;s++)p=Ve(xe,e,{operator:"+",left:p,right:r[s]});return ki(t,e,Ve(xe,e,{operator:"+",left:p.transform(t),right:Ve(Fn,e,{expressions:r.slice(s),strings:o.slice(s)}).transform(t)}).optimize(t))}}e.expressions=r,e.strings=o}return Di(t,e);function d(e){return e.replace(/\r|\\|`|\${/g,function(e){return"\\"+("\r"==e?"r":e)})}}),n(Be,function(e,n){if(n.option("unsafe_undefined")){var t=Gt(n).find_variable("undefined");if(t)return(t=Ve(Ie,e,{name:"undefined",scope:t.scope,thedef:t})).is_undefined=!0,t}t=st(n.self(),n.parent());return t&&Or(t,e)?e:Ve(Re,e,{operator:"void",expression:Ve(Ce,e,{value:0})})}),n(m,function(e,n){var t=st(n.self(),n.parent());return(!t||!Or(t,e))&&(!n.option("keep_infinity")||t||Gt(n).find_variable("Infinity"))?Ve(xe,e,{operator:"/",left:Ve(Ce,e,{value:1}),right:Ve(Ce,e,{value:0})}):e}),n(b,function(e,n){var t=st(n.self(),n.parent());return(!t||!Or(t,e))&&(t||Gt(n).find_variable("NaN"))?Ve(xe,e,{operator:"/",left:Ve(Ce,e,{value:0}),right:Ve(Ce,e,{value:0})}):e}),lo=X("+ - * / % >> << >>> | ^ &"),po=X("* | ^ &"),n(we,function(o,s){if(s.option("dead_code"))if(o.left instanceof $e){if("="==o.operator){if(o.redundant)return e=[o.left.expression],o.left instanceof En&&e.push(o.left.property),e.push(o.right),Ge(o,e).optimize(s);if(o.left.equals(o.right)&&!o.left.has_side_effects(s))return o.right;var e=o.left.expression;if(e instanceof Oe||!s.has_directive("use strict")&&e instanceof T&&!e.may_throw_on_access(s))return o.left instanceof pn?o.right:Ge(o,[o.left.property,o.right]).optimize(s)}}else if(o.left instanceof Ie&&vt(o.left,s)){if("="==o.operator&&o.left.equals(o.right)&&!((f=s.parent())instanceof Re&&"delete"==f.operator))return o.right;if(o.left.is_immutable())return d();var n,t=o.left.definition(),a=t.scope.resolve(),i=a===s.find_parent(Oe),r=0,f=s.self();if(!a.uses_arguments||!at(t)||s.has_directive("use strict"))do{if(n=f,(f=s.parent(r++))instanceof we){if(f.left instanceof Ie&&f.left.definition()===t){if(l(r,f,!i))break;return d(t)}if(f.left.match_symbol(function(e){if(e instanceof $e)return!0}))break}else{if(f instanceof hn){if(!i)break;if(l(r,f))break;if(qr(a,[t]))break;return d(t)}if(f instanceof ze){if(!i)break;if(qr(a,[t]))break;do{if(c=f,(f=s.parent(r++))===a&&di(f.body,c))return d(t)}while(c=c,(u=f)instanceof Se||u instanceof oe||u instanceof O?di(u.body,c):u instanceof De?u.body===c||u.alternative===c:u instanceof zn?u.bfinally?u.bfinally===c:u.bcatch===c:void 0);break}if(f instanceof He&&f.name instanceof qn&&f.name.definition()===t){if(l(r,f))break;return d(t)}}}while(function(e,n){if(n instanceof xe)switch(e){case n.left:return n.right.is_constant_expression(a);case n.right:return 1;default:return}if(n instanceof Te)switch(e){case n.condition:return n.consequent.is_constant_expression(a)&&n.alternative.is_constant_expression(a);case n.consequent:case n.alternative:return 1;default:return}if(n instanceof Pe){var t=n.expressions,i=t.indexOf(e);if(i<0)return;for(var r=t.length;--r>i;)if(!t[r].is_constant_expression(a))return;return 1}return n instanceof Re}(n,f))}var c,u;if(s.option("sequences")){var e=o.lift_sequences(s);if(e!==o)return e.optimize(s)}if(s.option("assignments")){if("="==o.operator&&o.left instanceof Ie&&o.right instanceof xe){if(o.right.left instanceof Ie&&o.right.left.name==o.left.name&&lo[o.right.operator])return p(o.right.right);if(o.right.right instanceof Ie&&o.right.right.name==o.left.name&&po[o.right.operator]&&!o.right.left.has_side_effects(s))return p(o.right.left)}if(("-="==o.operator||"+="==o.operator&&(o.left.is_boolean(s)||o.left.is_number(s)))&&o.right instanceof Ce&&1==o.right.value)return e=o.operator.slice(0,-1),Ve(Re,o,{operator:e+e,expression:o.left})}return Di(s,o);function l(e,n,t){var i=o.right,r=(o.right=Ve(E,i),n.may_throw(s));return o.right=i,Wt(s,e,n,a,r,t)}function p(e){var n=o.left.fixed;return n&&(n.to_binary=bt(function(e){return e.left},n)),Ve(we,o,{operator:o.right.operator+"=",left:o.left,right:e})}function d(e){return e&&(e.fixed=!1),("="!=o.operator?Ve(xe,o,{operator:o.operator.slice(0,-1),left:o.left,right:o.right}):Qt(s.parent(),o,o.right)).optimize(s)}}),n(Te,function(s,n){if(n.option("sequences")&&s.condition instanceof Pe)return e=s.condition.expressions.slice(),(c=s.clone()).condition=e.pop(),e.push(c),Ge(s,e).optimize(n);if(n.option("conditionals")){var a=s.condition;if(n.option("booleans")&&!a.has_side_effects(n)&&or(n,a),!(a=rr(n,a)))return qe.warn("Condition always false [{start}]",s),Ge(s,[s.condition,s.alternative]).optimize(n);if(!(a instanceof qe))return qe.warn("Condition always true [{start}]",s),Ge(s,[s.condition,s.consequent]).optimize(n);var e=H(n),t=a.negate(n,e),e=((e?Si:xi)(a,t)===t&&(s=Ve(Te,s,{condition:t,consequent:s.alternative,alternative:s.consequent}),t=a,a=s.condition),s.consequent),i=s.alternative,r=xr(a,n);if(Sr(n,r)){if(r.equals(e))return Ve(xe,s,{operator:"||",left:a,right:i}).optimize(n);if(r.equals(i))return Ve(xe,s,{operator:"&&",left:a,right:e}).optimize(n)}r=e.tail_node();if(r instanceof we){var o="="==r.operator,f=o?i.tail_node():i;if((o||e===r)&&f instanceof we&&r.operator==f.operator&&r.left.equals(f.left)&&(o&&r.left instanceof Ie||!a.has_side_effects(n)&&g(e)&&g(i)))return Ve(we,s,{operator:r.operator,left:r.left,right:Ve(Te,s,{condition:a,consequent:b(e),alternative:b(i)})})}f=i.tail_node();if(r.equals(f))return Ge(s,e.equals(i)?[a,e]:[Ve(Te,s,{condition:a,consequent:y(e),alternative:y(i)}),f]).optimize(n);var c,u,o=function e(n,t,i){var r=n.tail_node();var o=t.tail_node();if(!m(r,o))return!i&&Ve(Te,s,{condition:a,consequent:n,alternative:t});i=r.clone();n=v(n,r,"expression");t=v(t,o,"expression");o=e(n,t);r.expression instanceof Pe&&(o=Qt(r,r.expression,o));i.expression=o;return i}(e,i,!0);if(o)return o;if(e instanceof ke&&i.TYPE==e.TYPE&&0<=(o=_(e,i))&&e.expression.equals(i.expression)&&!a.has_side_effects(n)&&!e.expression.has_side_effects(n))return c=e.clone(),u=e.args[o],c.args[o]=u instanceof Me?Ve(Me,s,{expression:Ve(Te,s,{condition:a,consequent:u.expression,alternative:i.args[o].expression})}):Ve(Te,s,{condition:a,consequent:u,alternative:i.args[o]}),c;if(r instanceof Te&&r.alternative.equals(i))return Ve(Te,s,{condition:Ve(xe,s,{left:a,operator:"&&",right:v(e,r,"condition")}),consequent:r.consequent,alternative:Zt(r.alternative,i)});if(r instanceof Te&&r.consequent.equals(i))return Ve(Te,s,{condition:Ve(xe,s,{left:t,operator:"||",right:v(e,r,"condition")}),consequent:Zt(r.consequent,i),alternative:r.alternative});if(f instanceof Te&&e.equals(f.consequent))return Ve(Te,s,{condition:Ve(xe,s,{left:a,operator:"||",right:v(i,f,"condition")}),consequent:Zt(e,f.consequent),alternative:f.alternative});if(f instanceof Te&&e.equals(f.alternative))return Ve(Te,s,{condition:Ve(xe,s,{left:t,operator:"&&",right:v(i,f,"condition")}),consequent:f.consequent,alternative:Zt(e,f.alternative)});if(r instanceof xe&&"&&"==r.operator&&r.right.equals(i))return Ve(xe,s,{operator:"&&",left:Ve(xe,s,{operator:"||",left:t,right:v(e,r,"left")}),right:Zt(r.right,i)}).optimize(n);if(r instanceof xe&&"||"==r.operator&&r.right.equals(i))return Ve(xe,s,{operator:"||",left:Ve(xe,s,{operator:"&&",left:a,right:v(e,r,"left")}),right:Zt(r.right,i)}).optimize(n);if(f instanceof xe&&"&&"==f.operator&&f.right.equals(e))return Ve(xe,s,{operator:"&&",left:Ve(xe,s,{operator:"||",left:a,right:v(i,f,"left")}),right:Zt(e,f.right)}).optimize(n);if(f instanceof xe&&"||"==f.operator&&f.right.equals(e))return Ve(xe,s,{operator:"||",left:Ve(xe,s,{operator:"&&",left:t,right:v(i,f,"left")}),right:Zt(e,f.right)}).optimize(n);var l=n.option("booleans")&&n.in_boolean_context();if(d(e))return h(i)?p(a):Ve(xe,s,{operator:"||",left:p(a),right:i}).optimize(n);if(h(e))return d(i)?p(a.negate(n)):Ve(xe,s,{operator:"&&",left:p(a.negate(n)),right:i}).optimize(n);if(d(i))return Ve(xe,s,{operator:"||",left:p(a.negate(n)),right:e}).optimize(n);if(h(i))return Ve(xe,s,{operator:"&&",left:p(a),right:e}).optimize(n);n.option("typeofs")&&ir(a,e,i)}return s;function p(e){return e.is_boolean(n)?e:Ve(Re,e,{operator:"!",expression:e.negate(n)})}function d(e){return e instanceof B||l&&e instanceof T&&e.value||e instanceof Re&&"!"==e.operator&&e.expression instanceof T&&!e.expression.value}function h(e){return e instanceof le||l&&(e instanceof T&&!e.value||e instanceof Re&&"void"==e.operator&&!e.expression.has_side_effects(n))||e instanceof Re&&"!"==e.operator&&e.expression instanceof T&&e.expression.value}function _(e,n){var t=e.args,i=n.args,r=t.length;if(r!=i.length)return-2;for(var o=0;o<r;o++)if(!t[o].equals(i[o])){if(t[o]instanceof Me!=i[o]instanceof Me)return-3;for(var s=o+1;s<r;s++)if(!t[s].equals(i[s]))return-2;return o}return-1}function v(e,n,t){var i;return e===n?n[t]:((i=e.expressions.slice(0,-1)).push(n[t]),Ge(e,i))}function m(e,n){var t,i;if(e.TYPE==n.TYPE&&e.optional==n.optional)return e instanceof ke?-1!=_(e,n)?void 0:"Call"!=e.TYPE||!(e.expression instanceof $e||n.expression instanceof $e)||m(e.expression,n.expression):e instanceof $e?(t=e.property,i=n.property,(t instanceof qe?t.equals(i):t==i)&&!(e.expression instanceof W||n.expression instanceof W)):void 0}function g(e){return e===e.tail_node()||Le(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(n)})}function b(e){var n;return e instanceof Pe?((n=e.expressions.slice()).push(n.pop().right),Ge(e,n)):e.right}function y(e){return e instanceof Pe?Ge(e,e.expressions.slice(0,-1)):Ve(Ce,e,{value:0})}}),n(l,function(e,n){return n.option("booleans")?n.in_boolean_context()?Ve(Ce,e,{value:+e.value}):(n=n.parent())instanceof xe&&("=="==n.operator||"!="==n.operator)?(qe.warn("Non-strict equality against boolean: {operator} {value} [{start}]",{operator:n.operator,value:e.value,start:n.start}),Ve(Ce,e,{value:+e.value})):Ve(Re,e,{operator:"!",expression:Ve(Ce,e,{value:1-e.value})}):e}),n(Me,function(e,n){var t=e.expression;return n.option("spreads")&&t instanceof ye&&!(n.parent()instanceof Sn)?Kn.splice(t.elements.map(function(e){return e instanceof pe?Ve(Be,e).optimize(n):e})):e}),n(En,function(e,t){var n=e.expression,i=e.property,r=pr(e,t);if(r)return r;if(t.option("properties")){var o=i.evaluate(t);if(o!==i){"string"==typeof o&&("undefined"==o?o=void 0:(_=parseFloat(o)).toString()==o&&(o=_)),i=e.property=xi(i,Jt(o,i).transform(t));var s=""+o;if(it(s)&&s.length<=i.print_to_string().length+1)return Ve(pn,e,{optional:e.optional,expression:n,property:s,quoted:!0}).optimize(t)}}var a,f,c,u,r=t.parent(),l=st(t.self(),r);if(t.option("arguments")&&n instanceof Ie&&ht(a=n.definition())&&!n.in_arg&&i instanceof Ce&&Math.floor(h=i.value)==h&&(f=a.scope)===function(){var e,n=0;for(;e=t.parent(n++);)if(e instanceof Oe){if(e instanceof Ke)return;if(!Ln(e))return c=t.parent(n),e}}()&&f.uses_arguments<(l?2:3)){r instanceof Re&&"delete"==r.operator&&(a.deleted||(a.deleted=[]),a.deleted[h]=!0);var p=f.argnames[h];if(a.deleted&&a.deleted[h])p=null;else if(p)(!(p instanceof Ne&&"await"!=p.name&&n.scope.find_variable(p.name)===(d=p.definition()))||(t.has_directive("use strict")||f.name||f.rest||!(c instanceof ke&&h<c.args.length&&Le(c.args.slice(0,h+1),function(e){return!(e instanceof Me)}))||!Le(f.argnames,function(e){return e instanceof Ne}))&&(y()||d.assignments||1<d.orig.length))&&(p=null);else if((l||!y())&&h<f.argnames.length+5&&t.drop_fargs(f,c)&&!f.rest)for(;h>=f.argnames.length;)p=f.make_var(Ne,f,"argument_"+f.argnames.length),f.argnames.push(p);if(p&&me(function(e){return e.name===p.name},f.argnames)===p)return l&&a.reassigned--,(d=Ve(Ie,p)).reference(),p.unused=void 0,d}if(l)return e;if(t.option("sequences")&&"Call"!=r.TYPE&&!(r instanceof vn&&r.init===e)){var d=dr(e);if(d!==e)return d.optimize(t)}if(o!==i&&(l=e.flatten_object(s,t))&&(n=e.expression=l.expression,i=e.property=l.property),t.option("properties")&&t.option("side_effects")&&i instanceof Ce&&n instanceof ye&&Le(u=n.elements,function(e){return!(e instanceof Me)})){var h,r=u[h=i.value];if(Cr(r,t)){for(var _,v=r instanceof pe,m=!v,g=[],b=u.length;--b>h;)(_=u[b].drop_side_effect_free(t))&&(g.unshift(_),m)&&_.has_side_effects(t)&&(m=!1);for(m||g.unshift(r);0<=--b;)(_=u[b].drop_side_effect_free(t))?g.unshift(_):v?g.unshift(Ve(pe,u[b])):h--;return m?(g.push(r),Ge(e,g).optimize(t)):Ve(En,e,{expression:Ve(ye,n,{elements:g}),property:Ve(Ce,i,{value:h})})}}return Di(t,e);function y(){return!t.option("reduce_vars")||a.reassigned}}),yn.DEFMETHOD("contains_super",function(){var n=!1,t=this;return t.walk(new Ye(function(e){return!!n||(e instanceof W?n=!0:e!==t&&e instanceof je&&!Ln(e)||void 0)})),n}),(e=function(e,n){e.DEFMETHOD("contains_this",n)})(h,Ue),e(_,Ue),e(qe,function(){var n=!1,t=this;return t.walk(new Ye(function(e){return!!n||(e instanceof R?n=!0:e!==t&&e instanceof je&&!Ln(e)||void 0)})),n}),$e.DEFMETHOD("flatten_object",function(e,n){if(n.option("properties")&&"__proto__"!==e){var t=this.expression;if(t instanceof Sn)for(var i=t.properties,r=i.length;0<=--r;){var o=i[r];if(o.key===e){if(!Le(i,$r))return;if(!Cr(o.value,n))return;for(var s,a=[],f=0;f<i.length;f++){var c=i[f].value;if(i[f]instanceof D){var u,l,p,d=!(c.uses_arguments||Un(c)||c.contains_this());if(d&&(u=u||n.find_parent(je),l=_r(n,u),c.each_argname(function(e){l[e.name]&&(d=!1)})),d)p=Gn(c)?_:h;else{if(!(r!=f||(s=n.parent())instanceof ke&&s.expression===this))return;p=c.CTOR}c=Ve(p,c)}a.push(c)}return Ve(En,this,{expression:Ve(ye,t,{elements:a}),property:Ve(Ce,this,{value:r})})}}}}),n(pn,function(e,n){"arguments"!=e.property&&"caller"!=e.property||qe.warn("Function.prototype.{property} not supported [{start}]",e);var t=n.parent();if(st(n.self(),t))return e;var i=pr(e,n);if(i)return i;if(n.option("sequences")&&"Call"!=t.TYPE&&!(t instanceof vn&&t.init===e)){i=dr(e);if(i!==e)return i.optimize(n)}if(n.option("unsafe_proto")&&e.expression instanceof pn&&"prototype"==e.expression.property){var r=e.expression.expression;if(ci(r))switch(r.name){case"Array":e.expression=Ve(ye,e.expression,{elements:[]});break;case"Function":e.expression=Ve(mn,e.expression,{argnames:[],body:[]}).init_vars(r.scope);break;case"Number":e.expression=Ve(Ce,e.expression,{value:0});break;case"Object":e.expression=Ve(Sn,e.expression,{properties:[]});break;case"RegExp":e.expression=Ve(G,e.expression,{value:/t/});break;case"String":e.expression=Ve(U,e.expression,{value:""})}}t=e.flatten_object(e.property,n);return t?t.optimize(n):Di(n,e)}),n(fn,function(e,n){return n.option("rests")&&e.rest instanceof fn?Ve(fn,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),n(cn,function(e,n){var t;return n.option("objects")&&(t=e.key)instanceof qe&&(t=t.evaluate(n))!==e.key&&(e.key=""+t),e}),n(Sn,function(t,i){var r,o,s,a,f,c,u,e;return i.option("objects")&&(s=o=r=!1,a=i.has_directive("use strict"),f=[],c=new Wn,u=[],t.properties.forEach(function(e){if(!(e instanceof Me))return p(e);o=!0;var n=e.expression;i.option("spreads")&&n instanceof Sn&&Le(n.properties,function(e){return!(e instanceof S||e instanceof Me||!("__proto__"!==e.key||e instanceof q)&&e.value.has_side_effects(i))})?(r=!0,n.properties.forEach(function(e){var n=e.key,t=e instanceof q;if("__proto__"===n){if(!t)return;n=Jt(n,e)}p(t?Ve(kn,e,{key:n,value:Ve(Be,e).optimize(i)}):e)})):(s=!0,l(),u.push(e))}),l(),r)?(o&&s&&1==u.length&&(e=u[0])instanceof Tn&&e.key instanceof Ce&&(e.key=""+e.key.value),Ve(Sn,t,{properties:u})):t;function l(){f.forEach(function(e){var n=c.get(e);switch(n.length){case 0:return;case 1:return u.push(n[0])}r=!0;e=a&&!s&&n.pop();u.push(1==n.length?n[0]:Ve(kn,t,{key:n[0].key,value:Ge(t,n.map(function(e){return e.value}))})),e&&u.push(e),n.length=0}),f=[],c=new Wn}function p(e){var n=e.key;n instanceof qe&&(o=!0,(n=n.evaluate(i))===e.key||"__proto__"===n?s=!0:n=e.key=""+n),$r(e)?(e.value.has_side_effects(i)&&l(),f.push(n),c.add(n,e)):(l(),u.push(e)),o&&!s&&"string"==typeof n&&Nr.test(n)&&(s=!0,(e=c.has(n)?c.get(n)[0]:e).key=Ve(Ce,e,{value:+n}))}}),(e=function(e,n){e.DEFMETHOD("try_inline",n)})(qe,ge),e(we,ge),e(Je,function(t,e,n,i){if(t.option("awaits")){var r=this,e=r.expression.try_inline(t,e,n,i,!0);if(e)return n||Gi(e,function(e){e.in_bool=!1;var n=e.value;n instanceof Je||(e.value=Ve(Je,r,{expression:n||Ve(Be,e).transform(t)}))}),Ii(e)?e:Ve(Se,r,{body:[e,Ve(ze,r,{body:Ve(Je,r,{expression:Ve(Ce,r,{value:0})})})]})}}),e(xe,function(n,e,t,i,r){if(void 0!==t){var o=this,s=o.operator;if(We[s]){e=o.right.try_inline(n,e,t,i,r);if(e)return Ve(De,o,{condition:function(e){switch(s){case"&&":return e;case"||":return e.negate(n);case"??":return Ve(xe,o,{operator:"==",left:Ve(E,o),right:e})}}(o.left),body:e,alternative:t?null:Ve(Fe,o,{value:Ve(Be,o).transform(n)})})}}}),e(Se,function(e,n,t,i){if(!t&&this.variables){var r=this.body,o=r.length-1;if(!(o<0)){e=r[o].try_inline(e,this,t,i);if(e)return r[o]=e,this}}}),e(ke,function(i,r,e,o,n){if(!(i.option("inline")<4)){var t=this;if(!t.is_expr_pure(i)){var s=t.expression;if(s instanceof yn&&!(s.name||s.uses_arguments||s.pinned()||Un(s))){var a=Ln(s);if(!(a&&s.value||s.body[0]instanceof x||s.contains_this())){r=r||Gt(i);var f=new Wn;for(f.set("NaN",!0);!(r instanceof je);)r.variables.each(function(e){f.set(e.name,!0)}),r=r.parent_scope;if(Jn(r,i.stack)&&!(r.pinned()&&s.variables.size()>(a?0:1))){if(r instanceof Pn){if(s.variables.size()>(a?0:1)){if(!i.toplevel.vars)return;if(0<s.functions.size()&&!i.toplevel.funcs)return}f.set("arguments",!0)}var c=!n&&Gn(s);if(c){if(!i.option("awaits"))return;if(!Gn(r))return;if(t.may_throw(i))return}var u=r.var_names();if(o=o&&[],s.variables.all(function(e,n){return o&&o.push(e),!f.has(n)&&!u.has(n)||!a&&"arguments"==n&&1==e.orig.length})&&!(o&&0<o.length&&qr(s,o))){var l,p,d,h,_,v=!0;if(Le(s.argnames,function(e){var n=!1,t=new Ye(function(e){return!!n||(e instanceof Ae?jr(s,e.value)?n=!0:(e.name.walk(t),!0):e instanceof cn?e.key instanceof qe&&jr(s,e.key)?n=!0:(e.value.walk(t),!0):e instanceof Ne&&!Le(e.definition().orig,function(e){return!(e instanceof Cn)})?n=!0:void 0)});return e.walk(t),!n&&(e instanceof Ne||(v=!1),!0)})){if(s.rest){if(jr(s,s.rest))return;v=!1}if(e?l=function(e){var n=!1;return e.walk(new Ye(function(e){return!!n||(c&&(e instanceof Je||e instanceof g)||e instanceof Fe?n=!0:e instanceof je||void 0)})),!n}:(n||Gn(s)||Vt(r))&&(l=function(e){var n=!1,t=new Ye(function(e){return!!n||(e instanceof Fe?n=!0:e instanceof je||void 0)});return e.walk(new Ye(function(e){return!!n||(e instanceof zn?(e.bfinally&&Le(e.body,function(e){return e.walk(t),!n})&&e.bcatch&&e.bcatch.walk(t),!0):e instanceof je||void 0)})),!n}),!l||Le(s.body,l))if(vr(s,_r(i,r)))return s.functions.each(function(e,n){r.functions.set(n,e)}),p=[],s.variables.each(function(n,e){var t;!a&&"arguments"==e&&1==n.orig.length||(u.set(e,!0),r.enclosed.push(n),r.variables.set(e,n),n.single_use=!1,!o)||n.references.length==n.replaced||n.orig.length==n.eliminated||1==n.orig.length&&s.functions.has(e)||!Le(n.orig,function(e){return!(e instanceof M||(e instanceof Ne?e.unused||n.scope.resolve()===s:e instanceof I))})||(t=n.orig[0])instanceof he||p.push(Ve(ze,t,{body:zr(i,Fr(t))}))}),d=Object.create(null),h=new Wn,v&&Le(t.args,function(e){return!(e instanceof Me)})?(_=t.args.slice(),s.argnames.forEach(function(e){var n=_.shift();e.unused?n&&p.push(Ve(ze,t,{body:n})):(n=Ve(He,t,{name:e.convert_symbol($n,m),value:n||Ve(Be,t).transform(i)}),e instanceof Ne&&Pr(e.definition(),n),p.push(Ve(ee,t,{definitions:[n]})))}),_.length&&p.push(Ve(ze,t,{body:Ge(t,_)}))):p.push(Ve(ee,t,{definitions:[Ve(He,t,{name:Ve(fn,t,{elements:s.argnames.map(function(e){return e.unused?Ve(pe,e):e.convert_symbol($n,m)}),rest:s.rest&&s.rest.convert_symbol($n,m)}),value:Ve(ye,t,{elements:t.args.slice()})})]})),h.each(function(e,n){n=d[n];[].unshift.apply(n.orig,e),n.eliminated+=e.length}),[].push.apply(p,o?s.body.filter(function(e){var n,t;return!(e instanceof bn&&((t=(n=Ve($n,Fr(e.name))).definition()).fixed=!1,t.orig.push(n),t.eliminated++,p.push(Ve(ee,e,{definitions:[Ve(He,e,{name:n,value:Vi(e,!0)})]})),1))}):s.body),n=Ve(Se,t,{body:p}),e||(c&&Gi(n,function(e){var n=e.value;mi(n)||(e.value=Ve(Je,t,{expression:n}))}),p.push(Ve(Fe,t,{value:Vt(r)?Ve(Be,t).transform(i):null}))),n}}}}}}}function m(e,n){n=n.definition();d[n.id]=n,h.add(n.id,e)}}),e(Te,function(e,n,t,i,r){var o=this.consequent.try_inline(e,n,t,i,r),e=this.alternative.try_inline(e,n,t,i,r);if(o||e)return Ve(De,this,{condition:this.condition,body:o||s(this.consequent),alternative:e||s(this.alternative)});function s(e){return t?Ve(ze,e,{body:e}):Ve(Fe,e,{value:e})}}),e(_n,function(e,n,t,i){var r=this.body.try_inline(e,n,!0,!0),o=(r&&(this.body=r),this.init);return(o=o&&o.try_inline(e,n,!0,i))?(this.init=null,o instanceof Se?(o.body.push(this),o):Ve(Se,o,{body:[o,this]})):r&&this}),e(vn,function(e,n,t,i){var r=this.body.try_inline(e,n,!0,!0),o=(r&&(this.body=r),this.object);if(o instanceof Pe){e=Mr(e,n,!0,i,!1,o,1);if(e)return this.object=o.tail_node(),e.body.push(this),e}return r&&this}),e(De,function(e,n,t,i){var r=this.body.try_inline(e,n,t,i),o=(r&&(this.body=r),this.alternative),t=((o=o&&o.try_inline(e,n,t,i))&&(this.alternative=o),this.condition);if(t instanceof Pe){e=Mr(e,n,!0,i,!1,t,1);if(e)return this.condition=t.tail_node(),e.body.push(this),e}return(r||o)&&this}),e(gn,function(e,n,t,i){e=this.body.try_inline(e,n,!0,!0);if(e)return this.body=e,this}),e(de,function(e,n,t,i){e=this.body.try_inline(e,n,t,i);if(e)return this.body instanceof gn&&e instanceof Se?(n=e.body.pop(),this.body=n,e.body.push(this),e):(this.body=e,this)}),e(y,ge),e(Fe,function(e,n,t,i){var r=this.value;return r&&r.try_inline(e,n,void 0,"try"===i)}),e(Pe,function(e,n,t,i,r){return Mr(e,n,t,i,r,this)}),e(ze,function(e,n,t,i){for(var r=this.body;r instanceof Re;){var o=r.operator;if(ft[o])break;if("void"==o)break;r=r.expression}return(r=t||mi(r)?r:Ve(Re,this,{operator:"void",expression:r})).try_inline(e,n,t||!1,i)}),e(Re,function(t,e,n,i,r){var o=this,s=o.operator;if(!ft[s]){e=o.expression.try_inline(t,e,n=n||"void"!=s?n:!1,i,r);if(e)return n||Gi(e,function(e){e.in_bool=!1;var n=e.value;"void"==s&&mi(n)||(e.value=Ve(Re,o,{operator:s,expression:n||Ve(Be,e).transform(t)}))}),e}}),e(Rn,function(e,n,t,i){var t=this.body.try_inline(e,n,t,i),r=(t&&(this.body=t),this.expression);if(r instanceof Pe){e=Mr(e,n,!0,i,!1,r,1);if(e)return this.expression=r.tail_node(),e.body.push(this),e}return t&&this}),e(Bn,function(e,n,t,i){if(e.option("yields")&&this.nested){var r=this.expression;if("Call"==r.TYPE){var o=r.expression;switch(o.CTOR){case re:o=Ve(te,o);break;case AST_GeneratorFunction:o=Ve(mn,o);break;default:return}return(r=r.clone()).expression=o,r.try_inline(e,n,t,i)}}}),n(Fe,function(e,n){var t=e.value;return t&&n.option("side_effects")&&mi(t,n)&&!Vt(n.find_parent(je))&&(e.value=null),e}),{Compressor:ct}}),define("skylark-uglifyjs/sourcemap",["./utils"],function(e){"use strict";const{characters:n,Dictionary:r}=e;var i=n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),g=i.reduce(function(e,n,t){return e[n]=t,e},Object.create(null));function b(e){var n="";e=Math.abs(e)<<1|e>>>31;do{var t=31&e}while((e>>>=5)&&(t|=32),n+=i[t],e);return n}function t(){var t=new r,i=[];return i.index=function(e){var n=t.get(e);return 0<=n||(n=i.length,i.push(e),t.set(e,n)),n},i}return{SourceMap:function(l){var s,a=t(),o=l.includeSources&&new r,f=t(),c="",u=(l.orig&&Object.keys(l.orig).forEach(function(e){var n=l.orig[e],t=[0,0,1,0,0];if(l.orig[e]={names:n.names,mappings:n.mappings.split(/;/).map(function(e){return t[0]=0,e.split(/,/).map(function(e){return t.slice(0,function(e,n){for(var t=0,i=0,r=0,o=0;r<n.length;r++){var s=g[n[r]];t+=(31&s)<<i,32&s?i+=5:(e[o++]+=1&t?2147483648|-(t>>1):t>>1,t=i=0)}return o}(t,e))})}),sources:n.sources},o&&n.sourcesContent)for(var i=0;i<n.sources.length;i++){var r=n.sourcesContent[i];r&&o.set(n.sources[i],r)}}),1),p=0,d=0,h=1,_=0,v=0;return{add:l.orig?function(e,n,t,i,r,o){var s=l.orig[e];if(s){var a,f=s.mappings[i-1];if(!f)return;for(var c=0;c<f.length;c++){var u=f[c][0];if(u<=r&&(a=f[c]),r<=u)break}!a||a.length<4?e=null:(e=s.sources[a[1]],i=a[2],r=a[3],4<a.length&&(o=s.names[a[4]]))}m(e,n,t,i,r,o)}:m,setSourceContent:o?function(e,n){o.has(e)||o.set(e,n)}:noop,toString:function(){return JSON.stringify({version:3,file:l.filename||void 0,sourceRoot:l.root||void 0,sources:a,sourcesContent:o?a.map(function(e){return o.get(e)||null}):void 0,names:f,mappings:c})}};function m(e,n,t,i,r,o){if(null!=s||null!=e){if(s=e,u<n)for(p=0;c+=";",++u<n;);else c&&(c+=",");c+=b(t-p),p=t,null!=e&&(t=a.index(e),c+=b(t-d),d=t,c+=b(i-h),h=i,c+=b(r-_),_=r,l.names)&&null!=o&&(e=f.index(o),c+=b(e-v),v=e)}}}}}),define("skylark-uglifyjs/propmangle",["./utils","./ast","./scope"],function(e,n,t){"use strict";const{defaults:_,push_uniq:i,Dictionary:v}=e,m=t["base54"],{AST_Binary:g,AST_Conditional:b,AST_Dot:y,AST_ObjectProperty:w,AST_Sequence:x,AST_String:S,AST_Sub:k,TreeWalker:T}=n;function A(){var n=new v,e=(["NaN","null","true","false","Infinity","-Infinity","undefined"].forEach(t),["encodeURI","encodeURIComponent","escape","eval","decodeURI","decodeURIComponent","isFinite","isNaN","parseFloat","parseInt","unescape"].forEach(t),Function("return this")());return["Array","ArrayBuffer","Atomics","BigInt","Boolean","console","DataView","Date","Error","Function","Int8Array","Intl","JSON","Map","Math","Number","Object","Promise","Proxy","Reflect","RegExp","Set","String","Symbol","WebAssembly"].forEach(function(n){t(n);n=e[n];if(n&&(Object.getOwnPropertyNames(n).map(t),"function"==typeof n)){n.__proto__&&Object.getOwnPropertyNames(n.__proto__).map(t),n.prototype&&Object.getOwnPropertyNames(n.prototype).map(t);try{Object.getOwnPropertyNames(new n).map(t)}catch(e){try{Object.getOwnPropertyNames(n()).map(t)}catch(e){}}}}),(A=function(){return n.clone()})();function t(e){n.set(e,!0)}}function E(e,n){e instanceof b?(E(e.consequent,n),E(e.alternative,n)):e instanceof x?E(e.tail_node(),n):e instanceof S&&n(e.value)}return{mangle_properties:function(e,t){var i,r,n=(t=_(t,{builtins:!1,cache:null,debug:!1,domprops:!1,keep_quoted:!1,regex:null,reserved:null},!0)).builtins?new v:A(),o=(t.domprops||"undefined"==typeof domprops||domprops.forEach(function(e){n.set(e,!0)}),Array.isArray(t.reserved)&&t.reserved.forEach(function(e){n.set(e,!0)}),-1),s=(t.cache?(i=t.cache.props).each(function(e){n.set(e,!0)}):i=new v,t.regex),a=!1!==t.debug,f=(a&&(r=!0===t.debug?"":t.debug),new v),c=n.clone();function u(e){return!c.has(e)&&!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(e)}function l(e){if(n.has(e))AST_Node.info("Preserving reserved property {this}",e);else{if(!s||s.test(e))return i.has(e)||f.has(e);AST_Node.info("Preserving excluded property {this}",e)}}function p(e){u(e)&&f.set(e,!0),l(e)||c.set(e,!0)}function d(e){if(!l(e))return e;var n,t=i.get(e);if(!t){if(!(t=a&&u(n="_$"+e+"$"+r+"_")?n:t))for(;!u(t=m(++o)););/^#/.test(e)&&(t="#"+t),i.set(e,t)}return AST_Node.info("Mapping property {name} to {mangled}",{mangled:t,name:e}),t}function h(e){e instanceof x?h(e.tail_node()):e instanceof S?e.value=d(e.value):e instanceof b&&(h(e.consequent),h(e.alternative))}e.walk(new T(function(e){if("Call"==e.TYPE){var n=e.expression;if(n instanceof y)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":e.args.length<2||(n=n.expression)instanceof AST_SymbolRef&&"Object"==n.name&&n.definition().undeclared&&E(e.args[1],p);break;case"hasOwnProperty":e.args.length<1||E(e.args[0],p)}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof w?e.key instanceof AST_Node?E(e.key,p):p(e.key):e instanceof y?is_lhs(e,this.parent())&&p(e.property):e instanceof k&&is_lhs(e,this.parent())&&E(e.property,p)})),e.walk(new T(function(e){if(e instanceof g)"in"==e.operator&&h(e.left);else if("Call"==e.TYPE){var n=e.expression;if(n instanceof y)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":e.args.length<2||(n=n.expression)instanceof AST_SymbolRef&&"Object"==n.name&&n.definition().undeclared&&h(e.args[1]);break;case"hasOwnProperty":e.args.length<1||h(e.args[0])}}else e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof w?e.key instanceof AST_Node?h(e.key):e.key=d(e.key):e instanceof y?e.property=d(e.property):e instanceof k&&(t.keep_quoted||h(e.property))}))},reserve_quoted_keys:function(e,n){function t(e){i(n,e)}e.walk(new T(function(e){e instanceof AST_ClassProperty||e instanceof AST_DestructuredKeyVal||e instanceof w?e.key instanceof AST_Node?E(e.key,t):e.start&&e.start.quote&&t(e.key):e instanceof y?e.quoted&&t(e.property):e instanceof k&&E(e.property,t)}))}}}),define("skylark-uglifyjs/minify",["./utils","./ast","./parse","./output","./compress","./sourcemap","./propmangle"],function(e,n,t,i,r,o,s){"use strict";const{defaults:d,HOP:h}=e,{AST_Toplevel:_,AST_Node:v}=n,m=t["parse"],g=i["OutputStream"],b=r["Compressor"],y=o["SourceMap"],{mangle_properties:w,reserve_quoted_keys:x}=s;var S,k;function T(n){try{return JSON.parse(n)}catch(e){throw new Error("invalid input source map: "+n)}}function A(n,t,e){e.forEach(function(e){t[e]&&("object"!=typeof t[e]&&(t[e]={}),n in t[e]||(t[e][n]=t[n]))})}function E(e){e&&("props"in e?e.props instanceof Dictionary||(e.props=Dictionary.fromObject(e.props)):e.props=new Dictionary)}function D(e){return{props:e.props.toObject()}}return k="undefined"==typeof Buffer?(S=atob,btoa):void 0===Buffer.alloc?(S=function(e){return new Buffer(e,"base64").toString()},function(e){return new Buffer(e).toString("base64")}):(S=function(e){return Buffer.from(e,"base64").toString()},function(e){return Buffer.from(e).toString("base64")}),{minify:function(i,r){try{(r=d(r,{annotations:void 0,compress:{},enclose:!1,expression:!1,ie:!1,ie8:!1,keep_fargs:!1,keep_fnames:!1,mangle:{},module:!1,nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:!(!r||!r.module),v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0)).validate&&v.enable_validation();var e,o,n=r.timings&&{start:Date.now()},t=(void 0!==r.annotations&&A("annotations",r,["compress","output"]),r.expression&&A("expression",r,["compress","parse"]),r.ie8&&(r.ie=r.ie||r.ie8),r.ie&&A("ie",r,["compress","mangle","output","rename"]),r.keep_fargs&&A("keep_fargs",r,["compress","mangle","rename"]),r.keep_fnames&&A("keep_fnames",r,["compress","mangle","rename"]),r.module&&A("module",r,["compress","parse"]),r.toplevel&&A("toplevel",r,["compress","mangle","rename"]),r.v8&&A("v8",r,["mangle","output","rename"]),r.webkit&&A("webkit",r,["compress","mangle","output","rename"]),r.mangle&&(r.mangle=d(r.mangle,{cache:r.nameCache&&(r.nameCache.vars||{}),eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),r.mangle.properties&&("object"!=typeof r.mangle.properties&&(r.mangle.properties={}),r.mangle.properties.keep_quoted&&(e=r.mangle.properties.reserved,Array.isArray(e)||(e=[]),r.mangle.properties.reserved=e),!r.nameCache||"cache"in r.mangle.properties||(r.mangle.properties.cache=r.nameCache.props||{})),E(r.mangle.cache),E(r.mangle.properties.cache)),void 0===r.rename&&(r.rename=r.compress&&r.mangle),r.sourceMap&&(r.sourceMap=d(r.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0)),[]);if(r.warnings&&v.log_function(function(e){t.push(e)},"verbose"==r.warnings),n&&(n.parse=Date.now()),r.parse=r.parse||{},i instanceof v)o=i;else{"string"==typeof i&&(i=[i]),r.parse.toplevel=null;var s,a=r.sourceMap&&r.sourceMap.content;for(u in(a="string"==typeof a&&"inline"!=a?T(a):a)&&(r.sourceMap.orig=Object.create(null)),i)h(i,u)&&(r.parse.filename=u,r.parse.toplevel=o=m(i[u],r.parse),"inline"==a?(s=function(e,n){for(var t=n.end.comments_after,i=t.length;0<=--i;){var r=t[i];if("comment1"!=r.type)break;r=/^# ([^\s=]+)=(\S+)\s*$/.exec(r.value);if(!r)break;if("sourceMappingURL"==r[1]){if(r=/^data:application\/json(;.*?)?;base64,([^,]+)$/.exec(r[2]))return S(r[2]);break}}v.warn("inline source map not found: {name}",{name:e})}(u,o))&&(r.sourceMap.orig[u]=T(s)):a&&(r.sourceMap.orig[u]=a))}r.parse.expression&&(o=o.wrap_expression()),e&&x(o,e),["enclose","wrap"].forEach(function(e){var n,t=r[e];t&&(n=o.print_to_string().slice(0,-1),o=o[e](t),i[o.start.file]=o.print_to_string().replace(n,""))}),r.validate&&o.validate_ast(),n&&(n.rename=Date.now()),r.rename&&(o.figure_out_scope(r.rename),o.expand_names(r.rename)),n&&(n.compress=Date.now()),r.compress&&(o=new b(r.compress).compress(o),r.validate)&&o.validate_ast(),n&&(n.scope=Date.now()),r.mangle&&o.figure_out_scope(r.mangle),n&&(n.mangle=Date.now()),r.mangle&&(o.compute_char_frequency(r.mangle),o.mangle_names(r.mangle)),n&&(n.properties=Date.now()),e&&x(o,e),r.mangle&&r.mangle.properties&&w(o,r.mangle.properties),r.parse.expression&&(o=o.unwrap_expression()),n&&(n.output=Date.now());var f={},c=d(r.output,{ast:!1,code:!0});if(c.ast&&(f.ast=o),c.code){if(r.sourceMap&&(c.source_map=y(r.sourceMap),r.sourceMap.includeSources)){if(i instanceof _)throw new Error("original source content unavailable");for(var u in i)h(i,u)&&c.source_map.setSourceContent(u,i[u])}delete c.ast,delete c.code;var l,p=g(c);o.print(p),f.code=p.get(),r.sourceMap&&(f.map=c.source_map.toString(),l=r.sourceMap.url)&&(f.code=f.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),f.code+="inline"==l?"\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+k(f.map):"\n//# sourceMappingURL="+l)}return r.nameCache&&r.mangle&&(r.mangle.cache&&(r.nameCache.vars=D(r.mangle.cache)),r.mangle.properties)&&r.mangle.properties.cache&&(r.nameCache.props=D(r.mangle.properties.cache)),n&&(n.end=Date.now(),f.timings={parse:.001*(n.rename-n.parse),rename:.001*(n.compress-n.rename),compress:.001*(n.scope-n.compress),scope:.001*(n.mangle-n.scope),mangle:.001*(n.properties-n.mangle),properties:.001*(n.output-n.properties),output:.001*(n.end-n.output),total:.001*(n.end-n.start)}),t.length&&(f.warnings=t),f}finally{v.log_function(),v.disable_validation()}}}}),define("skylark-uglifyjs/main",["./minify"],function(e){return e}),define("skylark-uglifyjs",["skylark-uglifyjs/main"],function(e){return e});
},this,define,require);
//# sourceMappingURL=sourcemaps/skylark-uglifyjs.js.map
